---
title: Обзор виртуализации сети Hyper-V в Windows Server 2016
description: В этом разделе приводятся общие сведения о виртуализации сети Hyper-V в Windows Server 2016.
manager: grcusanz
ms.topic: article
ms.assetid: 0115b7ad-d229-4c69-9d7e-a3f5fbaa3b2f
ms.author: anpaul
author: AnirbanPaul
ms.date: 08/07/2020
ms.openlocfilehash: 7e4483218c35a99f898701fbdd7fdbe86b021206
ms.sourcegitcommit: 40905b1f9d68f1b7d821e05cab2d35e9b425e38d
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/06/2021
ms.locfileid: "97949100"
---
# <a name="hyper-v-network-virtualization-overview-in-windows-server-2016"></a>Обзор виртуализации сети Hyper-V в Windows Server 2016

>Применяется к: Windows Server (Semi-Annual Channel), Windows Server 2016

В Windows Server 2016 и Virtual Machine Manager Майкрософт предоставляет комплексное решение виртуализации сети.  Существует пять основных компонентов, составляющих решение виртуализации сети корпорацией Майкрософт:

-   **Windows Azure Pack для Windows Server** предоставляет портал клиента для создания виртуальных сетей, а также административный портал для управления виртуальными сетями.

-   **Virtual Machine Manager** (VMM) обеспечивает централизованное управление структурой сети.

-   **Сетевой контроллер Майкрософт** предоставляет централизованную, программируемую точку автоматизации для управления, настройки, мониторинга и устранения неполадок виртуальной и физической сетевой инфраструктуры в центре обработки данных.

-   **Виртуализация сети Hyper-V** предоставляет инфраструктуру для виртуализации сетевого трафика.

-   **Шлюзы виртуализации сети Hyper-V** обеспечивают подключения между виртуальными и физическими сетями.

В этом разделе представлены основные понятия и объясняются основные преимущества и возможности виртуализации сети Hyper-V (одна из частей общего решения виртуализации сети) в Windows Server 2016. Здесь также описаны преимущества применения виртуализации сети как для частных облаков, предназначенных для консолидации корпоративной рабочей нагрузки, так и для поставщиков общедоступных облачных служб, предоставляющих инфраструктуру как услугу (IaaS).

Дополнительные технические сведения о виртуализации сети в Windows Server 2016 см. [в статье технические сведения о виртуализации сети Hyper-V в Windows server 2016](../../../sdn/technologies/hyper-v-network-virtualization/hyperv-network-virtualization-technical-details-windows-server.md).

**Вы имели в виду**

-   [Обзор виртуализации сети Hyper-V](assetId:///bf1dba9d-1960-4dd2-a5e2-99466a02044b) (Windows Server 2012 R2)

-   [Обзор Hyper-V](assetId:///5aad349f-ef06-464a-b36f-366fbb040143)

-   [Обзор виртуального коммутатора Hyper-V](assetId:///e6ec46af-6ef4-49b3-b1f1-5268dc03f05b)

## <a name="feature-description"></a><a name="BKMK_OVER"></a>Описание функции
Виртуализация сети Hyper-V предоставляет виртуальным машинам виртуальным сетям (называемым сетью ВИРТУАЛЬНЫХ машин), аналогично тому, как виртуализация серверов предоставляет операционной системе "виртуальные машины". Виртуализация сети разрывает связь виртуальных сетей с инфраструктурой физической сети и освобождает процесс подготовки виртуальной машины от ограничений со стороны виртуальной локальной сети и иерархического назначения IP-адресов. Данная гибкость обеспечивает клиентам легкость перемещения в облака IaaS, а поставщикам услуг размещения и администраторам центров обработки данных — рациональность управления их инфраструктурой. При этом также сохраняется необходимая изоляция при обслуживании нескольких клиентов, выполняются требования безопасности и реализуется поддержка перекрывающихся IP-адресов виртуальных машин.

Клиентам необходим способ органичного расширения своих центров обработки данных в облако. Сегодня создание такой цельной гибридной облачной архитектуры связано с техническими трудностями. Одна из крупнейших трудностей заключается в повторном использовании существующих сетевых топологий (подсетей, IP-адресов, сетевых служб и т. д.) в облаке и мосте между локальными ресурсами и их облачными ресурсами.  Виртуализация сети Hyper-V реализует концепцию сети виртуальной машины, которая не зависит от лежащей в ее основе физической сети. В этой концепции сети виртуальной машины, состоящей из одной или нескольких виртуальных подсетей, точное расположение физической сети виртуальных машин, подключенных к виртуальной сети, не привязано к топологии виртуальной сети. Это позволяет клиентам легко переносить свои виртуальные подсети в облако, сохраняя при этом существующие IP-адреса и топологию в облаке, за счет чего существующие службы продолжают работать независимо от физического расположения подсетей. Таким образом, виртуализация сети Hyper-V позволяет создать цельное гибридное облако.

В дополнение к гибридному облаку многие организации объединяют свои центры обработки данных и создают частные облака, чтобы внутри организации пользоваться преимуществами облачной архитектуры в отношении производительности и масштабируемости. Виртуализация сети Hyper-V обеспечивает лучшую гибкость и эффективность для частных облаков путем разделения топологии сети подразделения (сделав ее виртуальным) из реальной топологии физической сети. Это позволяет подразделениям организации легко получать общий доступ к внутреннему частному облаку, оставаясь при этом изолированными друг от друга и сохраняя существующие сетевые топологии. Группа эксплуатации центра обработки данных получает возможность разворачивать и динамически перемещать рабочие нагрузки в любое место центра обработки данных без перерывов в работе сервера, что обеспечивает повышение эффективности работы и улучшение производительности центра обработки данных в целом.

Для владельцев рабочей нагрузки основное преимущество заключается в том, что теперь они могут перемещать свои рабочие нагрузки "топологии" в облако, не изменяя их IP-адреса или переписывая свои приложения. Например, обычное бизнес-приложение включает в себя уровень интерфейсной части, уровень бизнес-логики и уровень базы данных. Используя политику, виртуализация сети Hyper-V позволяет клиенту перенести эти три уровня в облако целиком или частично, сохраняя при этом топологию маршрутизации и IP-адреса служб (то есть IP-адреса виртуальных машин) и не требуя изменения приложений.

Для владельцев инфраструктуры дополнительная свобода в размещении виртуальных машин означает возможность перемещения рабочих нагрузок в любое место центров обработки данных без смены виртуальных машин и перенастройки сетей. Например, виртуализация сети Hyper-V обеспечивает динамическую миграцию между подсетями, так что виртуальная машина может быть перемещена в любое место центра обработки данных с помощью динамической миграции без приостановки на обслуживание. Ранее динамическая миграция могла быть выполнена только в пределах одной подсети, а значит, места расположения виртуальных машин были ограничены. Динамическая миграция между подсетями позволяет администраторам объединять рабочие нагрузки на основании динамических требований к ресурсам, эффективности энергопотребления, а также обеспечивает возможность проведения обслуживания инфраструктуры без приостановки функционирования рабочей нагрузки клиентов.

## <a name="practical-applications"></a><a name="BKMK_APP"></a>Практическое применение
Благодаря успеху виртуализированных центров обработки данных ИТ-организации и поставщики услуг размещения (поставщики, которые предлагают совместное размещение или сдачу внаем физических серверов) начали предлагать более гибкие виртуализированные инфраструктуры, которые упрощают предоставление клиентам серверного пространства по требованию. Этот новый класс услуг получил название "инфраструктура как услуга" (IaaS). Windows Server 2016 предоставляет все необходимые возможности платформы, позволяющие корпоративным клиентам создавать частные облака и переходить на нее в качестве рабочей модели службы. Windows Server 2016 2016 также позволяет поставщикам услуг размещения создавать общедоступные облака и предлагать решения IaaS своим клиентам. В сочетании с Virtual Machine Manager и Windows Azure Pack для управления политикой виртуализации сети Hyper-V Корпорация Майкрософт предоставляет мощное облачное решение.

Виртуализация сети Hyper-V в Windows Server 2016 обеспечивает основанную на политиках виртуализацию сети, которая сокращает затраты на управление, с которыми сталкиваются предприятия при развертывании выделенных облаков IaaS, и предоставляет облачные механизмы для повышения гибкости и масштабируемости управления виртуальными машинами для достижения более высокого уровня использования ресурсов.

Сценарий IaaS, включающий виртуальные машины из разных отделов предприятия (выделенное облако) или для разных клиентов (размещенное облако), требует надежной изоляции. Современные решения, виртуальные локальные сети (VLAN), могут представлять значительные недостатки в этом сценарии.

**Виртуальные локальные сети**

В настоящее время виртуальные ЛС — это механизм, который большинство организаций использует для поддержки использования адресного пространства и изоляции клиентов. В виртуальной локальной сети применяются явные пометки (ИД виртуальной ЛС) в заголовках кадров Ethernet, а обеспечение изоляции и ограничение трафика к сетевым узлам с одинаковым ИД виртуальной ЛС реализуется с помощью коммутаторов Ethernet. Можно назвать следующие основные недостатки виртуальных локальных сетей:

-   повышенный риск случайного отключения по причине громоздкой процедуры перенастройки коммутаторов рабочей среды каждый раз, когда виртуальные машины или границы изоляции перемещаются в динамическом центре обработки данных;

-   ограниченные возможности масштабирования, поскольку число виртуальных локальных сетей ограничено 4094, а маршрутизаторы обычно поддерживают не более 1000 идентификаторов виртуальных ЛС;

-   существование в пределах одной IP-подсети, что ограничивает как количество узлов в одной виртуальной локальной сети, так и размещение виртуальных машин на основании физического расположения. Хотя виртуальные локальные сети могут быть развернуты между сайтами, вся виртуальная локальная сеть должна находиться в пределах одной подсети.

**Назначение IP-адресов**

Помимо недостатков, представленных виртуальными ЛС, назначение IP-адресов виртуальной машины представляет проблемы, которые включают:

-   IP-адреса виртуальных машин определяются физическим расположением в сетевой инфраструктуре центра обработки данных. В результате для перемещения в облако обычно требуется менять IP-адреса рабочей нагрузки служб.

-   Политики, такие как правила брандмауэра, обнаружение ресурсов и службы каталогов и т. д., привязаны к IP-адресам. Изменение IP-адресов требует обновления всех сопоставленных политик.

-   Развертывание виртуальной машины и изоляция трафика зависят от топологии.

Когда администраторы сети центра обработки данных планируют физическую структуру центра, им необходимо принимать решения относительно физического расположения подсетей и их маршрутизации. Эти решения основываются на технологии IP и Ethernet, которая влияет на потенциальные IP-адреса, доступные для виртуальных машин, запущенных на конкретном сервере или сверхкомпактном сервере, подключенном к определенной стойке в центре обработки данных. Подготовленная и размещенная в центре обработки данных виртуальная машина должна соответствовать этим стратегиям и ограничениям относительно IP-адресов. Соответственно, администраторы центров обработки данных обычно присваивают виртуальным машинам новые IP-адреса.

Проблема, связанная с этим требованием, заключается в том, что в дополнение к наличию адреса имеются также семантическая сведения, сопоставленные с IP-адресом. Например, одна подсеть может включать в себя конкретные службы или иметь определенное физическое расположение. Правила брандмауэра, политики управления доступом и сопоставления безопасности IPsec обычно сопоставлены IP-адресам. Изменение IP-адресов вынуждает владельцев виртуальных машин вносить поправки во все свои политики, которые были основаны на исходном IP-адресе. Данные расходы на перенумерацию настолько высоки, что многие предприятия развертывают в облаке только новые службы и не трогают уже имеющиеся приложения.

Виртуализация сети Hyper-V разрывает связь виртуальных сетей, объединяющих виртуальные машины клиента, с инфраструктурой физической сети. В результате она позволяет виртуальным машинам клиента сохранять свои исходные IP-адреса, а также дает администраторам центров обработки данных возможность подготавливать виртуальные машины клиентов в любом месте центра обработки данных без перенастройки физических IP-адресов или ИД виртуальных ЛС. Обзор основных функциональных возможностей приводится в следующей части.

## <a name="important-functionality"></a><a name="BKMK_NEW"></a>Важные функции
Ниже приведен список ключевых функций, преимуществ и возможностей виртуализации сети Hyper-V в Windows Server 2016.

-   **Обеспечивает гибкое размещение рабочей нагрузки — сетевую изоляцию и повторное использование IP-адресов без виртуальных ЛС.**

    Виртуализация сети Hyper-V разделяет виртуальные сети клиента от инфраструктуры физической сети поставщиков услуг размещения, обеспечивая свободу размещения рабочих нагрузок в центрах обработки данных. Размещение нагрузки на виртуальной машине больше не имеет ограничений со стороны назначения IP-адресов или требований физической сети в отношении изоляции виртуальной локальной сети, поскольку оно реализуется в узлах Hyper-V на основании политик виртуализации, которые управляются программным обеспечением и поддерживают обслуживание нескольких клиентов.

    Виртуальные машины разных клиентов с перекрывающимися IP-адресами теперь могут быть развернуты на одном сервере узла без необходимости громоздкой настройки виртуальной локальной сети или нарушения иерархии IP-адресов. Это может упростить перенос рабочих нагрузок клиентов к поставщикам услуг размещения IaaS с общим доступом, поскольку позволит клиентам переносить рабочие нагрузки без изменений, включая сохранение IP-адресов виртуальных машин. Для поставщика услуг размещения поддержка большого количества клиентов, которые хотят расширить свое существующее пространство сетевых адресов на центр обработки данных IaaS с общим доступом, — это сложная задача, требующая настройки и поддержания изолированных виртуальных локальных сетей для каждого клиента, чтобы обеспечить совместное существование потенциально перекрывающихся пространств адресов. С помощью виртуализации сети Hyper-V поддерживать перекрывающиеся адреса становится проще. Это также требует меньше работы по перенастройке сети со стороны поставщика услуг размещения.

    Кроме того, обслуживание и обновления физической инфраструктуры можно проводить без приостановки функционирования рабочих нагрузок клиентов. Виртуализация сети Hyper-V позволяет переносить виртуальные машины, находящиеся на определенном сервере, в определенной стойке, в определенной подсети, виртуальной локальной сети, либо всего кластера без необходимости менять физический IP-адрес или проводить масштабную перенастройку.

-   **Обеспечение простоты перемещения рабочих нагрузок в облако IaaS с общим доступом**

    Виртуализация сети Hyper-V позволяет сохранять IP-адреса и настройки виртуальных машин. Это дает ИТ-организациям возможность с большей легкостью перемещать рабочие нагрузки со своих центров обработки данных к поставщику услуг размещения IaaS с общим доступом — потребуются минимальные изменения параметров рабочей нагрузки или инструментов и политик инфраструктуры. При наличии подключения между двумя центрами обработки данных ИТ-администраторы могут продолжить использование инструментов без перенастройки.

-   **Обеспечение динамической миграции между подсетями**

    Динамическая миграция рабочих нагрузок виртуальных машин обычно ограничена одной и той же IP-подсетью или виртуальной ЛС, так как пересечение подсетей требует, чтобы гостевая операционная система виртуальной машины изменила свой IP-адрес. Такое изменение адреса нарушает существующие связи и работу служб, запущенных на виртуальной машине. С помощью виртуализации сети Hyper-V рабочие нагрузки можно динамически перенести с серверов под управлением Windows Server 2016 в одной подсети на серверы под управлением Windows Server 2016 в другой подсети, не изменяя IP-адреса рабочей нагрузки. Виртуализация сети Hyper-V обеспечивает обновление и синхронизацию изменений расположения виртуальных машин, вызванных динамической миграцией, между узлами, которые имеют непрерывную связь с перемещенной виртуальной машиной.

-   **Обеспечение простоты управления несвязанным администрированием сервера и сети**

    Размещение рабочей нагрузки на сервере упрощается, потому что миграция и размещение рабочих нагрузок не зависят от параметров лежащей в основе физической сети. Администраторы серверов могут сосредоточиться на управлении службами и серверами, а администраторы сетей — на общей сетевой инфраструктуре и управлении трафиком. Это позволяет администраторам серверов ЦОД развертывать и перемещать виртуальные машины без необходимости менять их IP-адреса. Снижаются затраты, потому что при использовании виртуализации сети Hyper-V размещение виртуальных машин может происходить независимо от топологии сети, а значит, снижается необходимость контроля со стороны администраторов сети за размещениями, которые могут вызвать изменение границ изоляции.

-   **Упрощение сети и повышение эффективности использования ресурсов сервера и сети**

    Отсутствие гибкости у виртуальных локальных сетей и зависимость размещения виртуальных машин от инфраструктуры физической сети выражаются в излишней подготовке ресурсов и недостаточной эффективности их использования. Разрывая эту зависимость, увеличенная гибкость размещения рабочих нагрузок на виртуальных машинах помогает упростить управление сетью и повысить эффективность использования ресурсов серверов и сетей. Обратите внимание, что виртуализация сети Hyper-V поддерживает виртуальные локальные сети в контексте физического центра обработки данных. Например, весь трафик виртуализации сети Hyper-V в центре обработки данных может быть помещен в определенную виртуальную локальную сеть.

-   **Совместимость с существующей инфраструктурой и развивающимися технологиями**

    Виртуализация сети Hyper-V может быть развернута в современном центре обработки данных, но она совместима с технологиями «плоской сети».

    Например, HNV в Windows Server 2016 поддерживает формат инкапсуляции ВКСЛАН и открытый протокол управления базой данных vSwitch (ОВСДБ) в качестве интерфейса Подсистемамми (ЛИКВИДНЫЙ SBI).

-   **Обеспечение взаимодействия и адаптации к экосистеме**

    Чтобы обеспечить связь с существующими ресурсами, виртуализация сети Hyper-V поддерживает наличие нескольких конфигураций, таких как перекрестное подключение в сетях организации, сеть хранения данных (SAN), невиртуализированный доступ к ресурсу и т. д. Корпорация Майкрософт стремится к сотрудничеству с партнерами по экосистеме, чтобы обеспечить поддержку и улучшение взаимодействия виртуализации сети Hyper-V в отношении производительности, масштабируемости и управляемости.

-   **Настройка на основе политик**

    Политики виртуализации сети в Windows Server 2016 настраиваются с помощью сетевого контроллера (Майкрософт). Сетевой контроллер имеет API RESTFUL обмена и интерфейс Windows PowerShell для настройки политики. Дополнительные сведения о сетевом контроллере Майкрософт см. в разделе [сетевой контроллер](../../../sdn/technologies/network-controller/../../../sdn/technologies/network-controller/Network-Controller.md).

## <a name="software-requirements"></a><a name="BKMK_SOFT"></a>Требования к программному обеспечению
Для виртуализации сети Hyper-V с использованием сетевого контроллера Майкрософт требуется Windows Server 2016 и роль Hyper-V.

## <a name="see-also"></a><a name="BKMK_LINKS"></a> См. также
Дополнительные сведения о виртуализации сети Hyper-V в Windows Server 2016 см. по следующим ссылкам:


|       Тип содержимого       |                                                                                                                                Ссылки                                                                                                                                |
|--------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Ресурсы сообщества**  |     -   [Блог по архитектуре частного облака](/archive/blogs/privatecloud/cloud-datacenter-network-architecture-in-the-windows-server-8-era)<br />— Задать вопросы: [cloudnetfb@microsoft.com](mailto:%20cloudnetfb@microsoft.com)     |
|         **RFC**          |                                                                                                     -ВКСЛАН- [RFC 7348](https://www.rfc-editor.org/info/rfc7348)                                                                                                      |
| **Связанные технологии** | -   [Сетевой контроллер](../../../sdn/technologies/network-controller/../../../sdn/technologies/network-controller/Network-Controller.md)<br />-   [Обзор виртуализации сети Hyper-V](assetId:///bf1dba9d-1960-4dd2-a5e2-99466a02044b) (Windows Server 2012 R2) |