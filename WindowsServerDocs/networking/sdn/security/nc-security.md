---
title: Безопасность сетевого контроллера
description: В этом разделе можно использовать, чтобы узнать, как настроить безопасность для весь обмен данными между сетевым контроллером и другое программное обеспечение и устройства.
manager: dougkim
ms.prod: windows-server-threshold
ms.technology: networking-sdn
ms.topic: article
ms.assetid: bc625de9-ee31-40a4-9ad2-7448bfbfb6e6
ms.author: pashort
author: shortpatti
ms.date: 08/30/2018
ms.openlocfilehash: fccd6ee1ba734d72629264bd5b3bb7d93ddcdb70
ms.sourcegitcommit: 0d0b32c8986ba7db9536e0b8648d4ddf9b03e452
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/17/2019
ms.locfileid: "59884765"
---
# <a name="secure-the-network-controller"></a>Безопасность сетевого контроллера

В этом разделе вы узнаете, как настроить безопасность для всех подключений между [сетевого контроллера](../technologies/network-controller/network-controller.md) и другим программным обеспечением, так и для устройств. 

Каналы связи, которые могут защитить включают Северный связи в плоскости управления, взаимодействия между виртуальным машинам сетевого контроллера \(виртуальных машин\) в кластер и Подсистемамми связи данных плоскость.

1. **Северный связи**. Сетевой контроллер осуществляет связь через плоскость управления с помощью SDN\-управления, поддерживающей программного обеспечения, таких как Windows PowerShell и System Center Virtual Machine Manager \(SCVMM\). Эти средства дают возможность определить политики сети и создать состояние цели для сети, для которого вы можете сравнить конфигурацию действительными сетевыми на фактическую конфигурацию в те же целевое состояние.

2. **Сетевых подключений контроллера кластера**. При настройке три или более виртуальных машин в качестве узлов кластера сетевого контроллера, эти узлы взаимодействуют друг с другом. Это взаимодействие может быть связана с синхронизации и репликации данных между узлами, взаимодействия между службами сетевого контроллера.

3.  **Подсистемамми**. Сетевой контроллер осуществляет связь через плоскости данных с помощью инфраструктуры SDN и других устройств, например программные подсистемы балансировки нагрузки, шлюзы и хост-компьютерах. Сетевой контроллер можно использовать для настройки и управления этими устройствами южного так, чтобы они целевое состояние, которое вы настроили для сети.


## <a name="northbound-communication"></a>Северный связи

Сетевой контроллер поддерживает проверку подлинности, авторизацию и шифрование для Северный взаимодействия. В следующих разделах сведения о том, как настроить эти параметры безопасности.

### <a name="authentication"></a>Проверка подлинности

При настройке проверки подлинности для сетевого контроллера Северный связи позволяет узлами кластера сетевого контроллера и управления клиентами для проверки удостоверения устройства, с которым они взаимодействуют.

Сетевой контроллер поддерживает следующих трех режимов проверки подлинности между управления клиентами и узлами сетевого контроллера.

>[!Note]
>Если вы собираетесь выполнять развертывание сетевого контроллера с помощью Virtual Machine Manager System Center только **Kerberos** режим поддерживается.

1. **Kerberos**. Используйте проверку подлинности Kerberos, при присоединении к домену Active Directory клиента управления и всех узлах кластера сетевого контроллера. Домен Active Directory должен иметь учетные записи домена, используемый для проверки подлинности.

2. **X509**. Используйте X509 для сертификата\-на основе проверки подлинности для управления клиентами, не входящих в домен Active Directory. Необходимо зарегистрировать сертификаты, чтобы все узлы кластера сетевого контроллера и управления клиентами. Кроме того все узлы и клиенты управления должны доверять сертификаты других пользователей.

3. **Нет**. Используйте None для тестирования в тестовой среде и может быть, поэтому не рекомендуется для использования в рабочей среде. Если выбран этот режим, нет проверки подлинности выполняется между узлами и клиенты управления.

С помощью команды Windows PowerShell можно настроить метод проверки подлинности для связи Северный **[установки NetworkController](https://technet.microsoft.com/itpro/powershell/windows/network-controller/install-networkcontroller)** с _ClientAuthentication_ параметра. 


### <a name="authorization"></a>Authorization

При настройке авторизации для обмена данными Северный сетевого контроллера позволяет узлы кластера сетевого контроллера и клиенты управления, чтобы убедиться, что устройство, с которым они взаимодействуют является доверенным и имеет разрешение на участие в обмен данными.

Используйте следующие методы авторизации для каждого из режимов проверки подлинности, поддерживаемые сетевым контроллером.

1.  **Kerberos**. При использовании метода проверки подлинности Kerberos, вы определяете, пользователей и компьютеров, авторизованных для обмена данными с сетевым контроллером, создание группы безопасности в Active Directory, а затем добавив авторизованные пользователи и компьютеры в группу. Можно настроить сетевой контроллер использовать группу безопасности для авторизации с помощью _ClientSecurityGroup_ параметр **[установки NetworkController](https://technet.microsoft.com/itpro/powershell/windows/network-controller/install-networkcontroller)** Команда Windows PowerShell. После установки сетевого контроллера, можно изменить группу безопасности с помощью **[набора NetworkController](https://technet.microsoft.com/itpro/powershell/windows/network-controller/set-networkcontroller)** команду с параметром _- ClientSecurityGroup_ . Если с использованием диспетчера SCVMM, необходимо указать группу безопасности как параметр во время развертывания.

2.  **X509**. При использовании X509 метод проверки подлинности, сетевой контроллер принимает запросы только от клиентов управления, чьи отпечатки сертификатов известны на сетевом контроллере. Можно настроить с помощью этих отпечатки _ClientCertificateThumbprint_ параметр **[установки NetworkController](https://technet.microsoft.com/itpro/powershell/windows/network-controller/install-networkcontroller)** команду Windows PowerShell. Можно добавить другие отпечатков клиента в любое время с помощью **[набора NetworkController](https://technet.microsoft.com/itpro/powershell/windows/network-controller/set-networkcontroller)** команды.

3.  **Нет**. Если выбран этот режим, нет проверки подлинности выполняется между узлами и клиенты управления. Используйте None для тестирования в тестовой среде и может быть, поэтому не рекомендуется для использования в рабочей среде. 


### <a name="encryption"></a>Шифрование

Северный связи используется протокол SSL \(SSL\) для создания зашифрованному каналу между управления клиентами и узлами сетевого контроллера. Шифрование SSL для взаимодействия Северный предъявляются следующие требования:

- Все узлы сетевого контроллера должна иметь идентичные сертификат, включающий в целях проверки подлинности сервера и клиента в расширенное использование ключа \(EKU\) расширения. 

- URI, используемый управления клиентами для обмена данными с сетевым контроллером, должен быть имени субъекта сертификата. Имя субъекта сертификата должен содержать полное доменное имя (FQDN) или IP-адрес конечной точки REST сетевого контроллера.

- Если сетевой контроллер узлы находятся в разных подсетях, имя субъекта сертификатов должен быть таким же, как значение, используемое для _RestName_ параметр в **NetworkController установки** Windows Команда PowerShell. 

- Все клиенты управления должен доверять SSL-сертификат.


### <a name="ssl-certificate-enrollment-and-configuration"></a>Регистрация сертификата SSL и конфигурации

Необходимо вручную зарегистрировать сертификат SSL на узлах сетевого контроллера.

После установки сертификата, можно настроить сетевой контроллер для использования сертификата с **- ServerCertificate** параметр **Install NetworkController** команду Windows PowerShell . Если вы уже установили сетевого контроллера, можно обновить конфигурацию в любое время с помощью **NetworkController набора** команды.

>[!NOTE]
>Если вы используете SCVMM, необходимо добавить сертификат как ресурс библиотеки. Дополнительные сведения см. в разделе [Настройка сетевого контроллера SDN в структуре VMM](https://technet.microsoft.com/system-center-docs/vmm/scenario/sdn-network-controller).

## <a name="network-controller-cluster-communication"></a>Сетевого контроллера кластера взаимодействия

Сетевой контроллер поддерживает проверку подлинности, авторизации и шифрования для обмена данными между узлами сетевого контроллера. Подключение по протоколу [Windows Communication Foundation](https://msdn.microsoft.com/library/ms731082.aspx) \(WCF\) и TCP.

Можно настроить этот режим с **ClusterAuthentication** параметр **Install NetworkControllerCluster** команду Windows PowerShell. 

Дополнительные сведения см. в разделе [установки NetworkControllerCluster](https://technet.microsoft.com/itpro/powershell/windows/network-controller/install-networkcontrollercluster).

### <a name="authentication"></a>Проверка подлинности

При настройке проверки подлинности для взаимодействия с кластером сетевого контроллера, позволяет сетевым контроллером узлов кластера для проверки удостоверения других узлов, с которыми они взаимодействуют.

Сетевой контроллер поддерживает следующих трех режимов проверки подлинности между узлами сетевого контроллера.

>[!NOTE]
>Если развертывание сетевого контроллера с помощью SCVMM, только **Kerberos** режим поддерживается.

1. **Kerberos**. При присоединении к домену Active Directory, все узлы кластера сетевого контроллера с учетными записями домена, используемый для проверки подлинности можно использовать проверку подлинности Kerberos.

2. **X509**. Сертификат является X509\-проверки подлинности на основе. Можно использовать X509 проверки подлинности, когда узлы кластера сетевой контроллер не присоединены к домену Active Directory. Чтобы использовать X509, необходимо регистрировать сертификаты ко всем узлам кластера сетевого контроллера, и все узлы должны доверять сертификатам. Кроме того имя субъекта сертификата, которое было зарегистрировано на каждом узле должен совпадать с DNS-имя узла.

3. **Нет**. Если выбран этот режим, нет проверки подлинности выполняется между узлами сетевого контроллера. Этот режим предоставляется только для целей тестирования и не рекомендуется для использования в рабочей среде.

### <a name="authorization"></a>Authorization

При настройке авторизации для взаимодействия с кластером сетевого контроллера, можно разрешить узлам кластера сетевого контроллера убедитесь, что узлы, с которыми они взаимодействуют с надежными и иметь разрешение на участие в связь.

Для каждого из режимов проверки подлинности, поддерживаемые сетевым контроллером используются следующие методы авторизации.

1. **Kerberos**. Узлах сетевых контроллеров принимать запросы связи только из других учетных записей машины сетевого контроллера. При развертывании сетевого контроллера с помощью этих учетных записей можно настроить **имя** параметр [New NetworkControllerNodeObject](https://technet.microsoft.com/itpro/powershell/windows/network-controller/new-networkcontrollernodeobject) команду Windows PowerShell.

2. **X509**. Узлах сетевых контроллеров принимать запросы связи только из других учетных записей машины сетевого контроллера. При развертывании сетевого контроллера с помощью этих учетных записей можно настроить **имя** параметр [New NetworkControllerNodeObject](https://technet.microsoft.com/itpro/powershell/windows/network-controller/new-networkcontrollernodeobject) команду Windows PowerShell.

3. **Нет**. Если выбран этот режим, нет отсутствует авторизация, проводимые между узлов сетевого контроллера. Этот режим предоставляется только для целей тестирования и не рекомендуется для использования в рабочей среде.

### <a name="encryption"></a>Шифрование

Обмен данными между узлами сетевого контроллера, шифруется с помощью шифрования на уровне транспорта WCF. Эта форма шифрования используется в том случае, когда методы проверки подлинности и авторизации являются Kerberos или X509 сертификаты. Дополнительные сведения см. в следующих статьях.

- [Практическое руководство. Защита службы с помощью учетных данных Windows](https://msdn.microsoft.com/library/ms734673.aspx)
- [Практическое руководство. Защита службы с помощью сертификатов X.509](https://msdn.microsoft.com/library/ms788968.aspx).

## <a name="southbound-communication"></a>Подсистемамми

Сетевой контроллер взаимодействует с различными типами устройств для подсистемамми. Эти взаимодействия используют разные протоколы. По этой причине существуют разные требования проверки подлинности, авторизации и шифрования в зависимости от типа устройства, а также протокол, используемый сетевым контроллером для связи с устройством.

Ниже приведены сведения о взаимодействии сетевого контроллера с различных устройств южного.

| Южный устройства или службы | Используемый протокол              | Проверки подлинности, используемый    |
|---------------------------|-----------------------|------------------------|
| Подсистема балансировки нагрузки программного обеспечения    | WCF (MUX), TCP (узел) | Сертификаты           |
| Брандмауэр                  | OVSDB                 | Сертификаты           |
| Шлюз                   | WinRM                 | Kerberos и сертификаты |
| Виртуальные сети        | OVSDB, WCF            | Сертификаты           |
| Определяемая пользователем Маршрутизация      | OVSDB                 | Сертификаты           |

Для каждого из этих протоколов в следующем разделе описан механизм обмена данными.

### <a name="authentication"></a>Проверка подлинности

Для южного связи используются следующие протоколы и методы проверки подлинности.

1. **WCF/TCP/OVSDB**. Для этих протоколов проверки подлинности выполняется с помощью X509 сертификаты. Сетевой контроллер и однорангового узла, балансировка нагрузки программного обеспечения \(SLB\) демультиплексора \(Мультиплексора \) /хост-компьютерах представить свои сертификаты друг с другом для взаимной проверки подлинности. Каждый сертификат должен быть доверенным удаленного однорангового узла.

    Для южного проверки подлинности можно использовать один и тот же сертификат SSL, настроенный для шифрования данных, передаваемых с Северный клиентами. Также необходимо настроить сертификат на SLB/MUX и устройствами узла. Имя субъекта сертификата необходимо использовать тот же DNS-имя устройства.

2. **WinRM**. Для этого протокола, проверка подлинности выполняется по протоколу Kerberos \(для домена компьютеров, присоединенных к\) и с помощью сертификатов \(для не входящих в домен компьютеров, присоединенных к\).

### <a name="authorization"></a>Authorization

Для южного связи используются следующие протоколы и методы авторизации.

1. **WCF/TCP**. Для этих протоколов авторизация основана на имя субъекта сущности однорангового узла. Сетевой контроллер хранит DNS-имя однорангового узла устройства и использует его для авторизации. Это DNS-имя должно соответствовать имени субъекта в сертификате устройства. Аналогичным образом сертификат сетевого контроллера должно совпадать с именем DNS контроллера сети, хранящихся на устройстве однорангового узла.

2. **WinRM**. Если используется протокол Kerberos, учетной записи клиента WinRM должен присутствовать в стандартной группы в Active Directory или в группу локальных администраторов на сервере. Если используются сертификаты, клиент предоставляет сертификат на сервер, сервер авторизацию, используя имя субъекта или издателя, что сервер использует учетную запись пользователя, сопоставленного для проверки подлинности.

3.  **OVSDB**. Нет отсутствует авторизация, поддерживаемые для этого протокола.

### <a name="encryption"></a>Шифрование

Для южного связи для протоколов используются следующие методы шифрования.

1. **WCF/TCP/OVSDB**. Для этих протоколов шифрования выполняется с помощью сертификата, которое было зарегистрировано на стороне клиента или сервера.

2. **WinRM**. WinRM трафик шифруется по умолчанию, с помощью поставщика поддержки безопасности Kerberos \(SSP\). Дополнительное шифрование можно настроить в виде SSL на сервере WinRM.
