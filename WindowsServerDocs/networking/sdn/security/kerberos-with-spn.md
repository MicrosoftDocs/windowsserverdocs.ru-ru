---
title: Kerberos с именем субъекта-службы (SPN)
description: Сетевой контроллер поддерживает несколько методов проверки подлинности для взаимодействия с клиентами для управления. Можно использовать проверку подлинности Kerberos, X509 проверки подлинности на основе сертификата. Также имеется возможность использовать без проверки подлинности для тестового развертывания.
manager: dougkim
ms.prod: windows-server-threshold
ms.technology: networking-sdn
ms.topic: article
ms.assetid: bc625de9-ee31-40a4-9ad2-7448bfbfb6e6
ms.author: pashort
author: shortpatti
ms.date: 08/23/2018
ms.openlocfilehash: 2459cfa8dfec3de4aa23da7aba192d6eeed7f8ec
ms.sourcegitcommit: 0d0b32c8986ba7db9536e0b8648d4ddf9b03e452
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/17/2019
ms.locfileid: "59828975"
---
# <a name="kerberos-with-service-principal-name-spn"></a>Kerberos с именем субъекта-службы (SPN)

>Относится к: Windows Server 2019

Сетевой контроллер поддерживает несколько методов проверки подлинности для взаимодействия с клиентами для управления. Можно использовать проверку подлинности Kerberos, X509 проверки подлинности на основе сертификата. Также имеется возможность использовать без проверки подлинности для тестового развертывания.

System Center Virtual Machine Manager использует проверку подлинности на основе протокола Kerberos. Если вы используете проверку подлинности на основе Kerberos, необходимо настроить имя участника-службы (SPN) для сетевого контроллера в Active Directory. Имя участника-службы — это уникальный идентификатор для экземпляра службы сетевого контроллера, которая используется проверка подлинности Kerberos должен быть сопоставлен с экземпляром службы учетной записи входа службы. Дополнительные сведения см. в разделе [имена участников-служб](https://docs.microsoft.com/windows/desktop/ad/service-principal-names).

## <a name="configure-service-principal-names-spn"></a>Настроить имена участников-служб (SPN)

Сетевой контроллер автоматически настраивает имя участника-службы. Вам нужно всего лишь для предоставления разрешений для машин сетевого контроллера для регистрации и изменить имя участника-службы.

1.  На компьютере контроллера домена, запустите **Active Directory — пользователи и компьютеры**.

2.  Выберите **представление \> Advanced**.

3.  В разделе **компьютеров**, найти одну из учетных записей компьютера сетевого контроллера, а затем щелкните правой кнопкой мыши и выберите **свойства**.

4.  Выберите **безопасности** вкладку и нажмите кнопку **Дополнительно**.

5.  В списке, если все учетные записи компьютеров сетевого контроллера или безопасности группы, у всех учетных записей компьютера сетевой контроллер отсутствует в списке, нажмите кнопку **добавить** Чтобы добавить его.

6.  Для каждой учетной записи машины сетевого контроллера или одной группе безопасности, содержащей учетные записи компьютеров сетевого контроллера

    1.  Выберите учетную запись или группу и нажмите кнопку **изменить**.

    2.  В списке разрешений выберите **проверить запись servicePrincipalName**.

    Г.  Прокрутите список вниз и в разделе **свойства** выберите:

       -  **ServicePrincipalName чтения**

       -  **Запись servicePrincipalName**

    Д.  Щелкните дважды **ОК** .

7.  Повторите шаги 3 – 6 для каждой машины сетевого контроллера.

8.  Закройте окно **Пользователи и компьютеры Active Directory**.

## <a name="failure-to-provide-permissions-for-spn-registrationmodification"></a>Необходимо предоставить разрешения для регистрации имени участника-службы или изменения

На **NEW** Windows Server 2019, если выбрана Kerberos для проверки подлинности клиента REST, а не предоставить разрешение для узлов сетевого контроллера для регистрации или изменить имя участника-службы, операций REST с сетевого контроллера приведет к сбою препятствуют управление SDN.

Для обновления с Windows Server 2016 до Windows Server 2019 и вы выбрали Kerberos для проверки подлинности клиента REST, операции REST не блокируются, обеспечивая прозрачность для существующего развертывания в рабочей среде. 

Если имя SPN не зарегистрировано, проверка подлинности клиента REST используется NTLM, которой является менее надежным. Кроме того, критическое событие в канал администратора из **NetworkController Framework** канал событий вопросом, нужно предоставить разрешения на узлах сетевого контроллера для регистрации имени участника-службы. Когда вы предоставляете разрешение, сетевой контроллер автоматически регистрирует имя участника-службы и всех операций клиента используйте Kerberos.


>[!TIP]
>Как правило вы можете настроить сетевой контроллер для использования IP-адрес или DNS-имя для операций на основе REST. Тем не менее при настройке Kerberos, нельзя использовать IP-адрес для запросов REST к сетевому контроллеру. Например, можно использовать \< https://networkcontroller.consotso.com\>, но нельзя использовать \< https://192.34.21.3\>. Имена участника-службы не может работать, если используются IP-адреса.
>
>Если вы используете IP-адрес для операций REST, а также проверки подлинности Kerberos в Windows Server 2016, реальное взаимодействие было бы через проверку подлинности NTLM. В таком развертывании после обновления до Windows Server 2019, можно продолжить использовать проверку подлинности на основе NTLM. Чтобы переместить проверку подлинности на основе Kerberos, необходимо использовать имя DNS контроллера сети для операций REST и предоставление разрешений для узлов сетевого контроллера для регистрации имени участника-службы.

---