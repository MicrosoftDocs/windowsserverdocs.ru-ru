---
ms.assetid: ''
title: Настройка системы для высокая точность
description: Синхронизация времени в Windows 10 и Windows Server 2016 были значительно улучшены.  При разумным рабочих условиях, системы можно настроить для поддержания 1 мс (миллисекунды) точности или выше (с точки зрения в формате UTC).
author: shortpatti
ms.author: dacuo
ms.date: 05/08/2018
ms.topic: article
ms.prod: windows-server-threshold
ms.technology: networking
ms.openlocfilehash: 2a5a7a6bd6313f7a4eadd827e3d754c1e467c3bc
ms.sourcegitcommit: 2977c707a299929c6ab0d1e0adab2e1c644b8306
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/24/2019
ms.locfileid: "63745411"
---
# <a name="configuring-systems-for-high-accuracy"></a>Настройка системы для высокая точность
>Относится к: Windows Server 2016 и Windows 10 версии 1607 или более поздней версии

Синхронизация времени в Windows 10 и Windows Server 2016 были значительно улучшены.  При разумным рабочих условиях, системы можно настроить для поддержания 1 мс (миллисекунды) точности или выше (с точки зрения в формате UTC).

Следующие рекомендации помогут настроить системы, чтобы добиться высокой точности.  В этой статье рассматриваются следующие требования:

- Поддерживаемые операционные системы
- Конфигурация системы 

> [!WARNING]
> **Цели точность предыдущие операционные системы**<br>
>Windows Server 2012 R2 и ниже не целями же высокая точность. Эти операционные системы не поддерживаются для высокой точности.
>
>В этих версиях службы времени Windows удовлетворяет следующим требованиям:
>
> - Предоставленный точность необходимое время для удовлетворения требований к проверке подлинности Kerberos версии 5.
> - Предоставляются слабо точного времени для клиентов Windows и серверах, подключенных к распространенных леса Active Directory.
>
>Больше отклонения, 2012 R2 и более ранних версий находятся за пределами спецификация службы времени Windows.

## <a name="windows-10-and-windows-server-2016-default-configuration"></a>Windows 10 и конфигурация по умолчанию Windows Server 2016

Хотя корпорация Майкрософт поддерживает точность до 1 мс на Windows 10 или Windows Server 2016, большинство клиентов не требуют очень точное время.

Таким образом **конфигурация по умолчанию** предназначены для удовлетворения те же требования, что и предыдущие операционные системы, которые должны:

- Укажите точность необходимое время для удовлетворения требований к проверке подлинности Kerberos версии 5.
- Предоставляют слабо точного времени для клиентов Windows и серверах, подключенных к распространенных леса Active Directory.

## <a name="how-to-configure-systems-for-high-accuracy"></a>Настройка системы для высокая точность

>[!IMPORTANT]
>**Замечание по поводу поддержки высокоточные систем**<br>
> Точность времени влечет за собой end-to-end распределение точное время с достоверным источником времени для устройства.  Все, что добавляет assymetry в измерениях по этому пути, отрицательно влияет на точность влияет на точность, полученного на устройствах.
>
>По этой причине мы включили [границы поддержки, чтобы настроить службу времени Windows для сред с высокой точностью](support-boundary.md) структурирование окружающей среды требования, которые должны удовлетворять также и для достижения целей высокой точности.

### <a name="operating-system-requirements"></a>Требования к операционной системе

Высокая точность конфигураций требуется Windows 10 или Windows Server 2016.  Все устройства Windows в топологии времени должны соответствовать этому требованию, включая серверы выше первого уровня Windows и в виртуализированных сценариев, узлы Hyper-V, запуска виртуальных машин по времени. Все эти устройства должны быть по крайней мере Windows 10 или Windows Server 2016.

На рисунке ниже работают виртуальные машины, требующие высокой точности, Windows 10 или Windows Server 2016.  Аналогичным образом узел Hyper-V, на котором размещаются виртуальные машины и вышестоящего сервера Windows времени также необходимо запустить Windows Server 2016.

![Топология времени — 1607](../media/Windows-Time-Service/Configuring-Systems-for-High-Accuracy/Topology2016.png)


>[!TIP] 
>**Определение версии Windows**<br>
> Можно выполнить команду `winver` в командной строке для проверки операционная система версии 1607 (или более поздней версии) и сборка ОС 14393 (или более поздней версии) как показано ниже:
>
> ![Winver - 2016 1607](../media/Windows-Time-Service/Configuring-Systems-for-High-Accuracy/winver2016.png)

### <a name="system-configuration"></a>Конфигурация системы

Достижение высокой точности целевых объектов требуется конфигурация системы.  Существует множество способов выполнения этой настройки, включая непосредственно в реестре, либо через групповую политику.  Дополнительные сведения о каждой из этих параметров можно найти в Windows время службы техническом справочнике — [средства службы времени Windows](Windows-Time-Service-Tools-and-Settings.md#windows-time-service-tools).

#### <a name="windows-time-service-startup-type"></a>Служба времени Windows тип запуска

Служба времени Windows (W32Time) должен выполнять непрерывно.  Чтобы сделать это, настройте тип запуска службы времени Windows для запуска «Автоматически».

![Автоматическая настройка](../media/Windows-Time-Service/Configuring-Systems-for-High-Accuracy/AutomaticService.PNG)

#### <a name="cumulative-one-way-network-latency"></a>Задержки в сети совокупное односторонний

Измерения неопределенности и «шум» иногда увеличением задержки сети.  Таким образом крайне важно, что задержка в сети находиться в пределах разумного границ.  Конкретных требований, зависящих от вашей целевой точности и описаны в [границы поддержки, чтобы настроить службу времени Windows для сред с высокой точностью](support-boundary.md) статьи.

Чтобы вычислить совокупное односторонней сетевую задержку, добавьте отдельных односторонних задержки между парами узлов NTP клиент сервер в топологии времени, начиная с целевым объектом и заканчивая высокой точности stratum 1 источник времени.

Пример: Рассмотрим иерархию синхронизации времени с высокоточные источник, два промежуточных NTP-серверов A и B и конечном компьютере в указанном порядке. Получить совокупное сетевая задержка между исходной и целевой, измерить среднее отдельных NTP превысив время ожидания между (RTTs):

- Целевой объект и время сервера B
- Время сервера B и время сервера A
- Сервер времени объект и источник

Это измерение можно получить с помощью средства w32tm.exe папки "Входящие".  Выполните указанные ниже действия.
<!-- Use PowerShell to import the CSV then average the RTT Column -->

1. Выполнять вычисления с целевой и время сервера б.
    
    `w32tm /stripchart /computer:TimeServerB /rdtsc /samples:450 > c:\temp\Target_TsB.csv`

2. Выполнять вычисления с сервера b времени от (на который указывает на) сервер времени.
    
    `w32tm /stripchart /computer:TimeServerA /rdtsc /samples:450 > c:\temp\Target_TsA.csv`

3. Выполнить вычисление с сервером времени в источнике.
 
4. Затем добавьте среднее RoundTripDelay измеряется на предыдущем шаге и разделить на 2, чтобы получить совокупное сетевых задержек между исходной и целевой.

#### <a name="registry-settings"></a>Параметры реестра

# <a name="minpollintervaltabminpollinterval"></a>[MinPollInterval](#tab/MinPollInterval)
Настраивает наименьший интервал в секундах log2, разрешенное для опроса системы.

|  |  | 
|---------|---------|
|Расположение ключа     | HKLM:\SYSTEM\CurrentControlSet\Services\W32Time\Config        |
|Параметр    | 6        |
|Результат | Минимальный интервал опроса теперь составляет 64 секунд. |

Следующая команда сообщает Windows время, чтобы получить обновленные параметры:

`w32tm /config /update`


# <a name="maxpollintervaltabmaxpollinterval"></a>[MaxPollInterval](#tab/MaxPollInterval)
Настраивает максимальный интервал в секундах log2, разрешенное для опроса системы.

|  |  |  
|---------|---------|
|Расположение ключа     | HKLM:\SYSTEM\CurrentControlSet\Services\W32Time\Config        |
|Параметр    | 6        |
|Результат | Максимальный интервал опроса теперь составляет 64 секунд.  |

Следующая команда сообщает Windows время, чтобы получить обновленные параметры:

`w32tm /config /update`

# <a name="updateintervaltabupdateinterval"></a>[UpdateInterval](#tab/UpdateInterval)
Число тактов между корректировки этапа исправления.

|  |  |  
|---------|---------|
|Расположение ключа     | HKLM:\SYSTEM\CurrentControlSet\Services\W32Time\Config       |
|Параметр    | 100        |
|Результат | Число тактов между этапа исправления корректировки выпущена 100 тактов. |

Следующая команда сообщает Windows время, чтобы получить обновленные параметры:

`w32tm /config /update`

# <a name="specialpollintervaltabspecialpollinterval"></a>[SpecialPollInterval](#tab/SpecialPollInterval)
Настраивает интервал опроса в секундах, если включен флаг SpecialInterval 0x1.

|  |  |  
|---------|---------|
|Расположение ключа     | HKLM:\SYSTEM\CurrentControlSet\Services\W32Time\TimeProviders\NtpClient        |
|Параметр    | 64        |
|Результат | Интервал опроса теперь составляет 64 секунд. |

Приведенная ниже команда перезапускает времени Windows выбирает обновленные параметры:

`net stop w32time && net start w32time`

# <a name="frequencycorrectratetabfrequencycorrectrate"></a>[FrequencyCorrectRate](#tab/FrequencyCorrectRate)

|  |  |  
|---------|---------|
|Расположение ключа     | HKLM:\SYSTEM\CurrentControlSet\Services\W32Time\Config      |
|Параметр    | 2        |


---
