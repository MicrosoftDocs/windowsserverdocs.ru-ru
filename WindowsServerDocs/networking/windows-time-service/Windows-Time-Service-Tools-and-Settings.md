---
ms.assetid: 6086947f-f9ef-4e18-9f07-6c7c81d7002c
title: Инструменты и параметры службы времени Windows
author: Teresa-Motiv
ms.author: v-tea
ms.date: 02/24/2020
ms.topic: article
ms.prod: windows-server
ms.technology: networking
ms.openlocfilehash: 76ec8a817f0c500380c9bef6fc1ee7eb8dddc105
ms.sourcegitcommit: 319796ec327530c9656ac103b89bd48cc8d373f6
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/22/2020
ms.locfileid: "83790563"
---
# <a name="windows-time-service-tools-and-settings"></a>Инструменты и параметры службы времени Windows

> Применяется к: Windows Server 2016, Windows Server 2012 R2, Windows Server 2012, Windows 10 или более поздних версий

В этом разделе вы узнаете о средствах и параметрах службы времени Windows (W32Time).  

Если вам нужно синхронизировать время только для клиентского компьютера, присоединенного к домену, см. [эту статью](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2008-r2-and-2008/cc816884%28v%3dws.10%29). Дополнительные разделы о настройке службы времени Windows см. в статье [Windows Time Service (W32Time)](windows-time-service-top.md) (Служба времени Windows W32Time).  

> [!CAUTION]  
> Для настройки или задания времени запуска службы времени Windows не следует использовать команду **Net time**.  
>
> Кроме того, на старых компьютерах под управлением Windows XP или более ранней версии команда **Net time /querysntp** отображала имя сервера NTP, с помощью которого настроена синхронизация компьютера, однако этот NTP-сервер используется только в том случае, если клиент времени компьютера настроен как NTP или AllSync. Поэтому эта команда нерекомендуемая.  

Большинство компьютеров-членов домена имеют тип клиента NT5DS, что означает синхронизацию времени из иерархии доменов. Единственным типичным исключением является контроллер домена, который выступает в роли хозяина операций эмулятора основного контроллера домена (PDC) корневого домена леса, который обычно настроен для синхронизации времени с внешним источником. Чтобы просмотреть настройку времени клиента компьютера, выполните команду **W32tm /query /configuration** из командной строки с повышенными привилегиями в Windows Server 2008 и Windows Vista, а затем считайте **Тип** в выходных данных команды. Дополнительные сведения см. в разделе [How the Windows Time Service Works](How-the-Windows-Time-Service-Works.md) (Принцип работы службы времени Windows). Кроме того, вы можете выполнить команду **reg query HKLM\SYSTEM\CurrentControlSet\Services\W32Time\Parameters** и считать значение **NtpServer** в выходных данных команды.  

> [!IMPORTANT]  
> До Windows Server 2016 служба W32Time не предназначалась для поддержки зависящих от времени потребностей приложений. Однако теперь обновления Windows Server 2016 позволяют реализовать в домене решение с точностью 1 мс. Дополнительные сведения см. в статьях [Точное время в Windows Server 2016](accurate-time.md) и [Граница области поддержки для высокоточного времени](support-boundary.md).  

## <a name="windows-time-service-tools"></a>Инструменты службы времени Windows  

Указанные ниже инструменты связаны со службой времени Windows.  

### <a name="w32tmexe-windows-time"></a>W32tm.exe: Служба времени Windows  

**Категория**  

Этот инструмент является частью стандартной установки Windows (Windows XP и более поздних версий) и Windows Server (Windows Server 2003 и более поздних версий).  

**Совместимость версий**  

Этот инструмент работает при стандартной установке Windows (Windows XP и более поздних версий) и Windows Server (Windows Server 2003 и более поздних версий).  

С помощью W32tm.exe можно настроить параметры службы времени Windows и диагностировать возникающие проблемы. W32tm.exe — это предпочтительная программа командной строки для настройки, мониторинга и устранения неполадок службы времени Windows.  

В следующих таблицах описаны параметры, используемые с W32tm.exe.  

**Основные параметры W32tm.exe**  

|Параметр |Описание |
| --- | --- |
|**w32tm /?** |Отображает справку командной строки W32tm. |
|**w32tm /register** |Регистрирует службу времени для запуска в качестве службы и добавляет информацию о конфигурации по умолчанию в реестр. |
|**w32tm /unregister** |Отменяет регистрацию службы времени и удаляет все сведения о конфигурации из реестра. |
|**w32tm /monitor [/domain:\<*имя_домена*>] [/computers:\<*имя*>[,\<*имя*>[,\<*имя*>...]]] [/threads:\<*num*>]** |Отслеживает службу времени Windows.<p>**/domain**: указывает, какой домен следует отслеживать. Если имя домена не указано или не указан ни один из параметров **/domain** и **/computers**, используется домен по умолчанию. Этот параметр можно указывать многократно.<p>**/computers**: наблюдает за заданным списком компьютеров. Имена компьютеров разделяются запятыми, без пробелов. Если имя имеет префикс **\*** , оно рассматривается как основной контроллер домена. Этот параметр можно указывать многократно.<p>**/threads**: указывает число одновременно анализируемых компьютеров. По умолчанию используется значение 3. Допустимый диапазон — 1–50. |
|**w32tm /ntte \<NT *time epoch*>** |Преобразует системное время Windows NT (измеряется в интервалах 10<sup>-7</sup> секунды, начиная с 0 ч. 1 января 1601 г.) в читаемый формат. |
|**w32tm /ntpte \<NTP *time epoch*>** |Преобразует время NTP (измеряется в интервалах 2<sup>-32</sup> секунды, начиная с 0 ч. 1 января 1900 г.) в читаемый формат. |
|**w32tm /resync [/computer:\<*computer*>] [/nowait] [/rediscover] [/soft]** |Сообщает компьютеру о необходимости повторной синхронизации часов как можно скорее, вызывая всю накопленную статистику ошибок.<p>**/computer:\<*computer*>** : указывает компьютер, который нужно повторно синхронизировать. Если не указано, будет выполнена повторная синхронизация локального компьютера.<p>**/nowait**: не дожидайтесь повторной синхронизации; возвращайтесь немедленно. В противном случае дождитесь завершения повторной синхронизации, прежде чем возвращать.<p>**/rediscover**: переопределение конфигурации сети и повторное обнаружение сетевых источников, а затем повторная синхронизация.<p>**/soft**: повторная синхронизация с использованием существующей статистики ошибок. Не полезно, предоставляется для обеспечения совместимости. |
|**w32tm /stripchart /computer:\<*target*> [/period:\<*refresh*>] [/dataonly] [/samples:\<*count*>] [/rdtsc]** |Отображение ленточной диаграммы смещения между этим и другим компьютером.<p>**/computer:\<*target*>** : компьютер для измерения смещения.<p>**/period:\<*refresh*>** : время между выборками в секундах. Значение по умолчанию — две секунды.<p>**/dataonly**: отображает только данные без графиков.<p>**/samples:\<*count*>** : собирает примеры \<*count*>, а затем их останавливает. Если не указано, примеры будут собираться до нажатия **CTRL + C**.<br/><br/>**/rdtsc**: для каждого образца этот параметр выводит значения, разделенные запятыми, вместе с заголовками **RdtscStart**, **RdtscEnd**, **FileTime**, **RoundtripDelay**, **NtpOffset** вместо текстового графика.<br/><ul><li>**RdtscStart**: значение [RDTSC (счетчик метки времени чтения)](https://en.wikipedia.org/wiki/Time_Stamp_Counter), собранное непосредственно перед созданием NTP-запроса.</li><li>**RdtscEnd**: значение RDTSC, собранное сразу после получения и обработки NTP-ответа.</li><li>**FileTime**: локальное значение FILETIME, используемое в NTP-запросе.</li><li>**RoundtripDelay**: время в секундах между созданием NTP-запроса и обработкой полученного NTP-ответа, вычисленное в соответствии с операциями циклического прохождения NTP.</li><li>**NTPOffset**: смещение времени (в секундах) между локальным компьютером и NTP-сервером, вычисляемое согласно вычислениям NTP-смещения.</li></ul> |
|**w32tm /config [/computer:\<*target*>] [/update] [/manualpeerlist:\<*peers*>] [/syncfromflags:\<*source*>] [/LocalClockDispersion:\<*seconds*>] [/reliable:(YES\|NO)] [/largephaseoffset:\<*milliseconds*>]** |**/computer:\<*target*>** : настройка конфигурации \<*target*>. Если значение не указано, по умолчанию используется локальный компьютер.<p>**/update**: уведомляет службу времени об изменении конфигурации, что приводит к началу действия изменений.<p>**/manualpeerlist:\<*peers*>** : задает для ручного списка одноранговых узлов \<*peers*>, который представляет собой разделенный пробелами список DNS и IP-адресов. При указании нескольких одноранговых узлов этот параметр необходимо заключить в кавычки.<p>**/syncfromflags:\<*source*>** : задает, из каких источников должен синхронизироваться NTP-клиент. \<*source*> должен представлять собой список этих ключевых слов, разделенный запятыми (без учета регистра):<ul><li>**MANUAL** (Вручную): добавление одноранговых узлов вручную в список одноранговых узлов.</li><li>**DOMHIER**: синхронизация из контроллера домена (DC) в иерархии доменов.</li></ul>**/LocalClockDispersion:\<*seconds*>** : настраивает точность внутренних часов, которые будут присвоены W32Time, если не удается получить время из настроенных источников.<p>**/reliable:(YES\|NO)** : укажите, является ли этот компьютер надежным источником времени. Этот параметр имеет смысл только на контроллерах домена.<ul><li>**YES** (Да): этот компьютер является надежной службой времени.</li><li>**NO** (Нет): этот компьютер является ненадежной службой времени.</li></ul>**/largephaseoffset:\<*milliseconds*>** : задает разницу во времени между локальным и сетевым временем, которую W32Time будет рассматривать как пики. |
|**w32tm /tz** |Отображение текущих параметров часового пояса. |
|**w32tm /dumpreg [/subkey:\<*key*>] [/computer:\<*target*>]** |Отображение значений, связанных с заданным ключом реестра.<p>По умолчанию используется ключ **HKLM\System\CurrentControlSet\Services\W32Time** (корневой ключ для службы времени).<p>**/subkey:\<*key*>** : отображает значения, связанные с подразделом <key> ключа по умолчанию.<p>**/computer:\<*target*>** : запрашиваются параметры реестра для компьютера \<*target*>. |
|**w32tm /query [/computer:\<*target*>] {/source \| /configuration \| /peers \| /status} [/verbose]** |Отображает сведения о службе времени Windows на компьютере. Этот параметр впервые стал доступным в клиенте службы времени Windows в Windows Vista и Windows Server 2008.<p>**/computer:\<*target*>** : запрашивает сведения об элементе \<*target*>. Если значение не указано, по умолчанию используется локальный компьютер.<p>**/source**: отображает источник времени.<p>**/configuration**: отображение конфигурации времени выполнения и места, где берется параметр. В режиме подробного протоколирования также отображается неопределенное или неиспользуемое значение.<p>**/peers**: отображение списка узлов и их состояние.<p>**/status**: отображение состояния службы времени Windows.<p>**/verbose**: задание режима подробного протоколирования для отображения дополнительных сведений. |
|**w32tm /debug {/disable \| {/enable /file:\<*name*> /size:/<*bytes*> /entries:\<*value*> [/truncate]}}** |Включение или отключение закрытого журнала службы времени Windows для локального компьютера. Этот параметр впервые стал доступным в клиенте службы времени Windows в Windows Vista и Windows Server 2008.<p>**/disable**: отключает закрытый журнал.<p>**/enable**: включает закрытый журнал.<ul><li>**file:\<*name*>** : указывает абсолютное имя файла.</li><li>**size:\<*bytes*>** : указывает максимальный размер для циклического ведения журнала.</li><li>**entries:\<*value*>** : содержит список флагов, определяемых числом и разделенных запятыми, которые определяют типы данных, которые должны регистрироваться в журнале. Допустимые значения: от 0 до 300. Диапазон чисел является допустимым дополнением к отдельным числам, например 0–100,103,106. Значение 0–300 предназначено для ведения журнала всех сведений.</li></ul>**/truncate**: усечение файла, если он существует. |

Дополнительные сведения о **W32tm.exe** см. в [Справке Windows](https://support.microsoft.com/hub/4338813/windows-help?os=windows-10).  

**Примеры**

Если вы хотите настроить локальный клиент службы времени Windows так, чтобы он указывал на два разных сервера времени (один с именем ntpserver.contoso.com, а второй — clock.adatum.com), введите в командной строке следующую команду и нажмите клавишу ВВОД:

```cmd
w32tm /config /manualpeerlist:"ntpserver.contoso.com clock.adatum.com" /syncfromflags:manual /update
```

Список допустимых NTP-серверов, доступных в Интернете для внешней синхронизации времени, см. в статье [Список серверов времени, поддерживающих протокол SNTP (Simple Network Time Protocol), доступных в Интернете](https://go.microsoft.com/fwlink/?linkid=60401).

Если вы хотите проверить конфигурацию клиента службы времени Windows с клиентского компьютера под управлением Windows с именем узла CONTOSOW1, выполните следующую команду:

```cmd
W32tm /query /computer:contosoW1 /configuration
```

Выходные данные этой команды представляют собой список параметров конфигурации, заданных для клиента службы времени Windows.

> [!IMPORTANT]  
> [В Windows Server 2016 улучшены алгоритмы синхронизации времени](https://aka.ms/WS2016Time) для соответствия спецификациям RFC. Поэтому если вы хотите настроить локальный клиент службы времени Windows так, чтобы он указывал на несколько одноранговых узлов, настоятельно рекомендуется подготовить три или более разных сервера времени.
>  
> При наличии только двух серверов времени укажите флаг **UseAsFallbackOnly** (0x2), чтобы отменить назначение приоритета одному из них. Например, если необходимо назначить приоритет ntpserver.contoso.com над clock.adatum.com, выполните следующую команду.
> ```cmd
> w32tm /config /manualpeerlist:"ntpserver.contoso.com,0x8 clock.adatum.com,0xa" /syncfromflags:manual /update
> ```
> Значение указанного флага см. в разделе [Записи подраздела HKLM\SYSTEM\CurrentControlSet\Services\W32Time\Parameters](#parameters).

## <a name="using-group-policy-to-configure-the-windows-time-service"></a>Использование групповой политики для настройки службы времени Windows

Служба времени Windows сохраняет ряд свойств конфигурации в виде записей реестра. Для настройки большинства этих данных можно использовать объекты групповой политики. Например, объекты групповой политики можно использовать для настройки компьютера в качестве NTPServer или NTPClient, механизма синхронизации времени или компьютера в качестве надежного источника времени.  

> [!NOTE]  
> Параметры групповой политики для службы времени Windows можно настроить на контроллерах домена Windows Server 2003, Windows Server 2003 R2, Windows Server 2008 и Windows Server 2008 R2, и они могут применяться только к компьютерам под управлением Windows Server 2003, Windows Server 2003 R2, Windows Server 2008 и Windows Server 2008 R2.  

Windows хранит сведения о политике службы времени Windows в файле административного шаблона W32Time.admx в папке **Computer Configuration\Administrative Templates\System\Windows Time Service**. Windows хранит сведения о конфигурации, определенной политиками в реестре, и использует эти записи реестра для настройки записей реестра для службы времени Windows. В результате значения, определенные групповой политикой, перезапишут все существовавшие ранее значения в разделе реестра службы времени Windows.

> [!IMPORTANT]  
> Некоторые из предустановленных параметров объектов групповой политики отличаются от соответствующих записей реестра по умолчанию. Если вы планируете использовать объект групповой политики для настройки любого параметра времени Windows, обязательно ознакомьтесь со статей [Предварительно установленные значения для параметров групповой политики службы времени Windows, отличаются от соответствующих записей реестра службы времени Windows в Windows Server 2003](https://go.microsoft.com/fwlink/?LinkId=186066). Эта проблема относится к Windows Server 2008 R2, Windows Server 2008, Windows Server 2003 R2 и Windows Server 2003.

Например, предположим, что вы изменяете параметры политики **Настроить NTP-клиент Windows**.

Изменения хранятся в следующем расположении в административном шаблоне:

> **Computer Configuration\Administrative Templates\System\Windows Time Service\Time Providers\Configure Windows NTP Client**

Windows загружает эти параметры в область политики реестра в следующем подразделе:

> **HKLM\Software\Policies\Microsoft\W32time\TimeProviders\NtpClient**

Затем в Windows используются параметры политики для настройки связанных записей реестра службы времени Windows в следующем подразделе:

> **HKLM\SYSTEM\CurrentControlSet\Services\W32Time\Time Providers\NTPClient\\**

В следующей таблице перечислены политики, которые можно настроить для службы времени Windows, а также подразделы реестра, на которые влияют эти политики.

> [!NOTE]  
> При удалении параметра групповой политики Windows удаляет соответствующую запись из области политики реестра.

|Политика<sup>1</sup> |Расположения реестра<sup>2,</sup> <sup>3</sup> |
| --- | --- |
|Глобальные параметры конфигурации |W32Time<br />W32Time\Config<br />W32Time\Parameters |
|Time Providers\Configure Windows NTP Client |W32Time\TimeProviders\NtpClient |
|Time Providers\Enable Windows NTP Client |W32Time\TimeProviders\NtpClient |
|Time Providers\Enable Windows NTP Server |W32Time\TimeProviders\NtpServer |

> <sup>1</sup> Путь к категории: **Computer Configuration\Administrative Templates\System\Windows Time Service**  
> <sup>2</sup> Подраздел: **HKLM\SOFTWARE\Policies\Microsoft**  
> <sup>3</sup> Подраздел: **HKLM\SYSTEM\CurrentControlSet\Services**

## <a name="enabling-w32time-logging"></a>Включение ведения журнала W32Time

Следующие три записи реестра не являются частью стандартной конфигурации W32Time, но их можно добавить в реестр, чтобы получить расширенные возможности ведения журнала. Регистрируемые в журнале системных событий сведения можно изменить, изменив значение параметра **EventLogFlags** в редакторе объектов групповой политики. По умолчанию служба времени регистрирует событие при каждом переключении на новый источник времени.

Чтобы включить ведение журнала W32Time, добавьте следующие записи реестра:  

|Запись реестра |Версии |Описание |
| --- | --- | --- |
|**FileLogEntries** |Все версии |Управляет количеством записей, создаваемых в файле журнала службы времени Windows. По умолчанию используется нулевое значение, которое не регистрирует никаких действий службы времени Windows. Допустимые значения: **0**–**300**. Это значение не влияет на записи журнала событий, которые обычно создаются службой времени Windows. |
|**FileLogName** |Все версии |Определяет расположение и имя файла журнала службы времени Windows. Значение по умолчанию пустое и не должно изменяться, пока не изменяется **FileLogEntries**. Допустимое значение — это полный путь и имя файла, которые служба времени Windows будет использовать для создания файла журнала. Это значение не влияет на записи журнала событий, которые обычно создаются службой времени Windows. |
|**FileLogSize** |Все версии |Управляет поведением циклического ведения журнала файлов журнала службы времени Windows. При определении **FileLogEntries** и **FileLogName** запись определяет размер (в байтах), чтобы разрешить доступ к файлу журнала, прежде чем перезаписывать старые записи в журнал как новые. Используйте для этого параметра значение — **1 000 000** или больше. Это значение не влияет на записи журнала событий, которые обычно создаются службой времени Windows. |

## <a name="configuring-how-windows-time-service-resets-the-computer-clock"></a>Настройка службы времени Windows на сброс часов компьютера

Чтобы Служба W32Time постепенно установила компьютерные часы, смещение должно одновременно быть меньше значения **MaxAllowedPhaseOffset** и соответствовать следующему уравнению:  

- Windows Server 2016 и более поздних версий

  > |**CurrentTimeOffset**| &divide; (16 &times; **PhaseCorrectRate** &times; **pollIntervalInSeconds**) &le; **SystemClockRate** &divide; 2  

- Windows Server 2012 R2 и более ранних версий.

  > |**CurrentTimeOffset**| &divide; (**PhaseCorrectRate** &times; **UpdateInterval**) &le; **SystemClockRate** &divide; 2  

Значение **CurrentTimeOffset** измеряется в тактах часов, где 1 мс = 10 000 тактов в системе Windows.  

**SystemClockRate** и **PhaseCorrectRate** также измеряются в тактах часов. Чтобы получить значение **SystemClockRate**, можно использовать следующую команду, а затем преобразовать его из секунд в такты часов, используя формулу *секунды* &times; 1 000 &times; 10 000:  

```cmd
W32tm /query /status /verbose  
ClockRate: 0.0156000s  
```  

**SystemClockRate** — это частота часов в системе. Например, при использовании 156 000 секунд значение **SystemClockRate** будет = 0,0156000 &times; 1 000 &times; 10 000 = 156 000 тактов.  

**MaxAllowedPhaseOffset** также измеряется в секундах. Чтобы преобразовать его в такты часов, умножьте **MaxAllowedPhaseOffset** &times; 1 000 &times; 10 000.  

В следующих примерах показано, как применять эти вычисления при использовании Windows Server 2012 R2 или более ранней версии.

**Пример 1. Время отличается на четыре минуты**

Например, ваше время — 11:05, а образец времени, который получен от однорангового узла и считается верным — 11:09.

> **PhaseCorrectRate** = 1;  
>  
> **UpdateInterval** = 30 000 тактов;  
>  
> **SystemClockRate** = 156 000 тактов;  
>  
> **MaxAllowedPhaseOffset** = 10 мин = 600 секунд = 600 &times; 1 000 &times; 10 000 = 6 000 000 000 тактов;  
>  
> |**CurrentTimeOffset**| = 4 мин = 4 &times; 60 &times; 1 000 &times; 10 000 = 2 400 000 000 тактов;  
>  
> **CurrentTimeOffset** &le; **MaxAllowedPhaseOffset**?;  
>  
> 2 400 000 000 &le; 6 000 000 000: TRUE  

И удовлетворяет ли он приведенное выше уравнение?

> (|**CurrentTimeOffset**| &divide;(**PhaseCorrectRate**&times;**UpdateInterval**)&le;**SystemClockRate**&divide;2)  

2 400 000 000/(30 000 &times; 1) &le; 156 000 &divide; 2;  

80 000 &le; 78 000: FALSE  

Поэтому W32tm немедленно перевел бы часы обратно в исходное положение.  

> [!NOTE]  
> В этом случае, если вы хотите медленно вернуть часы обратно, вам также придется скорректировать значения **PhaseCorrectRate** или **UpdateInterval** в реестре, чтобы убедиться, что результат уравнения является **TRUE**.  

**Пример 2. Время отличается на три минуты**

> **PhaseCorrectRate** = 1;  
> 
> **UpdateInterval** = 30 000 тактов;  
> 
> SystemClockRate = 156 000 тактов;  
> 
> **MaxAllowedPhaseOffset** = 10 мин = 600 секунд = 600 &times; 1 000 &times; 10 000 = 6 000 000 000 тактов;  
> 
> |**CurrentTimeOffset**| = 3 мин = 3&times;60&times;1 000&times;10 000 = 1 800 000 000 тактов  
> 
> |**CurrentTimeOffset**| &le;**MaxAllowedPhaseOffset**?  
> 
> 1 800 000 000&le;6 000 000 000: TRUE  

И удовлетворяет ли он приведенное выше уравнение?

> (|**CurrentTimeOffset**| &divide;(**PhaseCorrectRate**&times;**UpdateInterval**)&le;**SystemClockRate**&divide;2)  
> 
> 3 минуты&times;(1 800 000 000) &divide; (30 000 &times; 1) &le; 156 000 &divide; 2;  
> 
> 60 000 &le; 78 000: TRUE  

В этом случае часы будут медленно возвращаться в исходное положение.  

## <a name="reference-windows-time-service-registry-entries"></a>Справочные материалы. Записи реестра службы времени Windows

> [!WARNING]  
> Сведения об этих записях реестра предоставляются в виде справки по устранению неполадок или проверке применения необходимых параметров. Многие значения в разделе реестра W32Time используются службой W32Time внутренне для хранения информации. Не изменяйте эти значения вручную. Изменения в реестре не проверяются редактором реестра или операционной системой Windows перед их применением. Если реестр содержит недопустимые значения, в Windows могут произойти неустранимые ошибки.  

Служба времени Windows хранит сведения в следующих подразделах реестра:

- [**HKLM\SYSTEM\CurrentControlSet\Services\W32Time\Config**](#config).
- [**HKLM\SYSTEM\CurrentControlSet\Services\W32Time\Parameters**](#parameters).
- [**HKLM\SYSTEM\CurrentControlSet\Services\W32Time\TimeProviders\NtpClient**](#ntpclient).
- [**HKLM\SYSTEM\CurrentControlSet\Services\W32Time\TimeProviders\NtpServer**](#ntpserver).

Кроме того, для устранения неполадок можно [добавлять записи, чтобы настроить журналы](#enabling-w32time-logging).

В следующих таблицах колонка "Все версии" ссылается на версии Windows 7, Windows 8, Windows 10, Windows Server 2008 и Windows Server 2008 R2, Windows Server 2012 и Windows Server 2012 R2, Windows Server 2016 и Windows Server 2019. Некоторые записи доступны только в более новых версиях Windows.

> [!NOTE]  
> Некоторые параметры в реестре измеряются в тактах часов, а некоторые — в секундах. Чтобы преобразовать время из тактов в секунды, используйте следующие коэффициенты преобразования:  
> - 1 минута = 60 с  
> - 1 с = 1000 мс  
> - 1 мс = 10 000 тактовых импульсов в системе Windows, как описано в разделе [Свойство DateTime.Ticks](https://docs.microsoft.com/dotnet/api/system.datetime.ticks).  
>  
> Например, 5 минут будет иметь значение 5 &times; 60 &times; 1000 &times; 10000 = 3 000 000 000 тактов.  

### <a name="hklmsystemcurrentcontrolsetservicesw32timeconfig-subkey-entries"></a><a id="config"></a>Записи в подразделе HKLM\SYSTEM\CurrentControlSet\Services\W32Time\Config

|Запись реестра |Версии |Описание |
| --- | --- | --- |
|**AnnounceFlags** |Все версии |Определяет, помечен ли этот компьютер как надежный сервер времени. Компьютер не помечается как надежный, если он также не помечен как сервер времени.<ul><li>**0x00**. Не сервер времени.</li><li>**0x01**. Всегда сервер времени.</li><li>**0x02**. Автоматический сервер времени.</li><li>**0x04**. Всегда надежный сервер времени.</li><li>**0x08**. Автоматический надежный сервер времени.</li></ul><br />Значение по умолчанию для членов домена равно **10**. Значение по умолчанию для автономных клиентов и серверов равно **10**. |
|**ChainDisable** | |Определяет, отключен ли механизм связывания. Если механизм связывания отключен (имеет значение 0), контроллер домена только для чтения (RODC) может синхронизироваться с любым контроллером домена, но узлы, на которых не кэшированы пароли на RODC, не смогут синхронизироваться с RODC. Это логический параметр, который по умолчанию имеет значение — **0**.|
|**ChainEntryTimeout** | |Указывает максимальное количество времени, в течение которого запись может оставаться в таблице цепочек до того, как она будет считаться просроченной. Просроченные записи могут быть удалены при обработке следующего запроса или ответа. Значение по умолчанию — **16** (секунд). |
|**ChainLoggingRate** | |Определяет частоту, с которой событие, указывающее количество успешных и неудачных попыток связывания, заносится в системный журнал в средство просмотра событий. Значение по умолчанию — **30** (минут). |
|**ChainMaxEntries** | |Определяет максимальное число записей, допустимых в таблице цепочек. Если таблица цепочек заполнена и нет просроченных записей для удаления, все входящие запросы отклоняются. Значение по умолчанию — **128** (записей). |
|**ChainMaxHostEntries** | |Определяет максимальное число записей, допустимых в таблице цепочек для конкретного узла. Значение по умолчанию — **4** (записи). |
|**ClockAdjustmentAuditLimit** |Windows Server 2016 версии 1709 и более поздних; Windows 10 версии 1709 и более поздних. |Задает минимальные локальные настройки часов, которые могут быть записаны в журнал событий службы W32time на целевом компьютере. Значение по умолчанию — **800** (частей на каждый миллион — PPM). |
|**ClockHoldoverPeriod** |Windows Server 2016 версии 1709 и более поздних; Windows 10 версии 1709 и более поздних. |Указывает максимальное количество секунд, в течение которых системные часы могут номинально сохранять свою точность без синхронизации с источником времени. Если этот период времени завершается без получения службой W32time новых примеров от любого из поставщиков входных данных, она инициирует повторное обнаружение источников времени. Default: 7 800 секунд. |
|**EventLogFlags** |Все версии |Управляет событиями, которые регистрируются службой времени.<ul><li>**0x1**. Перевод времени.</li><li>**0x2**. Изменение источника.</li></ul>Значение по умолчанию для членов домена равно **2**. Значение по умолчанию на автономных клиентах и серверах равно **2**. |
|**FrequencyCorrectRate** |Все версии |Управляет скоростью, с которой часы исправляются. Если это значение слишком мало, часы нестабильны и превышают допустимые значения. Если значение слишком велико, синхронизация часов занимает много времени. Значение по умолчанию для членов домена равно **4**. Значение по умолчанию на автономных клиентах и серверах равно **4**.<p>**Примечание** <br />0 — это недопустимое значение для записи реестра **FrequencyCorrectRate**. На компьютерах под управлением Windows Server 2003, Windows Server 2003 R2, Windows Server 2008 и Windows Server 2008 R2, если значение равно **0**, служба времени Windows автоматически изменяет его на **1**. |
|**HoldPeriod** |Все версии |Контролирует период времени, в течение которого обнаружение пиков отключено для быстрого приведения локальных часов в режим синхронизации. Пик — это пример времени, указывающий на то, что время отключается на несколько секунд, и обычно включается после возвращения согласованных образцов времени. Значение по умолчанию для членов домена равно **5**. Значение по умолчанию на автономных клиентах и серверах равно **5**. |
|**LargePhaseOffset** |Все версии |Указывает, что смещение времени в 10<sup>-7</sup> секунд, которое больше этого значения или равно ему, считается пиком. Нарушение работы сети, например, большой объем трафика, может вызвать пиковый скачок. Пик будет игнорироваться, если он не будет повторяться в течение длительного периода времени. Значение по умолчанию для членов домена равно **50 000 000**. Значение по умолчанию на автономных клиентах и серверах равно **50 000 000**. |
|**LastClockRate** |Все версии |Поддерживается службой W32Time. Она содержит зарезервированные данные, используемые операционной системой Windows, и любые изменения этого параметра могут привести к непредсказуемым результатам. Значение по умолчанию для членов домена равно **156 250**. Значение по умолчанию на автономных клиентах и серверах равно **156 250**. |
|**LocalClockDispersion** |Все версии |Определяет дисперсию (в секундах), которую необходимо предположить, если единственным источником времени являются встроенные часы CMOS. Значение по умолчанию для членов домена равно **10**. Значение по умолчанию на автономных клиентах и серверах равно **10**. |
|**MaxAllowedPhaseOffset** |Все версии |Указывает максимальное смещение (в секундах), в течение которого W32Time попытается настроить часы компьютера с помощью тактовой частоты. Если смещение превышает эту частоту, W32Time устанавливает часы компьютера напрямую. Значение по умолчанию для членов домена равно **300**. Значение по умолчанию для автономных клиентов и серверов равно **1**. Дополнительные сведения см. в разделе [Настройка службы времени Windows на сброс часов компьютера](#configuring-how-windows-time-service-resets-the-computer-clock). |
|**MaxClockRate** |Все версии |Поддерживается службой W32Time. Она содержит зарезервированные данные, используемые операционной системой Windows, и любые изменения этого параметра могут привести к непредсказуемым результатам. Значение по умолчанию для членов домена равно **155 860**. Значение по умолчанию для автономных клиентов и серверов равно **155 860**. |
|**MaxNegPhaseCorrection** |Все версии |Указывает самую большую отрицательную коррекцию времени в секундах, которую создает служба. Если служба определяет, что изменение больше, чем требуется, она записывает в журнал событие.<p>**Примечание**<br />Значение **0xFFFFFFFF** является особым случаем. Оно означает, что служба всегда исправляет время.<p>Значение по умолчанию для членов домена равно **0xFFFFFFFF**. Значение по умолчанию для автономных клиентов и серверов равно **54 000** (15 часов).|
|**MaxPollInterval** |Все версии |Задает наибольший интервал в log2 секунд, допустимый для интервала опроса системы. Обратите внимание, что хотя система должна опрашиваться в соответствии с запланированным интервалом, поставщик может отказаться от создания примеров по запросу. Значение по умолчанию для контроллеров домена **10**. Значение по умолчанию для членов домена равно **15**. Значение по умолчанию для автономных клиентов и серверов равно **15**. |
|**MaxPosPhaseCorrection** |Все версии |Указывает самую большую положительную коррекцию времени в секундах, которую создает служба. Если служба определяет, что изменение больше, чем требуется, она записывает в журнал событие.<p>**Примечание**<br />Значение **0xFFFFFFFF** является особым случаем. Оно означает, что служба всегда исправляет время.<p>Значение по умолчанию для членов домена равно **0xFFFFFFFF**. Значение по умолчанию для автономных клиентов и серверов равно **54 000** (15 часов). |
|**MinClockRate** |Все версии |Поддерживается службой W32Time. Она содержит зарезервированные данные, используемые операционной системой Windows, и любые изменения этого параметра могут привести к непредсказуемым результатам. Значение по умолчанию для членов домена равно **155 860**. Значение по умолчанию для автономных клиентов и серверов равно **155 860**. |
|**MinPollInterval** |Все версии |Задает наименьший интервал в log2 секунд, допустимый для интервала опроса системы. Обратите внимание, что хотя система не запрашивает примеры чаще, поставщик может создавать образцы в любое время, кроме запланированного интервала. Значение по умолчанию для контроллеров домена равно **6**. Значение по умолчанию для членов домена равно **10**. Значение по умолчанию для автономных клиентов и серверов равно **10**. |
|**PhaseCorrectRate** |Все версии |Управляет частотой исправления ошибки этапа. Задание небольшого значения позволяет быстро устранить ошибку этапа, но может привести к нестабильной работе часов. Если значение слишком велико, то для исправления ошибки на этапе потребуется больше времени.<p>Значение по умолчанию для членов домена равно **1**. Значение по умолчанию на автономных клиентах и серверах равно **7**.<p>**Примечание**<br />0 — недопустимое значение для записи реестра **PhaseCorrectRate**. На компьютерах под управлением Windows Server 2003, Windows Server 2003 R2, Windows Server 2008 и Windows Server 2008 R2, если значение равно **0**, служба времени Windows автоматически изменяет его на **1**. |
|**PollAdjustFactor** |Все версии |Управляет принятием решения об увеличении или уменьшении интервала опроса для системы. Чем больше значение, тем меньше объем ошибки, что приводит к уменьшению интервала опроса. Значение по умолчанию для членов домена равно **5**. Значение по умолчанию на автономных клиентах и серверах равно **5**. |
|**RequireSecureTimeSyncRequests** |Windows 8 и более поздние версии |Определяет, будет ли контроллер домена отвечать на запросы синхронизации времени, использующие старые протоколы проверки подлинности. Если параметр включен (имеет значение **1**), контроллер домена не будет отвечать на запросы с помощью таких протоколов. Это логический параметр, который по умолчанию имеет значение — **0**. |
|**SpikeWatchPeriod** |Все версии |Указывает время, в течение которого должно существовать подозрительное смещение, прежде чем оно будет принято как правильное (в секундах). Значение по умолчанию для членов домена равно **900**. Значение по умолчанию на автономных клиентах и рабочих станциях равно **900**. |
|**TimeJumpAuditOffset** |Все версии |Целое число без знака, которое указывает пороговое значение проверки скачка времени в секундах. Если служба времени настраивает местные часы, устанавливая их напрямую, и коррекция времени является большей за это значение, то служба времени регистрирует событие проверки. |
|**UpdateInterval** |Все версии |Указывает количество тактов часов между настройками фазовой коррекции. Значение по умолчанию для контроллеров домена **100**. Значение по умолчанию для членов домена равно **30 000**. Значение по умолчанию для автономных клиентов и серверов равно **360 000**.<p>**Примечание**<br />0 — это недопустимое значение для записи реестра **UpdateInterval**. На компьютерах под управлением Windows Server 2003, Windows Server 2003 R2, Windows Server 2008 и Windows Server 2008 R2, если значение равно **0**, служба времени Windows автоматически изменяет его на **1**.|
|**UtilizeSslTimeData** |Версии Windows более поздние, чем версия 1511 сборки Windows 10 |Значение **1** указывает на то, что W32Time будет использовать несколько временных меток SSL для присвоения начального значения часам, которые являются совершенно неточными. |

### <a name="hklmsystemcurrentcontrolsetservicesw32timeparameters-subkey-entries"></a><a id="parameters"></a>Записи подраздела HKLM\SYSTEM\CurrentControlSet\Services\W32Time\Parameters

| Запись реестра | Версии | Описание |
| --- | --- | --- |
|**AllowNonstandardModeCombinations** |Все версии |Указывает, что в синхронизации между одноранговыми узлами разрешены нестандартные сочетания режимов. Значение по умолчанию для членов домена равно **1**. Значение по умолчанию для автономных клиентов и серверов равно **1**. |
|**NtpServer** |Все версии |Указывает разделенный пробелами список одноранговых узлов, из которых компьютер получает отметки времени, состоящие из одного или нескольких DNS-имен или IP-адресов в строке. Каждое из указанных DNS-имен или IP-адресов должно быть уникальным. Подключенные к домену компьютеры должны синхронизироваться с более надежным источником времени, таким как официальная часовая шкала США.  <ul><li>0x01 SpecialInterval </li><li>0x02 UseAsFallbackOnly</li><li>0x04 SymmetricActive: дополнительные сведения об этом режиме см. в статье [Windows Time Server 3.3 Modes of Operation](https://go.microsoft.com/fwlink/?LinkId=208012) (Сервер времени Windows. 3.3 Режимы операций).</li><li>0x08 Client</li></ul><br />Значение по умолчанию для этой записи реестра членов домена отсутствует. По умолчанию на автономных клиентах и серверах используется значение time.windows.com,0x1.<p>**Примечание**<br />Дополнительные сведения о доступных NTP-серверах см. в статье [Список серверов времени, поддерживающих протокол SNTP (Simple Network Time Protocol), доступных в Интернете](https://support.microsoft.com/help/262680/a-list-of-the-simple-network-time-protocol-sntp-time-servers-that-are) (KB 262680). |
|**ServiceDll** |Все версии |Поддерживается службой W32Time. Она содержит зарезервированные данные, используемые операционной системой Windows, и любые изменения этого параметра могут привести к непредсказуемым результатам. Расположение по умолчанию для этой DLL как для членов домена, так и для автономных клиентов и серверов — %windir%\System32\W32Time.dll. |
|**ServiceMain** |Все версии |Поддерживается службой W32Time. Она содержит зарезервированные данные, используемые операционной системой Windows, и любые изменения этого параметра могут привести к непредсказуемым результатам. Значение по умолчанию для членов домена — **SvchostEntry_W32Time**. Значение по умолчанию на автономных клиентах и серверах — **SvchostEntry_W32Time**. |
|**Type** |Все версии |Указывает, от каких одноранговых узлов следует принимать синхронизацию:  <ul><li>**NoSync**. Служба времени не синхронизируется с другими источниками.</li><li>**NTP**. Служба времени синхронизируется с серверов, указанных в **NtpServer**. запись реестра.</li><li>**NT5DS**. Служба времени синхронизируется из иерархии доменов.  </li><li>**AllSync**. Служба времени использует все доступные механизмы синхронизации.  </li></ul>Значение по умолчанию для членов домена равно **NT5DS**. Значение по умолчанию на автономных клиентах и серверах равно **NTP**. |

### <a name="hklmsystemcurrentcontrolsetservicesw32timetimeprovidersntpclient-subkey-entries"></a><a id="ntpclient"></a>Записи подраздела HKLM\SYSTEM\CurrentControlSet\Services\W32Time\TimeProviders\NtpClient

|Запись реестра |Версия |Описание |
| --- | --- | --- |
|**AllowNonstandardModeCombinations** |Все версии |Указывает, что в синхронизации между одноранговыми узлами разрешены нестандартные сочетания режимов. Значение по умолчанию для членов домена равно **1**. Значение по умолчанию для автономных клиентов и серверов равно **1**.|
|**CompatibilityFlags** |Все версии |Задает следующие флаги и значения совместимости:<ul><li>**0x00000001** — DispersionInvalid;</li><li>**0x00000002** — IgnoreFutureRefTimeStamp;</li><li>**0x80000000** — AutodetectWin2K;</li><li>**0x40000000** — AutodetectWin2KStage2.</li></ul>Значение по умолчанию для членов домена равно **0x80000000**. Значение по умолчанию для автономных клиентов и серверов равно **0x80000000**. |
|**CrossSiteSyncFlags** |Все версии |Определяет, выбирает ли служба участников синхронизации за пределами домена компьютера. Параметры и значения:<ul><li>**0** — нет;</li><li>**1** — PdcOnly;</li><li>**2** — все.</li></ul>Это значение пропускается, если значение NT5DS не задано. Значение по умолчанию для членов домена равно **2**. Значение по умолчанию для автономных клиентов и серверов равно **2**. |
|**DllName** |Все версии |Указывает расположение библиотеки DLL для поставщика времени.<p>Расположение по умолчанию для этой DLL как для членов домена, так и для автономных клиентов и серверов — **%windir%\System32\W32Time.dll**. |
|**Включен** |Все версии |Указывает, включен ли поставщик NtpClient в текущей службе времени.<ul><li>**1** — да;</li><li>**0** — нет.</li></ul>Значение по умолчанию для членов домена равно **1**. Значение по умолчанию на автономных клиентах и серверах равно **1**.|
|**EventLogFlags** |Все версии |Указывает события, регистрируемые службой времени Windows.<ul><li>**0x1** — изменение достижимости.</li><li>**0x2** — пример сильного отклонения (это относится к Windows Server 2003, Windows Server 2003 R2, Windows Server 2008 и Windows Server 2008 R2).</li></ul>Значение по умолчанию для членов домена равно **0x1**. Значение по умолчанию на автономных клиентах и серверах равно **0x1**.|
|**InputProvider** |Все версии |Указывает, следует ли включить NtpClient в качестве InputProvider, который получает сведения о времени от NtpServer. NTP-сервер является сервером времени, который отвечает на запросы времени клиента по сети, возвращая полезные для синхронизации локальных часов образцы времени. <ul><li>**1** — да;</li><li>**0** — нет.</li></ul>Значение по умолчанию для членов домена и автономных клиентов — **1**. |
|**LargeSampleSkew** |Все версии |Указывает большое отклонение примера для ведения журнала в секундах. Для соответствия спецификациям Комиссии по ценным бумагам и биржам (SEC), это значение должно быть равно трем секундам. События будут регистрироваться для этого параметра только в том случае, если для **EventLogFlags** настроено большое отклонение примера 0x2. Значение по умолчанию для членов домена равно 3. Значение по умолчанию на автономных клиентах и серверах равно 3. |
|**ResolvePeerBackOffMaxTimes** |Все версии |Указывает максимальное количество раз, после которых интервал ожидания будет удвоен при многократных попытках найти одноранговый узел для синхронизации, которые завершились ошибкой. Нулевое значение означает, что интервал ожидания всегда является минимальным. Значение по умолчанию для членов домена равно **7**. Значение по умолчанию на автономных клиентах и серверах равно **7**. |
|**ResolvePeerBackoffMinutes** |Все версии |Указывает начальный интервал ожидания (в минутах) перед попыткой нахождения однорангового узла для синхронизации. Значение по умолчанию для членов домена равно **15**. Значение по умолчанию на автономных клиентах и серверах равно **15**.  |
|**SpecialPollInterval** |Все версии |Указывает специальный интервал опроса в секундах для одноранговых узлов, настроенных вручную. Если включен флаг 0x1 **SpecialInterval**, служба W32Time использует этот интервал опроса вместо интервала опроса, определяемого операционной системой. Значение по умолчанию для членов домена равно **3 600**. Значение по умолчанию на автономных клиентах и серверах равно **604 800**.<br/><br/>Новые параметры для сборки 1703 **SpecialPollInterval** содержатся в значениях конфигурации реестра **MinPollInterval** и **MaxPollInterval**.|
|**SpecialPollTimeRemaining** |Все версии |Поддерживается службой W32Time. Она содержит зарезервированные данные, используемые операционной системой Windows. В ней указывается время в секундах, по истечении которого служба W32Time будет повторно синхронизироваться после перезагрузки компьютера. Любые изменения этого параметра могут привести к непредсказуемым результатам. Значение по умолчанию для обоих членов домена, а также для изолированных клиентов и серверов остается пустым. |

### <a name="hklmsystemcurrentcontrolsetservicesw32timetimeprovidersntpserver-subkey-entries"></a><a id="ntpserver"></a>Записи подраздела HKLM\SYSTEM\CurrentControlSet\Services\W32Time\TimeProviders\NtpServer

|Запись реестра |Версии |Описание |
| --- | --- | --- |
|**AllowNonstandardModeCombinations** |Все версии |Указывает, что в синхронизации между клиентами и серверами разрешены нестандартные сочетания режимов. Значение по умолчанию для членов домена равно **1**. Значение по умолчанию для автономных клиентов и серверов равно **1**. |
|**DllName** |Все версии |Указывает расположение библиотеки DLL для поставщика времени. Расположение по умолчанию для этой DLL как для членов домена, так и для автономных клиентов и серверов — **%windir%\System32\W32Time.dll**.  |
|**Включен** |Все версии |Указывает, включен ли поставщик NtpServer в текущей службе времени. <ul><li>**1** — да;</li><li>**0** — нет.</li></ul>Значение по умолчанию для членов домена равно **1**. Значение по умолчанию на автономных клиентах и серверах равно **1**. |
|**InputProvider** |Все версии |Указывает, следует ли включить NtpClient в качестве InputProvider, который получает сведения о времени от NtpServer. NTP-сервер является сервером времени, который отвечает на запросы времени клиента по сети, возвращая полезные для синхронизации локальных часов образцы времени. <ul><li>**1** — да;</li><li>**0** — нет = 0. </li></ul>Значение по умолчанию для членов домена и автономных клиентов: 1 |

## <a name="reference-pre-set-values-for-the-windows-time-service-gpo-settings"></a>Справочные материалы. Предварительно заданные значения параметров объекта групповой политики службы времени Windows  

В следующей таблице перечислены глобальные параметры групповой политики, связанные со службой времени Windows, и предварительно заданное значение, связанное с каждым параметром. Дополнительные сведения о каждом параметре см. в соответствующих записях реестра в разделе [Справочные материалы. Записи реестра службы времени Windows](#reference-windows-time-service-registry-entries) ранее в этой статье. Следующие параметры содержатся в одном объекте групповой политики, который называется **Глобальные параметры конфигурации**.  

### <a name="pre-set-values-for-global-group-policy-settings"></a>Предварительно заданные значения для параметров "Глобальная групповая политика"

|Параметр групповой политики|Предварительно заданное значение|  
| --- | --- |
|**AnnounceFlags**|**10**|  
|**EventLogFlags**|**2**|  
|**FrequencyCorrectRate**|**4**|  
|**HoldPeriod**|**5**|  
|**LargePhaseOffset**|**1 280 000**|  
|**LocalClockDispersion**|**10**|  
|**MaxAllowedPhaseOffset**|**300**|  
|**MaxNegPhaseCorrection**|**54 000** (15 часов)|  
|**MaxPollInterval**|**15**|  
|**MaxPosPhaseCorrection**|**54 000** (15 часов)|  
|**MinPollInterval**|**10**|  
|**PhaseCorrectRate**|**7**|  
|**PollAdjustFactor**|**5**|  
|**SpikeWatchPeriod**|**90**|  
|**UpdateInterval**|**100**|  

### <a name="pre-set-values-for-configure-windows-ntp-client-settings"></a>Предварительно заданные значения параметров "Настроить NTP-клиент Windows"

В следующей таблице перечислены доступные параметры для **Настройки объекта групповой политики NTP-клиента Windows** и предварительно заданные значения, связанные со службой времени Windows. Дополнительные сведения о каждом параметре см. в соответствующих записях реестра в разделе [Справочные материалы. Записи реестра службы времени Windows](#reference-windows-time-service-registry-entries) ранее в этой статье.  

|Параметр групповой политики|Предварительно заданное значение|  
|------------------------|-----------------|  
|**NtpServer**|time.windows.com, **0x1**.|  
|**Type**|Параметры по умолчанию:<ul><li>**NTP.** Для не присоединенных к домену компьютеров.</li><li>**NT5DS.** Для присоединенных к домену компьютеров.</li></ul>|  
|**CrossSiteSyncFlags**|**2**|  
|**ResolvePeerBackoffMinutes**|**15**|  
|**ResolvePeerBackoffMaxTimes**|**7**|  
|**SpecialPollInterval**|**3 600**|  
|**EventLogFlags**|**0**;|  

## <a name="reference-network-ports-that-the-windows-time-service-uses"></a>Справочные материалы. Сетевые порты, используемые службой времени Windows

Служба времени Windows соответствует спецификации NTP, которая требует использования UDP-порта 123 для постоянной синхронизации связи. Этот порт зарезервирован службой времени Windows и остается зарезервированным на все время. Всякий раз, когда компьютер синхронизирует свои часы или предоставляет время другому компьютеру, эта связь осуществляется через UDP-порт 123.  

> [!NOTE]  
> При наличии компьютера с несколькими сетевыми адаптерами (также называемый *многосетевым* компьютером) вы не сможете выборочно включить службу времени Windows на основе сетевого адаптера.  

## <a name="related-information"></a>Дополнительные сведения  

Следующие ресурсы содержат дополнительные сведения, относящиеся к этому разделу.  

- Документ RFC *1305* в базе данных RFC IETF  
