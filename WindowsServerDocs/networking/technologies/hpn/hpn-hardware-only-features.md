---
title: Высокопроизводительные сети
description: В этом разделе приводятся общие сведения о технологиях разгрузки и оптимизации в Windows Server 2016, а также ссылки на дополнительные рекомендации по этим технологиям.
ms.topic: article
ms.assetid: 0cafb1cc-5798-42f5-89b6-3ffe7ac024ba
manager: dougkim
ms.author: lizross
author: eross-msft
ms.date: 09/12/2018
ms.openlocfilehash: b2cbb47262033d5149e47704e3f232b7662f69e6
ms.sourcegitcommit: dfa48f77b751dbc34409aced628eb2f17c912f08
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/07/2020
ms.locfileid: "87955670"
---
# <a name="hardware-only-ho-features-and-technologies"></a>Только аппаратные функции и технологии

Эти аппаратные ускорения улучшают производительность сети в сочетании с программным обеспечением, но не являются частью какой – либо программной функции. К таким примерам относятся контроль прерываний, управление потоком и разгрузка CHECKSUM на стороне приема.

>[!TIP]
>Функции SH и ПРИНЕС доступны, если установленный сетевой адаптер поддерживает ее. В описании функций ниже рассказывается, как определить, поддерживает ли ваш сетевой адаптер эту функцию.

## <a name="address-checksum-offload"></a>Разгрузка контрольной суммы адреса

Разгрузка контрольной суммы адресов — это функция сетевого интерфейса, которая позволяет разгрузить вычисление контрольных сумм адресов (IP, TCP, UDP) на СЕТЕВое оборудование для отправки и получения.

На пути получения контрольная сумма разгрузки вычисляет контрольные суммы в заголовках IP, TCP и UDP (соответственно) и указывает операционной системе на то, что контрольные суммы пройдены, не пройдены или не проверены. Если сетевая карта утверждает, что контрольные суммы действительны, операционная система принимает пакет с неправильными вызовами. Если сетевая карта утверждает, что контрольные суммы недействительны или не установлены, стек IP/TCP/UDP внутренне вычисляет контрольные суммы. Если вычисленная контрольная сумма завершается сбоем, пакет удаляется.

На пути отправки контрольная сумма разгрузка вычисляет и вставляет контрольные суммы в заголовок IP, TCP или UDP соответствующим образом.

Отключение разгрузок контрольной суммы для пути отправки не отключает вычисление контрольной суммы и вставку пакетов, отправляемых драйверу минипорта, с помощью функции разгрузки большой отправки (LSO).Чтобы отключить все вычисления для разгрузки контрольной суммы, пользователь должен также отключить LSO.

_**Управление разгрузкой контрольной суммы адреса**_

В дополнительных свойствах есть несколько различных свойств:

-   Разгрузка контрольной суммы IPv4

-   Разгрузка контрольной суммы TCP (IPv4)

-   Разгрузка контрольной суммы TCP (IPv6)

-   Разгрузка контрольной суммы UDP (IPv4)

-   Разгрузка контрольной суммы UDP (IPv6)

По умолчанию все они включены всегда. Рекомендуется всегда включать все эти разгрузки.

Разгрузкой контрольной суммы можно управлять с помощью командлетов Enable-Нетадаптерчекксумоффлоад и Disable-Нетадаптерчекксумоффлоад. Например, следующий командлет включает вычисления контрольной суммы TCP (IPv4) и UDP (IPv4):

```PowerShell
Enable-NetAdapterChecksumOffload –Name * -TcpIPv4 -UdpIPv4
```

_**Советы по использованию разгрузок контрольной суммы адреса**_

Разгрузка контрольной суммы адреса должна всегда включаться независимо от рабочей нагрузки или обстоятельств. Эта основная часть всех технологий разгрузки всегда повышает производительность сети. Разгрузка контрольной суммы также требуется для выполнения других разгрузок без отслеживания состояния, включая масштабирование на стороне приема (RSS), получение сегментов (RSC) и разгрузку большой отправки (LSO).

## <a name="interrupt-moderation-im"></a>Контроль прерываний (IM)

Перед прерыванием операционной системы IM отправляет в буфер несколько полученных пакетов. Когда сетевой адаптер получает пакет, он запускает таймер. Когда буфер полон или срок действия таймера истекает, в зависимости от того, какой из них первым, сетевая карта прерывает работу операционной системы.

Многие сетевые адаптеры поддерживают не только включение/отключение для контроля прерываний. Большинство сетевых адаптеров поддерживают основные понятия, связанные с низким, средним и высоким уровнем скорости обмена мгновенными сообщениями. Разные тарифы представляют более короткие и более длинные таймеры и соответствующие изменения размера буфера, позволяющие сократить задержку (с низким уровнем прерывания) или уменьшить количество прерываний (высокий уровень прерывания).

Существует баланс между уменьшением количества прерываний и чрезмерной задержкой доставки пакетов. Как правило, обработка пакетов более эффективна благодаря включению поддержки прерываний. Для приложений с высокой производительностью или низкой задержкой может потребоваться оценить влияние отключения или снижения контроля прерываний.

## <a name="jumbo-frames"></a>Кадры крупного размера

Кадры крупных размеров — это сетевой интерфейс и сетевая функция, позволяющая приложению передавать кадры, размер которых значительно превышает 1500 байт по умолчанию. Обычно ограничение на большие кадры составляет около 9000 байт, но может быть меньше.

В Windows Server 2012 R2 не было изменений в поддержке крупных кадров.

В Windows Server 2016 существует новая разгрузка: MTU_for_HNV. Эта новая разгрузка работает с крупными параметрами кадров, чтобы гарантировать, что инкапсулированный трафик не требует сегментации между узлом и соседним коммутатором. В этой новой функции в стеке SDN сетевой адаптер автоматически вычисляет значение MTU для объявления и значение MTU, которое будет использоваться при передаче данных. Эти значения для параметра MTU различаются, если используется разгрузка HNV. (В таблице "совместимость функций" Таблица 1 MTU_for_HNV будет иметь те же взаимодействия, что и разгрузки HNVv2, так как она напрямую связана с разгрузкой HNVv2.)

## <a name="large-send-offload-lso"></a>с разгрузкой большой отправки (LSO);

LSO позволяет приложению передать большой блок данных в сетевую карту, и сетевая карта разбивает данные на пакеты, которые соответствуют максимальной единице передачи (MTU) сети.

## <a name="receive-segment-coalescing-rsc"></a>Receive Segment Coalescing (RSC)

Объединение сегментов, называемое также «крупной разгрузкой», — это сетевая карта, которая принимает пакеты, входящие в тот же поток, который приходит между сетевыми прерываниями, и объединяет их в один пакет, прежде чем доставлять их в операционную систему. RSC недоступен на сетевых адаптерах, привязанных к виртуальному коммутатору Hyper-V. Дополнительные сведения см. в статье [Объединение сегментов приема (RSC)](https://docs.microsoft.com/windows-server/networking/technologies/hpn/rsc-in-the-vswitch).