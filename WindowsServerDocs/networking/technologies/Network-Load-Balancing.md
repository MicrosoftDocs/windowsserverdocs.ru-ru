---
title: Балансировка сетевой нагрузки
description: В этом разделе представлен обзор компонента балансировки сетевой нагрузки (NLB) в Windows Server 2016 и ссылки на дополнительные руководства по созданию, настройке и управлению кластеров балансировки сетевой Нагрузки.
manager: brianlic
ms.prod: windows-server-threshold
ms.technology: networking-nlb
ms.topic: article
ms.assetid: 244a4b48-06e5-4796-8750-a50e4f88ac72
ms.author: pashort
author: shortpatti
ms.openlocfilehash: b9fd39381316a8bcd06328e7aa75492ed99bc7f1
ms.sourcegitcommit: 19d9da87d87c9eefbca7a3443d2b1df486b0b010
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2018
---
# <a name="network-load-balancing"></a>Балансировка сетевой нагрузки

>Область применения: Windows Server (канал точками годовой), Windows Server 2016

В этом разделе представлен обзор компонента балансировки сетевой нагрузки \(NLB\) в Windows Server 2016 и ссылки на дополнительные руководства по созданию, настройке и управлению кластеров балансировки сетевой Нагрузки.

Балансировка сетевой Нагрузки можно использовать для управления два или более серверами как единым виртуальным кластером. NLB повышает доступность и масштабируемость серверных приложений Интернета, используемых на веб-, FTP, брандмауэр, прокси-сервера, виртуальной частной сети \(VPN\) и других важных mission\ серверов.   

>[!NOTE]
>Windows Server 2016 включает новые \(SLB\) Балансировка нагрузки программного обеспечения на основе Azure в качестве компонента \(SDN\) программного обеспечения определены сетевые инфраструктуры. Использование SLB вместо балансировки сетевой Нагрузки при использовании SDN, используете нагрузок, отличных от Windows, должны исходящих сетевых \(NAT\), или вам нужна \(L3\) уровня 3 или отличающегося от TCP на основе балансировки нагрузки. Можно продолжать использовать балансировки сетевой Нагрузки Windows Server 2016 не SDN развертываний. Дополнительные сведения о SLB см. в разделе [программной балансировки нагрузки (SLB) для SDN](../sdn/technologies/network-function-virtualization/Software-Load-Balancing--SLB--for-SDN.md).

Функция балансировки сетевой нагрузки \(NLB\) распределяет трафик по нескольким серверам с помощью сетевого протокола протокол TCP/IP. Объединяя два или несколько компьютеров, на которых запущены приложения, в единый виртуальный кластер, NLB обеспечивает надежность и быстродействие веб-серверов и других важных mission\ серверов.  
  
Серверы в NLB-кластере называются *узлов*, и на каждом узле выполняется отдельная копия серверных приложений. NLB распределяет входящие клиентские запросы между узлами в кластере. Можно настроить нагрузку, которая будет обрабатываться каждым узлом. Можно также добавить динамически в кластер узлы нужно обработать дополнительную нагрузку. Балансировка сетевой Нагрузки также может направлять весь трафик на выделенном для этого узел, называемый *узлом по умолчанию*.  
  
Балансировки сетевой Нагрузки позволяет обращаться ко всем компьютерам в кластере по одному и тому же набору IP-адресов и поддерживает набор уникальных, выделенных IP-адресов для каждого узла. Для приложений с балансировкой load\ при сбое на узле или переходит в автономный режим, нагрузка автоматически перераспределяется между компьютерами, которые по-прежнему работают. Когда он будет готов, компьютер вне сети можно прозрачно повторное присоединение к кластеру и взять на себя часть нагрузки, что позволит другие компьютеры в кластере, чтобы снизить объем данных.  
  
## <a name="BKMK_APP"></a>Практическое применение  
NLB целесообразно для обеспечения работы приложений, таких как веб-серверы под управлением \(IIS\) Internet Information Services части их доступности с минимальной потерей машинного времени, и что они являются масштабируемыми \ (за счет добавления дополнительных серверов как increases\ нагрузки). В следующих разделах применение NLB для поддержки высокой доступности, масштабируемости и управляемости кластерных серверов, выполняющих указанные приложения.  
  
### <a name="high-availability"></a>Высокая доступность  
Система высокой доступности обеспечивает приемлемом уровне службы с минимальной потерей машинного времени. Для обеспечения высокой доступности, балансировки сетевой Нагрузки включает функции встроенных, которые могут автоматически:  
  
-   Обнаружение узла кластера самопроизвольно прекратившего работу или переходит в автономный режим и повторите операцию восстановления.  
  
-   Балансировка нагрузки сети при добавлении или удалении узлов.  
  
-   Восстановление и перераспределение рабочей нагрузки в течение 10 секунд.  
  
### <a name="scalability"></a>Масштабируемость  
Масштабируемость — можно настройки компьютера, службы или приложения в соответствии с повышением требований к производительности. Для кластеров балансировки сетевой Нагрузки масштабируемость — это возможность для добавления производительность одной или нескольких систем к существующему кластеру когда общая нагрузка кластера превышает его возможности. Поддержка масштабируемости реализуется в NLB следующим:  
  
-   Балансировка запросов нагрузки в пределах NLB-кластера для отдельных служб протокол TCP/IP.  
  
-   Поддержка до 32 компьютеров в одном кластере.  
  
-   Балансировка запросов нагрузки для нескольких серверов \ (от одного клиента или из нескольких clients\) по нескольким узлам кластера.  
  
-   Добавление узлов в кластер балансировки сетевой Нагрузки по мере увеличения нагрузки, не приводит к сбою кластера.  
  
-   Вывод узлов из кластера по мере уменьшения нагрузки.  
  
-   Включите высокую производительность и уменьшение объема служебных данных посредством реализации полнофункционального конвейерного режима. Данный режим позволяет отправлять NLB-кластеру, не ожидая ответа на предыдущий запрос запросов.  
  
### <a name="manageability"></a>Управляемость  
Поддержка управляемости реализуется в NLB следующим:  
  
-   Управление и настройка несколькими кластерами NLB и узлами кластеров с одного компьютера с помощью диспетчера балансировки сетевой Нагрузки или [командлеты балансировки сетевой нагрузки (NLB) в Windows PowerShell](https://technet.microsoft.com/library/hh801274.aspx).
  
-   Укажите режим балансировки для отдельного IP-порта или группы портов с помощью правила управления портами.  
  
-   Определение правил другой порт для каждого веб-сайта. Если вы используете один и тот же набор серверов с балансировкой load\ для нескольких приложений или веб-сайты, правила для портов основаны на виртуальный IP-адрес назначения \(using virtual clusters\).  

-   Направьте все клиентские запросы на один узел с помощью необязательно, выполняющей одну узла правил. NLB будет направлять клиентские запросы на определенный узел, где выполняются заданные приложения.  

-   Блокировать доступ по сети к определенным IP-портам.  

-   Включить поддержку протокола IGMP \(IGMP\) на узлах кластера для управления портов коммутатора \ (которой входящие сетевые пакеты отправляются на все порты switch\) при работе в режиме многоадресной рассылки.  

-   Запуск, остановка и Управление действиями NLB могут производиться удаленно с использованием команд или сценариев Windows PowerShell.  

-   Просмотрите журнал событий Windows проверьте события балансировки сетевой Нагрузки. Записываются все действия NLB и изменения кластера в журнале событий.  

## <a name="important-functionality"></a>Важные функции  
 
NLB устанавливается как стандартный компонент Windows Server-сетевой драйвер. Его операции прозрачны для стека сетевых Протоколов TCP/IP протоколом. На следующем рисунке отношения NLB и других компонентов программного обеспечения в типовой конфигурации.  
  
![Балансировка сетевой нагрузки и других компонентов программного обеспечения](../media/NLB/nlb.jpg)  
  
Ниже приведены основные компоненты балансировки сетевой Нагрузки.  
  
- Не требует оборудования изменений для запуска.  
  
- Предоставляет средства балансировки сетевой нагрузки для настройки и управления несколькими кластерами и всеми узлами с одного удаленного или локального компьютера.  
  
- Обеспечивает клиентам возможность доступа к кластеру по единому логическому Интернет-имени и виртуальных IP-адресу, называемому IP-адрес кластера \ (сохраняются отдельные имена для каждого computer\). Балансировка сетевой Нагрузки поддерживает несколько виртуальных IP-адресов для многосетевых серверов.  
  
> [!NOTE]  
> При развертывании виртуальных машин как виртуальных кластеров балансировки сетевой Нагрузки не требует от серверов быть многосетевыми, чтобы использовать несколько виртуальных IP-адресов.  
  
- Средство балансировки сетевой Нагрузки может быть привязано к нескольким сетевым адаптерам, что позволяет настроить несколько независимых кластеров на каждом узле. Поддержка нескольких сетевых адаптеров отличается от виртуальных кластеров, в том, что виртуальные кластеры позволяют настраивать несколько кластеров на одном сетевом адаптере.  
  
- Не требует модификации серверных приложений, чтобы они могут запускать в кластере NLB.  
  
- Можно настроить для автоматического добавления узла в кластер, если происходит сбой этого узла кластера и последующим возвращением с сеть. Добавленный узел может приступать к обработке новых клиентских обращений сервера.  
  
-   Дает возможность отключения компьютеров от сети для профилактического обслуживания, не затрагивая операции кластера на других узлах.  
  
## <a name="BKMK_HARD"></a>Требования к оборудованию  
Ниже приведены требования к оборудованию для запуска кластера NLB.  
  
-   Все узлы кластера должны располагаться в той же подсети.  
  
-   Не существует ограничений на количество сетевых адаптеров на каждом узле, и отдельные узлы могут иметь разное число адаптеров.  
  
-   В каждом кластере все сетевые адаптеры должны быть одноадресной рассылки или многоадресной рассылки. Балансировка сетевой Нагрузки не поддерживает смешанную среду одноадресной внутри одного кластера и многоадресной рассылки.  
  
-   При использовании одноадресного режима сетевой адаптер, используемый для обработки трафика отведенный период заполнением кластера должен поддерживать изменение его Mac \(MAC\)-адрес.  
  
## <a name="BKMK_SOFT"></a>Требования к программному обеспечению  
Ниже приведены требования к программному обеспечению для запуска кластера NLB.  
  
-   Можно использовать только протокол TCP/IP на адаптере, для которого включается NLB на каждом узле. Не добавлять другие протоколы \ (например, IPX\) для этого адаптера.  
  
-   IP-адреса серверов в кластере должны быть статическими.  
  
> [!NOTE]  
> NLB не поддерживает \(DHCP\) Dynamic Host Configuration Protocol. NLB отключает протокол DHCP на каждом настраиваемом интерфейсе.  
  
## <a name="BKMK_INSTALL"></a>Сведения об установке  
Балансировка сетевой Нагрузки можно установить с помощью диспетчера сервера или команд Windows PowerShell для балансировки сетевой Нагрузки.

При необходимости можно установить средства балансировки сетевой нагрузки для управления локальным или удаленным кластером NLB. В него входят диспетчер балансировки сетевой нагрузки и команд Windows PowerShell для NLB.

### <a name="installation-with-server-manager"></a>Установка с помощью диспетчера серверов

В диспетчере сервера можно использовать Мастер функций и добавления ролей для добавления **балансировки сетевой нагрузки** компонентов. После завершения работы мастера установки балансировки сетевой Нагрузки, и необходимо перезапустить компьютер.


### <a name="installation-with-windows-powershell"></a>Установка с помощью Windows PowerShell  

Установка балансировки сетевой Нагрузки с помощью Windows PowerShell, запустите следующую команду в командную строку Windows PowerShell на компьютере, где вы хотите установить балансировки сетевой Нагрузки.

    
    Install-WindowsFeature NLB -IncludeManagementTools
    
После завершения установки перезагрузка компьютера не требуется.

Дополнительные сведения см. в разделе [Install-WindowsFeature](https://technet.microsoft.com/library/jj205467.aspx).

### <a name="network-load-balancing-manager"></a>Диспетчер балансировки сетевой нагрузки
Чтобы открыть диспетчер балансировки сетевой нагрузки в диспетчере сервера, щелкните **средства**, а затем нажмите кнопку **диспетчер балансировки сетевой нагрузки**.
  
## <a name="BKMK_LINKS"></a>Дополнительные ресурсы  
Ниже приведены ссылки на дополнительные сведения о функции балансировки сетевой Нагрузки.  
  
|Тип содержимого|Ссылки|  
|----------------|--------------|  
|Развертывания|[Руководство по развертыванию Балансировка нагрузки](https://technet.microsoft.com/library/cc754833(WS.10).aspx) & #124; [Настройка балансировки сетевой нагрузки с служб терминалов](https://technet.microsoft.com/library/cc771300(v=WS.10).aspx)|  
|Операции|[Управление кластерами балансировки сетевой нагрузки](https://technet.microsoft.com/library/cc753954(WS.10).aspx) & #124; [Установка параметров балансировки сетевой нагрузки](https://technet.microsoft.com/library/cc731619(WS.10).aspx) & #124; [Контроль узлов в кластерах балансировки сетевой нагрузки](https://technet.microsoft.com/library/cc770870(WS.10).aspx)|  
|Устранение неполадок|[Диагностика кластеров балансировки сетевой нагрузки](https://technet.microsoft.com/library/cc732592(WS.10).aspx) & #124; [Балансировки сетевой Нагрузки события и ошибки кластеров](https://technet.microsoft.com/library/cc731678(WS.10).aspx)|
|Средства и параметры|[Командлеты PowerShell Windows балансировки нагрузки сети](https://go.microsoft.com/fwlink/p/?LinkId=238123)|
|Ресурсы сообщества|[Форум по высокой доступности \(Clustering\)](https://go.microsoft.com/fwlink/p/?LinkId=230641)