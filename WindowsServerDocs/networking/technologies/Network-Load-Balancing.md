---
title: Балансировка сетевой нагрузки
description: В этом разделе вам предоставлен Обзор балансировки сетевой нагрузки \(балансировки сетевой Нагрузки\) функция в Windows Server 2016. Можно использовать для управления несколькими серверами как единым виртуальным кластером NLB. NLB повышает доступность и масштабируемость серверных приложений Интернета, используемых на веб-, FTP, брандмауэра, прокси-сервера, виртуальной частной сети \(VPN\)и другие критически\-критически важными серверами.
manager: dougkim
ms.prod: windows-server-threshold
ms.technology: networking-nlb
ms.topic: article
ms.assetid: 244a4b48-06e5-4796-8750-a50e4f88ac72
ms.author: pashort
author: shortpatti
ms.date: 09/13/2018
ms.openlocfilehash: d0cf1e1d6b1681a0f18908b08cd17572159e0462
ms.sourcegitcommit: 0d0b32c8986ba7db9536e0b8648d4ddf9b03e452
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/17/2019
ms.locfileid: "59881755"
---
# <a name="network-load-balancing"></a>Балансировка сетевой нагрузки

>Относится к: Windows Server (полугодовой канал), Windows Server 2016

В этом разделе вам предоставлен Обзор балансировки сетевой нагрузки \(балансировки сетевой Нагрузки\) функция в Windows Server 2016. Можно использовать для управления несколькими серверами как единым виртуальным кластером NLB. NLB повышает доступность и масштабируемость серверных приложений Интернета, используемых на веб-, FTP, брандмауэра, прокси-сервера, виртуальной частной сети \(VPN\)и другие критически\-критически важными серверами.  

>[!NOTE]
>Windows Server 2016 включает новые вдохновили Azure подсистемы балансировки нагрузки \(SLB\) как компонент программно-Конфигурируемую сеть \(SDN\) инфраструктуры. Используйте SLB вместо балансировки сетевой Нагрузки при использовании SDN, при использовании рабочих нагрузок отличных от Windows, требуется преобразование исходящих сетевых адресов \(NAT\), или вам нужна третьего уровня \(L3\) или отличающегося от TCP на основе подсистемы балансировки нагрузки. Можно продолжать использовать балансировки сетевой Нагрузки в Windows Server 2016 для развертываний, отличных от SDN. Дополнительные сведения о SLB, см. в разделе [программного обеспечения нагрузки балансировки (SLB) для SDN](../sdn/technologies/network-function-virtualization/Software-Load-Balancing--SLB--for-SDN.md).

Балансировка сетевой нагрузки \(балансировки сетевой Нагрузки\) компонент распределяет трафик по нескольким серверам с помощью TCP\/IP-адрес сетевого протокола. Объединяя два или несколько компьютеров, работающих под управлением приложения, в единый виртуальный кластер, NLB обеспечивает надежность и быстродействие веб-серверов и других критически\-критически важными серверами.  
  
Серверы в NLB-кластере называются *узлами*, и на каждом узле выполняется отдельная копия серверных приложений. Балансировка сетевой нагрузки позволяет распределять входящие клиентские запросы между узлами в кластере. При этом можно настроить нагрузку для каждого узла. Если нужно обработать дополнительную нагрузку, узлы можно добавлять к кластеру динамически. Кроме того, технология балансировки сетевой нагрузки может направлять весь трафик на один предназначенный для этого узел, называемый *узлом по умолчанию*.  
  
Балансировка сетевой нагрузки позволяет обращаться ко всем компьютерам в кластере по одному и тому же набору IP-адресов и поддерживает набор уникальных IP-адресов, выделенных для каждого узла. Для загрузки\-с балансировкой приложений, при сбое на узле или переходит в автономный режим, нагрузка автоматически перераспределяется между компьютерами, которые все еще работают. Когда компьютер будет готов к работе, он может снова присоединиться к кластеру в рабочем режиме и взять на себя часть нагрузки, что позволит снизить объем данных, приходящийся на другие компьютеры кластера.  
  
## <a name="practical-applications"></a>Практическое применение  
Применение NLB целесообразно для обеспечения без учета состояния приложений, таких как веб-серверов под управлением Internet Information Services \(IIS\), доступны с минимальным временем простоя и что они масштабируемой \(путем добавления дополнительных серверов в качестве увеличения нагрузки\). В следующих разделах описывается применение NLB для поддержки высокой доступности, масштабируемости и управляемости кластерных серверов, выполняющих указанные приложения.  
  
### <a name="high-availability"></a>Высокая доступность  
Система высокой доступности обеспечивает обслуживание на приемлемом уровне с минимальной потерей машинного времени. Для обеспечения высокой доступности, балансировки сетевой Нагрузки включает встроенные\-в функции, которые можно автоматически:  
  
-   Выявление в кластере самопроизвольно прекратившего работу или отключившегося от сети узла с последующим его восстановлением.  
  
-   Балансировка нагрузки сети при добавлении и удалении узлов.  
  
-   Восстановление и перераспределение рабочей нагрузки в течение 10 секунд.  
  
### <a name="scalability"></a>Масштабируемость  
Масштабируемость показывает, насколько можно расширить возможности компьютера, службы или приложения в соответствии с повышением требований к его производительности. Применительно к кластерам NLB масштабируемость — это возможность добавления одной или нескольких систем к существующему кластеру, когда общая нагрузка кластера превышает его текущую производительность. Поддержка масштабируемости реализуется в NLB следующим образом:  
  
-   Балансировка нагрузки запросов в кластере балансировки сетевой Нагрузки для отдельных TCP\/IP-адрес службы.  
  
-   Поддержка до 32 компьютеров в одном кластере.  
  
-   Балансировка нагрузки запросов к нескольким серверам \(от одного клиента или нескольких клиентов\) на нескольких узлах в кластере.  
  
-   Добавление узлов в NLB-кластер по мере увеличения нагрузки, не приводящее к сбоям в работе кластера.  
  
-   Вывод узлов из состава кластера по мере уменьшения нагрузки.  
  
-   Высокая производительность и уменьшение объема служебных данных за счет реализации полнофункционального конвейерного режима. Данный режим позволяет отправлять запросы NLB-кластеру, не ожидая ответа на предыдущий запрос.  
  
### <a name="manageability"></a>Управляемость  
Поддержка управляемости реализуется в NLB следующим образом:  
  
-   Управление и настройка несколькими кластерами NLB и узлами кластеров с одного компьютера с помощью диспетчера NLB или [командлеты балансировки сетевой нагрузки (NLB) в Windows PowerShell](https://technet.microsoft.com/library/hh801274.aspx).
  
-   Используя правила управления портами, можно задавать режим балансировки для отдельного IP-порта или группы портов.  
  
-   Для портов каждого веб-сайта могут определяться различные правила. Если вы используете тот же набор нагрузки\-Сбалансированный серверов для нескольких приложений или веб-сайтов, правила для портов основаны на виртуальный IP-адрес назначения \(с использованием виртуальных кластеров\).  

-   Направить все клиентские запросы на один узел с помощью дополнительных, один\-правила размещения. NLB будет направлять клиентские запросы на определенный узел, где выполняются заданные приложения.  

-   Имеется возможность блокировки доступа по сети к определенным IP-портам.  

-   Включить протокол IGMP \(IGMP\) поддержку на узлах кластера для управления портов коммутатора \(которой входящие сетевые пакеты отправляются на все порты коммутатора\) при работе в режим многоадресной рассылки.  

-   Запуск, остановка и управление действиями NLB могут производиться удаленно с использованием команд или сценариев Windows PowerShell.  

-   События NLB можно просматривать в журнале событий Windows. В журнал событий записываются все действия NLB и изменения кластера.  

## <a name="important-functionality"></a>Важные функции  
 
NLB устанавливается как стандартный компонент сетевой драйвер Windows Server. Его операции прозрачны для TCP\/IP-адрес сетевого стека. На рисунке показана связь между балансировки сетевой Нагрузки и другие компоненты программного обеспечения в типовой конфигурации.  
  
![Балансировка сетевой нагрузки и другие компоненты программного обеспечения](../media/NLB/nlb.jpg)  
  
Ниже перечислены основные компоненты балансировки сетевой нагрузки.  
  
- Не требует для запуска изменений аппаратной части.  
  
- Предоставляет средства балансировки сетевой нагрузки для управления несколькими кластерами и всеми узлами кластеров, а также их настройки с одного удаленного или локального компьютера.  
  
- Позволяет клиентам получать доступ к кластеру с помощью единой, логической имя в Интернете и виртуальный IP-адрес, который известен как IP-адрес кластера \(сохраняются отдельные имена для каждого компьютера\). Балансировка сетевой нагрузки поддерживает несколько виртуальных IP-адресов для многосетевых серверов.  
  
> [!NOTE]  
> При развертывании виртуальных машин в качестве виртуальных кластеров балансировки сетевой Нагрузки требует от серверов быть многосетевыми, чтобы использовать несколько виртуальных IP-адресов.  
  
- Средство балансировки сетевой нагрузки может быть привязано к нескольким сетевым адаптерам, что позволяет настроить несколько независимых кластеров на каждом узле. Поддержка нескольких сетевых адаптеров — это не то же самое, что виртуальные кластеры, в которых можно настраивать несколько кластеров на одном сетевом адаптере.  
  
- Не требует модификации серверных приложений, что обеспечивает их работу в любом кластере NLB.  
  
- Возможна настройка автоматического добавления узла в кластер при сбое в работе узла данного кластера с последующим возвращением с сеть. Добавленный узел может приступать к обработке новых клиентских обращений к серверу.  
  
-   Обеспечивает возможность отключения компьютеров от сети для проведения профилактического обслуживания, не затрагивая операции кластера на других узлах.  
  
## <a name="hardware-requirements"></a>Требования к оборудованию  
Ниже приведены требования к оборудованию для запуска кластера NLB.  
  
-   Все узлы кластера должны располагаться в одной подсети.  
  
-   Количество сетевых адаптеров на каждом узле не ограничено, при этом различные узлы могут иметь разное число адаптеров.  
  
-   Все сетевые адаптеры в одном кластере необходимо использовать либо в одноадресном, либо в многоадресном режиме. Балансировка сетевой нагрузки не поддерживает смешанную среду одноадресной и многоадресной рассылки внутри одного кластера.  
  
-   При использовании в режиме одноадресной рассылки, сетевой адаптер, который используется для обработки клиента\-для\-трафика кластера, должен поддерживать изменение его аппаратный \(MAC\) адрес.  
  
## <a name="software-requirements"></a>Требования к программному обеспечению  
Ниже приведены требования к программному обеспечению для запуска кластера NLB.  
  
-   Только TCP\/IP-адрес можно использовать для адаптера, для которого включается NLB на каждом узле. Не добавляйте никаких других протоколов \(например, IPX\) для этого адаптера.  
  
-   IP-адреса серверов в составе кластера должны быть статическими.  
  
> [!NOTE]  
> NLB не поддерживает Dynamic Host Configuration Protocol \(DHCP\). NLB отключает протокол DHCP на каждом настраиваемом интерфейсе.  
  
## <a name="installation-information"></a>Сведения об установке  
Балансировка сетевой Нагрузки можно установить с помощью диспетчера серверов или команды Windows PowerShell для балансировки сетевой Нагрузки.

Дополнительно можно установить средства балансировки сетевой нагрузки для управления локальным или удаленным кластером NLB. Эти средства включают диспетчер балансировки сетевой нагрузки и команды балансировки сетевой Нагрузки Windows PowerShell.

### <a name="installation-with-server-manager"></a>Установка с помощью диспетчера серверов

В диспетчере серверов можно использовать добавления ролей и компонентов мастер для добавления **балансировки сетевой нагрузки** функции. Когда вы завершите работу мастера, устанавливается балансировки сетевой Нагрузки, и необходимо перезагрузить компьютер.


### <a name="installation-with-windows-powershell"></a>Установка с помощью Windows PowerShell  

Установка балансировки сетевой Нагрузки с помощью Windows PowerShell, выполните команду ниже строке Windows PowerShell с повышенными привилегиями на компьютере, где вы хотите установить балансировки сетевой Нагрузки.

    
    Install-WindowsFeature NLB -IncludeManagementTools
    
После завершения установки перезагрузка компьютера не требуется.

Дополнительные сведения см. в разделе [Install-WindowsFeature](https://docs.microsoft.com/powershell/module/servermanager/install-windowsfeature?view=win10-ps).

### <a name="network-load-balancing-manager"></a>Диспетчер балансировки сетевой нагрузки
Чтобы открыть диспетчер балансировки сетевой нагрузки в диспетчере сервера, в меню **Сервис** выберите пункт **Диспетчер балансировки сетевой нагрузки**.
  
## <a name="additional-resources"></a>Дополнительные ресурсы  
Следующая таблица содержит ссылки на дополнительные сведения о компоненте NLB.  
  
|Тип содержимого|Ссылок|  
|----------------|--------------|  
|Развертывание|[Руководство по развертыванию балансировки сетевой нагрузки](https://technet.microsoft.com/library/cc754833(WS.10).aspx) &#124; [Настройка с помощью служб терминалов балансировки сетевой нагрузки](https://technet.microsoft.com/library/cc771300(v=WS.10).aspx)|  
|Операции|[Управление кластерами балансировки сетевой нагрузки](https://technet.microsoft.com/library/cc753954(WS.10).aspx) &#124; [Установка параметров балансировки сетевой нагрузки](https://technet.microsoft.com/library/cc731619(WS.10).aspx) &#124; [контроль узлов в кластерах балансировки сетевой нагрузки](https://technet.microsoft.com/library/cc770870(WS.10).aspx)|  
|Устранение неполадок|[Диагностика кластеров балансировки сетевой нагрузки](https://technet.microsoft.com/library/cc732592(WS.10).aspx) &#124; [ошибки и события кластера балансировки сетевой Нагрузки](https://technet.microsoft.com/library/cc731678(WS.10).aspx)|
|Средства и параметры|[Командлеты PowerShell Windows балансировки нагрузки сети](https://go.microsoft.com/fwlink/p/?LinkId=238123)|
|Ресурсы сообщества|[Высокий уровень доступности \(кластеризации\) форум](https://go.microsoft.com/fwlink/p/?LinkId=230641)
