---
title: Поддержка пктмон для Wireshark (пкапнг)
description: Используйте этот раздел для анализа журналов пкапнг, созданных монитором пакетов, с помощью Wireshark.
ms.topic: how-to
author: khdownie
ms.author: v-kedow
ms.date: 11/12/2020
ms.openlocfilehash: c65604f6e3f4e87b806513063800ee62d52d1feb
ms.sourcegitcommit: 8808f871c8cf131f819ef5540286218bd425da96
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/14/2020
ms.locfileid: "94632636"
---
# <a name="pktmon-support-for-wireshark-pcapng"></a>Поддержка пктмон для Wireshark (пкапнг)

>Область применения: Windows Server (половина ежегодного канала), Windows Server 2019, Windows 10, Azure Stack ХЦИ, центр Azure Stack, Azure

Монитор пакетов (Пктмон) может преобразовывать журналы в формат пкапнг. Эти журналы можно анализировать с помощью Wireshark (или любого пкапнг анализатора). Однако некоторые важные сведения могут отсутствовать в файлах пкапнг. В этом разделе описываются ожидаемые выходные данные и способы их использования.

## <a name="pktmon-pcapng-syntax"></a>Синтаксис пкапнг пктмон

Используйте следующие команды для преобразования записи пктмон в формат пкапнг.

```powershell
C:\Test> pktmon pcapng help
pktmon pcapng log.etl [-o log.pcapng]
    Convert log file to pcapng format.
    Dropped packets are not included by default.

-o, --out
    Name of the formatted pcapng file.

-d, --drop-only
    Convert dropped packets only.

-c, --component-id
    Filter packets by a specific component ID.

Example: pktmon pcapng C:\tmp\PktMon.etl -d -c nics
```

## <a name="output-filtering"></a>Фильтрация выходных данных

Все сведения о пакетных отчетах и потоке пакетов через сетевой стек будут потеряны в выходных данных пкапнг. Поэтому содержимое журнала должно быть тщательно предварительно отфильтровано для такого преобразования. Пример:

- Формат пкапнг не различает переходящий пакет и отброшенный пакет. Чтобы отделить все пакеты в записи от пропущенных пакетов, создайте два файла пкапнг. один из них содержит все пакеты (" **пктмон пкапнг log. ETL-out лог-каптуре. ETL** ") и другое, которое содержит только удаленные пакеты (" **пктмон пкапнг log. ETL--только удаление лог-дроп. ETL** "). Таким образом вы сможете анализировать пропущенные пакеты в отдельном журнале.
- Формат пкапнг не различает различные сетевые компоненты, в которых был захвачен пакет. Для таких многоуровневой сценариев укажите идентификатор нужного компонента в выходных данных пкапнг " **пктмон пкапнг log. ETL--Component-ID 5** ". Повторите эту команду для каждого набора интересующих вас идентификаторов компонентов.
