---
title: Расширение диагностики пути к данным SDN в Windows Admin Center
description: Используйте этот раздел для автоматизации записи пакетов на основе монитора пакетов с помощью расширения диагностики пути к данным SDN в центре администрирования Windows.
ms.topic: how-to
author: khdownie
ms.author: v-kedow
ms.date: 11/12/2020
ms.openlocfilehash: 54a65147847a28a9820589521f7c94ea1c4b08cd
ms.sourcegitcommit: b0c10eaffaa5de3eeff44c433580b41270c27d32
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/30/2020
ms.locfileid: "97826181"
---
# <a name="sdn-data-path-diagnostics-extension-in-windows-admin-center"></a>Расширение диагностики пути к данным SDN в Windows Admin Center

>Область применения: Windows Server (половина ежегодного канала), Windows Server 2019, Windows 10, Azure Stack ХЦИ, центр Azure Stack, Azure

Диагностика пути к данным SDN — это средство в расширении системы мониторинга SDN, которое автоматизирует запись пакетов на основе монитора пакетов в соответствии с различными сценариями SDN и представляет выходные данные в едином представлении, которое легко отслеживать и манипулировать ими.

## <a name="what-is-packet-monitor-pktmon"></a>Что такое монитор пакетов (Пктмон)?
Монитор пакетов (Пктмон) — это встроенное средство диагностики сети для Windows. Он может использоваться для записи пакетов, обнаружения пакетов, фильтрации пакетов и подсчета. Этот инструмент особенно полезен в сценариях виртуализации, например в сетях контейнеров и SDN, так как он обеспечивает видимость сетевого стека.

## <a name="what-is-windows-admin-center"></a>Что такое Windows Admin Center?
Центр администрирования Windows — это локально развернутое средство управления на основе браузера, которое позволяет управлять серверами Windows без зависимости Azure или облака. Windows Admin Center предоставляет полный контроль над всеми аспектами серверной инфраструктуры и особенно полезен для управления серверами в частных сетях, которые не подключены к Интернету. Windows Admin Center — это продукт эволюции встроенных средств управления, таких как Диспетчер серверов и MMC.

## <a name="before-you-start"></a>Перед началом работы
- Для использования этого средства целевой сервер должен работать под управлением Windows Server 2019 версии 1903 (19H1) и более поздних версий.
- [Установите центр администрирования Windows](/windows-server/manage/windows-admin-center/deploy/install).
- Добавление кластера в центр администрирования Windows.
  1. Щелкните **+ Добавить** в разделе **Все подключения**.
  2. Выберите Добавление подключения к кластеру Hyper-Converged.
  3. Введите имя кластера и при появлении запроса укажите учетные данные для использования.
  4. Установите флажок **настроить сетевой контроллер** для продолжения.
  5. Введите URI сетевого контроллера и нажмите кнопку **проверить**.
  6. Нажмите кнопку **Добавить** , чтобы завершить работу.

Кластер будет добавлен в список соединений. Щелкните его, чтобы запустить панель мониторинга.

<center>

:::image type="content" source="media/add-sdn-enabled-hci-connection.png" alt-text="Добавление подключения ХЦИ с поддержкой SDN с центром администрирования Windows" border="true" lightbox="media/add-sdn-enabled-hci-connection.png":::

</center>

## <a name="getting-started"></a>Начало работы

Чтобы перейти к средству, перейдите к кластеру, созданному на предыдущем шаге, а затем к расширению "Мониторинг SDN", а затем на вкладку "Диагностика пути к данным".

## <a name="selecting-scenarios"></a>Выбор сценариев

На первой странице перечислены все сценарии SDN, классифицированные как сценарии рабочей нагрузки и сценарии инфраструктуры, как показано на рисунке ниже. Для начала выберите сценарий SDN, который необходимо диагностировать.

<center>

:::image type="content" source="media/sdn-data-path-diagnostics-main-page.png" alt-text="Мониторинг SDN — страница &quot;сценарии диагностики&quot;" border="true" lightbox="media/sdn-data-path-diagnostics-main-page.png":::

</center>

## <a name="scenario-parameters"></a>Параметры сценария

После выбора сценария заполните список обязательных и необязательных параметров, чтобы начать запись. Эти основные параметры указывают средству на подключение, которое необходимо диагностировать. Затем средство будет использовать эти параметры для запросов на выполнение успешного захвата без вмешательства пользователя, чтобы выяснить ожидаемый поток пакетов, компьютеры, участвующие в сценарии, их расположение в кластере или фильтры записи, применяемые на каждом компьютере. Обязательные параметры позволяют выполнять захват, а необязательные параметры помогают отфильтровывать некоторые помехи.

<center>

:::image type="content" source="media/sdn-data-path-diagnostics-scenario-parameters.png" alt-text="Мониторинг SDN — страница &quot;условия захвата&quot;" border="true" lightbox="media/sdn-data-path-diagnostics-scenario-parameters.png":::

</center>

## <a name="capture-log"></a>Журнал захвата

После запуска записи расширение отобразит список компьютеров, на которых начинается запись. Если учетные данные не были сохранены, может появиться запрос на вход на эти компьютеры. Вы можете запустить воссоздание проверки связи или проблемы, которую вы пытаетесь диагностировать, записывая относительные пакеты. После записи пакетов расширение покажет метки рядом с компьютерами, на которых были записаны пакеты.

<center>

:::image type="content" source="media/sdn-data-path-diagnostics-loading-wheel2.png" alt-text="Запуск записи пакетов" border="true" lightbox="media/sdn-data-path-diagnostics-loading-wheel2.png":::

</center>

После остановки записи журналы всех компьютеров будут показаны на одной странице, разделенной на название компьютера. Каждый заголовок будет включать имя компьютера, его роль в сценарии и его узел в случае виртуальных машин.

<center>

:::image type="content" source="media/sdn-data-path-diagnostics-log.png" alt-text="Журнал диагностики пути к данным после остановки записи" border="true" lightbox="media/sdn-data-path-diagnostics-log.png":::

</center>

Результаты отображаются в таблице, в которой показаны основные параметры записанных пакетов: метка времени, IP-адрес источника, исходный порт, конечный IP-адрес, порт назначения, Есертипе, протокол, флаги TCP, удален ли пакет и причина удаления.

   - Отметка времени для каждого из этих пакетов также является гиперссылкой, которая перенаправит вас на другую страницу, где можно найти дополнительные сведения о выбранном пакете. См. раздел со страницей сведений ниже.
   - Все пропущенные пакеты имеют значение "true" на вкладке " **удалено** ", причину удаления и отображаются красным текстом, что упрощает определение.
   - Все вкладки можно сортировать по возрастанию и убыванию.
   - Можно выполнить поиск значения в любом столбце журнала с помощью панели поиска.
   - Вы можете перезапустить запись с теми же выбранными фильтрами с помощью кнопки **перезапустить** .

## <a name="details-page"></a>Страница сведений

Информация на этой странице особенно важна при возникновении проблем с распространением пакетов или неправильной конфигурации, поскольку можно исследовать поток пакета с помощью каждого компонента сетевого стека. Для каждого прыжка пакетов существуют подробные сведения, содержащие параметры пакета, а также сведения о необработанных пакетах.

- Прыжки группируются в зависимости от используемых компонентов. Каждый адаптер и драйверы поверх него группируются по имени адаптера. Это упрощает отправку пакетов на высоком уровне через эти заголовки групп.
- Все пропущенные пакеты будут отображаться красным текстом, чтобы упростить их определение.

<center>

:::image type="content" source="media/sdn-data-path-diagnostics-details-page.png" alt-text="Страница сведений о диагностике пути к данным" border="true" lightbox="media/sdn-data-path-diagnostics-details-page.png":::

</center>

Выберите прыжок для просмотра дополнительных сведений. В сценариях инкапсуляции и преобразования сетевых адресов (NAT) Эта функция позволяет просматривать пакет, изменяя его по мере прохождения через сетевой стек, и проверять наличие проблем с конфигурацией.

<center>

:::image type="content" source="media/sdn-data-path-diagnostics-details-page-with-pane1.png" alt-text="Просмотр сведений о конкретном прыжке" border="true" lightbox="media/sdn-data-path-diagnostics-details-page-with-pane1.png":::

</center>

Прокрутите вниз, чтобы просмотреть необработанные сведения о пакете:

<center>

:::image type="content" source="media/sdn-data-path-diagnostics-details-page-with-pane-raw-packet1.png" alt-text="Просмотр необработанных сведений о пакете для определенного прыжка" border="true" lightbox="media/sdn-data-path-diagnostics-details-page-with-pane-raw-packet1.png":::

</center>

## <a name="display-filters"></a>Фильтры экрана

Фильтры просмотра позволяют фильтровать журнал после записи пакетов. Для каждого фильтра можно указать такие параметры, как MAC-адреса, IP-адреса, порты, Есертипе и транспортный протокол.

   - Фильтры экрана могут различать источник и назначение IP-адресов, адресов MAC и портов.
   - Фильтры отображения можно удалить и изменить после применения, чтобы изменить представление журнала.
   - Фильтры фильтра отображаются в сохраненных журналах.

<center>

:::image type="content" source="media/sdn-data-path-diagnostics-display-filters.png" alt-text="Фильтрация журналов с помощью фильтров экрана" border="true" lightbox="media/sdn-data-path-diagnostics-display-filters.png":::

</center>

## <a name="save"></a>Сохранить

Кнопка Сохранить позволяет сохранить журнал на локальном компьютере для дальнейшего анализа с помощью других средств. Фильтры экрана будут отменены в сохраненном журнале. Журналы можно сохранять в различных форматах:

   - Формат ETL, который можно проанализировать с помощью Microsoft Network Monitor. Примечание. Дополнительные сведения см. на [этой странице](pktmon-netmon-support.md) .
   - Формат текста, который можно проанализировать с помощью любого текстового редактора, например TextAnalysisTool.NET.
   - Пкапнг фомат, который можно проанализировать с помощью таких средств, как Wireshark.
      - Большая часть метаданных монитора пакетов будет потеряна во время этого преобразования. Примечание. Дополнительные сведения см. на [этой странице](pktmon-pcapng-support.md) .

<center>

:::image type="content" source="media/sdn-data-path-diagnostics-save.png" alt-text="сохранение журналов в локальной среде" border="true" lightbox="media/sdn-data-path-diagnostics-save.png":::

</center>
