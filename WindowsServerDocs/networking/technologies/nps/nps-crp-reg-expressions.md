---
title: Использование регулярных выражений в NPS
description: В этом разделе описывается использование регулярных выражений для сопоставления шаблонов в сервере политики сети в Windows Server 2016. Этот синтаксис можно использовать для указания условий атрибутов политики сети и сфер RADIUS.
manager: brianlic
ms.prod: windows-server-threshold
ms.technology: networking
ms.topic: article
ms.assetid: bc22d29c-678c-462d-88b3-1c737dceca75
ms.author: pashort
author: shortpatti
ms.openlocfilehash: f84173f1f51be9fd44995dc41f759bbea4fb3539
ms.sourcegitcommit: 19d9da87d87c9eefbca7a3443d2b1df486b0b010
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2018
---
# <a name="use-regular-expressions-in-nps"></a>Использование регулярных выражений в NPS

>Область применения: Windows Server (канал точками годовой), Windows Server 2016

В этом разделе описывается использование регулярных выражений для сопоставления шаблонов в сервере политики сети в Windows Server 2016. Этот синтаксис можно использовать для указания условий атрибутов политики сети и сфер RADIUS.

## <a name="pattern-matching-reference"></a>Справочник для сопоставления шаблонов

В таблице ниже можно использовать как источник ссылки при создании регулярных выражений с помощью синтаксис соответствия шаблону.

|Символ|Описание|Пример|
|---------|-----------|-------|
|`\`  |Помечает следующий символ как символ соответствия. |`/n/ matches the character "n". The sequence /\n/ matches a line feed or newline character.`  |
|`^`  |Совпадает с началом ввода или строки. | &nbsp; |
|`$`  |Соответствует концу ввода или строки. | &nbsp; |
|`*`  |Соответствует предыдущему символу ноль или более раз. |`/zo*/ matches either "z" or "zoo."` |
|`+`  |Соответствует предыдущему символу один или несколько раз. |`/zo+/ matches "zoo" but not "z."` |
|`?`  |Соответствует предыдущей символу ноль или один раз. |`/a?ve?/ matches the "ve" in "never."` |
|`.`  |Соответствует любого отдельного символа, за исключением знак новой строки.  | &nbsp; |
|`( pattern )`  |Соответствует «шаблон» и сохраняет совпадение.   |`To match ( ) (parentheses), use "\(" or "\)".`  |
|"x | Y "  |Соответствует x и y.  |"/ z|еда? / соответствует «zoo» или «еда». ` |
|`{ n } `  |Соответствует ровно n раз \ (n является integer\ отличных отрицательных).  |`/o{2}/ does not match the "o" in "Bob," but matches the first two instances of the letter o in "foooood."`  |
|`{ n ,}`  |По крайней мере n раз \ (n является integer\ отличных отрицательных).  |`/o{2,}/ does not match the "o" in "Bob" but matches all of the instances of the letter o in "foooood." /o{1,}/ is equivalent to /o+/.`  |
|`{ n , m }`  |По крайней мере n и в большинстве случаев раз m \ (m и n — отличное отрицательных integers\).  |`/o{1,3}/ matches the first three instances of the letter o in "fooooood."`  |
|`[ xyz ]`  |Совпадает с любым из указанных символов \(a character set\).  |`/[abc]/ matches the "a" in "plain."`  |
|`[^ xyz ]`  |Все символы, не соответствует \ (set\ знак).  |`/[^abc]/ matches the "p" in "plain."`  |
|`\b`  |Соответствует границе слова \ (например, space\).  |`/ea*r\b/ matches the "er" in "never early."`  |
|`\B`  |Соответствует отличной от границы.  |`/ea*r\B/ matches the "ear" in "never early."`  |
|`\d`  |Соответствует цифре \ (эквивалентно цифры от 0 до 9\).  | &nbsp; |
|`\D`  |Соответствует символу, не являющемуся \ (эквивалентно `[^0-9]`\).  | &nbsp; |
|`\f`  |Совпадения перевода символов.  | &nbsp; |
|`\n`  |Совпадения знак перевода строки.  | &nbsp; |
|`\r`  |Соответствует символ возврата каретки.  | &nbsp; |
|`\s`  |Соответствует любому символу включая пространства, вкладки и перевод \ (эквивалентно `[ \f\n\r\t\v]`\).  | &nbsp; |
|`\S`  |Любому символу пустого пространства \ (эквивалентно `[^ \f\n\r\t\v]`\).  | &nbsp; |
|`\t`  |Соответствует знак табуляции.  | &nbsp; |
|`\v`  |Соответствует символу вертикальной табуляции.  | &nbsp; |
|`\w`  |Соответствует любому символу, включая знак подчеркивания \ (эквивалентно `[A-Za-z0-9_]`\).  | &nbsp; |
|`\W`  |Любому символу работающими слова, за исключением подчеркивания \ (эквивалентно `[^A-Za-z0-9_]`\).  | &nbsp; |
|`\ num`  |Указывает на сохраненные совпадения \ (`?num`, где num — положительное integer\).  Этот параметр можно использовать только в **заменить** текстовое поле при настройке атрибутами.| `\1` заменяет, что хранится в первое сохраненное совпадение.  |
|`/ n / `  |Позволяет вставлять ASCII-коды в регулярные выражения \ (`?n`, где n — value\ escape восьмеричной, шестнадцатеричный или десятичный).  | &nbsp; |

## <a name="examples-for-network-policy-attributes"></a>Примеры атрибутов политики сети

Ниже описывается использование синтаксиса сопоставления шаблонов, чтобы указать атрибуты политики сети:

- Чтобы указать все номера 899 код города, используется следующий синтаксис:

     `899.*`

- Чтобы указать диапазон IP-адресов, которые начинаются с 192.168.1, используется следующий синтаксис:

    `192\.168\.1\..+`

## <a name="examples-for-manipulation-of-the-realm-name-in-the-user-name-attribute"></a>Примеры для взаимодействия с неким имя области в атрибуте имя пользователя

В следующих примерах описывается использование синтаксиса сопоставления шаблонов для управления имена сфер атрибуту имя пользователя, который находится в **атрибута** в окне свойств политики запросов на подключение.

**Чтобы удалить сферу атрибута имени пользователя**

В сценарии внешний удаленного доступа, в котором Internet службы поставщика \(ISP\) маршруты запросы на подключение с сервером политики сети организации прокси-сервера RADIUS поставщика услуг Интернета может потребоваться имя сферы, чтобы отправить запрос на проверку подлинности. Тем не менее сервер политики сети не может распознать имя сферы, являющееся частью имени пользователя. Таким образом имя области необходимо удалить с прокси-сервера RADIUS поставщика услуг Интернета, пока будут отправлены на сервер политики сети организации.

- Найти:@microsoft\.com

- Замените:

**Чтобы заменить *user@example.microsoft.com*с *example.microsoft.com\user***

- Найти:`(.*)@(.*)`

- Замените:`$2\$1`



**Чтобы заменить *домен\пользователь* с *specific_domain\user***

- Найти:`(.*)\\(.*)`

- Замена: *определенный_домен*`\$2`



**Чтобы заменить *пользователя* с*user@specific_domain***

- Найти:`$`

- Замена: @*определенный_домен*

## <a name="example-for-radius-message-forwarding-by-a-proxy-server"></a>Пример для переадресации сообщений RADIUS, прокси-сервера

Можно создать правила маршрутизации для пересылки сообщений RADIUS с именем указанной областью, чтобы набор серверов RADIUS, при использовании сервера политики сети в качестве RADIUS-прокси. Ниже приведен рекомендуемый синтаксис для маршрутизации запросов на основе имени области.

- **NetBIOS-имя **: `WCOAST`
- **Шаблон **:      `^wcoast\\`

В следующем примере wcoast.microsoft.com — это суффикс имени участника (UPN) уникальных пользователей для домена Active Directory или DNS wcoast.microsoft.com. С помощью заданному шаблону, прокси-сервера политики сети может осуществлять маршрутизацию сообщений на основании NetBIOS-имя домена или суффикс UPN.

- **NetBIOS-имя **: `WCOAST`
- **Суффикс UPN **:   `wcoast.microsoft.com`
- **Шаблон **:      `^wcoast\\|@wcoast\.microsoft\.com$`


Дополнительные сведения об управлении NPS см. в разделе [управление сервером политики сети](nps-manage-top.md).

Дополнительные сведения о сервере политики сети см. в разделе [сервера политики сети (NPS)](nps-top.md).
