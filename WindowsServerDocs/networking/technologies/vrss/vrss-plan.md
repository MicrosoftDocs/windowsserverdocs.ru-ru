---
title: Планируйте использование vRSS
description: В этом разделе можно использовать для подготовки к вашей виртуальной машиной и узлом Hyper-V с помощью vRSS в Windows Server 2016.
ms.prod: windows-server-threshold
ms.technology: networking
ms.topic: article
ms.assetid: 695e6192-5e84-4ab4-b33e-8ebf6b8f5cbb
ms.localizationpriority: medium
manager: dougkim
ms.author: pashort
author: shortpatti
ms.date: 09/04/2018
ms.openlocfilehash: e6558b00e87721d8ab81c84946a14745c4faa812
ms.sourcegitcommit: 0d0b32c8986ba7db9536e0b8648d4ddf9b03e452
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/17/2019
ms.locfileid: "59850445"
---
# <a name="plan-the-use-of-vrss"></a>Планируйте использование vRSS

>Относится к: Windows Server (полугодовой канал), Windows Server 2016

В Windows Server 2016 vRSS включается по умолчанию, однако необходимо подготовить среду к разрешить vRSS для правильной работы на виртуальной машине \(виртуальной Машины\) или на виртуальный адаптер \(виртуального сетевого адаптера\). В Windows Server 2012 R2 vRSS был отключен по умолчанию.

Планирование и подготовка использование vRSS, убедитесь, что:

- Физический сетевой адаптер совместима с очередью виртуальной машины \(VMQ\) и скорость 10 Гбит/с и многое другое.
- VMQ включена на физический сетевой Адаптер, а также на Hyper\-порта V виртуального коммутатора
- Входных данных нет единого корневого\-виртуализации \(SR\-IOV\) настроены для виртуальной Машины.
- Объединение Сетевых карт настроен правильно.
- Виртуальная машина имеет несколько логических процессоров \(LPs\).

>[!NOTE]
>vRSS также включается по умолчанию для любого узла виртуальных сетевых адаптеров с поддержкой RSS.

Ниже приведены дополнительные сведения, необходимые для выполнения этих действий подготовки.
  
1. **Адаптер пропускная способность сети**. Убедитесь, что сетевой адаптер совместима с очередью виртуальной машины \(VMQ\) и скорость 10 Гбит/с и многое другое. Если скорость будет меньше, чем 10 Гбит/с, Hyper\-виртуальный коммутатор V отключает VMQ по умолчанию, несмотря на то, что он по-прежнему показывает VMQ, как включенная в результаты выполнения команды Windows PowerShell **Get-NetAdapterVmq**. Одним из методов, которые можно использовать, чтобы убедиться, что VMQ включена или отключена является команда **Get-NetAdapterVmqQueue**.  Если VMQ отключена, результаты выполнения этой команды показано, что нет QueueID, присвоенный виртуального сетевого адаптера виртуальной Машины или узла. 
  
2. **Включить очередь виртуальных МАШИН**. Убедитесь, что VMQ включена на хост-компьютере. vRSS не работает, если узел не поддерживает VMQ. Убедитесь, что VMQ включена, выполнив **Get-VMSwitch** и Найдя адаптер, использующего виртуальный коммутатор. После этого запустите **Get-NetAdapterVmq** и убедитесь, что адаптер отображается в результатах и VMQ на нем включена.
  
3. **Отсутствие SR\-IOV**. Убедитесь, что один корневой вход\-виртуализации \(SR\-IOV\) виртуальная функция \(VF\) драйвер не подключен к сетевому интерфейсу виртуальной Машины. Это можно проверить с помощью **Get-NetAdapterSriov** команды. Если драйвер Виртуальной функции загружен, RSS использует параметры масштабирования этого драйвера вместо настроенных vRSS. Если VF драйвер не поддерживает RSS, vRSS будет отключено.
  
4. **Поддержка групп Сетевых карт конфигурации**. Если вы используете, объединение Сетевых карт, очень важно правильно настроить VMQ для работы с параметрами объединение Сетевых карт. Подробные сведения о развертывании, объединение Сетевых карт и управлении см. в разделе [объединение Сетевых карт](https://docs.microsoft.com/windows-server/networking/technologies/nic-teaming/nic-teaming).

5. **Число LPs**. Убедитесь, что виртуальная машина имеет более одного логического процессора \(LP\). vRSS использует RSS на виртуальной Машине или на узле Hyper-V для балансировки нагрузки полученных трафика к нескольким LPs для параллельной обработки. Вы можете наблюдать за сколько LPs на вашей Виртуальной машине с помощью команды Windows PowerShell **Get-VMProcessor** на узле. После выполнения команды можно наблюдать за элемент столбца счетчик для числа LPs.

Виртуальный сетевой адаптер узла всегда имеет доступ ко всем физических процессоров; Чтобы настроить виртуальный сетевой адаптер узла, чтобы использовать определенное количество процессоров, используйте параметры **- BaseProcessorNumber** и **- MaxProcessors** при запуске **Set-NetAdapterRss** Команда Windows PowerShell.

---