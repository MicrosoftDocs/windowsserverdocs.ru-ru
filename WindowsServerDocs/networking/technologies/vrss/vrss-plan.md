---
title: Планирование использования vRSS
description: С помощью этого раздела можно подготовить виртуальную машину и узел Hyper-V для использования vRSS в Windows Server 2016.
ms.topic: article
ms.assetid: 695e6192-5e84-4ab4-b33e-8ebf6b8f5cbb
ms.localizationpriority: medium
manager: dougkim
ms.author: lizross
author: eross-msft
ms.date: 09/04/2018
ms.openlocfilehash: ccfaa9fa02dd7324f1682592867b027cad4006a8
ms.sourcegitcommit: 68444968565667f86ee0586ed4c43da4ab24aaed
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/07/2020
ms.locfileid: "87993556"
---
# <a name="plan-the-use-of-vrss"></a>Планирование использования vRSS

>Применяется к: Windows Server (Semi-Annual Channel), Windows Server 2016

В Windows Server 2016 функция vRSS включена по умолчанию, однако необходимо подготовить среду, чтобы обеспечить правильную работу vRSS на виртуальной машине виртуальной машины \( \) или на виртуальном адаптере узла \( vNIC \) . В Windows Server 2012 R2 vRSS был отключен по умолчанию.

При планировании и подготовке использования vRSS убедитесь, что:

- Физический сетевой адаптер совместим с очередь виртуальной машины \( VMQ \) и имеет скорость связи 10 Гбит/с или более.
- VMQ включается на физическом сетевом адаптере и на \- порте виртуального коммутатора Hyper-V.
- \- \( \- \) Для виртуальной машины не настроена виртуальная машина виртуализации входных данных с одним корневым элементом.
- Объединение сетевых карт настроено правильно.
- Виртуальная машина имеет несколько логических процессоров \( LPS \) .

>[!NOTE]
>vRSS также включается по умолчанию для всех узлов vNIC, на которых включен RSS.

Ниже приведены дополнительные сведения, необходимые для выполнения этих подготовительных действий.

1. **Емкость сетевого адаптера**. Убедитесь, что сетевой адаптер совместим с очередь виртуальной машины \( VMQ \) и имеет скорость связи 10 Гбит/с или более. Если скорость связи меньше 10 Гбит/с, \- виртуальный коммутатор Hyper-V по умолчанию отключает VMQ, даже несмотря на то, что в результатах выполнения команды Windows PowerShell **Get-Нетадаптервмк**используется виртуальная служба VMQ. Один из способов, который можно использовать для проверки того, что VMQ включен или отключен, заключается в использовании команды **Get-нетадаптервмккуеуе**.  Если функция VMQ отключена, результаты этой команды показывают отсутствие Куеуеид, назначенных виртуальному сетевому адаптеру виртуальной машины или узла.

2. **Включите VMQ**. Убедитесь, что VMQ включена на хост-компьютере. vRSS не работает, если узел не поддерживает VMQ. Чтобы проверить, включен ли VMQ, запустите **Get-VMSwitch** и найдите адаптер, используемый виртуальным коммутатором. После этого запустите **Get-NetAdapterVmq** и убедитесь, что адаптер отображается в результатах и VMQ на нем включена.

3. **Отсутствие SR \- IOV**. Убедитесь в том, что один корневой \- виртуальный компонент виртуальной функции SR IOV для виртуализации выходных данных \( \- \) \( \) не подключен к сетевому интерфейсу виртуальной машины. Это можно проверить с помощью команды **Get-нетадаптерсриов** . Если загружен драйвер VF, RSS использует параметры масштабирования из этого драйвера, а не настройки vRSS. Если драйвер VF не поддерживает RSS, то функция vRSS отключена.

4. **Настройка объединения сетевых карт**. Если вы используете объединение сетевых карт, важно правильно настроить VMQ для работы с параметрами объединения сетевых карт. Подробные сведения о развертывании и управлении с объединением сетевых карт см. в разделе [Объединение сетевых](../nic-teaming/nic-teaming.md)карт.

5. **Число LPS**. Убедитесь, что виртуальная машина имеет более одного логического процессора \( LP \) . для параллельной обработки vRSS использует RSS в виртуальной машине или на узле Hyper-V для балансировки нагрузки трафика, полученного в несколько LPs. Вы можете узнать, сколько LPs виртуальной машины, выполнив команду Windows PowerShell **Get-вмпроцессор** на узле. После выполнения команды можно просмотреть запись в столбце Count для числа LPs.

Узел vNIC всегда имеет доступ ко всем физическим процессорам. Чтобы настроить vNIC узла для использования определенного числа процессоров, используйте параметры **-басепроцессорнумбер** и **-макспроцессорс** при выполнении команды **Set-нетадаптеррсс** Windows PowerShell.

---