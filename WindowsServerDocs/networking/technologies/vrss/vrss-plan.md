---
title: Планирование использования vRSS
description: В этом разделе можно использовать для подготовки виртуальной машины и узел Hyper-V с помощью vRSS в Windows Server 2016.
ms.prod: windows-server-threshold
ms.technology: networking
ms.topic: article
ms.assetid: 695e6192-5e84-4ab4-b33e-8ebf6b8f5cbb
ms.localizationpriority: medium
manager: dougkim
ms.author: pashort
author: shortpatti
ms.date: 09/04/2018
ms.openlocfilehash: e6558b00e87721d8ab81c84946a14745c4faa812
ms.sourcegitcommit: e84e328c13a701e8039b16a4824a6e58a6e59b0b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/22/2018
ms.locfileid: "4133390"
---
# Планирование использования vRSS

>Область применения: Windows Server (Semi-Annual Channel), Windows Server 2016

В Windows Server 2016 vRSS включена по умолчанию, однако необходимо подготовить среду, чтобы разрешить vRSS для правильной работы на виртуальной машине \(VM\) или на \(vNIC\) виртуальный адаптер узла. В Windows Server 2012 R2 vRSS было отключено по умолчанию.

При планировании и подготовке использование vRSS, убедитесь, что:

- К физическому сетевому адаптеру совместим с \(VMQ\) очереди виртуальной машины и скорость каналов 10 Гбит/с или больше.
- VMQ включена на физический сетевой Адаптер и порт виртуального коммутатора Hyper-V
- Нет без вывода один корневой Input\ виртуализации \(SR\-IOV\) настроен для виртуальной Машины.
- Объединение Сетевых карт настроена правильно.
- Виртуальная машина имеет несколько \(LPs\) логических процессоров.

>[!NOTE]
>vRSS также включается по умолчанию для любые виртуальные сетевые карты узла, которой RSS включена.

Ниже приведены дополнительные сведения, необходимые для выполнения этих действий подготовки.
  
1. **Сетевой адаптер емкости**. Убедитесь, что сетевой адаптер совместим с \(VMQ\) очереди виртуальной машины и имеет скорости связи менее 10 Гбит/с. Если скорости связи менее 10 Гбит/с, виртуального коммутатора Hyper-V отключает VMQ по умолчанию, несмотря на то, что он по-прежнему показывает VMQ как включенное в результаты выполнения команды Windows PowerShell **Get-NetAdapterVmq**. Один метод, который можно использовать, чтобы убедиться, что VMQ включен или выключен — использовать команду **Get-NetAdapterVmqQueue**.  При отключении VMQ результаты этой команды показывают, что существует не QueueID, назначенные виртуальный сетевой адаптер виртуальной Машины или узла. 
  
2. **Включение VMQ**. Убедитесь, что VMQ включена на хост-компьютере. Если узел не поддерживает VMQ vRSS не работает. Вы можете проверить, что VMQ включена, запустив **Get-VMSwitch** и поиск адаптер, который использует виртуального коммутатора. Затем запустите **Get-NetAdapterVmq** и убедитесь, что адаптер отображается в результатах и включил VMQ.
  
3. **Отсутствие SR\-IOV**. Убедитесь, что \(SR\-IOV\) виртуализации один корневой Input\ потокового вывода драйвер \(VF\) виртуальная функция не подключена к сетевому интерфейсу виртуальной Машины. Это можно проверить с помощью команды **Get-NetAdapterSriov** . Если драйвер VF загружается, RSS использует масштабирования параметры из этого драйвера вместо их настроить, vRSS. Если VF драйвер не поддерживает RSS, vRSS отключена.
  
4. **Сетевых коммутаторов конфигурации**. Если вы используете объединение Сетевых карт, очень важно правильно настроить VMQ для работы с параметрами объединение Сетевых карт. Подробные сведения о объединение Сетевых карт развертывание и управление ими см. в разделе [Объединение Сетевых карт](https://docs.microsoft.com/windows-server/networking/technologies/nic-teaming/nic-teaming).

5. **Количество логические процессоры**. Убедитесь, что виртуальная машина имеет несколько логических процессоров \(LP\). vRSS основано на RSS в виртуальной Машине или на узле Hyper-V для загрузки трафика баланс полученных несколько логическим процессорам параллельной обработки. Можно отслеживать количество логические процессоры, имеет виртуальные Машины с помощью команды Windows PowerShell **Get-VMProcessor** в узле. После того как вы выполните команду вы заметили входа столбца количество кредитом за логические процессоры.

Сетевой адаптер узла всегда имеет доступ ко всем физические процессоры; Чтобы настроить виртуальную сетевую карту узла для использования определенное число процессоров, используйте параметры **- BaseProcessorNumber** и **-MaxProcessors** при выполнении команды Windows PowerShell **Set-NetAdapterRss** .

---