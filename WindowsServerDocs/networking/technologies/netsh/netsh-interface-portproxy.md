---
title: Команды Netsh для интерфейса portproxy
description: Используйте команды netsh interface portproxy, чтобы действовать как прокси-серверы между сетями и приложениями IPv4 и IPv6.
ms.prod: windows-server
ms.technology: networking
ms.topic: article
ms.assetid: ''
manager: dougkim
ms.author: pashort
author: shortpatti
ms.date: 08/30/2018
ms.openlocfilehash: 6244213ea689f07230ce53288e52959972112037
ms.sourcegitcommit: 6aff3d88ff22ea141a6ea6572a5ad8dd6321f199
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/27/2019
ms.locfileid: "71405504"
---
# <a name="netsh-interface-portproxy-commands"></a>Команды порта прокси-сервера интерфейса Netsh

Используйте команды **netsh interface portproxy** , чтобы действовать как прокси-серверы между сетями и приложениями IPv4 и IPv6. Эти команды можно использовать для установки прокси-службы следующими способами.

-   Компьютеры и приложения, настроенные по протоколу IPv4, отправлены другим компьютерам и приложениям, настроенным с IPv4.

-   Сообщения компьютера и приложения, настроенные по протоколу IPv4, отправленные на компьютеры и приложения, настроенные для IPv6.

-   Настроенные IPv6-адреса компьютеров и приложений отправляются на компьютеры и приложения, настроенные по протоколу IPv4.

-   Настроенные IPv6-адреса компьютеров и приложений, отправленные другим компьютерам и приложениям, настроенным IPv6.

При записи пакетных файлов или скриптов с помощью этих команд каждая команда должна начинаться с **portproxy с интерфейсом Netsh**. Например, при использовании команды **delete v4tov6** , чтобы указать, что portproxy-сервер удаляет порт IPv4 и адрес из списка IPv4-адресов, прослушиваемых сервером, пакетный файл или скрипт должен использовать следующий синтаксис:

```PowerShell
netsh interface portproxy delete v4tov6listenport= {Integer | ServiceName} [[listenaddress=] {IPv4Address| HostName}] [[protocol=]tcp]
```

Доступные команды portproxy интерфейса Netsh:

-   [Добавить v4tov4](#add-v4tov4)

-   [Добавить v4tov6](#add-v4tov6)

-   [Добавить v6tov4](#add-v6tov4)

-   [Добавить v6tov6](#add-v6tov6)

-   [удалить v4tov4](#delete-v4tov4)

-   [удалить v4tov6](#delete-v4tov6)

-   [удалить v6tov6](#delete-v6tov6)

-   [перезапуск](#reset)

-   [задать v4tov4](#set-v4tov4)

-   [задать v4tov6](#set-v4tov6)

-   [setv6tov4](#set-v6tov4)

-   [задать v6tov6](#set-v6tov6)

-   [отобразить все](#show-all)

-   [показывать v4tov4](#show-v4tov4)

-   [показывать v4tov6](#show-v4tov6)

-   [показывать v6tov4](#show-v6tov4)

-   [показывать v6tov6](#show-v6tov6)


## <a name="add-v4tov4"></a>Добавить v4tov4

Portproxy-сервер прослушивает сообщения, отправленные на указанный порт и IPv4-адрес, и сопоставляет порт и адрес IPv4 для отправки сообщений, полученных после установления отдельного TCP-соединения.

### <a name="syntax"></a>Синтаксис

```PowerShell
add v4tov4 listenport= {Integer | ServiceName} [[connectaddress=] {IPv4Address | HostName}] [[connectport=] {Integer | ServiceName}] [[listenaddress=] {IPv4Address | HostName}] [[protocol=]tcp]
```

### <a name="parameters"></a>Параметры


|                    |                                                                                                                                                                                                   |
|--------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|   **ListenPort**   |                                                           Указывает порт IPv4 по номеру порта или имени службы, который следует прослушивать.                                                            |
| **коннектаддресс** | Указывает IPv4-адрес, к которому необходимо подключиться. Допустимые значения: IP-адрес, имя NetBIOS компьютера или DNS-имя компьютера. Если адрес не указан, по умолчанию используется локальный компьютер. |
|  **коннектпорт**   |       Указывает порт IPv4 по номеру порта или имени службы, к которому осуществляется подключение. Если **коннектпорт** не указан, по умолчанию используется значение **ListenPort** на локальном компьютере.        |
| **листенаддресс**  | Указывает IPv4-адрес для прослушивания. Допустимые значения: IP-адрес, имя NetBIOS компьютера или DNS-имя компьютера. Если адрес не указан, по умолчанию используется локальный компьютер. |
|    **см**    |                                                                                  Указывает используемый протокол.                                                                                   |

## <a name="add-v4tov6"></a>Добавить v4tov6

Portproxy-сервер прослушивает сообщения, отправленные на указанный порт и IPv4-адрес, и сопоставляет порт и адрес IPv6 для отправки сообщений, полученных после установления отдельного TCP-соединения.

### <a name="syntax"></a>Синтаксис

```PowerShell
add v4tov6 listenport= {Integer | ServiceName} [[connectaddress=] {IPv6Address | HostName} [[connectport=] {Integer | ServiceName}] [[listenaddress=] {IPv4Address | HostName} [[protocol=]tcp]
```

### <a name="parameters"></a>Параметры

|                    |                                                                                                                                                                                                   |
|--------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|   **ListenPort**   |                                                           Указывает порт IPv4 по номеру порта или имени службы, который следует прослушивать.                                                            |
| **коннектаддресс** | Указывает IPv6-адрес для подключения. Допустимые значения: IP-адрес, имя NetBIOS компьютера или DNS-имя компьютера. Если адрес не указан, по умолчанию используется локальный компьютер. |
|  **коннектпорт**   |       Указывает порт IPv6 по номеру порта или имени службы, к которому осуществляется подключение. Если **коннектпорт** не указан, по умолчанию используется значение **ListenPort** на локальном компьютере.        |
| **листенаддресс**  | Указывает IPv4-адрес для прослушивания. Допустимые значения: IP-адрес, имя NetBIOS компьютера или DNS-имя компьютера. Если адрес не указан, по умолчанию используется локальный компьютер.  |
|    **см**    |                                                                                  Указывает используемый протокол.                                                                                   |

## <a name="add-v6tov4"></a>Добавить v6tov4

Portproxy-сервер прослушивает сообщения, отправленные по определенному порту и адресу IPv6, и сопоставляет порт и адрес IPv4 для отправки сообщений, полученных после установления отдельного TCP-соединения.

### <a name="syntax"></a>Синтаксис

```PowerShell
add v6tov4 listenport= {Integer | ServiceName} [[connectaddress=] {IPv4Address | HostName} [[connectport=] {Integer | ServiceName}] [[listenaddress=] {IPv6Address | HostName} [[protocol=]tcp]
```

### <a name="parameters"></a>Параметры

|                    |                                                                                                                                                                                                   |
|--------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|   **ListenPort**   |                                                           Указывает порт IPv6 по номеру порта или имени службы, который следует прослушивать.                                                            |
| **коннектаддресс** | Указывает IPv4-адрес, к которому необходимо подключиться. Допустимые значения: IP-адрес, имя NetBIOS компьютера или DNS-имя компьютера. Если адрес не указан, по умолчанию используется локальный компьютер. |
|  **коннектпорт**   |       Указывает порт IPv4 по номеру порта или имени службы, к которому осуществляется подключение. Если **коннектпорт** не указан, по умолчанию используется значение **ListenPort** на локальном компьютере.        |
| **листенаддресс**  | Указывает IPv6-адрес для прослушивания. Допустимые значения: IP-адрес, имя NetBIOS компьютера или DNS-имя компьютера. Если адрес не указан, по умолчанию используется локальный компьютер.  |
|    **см**    |                                                                                  Указывает используемый протокол.                                                                                   |

## <a name="add-v6tov6"></a>Добавить v6tov6

Portproxy-сервер прослушивает сообщения, отправленные по определенному порту и адресу IPv6, а также сопоставляет порт и IPv6-адрес, на который отправляются сообщения, полученные после установления отдельного TCP-соединения.

### <a name="syntax"></a>Синтаксис

```PowerShell
add v6tov6 listenport= {Integer | ServiceName} [[connectaddress=] {IPv6Address | HostName} [[connectport=] {Integer | ServiceName}] [[listenaddress=] {IPv6Address | HostName} [[protocol=]tcp]
```

### <a name="parameters"></a>Параметры

|                    |                                                                                                                                                                                                   |
|--------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|   **ListenPort**   |                                                           Указывает порт IPv6 по номеру порта или имени службы, который следует прослушивать.                                                            |
| **коннектаддресс** | Указывает IPv6-адрес для подключения. Допустимые значения: IP-адрес, имя NetBIOS компьютера или DNS-имя компьютера. Если адрес не указан, по умолчанию используется локальный компьютер. |
|  **коннектпорт**   |       Указывает порт IPv6 по номеру порта или имени службы, к которому осуществляется подключение. Если **коннектпорт** не указан, по умолчанию используется значение **ListenPort** на локальном компьютере.        |
| **листенаддресс**  | Указывает IPv6-адрес для прослушивания. Допустимые значения: IP-адрес, имя NetBIOS компьютера или DNS-имя компьютера. Если адрес не указан, по умолчанию используется локальный компьютер.  |
|    **см**    |                                                                                  Указывает используемый протокол.                                                                                   |

## <a name="delete-v4tov4"></a>удалить v4tov4

Portproxy-сервер удаляет IPv4-адрес из списка портов IPv4 и адресов, которые прослушивает сервер.

### <a name="syntax"></a>Синтаксис

```PowerShell
delete v4tov4 listenport= {Integer | ServiceName} [[listenaddress=] {IPv4Address | HostName} [[protocol=]tcp]
```

### <a name="parameters"></a>Параметры

|                   |                                                                                                          |
|-------------------|----------------------------------------------------------------------------------------------------------|
|  **ListenPort**   |                                    Указывает удаляемый IPv4-порт.                                    |
| **листенаддресс** | Указывает IPv4-адрес для удаления. Если адрес не указан, по умолчанию используется локальный компьютер. |
|   **см**    |                                      Указывает используемый протокол.                                      |

## <a name="delete-v4tov6"></a>удалить v4tov6

Portproxy-сервер удаляет IPv4-порт и адрес из списка IPv4-адресов, прослушиваемых сервером.

### <a name="syntax"></a>Синтаксис

```PowerShell 
delete v4tov6 listenport= {Integer | ServiceName} [[listenaddress=] {IPv4Address | HostName} [[protocol=]tcp]
```

### <a name="parameters"></a>Параметры

|                   |                                                                                                          |
|-------------------|----------------------------------------------------------------------------------------------------------|
|  **ListenPort**   |                                    Указывает удаляемый IPv4-порт.                                    |
| **листенаддресс** | Указывает IPv4-адрес для удаления. Если адрес не указан, по умолчанию используется локальный компьютер. |
|   **см**    |                                      Указывает используемый протокол.                                      |

## <a name="delete-v6tov4"></a>удалить v6tov4

Portproxy-сервер удаляет порт и адрес IPv6 из списка IPv6-адресов, который прослушивает сервер.

### <a name="syntax"></a>Синтаксис

```PowerShell
delete v6tov4 listenport= {Integer | ServiceName} [[listenaddress=] {IPv6Address | HostName} [[protocol=]tcp]
```

### <a name="parameters"></a>Параметры

|                   |                                                                                                          |
|-------------------|----------------------------------------------------------------------------------------------------------|
|  **ListenPort**   |                                    Указывает порт IPv6 для удаления.                                    |
| **листенаддресс** | Указывает IPv6-адрес для удаления. Если адрес не указан, по умолчанию используется локальный компьютер. |
|   **см**    |                                      Указывает используемый протокол.                                      |

## <a name="delete-v6tov6"></a>удалить v6tov6

Portproxy-сервер удаляет адрес IPv6 из списка IPv6-адресов, который прослушивает сервер.

### <a name="syntax"></a>Синтаксис

```PowerShell
delete v6tov6 listenport= {Integer | ServiceName} [[listenaddress=] {IPv6Address | HostName} [[protocol=]tcp]
```

### <a name="parameters"></a>Параметры

|                   |                                                                                                          |
|-------------------|----------------------------------------------------------------------------------------------------------|
|  **ListenPort**   |                                    Указывает порт IPv6 для удаления.                                    |
| **листенаддресс** | Указывает IPv6-адрес для удаления. Если адрес не указан, по умолчанию используется локальный компьютер. |
|   **см**    |                                      Указывает используемый протокол.                                      |

## <a name="reset"></a>сброс

Сбрасывает состояние конфигурации IPv6.

### <a name="syntax"></a>Синтаксис

`reset`

## <a name="set-v4tov4"></a>задать v4tov4

Изменяет значения параметров существующей записи на portproxy-сервере, созданной командой **Add v4tov4** , или добавляет новую запись в список, который сопоставляет пары "порт-адрес".

### <a name="syntax"></a>Синтаксис

```PowerShell
set v4tov4 listenport= {Integer | ServiceName} [[connectaddress=] {IPv4Address | HostName} [[connectport=] {Integer | ServiceName}] [[listenaddress=] {IPv4Address | HostName} [[protocol=]tcp]
```

### <a name="parameters"></a>Параметры

|                    |                                                                                                                                                                                                   |
|--------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|   **ListenPort**   |                                                           Указывает порт IPv4 по номеру порта или имени службы, который следует прослушивать.                                                            |
| **коннектаддресс** | Указывает IPv4-адрес, к которому необходимо подключиться. Допустимые значения: IP-адрес, имя NetBIOS компьютера или DNS-имя компьютера. Если адрес не указан, по умолчанию используется локальный компьютер. |
|  **коннектпорт**   |       Указывает порт IPv4 по номеру порта или имени службы, к которому осуществляется подключение. Если **коннектпорт** не указан, по умолчанию используется значение **ListenPort** на локальном компьютере.        |
| **листенаддресс**  | Указывает IPv4-адрес для прослушивания. Допустимые значения: IP-адрес, имя NetBIOS компьютера или DNS-имя компьютера. Если адрес не указан, по умолчанию используется локальный компьютер. |
|    **см**    |                                                                                  Указывает используемый протокол.                                                                                   |

## <a name="set-v4tov6"></a>задать v4tov6

Изменяет значения параметров существующей записи на portproxy-сервере, созданной командой **add v4tov6** , или добавляет новую запись в список, который сопоставляет пары "порт-адрес".

### <a name="syntax"></a>Синтаксис

```PowerShell
set v4tov6 listenport= {Integer | ServiceName} [[connectaddress=] {IPv6Address | HostName} [[connectport=] {Integer | ServiceName}] [[listenaddress=] {IPv4Address | HostName} [[protocol=]tcp]
```

### <a name="parameters"></a>Параметры

|                    |                                                                                                                                                                                                   |
|--------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|   **ListenPort**   |                                                           Указывает порт IPv4 по номеру порта или имени службы, который следует прослушивать.                                                            |
| **коннектаддресс** | Указывает IPv6-адрес для подключения. Допустимые значения: IP-адрес, имя NetBIOS компьютера или DNS-имя компьютера. Если адрес не указан, по умолчанию используется локальный компьютер. |
|  **коннектпорт**   |       Указывает порт IPv6 по номеру порта или имени службы, к которому осуществляется подключение. Если **коннектпорт** не указан, по умолчанию используется значение **ListenPort** на локальном компьютере.        |
| **листенаддресс**  | Указывает IPv4-адрес для прослушивания. Допустимые значения: IP-адрес, имя NetBIOS компьютера или DNS-имя компьютера. Если адрес не указан, по умолчанию используется локальный компьютер.  |
|    **см**    |                                                                                  Указывает используемый протокол.                                                                                   |

## <a name="set-v6tov4"></a>задать v6tov4

Изменяет значения параметров существующей записи на portproxy-сервере, созданной командой **Add v6tov4** , или добавляет новую запись в список, который сопоставляет пары "порт-адрес".

### <a name="syntax"></a>Синтаксис

```PowerShell
set v6tov4 listenport= {Integer | ServiceName} [[connectaddress=] {IPv4Address | HostName} [[connectport=] {Integer | ServiceName}] [[listenaddress=] {IPv6Address | HostName} [[protocol=]tcp]
```

### <a name="parameters"></a>Параметры

|                    |                                                                                                                                                                                                   |
|--------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|   **ListenPort**   |                                                           Указывает порт IPv6 по номеру порта или имени службы, который следует прослушивать.                                                            |
| **коннектаддресс** | Указывает IPv4-адрес, к которому необходимо подключиться. Допустимые значения: IP-адрес, имя NetBIOS компьютера или DNS-имя компьютера. Если адрес не указан, по умолчанию используется локальный компьютер. |
|  **коннектпорт**   |       Указывает порт IPv4 по номеру порта или имени службы, к которому осуществляется подключение. Если **коннектпорт** не указан, по умолчанию используется значение **ListenPort** на локальном компьютере.        |
| **листенаддресс**  | Указывает IPv6-адрес для прослушивания. Допустимые значения: IP-адрес, имя NetBIOS компьютера или DNS-имя компьютера. Если адрес не указан, по умолчанию используется локальный компьютер.  |
|    **см**    |                                                                                  Указывает используемый протокол.                                                                                   |

## <a name="set-v6tov6"></a>задать v6tov6

Изменяет значения параметров существующей записи на portproxy-сервере, созданной командой **add v6tov6** , или добавляет новую запись в список, который сопоставляет пары "порт-адрес".

### <a name="syntax"></a>Синтаксис

```PowerShell 
set v6tov6 listenport= {Integer | ServiceName} [[connectaddress=] {IPv6Address | HostName} [[connectport=] {Integer | ServiceName}] [[listenaddress=] {IPv6Address | HostName} [[protocol=]tcp]
```

### <a name="parameters"></a>Параметры

|                    |                                                                                                                                                                                                    |
|--------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|   **ListenPort**   |                                                            Указывает порт IPv6 по номеру порта или имени службы, который следует прослушивать.                                                            |
| **коннектаддресс** | Указывает IPv6-адрес для подключения. Допустимые значения: IP-адрес, имя NetBIOS компьютера или DNS-имя компьютера. Если адрес не указан, по умолчанию используется локальный компьютер.  |
|  **коннектпорт**   |        Указывает порт IPv6 по номеру порта или имени службы, к которому осуществляется подключение. Если **коннектпорт** не указан, по умолчанию используется значение **ListenPort** на локальном компьютере.        |
| **листенаддресс**  | Указывает IPv6-адрес для прослушивания. Допустимые значения: IP-адрес, имя NetBIOS компьютера или DNS-имя компьютера. Если адрес не указан, по умолчанию используется локальный компьютер. |
|    **см**    |                                                                                   Указывает используемый протокол.                                                                                   |

## <a name="show-all"></a>показать все

Отображает все параметры portproxy, включая пары "порт-адрес" для v4tov4, v4tov6, v6tov4 и v6tov6.

### <a name="syntax"></a>Синтаксис

`show all`


## <a name="show-v4tov4"></a>показывать v4tov4

Отображает параметры portproxy v4tov4.

### <a name="syntax"></a>Синтаксис

`show v4tov4`

## <a name="show-v4tov6"></a>показывать v4tov6

Отображает параметры portproxy v4tov6.

### <a name="syntax"></a>Синтаксис

`show v4tov6`

## <a name="show-v6tov4"></a>показывать v6tov4

Отображает параметры portproxy v6tov4.

### <a name="syntax"></a>Синтаксис

`show v6tov4`


## <a name="show-v6tov6"></a>показывать v6tov6

Отображает параметры portproxy v6tov6.

### <a name="syntax"></a>Синтаксис

`show v6tov6`

---
