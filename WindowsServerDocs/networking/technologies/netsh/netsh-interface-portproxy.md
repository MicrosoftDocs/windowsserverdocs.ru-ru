---
title: Команды Netsh для интерфейса portproxy
description: Используйте команды netsh interface portproxy в качестве прокси между сетями и приложениями IPv4 и IPv6.
ms.prod: windows-server-threshold
ms.technology: networking
ms.topic: article
ms.assetid: ''
manager: dougkim
ms.author: pashort
author: shortpatti
ms.date: 08/30/2018
ms.openlocfilehash: 8ac4f8e7cd0aed5a81e89672354622dd81afce2a
ms.sourcegitcommit: eaf071249b6eb6b1a758b38579a2d87710abfb54
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/31/2019
ms.locfileid: "66446178"
---
# <a name="netsh-interface-portproxy-commands"></a>Команды порта прокси-сервера интерфейса Netsh

Используйте **portproxy интерфейса netsh** команды, чтобы выступать в качестве посредников между сетями и приложениями IPv4 и IPv6. Эти команды можно использовать для установки прокси-службы следующим образом:

-   IPv4-настроенного компьютера и приложения сообщения, отправленные на другие IPv4-настроенные компьютеры и приложения.

-   Сообщения посылаются на IPv6-настроенные компьютеры и приложения, IPv4-настроенного компьютера и приложения.

-   Сообщения посылаются на IPv4-настроенные компьютеры и приложения, IPv6-настроенного компьютера и приложения.

-   IPv6-настроенного компьютера и приложения сообщения, отправленные на другие IPv6-настроенные компьютеры и приложения.

При написании пакетные файлы или сценарии, использование этих команд, каждая команда должно начинаться с **portproxy интерфейса netsh**. Например, при использовании **удалить v4tov6** команду, чтобы указать, что portproxy-сервер удаляет IPv4-порт и адрес из списка IPv4-адресов, которые сервер ожидает передачи данных, пакетный файл или сценарий необходимо использовать следующий синтаксис:

```PowerShell
netsh interface portproxy delete v4tov6listenport= {Integer | ServiceName} [[listenaddress=] {IPv4Address| HostName}] [[protocol=]tcp]
```

Команды netsh доступных интерфейс portproxy представлены ниже.

-   [добавить v4tov4](#add-v4tov4)

-   [Добавление v4tov6](#add-v4tov6)

-   [добавить v6tov4](#add-v6tov4)

-   [добавить v6tov6](#add-v6tov6)

-   [удалить v4tov4](#delete-v4tov4)

-   [удалить v4tov6](#delete-v4tov6)

-   [удалить v6tov6](#delete-v6tov6)

-   [Сброс](#reset)

-   [набор v4tov4](#set-v4tov4)

-   [набор v4tov6](#set-v4tov6)

-   [setv6tov4](#set-v6tov4)

-   [набор v6tov6](#set-v6tov6)

-   [Показать все](#show-all)

-   [Показать v4tov4](#show-v4tov4)

-   [Показать v4tov6](#show-v4tov6)

-   [Показать v6tov4](#show-v6tov4)

-   [Показать v6tov6](#show-v6tov6)


## <a name="add-v4tov4"></a>добавить v4tov4

Portproxy-сервер прослушивает сообщения, отправляемые определенного порта и IPv4-адрес и сопоставления порта и протокола IPv4 адреса для отправки сообщения, полученные после устанавливая отдельное соединение TCP.

### <a name="syntax"></a>Синтаксис

```PowerShell
add v4tov4 listenport= {Integer | ServiceName} [[connectaddress=] {IPv4Address | HostName}] [[connectport=] {Integer | ServiceName}] [[listenaddress=] {IPv4Address | HostName}] [[protocol=]tcp]
```

### <a name="parameters"></a>Параметры


|                    |                                                                                                                                                                                                   |
|--------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|   **параметра listenport задано значение**   |                                                           Задает порт IPv4, номер порта или служба, имя для прослушивания.                                                            |
| **connectaddress** | Задает IPv4-адрес, к которому осуществляется подключение. Допустимые значения: IP-адрес, NetBIOS-имя компьютера или DNS-имя компьютера. Если не указан адрес, по умолчанию используется локальный компьютер. |
|  **connectport**   |       Задает порт IPv4, номер порта или служба, имя, к которому осуществляется подключение. Если **connectport** не указан, значение по умолчанию является значение **listenport** на локальном компьютере.        |
| **listenaddress**  | Задает IPv4-адрес, для которого требуется ожидать передачи данных. Допустимые значения: IP-адрес, NetBIOS-имя компьютера или DNS-имя компьютера. Если не указан адрес, по умолчанию используется локальный компьютер. |
|    **Протокол**    |                                                                                  Указывает протокол, используемый.                                                                                   |

## <a name="add-v4tov6"></a>Добавление v4tov6

Portproxy-сервер прослушивает сообщения, отправляемые определенного порта и IPv4-адрес и сопоставления портов и IPv6-адресов для отправки сообщения, полученные после устанавливая отдельное соединение TCP.

### <a name="syntax"></a>Синтаксис

```PowerShell
add v4tov6 listenport= {Integer | ServiceName} [[connectaddress=] {IPv6Address | HostName} [[connectport=] {Integer | ServiceName}] [[listenaddress=] {IPv4Address | HostName} [[protocol=]tcp]
```

### <a name="parameters"></a>Параметры

|                    |                                                                                                                                                                                                   |
|--------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|   **параметра listenport задано значение**   |                                                           Задает порт IPv4, номер порта или служба, имя для прослушивания.                                                            |
| **connectaddress** | Задает IPv6-адрес, к которому осуществляется подключение. Допустимые значения: IP-адрес, NetBIOS-имя компьютера или DNS-имя компьютера. Если не указан адрес, по умолчанию используется локальный компьютер. |
|  **connectport**   |       Задает порт IPv6, номер порта или служба, имя, к которому осуществляется подключение. Если **connectport** не указан, значение по умолчанию является значение **listenport** на локальном компьютере.        |
| **listenaddress**  | Задает IPv4-адрес для прослушивания. Допустимые значения: IP-адрес, NetBIOS-имя компьютера или DNS-имя компьютера. Если не указан адрес, по умолчанию используется локальный компьютер.  |
|    **Протокол**    |                                                                                  Указывает протокол, используемый.                                                                                   |

## <a name="add-v6tov4"></a>добавить v6tov4

Portproxy-сервер прослушивает сообщения, отправляемые определенного порта и IPv6-адрес и карты, порт и IPv4 адресов, к которым для отправки сообщения, полученные после установления отдельное TCP-подключение.

### <a name="syntax"></a>Синтаксис

```PowerShell
add v6tov4 listenport= {Integer | ServiceName} [[connectaddress=] {IPv4Address | HostName} [[connectport=] {Integer | ServiceName}] [[listenaddress=] {IPv6Address | HostName} [[protocol=]tcp]
```

### <a name="parameters"></a>Параметры

|                    |                                                                                                                                                                                                   |
|--------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|   **параметра listenport задано значение**   |                                                           Задает порт IPv6, номер порта или служба, имя для прослушивания.                                                            |
| **connectaddress** | Задает IPv4-адрес, к которому осуществляется подключение. Допустимые значения: IP-адрес, NetBIOS-имя компьютера или DNS-имя компьютера. Если не указан адрес, по умолчанию используется локальный компьютер. |
|  **connectport**   |       Задает порт IPv4, номер порта или служба, имя, к которому осуществляется подключение. Если **connectport** не указан, значение по умолчанию является значение **listenport** на локальном компьютере.        |
| **listenaddress**  | Задает IPv6-адрес для прослушивания. Допустимые значения: IP-адрес, NetBIOS-имя компьютера или DNS-имя компьютера. Если не указан адрес, по умолчанию используется локальный компьютер.  |
|    **Протокол**    |                                                                                  Указывает протокол, используемый.                                                                                   |

## <a name="add-v6tov6"></a>добавить v6tov6

Portproxy-сервер прослушивает сообщения, отправляемые определенного порта и IPv6-адрес и карты, порт и IPv6-адресов к которым для отправки сообщения, полученные после установления отдельное TCP-подключение.

### <a name="syntax"></a>Синтаксис

```PowerShell
add v6tov6 listenport= {Integer | ServiceName} [[connectaddress=] {IPv6Address | HostName} [[connectport=] {Integer | ServiceName}] [[listenaddress=] {IPv6Address | HostName} [[protocol=]tcp]
```

### <a name="parameters"></a>Параметры

|                    |                                                                                                                                                                                                   |
|--------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|   **параметра listenport задано значение**   |                                                           Задает порт IPv6, номер порта или служба, имя для прослушивания.                                                            |
| **connectaddress** | Задает IPv6-адрес, к которому осуществляется подключение. Допустимые значения: IP-адрес, NetBIOS-имя компьютера или DNS-имя компьютера. Если не указан адрес, по умолчанию используется локальный компьютер. |
|  **connectport**   |       Задает порт IPv6, номер порта или служба, имя, к которому осуществляется подключение. Если **connectport** не указан, значение по умолчанию является значение **listenport** на локальном компьютере.        |
| **listenaddress**  | Задает IPv6-адрес для прослушивания. Допустимые значения: IP-адрес, NetBIOS-имя компьютера или DNS-имя компьютера. Если не указан адрес, по умолчанию используется локальный компьютер.  |
|    **Протокол**    |                                                                                  Указывает протокол, используемый.                                                                                   |

## <a name="delete-v4tov4"></a>удалить v4tov4

Portproxy-сервер удаляет IPv4-адрес из списка IPv4 порты и адреса, которые сервер ожидает передачи данных.

### <a name="syntax"></a>Синтаксис

```PowerShell
delete v4tov4 listenport= {Integer | ServiceName} [[listenaddress=] {IPv4Address | HostName} [[protocol=]tcp]
```

### <a name="parameters"></a>Параметры

|                   |                                                                                                          |
|-------------------|----------------------------------------------------------------------------------------------------------|
|  **параметра listenport задано значение**   |                                    Задает порт IPv4 для удаления.                                    |
| **listenaddress** | Задает IPv4-адрес для удаления. Если не указан адрес, по умолчанию используется локальный компьютер. |
|   **Протокол**    |                                      Указывает протокол, используемый.                                      |

## <a name="delete-v4tov6"></a>удалить v4tov6

Portproxy-сервер удаляет IPv4-порт и адрес в списке IPv4-адресов, которые сервер ожидает передачи данных.

### <a name="syntax"></a>Синтаксис

```PowerShell 
delete v4tov6 listenport= {Integer | ServiceName} [[listenaddress=] {IPv4Address | HostName} [[protocol=]tcp]
```

### <a name="parameters"></a>Параметры

|                   |                                                                                                          |
|-------------------|----------------------------------------------------------------------------------------------------------|
|  **параметра listenport задано значение**   |                                    Задает порт IPv4 для удаления.                                    |
| **listenaddress** | Задает IPv4-адрес для удаления. Если не указан адрес, по умолчанию используется локальный компьютер. |
|   **Протокол**    |                                      Указывает протокол, используемый.                                      |

## <a name="delete-v6tov4"></a>удалить v6tov4

Portproxy-сервер удаляет IPv6-порт и адрес из списка IPv6-адресов, которые сервер ожидает передачи данных.

### <a name="syntax"></a>Синтаксис

```PowerShell
delete v6tov4 listenport= {Integer | ServiceName} [[listenaddress=] {IPv6Address | HostName} [[protocol=]tcp]
```

### <a name="parameters"></a>Параметры

|                   |                                                                                                          |
|-------------------|----------------------------------------------------------------------------------------------------------|
|  **параметра listenport задано значение**   |                                    Задает порт IPv6 для удаления.                                    |
| **listenaddress** | Указывает адрес IPv6 для удаления. Если не указан адрес, по умолчанию используется локальный компьютер. |
|   **Протокол**    |                                      Указывает протокол, используемый.                                      |

## <a name="delete-v6tov6"></a>удалить v6tov6

Portproxy-сервер удаляет IPv6-адрес из списка IPv6-адресов, которые сервер ожидает передачи данных.

### <a name="syntax"></a>Синтаксис

```PowerShell
delete v6tov6 listenport= {Integer | ServiceName} [[listenaddress=] {IPv6Address | HostName} [[protocol=]tcp]
```

### <a name="parameters"></a>Параметры

|                   |                                                                                                          |
|-------------------|----------------------------------------------------------------------------------------------------------|
|  **параметра listenport задано значение**   |                                    Задает порт IPv6 для удаления.                                    |
| **listenaddress** | Указывает адрес IPv6 для удаления. Если не указан адрес, по умолчанию используется локальный компьютер. |
|   **Протокол**    |                                      Указывает протокол, используемый.                                      |

## <a name="reset"></a>сброс

Сбрасывает состояние конфигурации IPv6.

### <a name="syntax"></a>Синтаксис

`reset`

## <a name="set-v4tov4"></a>набор v4tov4

Изменяет значение параметра существующей записи на сервере portproxy, созданных с помощью **add v4tov4** команду или добавляет новую запись в список пар порт адрес.

### <a name="syntax"></a>Синтаксис

```PowerShell
set v4tov4 listenport= {Integer | ServiceName} [[connectaddress=] {IPv4Address | HostName} [[connectport=] {Integer | ServiceName}] [[listenaddress=] {IPv4Address | HostName} [[protocol=]tcp]
```

### <a name="parameters"></a>Параметры

|                    |                                                                                                                                                                                                   |
|--------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|   **параметра listenport задано значение**   |                                                           Задает порт IPv4, номер порта или служба, имя для прослушивания.                                                            |
| **connectaddress** | Задает IPv4-адрес, к которому осуществляется подключение. Допустимые значения: IP-адрес, NetBIOS-имя компьютера или DNS-имя компьютера. Если не указан адрес, по умолчанию используется локальный компьютер. |
|  **connectport**   |       Задает порт IPv4, номер порта или служба, имя, к которому осуществляется подключение. Если **connectport** не указан, значение по умолчанию является значение **listenport** на локальном компьютере.        |
| **listenaddress**  | Задает IPv4-адрес, для которого требуется ожидать передачи данных. Допустимые значения: IP-адрес, NetBIOS-имя компьютера или DNS-имя компьютера. Если не указан адрес, по умолчанию используется локальный компьютер. |
|    **Протокол**    |                                                                                  Указывает протокол, используемый.                                                                                   |

## <a name="set-v4tov6"></a>набор v4tov6

Изменяет значение параметра существующей записи на сервере portproxy, созданных с помощью **add v4tov6** команду или добавляет новую запись в список пар порт адрес.

### <a name="syntax"></a>Синтаксис

```PowerShell
set v4tov6 listenport= {Integer | ServiceName} [[connectaddress=] {IPv6Address | HostName} [[connectport=] {Integer | ServiceName}] [[listenaddress=] {IPv4Address | HostName} [[protocol=]tcp]
```

### <a name="parameters"></a>Параметры

|                    |                                                                                                                                                                                                   |
|--------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|   **параметра listenport задано значение**   |                                                           Задает порт IPv4, номер порта или служба, имя для прослушивания.                                                            |
| **connectaddress** | Задает IPv6-адрес, к которому осуществляется подключение. Допустимые значения: IP-адрес, NetBIOS-имя компьютера или DNS-имя компьютера. Если не указан адрес, по умолчанию используется локальный компьютер. |
|  **connectport**   |       Задает порт IPv6, номер порта или служба, имя, к которому осуществляется подключение. Если **connectport** не указан, значение по умолчанию является значение **listenport** на локальном компьютере.        |
| **listenaddress**  | Задает IPv4-адрес для прослушивания. Допустимые значения: IP-адрес, NetBIOS-имя компьютера или DNS-имя компьютера. Если не указан адрес, по умолчанию используется локальный компьютер.  |
|    **Протокол**    |                                                                                  Указывает протокол, используемый.                                                                                   |

## <a name="set-v6tov4"></a>набор v6tov4

Изменяет значение параметра существующей записи на сервере portproxy, созданных с помощью **add v6tov4** команду или добавляет новую запись в список пар порт адрес.

### <a name="syntax"></a>Синтаксис

```PowerShell
set v6tov4 listenport= {Integer | ServiceName} [[connectaddress=] {IPv4Address | HostName} [[connectport=] {Integer | ServiceName}] [[listenaddress=] {IPv6Address | HostName} [[protocol=]tcp]
```

### <a name="parameters"></a>Параметры

|                    |                                                                                                                                                                                                   |
|--------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|   **параметра listenport задано значение**   |                                                           Задает порт IPv6, номер порта или служба, имя для прослушивания.                                                            |
| **connectaddress** | Задает IPv4-адрес, к которому осуществляется подключение. Допустимые значения: IP-адрес, NetBIOS-имя компьютера или DNS-имя компьютера. Если не указан адрес, по умолчанию используется локальный компьютер. |
|  **connectport**   |       Задает порт IPv4, номер порта или служба, имя, к которому осуществляется подключение. Если **connectport** не указан, значение по умолчанию является значение **listenport** на локальном компьютере.        |
| **listenaddress**  | Задает IPv6-адрес для прослушивания. Допустимые значения: IP-адрес, NetBIOS-имя компьютера или DNS-имя компьютера. Если не указан адрес, по умолчанию используется локальный компьютер.  |
|    **Протокол**    |                                                                                  Указывает протокол, используемый.                                                                                   |

## <a name="set-v6tov6"></a>набор v6tov6

Изменяет значение параметра существующей записи на сервере portproxy, созданных с помощью **add v6tov6** команду или добавляет новую запись в список пар порт адрес.

### <a name="syntax"></a>Синтаксис

```PowerShell 
set v6tov6 listenport= {Integer | ServiceName} [[connectaddress=] {IPv6Address | HostName} [[connectport=] {Integer | ServiceName}] [[listenaddress=] {IPv6Address | HostName} [[protocol=]tcp]
```

### <a name="parameters"></a>Параметры

|                    |                                                                                                                                                                                                    |
|--------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|   **параметра listenport задано значение**   |                                                            Задает порт IPv6, номер порта или служба, имя для прослушивания.                                                            |
| **connectaddress** | Задает IPv6-адрес, к которому осуществляется подключение. Допустимые значения: IP-адрес, NetBIOS-имя компьютера или DNS-имя компьютера. Если не указан адрес, по умолчанию используется локальный компьютер.  |
|  **connectport**   |        Задает порт IPv6, номер порта или служба, имя, к которому осуществляется подключение. Если **connectport** не указан, значение по умолчанию является значение **listenport** на локальном компьютере.        |
| **listenaddress**  | Задает IPv6-адрес для прослушивания. Допустимые значения: IP-адрес, NetBIOS-имя компьютера или DNS-имя компьютера. Если адрес не указан, по умолчанию используется локальный компьютер. |
|    **Протокол**    |                                                                                   Указывает протокол, используемый.                                                                                   |

## <a name="show-all"></a>показать все

Отображает все параметры portproxy, включая порт и адрес пары v4tov4, v4tov6, v6tov4 и v6tov6.

### <a name="syntax"></a>Синтаксис

`show all`


## <a name="show-v4tov4"></a>Показать v4tov4

Отображает параметры portproxy v4tov4.

### <a name="syntax"></a>Синтаксис

`show v4tov4`

## <a name="show-v4tov6"></a>Показать v4tov6

Отображает параметры portproxy v4tov6.

### <a name="syntax"></a>Синтаксис

`show v4tov6`

## <a name="show-v6tov4"></a>Показать v6tov4

Отображает параметры portproxy v6tov4.

### <a name="syntax"></a>Синтаксис

`show v6tov4`


## <a name="show-v6tov6"></a>Показать v6tov6

Отображает параметры portproxy v6tov6.

### <a name="syntax"></a>Синтаксис

`show v6tov6`

---
