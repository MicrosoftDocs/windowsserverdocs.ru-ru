---
title: Синтаксис, контексты и форматирование команд Netsh
description: С помощью этого раздела вы узнаете, как вводить контексты и подконтексты Netsh, понимать синтаксис команды netsh и форматирование команд, а также как запускать Netsh на локальных и удаленных компьютерах, работающих под управлением Windows Server 2016 или Windows 10.
ms.prod: windows-server
ms.technology: networking
ms.topic: article
ms.assetid: 8cb9b59f-0255-4261-b49a-562c5ea50ee0
manager: brianlic
ms.author: pashort
author: shortpatti
ms.openlocfilehash: 815e59ca00d6450b8ef09a034434c4209c928e78
ms.sourcegitcommit: 6aff3d88ff22ea141a6ea6572a5ad8dd6321f199
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/27/2019
ms.locfileid: "71405577"
---
# <a name="netsh-command-syntax-contexts-and-formatting"></a>Синтаксис, контексты и форматирование команд Netsh

>Область применения: Windows Server (Semi-Annual Channel), Windows Server 2016

В этом разделе вы узнаете, как вводить контексты и подконтексты Netsh, понимать синтаксис Netsh и форматирование команд, а также как выполнять команды Netsh на локальных и удаленных компьютерах.

Netsh — это служебная программа для работы со сценариями командной строки, которая позволяет отображать или изменять конфигурацию сети компьютера, работающего в данный момент. Команды Netsh можно выполнять, вводя команды в командной строке Netsh. они могут использоваться в пакетных файлах или скриптах. Удаленные компьютеры и локальный компьютер можно настроить с помощью команд Netsh.

Netsh также обеспечивает возможность написания сценариев, которые позволяют выполнять группы команд в режиме партии на определенном компьютере. С помощью Netsh вы можете сохранить сценарий настройки в текстовом файле для архивирования или упрощения конфигурации других компьютеров.

## <a name="netsh-contexts"></a>Контексты netsh

Netsh взаимодействует с другими компонентами операционной системы с помощью динамической библиотеки\-Link Library \(DLL\) Files. 

Каждая библиотека DLL модуля поддержки Netsh предоставляет широкий набор функций, называемый *контекстом*, который представляет собой группу команд, характерных для серверной роли или компонента сети. Эти контексты расширяют функциональные возможности Netsh, обеспечивая поддержку конфигурации и мониторинга для одной или нескольких служб, служебных программ или протоколов. Например, Дхкпмон. dll предоставляет Netsh с контекстом и набором команд, необходимых для настройки DHCP-серверов и управления ими.

### <a name="obtain-a-list-of-contexts"></a>Получение списка контекстов

Список контекстов Netsh можно получить, открыв либо командную строку, либо Windows PowerShell на компьютере под управлением Windows Server 2016 или Windows 10. Введите команду **netsh** и нажмите клавишу ВВОД. Введите **/?** , а затем нажмите клавишу ВВОД.

Ниже приведен пример выходных данных для этих команд на компьютере с Windows Server 2016 Datacenter.

>    ```
>   PS C:\Windows\system32> netsh
>   netsh>/?
>    
>    The following commands are available:
>    
>    Commands in this context:
>    ..            - Goes up one context level.
>    ?             - Displays a list of commands.
>    abort         - Discards changes made while in offline mode.
>    add           - Adds a configuration entry to a list of entries.
>    advfirewall   - Changes to the `netsh advfirewall' context.
>    alias         - Adds an alias.
>    branchcache   - Changes to the `netsh branchcache' context.
>    bridge        - Changes to the `netsh bridge' context.
>    bye           - Exits the program.
>    commit        - Commits changes made while in offline mode.
>    delete        - Deletes a configuration entry from a list of entries.
>    dhcpclient    - Changes to the `netsh dhcpclient' context.
>    dnsclient     - Changes to the `netsh dnsclient' context.
>    dump          - Displays a configuration script.
>    exec          - Runs a script file.
>    exit          - Exits the program.
>    firewall      - Changes to the `netsh firewall' context.
>    help          - Displays a list of commands.
>    http          - Changes to the `netsh http' context.
>    interface     - Changes to the `netsh interface' context.
>    ipsec         - Changes to the `netsh ipsec' context.
>    ipsecdosprotection - Changes to the `netsh ipsecdosprotection' context.
>    lan           - Changes to the `netsh lan' context.
>    namespace     - Changes to the `netsh namespace' context.
>    netio         - Changes to the `netsh netio' context.
>    offline       - Sets the current mode to offline.
>    online        - Sets the current mode to online.
>    popd          - Pops a context from the stack.
>    pushd         - Pushes current context on stack.
>    quit          - Exits the program.
>    ras           - Changes to the `netsh ras' context.
>    rpc           - Changes to the `netsh rpc' context.
>    set           - Updates configuration settings.
>    show          - Displays information.
>    trace         - Changes to the `netsh trace' context.
>    unalias       - Deletes an alias.
>    wfp           - Changes to the `netsh wfp' context.
>    winhttp       - Changes to the `netsh winhttp' context.
>    winsock       - Changes to the `netsh winsock' context.
>    
>    The following sub-contexts are available:
>     advfirewall branchcache bridge dhcpclient dnsclient firewall http interface ipsec ipsecdosprotection lan namespace netio ras rpc trace wfp winhttp winsock
>    
>    To view help for a command, type the command, followed by a space, and then type ?.
>    ```

### <a name="subcontexts"></a>Подконтексты

Контексты netsh могут содержать как команды, так и дополнительные контексты, называемые *подконтекстами*. Например, в контексте маршрутизации можно изменить подконтексты IP и IPv6.

Чтобы отобразить список команд и подконтекстов, которые можно использовать в контексте, введите имя контекста в командной строке netsh и введите либо **/?** или **Справка**. Например, чтобы отобразить список подконтекстов и команд, которые можно использовать в контексте маршрутизации, в командной строке Netsh \(, то есть **netsh&gt;** \), введите одно из следующих действий:

**Маршрутизация/?**

**Справка по маршрутизации**

Для выполнения задач в другом контексте без изменения текущего контекста введите путь к контексту команды, которую необходимо использовать в командной строке Netsh. Например, чтобы добавить интерфейс с именем "подключение по локальной сети" в контексте IGMP без предварительного изменения контекста IGMP, введите в командной строке Netsh следующую команду:

**Маршрутизация IP IGMP: "подключение по локальной сети" стартупкуеринтервал = 21**

## <a name="running-netsh-commands"></a>Выполнение команд Netsh

Чтобы выполнить команду netsh, необходимо запустить netsh из командной строки, введя команду **netsh** , а затем нажав клавишу ВВОД. Затем можно перейти к контексту, содержащему команду, которую нужно использовать. Доступные контексты зависят от установленных сетевых компонентов. Например, если ввести **DHCP** в командной строке netsh и нажать клавишу ВВОД, Netsh изменится в контексте DHCP-сервера. Если служба DHCP не установлена, появится следующее сообщение:

**Следующая команда не найдена: DHCP.**

## <a name="formatting-legend"></a>Условные обозначения форматирования

Следующие условные обозначения форматирования можно использовать для интерпретации и использования правильного синтаксиса команды netsh при выполнении команды в командной строке netsh или в пакетном файле или скрипте.

- Текст, выделенный *курсивом* , — это информация, которую необходимо указать при вводе команды. Например, если у команды есть параметр с именем-*username*, необходимо ввести фактическое имя пользователя.
- Текст, **выделенный жирным шрифтом** , представляет собой информацию, которую необходимо ввести точно так же, как показано при вводе команды.
- Текст, за которым следует многоточие \(...\) — это параметр, который может повторяться несколько раз в командной строке.
- Текст, заключенный между квадратными скобками [&nbsp;], является необязательным элементом.
- Текст, заключенный между фигурными скобками {&nbsp;} с вариантами, разделенными каналом, предоставляет набор вариантов, из которых необходимо выбрать только один, например `{enable|disable}`.
- Текст, отформатированный с помощью курьера, — это код или выходные данные программы.

## <a name="running-netsh-commands-from-the-command-prompt-or-windows-powershell"></a>Выполнение команд netsh из командной строки или Windows PowerShell

Чтобы запустить сетевую оболочку и ввести команду netsh в командной строке или в Windows PowerShell, можно использовать следующую команду.

### <a name="netsh"></a>netsh

Netsh — это служебная программа для работы со сценариями командной строки, которая позволяет локально или удаленно отображать или изменять конфигурацию сети текущего компьютера. При использовании без параметров **netsh** открывает командную строку Netsh. exe \(то есть **netsh&gt;** \).

#### <a name="syntax"></a>Синтаксис

**netsh**\[ **-a**&nbsp;*алиасфиле*\] \[ **-c**&nbsp;*context* \] \[ **-r**&nbsp;*ремотекомпутер*\] \[ **-u** \[ *имя_домена\\* \] *имя_пользователя* \] \[ **-p**&nbsp;*Password* | \*\] \[{*нетшкомманд* |  **-f**&nbsp; *ScriptFile*}\]

#### <a name="parameters"></a>Параметры

**`-a`**

Необязательно. Указывает, что вы вернетесь в командную строку **netsh** после запуска *алиасфиле*.

**`AliasFile`**

Необязательно. Задает имя текстового файла, содержащего одну или несколько команд **netsh** .

**`-c`**

Необязательно. Указывает, что команда Netsh вводит указанный контекст **netsh** .

**`Context`**

Необязательно. Задает контекст **netsh** , который необходимо ввести. 

**`-r`**

Необязательно. Указывает, что команда должна выполняться на удаленном компьютере.

> [!IMPORTANT]
> При удаленном использовании некоторых команд Netsh на другом компьютере с параметром **netsh – r** на удаленном компьютере должна быть запущена служба удаленного реестра. Если она не запущена, Windows выводит сообщение об ошибке "сетевой путь не найден".

***`RemoteComputer`***

Необязательно. Указывает удаленный компьютер, который требуется настроить.

**`-u`**

Необязательно. Указывает, что вы хотите выполнить команду netsh в учетной записи пользователя.

***`DomainName\\`***

Необязательно. Указывает домен, в котором находится учетная запись пользователя. Значение по умолчанию — локальный домен, если не указано *имя_домена\\* .

***`UserName`***

Необязательно. Указывает имя учетной записи пользователя.

**`-p`**

Необязательно. Указывает, что необходимо указать пароль для учетной записи пользователя.

***`Password`***

Необязательно. Указывает пароль для учетной записи пользователя, указанной в параметре **-u** *username*.

***`NetshCommand`***

Необязательно. Задает команду **netsh** , которую требуется выполнить.

**`-f`**

Необязательно. Выход из программы **netsh** после выполнения сценария, назначенного с помощью *ScriptFile*.

***`ScriptFile`***

Необязательно. Указывает скрипт, который требуется выполнить.

**`/?`**

Необязательно. Отображает справку в командной строке Netsh.

> [!NOTE]
> Если вы указали **`-r`** , а затем еще одну команду, **netsh** выполняет команду на удаленном компьютере, а затем возвращает в командную строку cmd. exe. Если указать **`-r`** без другой команды, команда **netsh** откроется в удаленном режиме. Процесс аналогичен использованию **set machine** в командной строке Netsh. При использовании **`-r`** целевой компьютер задается только для текущего экземпляра **netsh** . После выхода и повторного ввода **команды netsh**целевой компьютер будет сброшен в качестве локального компьютера. Команды **netsh** можно выполнять на удаленном компьютере, указывая имя компьютера, хранящееся в службе WINS, имя UNC, имя в Интернете, которое должно быть разрешено DNS-сервером, или IP-адрес.

**Ввод строковых значений параметров для команд Netsh**

В справочнике по командам Netsh есть команды, которые содержат параметры, для которых требуется строковое значение.

В случае, когда строковое значение содержит пробелы между символами, например строковые значения, состоящие из нескольких слов, необходимо заключить строковое значение в кавычки. Например, для параметра **Interface** со строковым значением **беспроводного сетевого подключения**заключите строковое значение в кавычки:

**`interface="Wireless Network Connection"`**

