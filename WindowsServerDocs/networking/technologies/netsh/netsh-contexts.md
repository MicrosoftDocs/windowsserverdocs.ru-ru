---
title: Синтаксис, контексты и форматирование команд Netsh
description: Чтобы узнать, как введите контексты netsh и вложенными контекстами, понять синтаксис netsh и форматирование команды и сведения о выполнении команды netsh в локальных и удаленных компьютерах, работающих под управлением Windows Server 2016 или Windows 10 можно использовать в этом разделе.
ms.prod: windows-server-threshold
ms.technology: networking
ms.topic: article
ms.assetid: 8cb9b59f-0255-4261-b49a-562c5ea50ee0
manager: brianlic
ms.author: pashort
author: shortpatti
ms.openlocfilehash: adb1546bc21b3209a362fd61feab0d3ee6810a66
ms.sourcegitcommit: 6ef4986391607bb28593852d06cc6645e548a4b3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/07/2019
ms.locfileid: "66812168"
---
# <a name="netsh-command-syntax-contexts-and-formatting"></a>Синтаксис, контексты и форматирование команд Netsh

>Относится к: Windows Server (полугодовой канал), Windows Server 2016

В этом разделе можно использовать дополнительные способы введите контексты netsh и вложенными контекстами, понять синтаксис netsh и команды форматирования и для выполнения команды netsh на локальных и удаленных компьютерах.

Netsh — это командной строки программа сценариев, которая позволяет отображать и изменять конфигурацию сети компьютера, который выполняется в данный момент. Команды Netsh может выполняться путем ввода команды в командной строке netsh и они могут использоваться в пакетных файлах или сценариев. Удаленные компьютеры и локального компьютера можно настроить с помощью команды netsh.

Netsh также обеспечивает возможность написания сценариев, которые позволяют выполнять группы команд в режиме партии на определенном компьютере. С помощью Netsh вы можете сохранить сценарий настройки в текстовом файле для архивирования или упрощения конфигурации других компьютеров.

## <a name="netsh-contexts"></a>Контексты Netsh

Netsh взаимодействует с другими компонентами операционной системы с помощью динамического\-библиотеки \(DLL\) файлов. 

Каждая Библиотека модуля поддержки предоставляет обширный набор функций, которые называются *контекст*, который представляет собой группу команды, относящиеся к сети роли сервера или функции. Эти контексты расширить функциональные возможности netsh, предоставляя конфигурации и мониторинга поддержка один или несколько служб, служебных программ или протоколов. Например Dhcpmon.dll предоставляет netsh с контекстом и набор команд, необходимых для настройки и управления DHCP-серверов.

### <a name="obtain-a-list-of-contexts"></a>Получить список контекстов

Можно получить список контекстов netsh, открыв командную строку или Windows PowerShell на компьютере под управлением Windows Server 2016 или Windows 10. Введите команду **netsh** и нажмите клавишу ВВОД. Тип **/?** , и нажмите клавишу ВВОД.

Ниже приведен пример выходных данных для этих команд на компьютере под управлением Windows Server 2016 Datacenter.

>    ```
>   PS C:\Windows\system32> netsh
>   netsh>/?
>    
>    The following commands are available:
>    
>    Commands in this context:
>    ..            - Goes up one context level.
>    ?             - Displays a list of commands.
>    abort         - Discards changes made while in offline mode.
>    add           - Adds a configuration entry to a list of entries.
>    advfirewall   - Changes to the `netsh advfirewall' context.
>    alias         - Adds an alias.
>    branchcache   - Changes to the `netsh branchcache' context.
>    bridge        - Changes to the `netsh bridge' context.
>    bye           - Exits the program.
>    commit        - Commits changes made while in offline mode.
>    delete        - Deletes a configuration entry from a list of entries.
>    dhcpclient    - Changes to the `netsh dhcpclient' context.
>    dnsclient     - Changes to the `netsh dnsclient' context.
>    dump          - Displays a configuration script.
>    exec          - Runs a script file.
>    exit          - Exits the program.
>    firewall      - Changes to the `netsh firewall' context.
>    help          - Displays a list of commands.
>    http          - Changes to the `netsh http' context.
>    interface     - Changes to the `netsh interface' context.
>    ipsec         - Changes to the `netsh ipsec' context.
>    ipsecdosprotection - Changes to the `netsh ipsecdosprotection' context.
>    lan           - Changes to the `netsh lan' context.
>    namespace     - Changes to the `netsh namespace' context.
>    netio         - Changes to the `netsh netio' context.
>    offline       - Sets the current mode to offline.
>    online        - Sets the current mode to online.
>    popd          - Pops a context from the stack.
>    pushd         - Pushes current context on stack.
>    quit          - Exits the program.
>    ras           - Changes to the `netsh ras' context.
>    rpc           - Changes to the `netsh rpc' context.
>    set           - Updates configuration settings.
>    show          - Displays information.
>    trace         - Changes to the `netsh trace' context.
>    unalias       - Deletes an alias.
>    wfp           - Changes to the `netsh wfp' context.
>    winhttp       - Changes to the `netsh winhttp' context.
>    winsock       - Changes to the `netsh winsock' context.
>    
>    The following sub-contexts are available:
>     advfirewall branchcache bridge dhcpclient dnsclient firewall http interface ipsec ipsecdosprotection lan namespace netio ras rpc trace wfp winhttp winsock
>    
>    To view help for a command, type the command, followed by a space, and then type ?.
>    ```

### <a name="subcontexts"></a>Дочерние контексты

Контексты Netsh может содержать команды и новых контекстов, вызывается *подконтекстов*. Например в контексте маршрутизации, можно изменить для подконтекстов IP-адреса и IPv6.

Чтобы отобразить список команд и подчиненных контекстов, которые можно использовать в контексте, в командной строке netsh введите имя контекста и введите либо **/?** или **помочь**. Например, чтобы отобразить список подчиненных контекстов и команд, которые можно использовать в контексте маршрутизации, в командной строке netsh \(т.е **netsh&gt;** \), введите одно из следующих:

**Маршрутизация /?**

**маршрутизации справки**

Для выполнения задач в другом контексте без изменения текущего контекста, введите путь команды, которую вы хотите использовать в командной строке netsh. Например чтобы добавить интерфейс с именем «Подключение по локальной сети» в контексте IGMP без замены к контексту IGMP в командной строке netsh введите следующую команду:

**Маршрутизация igmp в IP-адрес добавить интерфейс startupqueryinterval «Подключение по локальной сети» = 21**

## <a name="running-netsh-commands"></a>Команды netsh

Чтобы выполнить команду netsh, необходимо запустить netsh из командной строки, введя **netsh** и нажмите клавишу ВВОД. Затем можно изменить на контекст, содержащий команду, которую вы хотите использовать. Контексты, доступные зависят от установленных сетевых компонентов. Например, если ввести **dhcp** в строке netsh и нажмите клавишу ВВОД, netsh изменяется на контекст сервера DHCP. Если у вас установлен DHCP, тем не менее, появится следующее сообщение:

**Не удалось найти следующую команду: dhcp.**

## <a name="formatting-legend"></a>Форматирование условных обозначений

Можно использовать следующие условные обозначения форматирования интерпретировать и использовать netsh правильный синтаксис команды, при выполнении команды в командной строке netsh или пакетного файла или скрипта.

- Текст в *курсив* — это данные, необходимо указать при вводе команды. Например, если команда имеет параметр с именем -*UserName*, необходимо ввести имя пользователя.
- Текст в **Полужирный** — это данные, необходимо ввести точно так, как при вводе команды.
- Текст, последующим многоточием \(... \) — это параметр, который может быть введен в командной строке несколько раз.
- Текст, который находится в квадратных скобках [&nbsp;] является необязательным элементом.
- Текст, который находится между фигурными скобками {&nbsp;} с вариантами, разделенная вертикальной линией предоставляет набор вариантов, из которых необходимо выбрать только один, такие как `{enable|disable}`.
- Текст, отформатированный шрифтом Courier выводится в код или программы.

## <a name="running-netsh-commands-from-the-command-prompt-or-windows-powershell"></a>Запуск Netsh из командной строки или Windows PowerShell

Чтобы начать Network Shell и введите netsh в командной строке или в Windows PowerShell, можно использовать следующую команду.

### <a name="netsh"></a>netsh

Netsh — это командной строки программа сценариев, которая позволяет локально или удаленно, отображать или изменять параметры сети текущего компьютера. При использовании без параметров, **netsh** открывает командную строку Netsh.exe \(т.е **netsh&gt;** \).

#### <a name="syntax"></a>Синтаксис

**Netsh** \[ **-** &nbsp;*Файл_псевдоним* \] \[ **- c** &nbsp;  *Контекст* \] \[ **- r**&nbsp;*Удаленный_компьютер* \] \[ **- u** \[ *DomainName\\*  \] *UserName* \] \[ **-p** &nbsp; *Пароль*  |  \* \] \[{*NetshCommand* |  **-f** &nbsp; *ScriptFile*}\]

#### <a name="parameters"></a>Параметры

**`-a`**

Необязательно. Указывает, что вы вернетесь к **netsh** запроса после выполнения команды *Файл_псевдоним*.

**`AliasFile`**

Необязательно. Указывает имя текстового файла, который содержит один или несколько **netsh** команды.

**`-c`**

Необязательно. Указывает, что netsh попадают в указанный **netsh** контекста.

**`Context`**

Необязательно. Указывает **netsh** контекст, который вы хотите ввести. 

**`-r`**

Необязательно. Задает команду для запуска на удаленном компьютере.

> [!IMPORTANT]
> При использовании некоторых команд netsh удаленно на другом компьютере с **netsh – r** параметр, служба удаленного реестра должна быть запущена на удаленном компьютере. Если он не запущен, Windows отображает сообщение об ошибке «Не найден сетевой путь».

***`RemoteComputer`***

Необязательно. Указывает удаленного компьютера, который требуется настроить.

**`-u`**

Необязательно. Указывает, что вы хотите запустить команду netsh учетной записи пользователя.

***`DomainName\\`***

Необязательно. Указывает домен, где находится учетная запись пользователя. Значение по умолчанию является локальным доменом, если *DomainName\\*  не указан.

***`UserName`***

Необязательно. Указывает имя учетной записи пользователя.

**`-p`**

Необязательный. Указывает, что вы хотите указать пароль для учетной записи пользователя.

***`Password`***

Необязательно. Указывает пароль для учетной записи пользователя, заданной параметром **-u** *UserName*.

***`NetshCommand`***

Необязательно. Указывает **netsh** команду, которая будет выполняться.

**`-f`**

Необязательно. Завершает работу **netsh** после выполнения сценария, который можно назначить с помощью *ScriptFile*.

***`ScriptFile`***

Необязательный. Указывает сценарий, который вы хотите запустить.

**`/?`**

Необязательно. Отображает справку в командной строке netsh.

> [!NOTE]
> Если указать **`-r`** после другой команды **netsh** запускает команду на удаленном компьютере и возвращается в командную строку Cmd.exe. Если указать **`-r`** без другой команды, **netsh** откроется в удаленном режиме. Процесс аналогичен использованию **набора машины** командной строки Netsh. При использовании **`-r`** , задать целевой компьютер для текущего экземпляра **netsh** только. После выхода и повторного ввода **netsh**, сбрасывается конечного компьютера, что и локальный компьютер. Можно запустить **netsh** команд на удаленном компьютере, указав компьютера имя хранимой в WINS, UNC-имя, имя должно быть разрешено DNS-сервера или IP-адресом в Интернете.

**Ввести значения параметров строки для команды netsh**

На протяжении всего руководства по командам Netsh используются команды, содержащие параметры, для которых необходима строковое значение.

В случае, когда строковое значение содержит пробелы между символов, таких как строковые значения, которые состоят из нескольких слов, он необходим, заключите его строковое значение в кавычки. Например, параметр с именем **интерфейс** со строковым значением из **беспроводное сетевое подключение**, используйте строковое значение в кавычки:

**`interface="Wireless Network Connection"`**

