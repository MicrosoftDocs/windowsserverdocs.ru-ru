---
title: Синтаксис команд Netsh, контексты и форматирование
description: В этом разделе можно использовать, чтобы узнать, как ввод контекстах netsh и подчиненных контекстов, понять синтаксис netsh и команды форматирования и запуск команды netsh на локальных и удаленных компьютерах, работающих под управлением Windows Server 2016 или Windows 10.
ms.prod: windows-server-threshold
ms.technology: networking
ms.topic: article
ms.assetid: 8cb9b59f-0255-4261-b49a-562c5ea50ee0
manager: brianlic
ms.author: pashort
author: shortpatti
ms.openlocfilehash: c7c16674b831431ff5bb1d0172cc2b2a939008f6
ms.sourcegitcommit: 19d9da87d87c9eefbca7a3443d2b1df486b0b010
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2018
---
# <a name="netsh-command-syntax-contexts-and-formatting"></a>Синтаксис команд Netsh, контексты и форматирование

>Область применения: Windows Server (канал точками годовой), Windows Server 2016

В этом разделе можно использовать, чтобы узнать, как ввод контекстах netsh и подчиненных контекстов, понять синтаксис netsh и команды форматирования и запуск команды netsh на локальных и удаленных компьютерах.

Netsh — средство командной строки сценариев, которая позволяет отображать или изменять конфигурацию сети компьютера, который работает под управлением. Команды Netsh можно запустить, введя команды в командной строке netsh и их можно использовать в пакетные файлы или сценарии. Удаленных компьютеров и локального компьютера можно настроить с помощью команды netsh.

Netsh также обеспечивает возможность написания сценариев, которая позволяет выполнять группы команд в режиме партии на определенном компьютере. С помощью команды netsh можно сохранить сценарий настройки в текстовом файле для архивирования или упрощения конфигурации других компьютеров.

## <a name="netsh-contexts"></a>Контексты Netsh

Netsh взаимодействует с помощью других компонентов операционной системы с помощью связей dynamic\ библиотеки \(DLL\) файлов. 

Каждая Библиотека модуля поддержки предоставляет широкий набор функций под названием *контекста*, группу команд, относящиеся к сети сервера роль или компонент. Эти контексты расширяют функции netsh, предоставляя конфигурации и мониторинга поддержка один или несколько служб, служебных программ или протоколов. Например файл Dhcpmon.dll обеспечивает netsh с контекстом и набор команд, необходимых для настройки и управления DHCP-серверами.

### <a name="obtain-a-list-of-contexts"></a>Получение списка контекстов

Откройте командную строку или Windows PowerShell на компьютере под управлением Windows Server 2016 или Windows 10 можно получить список контекстов netsh. Введите команду **netsh** и нажмите клавишу ВВОД. Тип **/? **, и нажмите клавишу ВВОД.

Ниже приведен пример выходных данных для этих команд на компьютере под управлением Windows Server 2016 Datacenter.

    PS C:\Windows\system32> netsh
    netsh>/?
    
    The following commands are available:
    
    Commands in this context:
    ..            - Goes up one context level.
    ?             - Displays a list of commands.
    abort         - Discards changes made while in offline mode.
    add           - Adds a configuration entry to a list of entries.
    advfirewall   - Changes to the `netsh advfirewall' context.
    alias         - Adds an alias.
    branchcache   - Changes to the `netsh branchcache' context.
    bridge        - Changes to the `netsh bridge' context.
    bye           - Exits the program.
    commit        - Commits changes made while in offline mode.
    delete        - Deletes a configuration entry from a list of entries.
    dhcpclient    - Changes to the `netsh dhcpclient' context.
    dnsclient     - Changes to the `netsh dnsclient' context.
    dump          - Displays a configuration script.
    exec          - Runs a script file.
    exit          - Exits the program.
    firewall      - Changes to the `netsh firewall' context.
    help          - Displays a list of commands.
    http          - Changes to the `netsh http' context.
    interface     - Changes to the `netsh interface' context.
    ipsec         - Changes to the `netsh ipsec' context.
    ipsecdosprotection - Changes to the `netsh ipsecdosprotection' context.
    lan           - Changes to the `netsh lan' context.
    namespace     - Changes to the `netsh namespace' context.
    netio         - Changes to the `netsh netio' context.
    offline       - Sets the current mode to offline.
    online        - Sets the current mode to online.
    popd          - Pops a context from the stack.
    pushd         - Pushes current context on stack.
    quit          - Exits the program.
    ras           - Changes to the `netsh ras' context.
    rpc           - Changes to the `netsh rpc' context.
    set           - Updates configuration settings.
    show          - Displays information.
    trace         - Changes to the `netsh trace' context.
    unalias       - Deletes an alias.
    wfp           - Changes to the `netsh wfp' context.
    winhttp       - Changes to the `netsh winhttp' context.
    winsock       - Changes to the `netsh winsock' context.
    
    The following sub-contexts are available:
     advfirewall branchcache bridge dhcpclient dnsclient firewall http interface ipsec ipsecdosprotection lan namespace netio ras rpc trace wfp winhttp winsock
    
    To view help for a command, type the command, followed by a space, and then
     type ?.


### <a name="subcontexts"></a>Дочерние контексты

Контексты Netsh могут содержать команды и дополнительные контексты, называемый *подчиненных контекстов*. Например в контексте маршрутизации можно изменить для подчиненных контекстов IP- и IPv6.

Чтобы отобразить список команд и подчиненных контекстов, которые можно использовать в контексте, в командной строке netsh введите имя контекста, а затем введите либо **/?** или **помочь**. Например, чтобы отобразить список подчиненных контекстов и команд, которые можно использовать в контексте маршрутизации, в командной строке netsh \ (то есть **netsh&gt;**\), введите одну из следующих действий:

**Маршрутизация /?**

**Справка маршрутизации**

Для выполнения задач в другом контексте без изменения из текущего контекста, введите путь команды, которую вы хотите использовать в командной строке netsh. Например чтобы добавить интерфейс с именем «Подключение по локальной сети» в контексте IGMP без замены к контексту IGMP, в командной строке netsh введите:

**Маршрутизация ip igmp добавить startupqueryinterval интерфейса «Подключение по локальной сети» = 21**

## <a name="running-netsh-commands"></a>Команды netsh

Чтобы выполнить команду netsh, необходимо запустить netsh из командной строки, введя **netsh** и нажмите клавишу ВВОД. Затем можно изменить контекст, который содержит команду, которую вы хотите использовать. Доступных контексты зависят от сетевыми компонентами, которые вы установили. Например, если ввести **dhcp** netsh строке и нажмите клавишу ВВОД, netsh изменяется на контекст сервера DHCP. Если у вас установлен DHCP, тем не менее, появится следующее сообщение:

**Не удалось найти следующую команду: dhcp.**

## <a name="formatting-legend"></a>Условные обозначения форматирования

Можно использовать следующие условные обозначения форматирования интерпретировать и использовать синтаксис команды netsh правильный при выполнении команды в командной строке netsh или пакетный файл или сценарий.

- Текст в *курсив* — это сведения, необходимо указать при вводе команды. Например, если команда содержит параметр с именем -*UserName*, необходимо ввести имя пользователя.
- Текст в **Полужирный** — это сведения, необходимо ввести точно так, как при вводе команды.
- Текст следуют \(...\) с многоточием — это параметр, который может быть введен в командной строке несколько раз.
- Текст, содержащийся в квадратных скобках [&nbsp;] — это необязательный элемент.
- Текст, расположенный между фигурные скобки {&nbsp;} с варианты выбора, разделенные вертикальной содержит набор вариантов, из которых необходимо выбрать только один ресурс, такие как `{enable|disable}`.
- Текст, отформатированный с использованием шрифт Courier является программа или выходные данные.

## <a name="running-netsh-commands-from-the-command-prompt-or-windows-powershell"></a>Запуск Netsh из командной строки или Windows PowerShell

Чтобы запустить сетевой оболочки и введите netsh в командной строке или в Windows PowerShell, можно использовать следующую команду.

### <a name="netsh"></a>Netsh

Netsh — средство командной строки сценариев, которая позволяет локально или удаленно, отображать или изменять конфигурацию сети компьютера, запущенные в настоящий момент. При использовании без параметров, **netsh** открывает командную строку Netsh.exe \ (то есть **netsh&gt;**\).

#### <a name="syntax"></a>Синтаксис

**netsh**\[ **-a**&nbsp;*AliasFile*\] \[ **-c**&nbsp;*Context* \] \[**-r**&nbsp;*RemoteComputer*\] \[ **-u** \[ *DomainName\\* \] *UserName* \] \[ **-p**&nbsp;*Password* | \*\] \[{*NetshCommand* | **-f**&nbsp;*ScriptFile*}\]

#### <a name="parameters"></a>Параметры

**`-a`**

Необязательно. Указывает, что вы вернетесь на **netsh** запрос после выполнения *Файл_псевдоним*.

**`AliasFile`**

Необязательно. Указывает имя текстового файла, который содержит один или несколько **netsh** команды.

**`-c`**

Необязательно. Указывает, что netsh вводит указанного **netsh** контекста.

**`Context`**

Необязательно. Указывает **netsh** контекст, который вы хотите ввести. 

**`-r`**

Необязательно. Указывает, что требуется выполнение команды на удаленном компьютере.

>[!IMPORTANT]
>При использовании некоторых команд netsh удаленно с другого компьютера **netsh – r** параметр, служба удаленного управления реестром должен работать под управлением на удаленном компьютере. Если он не работает, Windows выводит сообщение об ошибке «Не найден сетевой путь».

***`RemoteComputer`***

Необязательно. Задает удаленного компьютера, который вы хотите настроить.

**`-u`**

Необязательно. Указывает, следует выполнить команду netsh под учетной записью пользователя.

***`DomainName\\`***

Необязательно. Указывает домен, где находится учетная запись пользователя. По умолчанию используется локальный домен, если *DomainName\\* не указан.

***`UserName`***

Необязательно. Указывает имя учетной записи пользователя.

**`-p`**

Необязательно. Указывает, что требуется указать пароль для учетной записи пользователя.

***`Password`***

Необязательно. Задает пароль для учетной записи пользователя, который указан с **-u** *UserName*.

***`NetshCommand`***

Необязательно. Указывает **netsh** команды, который требуется запустить.

**`-f`**

Необязательно. Выход из **netsh** после выполнения сценария, который можно назначить с *файл сценария*.

***`ScriptFile`***

Необязательно. Указывает сценарий, который требуется запустить.

**`/?`**

Необязательно. Отображение справки в командной строке netsh.

>[!NOTE]
>При указании ** `-r` ** после другой команды **netsh** выполняет команду на удаленном компьютере и возвращается в окно командной строки Cmd.exe. При указании ** `-r` ** без другой команды **netsh** откроется в удаленном режиме. Процесс аналогичен с помощью **машины набор** командной строки Netsh. При использовании ** `-r` **, установите целевой компьютер для текущего экземпляра **netsh** только. После выхода и повторного ввода **netsh**, сброс конечного компьютера в качестве локального компьютера. Можно запустить **netsh** команды на удаленном компьютере, указав компьютер имя хранится в WINS, UNC-имя, имя в Интернете для разрешения DNS-сервера или IP-адрес.

**Введите строку значения параметров для команды netsh**

На протяжении всего Справочник по командам Netsh существует команды, которые содержат параметры, для которых требуется строковое значение.

В случае, когда строковое значение содержит пробелы между символы, такие как строковые значения, которые состоят из нескольких слов это необходимо заключить строковое значение в кавычки. Например, параметр с именем **интерфейса** с строковое значение **беспроводное сетевое подключение**, используйте строковое значение в кавычки:

**`interface="Wireless Network Connection"`**

