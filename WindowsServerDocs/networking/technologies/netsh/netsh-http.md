---
title: Команды Netsh для протокола HTTP
description: netsh http можно использовать для запроса и настройки параметров HTTP.sys.
ms.prod: windows-server
ms.technology: networking
ms.topic: article
manager: dougkim
ms.author: lizross
author: eross-msft
ms.openlocfilehash: 81053e71040d2a0cd125af9fb7f3802dfd535781
ms.sourcegitcommit: 3a3d62f938322849f81ee9ec01186b3e7ab90fe0
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2020
ms.locfileid: "80853757"
---
# <a name="netsh-http-commands"></a>Команды HTTP для Netsh


**netsh http** можно использовать для запроса и настройки параметров HTTP.sys.  

>[!TIP]
>Если вы используете Windows PowerShell на компьютере под управлением Windows Server 2016 или Windows 10, введите **netsh** в PowerShell и нажмите клавишу ВВОД. В командной строке Netsh введите **http** и нажмите клавишу ВВОД, чтобы получить командную строку для HTTP.
>
>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;netsh http\>

Доступные команды Netsh для протокола HTTP:

- [add iplisten](#add-iplisten)
- [add sslcert](#add-sslcert)
- [add timeout](#add-timeout)
- [add urlacl](#add-urlacl)
- [delete cache](#delete-cache)
- [delete iplisten](#delete-iplisten)
- [delete sslcert](#delete-sslcert)
- [delete timeout](#delete-timeout)
- [delete urlacl](#delete-urlacl)
- [flush logbuffer](#flush-logbuffer)
- [show cachestate](#show-cachestate)
- [show iplisten](#show-iplisten)
- [show servicestate](#show-servicestate)
- [show sslcert](#show-sslcert)
- [show timeout](#show-timeout)
- [show urlacl](#show-urlacl)

## <a name="add-iplisten"></a>add iplisten

Добавляет новый IP-адрес в список прослушивания IP-адресов, исключая номер порта.

**Синтаксис**

```powershell
add iplisten [ ipaddress= ] IPAddress
```

**Параметры**

|               |                                                                                                                                                                                                                          |          |
|---------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------|
| **ipaddress** | IPv4- или IPv6-адрес, добавляемый в список прослушивания IP-адресов. Список прослушивания IP-адресов используется для определения области списка адресов, к которым привязывается служба HTTP. "0.0.0.0" означает любой IPv4-адрес, а "::" — любой IPv6-адрес. | Обязательный |

---

**Примеры**

Ниже приведены четыре примера команды **add iplisten**.

-   add iplisten ipaddress=fe80::1
-   add iplisten ipaddress=1.1.1.1
-   add iplisten ipaddress=0.0.0.0
-   add iplisten ipaddress=::

---

## <a name="add-sslcert"></a>add sslcert

Добавляет новую привязку SSL-сертификата сервера и соответствующие политики клиентских сертификатов для IP-адреса и порта.

**Синтаксис**

```powershell
add sslcert [ ipport= ] IPAddress:port [ certhash= ] CertHash [ appid= ] GUID [ [ certstorename= ] CertStoreName [ verifyclientcertrevocation= ] enable | disable [verifyrevocationwithcachedclientcertonly= ] enable | disable [ usagecheck= ] enable | disable [ revocationfreshnesstime= ] U-Int [ urlretrievaltimeout= ] U-Int [sslctlidentifier= ] SSLCTIdentifier [ sslctlstorename= ] SLCtStoreName [ dsmapperusage= ] enable | disable [ clientcertnegotiation= ] enable | disable ] ]
```

**Параметры**


|                                              |                                                                                                                                                                                          |          |
|----------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------|
|                  **ipport**                  |                       Указывает IP-адрес и порт для привязки. Знак двоеточия (":") используется в качестве разделителя IP-адреса и номера порта.                        | Обязательный |
|                 **certhash**                 |                                     Указывает хэш SHA сертификата. Длина этого хэша — 20 байт, и он задается в виде шестнадцатеричной строки.                                      | Обязательный |
|                  **appid**                   |                                                                  Указывает GUID для обозначения приложения-владельца.                                                                  | Обязательный |
|              **certstorename**               |                                  Указывает имя для хранения сертификата. По умолчанию — MY. Сертификат должен храниться в контексте локального компьютера.                                  | Необязательный |
|        **verifyclientcertrevocation**        |                                                      Указывает, включена или отключена проверка отзыва сертификатов клиента.                                                       | Необязательный |
| **verifyrevocationwithcachedclientcertonly** |                                      Указывает, включена или отключена возможность использовать только кэшированный сертификат клиента для проверки отзыва.                                       | Необязательный |
|                **usagecheck**                |                                                      Указывает, включена или отключена проверка использования. По умолчанию она включена.                                                       | Необязательный |
|         **revocationfreshnesstime**          | Указывает интервал времени (в секундах) для проверки обновления списка отзыва сертификатов. Если это значение равно нулю, новый список отзыва сертификатов обновляется только в случае истечения срока действия предыдущего. | Необязательный |
|           **urlretrievaltimeout**            |                            Указывает интервал времени ожидания (в миллисекундах) после попытки получить список отзыва сертификатов для удаленного URL-адреса.                            | Необязательный |
|             **sslctlidentifier**             |                Указывает список издателей сертификатов, которые могут быть доверенными. Этот список может быть подмножеством издателей сертификатов, которые являются доверенными для компьютера.                 | Необязательный |
|             **sslctlstorename**              |                                                Указывает имя для хранения сертификата в LOCAL_MACHINE, где хранится SslCtlIdentifier.                                                | Необязательный |
|              **dsmapperusage**               |                                                        Указывает, включены или отключены модули сопоставления DS. По умолчанию они отключены.                                                         | Необязательный |
|          **clientcertnegotiation**           |                                              Указывает, включено или отключено согласование сертификата. По умолчанию оно отключено.                                               | Необязательный |

---

**Примеры**

Ниже приведен пример команды **add sslcert**.

add sslcert ipport=1.1.1.1:443 certhash=0102030405060708090A0B0C0D0E0F1011121314 appid={00112233-4455-6677-8899- AABBCCDDEEFF}

---

## <a name="add-timeout"></a>add timeout

Добавляет глобальное время ожидания в службу.

**Синтаксис** 

```powershell
add timeout [ timeouttype= ] IdleConnectionTimeout | HeaderWaitTimeout [ value=] U-Short
```

**Параметры**

|                 |                                                                                                     |
|-----------------|-----------------------------------------------------------------------------------------------------|
| **timeouttype** |                                    Тип времени ожидания для параметра.                                     |
|    **value**    | Значение времени ожидания (в секундах). Если значение указано в шестнадцатеричном формате, добавьте префикс 0x. |

---

**Примеры**

Ниже приведены два примера команды **add timeout**.

-   add timeout timeouttype=idleconnectiontimeout value=120
-   add timeout timeouttype=headerwaittimeout value=0x40

---

## <a name="add-urlacl"></a>add urlacl

Добавляет запись резервирования универсального указателя ресурсов (URL). Эта команда резервирует URL-адрес для пользователей и учетных записей без прав администратора. Список DACL можно указать с помощью имени учетной записи NT с параметрами listen и delegate либо с помощью строки SDDL.

**Синтаксис**

```powershell
add urlacl [ url= ] URL [ [user=] User [ [ listen= ] yes | no [ delegate= ] yes | no ] | [ sddl= ] SDDL ]
```

**Параметры**

|              |                                                                                                                                                  |          |
|--------------|--------------------------------------------------------------------------------------------------------------------------------------------------|----------|
|   **url**    |                                          Указывает полный URL-адрес.                                           | Обязательный |
|   **user**   |                                                      Указывает имя пользователя или группы пользователей.                                                       | Обязательный |
|  **listen**  | Указывает одно из следующих значений. yes — разрешает пользователю регистрировать URL-адреса. Это значение по умолчанию. no — запрещает пользователю регистрировать URL-адреса. | Необязательный |
| **delegate** |  Указывает одно из следующих значений. yes — разрешает пользователю делегировать URL-адреса. no — запрещает пользователю делегировать URL-адреса. Это значение по умолчанию.  | Необязательный |
|   **sddl**   |                                                Указывает строку SDDL, описывающую список DACL.                                                 | Необязательный |

---

**Примеры**

Ниже приведены четыре примера команды **add urlacl**.

- add urlacl url=https://+:80/MyUri user=DOMAIN\\ user
- add urlacl url=<https://www.contoso.com:80/MyUri> user=DOMAIN\\user listen=yes
- add urlacl url=<https://www.contoso.com:80/MyUri> user=DOMAIN\\user delegate=no
- add urlacl url=https://+:80/MyUri sddl=...

---

## <a name="delete-cache"></a>delete cache

Удаляет все записи или указанную запись из кэша URI ядра службы HTTP.

**Синтаксис**

```powershell
delete cache [ [ url= ] URL [ [recursive= ] yes | no ]
```

**Параметры**

|               |                                                                                                                              |          |
|---------------|------------------------------------------------------------------------------------------------------------------------------|----------|
|    **url**    |                    Указывает полный URL-адрес, который необходимо удалить.                     | Необязательный |
| **recursive** | Указывает, будут ли удалены все записи в кэше URL-адресов. **yes** — все записи будут удалены, **no** — записи не будут удалены. | Необязательный |

---

**Примеры**

Ниже приведены два примера команды **delete cache**.

- delete cache url=<https://www.contoso.com:80/myresource/> recursive=yes
- delete cache

---

## <a name="delete-iplisten"></a>delete iplisten

Удаляет IP-адрес из списка прослушиваемых IP-адресов. Список прослушивания IP-адресов используется для определения области списка адресов, к которым привязывается служба HTTP.

**Синтаксис**

```powershell
delete iplisten [ ipaddress= ] IPAddress
```

**Параметры**

|               |                                                                                                                                                                                                                                                                     |          |
|---------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------|
| **ipaddress** | IPv4- или IPv6-адрес, удаляемый из списка прослушивания IP-адресов. Список прослушивания IP-адресов используется для определения области списка адресов, к которым привязывается служба HTTP. "0.0.0.0" означает любой IPv4-адрес, а "::" — любой IPv6-адрес. Это не распространяется на номер порта. | Обязательный |

---


**Примеры**

Ниже приведены четыре примера команды **delete iplisten**.

-   delete iplisten ipaddress=fe80::1
-   delete iplisten ipaddress=1.1.1.1
-   delete iplisten ipaddress=0.0.0.0
-   delete iplisten ipaddress=::

---

## <a name="delete-sslcert"></a>delete sslcert


Удаляет привязки SSL-сертификата сервера и соответствующие политики сертификатов клиента для IP-адреса и порта.

**Синтаксис**

```powershell
delete sslcert [ ipport= ] IPAddress:port
```

**Параметры**

|            |                                                                                                                                                                                          |          |
|------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------|
| **ipport** | Указывает адрес или порт IPv4 или IPv6, для которого удаляются привязки SSL-сертификатов. Знак двоеточия (":") используется в качестве разделителя IP-адреса и номера порта. | Обязательный |

---


**Примеры**

Ниже приведены три примера команды **delete sslcert**.

- delete sslcert ipport=1.1.1.1:443
- delete sslcert ipport=0.0.0.0:443
- delete sslcert ipport=[::]:443

---

## <a name="delete-timeout"></a>delete timeout

Удаляет глобальное время ожидания и возвращает значения по умолчанию для службы.

**Синтаксис**

```powershell
delete timeout [ timeouttype= ] idleconnectiontimeout | headerwaittimeout
```

**Параметры**

|                 |                                        |          |
|-----------------|----------------------------------------|----------|
| **timeouttype** | Указывает тип параметра времени ожидания. | Обязательный |

---


**Примеры**

Ниже приведены два примера команды **delete timeout**.

-   delete timeout timeouttype=idleconnectiontimeout
-   delete timeout timeouttype=headerwaittimeout

---

## <a name="delete-urlacl"></a>delete urlacl

Удаляет резервирования URL-адресов.

**Синтаксис**

```powershell
delete urlacl [ url= ] URL
```

**Параметры**

|         |                                                                                       |          |
|---------|---------------------------------------------------------------------------------------|----------|
| **url** | Указывает полный URL-адрес, который необходимо удалить. | Обязательный |

---


**Примеры**

Ниже приведены два примера команды **delete urlacl**.

- delete urlacl url=https://+:80/MyUri
- delete urlacl url=<https://www.contoso.com:80/MyUri>

---

## <a name="flush-logbuffer"></a>flush logbuffer

Очищает внутренние буферы файлов журнала.

**Синтаксис**

```powershell
flush logbuffer
```

---

## <a name="show-cachestate"></a>show cachestate

Перечисляет кэшированные ресурсы URI и связанные с ними свойства. Эта команда перечисляет все ресурсы и связанные с ними свойства в кэше HTTP-ответов или показывает один ресурс и связанные с ним свойства.

**Синтаксис**

```powershell
show cachestate [ [url= ] URL]
```

**Параметры**

|         |                                                                                                                                                    |          |
|---------|----------------------------------------------------------------------------------------------------------------------------------------------------|----------|
| **url** | Указывает полный URL-адрес, который требуется показать. Если не указано, показывает все URL-адреса. Этот URL-адрес также может быть префиксом для зарегистрированных URL-адресов. | Необязательный |

---


**Примеры**

Ниже приведены два примера команды **show cachestate**.

- show cachestate url=<https://www.contoso.com:80/myresource>
- show cachestate

---

## <a name="show-iplisten"></a>show iplisten

Показывает все IP-адреса в списке прослушивания IP-адресов. Список прослушивания IP-адресов используется для определения области списка адресов, к которым привязывается служба HTTP. "0.0.0.0" означает любой IPv4-адрес, а "::" — любой IPv6-адрес.

**Синтаксис**

```powershell
show iplisten
```

---

## <a name="show-servicestate"></a>show servicestate

Показывает моментальный снимок службы HTTP.

**Синтаксис**
```powershell
show servicestate [ [ view= ] session | requestq ] [ [ verbose= ] yes | no ]
```

**Параметры**

|             |                                                                                                                      |          |
|-------------|----------------------------------------------------------------------------------------------------------------------|----------|
|  **Вид**   | Указывает, следует ли просматривать моментальный снимок состояния службы HTTP на основе сеанса сервера или очереди запросов. | Необязательный |
| **Verbose** |                Указывает, следует ли показывать подробные сведения, в которых также отображаются сведения о свойствах.                | Необязательный |

---

**Примеры**

Ниже приведены два примера команды **show servicestate**.

-   show servicestate view="session"
-   show servicestate view="requestq"

---

## <a name="show-sslcert"></a>show sslcert

Показывает привязки SSL-сертификата сервера и соответствующие политики сертификатов клиента для IP-адреса и порта.

**Синтаксис**

```powershell
show sslcert [ ipport= ] IPAddress:port
```

**Параметры**

|            |                                                                                                                                                                                                                                                |          |
|------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------|
| **ipport** | Указывает IPv4- или IPv6-адрес или порт, для которого отображаются привязки SSL-сертификатов. Знак двоеточия (":") используется в качестве разделителя IP-адреса и номера порта. Если не указан параметр ipport, отображаются все привязки. | Обязательный |

---


**Примеры**

Ниже приведены пять примеров команды **show sslcert**.

-   show sslcert ipport=[fe80::1]:443
-   show sslcert ipport=1.1.1.1:443
-   show sslcert ipport=0.0.0.0:443
-   show sslcert ipport=[::]:443
-   show sslcert

---

## <a name="show-timeout"></a>show timeout

Показывает значения времени ожидания службы HTTP в секундах.

**Синтаксис**

```powershell
show timeout
```

---

## <a name="show-urlacl"></a>show urlacl

Показывает списки управления доступом на уровне пользователей (DACL) для указанного зарезервированного URL-адреса или всех зарезервированных URL-адресов.

**Синтаксис**

```powershell
show urlacl [ [url= ] URL]
```

**Параметры**

|         |                                                                                                |          |
|---------|------------------------------------------------------------------------------------------------|----------|
| **url** | Указывает полный URL-адрес, который требуется показать. Если не указан, показывает все URL-адреса. | Необязательный |

---


**Примеры**

Ниже приведены три примера команды **show urlacl**.

- show urlacl url=https://+:80/MyUri
- show urlacl url=<https://www.contoso.com:80/MyUri>
- show urlacl

---