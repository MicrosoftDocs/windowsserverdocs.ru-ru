---
title: Команды Netsh для передачи протокол (HTTP)
description: Использование netsh http для запроса и настроить параметры HTTP.sys и параметры.
ms.prod: windows-server-threshold
ms.technology: networking
ms.topic: article
ms.assetid: ''
manager: dougkim
ms.author: pashort
author: shortpatti
ms.openlocfilehash: 3c5f3927abf1a2394c2dd5b8ea664c7de8d5f614
ms.sourcegitcommit: eaf071249b6eb6b1a758b38579a2d87710abfb54
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/31/2019
ms.locfileid: "66446191"
---
# <a name="netsh-http-commands"></a>Команды http для Netsh


Используйте **netsh http** запросов и настройки параметров и параметры HTTP.sys.  

>[!TIP]
>Если вы используете Windows PowerShell на компьютере под управлением Windows Server 2016 или Windows 10, введите **netsh** и нажмите клавишу ВВОД. В командной строке netsh введите **http** и нажмите клавишу ВВОД, чтобы получить строке netsh http.
>
>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Netsh http\>

Приведены доступные netsh HTTP-команды.

- [добавить iplisten](#add-iplisten)
- [add sslcert](#add-sslcert)
- [добавить время ожидания](#add-timeout)
- [добавить urlacl](#add-urlacl)
- [Удаление кэша](#delete-cache)
- [удалить iplisten](#delete-iplisten)
- [удалить sslcert](#delete-sslcert)
- [время ожидания удаления](#delete-timeout)
- [удалить urlacl](#delete-urlacl)
- [Очистить logbuffer](#flush-logbuffer)
- [Показать cachestate](#show-cachestate)
- [Показать iplisten](#show-iplisten)
- [Показать servicestate](#show-servicestate)
- [show sslcert](#show-sslcert)
- [Показать время ожидания](#show-timeout)
- [Показать urlacl](#show-urlacl)

## <a name="add-iplisten"></a>добавить iplisten

Добавляет новый IP-адрес в список прослушивания IP, за исключением номер порта.

**Синтаксис**

```powershell
add iplisten [ ipaddress= ] IPAddress
```

**Параметры**

|               |                                                                                                                                                                                                                          |          |
|---------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------|
| **IP-адрес** | Список прослушивания IPv4 или IPv6-адрес для добавления IP-адрес. Список прослушивания IP используется для определения области списка адресов, к которым привязывает службы HTTP. «0.0.0.0» означает любой IPv4-адрес и «::» означает любой IPv6-адрес. | Обязательно |

---

**Примеры**

Ниже приведены примеры **добавить iplisten** команды.

-   add iplisten ipaddress=fe80::1
-   Добавьте IP-адрес iplisten = 1.1.1.1
-   Добавление iplisten IP-адрес 0.0.0.0
-   add iplisten ipaddress=::

---

## <a name="add-sslcert"></a>добавить sslcert

Добавляет новый сертификат сервера SSL binding и соответствующие политики сертификата клиента для IP-адреса и порта.

**Синтаксис**

```powershell
add sslcert [ ipport= ] IPAddress:port [ certhash= ] CertHash [ appid= ] GUID [ [ certstorename= ] CertStoreName [ verifyclientcertrevocation= ] enable | disable [verifyrevocationwithcachedclientcertonly= ] enable | disable [ usagecheck= ] enable | disable [ revocationfreshnesstime= ] U-Int [ urlretrievaltimeout= ] U-Int [sslctlidentifier= ] SSLCTIdentifier [ sslctlstorename= ] SLCtStoreName [ dsmapperusage= ] enable | disable [ clientcertnegotiation= ] enable | disable ] ]
```

**Параметры**


|                                              |                                                                                                                                                                                          |          |
|----------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------|
|                  **ipport**                  |                       Указывает IP-адрес и порт для привязки. Двоеточие (:) используется как разделитель между IP-адрес и номер порта.                        | Обязательно |
|                 **CertHash**                 |                                     Задает хэш SHA сертификата. Этот хэш полная длина 20 байт и сохраняется в виде шестнадцатеричной строки.                                      | Обязательно |
|                  **Идентификатор приложения**                   |                                                                  Указывает идентификатор GUID для идентификации приложения-владельца.                                                                  | Обязательно |
|              **certstorename**               |                                  Задает имя хранилища для сертификата. По умолчанию-MY. Сертификат должен храниться в контексте локального компьютера.                                  | Необязательный |
|        **verifyclientcertrevocation**        |                                                      Указывает, включает или выключает проверку отзыва сертификатов клиента.                                                       | Необязательный |
| **verifyrevocationwithcachedclientcertonly** |                                      Указывает, включена ли использование только кэшированного сертификата клиента для проверки отзыва.                                       | Необязательный |
|                **usagecheck**                |                                                      Указывает, включена ли проверка использования. По умолчанию включена.                                                       | Необязательный |
|         **revocationfreshnesstime**          | Задает интервал времени в секундах, чтобы проверить обновленный сертификат список отзыва (CRL). Если это значение равно нулю, новый список отзыва Сертификатов обновляется только в том случае, если предыдущий истечения срока действия. | Необязательный |
|           **urlretrievaltimeout**            |                            Указывает интервал времени ожидания (в миллисекундах) после попытки получить список отзыва сертификатов для удаленного URL-адрес.                            | Необязательный |
|             **SslCtlIdentifier**             |                Указывает список издателей сертификатов, которым можно доверять. Этот список может быть подмножеством издателей сертификатов, которые являются доверенными для компьютера.                 | Необязательный |
|             **SslCtlStoreName**              |                                                Указывает имя хранилища сертификатов, в которой хранится SslCtlIdentifier LOCAL_MACHINE.                                                | Необязательный |
|              **dsmapperusage**               |                                                        Указывает, включена ли модулей сопоставления доменных служб Active Directory. По умолчанию отключено.                                                         | Необязательный |
|          **clientcertnegotiation**           |                                              Указывает, включена ли согласование сертификата. По умолчанию отключено.                                               | Необязательный |

---

**Примеры**

Ниже приведен пример **добавить sslcert** команды.

add sslcert ipport=1.1.1.1:443 certhash=0102030405060708090A0B0C0D0E0F1011121314 appid={00112233-4455-6677-8899- AABBCCDDEEFF}

---

## <a name="add-timeout"></a>добавить время ожидания

Добавляет глобальное время ожидания службы.

**Синтаксис** 

```powershell
add timeout [ timeouttype= ] IdleConnectionTimeout | HeaderWaitTimeout [ value=] U-Short
```

**Параметры**

|                 |                                                                                                     |
|-----------------|-----------------------------------------------------------------------------------------------------|
| **timeouttype** |                                    Тип времени ожидания для параметра.                                     |
|    **Значение**    | Значение времени ожидания (в секундах). Если значение в шестнадцатеричном виде, затем добавьте префикс 0 x. |

---

**Примеры**

Ниже приведены два примера **добавить время ожидания** команды.

-   add timeout timeouttype=idleconnectiontimeout value=120
-   add timeout timeouttype=headerwaittimeout value=0x40

---

## <a name="add-urlacl"></a>добавить urlacl

Добавляет запись резервирования унифицированный указатель ресурса (URL). Эта команда резервирует URL-адреса для учетных записей и пользователей без прав администратора. Список DACL можно указать с помощью имени учетной записи NT с параметрами прослушивания и делегата, или с помощью строки SDDL.

**Синтаксис**

```powershell
add urlacl [ url= ] URL [ [user=] User [ [ listen= ] yes | no [ delegate= ] yes | no ] | [ sddl= ] SDDL ]
```

**Параметры**

|              |                                                                                                                                                  |          |
|--------------|--------------------------------------------------------------------------------------------------------------------------------------------------|----------|
|   **URL-адрес**    |                                          Указывает полного имени унифицированный указатель ресурса (URL).                                           | Обязательно |
|   **Пользователь**   |                                                      Задает имя пользователя или группы пользователей                                                       | Обязательно |
|  **Ожидать передачи данных**  | Указывает один из следующих значений: Да: Разрешает пользователю зарегистрировать URL-адреса. Это значение по умолчанию. Нет: Запретите пользователям регистрации URL-адреса. | Необязательный |
| **Делегат** |  Указывает один из следующих значений: Да: Разрешить пользователю не делегировать URL-адреса: Запретите пользователям делегирование URL-адреса. Это значение по умолчанию.  | Необязательный |
|   **SDDL**   |                                                Задает строку SDDL, который описывает список DACL.                                                 | Необязательный |

---

**Примеры**

Ниже приведены примеры **добавить urlacl** команды.

- Добавление urlacl url =https://+:80/MyUri пользователя = DOMAIN\\пользователя
- Добавление urlacl url =<https://www.contoso.com:80/MyUri> пользователя = DOMAIN\\прослушивания пользователя = yes
- Добавление urlacl url =<https://www.contoso.com:80/MyUri> пользователя = DOMAIN\\пользовательский делегат = нет
- Добавление urlacl url =https://+:80/MyUri sddl =...

---

## <a name="delete-cache"></a>Удаление кэша

Удаляет все записи, или указанную запись из кэша URI ядра службы HTTP.

**Синтаксис**

```powershell
delete cache [ [ url= ] URL [ [recursive= ] yes | no ]
```

**Параметры**

|               |                                                                                                                              |          |
|---------------|------------------------------------------------------------------------------------------------------------------------------|----------|
|    **URL-адрес**    |                    Указывает полного имени унифицированный указатель ресурса (URL), необходимо будет удалить.                     | Необязательный |
| **Рекурсивные** | Указывает, удаляются ли все записи в кэш URL-адрес. **Да**: удалить все записи **не**: не удаляйте все записи | Необязательный |

---

**Примеры**

Ниже приведены два примера **удалить кэш** команды.

- delete cache url=<https://www.contoso.com:80/myresource/> recursive=yes
- Удаление кэша

---

## <a name="delete-iplisten"></a>удалить iplisten

Удаляет IP-адрес в списке прослушивания IP-адрес. Список прослушивания IP используется для определения области списка адресов, к которым привязывает службы HTTP.

**Синтаксис**

```powershell
delete iplisten [ ipaddress= ] IPAddress
```

**Параметры**

|               |                                                                                                                                                                                                                                                                     |          |
|---------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------|
| **IP-адрес** | Список прослушивания адрес IPv4 или IPv6, должна быть удалена из IP-адрес. Список прослушивания IP используется для определения области списка адресов, к которым привязывает службы HTTP. «0.0.0.0» означает любой IPv4-адрес и «::» означает любой IPv6-адрес. Это не включает номер порта. | Обязательно |

---


**Примеры**

Ниже приведены примеры **удалить iplisten** команды.

-   delete iplisten ipaddress=fe80::1
-   удалить iplisten ipaddress = 1.1.1.1
-   удалить iplisten IP-адрес 0.0.0.0
-   delete iplisten ipaddress=::

---

## <a name="delete-sslcert"></a>удалить sslcert


Удаляет сертификат сервера SSL-привязки и соответствующие политики сертификата клиента для IP-адреса и порта.

**Синтаксис**

```powershell
delete sslcert [ ipport= ] IPAddress:port
```

**Параметры**

|            |                                                                                                                                                                                          |          |
|------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------|
| **ipport** | Указывает IPv4 или IPv6-адрес и порт, для которого удаляются привязок SSL-сертификатов. Двоеточие (:) используется как разделитель между IP-адрес и номер порта. | Обязательно |

---


**Примеры**

Ниже приведены три примера **удалить sslcert** команды.

- delete sslcert ipport=1.1.1.1:443
- delete sslcert ipport=0.0.0.0:443
- delete sslcert ipport=[::]:443

---

## <a name="delete-timeout"></a>время ожидания удаления

Удаляет глобальное время ожидания и делает ее восстановить значения по умолчанию.

**Синтаксис**

```powershell
delete timeout [ timeouttype= ] idleconnectiontimeout | headerwaittimeout
```

**Параметры**

|                 |                                        |          |
|-----------------|----------------------------------------|----------|
| **timeouttype** | Указывает тип параметра времени ожидания. | Обязательно |

---


**Примеры**

Ниже приведены два примера **удалить время ожидания** команды.

-   delete timeout timeouttype=idleconnectiontimeout
-   delete timeout timeouttype=headerwaittimeout

---

## <a name="delete-urlacl"></a>удалить urlacl

Удаление резервирования URL-адресов.

**Синтаксис**

```powershell
delete urlacl [ url= ] URL
```

**Параметры**

|         |                                                                                       |          |
|---------|---------------------------------------------------------------------------------------|----------|
| **URL-адрес** | Указывает полного имени унифицированный указатель ресурса (URL), необходимо будет удалить. | Обязательно |

---


**Примеры**

Ниже приведены два примера **удалить urlacl** команды.

- delete urlacl url=https://+:80/MyUri
- delete urlacl url=<https://www.contoso.com:80/MyUri>

---

## <a name="flush-logbuffer"></a>Очистить logbuffer

Удаляет внутренние буферы для файлов журналов.

**Синтаксис**

```powershell
flush logbuffer
```

---

## <a name="show-cachestate"></a>Показать cachestate

Отображает кэшированные ресурсы URI и связанные с ними свойства. Эта команда выводит список всех ресурсов и связанные с ними свойства, которые кэшируются в кэше ответа HTTP, или отображает один ресурс и связанные свойства.

**Синтаксис**

```powershell
show cachestate [ [url= ] URL]
```

**Параметры**

|         |                                                                                                                                                    |          |
|---------|----------------------------------------------------------------------------------------------------------------------------------------------------|----------|
| **URL-адрес** | Указывает полный URL-адрес, который вы хотите отобразить. Если не указано, отображаются все URL-адреса. URL-адрес также может быть префикса к зарегистрированным URL-адресам. | Необязательный |

---


**Примеры**

Ниже приведены два примера **Показать cachestate** команды:

- show cachestate url=<https://www.contoso.com:80/myresource>
- Показать cachestate

---

## <a name="show-iplisten"></a>Показать iplisten

Отображает все IP-адреса в списке прослушивания IP-адрес. Список прослушивания IP используется для определения области списка адресов, к которым привязывает службы HTTP. «0.0.0.0» означает любой IPv4-адрес и «::» означает любой IPv6-адрес.

**Синтаксис**

```powershell
show iplisten
```

---

## <a name="show-servicestate"></a>Показать servicestate

Отображает моментальный снимок службы HTTP.

**Синтаксис**
```powershell
show servicestate [ [ view= ] session | requestq ] [ [ verbose= ] yes | no ]
```

**Параметры**

|             |                                                                                                                      |          |
|-------------|----------------------------------------------------------------------------------------------------------------------|----------|
|  **Вид**   | Указывает, нужно ли просмотреть моментальный снимок состояния службы HTTP, основываясь на сеанс сервера или на очереди запросов. | Необязательный |
| **Verbose** |                Указывает, следует ли отображать подробные сведения о которой также показаны сведения о свойстве.                | Необязательный |

---

**Примеры**

Ниже приведены два примера **Показать servicestate** команды.

-   show servicestate view="session"
-   show servicestate view="requestq"

---

## <a name="show-sslcert"></a>Показать sslcert

Отображает привязки к сертификату сервера Secure Sockets Layer (SSL) и соответствующие политики сертификата клиента для IP-адреса и порта.

**Синтаксис**

```powershell
show sslcert [ ipport= ] IPAddress:port
```

**Параметры**

|            |                                                                                                                                                                                                                                                |          |
|------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------|
| **ipport** | Указывает IPv4 или IPv6-адрес и порт, для которого SSL-сертификат отображения привязки. Двоеточие (:) используется как разделитель между IP-адрес и номер порта. Если вы не укажете ipport, отображаются все привязки. | Обязательно |

---


**Примеры**

Ниже приведены пять примеры **Показать sslcert** команды.

-   show sslcert ipport=[fe80::1]:443
-   show sslcert ipport=1.1.1.1:443
-   show sslcert ipport=0.0.0.0:443
-   show sslcert ipport=[::]:443
-   Показать sslcert

---

## <a name="show-timeout"></a>Показать время ожидания

Отображает, в секундах, значения времени ожидания службы HTTP.

**Синтаксис**

```powershell
show timeout
```

---

## <a name="show-urlacl"></a>Показать urlacl

(DACL) списки управления доступом на уровне пользователей отображает для указанного зарезервированный URL-адрес или всех зарезервированных URL-адресов.

**Синтаксис**

```powershell
show urlacl [ [url= ] URL]
```

**Параметры**

|         |                                                                                                |          |
|---------|------------------------------------------------------------------------------------------------|----------|
| **URL-адрес** | Указывает полный URL-адрес, который вы хотите отобразить. Если приложению не отображает все URL-адреса. | Необязательный |

---


**Примеры**

Ниже приведены три примера **Показать urlacl** команды.

- show urlacl url=https://+:80/MyUri
- show urlacl url=<https://www.contoso.com:80/MyUri>
- Показать urlacl

---