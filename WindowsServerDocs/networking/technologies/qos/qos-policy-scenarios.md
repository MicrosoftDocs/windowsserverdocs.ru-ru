---
title: Сценарии политик качества обслуживания
description: Этот раздел содержит сценарии политики качества обслуживания (QoS), которые демонстрируют использование групповой политики для приоритезации сетевого трафика из определенных приложений и служб в Windows Server 2016.
ms.prod: windows-server-threshold
ms.technology: networking
ms.topic: article
ms.assetid: c4306f06-a117-4f65-b78b-9fd0d1133f95
manager: brianlic
ms.author: pashort
author: shortpatti
ms.openlocfilehash: 2a24ce3213b1aa1c66a438d278f7499b6d53bf6e
ms.sourcegitcommit: 0d0b32c8986ba7db9536e0b8648d4ddf9b03e452
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/17/2019
ms.locfileid: "59834355"
---
# <a name="qos-policy-scenarios"></a>Сценарии политик качества обслуживания

>Относится к: Windows Server (полугодовой канал), Windows Server 2016

В этом разделе можно использовать для проверки гипотетических сценариев, демонстрирующие как это сделать, когда и почему следует использовать политики качества обслуживания.

Ниже приведены два сценария, в этом разделе.

1. Приоритезации сетевого трафика для бизнес-приложения
2. Приоритезации сетевого трафика для приложения сервера HTTP

>[!NOTE]
>Некоторые разделы в этом разделе содержат общие шаги, которые можно предпринять для выполнения описанных действий. Более подробные инструкции по управлению политику качества обслуживания, см. в разделе [управление политику качества обслуживания](qos-policy-manage.md).

## <a name="scenario-1-prioritize-network-traffic-for-a-line-of-business-application"></a>Сценарий 1. Приоритезации сетевого трафика для бизнес-приложения

В этом случае ИТ-отдел имеет несколько целей, их можно сделать, используя политику качества обслуживания.

- Обеспечить лучшую производительность сети для критически важных\-критически важных приложений.
- Обеспечить лучшую производительность сети для ключа набор пользователей, хотя они используют конкретного приложения.
- Убедитесь, что компания\-данных на уровне всей резервной копии приложения не влияет на производительность сети с помощью слишком много пропускной способности за один раз.

ИТ-отдел принимает решение для настройки политики качества обслуживания для определения приоритетов определенных приложений с помощью точки кода службы дифференциации \(DSCP\) значения для классификации сетевого трафика, а также настроить свои маршруты для предоставления предпочтительную представление выше приоритета трафика. 

>[!NOTE]
>Дополнительные сведения о DSCP, см. в разделе **определения качества обслуживания на уровне приоритета через дифференцированного Services Code Point** в разделе [политики качества обслуживания (QoS)](qos-policy-top.md).

Помимо значения DSCP политики качества обслуживания можно указать ограничение скорости. Регулирование действует ограничение весь исходящий трафик, скорость отправки совпадений политики QoS к определенной.

### <a name="qos-policy-configuration"></a>Конфигурация политики QoS

С помощью трех отдельных целей для выполнения задачи ИТ-администратор решает создать три разных политик качества обслуживания.

#### <a name="qos-policy-for-lob-app-servers"></a>Политики качества обслуживания для серверов приложений бизнес-ПРИЛОЖЕНИЙ

Первый критически\-критическую ошибку приложения, для которого ИТ-отделом политику качества обслуживания — это компания\-широкий планирования ресурсов предприятия \(ERP\) приложения. ERP-приложение размещается на нескольких компьютерах, которые все под управлением Windows Server 2016. В доменных службах Active Directory, эти компьютеры являются членами подразделения \(Подразделение\) , созданный для бизнес- \(LOB\) серверов приложений. Клиент\-компоненты для ERP-приложение устанавливается на компьютерах, работающих под управлением Windows 10 и Windows 8.1.

В групповой политике ИТ-администратор выбирает объект групповой политики \(GPO\) после которой будет применена политика качества обслуживания. С помощью мастера политики QoS, ИТ-администратор создает политику качества обслуживания, который называется «сервера LOB политики», указывающий высокой\-приоритета значение DSCP 44 для всех приложений, любой IP-адрес, TCP и UDP и номер порта.

Политику качества обслуживания применяется только к серверам, связав объект групповой Политики для Подразделения, которое содержит только эти серверы, через консоль управления групповыми политиками \(консоли управления групповыми Политиками\) средство. Этот исходный сервер LOB политики применяется высокой\-значение DSCP приоритет всякий раз, когда компьютер отправляет сетевой трафик. Эта политика QoS можно позже изменить \(в редактор объектов групповой политики\) для включения номера портов ERP-приложение, что ограничивает политику, применяемую только при использовании указанный номер порта.

#### <a name="qos-policy-for-the-finance-group"></a>Политики качества обслуживания для группы "Финансы"

Хотя многие группы внутри компании, получить доступ к ERP-приложение, группы "Финансы" зависит от этого приложения при работе с клиентами и группе требует постоянную высокую производительность приложения.

Чтобы убедиться, что группы "Финансы" могут поддерживать своих клиентов, политику качества обслуживания следует классифицировать трафик этих пользователей с высоким уровнем приоритета. Тем не менее политика не следует ограничиваться членами группы "Финансы" использовании приложений, отличных от ERP-приложение. 

По этой причине ИТ-отдел определяет второй политика QoS называется «Клиент LOB политики» в средстве редактора объектов групповой политики, применяется значение DSCP 60 при группе finance ERP-приложения.

#### <a name="qos-policy-for-a-backup-app"></a>Политики качества обслуживания для резервного копирования приложения

Отдельное приложение резервного копирования работает на всех компьютерах. Чтобы убедиться, что трафик резервных копий приложения не использует все доступные сетевые ресурсы, отдел ИТ создает политику резервного копирования данных. Эту политику резервного копирования указывает значение DSCP 1 в зависимости от имя исполняемого файла для резервного копирования приложение, которое является **backup.exe**. 

Третий объект групповой Политики будет создан и развернут для всех клиентских компьютеров в домене. Каждый раз, когда приложение резервного копирования отправляет данные, применяется значение DSCP низким приоритетом, даже если он исходит от компьютеров в финансовом отделе.
  
>[!NOTE]
>Сетевой трафик без политику качества обслуживания отправляет со значением поля DSCP, равным 0.

### <a name="scenario-policies"></a>Политики сценария

В следующей таблице перечислены политики качества обслуживания для этого сценария.
  
|Имя политики|Значение поля DSCP|Ограничение скорости|Применяется к подразделения организации|Описание|  
|-----------------|----------------|-------------------|-----------------------------------|-----------------|
|[Нет политики]|0|Нет|[Нет развертывания]|Лучшие усилий (по умолчанию) обработка неклассифицированных трафика.|  
|Архивация данных|1|Нет|Все клиенты|Применяет значение DSCP низкого приоритета для этих данных bulk.|  
|Server LOB|44|Нет|Компьютер Подразделения для серверов ERP|Применяет высоким приоритетом DSCP для трафика сервера ERP|  
|Клиент LOB|60|Нет|Группа пользователей Finance|Применяет высоким приоритетом DSCP для трафика клиентов ERP|  

>[!NOTE]
>Значения DSCP, представлены в десятичном формате.

С помощью политик QoS определяются и применяются с помощью групповой политики исходящий сетевой трафик получает значение поля DSCP указана политика. Затем маршрутизаторов предоставляют разностные лечения, основанный на эти значения DSCP с помощью очереди. Для этого ИТ-отдела, маршрутизаторы настроены с помощью четырех очередей: высоким приоритетом, высокоприоритетные среднего, усилия и низким приоритетом.

Когда трафик поступает в маршрутизаторе значениями DSCP из «сервера LOB политики» и «клиент LOB политики,» данные помещаются в очереди с высоким приоритетом. Трафик со значением поля DSCP, равным 0 получает усилия уровень обслуживания. Пакеты со значением поля DSCP 1 (в программе резервного копирования) имеют обработку низким приоритетом.  
  
### <a name="prerequisites-for-prioritizing-a-line-of-business-application"></a>Необходимые условия для назначения приоритетов бизнес приложения

Чтобы выполнить эту задачу, убедитесь, что выполнены следующие требования:

- На участвующих компьютерах работает QoS\-совместимых операционных системах.

- Задействованных компьютеров являются членами доменных служб Active Directory \(AD DS\) домена таким образом, они могут быть настроены с помощью групповой политики.

- TCP/IP сети настроены с маршрутизаторами, настройки для поля DSCP \(RFC 2474\). Дополнительные сведения см. в разделе [RFC 2474](https://www.ietf.org/rfc/rfc2474.txt).

- Учетные данные администратора требованиям.

#### <a name="administrative-credentials"></a>Учетные данные администратора

Для выполнения этой задачи, необходимо иметь возможность создавать и развертывать объекты групповой политики.
  
#### <a name="setting-up-the-test-environment-for-prioritizing-a-line-of-business-application"></a>Настройка тестовой среды для назначения приоритетов бизнес приложения

Чтобы настроить тестовую среду, выполните следующие задачи.

- Создание домена AD DS с клиентов и пользователей, сгруппированные в подразделения организации. Инструкции по развертыванию AD DS, см. в разделе [руководство по основной сети](https://docs.microsoft.com/windows-server/networking/core-network-guide/core-network-guide).

- Настройте маршрутизаторы differentially очередь, на основе значений поля DSCP. Например значение поля DSCP 44 вводит очередь «Платина» и все остальные доступны со смещением нашей законной очереди.

>[!NOTE]
> Значения DSCP можно просмотреть с помощью сетевого мониторинга с помощью таких средств, как сетевой монитор. После проведения записи сетевого трафика, вы увидите, что поля TOS в собранных данных.

#### <a name="steps-for-prioritizing-a-line-of-business-application"></a>Шаги определения приоритетности бизнес приложения

Чтобы определять их приоритеты бизнес приложения, выполните следующие задачи:

1. Создание и связывание объекта групповой политики \(GPO\) с политику качества обслуживания.

2. Настройте маршрутизаторы для передачи differentially обрабатывать из бизнес-приложения (с помощью очереди) в зависимости от выбранного значения DSCP. Процедуры этой задачи будет зависеть от типа маршрутизаторов, к которым у вас есть.

## <a name="scenario-2-prioritize-network-traffic-for-an-http-server-application"></a>Сценарий 2. Приоритезации сетевого трафика для приложения сервера HTTP

В Windows Server 2016 QoS на основе политики включает функцию политики на основе URL-адрес. URL-адрес политики позволяют управлять пропускной способностью для HTTP-серверам.

Многие корпоративные приложения разрабатываются для и размещенных в службах IIS \(IIS\) веб-серверов и веб-приложения осуществляется из браузеров на клиентских компьютерах.

В этом сценарии предполагается управлять набором серверов IIS этого узла обучающие видео для сотрудников вашей организации. Целью является убедитесь, что трафик с этих серверов видео не перегрузки сети и убедитесь, что видео трафика отличается от передачи голоса и данных трафика в сети. 

Задача аналогична задаче в сценарии 1. Будет проектировать и настраивать параметры управления трафиком, например значение поля DSCP для трафика, видео, и регулирование скорости же, как это делается для бизнес-приложений. Но при указании трафик, вместо указания имени приложения только ввести URL-адрес, на который будет отвечать приложение сервера HTTP: например, https://hrweb/training.
  
> [!NOTE]
>Нельзя использовать политики качества обслуживания на основе URL-адресов для приоритезации сетевого трафика для компьютеров под управлением операционных систем Windows, которые были выпущены до Windows 7 и Windows Server 2008 R2.

### <a name="precedence-rules-for-url-based-policies"></a>Правила приоритета для политик на основе URL-адрес

Все следующие URL-адреса являются допустимыми и могут быть указаны в политику качества обслуживания и применить одновременно на компьютер или пользователя:

- https://video

- https://training.hr.mycompany.com

- https://10.1.10.249:8080/tech  

- https://*/ebooks

Но какой из них получит приоритет? Правила являются простыми. Политики на основе URL-адрес приоритеты в порядок чтения слева направо. Таким образом от наиболее важных к самым низким приоритетом, URL-адрес поля являются:
  
[1. Схема URL-адреса](#bkmk_QoS_UrlScheme)

[2. Узел URL-адреса](#bkmk_QoS_UrlHost)

[3. URL-адрес порта](#bkmk_QoS_UrlPort)

[4. Путь URL-адреса](#bkmk_QoS_UrlPath)

Ниже приведены подробные сведения.

####  <a name="bkmk_QoS_UrlScheme"></a> 1. Схема URL-адреса

 `https://` имеет более высокий приоритет, чем `https://`.

####  <a name="bkmk_QoS_UrlHost"></a> 2. Узел URL-адреса

 От наивысшего приоритета к меньшему они являются:

1. Имя узла

2. IPv6-адрес

3. IPv4-адрес

4. Подстановочный символ

В случае имени узла имя узла с более точечно элементы (подробнее) имеет более высокий приоритет, чем имя узла с меньшим числом элементов точками. Например между следующие имена узлов:

- Video.internal.Training.hr.MyCompany.com (глубина = 6)
  
- selfguide.Training.MyCompany.com (глубина = 4)
  
- Обучение (глубина = 1)
  
- Библиотека (глубина = 1)
  
 **Video.internal.Training.hr.MyCompany.com** имеет наивысший приоритет, и **selfguide.training.mycompany.com** следующий наибольший приоритет. **Обучение** и **библиотеки** имеют одинаковый низкий приоритет.  
  
####  <a name="bkmk_QoS_UrlPort"></a> 3. URL-адрес порта

Определенный или номер порта неявное имеет более высокий приоритет, чем порт подстановочный знак.

####  <a name="bkmk_QoS_UrlPath"></a> 4. Путь URL-адреса

Таким как имя узла путь URL-адрес может содержать несколько элементов. С дополнительные элементы всегда имеет более высокий приоритет, чем с меньшими усилиями. Например следующие пути перечисляются в порядке приоритета:  

1.  /ebooks/tech/windows/networking/qos

2.  /ebooks/tech/windows/

3.  /ebooks

4.  /

Если пользователь выбирает все подкаталоги и файлы с URL-путь, этот путь URL-адрес будет иметь более низкий приоритет, чем если выбор не были внесены.

Пользователь также можно указать конечный IP-адрес в политику на основе URL-адрес. IP-адрес назначения имеет более низкий приоритет, чем у любого из четырех полях URL-адрес, описанных ранее.
  
### <a name="quintuple-policy"></a>Пятиэлементный политики

Пятиэлементный политики задается идентификатор протокола, исходный IP-адрес, исходный порт, конечный IP-адрес и порт назначения. Политику пятиэлементный всегда имеет более высокий приоритет, чем любые политики на основе URL-адрес. 

Если пятиэлементный политика уже применена для пользователя, новую политику на основе URL-адреса не вызовет конфликтов на всех пользователей клиента компьютеров.

См. в разделе далее в этом руководстве, [управление политику качества обслуживания](qos-policy-manage.md).

Первый раздел в данном руководстве, см. в разделе [политики качества обслуживания (QoS)](qos-policy-top.md).
