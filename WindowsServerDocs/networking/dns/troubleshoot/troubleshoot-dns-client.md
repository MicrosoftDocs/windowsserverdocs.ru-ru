---
title: Устранение неполадок DNS-клиентов
description: В этой статье объясняется, как устранять неполадки DNS на стороне клиента.
manager: dcscontentpm
ms.technology: networking-dns
ms.topic: article
ms.author: delhan
ms.date: 8/8/2019
author: Deland-Han
ms.openlocfilehash: 2a9b44807ae6bc9f4c446d4af2150caf09955899
ms.sourcegitcommit: d99bc78524f1ca287b3e8fc06dba3c915a6e7a24
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/27/2020
ms.locfileid: "87182340"
---
# <a name="troubleshooting-dns-clients"></a>Устранение неполадок DNS-клиентов

В этой статье рассматривается устранение неполадок DNS-клиентов.

## <a name="check-ip-configuration"></a>Проверка IP-конфигурации

1. Откройте окно командной строки от имени администратора на клиентском компьютере.

2. Выполните следующую команду:

   ```cmd
   ipconfig /all
   ```

3. Убедитесь, что у клиента есть допустимый IP-адрес, маска подсети и шлюз по умолчанию для сети, к которой он присоединен и используется.

4. Проверьте DNS-серверы, указанные в выходных данных, и убедитесь, что указанные IP-адреса указаны правильно.

5. Проверьте в выходных данных DNS-суффикс подключения и убедитесь, что он указан правильно.

Если у клиента нет допустимой конфигурации TCP/IP, используйте один из следующих методов.

* Для динамически настроенных клиентов используйте `ipconfig /renew` команду, чтобы вручную обновить конфигурацию IP-адресов на DHCP-сервере.

* Для статически настроенных клиентов измените свойства TCP/IP клиента, чтобы они использовали допустимые параметры конфигурации, или завершите настройку DNS для сети.

## <a name="check-network-connection"></a>Проверка сетевого подключения

### <a name="ping-test"></a>Проверка связи

Убедитесь, что клиент может связаться с предпочитаемым (или альтернативным) DNS-сервером, обратившись к предпочитаемому DNS-серверу по его IP-адресу.

Например, если клиент использует предпочитаемый DNS-сервер 10.0.0.1, выполните следующую команду в командной строке:

```cmd
ping 10.0.0.1
```

Если ни один настроенный DNS-сервер не отвечает на прямую проверку связи с IP-адресом, это означает, что источником проблемы является более вероятное сетевое подключение между клиентом и DNS-серверами. В этом случае выполните основные действия по устранению неполадок сети TCP/IP, чтобы устранить проблему. Помните, что для работы команды ping трафик ICMP должен быть разрешен через брандмауэр.

### <a name="dns-query-tests"></a>Тесты запросов DNS

Если DNS-клиент может проверить связь с компьютером DNS-сервера, попробуйте использовать следующие `nslookup` команды, чтобы проверить, может ли сервер отвечать на DNS-клиенты. Так как nslookup не использует кэш DNS клиента, разрешение имен будет использовать настроенный клиент DNS-сервер.

#### <a name="test-a-client"></a>Тестирование клиента

```cmd
nslookup <client>
```

Например, если клиентский компьютер имеет имя **КЛИЕНТ1**, выполните следующую команду:

```cmd
nslookup client1
```

Если успешный ответ не возвращается, попробуйте выполнить следующую команду:

```cmd
nslookup <fqdn of client>
```

Например, если полное доменное имя — **CLIENT1.Corp.contoso.com**, выполните следующую команду:

```cmd
nslookup client1.corp.contoso.com.
```

> [!NOTE]
> При выполнении этого теста необходимо включить конечную точку.

Если Windows успешно обнаружит полное доменное имя, но не сможет найти его, проверьте конфигурацию DNS-суффикса на вкладке DNS (дополнительные параметры TCP/IP сетевого адаптера). Дополнительные сведения см. в разделе [Настройка разрешения DNS](/previous-versions/tn-archive/dd163570(v=technet.10)#configuring-dns-resolution).

#### <a name="test-the-dns-server"></a>Тестирование DNS-сервера

```cmd
nslookup <DNS Server>
```

Например, если DNS-сервер называется DC1, выполните следующую команду:

```cmd
nslookup dc1
```
Если предыдущие тесты были успешными, этот тест также должен быть успешным. Если проверка не прошла успешно, проверьте подключение к DNS-серверу.

#### <a name="test-the-failing-record"></a>Тестирование записи, в которой происходит сбой

```cmd
nslookup <failed internal record>
```

Например, если неудачная запись была **App1.Corp.contoso.com**, выполните следующую команду:

```cmd
nslookup app1.corp.contoso.com
```

#### <a name="test-a-public-internet-address"></a>Проверка общедоступного адреса в Интернете

```cmd
nslookup <external name>
```

Пример:
```cmd
nslookup bing.com
```

Если все четыре теста выполнены успешно, запустите `ipconfig /displaydns` и проверьте в выходных данных имя, которое завершилось ошибкой. Если в неудачном имени появится сообщение "имя не существует", то на DNS-сервере был возвращен отрицательный ответ, который был кэширован на клиенте.

Чтобы устранить эту проблему, очистите кэш, выполнив `ipconfig /flushdns` .

## <a name="next-step"></a>Дальнейшие действия

Если разрешение имен по-прежнему не выполняется, перейдите к разделу [Устранение неполадок DNS-серверов](troubleshoot-dns-server.md) .
