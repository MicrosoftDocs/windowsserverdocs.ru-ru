---
title: Обзор службы миграции хранилища
description: Служба переноса хранилищ упрощает перенос серверов в более новую версию Windows Server. Она предоставляет графическое средство, которое выполняет инвентаризацию данных на серверах, а затем передает данные и конфигурацию на более новые серверы (без участия пользователей и приложений).
author: jasongerend
ms.author: jgerend
manager: elizapo
ms.date: 08/16/2019
ms.topic: article
ms.prod: windows-server-threshold
ms.technology: storage
ms.openlocfilehash: dae64b81c48b9ae6bf84c3558066ebbdf9c06ace
ms.sourcegitcommit: e2b565ce85a97c0c51f6dfe7041f875a265b35dd
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/19/2019
ms.locfileid: "69584834"
---
# <a name="storage-migration-service-overview"></a>Обзор службы миграции хранилища

>Относится к: Windows Server 2019, Windows Server 2016, Windows Server 2012 R2, Windows Server (половина ежегодного канала)

Служба переноса хранилищ упрощает перенос серверов в более новую версию Windows Server. Она предоставляет графическое средство, которое выполняет инвентаризацию данных на серверах, а затем передает данные и конфигурацию на более новые серверы (без участия пользователей и приложений).

В этом разделе обсуждается, зачем использовать службу миграции хранилища, как работает процесс миграции и каковы требования к исходным и целевым серверам.

## <a name="why-use-storage-migration-service"></a>Зачем использовать службу миграции хранилища

Используйте службу миграции хранилища, так как у вас есть сервер (или большое количество серверов), который вы хотите перенести на более новое оборудование или виртуальные машины. Служба миграции хранилища предназначена для помощи в выполнении следующих действий.

- Инвентаризация нескольких серверов и их данных
- Быстро переносите файлы, общие файловые ресурсы и конфигурацию безопасности с исходных серверов
- При необходимости Возьмите идентификаторы исходных серверов (также называемые обрезкой), чтобы пользователям и приложениям не применялось никаких изменений для доступа к существующим данным.
- Управление одной или несколькими процессами миграции из пользовательского интерфейса центра администрирования Windows

![Схема, показывающая, что служба миграции хранилища выполняет миграцию файлов & конфигурацию с исходных серверов на целевые серверы, виртуальные машины Azure или Синхронизация файлов Azure.](media/overview/storage-migration-service-diagram.png)

**Рис. 1. Источники и назначения службы миграции хранилища**

## <a name="how-the-migration-process-works"></a>Принцип работы процесса миграции

Процесс миграции состоит из трех этапов:

1. **Инвентаризация серверов** для сбора сведений о файлах и конфигурации (показано на рис. 2).
2. **Перенос (копирование) данных** с исходных серверов на целевые серверы.
3. **Вырезание на новые серверы** (необязательно).<br>Целевые серверы предполагают наличие бывших удостоверений исходных серверов, чтобы приложениям и пользователям не применялось ничего. <br>Исходные серверы вводят состояние обслуживания, где они по-прежнему содержат те же файлы, которые они всегда имеют (мы никогда не удаляют файлы с исходных серверов), но недоступны пользователям и приложениям. После этого вы сможете списать серверы с вашего удобства.

![Снимок экрана, показывающий сервер,](media/migrate/inventory.png)
готовый к сканированию**рис. 2: Серверы инвентаризации службы миграции хранилища**

## <a name="requirements"></a>Требования

Для использования службы миграции хранилища необходимо следующее:

- **Исходный сервер** для переноса файлов и данных из
- **Целевой сервер** под windows Server 2019, на который выполняется миграция — windows Server 2016 и windows Server 2012 R2 работают так же, как и около 50%
- **Сервер Orchestrator** под управлением Windows Server 2019 для управления миграцией  <br>Если выполняется миграция только нескольких серверов и один из серверов работает под Windows Server 2019, его можно использовать в качестве Orchestrator. При переносе дополнительных серверов рекомендуется использовать отдельный сервер Orchestrator.
- **Компьютер или сервер с запущенным [центром администрирования Windows](../../manage/windows-admin-center/understand/windows-admin-center.md)**  для запуска пользовательского интерфейса службы миграции хранилища, если вы не предпочитаете использовать PowerShell для управления миграцией. Центр администрирования Windows и версия Windows Server 2019 должны иметь версию не ниже 1809.

Настоятельно рекомендуется, чтобы в Orchestrator и на конечных компьютерах имелось по крайней мере два ядра или два виртуальных ЦП и не менее 2 ГБ памяти. Операции инвентаризации и перемещения выполняются значительно быстрее с увеличением количества процессоров и памяти.

### <a name="security-requirements-the-storage-migration-service-proxy-service-and-firewall-ports"></a>Требования безопасности, служба-посредник службы миграции хранилища и порты брандмауэра

- Учетная запись миграции, которая является администратором на исходных компьютерах и на компьютере Orchestrator.
- Учетная запись миграции, которая является администратором на конечных компьютерах и компьютером Orchestrator.
- На компьютере Orchestrator должны быть включены *Входящие*правила брандмауэра для общего доступа к файлам и принтерам (SMB-in).
- На исходном и целевом компьютерах должны быть включены следующие правила брандмауэра (хотя они уже могут быть включены):
  - Общий доступ к файлам и принтерам (входящий трафик SMB)
  - Служба Netlogon (NP-in)
  - Инструментарий управления Windows (WMI) (DCOM-in)
  - Инструментарий управления Windows (WMI-In)
  
  > [!TIP]
  > При установке прокси-сервера службы миграции хранилища на компьютер под Windows Server 2019 автоматически открываются необходимые порты брандмауэра на этом компьютере. Для этого подключитесь к целевому серверу в центре администрирования Windows, а затем перейдите в **Диспетчер сервера** (в центре администрирования windows) > **роли и компоненты**, выберите **прокси-служба миграции хранилища**и нажмите кнопку **установить**.


- Если компьютеры принадлежат к домену домен Active Directory Services, все они должны принадлежать к одному лесу. Целевой сервер также должен находиться в том же домене, что и исходный сервер, если вы хотите переместить имя домена источника в место назначения при вырезание. Прямую миграцию технически работает в разных доменах, но полное доменное имя назначения будет отличаться от исходного...

### <a name="requirements-for-source-servers"></a>Требования к исходным серверам

Исходный сервер должен работать под управлением одной из следующих операционных систем:

- Windows Server, Semi-Annual Channel
- Windows Server 2019
- Windows Server 2016
- Windows Server 2012 R2
- Windows Server 2012
- Windows Server 2008 R2
- Windows Server 2008
- Windows Server 2003 R2
- Windows Server 2003
- Windows Small Business Server 2003 R2
- Windows Small Business Server 2008
- Windows Small Business Server 2011
- Windows Server 2012 Essentials
- Windows Server 2012 R2 Essentials
- Windows Server2016 Essentials
- Windows Server 2019 Essentials

Примечание. Windows Small Business Server и Windows Server Essentials являются контроллерами домена. Служба миграции хранилища еще не может быть перенесена с контроллеров домена, но может выполнять инвентаризацию и передачу файлов из них.   

Если Orchestrator работает под управлением Windows Server версии 1903 или более поздней, можно выполнить миграцию следующих дополнительных типов источников:

- Отказоустойчивые кластеры
- Серверы Linux, использующие Samba. Мы протестировали следующее:
    - RedHat Enterprise Linux 7,6, CentOS 7, Debian 8, Ubuntu 16,04 и 12.04.5, SUSE Linux Enterprise Server (SLES) 11 SP4
    - Samba 4. x, 3.6. x

### <a name="requirements-for-destination-servers"></a>Требования к целевым серверам

Целевой сервер должен работать под управлением одной из следующих операционных систем:

- Windows Server, Semi-Annual Channel
- Windows Server 2019
- Windows Server 2016
- Windows Server 2012 R2

> [!TIP]
> На целевых серверах под управлением Windows Server 2019 или Windows Server, полугодовой канал версии 1809 или более поздней производительность передачи данных в более ранних версиях Windows Server вдвое выше. Это повышение производительности связано с включением встроенной службы "прокси-служба миграции хранилища", которая также открывает необходимые порты брандмауэра, если они еще не открыты.

## <a name="whats-new-in-storage-migration-service"></a>Новые возможности службы миграции хранилища

Windows Server версии 1903 добавляет следующие новые функции при запуске на сервере Orchestrator:

- Перенос локальных пользователей и групп на новый сервер.
- Перенос хранилища из отказоустойчивых кластеров.
- Перенос хранилища с сервера Linux, использующего Samba.
- Более простая синхронизация перенесенных общих ресурсов в Azure с помощью компонента "Синхронизация файлов Azure".
- Перенос в новые сети, такие как Azure.

## <a name="see-also"></a>См. также

- [Перенос файлового сервера с помощью службы миграции хранилища](migrate-data.md)
- [Часто задаваемые вопросы о службах миграции хранилища](faq.md)
- [Известные проблемы со службой миграции хранилища](known-issues.md)
