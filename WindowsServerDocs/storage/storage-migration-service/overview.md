---
Title: Общие сведения о миграции службы хранилища
description: Служба миграции хранилища упрощает перенос серверов до более новой версии Windows Server. Он предоставляет графическое средство, которое проводит инвентаризацию данные на серверах и передает данные и конфигурацию на более новых серверах — все это без приложений и пользователям придется внести изменения.
author: jasongerend
ms.author: jgerend
manager: elizapo
ms.date: 05/21/2019
ms.topic: article
ms.prod: windows-server-threshold
ms.technology: storage
ms.openlocfilehash: ce4cbdc291d98a180ee6f5b597d322620fa1b19f
ms.sourcegitcommit: 48bb3e5c179dc520fa879b16c9afe09e07c87629
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/31/2019
ms.locfileid: "66453169"
---
# <a name="storage-migration-service-overview"></a>Общие сведения о миграции службы хранилища

>Относится к: Windows Server 2019, Windows Server 2016, Windows Server 2012 R2, Windows Server (Semi-Annual Channel)

Служба миграции хранилища упрощает перенос серверов до более новой версии Windows Server. Он предоставляет графическое средство, которое проводит инвентаризацию данные на серверах и передает данные и конфигурацию на более новых серверах — все это без приложений и пользователям придется внести изменения.

В этом разделе рассматривается, почему нужно использовать службу хранилища миграции, как работает процесс миграции и какие требования предъявляются для исходного и конечного серверов.

## <a name="why-use-storage-migration-service"></a>Зачем использовать службу миграции хранилища

Использование службы хранилища миграции, так как у вас есть сервер (или большого количества серверов), который вы хотите перейти на более нового оборудования или виртуальных машин. Служба миграции хранилища призван помочь следующим образом:

- Учет нескольких серверов и их данных
- Быстро передавать файлы, файловые ресурсы и конфигурации безопасности с исходных серверов
- При необходимости перехватить удостоверение исходных серверов (также известный как вырезание через), чтобы пользователи и приложения не нужно ничего менять, чтобы обращаться к существующим данным
- Управление с помощью пользовательского интерфейса Windows Admin Center один или несколько миграций

![Схема, показывающая перенос файлов миграции службы хранилища и конфигурации с исходных серверов на конечные серверы, виртуальные машины Azure или синхронизации файлов Azure.](media/overview/storage-migration-service-diagram.png)

**Рис. 1. Источники миграции службы хранилища и назначения**

## <a name="how-the-migration-process-works"></a>Как работает процесс миграции

Миграции — это три этапа:

1. **Инвентаризация серверов** для сбора сведений об их файлы и конфигурацией (показана на рис. 2).
2. **Передача данных (копия)** с исходных серверов на конечных серверах.
3. **Переход на новые серверы** (необязательно).<br>Конечные серверы Предположим, источник бывший удостоверения сервера, чтобы приложения и пользователям не нужно ничего менять. <br>Исходные серверы перейдет в состояние обслуживания, где они по-прежнему содержат одинаковые файлы, они всегда имеют (Мы никогда не удаляйте файлы из исходных серверов), но недоступны для пользователей и приложений. Затем можно списать серверы в удобное время.

![Снимок экрана, показывающий сервере все готово для сканирования](media/migrate/inventory.png)
**рис. 2: Инвентаризация серверов службы миграции хранилища**

## <a name="requirements"></a>Требования

Чтобы использовать службу миграции хранилища, вам потребуется следующее:

- Объект **исходного сервера** перенести файлы и данные из
- Объект **конечный сервер** под управлением Windows Server 2019 для миграции — Windows Server 2016 и Windows Server 2012 R2 также работать, но являются около 50% медленнее
- **Сервера orchestrator** под управлением Windows Server 2019 для управления миграцией  <br>Если вы переносите только несколько серверов и одного из серверов выполняется Windows Server 2019, можно использовать, как Оркестратор. При миграции дополнительные серверы, рекомендуется использовать отдельный orchestrator сервера.
- Объект **ПК или сервер под управлением [Windows Admin Center](../../manage/windows-admin-center/understand/windows-admin-center.md)**  для запуска пользовательского интерфейса службы миграции хранилища, если вы предпочитаете использовать PowerShell для управления миграцией. Версия Windows Admin Center и Windows Server 2019 должны быть по крайней мере версии 1809.

Настоятельно рекомендуется, чтобы orchestrator и конечный компьютеры имеют по крайней мере два ядра или два виртуальных ЦП и по крайней мере 2 ГБ памяти. Операции инвентаризации и передачи выполняются значительно быстрее дополнительные процессоры и память.

### <a name="security-requirements"></a>Требования к безопасности

- Миграция учетной записи с правами администратора на исходных компьютерах и на компьютере orchestrator.
- Миграция учетной записи с правами администратора на конечных компьютерах и на компьютере orchestrator.
- На компьютере orchestrator должно быть к файлам и принтерам (SMB — входящий) включено правило брандмауэра *входящий*.
- Исходный и конечный компьютеры должны иметь следующие правила брандмауэра включен *входящий* (хотя вы уже можете располагать их включена):
  - Общий доступ к файлам и принтерам (входящий трафик SMB)
  - Служба Netlogon (именованные каналы — входящий трафик)
  - Инструментарий управления Windows (DCOM-In)
  - Инструментарий управления Windows (WMI-In)
  
  > [!TIP]
  > Установка службы прокси службы миграции хранилища на компьютере Windows Server 2019 автоматически открывает порты брандмауэра, необходимые на этом компьютере.
- Если компьютеры принадлежат к домену доменных служб Active Directory, они должны все принадлежат к тому же лесу. Целевой сервер также необходимо в том же домене, что и исходный сервер, если вы хотите перенести доменное имя источника в место назначения, при переводе по. Прямая миграция с технической точки зрения работает между доменами, но полное доменное имя назначения будет отличаться от источника...

### <a name="requirements-for-source-servers"></a>Требования для исходных серверов

На исходном сервере должна работать одна из следующих операционных систем:

- Windows Server Semi-Annual Channel
- Windows Server 2019
- Windows Server 2016
- Windows Server 2012 R2
- Windows Server 2012
- Windows Server 2008 R2
- Windows Server 2008
- Windows Server 2003 R2
- Windows Server 2003

Если оркестратора работает под управлением Windows Server версии 1903 или более поздней версии, можно перенести следующие типы дополнительных источников:

- Отказоустойчивые кластеры
- Серверы Linux, использующих Samba. Мы протестировали следующие:
    - Red Hat Enterprise Linux 7.6, CentOS 7, 8 Debian, Ubuntu 16.04 и 12.04.5, SUSE Linux Enterprise Server (SLES) 11 SP4
    - Samba 4.x, 3.6.x

### <a name="requirements-for-destination-servers"></a>Требования к серверам назначения

Конечный сервер необходимо выполнить одно из следующих операционных систем:

- Windows Server Semi-Annual Channel
- Windows Server 2019
- Windows Server 2016
- Windows Server 2012 R2

> [!TIP]
> Конечные серверы под управлением Windows Server 2019 или Windows Server, Semi-Annual Channel 1809 или более поздней версии имеют double производительность передачи более ранних версиях Windows Server. Это повышение производительности из-за включения встроенные службы прокси службы миграции хранилища, которая также открывает брандмауэра, необходимые порты, если они еще не открыто.

## <a name="whats-new-in-storage-migration-service"></a>Новые возможности в службе миграции хранилища

Windows Server версии 1903 добавлены следующие новые функции, при запуске на сервере orchestrator:

- Перенос локальных пользователей и групп на новый сервер
- Миграция хранилища из отказоустойчивых кластеров
- Миграция хранилища на сервере Linux, использующий Samba
- Более легко синхронизировать перенесенных общих ресурсов в Azure с помощью службы синхронизации файлов Azure
- Перенос в новых сетей, таких как Azure

## <a name="see-also"></a>См. также

- [Перенос файлового сервера с помощью службы миграции хранилища](migrate-data.md)
- [Часто задаваемые вопросы (FAQ) службы миграции хранилища](faq.md)
- [Известные проблемы службы миграции хранилища](known-issues.md)
