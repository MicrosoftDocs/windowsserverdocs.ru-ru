---
title: Обзор диспетчера ресурсов файлового сервера (FSRM)
ms.prod: windows-server-threshold
ms.author: jgerend
ms.manager: brianlic
ms.technology: storage
ms.topic: article
author: jasongerend
ms.date: 5/14/2018
description: Диспетчер ресурсов файлового сервера (FSRM) — это средство, которая позволяет классифицировать данные на файловом сервере Windows Server и управлять.
ms.openlocfilehash: 107d08f247fc56720ccc3d11a3db88c77377257c
ms.sourcegitcommit: 0d0b32c8986ba7db9536e0b8648d4ddf9b03e452
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/17/2019
ms.locfileid: "59870725"
---
# <a name="file-server-resource-manager-fsrm-overview"></a>Обзор диспетчера ресурсов файлового сервера (FSRM)

> Относится к: Windows Server (полугодовой канал), Windows Server 2016, Windows Server 2012 R2, Windows Server 2012, Windows Server 2008 R2

Диспетчер ресурсов файлового сервера (FSRM) — это служба роли в Windows Server, которая позволяет классифицировать данные, хранящиеся на файловых серверах, и управлять этими данными. Автоматически классифицировать файлы, выполняют задачи, основанные на этих классификаций, задать квоты для папок и создавать отчеты, мониторинг использования хранилища можно использовать диспетчер ресурсов файлового сервера.

Это небольшой point, но мы также [добавлена возможность отключения журналов изменений](#whats-new) в Windows Server версии ниже 1803.

## <a name="features"></a>Компоненты

Диспетчер ресурсов файлового сервера включает следующие компоненты.

-   [Управление квотами](quota-management.md) позволяет ограничить пространство, разрешенное для тома или папки, и они могут автоматически применяться к новым папкам, создаваемым в томе. Можно также определить шаблоны квот, которые могут применяться к новым томам или папкам.  
-   [Инфраструктура классификации файлов](classification-management.md) обеспечивает представление о данных, автоматизируя процессы классификации и тем более эффективно управлять данными. На основании классификации файлов можно применять политики. Примерами политик могут служить динамический контроль доступа для ограничения доступа к файлам, шифрование файлов и установка срока действия файлов. Классификация файлов может производиться автоматически с помощью правил классификации или вручную — изменением свойств выбранного файла или папки.
-   [Задачи управления файлами](file-management-tasks.md) позволяет применять условные политики или действия к файлам на основе их классификации. Условия задачи управления файлами включают расположение файла, свойства классификации, дату создания файла, дату последнего изменения файла или время последнего доступа к файлу. Действия, доступные в задаче управления файлами, включают прекращение срока действия файлов, их шифрование или выполнение пользовательской команды.
-   [Блокировки управления файлов](file-screening-management.md) помогает контролировать типы файлов, которые пользователь может сохранять на файловом сервере. Можно ограничить расширения, допустимые при сохранении файлов с общим доступом. Например, можно создать фильтр блокировки файлов, который не позволит сохранять файлы с расширением MP3 в личных папках с общим доступом на файловом сервере.
-   [Отчеты хранилища](storage-reports-management.md) помогают определить тенденции использования диска и способы классификации данных. Можно также контролировать попытки сохранять запрещенные файлы пользователями выбранной группы.  
  
Функций, включенных с помощью диспетчера ресурсов файлового сервера можно настроить и контролировать с помощью приложения диспетчера ресурсов файлового сервера или с помощью Windows PowerShell.
  
> [!IMPORTANT]
>  Диспетчер ресурсов файлового сервера поддерживает только тома, отформатированные с файловой системой NTFS. Файловая система Resilient File System не поддерживается.  
  
## <a name="practical-applications"></a>Практическое применение  
 Ниже приведены возможности практического применения диспетчера ресурсов файлового сервера.  
  
-   Использование инфраструктуры классификации файлов со сценарием динамического контроля доступа для создания политики, предоставляющей доступ к файлам и папкам на основании классификации файлов на файловом сервере.  
  
-   Создание правила классификации файлов, которое отмечает как содержащие персональные данные файлы, включающие хотя бы 10 номеров социального обеспечения.  
  
-   Прекращение срока действия файлов, которые не изменялись за последние 10 лет.  
  
-   Создание квоты размером 200 МБ для домашнего каталога каждого пользователя с уведомлением при заполнении 180 МБ.  
  
-   Запрет сохранения музыкальных файлов в личных папках с общим доступом.  
  
-   Создание в расписании отчета, который будет выполняться в полночь по воскресеньям и создавать список файлов, открывавшихся за предыдущие два дня. Это поможет обнаружить действия по сохранению файлов в выходные и соответственно планировать время отключения сервера.  

## <a name="whats-new"></a>Новые возможности — предотвратить создание журналов изменений FSRM

Начиная с Windows Server версии 1803, теперь отказаться от службы диспетчера ресурсов файлового сервера от создания журнала изменений (также известный как журнала USN) на томах, при запуске службы. Это может сэкономить немного места на каждом томе, но приведет к отключению классификации файлов в реальном времени.

Для более старых новых функций, см. в разделе [новые возможности диспетчера ресурсов файлового сервера](https://technet.microsoft.com/library/dn383587.aspx).

Чтобы предотвратить создание журнала изменений на некоторых или всех томов, при запуске службы диспетчера ресурсов файлового сервера, следуйте инструкциям ниже: 

1. Остановите службу SRMSVC. Для этого откройте сеанс PowerShell с правами администратора и введите `Stop-Service SrmSvc`.
2. Удаление журнала USN для томов, для экономии места на с помощью команды fsutil: 

      ```
      fsutil usn deletejournal /d <VolumeName>
      ```
    Пример: `fsutil usn deletejournal /d c:`

3. Например, откройте редактор реестра, введя `regedit` в том же сеансе PowerShell.
4. Перейдите к следующему разделу: **HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\SrmSvc\Settings**
5. Чтобы при необходимости пропустить измените Создание журнала для всего сервера (пропустите этот шаг, если вы хотите отключить его только для отдельных томов):
    1. Щелкните правой кнопкой мыши **параметры** ключ, а затем кнопку **New** > **DWORD (32-разрядное) значение**. 
    1. Имя значения `SkipUSNCreationForSystem`.
    1. Задайте значение **1** (в шестнадцатеричном представлении).
6. При необходимости пропустить создание журнала изменений для конкретного тома:
    1. Получение пути тома, вы хотите пропустить с помощью `fsutil volume list` команды или следующую команду PowerShell:
        ```PowerShell
        Get-Volume | Format-Table DriveLetter,FileSystemLabel,Path
        ```
       Ниже приведен пример вывода:

       ```
        DriveLetter FileSystemLabel Path
        ----------- --------------- ----
                    System Reserved \\?\Volume{8d3c9e8a-0000-0000-0000-100000000000}\
        C                           \\?\Volume{8d3c9e8a-0000-0000-0000-501f00000000}\
       ```
    2. Щелкните правой кнопкой мыши обратно в редакторе реестра **HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\SrmSvc\Settings** ключ, а затем кнопку **New** > **мультистроки Значение**.
    3. Имя значения `SkipUSNCreationForVolumes`.
    4. Введите путь каждого тома, на котором вы пропускать этап создания журнала изменений, поместив каждого пути в отдельной строке. Пример:

        ```
        \\?\Volume{8d3c9e8a-0000-0000-0000-100000000000}\
        \\?\Volume{8d3c9e8a-0000-0000-0000-501f00000000}\
        ```

        > [!NOTE] 
        > Редактор реестра могут сообщать, что его удалить пустые строки, отображение этого предупреждения, можно без опасений пренебречь: *Данные типа REG_MULTI_SZ не может содержать пустые строки. Редактор реестра удалит все обнаруженные пустые строки.*

7. Запустите службу SRMSVC. Например, в сеансе PowerShell введите `Start-Service SrmSvc`.



## <a name="see-also"></a>См. также

- [Динамический контроль доступа](https://technet.microsoft.com/library/dn408191(v=ws.11).aspx) 