---
title: Обзор и повторной синхронизации хранилища см. в разделе
description: Подробные сведения о когда происходит повторная синхронизация хранилища и как увидеть его в Windows Server 2019.
keywords: Дисковыми пространствами, повторная синхронизация хранения, синхронизируйте их повторно, хранение, S2D
ms.prod: windows-server-threshold
ms.author: adagashe
ms.technology: storage-spaces
ms.topic: article
author: adagashe
ms.date: 01/14/2019
ms.localizationpriority: medium
ms.openlocfilehash: 81b1136a4b6a5cf8423a99e898b482a9b2849b5f
ms.sourcegitcommit: 0d0b32c8986ba7db9536e0b8648d4ddf9b03e452
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/17/2019
ms.locfileid: "59813465"
---
# <a name="understand-and-monitor-storage-resync"></a>Принцип работы и отслеживание повторной синхронизации хранилища

>Относится к: Windows Server 2019

Оповещения хранилища повторной синхронизации — это новая возможность [Storage Spaces Direct](storage-spaces-direct-overview.md) в 2019 Windows Server, позволяющий службе работоспособности выдает исключение ошибку, если хранилище повторная синхронизация. Предупреждение полезна в выставленном происходит повторная синхронизация, благодаря чему не случайно использовать дополнительные серверы вниз (что может вызвать несколько доменов сбоя могут быть затронуты, приводит к ухудшению кластера). 

Этот раздел содержит общие сведения и инструкции для понимания и повторной синхронизации хранилища в отказоустойчивом кластере Windows Server с дисковыми пространствами см. в разделе.

## <a name="understanding-resync"></a>Основные сведения о повторной синхронизации

Давайте начнем с простого примера, чтобы понять, как хранилища получает синхронизированы. Имейте в виду, что все неразделяемая (локальные диски только) решение распределенного хранилища демонстрирует это расширение функциональности. Как можно будет увидеть ниже, если один узел сервера выходит из строя, а затем его диски не будут обновляться, пока она вновь заработала - это справедливо для любой архитектуры hyper со схождением. 

Предположим, что мы хотим сохранить строку «HELLO». 

![ASCII из строки «hello»](media/understand-storage-resync/hello.png)

Asssuming, что у нас есть устойчивости трехстороннее зеркало, у нас есть три копии этой строки. Теперь если взять сервер #1 временно (для по обслуживанию), затем мы не может получить доступ к копирования #1.

![Не удается получить доступ к копии #1](media/understand-storage-resync/copy1.png)

Предположим, что мы обновляем нашу строку из «HELLO» в «HELP»! в настоящее время.

![ASCII из строки «Помогите!»](media/understand-storage-resync/help.png)

Как только мы обновить строки, копия #2 и #3 будет успешно обновлены. Тем не менее копирования #1 по-прежнему не удается недоступна из-за сервер #1 вниз временно (для по обслуживанию). 

![GIF написания Копировать #2 и #2 "](media/understand-storage-resync/write.gif)

Теперь у нас есть копии #1, которая содержит данные, которые не синхронизированы. Операционная система использует детализированные "грязных" областей, отслеживания для отслеживания битов, которые не синхронизированы. Таким образом, когда сервер #1 снова станет доступным, мы можете синхронизировать изменения, чтение данных из копии #2 или #3 и перезапись данных, при копировании #1. Преимущества этого подхода заключаются в только что нам нужно скопировать данные, устаревшие, а не повторная синхронизация всех данных с сервера #2 или сервера #3.

![GIF перезаписи, чтобы скопировать #1 "](media/understand-storage-resync/overwrite.gif)

Таким образом это объясняет, как данные получает синхронизированы. Но это выглядит как на высоком уровне? Предположим для примера, что у нас есть три сервера гиперконвергированного кластера. Если сервер #1 находится в состоянии обслуживания, вы увидите его как неработающий. При развертывании сервера #1 обратно, начнется повторная синхронизация всех его хранилища, с помощью отслеживания детализированные "грязных" областей (см. выше). Когда данные уже загружены синхронизацию, все серверы отображаются как работоспособный.

![GIF представления администрирования повторная синхронизация»](media/understand-storage-resync/admin.gif)

## <a name="how-to-monitor-storage-resync-in-windows-server-2019"></a>Мониторинг хранилища повторной синхронизации в Windows Server 2019

Теперь, когда вы знаете, как работает повторной синхронизации хранилища, давайте взглянем на том, как это проявляется в Windows Server 2019. Мы добавили новый сбой, чтобы [служба работоспособности](../../failover-clustering/health-service-overview.md) , будут отображаться при хранилища повторная синхронизация.

Чтобы просмотреть этот сбой в PowerShell, выполните следующую команду:

``` PowerShell
Get-HealthFault
```

Это является новой ошибкой в Windows Server 2019 и будет отображаться в PowerShell, в отчете о проверке кластера и в любом другом, базирующуюся на ошибки работоспособности. 

Чтобы получить подробное представление, можно выполнить запрос базы данных серии времени в PowerShell следующим образом:

```PowerShell
Get-ClusterNode | Get-ClusterPerf -ClusterNodeSeriesName ClusterNode.Storage.Degraded
```
Вот пример выходных данных:

```
Object Description: ClusterNode Server1

Series                       Time                Value Unit
------                       ----                ----- ----
ClusterNode.Storage.Degraded 01/11/2019 16:26:48     214 GB
```

В частности Windows Admin Center использует ошибки работоспособности для задания состояния и цвета узлов кластера. Таким образом этот новый сбой приведет к узлам кластера для перехода от red (вниз), желтый (повторная синхронизация) зеленый цвет (вверх), а не непосредственно от red зеленый цвет, на панели мониторинга HCI.

![Изображение представления 2016 vs 2019 повторная синхронизация»](media/understand-storage-resync/compare.png)

Отображая общий ход выполнения повторной синхронизации хранилища, можно точно известно, какой объем данных не синхронизированы и ли системы продвигается вперед. При открытии Windows Admin Center и перейти к *панели мониторинга*, вы увидите новое предупреждение следующим образом:

![Образ оповещений Windows Admin Center»](media/understand-storage-resync/alert.png)

Предупреждение полезна в выставленном происходит повторная синхронизация, благодаря чему не случайно использовать дополнительные серверы вниз (что может вызвать несколько доменов сбоя могут быть затронуты, приводит к ухудшению кластера). 

При переходе к *серверы* странице в Windows Admin Center, щелкните *инвентаризации*и затем выберите определенный сервер, можно получить более подробное представление того, как выглядит этот хранилища повторной синхронизации на каждом из серверов. Если перейдите к нужному серверу и посмотреть на *хранения* диаграммы, вы увидите объем данных, который нуждается в исправлении в *сиреневый* строки с точное число прямо над разделом. Эта сумма будет увеличить, если сервер не работает (Дополнительные данные должны быть resynced) и постепенно уменьшить после возвращения сервера (данных синхронизируя). Когда объем данных, которая должна быть восстановления равно 0, хранилище связано выполнена повторная синхронизация — вы можете теперь свободно перевести сервер в, если вам нужно. Ниже приведен снимок экрана этой возможности в Windows Admin Center:

![Изображение представления сервера в Windows Admin Center»](media/understand-storage-resync/server.png)

## <a name="how-to-see-storage-resync-in-windows-server-2016"></a>Как просмотреть хранилища повторной синхронизации в Windows Server 2016

Как вы видите, это предупреждение, особенно полезна при получении целостное представление о происходящем на уровне хранилища. Фактически, в нем указана информация, которую можно получить из командлета Get-StorageJob, который возвращает сведения о заданиях модуля хранилища выполняющейся длительное время, например операциях восстановления в дисковом пространстве. Ниже приведен пример:

```PowerShell
Get-StorageJob
```

Ниже приведен пример выходных данных.

```
Name                  ElapsedTime           JobState              PercentComplete       IsBackgroundTask
----                  -----------           --------              ---------------       ----------------
Regeneration          00:01:19              Running               50                    True

```

Это представление является гораздо более детализированные перечисленных заданий хранилища представлены для каждого тома, поэтому можно просмотреть список выполняющихся заданий и их отдельных ход можно отслеживать. Этот командлет работает на Windows Server 2016 и 2019 г.

## <a name="see-also"></a>См. также

- [Используя сервер в автономный режим для обслуживания](maintain-servers.md)
- [Общие сведения о дисковых хранилища](storage-spaces-direct-overview.md)