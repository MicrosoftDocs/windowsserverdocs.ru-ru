---
title: Понять и увидеть повторной синхронизации хранилища
description: Подробные сведения о при повторной синхронизации хранилища происходит и увидеть это в Windows Server 2019.
keywords: Локальные дисковые пространства, повторной синхронизации хранилища, повторной синхронизации, хранилище, S2D
ms.prod: windows-server-threshold
ms.author: adagashe
ms.technology: storage-spaces
ms.topic: article
author: adagashe
ms.date: 01/14/2019
ms.localizationpriority: medium
ms.openlocfilehash: 81b1136a4b6a5cf8423a99e898b482a9b2849b5f
ms.sourcegitcommit: 748eccd10fc0c3c962d6e64ff6ead08017ac1947
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/15/2019
ms.locfileid: "9009667"
---
# Понять и отслеживать повторной синхронизации хранилища

>Область применения: Windows Server 2019 г.

Оповещения повторной синхронизации хранилища — это новая возможность [Локальных дисковых пространств](storage-spaces-direct-overview.md) в Windows Server 2019, позволяющий служба работоспособности выдавать ошибку при повторная синхронизация хранилища. Оповещения полезен в уведомление о вы происходит повторной синхронизации, чтобы было не случайно дополнительные серверы вниз (что может привести к несколько доменов сбоя могут быть подвержены воздействию, полученные в кластере перейдите). 

Эта статья фона и действия, чтобы понять и увидеть повторной синхронизации хранилища в отказоустойчивом кластере Windows Server с помощью локальных дисковых пространств.

## Общие сведения о повторной синхронизации

Давайте начнем с простого примера понять, как хранилища получает теряться синхронизация. Имейте в виду, что все общие нулевого (локальные диски) распределенных решению на это поведение. Как вы увидите ниже, если один узел сервера выходит из строя, его диски не будут обновляться до его снова в оперативный — это справедливо для любой архитектуры гиперконвергентной. 

Предположим, что нам нужно сохранить строку «HELLO». 

![ASCII строки «hello»](media/understand-storage-resync/hello.png)

Asssuming, что у нас есть трехстороннее зеркало устойчивости, у нас есть три копии эту строку. Теперь мы стараемся server #1 временно (для maintanence), затем мы не сможете копировать #1.

![Не удается получить доступ к копии #1](media/understand-storage-resync/copy1.png)

Предположим, что мы обновляем наши строки из «HELLO» для «СПРАВКА!» в данный момент.

![ASCII строки «Справка!»](media/understand-storage-resync/help.png)

Как только мы обновляем строку, копия #2 и #3 будет успешно обновлены. Тем не менее скопируйте #1 по-прежнему первоначально так как сервер #1 вниз временно (для maintanence). 

![GIF написания Копировать #2 и #2 "](media/understand-storage-resync/write.gif)

Теперь у нас есть копии #1, которая содержит данные, которые не найден. Операционная система использует детальное задать область отслеживания для отслеживания битов, которые не совпадают. Таким образом, когда сервер #1 снова подключится к сети, мы синхронизировать изменения чтение данных из копии #2 или #3 и перезаписывание данных в копии #1. Преимущества этого подхода — это только что нам необходимо копировать данные, устаревшие, а не повторная синхронизация всех данных с сервера #3 или сервера #2.

![GIF перезаписи для копирования #1»](media/understand-storage-resync/overwrite.gif)

Таким образом это объясняется, каким образом получает теряться синхронизация данных. Но это как выглядит на высоком уровне? Предположим, в этом примере, что у нас есть три сервера кластера. Когда сервер #1 находится в состоянии обслуживания, вы увидите его как вниз. Когда вы server #1 резервное копирование, он начнет повторная синхронизация всех хранилище с помощью отслеживания детальное задать региона (описано выше). Установив все синхронизировать данные, будут отображаться все серверы как до.

![GIF-изображений в режиме администратора для повторной синхронизации»](media/understand-storage-resync/admin.gif)

## Мониторинг повторной синхронизации хранилища в Windows Server 2019

Теперь, когда вы понимаете, как работает повторной синхронизации хранилища, давайте рассмотрим как оно отображается в Windows Server 2019. Мы добавили новые сбоя [Служба работоспособности](../../failover-clustering/health-service-overview.md) , которая будет отображаться при повторная синхронизация хранилища.

Чтобы просмотреть этот сбой в PowerShell, выполните:

``` PowerShell
Get-HealthFault
```

Это — это новый сбоя в Windows Server 2019 и будет отображаться в PowerShell в отчет о проверке кластера и в любом другом основан на ошибки работоспособности. 

Чтобы получить представление более подробно, можно выполнить запрос на время серии базу данных в PowerShell следующим образом.

```PowerShell
Get-ClusterNode | Get-ClusterPerf -ClusterNodeSeriesName ClusterNode.Storage.Degraded
```
Вот пример выходных данных:

```
Object Description: ClusterNode Server1

Series                       Time                Value Unit
------                       ----                ----- ----
ClusterNode.Storage.Degraded 01/11/2019 16:26:48     214 GB
```

Прежде всего Windows Admin Center использует ошибки работоспособности для задания данных о состоянии и цвета узлов кластера. Таким образом этот новый сбой приведет к узлов кластера перехода от красный (вниз) (повторная синхронизация) на зеленый (вверх), а не будет непосредственно с красного на зеленый, желтый на информационной панели HCI.

![Изображение представления 2016 vs 2019 г. для повторной синхронизации»](media/understand-storage-resync/compare.png)

Показывая общий ход выполнения повторной синхронизации хранилища, можно точно известно, какой объем данных не найден и принять решение ли системы двигаться вперед. Когда вы откроете Windows Admin Center и перейти на *информационной панели*, вы увидите новое оповещение следующим образом:

![Изображение оповещения в Windows Admin Center»](media/understand-storage-resync/alert.png)

Оповещения полезен в уведомление о вы происходит повторной синхронизации, чтобы было не случайно дополнительные серверы вниз (что может привести к несколько доменов сбоя могут быть подвержены воздействию, полученные в кластере перейдите). 

Если перейти на страницу *серверов* в Windows Admin Center, щелкните *инвентаризации*и затем выбрать конкретный сервер, вы можете получить более подробное представление о том, как выглядит этот повторной синхронизации хранилища на каждом сервере. Если перейти к серверу и просмотрите диаграмму *хранилища* , вы увидите объем данных, которые необходимо восстановить в *фиолетовые* линии со точное количество прямо над. Эта сумма будет увеличивается, если сервер не работает (Дополнительные данные должны быть resynced) и постепенно снижается при сервером станет доступен (данных синхронизируется). Когда объем данных, которые должен быть восстановление равно 0, хранилища, выполнена повторная синхронизация - вы могут свободно перевести сервер в, если необходимо. Ниже показан снимок этого взаимодействия в Windows Admin Center:

![Изображение представления сервера в Windows Admin Center»](media/understand-storage-resync/server.png)

## Как узнать повторной синхронизации хранилища в Windows Server 2016

Как видно, это оповещение является особенно полезно для получения почтовых ящиках представление следить за изменениями на уровне хранилища. Он эффективно перечислены сведения, которые можно получить из командлет Get-StorageJob, который возвращает сведения о заданиях модуля длительные хранилища, например процедуры восстановления дисковое пространство. Ниже показан пример:

```PowerShell
Get-StorageJob
```

Ниже приведен пример выходных данных.

```
Name                  ElapsedTime           JobState              PercentComplete       IsBackgroundTask
----                  -----------           --------              ---------------       ----------------
Regeneration          00:01:19              Running               50                    True

```

Это представление является намного более тщательный заданиями хранилища применяются на уровне тома, поэтому можно увидеть список заданий, которые выполняются, и вы можете отслеживать свои отдельные. Этот командлет работает в Windows Server 2016 и 2019 г.

## См. также

- [Перевод сервера в автономный режим для обслуживания](maintain-servers.md)
- [Обзор локальных дисковых пространств](storage-spaces-direct-overview.md)