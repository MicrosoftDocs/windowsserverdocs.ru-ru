---
title: Выбор дисков для локальных дисковых пространств
description: Дополнительные сведения о том, как выбрать диски для Локальные дисковые пространства.
ms.assetid: 1368bc83-9121-477a-af09-4ae73ac16789
ms.author: cosdar
manager: eldenc
ms.topic: article
author: cosmosdarwin
ms.date: 07/01/2020
ms.localizationpriority: medium
ms.openlocfilehash: b84b177a6f73da1a74caa2c715cafc3c776aae59
ms.sourcegitcommit: 528bdff90a7c797cdfc6839e5586f2cd5f0506b0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "97977489"
---
# <a name="choosing-drives-for-storage-spaces-direct"></a>Выбор дисков для локальных дисковых пространств

> Применяется к: Windows Server 2019, Windows Server 2016

В этом разделе приведены рекомендации по выбору носителей для [локальных дисковых пространств](storage-spaces-direct-overview.md), которые будут соответствовать вашим требованиям к производительности и емкости.

## <a name="drive-types"></a>Типы дисков

В настоящее время Локальные дисковые пространства работает с четырьмя типами дисков:

| Тип диска | Описание |
| --- | --- |
| :::image type="content" source="media/understand-the-cache/pmem-100px.png" alt-text="Изображение PMem (Постоянная память)"::: | **Постоянная память.** Новый тип высокоскоростного хранилища с низкой задержкой. |
| :::image type="content" source="media/understand-the-cache/NVMe-100px.png" alt-text="Изображение NVMe (невременная память, Экспресс-выпуск)"::: | **NVMe (невременная память, Экспресс-выпуск).** Твердотельные накопители, расположенные непосредственно на шине PCIe. Распространенные форм-факторы: 2,5 дюйма U.2, плата расширения PCIe (AIC) и M.2. NVMe предлагает больше операций ввода-вывода в секунду и пропускную способность с низкой задержкой, чем любой поддерживаемый нами тип диска, за исключением постоянного объема памяти. |
| :::image type="content" source="media/understand-the-cache/SSD-100px.png" alt-text="Образ накопителя SSD)"::: | **SSD.** Твердотельные накопители, которые подключаются через стандартный интерфейс SATA или SAS. |
| :::image type="content" source="media/understand-the-cache/HDD-100px.png" alt-text="Образ жесткого диска)"::: | **Расширитель.** Вращение, магнитные жесткие диски, которые обеспечивают большой объем хранилища. |

## <a name="built-in-cache"></a>Встроенный кэш

Локальные дисковые пространства обладают встроенным серверным кэшем. Это большой, постоянно работающий в режиме реального времени кэш чтения и записи. При развертывании с несколькими типами дисков он автоматически использует все самые быстрые диски. Остальные диски используются для хранения.

Подробнее см. в разделе [Общие сведения о кэше локальных дисковых пространств](understand-the-cache.md).

## <a name="option-1--maximizing-performance"></a>Вариант 1 — оптимизация производительности

Для достижения прогнозируемой и единообразной длительности в миллисекундах при случайных операциях чтения и записи в любые данные или для достижения высокого уровня операций ввода-вывода (мы сделали [свыше 6 000 000](https://www.youtube.com/watch?v=0LviCzsudGY&t=28m)!) или пропускную способность ввода-вывода (мы сделали [больше 1 ТБ в секунду](https://www.youtube.com/watch?v=-LK2ViRGbWs&t=16m50s)!), следует перейти на страницу «ALL-Flash».

Это можно сделать тремя способами:

![Параметры развертывания "все-Flash" для повышения производительности](media/choosing-drives-and-resiliency-types/All-Flash-Deployment-Possibilities.png)

1. **Все NVMe.** Использование только накопителей NVMe обеспечивает непревзойденную производительность и наиболее предсказуемую задержку. Если все диски одной модели, кэш отсутствует. Вы также можете смешивать модели NVMe с высоким и низким уровнем износостойкости и настроить первые для кэширования операций записи вторых ([требуется настройка](understand-the-cache.md#manual-configuration)).

2. **NVMe + SSD.** При использовании NVMe вместе с SSD накопители NVMe автоматически кэшируют операции записи на SSD. Это позволяет объединить операции записи в кэше и переносить их только при необходимости, чтобы уменьшить износа SSD. Так можно получить характеристики, аналогичные NVMe, при этом операции чтения обслуживаются непосредственно на быстрых SSD.

3. **Все SSD.** Как и при использовании только накопителей NVMe, кэш отсутствует, если все диски одной модели. Вы также можете смешивать накопители с высоким и низким уровнем износостойкости и настроить первые для кэширования операций записи вторых ([требуется настройка](understand-the-cache.md#manual-configuration)).

    > [!NOTE]
    > Преимущество использования только NVMe или SSD без кэша состоит в том, что вы получаете доступную емкость с каждого диска. Место не "тратится" на кэширование, что может быть привлекательным при небольших масштабах.

## <a name="option-2--balancing-performance-and-capacity"></a>Вариант 2 — баланс между производительностью и емкостью

Для сред с различными приложениями и рабочими нагрузками, а также с жесткими требованиями к производительности и другими, которые требуют значительного объема хранилища, следует посетить "гибридный" с помощью кэширования NVMe или SSDs для больших жестких дисков.

![Варианты гибридного развертывания для балансировки производительности и емкости](media/choosing-drives-and-resiliency-types/Hybrid-Deployment-Possibilities.png)

1. **NVMe + HDD**. Диски NVMe ускоряют операции чтения и записи, кэшируя их. Кэширование операций чтения позволяет жестким дискам сосредоточиться на записи. Кэширование операций записи помогает справиться с пиками, объединить операции записи и переносить их только при необходимости искусственно сериализованным способом, который оптимизирует IOPS и пропускную способность ввода-вывода жестких дисков. Это позволяет получить характеристики записи, аналогичные NVMe, а для часто или недавно прочитанных данных — и характеристики чтения, аналогичные NVMe.

2. **SSD + жесткий диск**. Аналогично сказанному выше, SSD-диски ускоряют операции чтения и записи, кэшируя их. Это обеспечивает характеристики записи, аналогичные SSD, а для часто или недавно прочитанных данных — характеристики чтения, аналогичные SSD.

    Существует еще один вариант, а не Exotic: использовать диски *всех трех* типов.

3. **NVMe + SSD + HDD.** В таком случае диски NVMe кэшируют данные для дисков остальных типов. Вы можете создавать тома на твердотельных накопителях, а тома на жестких дисках — параллельно в одном кластере, что ускоряется через NVMe. Тома на SSD совпадают с конфигурацией в развертывании только с флэш-накопителями, а тома на жестких дисках — с "гибридными" развертываниями, описанными выше. По смыслу это похоже на два пула с независимым управлением емкостью, циклами сбоев и восстановления и т. д.

    > [!IMPORTANT]
    > Рекомендуем использовать уровень SSD для размещения самых требовательных к производительности рабочих нагрузок в системе только с флэш-накопителями.

## <a name="option-3--maximizing-capacity"></a>Вариант 3 — максимальное увеличение емкости

Для рабочих нагрузок, требующих большой емкости и записи, таких как архивация, целевые объекты резервного копирования, хранилища данных или "холодное" хранилище, необходимо объединить несколько твердотельных накопителей для кэширования с большим количеством больших жестких дисков для емкости.

![Варианты развертывания для максимального увеличения емкости](media/choosing-drives-and-resiliency-types/maximizing-capacity.png)

1. **SSD + жесткий диск**. SSD-диски кэшируют операции чтения и записи для обработки пиков, получения высокой производительности записи и оптимизированного переноса на жесткие диски в дальнейшем.

>[!IMPORTANT]
>Конфигурация только с дисковыми настройками не поддерживается. Высокий уровень кэширования ендуранце твердотельных накопителей для малых ендуранце твердотельных накопителей не рекомендуется.

## <a name="sizing-considerations"></a>Рекомендации по выбору размера

### <a name="cache"></a>Кэш

У каждого сервера должно быть по крайней мере два диска кэша (это минимум, необходимый для обеспечения избыточности). Рекомендуем делать число накопителей-хранилищ кратным числу кэш-накопителей. Например, при наличии четырех дисков кэша вы получите более устойчивую производительность с восемью дисками емкости (соотношение 1:2), чем 7 или 9.

Размер кэша должен соответствовать рабочему набору приложений и рабочих нагрузок, например ко всем данным, которые они активно считывают и записывают в любое заданное время. Других требований к размеру кэша не существует. Для развертываний с жестких дисками достаточно места — 10% емкости. Например, если на каждом сервере имеется 4 жестких диска объемом 4 ТБ = 16 ТБ, то 2 x 800 ГБ SSD = 1,6 ТБ кэша на сервер. Для всех развертываний Flash, особенно с высоким ендуранце] ( https://techcommunity.microsoft.com/t5/storage-at-microsoft/understanding-ssd-endurance-drive-writes-per-day-dwpd-terabytes/ba-p/426024) SSDs, можно начать с более чем на 5% емкости. Например, если на каждом сервере имеется 24 x 1,2 ТБ SSD = 28,8 ТБ емкости, то 2 x 750 ГБ NVMe = 1,5 ТБ кэша на сервер. Вы всегда можете добавить или удалить кэш-накопители позже для оптимизации.

### <a name="general"></a>Общие сведения

Рекомендуем ограничить общую емкость хранилища на каждый сервер приблизительно 400 ТБ (ТБ). Чем больше объем хранилища на сервер, тем больше времени необходимо для повторной синхронизации данных после простоя или перезагрузки, например при применении обновлений программного обеспечения. Текущий максимальный размер для пула носителей составляет 4 петабайтов (PB) (4 000 ТБ) для Windows Server 2019 или 1 петабайтного уровня для Windows Server 2016.

## <a name="additional-references"></a>Дополнительные ссылки

- [Обзор Локальных дисковых пространств](storage-spaces-direct-overview.md)
- [Общие сведения о кэше локальных дисковых пространств](understand-the-cache.md)
- [Требования к оборудованию Локальные дисковые пространства](storage-spaces-direct-hardware-requirements.md)
- [Планирование томов в локальных дисковых пространствах](plan-volumes.md)
- [Отказоустойчивость и эффективность хранения](storage-spaces-fault-tolerance.md)
