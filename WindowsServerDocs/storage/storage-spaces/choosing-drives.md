---
ms.assetid: 1368bc83-9121-477a-af09-4ae73ac16789
title: Выбор дисков для локальных дисковых пространств
ms.prod: windows-server-threshold
ms.author: cosdar
ms.manager: eldenc
ms.technology: storage-spaces
ms.topic: article
author: cosmosdarwin
ms.date: 10/08/2018
ms.localizationpriority: medium
ms.openlocfilehash: 8bdce646c631b56309f86292f0895fe80b0adf31
ms.sourcegitcommit: afb0602767de64a76aaf9ce6a60d2f0e78efb78b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/20/2019
ms.locfileid: "67284502"
---
# <a name="choosing-drives-for-storage-spaces-direct"></a>Выбор дисков для локальных дисковых пространств

>Относится к: 2019 Windows, Windows Server 2016

В этом разделе приведены рекомендации по выбору носителей для [локальных дисковых пространств](storage-spaces-direct-overview.md), которые будут соответствовать вашим требованиям к производительности и емкости.

## <a name="drive-types"></a>Типы дисков

Локальные дисковые пространства в настоящее время поддерживают работу с тремя типами дисков:

<table>
    <tr style="border: 0;">
        <td style="padding: 10px; border: 0; width:70px">
            <img src="media/understand-the-cache/NVMe-100px.png">
        </td>
        <td style="padding: 10px; border: 0;" valign="middle">
            <b>NVMe</b> (Non-Volatile Memory Express) — это твердотельные диски, подключенные непосредственно к шине PCIe. Распространенные форм-факторы: 2,5 дюйма U.2, плата расширения PCIe (AIC) и M.2. NVMe обеспечивает повышенный уровень IOPS и производительности ввода-вывода и IO с минимальной среди всех поддерживаемых на сегодня дисков задержкой.
        </td>
    </tr>
    <tr style="border: 0;">
        <td style="padding: 10px; border: 0; width:70px" >
            <img src="media/understand-the-cache/SSD-100px.png">
        </td>
        <td style="padding: 10px; border: 0;" valign="middle">
            <b>SSD</b> — это твердотельные накопители, которые подключаются к стандартным разъемам SATA и SAS.
        </td>
    </tr>
    <tr style="border: 0;">
        <td style="padding: 10px; border: 0; width:70px">
            <img src="media/understand-the-cache/HDD-100px.png">
        </td>
        <td style="padding: 10px; border: 0;" valign="middle">
            <b>Жесткие диски</b> — это вращающиеся механические магнитные диски большой емкости.
        </td>
    </tr>
</table>

## <a name="built-in-cache"></a>Встроенный кэш

Локальные дисковые пространства обладают встроенным серверным кэшем. Это большой, постоянно работающий в режиме реального времени кэш чтения и записи. При развертывании с несколькими типами дисков он автоматически использует все самые быстрые диски. Остальные накопители используются для емкости.

Подробнее см. в разделе [Общие сведения о кэше локальных дисковых пространств](understand-the-cache.md).

## <a name="option-1--maximizing-performance"></a>Вариант 1 — оптимизация производительности

Чтобы получить предсказуемую и согласованную задержку менее миллисекунды между случайными операциями чтения и записи любых данных, очень высокое значение IOPS (мы получили [более шести миллионов](https://www.youtube.com/watch?v=0LviCzsudGY&t=28m)!) или пропускную способность ввода-вывода (мы добились значения более [1 ТБ/с](https://www.youtube.com/watch?v=-LK2ViRGbWs&t=16m50s)!), необходимо полностью перейти на флэш-накопители.

Это можно сделать тремя способами:

![Варианты развертывания только с флэш-накопителями](media/choosing-drives-and-resiliency-types/All-Flash-Deployment-Possibilities.png)

1. **Все NVMe.** Использование только накопителей NVMe обеспечивает непревзойденную производительность и наиболее предсказуемую задержку. Если все диски одной модели, кэш отсутствует. Вы также можете смешивать модели NVMe с высоким и низким уровнем износостойкости и настроить первые для кэширования операций записи вторых ([требуется настройка](understand-the-cache.md#manual)).

2. **NVMe и SSD.** При использовании NVMe вместе с SSD накопители NVMe автоматически кэшируют операции записи на SSD. Это позволяет объединить операции записи в кэше и переносить их только при необходимости, чтобы уменьшить износа SSD. Так можно получить характеристики, аналогичные NVMe, при этом операции чтения обслуживаются непосредственно на быстрых SSD.

3. **Все SSD.** Как и при использовании только накопителей NVMe, кэш отсутствует, если все диски одной модели. Вы также можете смешивать накопители с высоким и низким уровнем износостойкости и настроить первые для кэширования операций записи вторых ([требуется настройка](understand-the-cache.md#manual)).

   >[!NOTE]
   > Преимущество использования только NVMe или SSD без кэша состоит в том, что вы получаете доступную емкость с каждого диска. Место не «тратится» на кэширование, что может быть привлекательным при небольших масштабах.

## <a name="option-2--balancing-performance-and-capacity"></a>Вариант 2 — балансировка производительности и емкости

В средах с различными приложениями и рабочими нагрузками, одни из которых отличаются жесткими требованиями к производительности, а другим необходима значительная емкость хранилища, следует выбрать "гибридный" вариант с кэшированием на NVMe или SSD для больших жестких дисков.

![Варианты гибридного развертывания](media/choosing-drives-and-resiliency-types/Hybrid-Deployment-Possibilities.png)

1. **NVMe + жесткие диски**. Диски NVMe ускоряют операции чтения и записи, кэшируя их. Кэширование операций чтения позволяет жестким дискам сосредоточиться на записи. Кэширование операций записи помогает справиться с пиками, объединить операции записи и переносить их только при необходимости искусственно сериализованным способом, который оптимизирует IOPS и пропускную способность ввода-вывода жестких дисков. Это позволяет получить характеристики записи, аналогичные NVMe, а для часто или недавно прочитанных данных — и характеристики чтения, аналогичные NVMe.

2. **SSD + жесткий диск**. Аналогично сказанному выше, SSD-диски ускоряют операции чтения и записи, кэшируя их. Это обеспечивает характеристики записи, аналогичные SSD, а для часто или недавно прочитанных данных — характеристики чтения, аналогичные SSD.

    Существует еще один, довольно экзотический вариант: использовать диски *всех трех* типов.

3. **NVMe и SSD + жесткий ДИСК.** В таком случае диски NVMe кэшируют данные для дисков остальных типов. Преимущество состоит в том, что вы можете создавать тома на SSD и на жестких дисках параллельно в одном кластере, все из которых будут ускоряться NVMe. Тома на SSD совпадают с конфигурацией в развертывании только с флэш-накопителями, а тома на жестких дисках — с «гибридными» развертываниями, описанными выше. По смыслу это похоже два пула с независимым управлением емкостью, циклами сбоев и восстановления и т. д.

   >[!IMPORTANT]
   > Рекомендуем использовать уровень SSD для размещения самых требовательных к производительности рабочих нагрузок в системе только с флэш-накопителями.

## <a name="option-3--maximizing-capacity"></a>Вариант 3 — максимальное увеличение емкости

Для рабочих нагрузок, которые требуют большой емкости и редко используются для записи (например, архивация, резервное копирование, хранилище данных, автономное неструктурированное защищенное хранилище), нужно комбинировать несколько дисков SSD для кэширования со множеством больших жестких дисков для хранения.

![Варианты развертывания для максимального увеличения емкости](media/choosing-drives-and-resiliency-types/maximizing-capacity.png)

1. **SSD + жесткий диск**. SSD-диски кэшируют операции чтения и записи для обработки пиков, получения высокой производительности записи и оптимизированного переноса на жесткие диски в дальнейшем.

>[!IMPORTANT]
>Конфигурация с жестких дисков только не поддерживается. Высокий уровень нагрузочное тестирование SSDs, кэширование, низкой нагрузочное тестирование SSDs не рекомендуется.

## <a name="sizing-considerations"></a>Вопросы, связанные с определением размера

### <a name="cache"></a>Кэш

У каждого сервера должно быть по крайней мере два диска кэша (это минимум, необходимый для обеспечения избыточности). Рекомендуется делать число накопителей-хранилищ кратным числу кэш-накопителей. Например, если у вас четыре кэш-накопителя, то при наличии восьми накопителей-хранилищ (соотношение 1:2) производительность будет более стабильной, чем при семи или девяти.

Размер кэша следует задавать для размещения рабочего набора приложений и рабочих нагрузок, т. е. все данные они активно читают и записывают в любой момент времени. Других требований к размеру кэша не существует. Для развертываний с HDD справедливого отправной точки составляет 10% от емкости — например, если каждый сервер имеет 4 x 4 ТБ HDD = 16 ТБ емкости, затем 2 x 800 ГБ SSD = 1,6 ТБ кэша на каждом сервере. Для флэш-памяти развертываний, особенно при использовании очень [высокой нагрузочное тестирование](https://blogs.technet.microsoft.com/filecab/2017/08/11/understanding-dwpd-tbw/) SSDs, он может быть честным, чтобы запустить ближе к 5% от общей мощности — например, если каждый сервер имеет 24 x 1,2 ТБ SSD = 28,8 ТБ емкости, затем 2 x 750 ГБ NVMe = 1,5 ТБ кэша на каждом сервере. Вы всегда можете добавить или удалить кэш-накопители позже для оптимизации.

### <a name="general"></a>Общие

Мы рекомендуем ограничить общий объем хранилища на сервер — приблизительно до 100 терабайт (ТБ). Чем больше объем хранилища на сервер, тем больше времени необходимо для повторной синхронизации данных после простоя или перезагрузки, например при применении обновлений программного обеспечения.

Текущий максимальный размер каждого пула носителей — 4 до нескольких петабайт (PB) (4 000 ТБ) для Windows Server 2019 или 1 ПБ для Windows Server 2016.

## <a name="see-also"></a>См. также

- [Общие сведения о дисковых хранилища](storage-spaces-direct-overview.md)
- [Понять, в кэш в Storage Spaces Direct](understand-the-cache.md)
- [Требования к оборудованию прямые дисковые пространства в хранилище](storage-spaces-direct-hardware-requirements.md)
- [Планирование томов в дисковых пространств](plan-volumes.md)
- [Отказоустойчивость и эффективность хранения](storage-spaces-fault-tolerance.md)
