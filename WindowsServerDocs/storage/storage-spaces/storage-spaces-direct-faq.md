---
title: Локальные дисковые пространства-часто задаваемые вопросы
description: Узнайте, как насчет Локальные дисковые пространства
ms.prod: windows-server
ms.author: kaushik
ms.technology: storage-spaces
ms.topic: article
author: kaushika-msft
ms.date: 10/24/2018
ms.localizationpriority: medium
ms.openlocfilehash: 5c033a5a810d1cdedeb4c733ba4bf0ac99e669f0
ms.sourcegitcommit: 3483f886f331b9d954a0e5dba8e910dbe5ee5765
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/08/2020
ms.locfileid: "82977252"
---
# <a name="storage-spaces-direct---frequently-asked-questions-faq"></a>Локальные дисковые пространства-часто задаваемые вопросы

В этой статье перечислены распространенные и часто задаваемые вопросы, связанные с [Локальные дисковые пространства](storage-spaces-direct-overview.md).

## <a name="when-you-use-storage-spaces-direct-with-3-nodes-can-you-get-both-performance-and-capacity-tiers"></a>При использовании Локальные дисковые пространства с тремя узлами можно получить уровни производительности и емкости?

Да, можно получить уровень производительности и емкости в конфигурации Локальные дисковые пространства с 2 узлами или 3 узлами. Однако необходимо убедиться, что у вас есть 2 устройства емкости. Это означает, что необходимо использовать все три типа устройств: NVME, SSD и HDD.

## <a name="refs-file-system-provides-real-time-tiering-with-storage-spaces-direct-does-refs-provide-the-same-functionality-with-shared-storage-spaces-in-2016"></a>Файловая система ReFS обеспечивает распределение по уровням в реальном времени с помощью Локальные дисковые пространства. Предоставляет ли REFS те же функциональные возможности, что и общие дисковые пространства в 2016?

Нет, распределение по уровням в реальном времени с помощью общих дисковых пространств с 2016 не выполняется. Это только для Локальные дисковые пространства.

## <a name="can-i-use-an-ntfs-file-system-with-storage-spaces-direct"></a>Можно ли использовать файловую систему NTFS с Локальные дисковые пространства?

Да, можно использовать файловую систему NTFS с Локальные дисковые пространства. Однако рекомендуется использовать REFS. NTFS не обеспечивает распределение по уровням в реальном времени.

## <a name="i-have-configured-2-node-storage-spaces-direct-clusters-where-the-virtual-disk-is-configured-as-2-way-mirror-resiliency-if-i-add-a-new-fault-domain-will-the-resiliency-of-the-existing-virtual-disk-change"></a>Я настроил 2 узла Локальные дисковые пространства кластеры, где виртуальный диск настроен как отказоустойчивая зеркальная копия. Если добавить новый домен сбоя, будет ли изменена устойчивость существующего виртуального диска?

После добавления нового домена сбоя новые создаваемые виртуальные диски будут переходить на 3-сторонние зеркала. Однако существующий виртуальный диск останется 2-сторонним зеркальным диском. Вы можете скопировать данные на новые виртуальные диски из существующих томов, чтобы получить преимущества новой устойчивости.

## <a name="the-storage-spaces-direct-was-created-using-the-autoconfig0-switch-and-the-pool-was-created-manually-when-i-try-to-query-the-storage-spaces-direct-pool-to-create-a-new-volume-i-get-a-message-saying-enable-clusters2d-again-what-should-i-do"></a>Локальные дисковые пространства был создан с помощью автонастройки: 0 коммутатор и пул были созданы вручную. При попытке запросить пул Локальные дисковые пространства для создания нового тома я получаю сообщение: "Enable-ClusterS2D опять".   Что следует делать?

По умолчанию при настройке Локальные дисковые пространства с помощью командлета Enable-S2D командлет выполняет все необходимые действия. Он создает пул и уровни. При использовании автонастройки: 0 все должно выполняться вручную. Если вы создали только пул, уровень не обязательно будет создан. Вы получите сообщение об ошибке "Enable-ClusterS2D" (еще раз), если вы не создали уровни на всех уровнях или не создали уровни так, как они соответствуют подключенным устройствам. Не рекомендуется использовать параметр автоматической настройки в рабочей среде.

## <a name="is-it-possible-to-add-a-spinning-disk-hdd-to-the-storage-spaces-direct-pool-after-you-have-created-storage-spaces-direct-with-ssd-devices"></a>Можно ли добавить цикличный диск (HDD) в пул Локальные дисковые пространства после создания Локальные дисковые пространства с устройствами SSD?

Нет. По умолчанию при использовании одного типа устройства для создания пула не настраивает диски кэша, и все диски будут использоваться для емкости. Вы можете добавить диски NVME в конфигурацию, а диски NVME будут настроены для кэширования.

## <a name="i-have-configured-a-2-rack-fault-domain-rack-1-has-2-fault-domains-rack-2-has-1-fault-domain-each-server-has-4-capacity-100-gb-devices-can-i-use-all-1200-gb-of-space-from-the-pool"></a>Я настроил домен сбоя из двух стоек: в СТОЙКе 1 есть 2 домена сбоя, в СТОЙКе 2 — 1 домен сбоя. На каждом сервере есть 4 емкости 100 ГБ устройств. Можно ли использовать все 1 200 ГБ пространства из пула?

Нет, можно использовать только 800 ГБ. В домене сбоя в стойке необходимо убедиться в том, что у вас есть двусторонняя зеркальная конфигурация, чтобы каждый Чак и ее дубликат в другой стойке.

## <a name="what-should-the-cache-size-be-when-i-am-configuring-storage-spaces-direct"></a>Каков размер кэша при настройке Локальные дисковые пространства?

Размер кэша должен соответствовать рабочему набору (данные, которые активно считываются или записываются в любой момент времени) приложений и рабочих нагрузок.

## <a name="how-can-i-determine-the-size-of-cache-that-is-being-used-by-storage-spaces-direct"></a>Как определить размер кэша, используемого Локальные дисковые пространства?

Для проверки промахов кэша используйте встроенный служебный монитор. Проверьте число промахов кэша в секунду с помощью счетчика гибридного диска хранилища кластера. Помните, что если в кэше слишком много операций чтения, кэш имеет недостаточный размер и его можно развернуть.

## <a name="is-there-a-calculator-that-shows-the-exact-size-of-the-disks-that-are-being-set-aside-for-cache-capacity-and-resiliency-that-would-enable-me-to-plan-better"></a>Есть ли калькулятор, показывающий точный размер дисков, которые задаются для кэша, емкости и устойчивости, что позволит мне лучше спланировать их?

С помощью калькулятора дисковых пространств можно помочь в планировании. Он доступен по адресу https://aka.ms/s2dcalc.

## <a name="what-is-the-best-configuration-that-you-would-recommend-when-configuring-6-servers-and-3-racks"></a>Какова лучшая конфигурация, рекомендуемая при настройке 6 серверов и 3 стоек?

Используйте 2 сервера на каждой стойке, чтобы получить устойчивость виртуального диска для 3-стороннего зеркала. Помните, что конфигурация стойки будет работать правильно только в том случае, если вы предоставляете конфигурацию ОС в том виде, в котором она размещена в стойке.

## <a name="can-i-enable-maintenance-mode-for-a-specific-disk-on-a-specific-server-in-storage-spaces-direct-cluster"></a>Можно ли включить режим обслуживания для определенного диска на определенном сервере в Локальные дисковые пространства кластере?

Да, можно включить режим обслуживания хранилища на определенном диске и определенном домене сбоя. Команда Enable-Сторажемаинтенанцемоде вызывается автоматически при приостановке узла. Его можно включить для конкретного диска, выполнив следующую команду:

```powershell
Get-PhysicalDisk -SerialNumber <SerialNumber> | Enable-StorageMaintenanceMode
```

## <a name="is-storage-spaces-direct-supported-on-my-hardware"></a>Локальные дисковые пространства поддерживается на моем оборудовании?

Для проверки поддержки рекомендуется обратиться к поставщику оборудования. Поставщики оборудования проверяют решение на оборудовании и комментарии о том, поддерживается ли он. Например, на момент написания этой статьи такие серверы, как R730/R730xd/R630 с более чем 8 слотами дисков, могут поддерживать SES и совместимы с Локальные дисковые пространства. Dell поддерживает только HBA330 с Локальные дисковые пространства. R620 не поддерживает SES и несовместим с Локальные дисковые пространства.

Для получения дополнительных сведений о поддержке оборудования перейдите на следующий веб-сайт: каталог Windows Server.

## <a name="how-does-storage-spaces-direct-make-use-of-ses"></a>Как Локальные дисковые пространства использовать SES?

В Локальные дисковые пространства используется сопоставление служб корпуса SCSI (SES), чтобы обеспечить устойчивое распределение слоев данных и метаданных между доменами сбоя. Если оборудование не поддерживает SES, сопоставление корпусов отсутствует, и размещение данных не является устойчивым.

## <a name="which-command-can-you-use-to-check-the-physical-extent-for-a-virtual-disk"></a>Какую команду можно использовать для проверки физического экстента виртуального диска?

Этот:

```powershell
get-virtualdisk -friendlyname "xyz" | get-physicalextent
```
