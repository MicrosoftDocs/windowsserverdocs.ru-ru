---
title: Обзор локальных дисковых пространств
ms.prod: windows-server-threshold
ms.author: cosdar
ms.manager: dongill
ms.technology: storage-spaces
ms.topic: article
author: cosmosdarwin
ms.date: 03/26/2019
ms.assetid: 8bd0d09a-0421-40a4-b752-40ecb5350ffd
description: Обзор локальных дисковых пространств, это функция Windows Server, которая позволяет кластеру серверов с внутренней памятью в решение программно определяемого хранилища.
ms.localizationpriority: medium
ms.openlocfilehash: d71e4fc404f760102a2b22f71bbeec680868e9b8
ms.sourcegitcommit: e558dda2774345e9ad17ff04b759f68c59d88139
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/26/2019
ms.locfileid: "9262787"
---
# Обзор локальных дисковых пространств

>Область применения: Windows Server 2016, Windows Server 2019 г.

Локальные дисковые пространства используют стандартные серверы с локально подключенными дисками для создания программно-определяемого хранилища с высоким уровнем доступности и масштабируемости, причем стоимость такого хранилища значительно ниже стоимости традиционных массивов SAN или NAS. Конвергентная или гиперконвергентная архитектура существенно упрощает подготовку ресурсов и развертывание, при этом функции такие как кэширование, уровни хранения и помехоустойчивое кодирование, вместе с последней новое оборудование, такие как сети RDMA и диски NVMe, обеспечивают непревзойденную эффективность и производительность.

Локальные дисковые пространства включается в Windows Server 2019 Datacenter, Windows Server 2016 Datacenter и [Windows Server сборки Insider Preview](https://insider.windows.com/for-business-getting-started-server/). 

Для других приложений дисковых пространств, например для кластеров общих SAS и изолированных серверов см. в разделе [Обзор дисковых пространств](overview.md). Если вы ищете сведения об использовании дисковых пространств на ПК с Windows 10, см. в разделе [Дисковые пространства в Windows 10](https://support.microsoft.com/help/12438/windows-10-storage-spaces).

<table>
    <tr style="border: 0;">
        <td style="padding: 5px; border: 0;">
            <strong>Общие сведения</a></strong>
            <ul>
              <li>Обзор (вы здесь)</li>
              <li><a href="understand-the-cache.md">Общие сведения о кэше</a></li>
              <li><a href="storage-spaces-fault-tolerance.md">Отказоустойчивость и экономичность хранения</a></li>
              <li><a href="drive-symmetry-considerations.md">Рекомендации по симметрии диска</a></li>
              <li><a href="understand-storage-resync.md">Принцип работы и отслеживание повторной синхронизации хранилища</a></li>
              <li><a href="understand-quorum.md">Общие сведения о кворума кластера и пул</a></li>
              <li><a href="cluster-sets.md">Наборы кластеров</a></li>
            </ul>
        </td>
        <td style="padding: 5px; border: 0;">
            <strong>План</a></strong>
            <ul>
              <li><a href="storage-spaces-direct-hardware-requirements.md">Требования к оборудованию</a></li>
              <li><a href="csv-cache.md">Использование кэша чтения в памяти CSV</li>
              <li><a href="choosing-drives.md">Выбор дисков</a></li>
              <li><a href="plan-volumes.md">Планирование томов</a></li>
              <li><a href="storage-spaces-direct-in-vm.md">Использование кластеров гостевых виртуальных машин</a></li>
              <li><a href="storage-spaces-direct-disaster-recovery.md">Аварийное восстановление</a></li>
            </ul>
        </td>
    </tr>
    <tr style="border: 0;">
        <td style="padding: 5px; border: 0;">
            <strong>Развертывание</a></strong>
            <ul>
                    <li><a href="deploy-storage-spaces-direct.md">Развертывание локальных дисковых пространств</a></li>
                    <li><a href="create-volumes.md">Создание томов</a></li>
              <li><a href="nested-resiliency.md">Вложенная устойчивость</a></li>
              <li><a href="../../failover-clustering/manage-cluster-quorum.md">Настройка кворума</a></li>
              <li><a href="upgrade-storage-spaces-direct-to-windows-server-2019.md">Обновление кластера локальных дисковых пространств до Windows Server 2019</a></li>
            </ul>
        </td>        
        <td style="padding: 5px; border: 0;">
            <strong>Управление</a></strong>
            <ul>
              <li><a href="../../manage/windows-admin-center/use/manage-hyper-converged.md">Администрирование с помощью Windows Admin Center</a></li>
              <li><a href="add-nodes.md">Добавление серверов или дисков</a></li>
              <li><a href="maintain-servers.md">Перевод сервера в автономный режим для обслуживания</li>
              <li><a href="remove-servers.md">Удаление серверов</a></li>
              <li><a href="resize-volumes.md">Увеличение размеров томов</a></li>
              <li><a href="../update-firmware.md">Обновление встроенного ПО дисков</a></li>
              <li><a href="performance-history.md">Журнал производительности</a></li>
              <li><a href="delimit-volume-allocation.md">Разграничение выделения томов</a></li>
              <li><a href="configure-azure-monitor.md">Используйте монитор Azure на гиперконвергентного кластера</a></li>
            </ul>
        </td>
    </tr>
    <tr style="border: 0;">
         <td style="padding: 5px; border: 0;">
            <strong>Устранение неполадок</a></strong>
            <ul>
              <li><a href="storage-spaces-states.md">Устранение неполадок работоспособности и рабочие состояния</a></li>
              <li><a href="data-collection.md">Сбор диагностических данных с локальными дисковыми пространствами</a></li>
            </ul>
         <td style="padding: 5px; border: 0;">
            <strong>Последние записи блога</a></strong>
            <ul>
              <li><a href="https://blogs.technet.microsoft.com/filecab/2018/10/30/windows-server-2019-and-intel-optane-dc-persistent-memory/">13.7 миллионов операций ввода-ВЫВОДА с помощью локальных дисковых пространств: новая запись отрасли для гиперконвергентной инфраструктурой</a></li>
              <li><a href="https://blogs.technet.microsoft.com/filecab/2018/10/02/hci-the-countdown-clock-starts-now/">Гиперконвергентная инфраструктура в Windows Server 2019 - обратного отсчета начинается сейчас!</a></li>
              <li><a href="https://blogs.technet.microsoft.com/filecab/2018/06/27/windows-server-summit-recap/">Пять большие объемы сообщениях Summit Windows Server</a></li>
              <li><a href="https://blogs.technet.microsoft.com/filecab/2018/03/27/storage-spaces-direct-momentum/">10 000 кластеров локальных дисковых пространств и инвентаризации …</a></li>
            </ul>
</table>

## Видеоролики

**Краткий обзор видео (5 мин)**

<iframe src="https://www.youtube-nocookie.com/embed/raeUiNtMk0E" width="560" height="315" allowfullscreen></iframe>

**Локальные дисковые пространства в Microsoft Ignite 2018 г. (1 час)**

[Посмотрите на YouTube](https://www.youtube.com/watch?v=5kaUiW3qo30)

**Локальные дисковые пространства на конференции Microsoft Ignite 2017 (1 час)**

[Посмотрите на YouTube](https://www.youtube.com/watch?v=YDr2sqNB-3c)

**Запуск события на Microsoft Ignite 2016 (1 час)**

[Посмотрите на YouTube](https://www.youtube.com/watch?v=-LK2ViRGbWs)

## Основные преимущества

<table>
    <tr style="border: 0;">
        <td style="padding: 10px; border: 0; width:100px">
            <img src="media/storage-spaces-direct-in-windows-server-2016/simplicity-icon.png" width="100" alt="">
        </td>
        <td style="padding: 10px; border: 0;">
            <b>Простота.</b> Создать кластер локальных дисковых пространств на основе стандартных серверов с ОС Windows Server2016 можно меньше чем за 15минут. Пользователи System Center могут выполнить развертывание, установив один флажок.
        </td>
    </tr>
    <tr style="border: 0;">
        <td style="padding: 10px; border: 0; width:100px">
            <img src="media/storage-spaces-direct-in-windows-server-2016/performance-icon.png" width="100" alt="">
        </td>
        <td style="padding: 10px; border: 0;">
            <b>Непревзойденная производительность.</b> Как при использовании только флэш-памяти, так и при использовании гибридных носителей локальные дисковые пространства позволяют обеспечить <a href="https://blogs.technet.microsoft.com/filecab/2016/07/26/storage-iops-update-with-storage-spaces-direct/">скорость ввода-вывода более 150000операций в секунду в смешанном режиме и более 4000операций в секунду в произвольном режиме на сервер</a> со стабильно низкой задержкой. Это достигается благодаря архитектуре со встроенной низкоуровневой оболочкой, встроенному кэшу чтения и записи и поддержке передовых дисков NVMe, подключаемых непосредственно к шине PCIe.
        </td>
    </tr>
    <tr style="border: 0;">
        <td style="padding: 10px; border: 0; width:100px">
            <img src="media/storage-spaces-direct-in-windows-server-2016/fault-tolerance-icon.png" width="100" alt="">
        </td>
        <td style="padding: 10px; border: 0;">
            <b>Отказоустойчивость. </b> Встроенные средства отказоустойчивости обрабатывают сбои дисков, серверов или компонентов, обеспечивая непрерывную доступность. В более масштабных развертываниях можно также настроить <a href="../../failover-clustering/fault-domains.md">отказоустойчивость шасси и стоек</a>. При сбое оборудования просто отключите его: программное обеспечение восстановит работоспособность самостоятельно, без выполнения сложных действий по управлению.
        </td>
    </tr>
    <tr style="border: 0;">
        <td style="padding: 10px; border: 0; width:100px">
            <img src="media/storage-spaces-direct-in-windows-server-2016/efficiency-icon.png" width="100" alt="">
        </td>
        <td style="padding: 10px; border: 0;">
            <b>Эффективность ресурсов.</b> Помехоустойчивое кодирование повышает экономичность хранения в 2,4раза, а уникальные инновации, такие как локальные коды реконструкции и уровни ReFS в режиме реального времени, позволяют распространить эти преимущества на жесткие диски и смешанные (холодные и горячие) рабочие нагрузки. При этом снижается загрузка ЦП, и ресурсы высвобождаются для наиболее важной задачи— выполнения виртуальных машин.
        </td>
    </tr>
    <tr style="border: 0;">
        <td style="padding: 10px; border: 0; width:100px">
            <img src="media/storage-spaces-direct-in-windows-server-2016/manageability-icon.png" width="100" alt="">
        </td>
        <td style="padding: 10px; border: 0;">
            <b>Управляемость.</b> Используйте <a href="../storage-qos/storage-qos-overview.md">средства управления качеством обслуживания хранилища</a>, чтобы контролировать работу наиболее загруженных виртуальных машин с помощью минимальных и максимальных значений скорости ввода-вывода на виртуальную машину. <a href="../../failover-clustering/health-service-overview.md">Служба работоспособности</a> предоставляет встроенные возможности непрерывного мониторинга и оповещения, а новые интерфейсы API позволяют легко собирать расширенные метрики производительности и емкости в масштабе всего кластера.
        </td>
    </tr>
    <tr style="border: 0;">
        <td style="padding: 10px; border: 0; width:100px">
            <img src="media/storage-spaces-direct-in-windows-server-2016/scalability-icon.png" width="100" alt="">
        </td>
        <td style="padding: 10px; border: 0;">
            <b>Масштабируемость.</b> Поддерживается масштабирование до 16 серверов и более чем 400 дисков, что позволяет получать объем хранилища в 1 петабайт (1000 терабайт) на кластер. Чтобы осуществить масштабирование, просто добавьте диски или серверы. Локальные дисковые пространства автоматически подключат новые диски и начнут использовать их. Эффективность и производительность хранилища повышают предсказуемость при масштабировании.
        </td>
    </tr>
</table>

## Варианты развертывания

Локальные дисковые пространства предусматривают два разных варианта развертывания:

### конвергентное;

**хранение и вычисление в отдельных кластерах.** При конвергентном развертывании, также известном как дезагрегированное, масштабируемый файловый сервер (SoFS) размещается поверх локальных дисковых пространств для предоставления подключенного к сети хранилища посредством общих папок SMB3. Это позволяет масштабировать вычислительные ресурсы и рабочие нагрузки независимо от кластера хранилища, особенно в масштабных развертываниях, например Hyper-V IaaS (инфраструктура как услуга), для поставщиков услуг и крупных предприятий.

![Дисковые пространства прямого подключения обслуживают хранилище с помощью функции масштабирования файлового сервера в виртуальные машины Hyper-V на другом сервере или кластере](media/storage-spaces-direct-in-windows-server-2016/converged-minimal.png)

### Гиперконвергентные

**Один кластер для вычислений и хранения данных.** При гиперконвергентном развертывании виртуальные машины Hyper-V или базы данных SQL Server работают непосредственно на серверах, предоставляющих хранилище, и сохраняют файлы в локальных томах. Это устраняет необходимость в настройке доступа к файловым серверам и разрешений. Кроме того, снижается стоимость оборудования при развертывании на малых и средних предприятиях, а также в удаленных офисах и филиалах. См. в разделе, [Развертывание локальных дисковых пространств](deploy-storage-spaces-direct.md).

![Дисковые пространства прямого подключения обслуживают хранилище в виртуальных машинах Hyper-V на одном и том же кластере](media/storage-spaces-direct-in-windows-server-2016/hyper-converged-minimal.png)

## Принцип работы

Локальные дисковые пространства являются развитием дисковых пространств, впервые представленных в Windows Server2012. В них используется множество существующих возможностей Windows Server, таких как отказоустойчивая кластеризация, файловая система CSV, протокол SMB3 и, конечно, дисковые пространства. В них также были реализованы новые технологии, в первую очередь шина Software Storage Bus.

Ниже представлен обзор стека локальных дисковых пространств.

![Стек локальных дисковых пространств](media/storage-spaces-direct-in-windows-server-2016/converged-full-stack.png)

**Оборудование для сетевого взаимодействия.** Для обмена данными между серверами локальные дисковые пространства используют протокол SMB3, включая SMB Direct и SMB Multichannel, работающий через Ethernet. Мы настоятельно рекомендуем использовать Ethernet со скоростью передачи данных более 10Гбит/с и удаленным доступом к памяти (RDMA)— iWARP или RoCE.

**Оборудование хранилища.** От 2 до 16серверов с локально подключенными дисками SATA, SAS или NVMe. Каждый сервер должен иметь по крайней мере 2твердотельных накопителя и 4дополнительных диска. Устройства SATA и SAS должны располагаться за адаптером шины (HBA) и расширителем SAS. Мы настоятельно рекомендуем использовать тщательно спроектированные и протестированные платформы от наших партнеров (ожидаются в ближайшее время).

**Отказоустойчивая кластеризация.** Встроенная функция кластеризации Windows Server используется для подключения серверов.

**Шина Software Storage Bus.** Шина Software Storage Bus— это новая технология, представленная в локальных дисковых пространствах. Она охватывает весь кластер и создает программно-определяемую структуру хранения, в которой каждый сервер имеет доступ к локальным дискам любого другого сервера. Это можно рассматривать как замену дорогостоящим и ограниченным в своих возможностях подключениям Fibre Channel или Shared SAS.

**Кэш уровня шины хранилища.** Шина Software Storage Bus динамически связывает самые быстрые диски (например, SSD) с более медленными дисками (например, жесткими дисками) для обеспечения кэширования при чтении и записи на стороне сервера с целью ускорить ввод-вывод и повысить пропускную способность.

**Пул носителей.** Набор дисков, которые образуют основу для дисковых пространств, называется пулом носителей. Он создается автоматически, и все подходящие диски обнаруживаются и добавляются в него также автоматически. Мы настоятельно рекомендуем использовать один пул носителей в каждом кластере с параметрами по умолчанию. Прочитайте раздел [Глубокое погружение в пул носителей](https://blogs.technet.microsoft.com/filecab/2016/11/21/deep-dive-pool-in-spaces-direct/), чтобы узнать больше.

**Дисковые пространства.** Дисковые пространства обеспечивают отказоустойчивость виртуальных накопителей с помощью [зеркалирования, помехоустойчивого кодирования или обеих этих технологий](storage-spaces-fault-tolerance.md). Их можно представить как распределенный программно-определяемый массив RAID на основе дисков в пуле. В локальных дисковых пространствах виртуальные диски обычно устойчивы к одновременному сбою двух дисков или серверов (то есть применяется трехстороннее зеркалирование, при котором каждая копия данных размещается на отдельном сервере), хотя также доступна отказоустойчивость на уровне шасси или стоек.

**Resilient File System (ReFS).** ReFS— это файловая система с превосходными возможностями, предназначенная специально для виртуализации. Она позволяет существенно ускорить операции с файлами VHDX, такие как создание, расширение и объединение контрольных точек, а также имеет встроенные средства проверки контрольной суммы для обнаружения и исправления ошибок на уровне отдельных битов. В ней также реализовано переключение уровней в режиме реального времени, позволяющее переносить данные между "активными" и "пассивными" уровнями хранения в режиме реального времени в соответствии с интенсивностью использования.

**Общие тома кластера.** Файловая система CSV объединяет все тома ReFS в единое пространство имен, доступное с любого сервера, так что для каждого сервера все тома представляются как локально подключенные.

**Масштабируемый файловый сервер.** Этот последний уровень необходим только в конвергентных развертываниях. Он обеспечивает удаленный доступ к файлам со стороны клиентов, например другого кластера Hyper-V, через сеть по протоколу SMB3. Таким образом локальные дисковые пространства превращаются в подключенное к сети хранилище (NAS).

## Истории

Существует [более 10 000 кластеров](https://blogs.technet.microsoft.com/filecab/2018/03/27/storage-spaces-direct-momentum/) по всему миру запущенного локальных дисковых пространств. Организации любого размера, с небольшими организациями, развертывание только два узла для крупных предприятий и закупках развертывание сотни узлов, зависят от локальных дисковых пространств для своих важных приложений и инфраструктуры.

Посетите [Microsoft.com/HCI](https://www.microsoft.com/hci) читать их истории:

[![Gудалить логотипы клиент](media/storage-spaces-direct-in-windows-server-2016/customer-stories.png)](https://www.microsoft.com/hci)

## Средства управления

Следующие средства можно использовать для управления и отслеживания локальных дисковых пространств:

| ФИО | Графическое или командной строки? | Платные или включена? |
|-----------------|----------------------------|-------------------|
| [Windows Admin Center](../../manage/windows-admin-center/overview.md)     | Графический    | Включено |
| Диспетчер серверов & диспетчера отказоустойчивости кластеров                                 | Графический    | Включено |
| Windows PowerShell                                                        | Командной строки | Включено |
| [System Center Virtual Machine Manager (SCVMM)](https://technet.microsoft.com/system-center-docs/vmm/manage/manage-storage-spaces-direct-vmm) & [Operations Manager (SCOM)](https://www.microsoft.com/download/details.aspx?id=54700) | Графический    | Paid     |

## Начало работы

Попробуйте локальные дисковые пространства [в Microsoft Azure](https://blogs.technet.microsoft.com/filecab/2016/05/05/s2dazuretp5/) или скачайте [ознакомительную версию Windows Server](https://go.microsoft.com/fwlink/?linkid=842602) с лицензией на 180 дней.

## См. также

-   [Отказоустойчивость и экономичность хранения](storage-spaces-fault-tolerance.md)
-   [Реплика хранилища](../storage-replica/storage-replica-overview.md)
-   [Хранилище в блоге Майкрософт](https://blogs.technet.microsoft.com/filecab/)
-   [Пропускная способность дисковых пространств прямого подключения с iWARP](https://blogs.technet.microsoft.com/filecab/2017/03/13/storage-spaces-direct-throughput-with-iwarp) (блог TechNet)
-   [Новые возможности отказоустойчивой кластеризации в Windows Server](../../failover-clustering/whats-new-in-failover-clustering.md)  
-   [Качество обслуживания хранилища](../storage-qos/storage-qos-overview.md)
-   [Поддержка Windowsдля ИТ-специалистов](https://www.microsoft.com/itpro/windows/support)
