---
title: Создание томов в локальных дисковых пространствах
description: Как создать тома в дисковых пространств с помощью Windows Admin Center и PowerShell.
ms.prod: windows-server-threshold
ms.reviewer: cosmosdarwin
author: cosmosdarwin
ms.author: cosdar
manager: eldenc
ms.technology: storage-spaces
ms.date: 06/06/2019
ms.openlocfilehash: 85eca06a5d8c103851596055099876cb53a902ad
ms.sourcegitcommit: 6ef4986391607bb28593852d06cc6645e548a4b3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/07/2019
ms.locfileid: "66810555"
---
# <a name="creating-volumes-in-storage-spaces-direct"></a>Создание томов в локальных дисковых пространствах

> Относится к: Windows Server 2019, Windows Server 2016

В этом разделе описывается создание тома в кластере дисковыми пространствами с помощью Windows Admin Center, PowerShell или Диспетчер отказоустойчивости кластеров.

> [!TIP]
> Сначала просмотрите статью [Планирование томов в локальных дисковых пространствах](plan-volumes.md).

## <a name="create-a-three-way-mirror-volume"></a>Создание тома трехстороннее зеркало

Чтобы создать том трехстороннее зеркало в Windows Admin Center: 

1. Подключение к кластеру дисковые пространства в Windows Admin Center и выберите **тома** из **средства** области.
2. На странице томов выберите **инвентаризации** , а затем выберите **создать том**.
3. В **создать том** области, введите имя для тома и оставить **устойчивости** как **трехстороннее зеркало**.
4. В **размер на жесткий ДИСК**, укажите размер тома. Например, 5 ТБ (терабайты).
5. Щелкните **Создать**.

В зависимости от размера при создании тома может занять несколько минут. Уведомления в правом верхнем углу сообщит вам при создании тома. Новый том появится в списке инвентаризации.

Посмотрите краткое видео о том, как создать том трехстороннее зеркало.

> [!VIDEO https://www.youtube-nocookie.com/embed/o66etKq70N8]

## <a name="create-a-mirror-accelerated-parity-volume"></a>Создание четности с аппаратным ускорением зеркального тома

Ускорением зеркальной четность позволяет сократить объем томов жесткого диска. Например Трехсторонняя зеркальная копия тома будет означать, что для размера каждые 10 терабайт, необходимо будет 30 терабайт как занимаемое место. Чтобы снизить затраты на занимаемое место, создайте том с аппаратным ускорением зеркальной четности. Позволяет сократить объем из 30 терабайт просто 22 терабайт, даже с 4 серверами зеркального отображения, наиболее активные 20 процентов данных, и используя четность, для которой места эффективным, для хранения rest. Вы можете настроить этот коэффициент четности и зеркальный серверы, чтобы сделать производительности и емкости компромисс, который подходит для вашей рабочей нагрузки. Например зеркальный сервер четности и 10 процентов 90 процентов дает меньшей производительностью, но упрощает размеры еще дальше.

Чтобы создать том с аппаратным ускорением зеркальной четности в Windows Admin Center:

1. Подключение к кластеру дисковые пространства в Windows Admin Center и выберите **тома** из **средства** области.
2. На странице томов выберите **инвентаризации** , а затем выберите **создать том**.
3. В **создать том** области, введите имя для тома.
4. В **устойчивости**выберите **ускорением зеркальной четности**.
5. В **процент четности**, выберите процент четности.
6. Щелкните **Создать**.

Посмотрите краткое видео о том, как создать четности ускорением зеркальный том.

> [!VIDEO https://www.youtube-nocookie.com/embed/R72QHudqWpE]

## <a name="open-volume-and-add-files"></a>Откройте тома и добавьте файлы

Чтобы открыть тома и добавить файлы в том в Windows Admin Center:

1. Подключение к кластеру дисковые пространства в Windows Admin Center и выберите **тома** из **средства** области.
2. На странице томов выберите **инвентаризации** вкладки.
2. В списке томов выберите имя тома, который требуется открыть.

    На странице сведений о том можно увидеть путь к тому.

4. В верхней части страницы, выберите **откройте**. Запустится средство «файлы» в Windows Admin Center.
5. Перейдите по пути тома. Здесь можно просматривать файлы в томе.
6. Выберите **отправить**, а затем выберите файл для передачи.
7. С помощью обозревателя **обратно** кнопку, чтобы вернуться к панели инструментов в Windows Admin Center.

Посмотрите краткое видео о том, как открыть том и добавьте файлы.

> [!VIDEO https://www.youtube-nocookie.com/embed/j59z7ulohs4]

## <a name="turn-on-deduplication-and-compression"></a>Включите дедупликацию и сжатие

Дедупликация и сжатие осуществляется на том. Дедупликация и сжатие использует модель постобработки, это означает, что вы не увидите экономии, пока оно выполняется. Когда это происходит, он будет работать ко всем файлам, даже те, которые были там из перед.

1. Подключение к кластеру дисковые пространства в Windows Admin Center и выберите **тома** из **средства** области.
2. На странице томов выберите **инвентаризации** вкладки.
3. В списке томов выберите имя тома, который хотите управлять.
4. На странице сведений о том, щелкните переключатель с меткой **Дедупликация и сжатие**.
5. В области Включение дедупликации выберите режим дедупликации.

    Вместо сложных параметров Windows Admin Center позволяет выбрать между готовыми профили для разных рабочих нагрузок. Если вы не знаете, используйте параметр по умолчанию.

6. Выберите вариант **Включить**.

Посмотрите краткое видео о том, как включить дедупликацию и сжатие.

> [!VIDEO https://www.youtube-nocookie.com/embed/PRibTacyKko]

## <a name="create-volumes-using-powershell"></a>Создание томов с помощью PowerShell

Рекомендуем создавать тома для локальных дисковых пространств с помощью командлета **New-Volume**. Это самый простой и быстрый способ. Этот командлет автоматически создает виртуальный диск, разбивает и форматирует его, создает том с соответствующим именем и добавляет его в общие тома кластера — и все это за один шаг.

Командлет **New-Volume** имеет четыре обязательных параметра:

- **FriendlyName:** Любой строки, например *«Volume1»*
- **Файловая система:** Либо **CSVFS_ReFS** (рекомендуется) или **CSVFS_NTFS**
- **StoragePoolFriendlyName:** Имя хранилища пула, например *«S2D на имя кластера»*
- **Размер:** Размер тома, например *«10 ТБ»*

   > [!NOTE]
   > Вычисления в Windows, в том числе PowerShell, выполняются с помощью двоичных чисел (с основанием 2), а диски обычно помечаются с помощью десятичных чисел (с основанием 10). Поэтому диск размером 1 ТБ (1 000 000 000 000 байтов) отображается в Windows как приблизительно 909 ГБ. Это нормально. При создании томов с помощью командлета **New-Volume** параметр **Size** следует указывать с помощью двоичных чисел (с основанием 2). Например, укажите "909 ГБ" или "0,909495 ТБ", чтобы создать том размером примерно 1 000 000 000 000 байтов.

### <a name="example-with-2-or-3-servers"></a>Пример. С 2 или 3 серверами

Если в развертывании только два сервера, локальные дисковые пространства будут автоматически использовать двустороннее зеркальное отображение. Если в развертывании только три сервера, они будут автоматически использовать трехстороннее зеркальное отображение.

```PowerShell
New-Volume -FriendlyName "Volume1" -FileSystem CSVFS_ReFS -StoragePoolFriendlyName S2D* -Size 1TB
```

### <a name="example-with-4-servers"></a>Пример. С 4 + серверами

Если у вас четыре или больше серверов, вы можете использовать дополнительный параметр **ResiliencySettingName**, чтобы выбрать тип устойчивости.

-   **ResiliencySettingName:** Либо **зеркальный** или **четности**.

В следующем примере *"Volume2"* использует трехстороннее зеркальное отображение, а *"Volume3"*  — двойную четность (также называется "помехоустойчивым кодированием").

```PowerShell
New-Volume -FriendlyName "Volume2" -FileSystem CSVFS_ReFS -StoragePoolFriendlyName S2D* -Size 1TB -ResiliencySettingName Mirror
New-Volume -FriendlyName "Volume3" -FileSystem CSVFS_ReFS -StoragePoolFriendlyName S2D* -Size 1TB -ResiliencySettingName Parity
```

### <a name="example-using-storage-tiers"></a>Пример. С помощью уровней хранилища

В развертываниях с дисками трех типов один том может частично располагаться на уровнях SSD и HDD. Аналогично, в развертываниях с четырьмя или более серверами один том может частично располагаться на каждом из них (при сочетании зеркального отображения и двойной четности).

Для создания таких томов в локальных дисковых пространствах есть шаблоны уровней по умолчанию *Производительность* и *Емкость*. Они объединяют в себе определения для трехстороннего зеркального отображения на более быстрых дисках хранения (если применимо) и двойной четности на более медленных дисках хранения (если применимо).

Чтобы просмотреть их, выполните командлет **Get-StorageTier**.

```PowerShell
Get-StorageTier | Select FriendlyName, ResiliencySettingName, PhysicalDiskRedundancy
```

![PowerShell уровней хранилища: снимок экрана](media/creating-volumes/storage-tiers-screenshot.png)

Чтобы создать многоуровневые тома, сошлитесь на эти шаблоны уровней с помощью параметров **StorageTierFriendlyNames** и **StorageTierSizes** командлета **New-Volume**. Например, следующий командлет создает один том, в котором трехстороннее зеркальное отображение и двойная четность распределены в пропорции 30:70.

```PowerShell
New-Volume -FriendlyName "Volume4" -FileSystem CSVFS_ReFS -StoragePoolFriendlyName S2D* -StorageTierFriendlyNames Performance, Capacity -StorageTierSizes 300GB, 700GB
```

## <a name="create-volumes-using-failover-cluster-manager"></a>Создание томов с помощью диспетчера отказоустойчивости кластеров

Вы также можете создавать тома с помощью *мастера создания виртуального диска (локальные дисковые пространства)* и *мастера создания томов* из диспетчера отказоустойчивости кластеров, хотя при этом много действий придется выполнять вручную. Этот способ не рекомендуется.

Существуют три основных шага:

### <a name="step-1-create-virtual-disk"></a>Шаг 1. Создание виртуального диска

![Создать виртуальный диск](media/creating-volumes/GUI-Step-1.png)

1. В диспетчере отказоустойчивости кластеров выберите **Хранилище** -> **Пулы**.
2. Выберите **Создать виртуальный диск** в области действий справа или щелкните правой кнопкой мыши пул и выберите **Создать виртуальный диск**.
3. Выберите пул носителей и нажмите **ОК**. Откроется *мастер создания виртуального диска (локальные дисковые пространства)* .
4. Назовите виртуальный диск и укажите его размер.
5. Просмотрите выбранные параметры и нажмите кнопку **Создать**.
6. Перед закрытием установите флажок **Создать том при закрытии мастера**.

### <a name="step-2-create-volume"></a>Шаг 2. Создание тома

Откроется *мастер создания томов*.

7. Выберите виртуальный диск, который вы только что создали, и нажмите кнопку **Далее**.
8. Укажите размер тома (по умолчанию: соответствует размеру виртуального диска) и нажмите кнопку **Далее**. 
9. Назначьте том букве диска или выберите **Не назначать букве диска** и нажмите кнопку **Далее**.
10. Укажите необходимую файловую систему, оставьте размер кластера *по умолчанию*, назовите том и нажмите кнопку **Далее**.
11. Просмотрите выбранные параметры и нажмите **Создать**, а затем **Закрыть**.

### <a name="step-3-add-to-cluster-shared-volumes"></a>Шаг 3. Добавить в общие тома кластера

![Добавить в общие тома кластера](media/creating-volumes/GUI-Step-2.png)

12. В диспетчере отказоустойчивости кластеров выберите **Хранилище** -> **Диски**.
13. Выберите виртуальный диск, который вы только что создали, и выберите **Добавить в общие тома кластера** в области действий справа или щелкните виртуальный диск правой кнопкой мыши и выберите **Добавить в общие тома кластера**.

Готово! При необходимости повторите, чтобы создавать несколько томов.

## <a name="see-also"></a>См. также

- [Общие сведения о дисковых хранилища](storage-spaces-direct-overview.md)
- [Планирование томов в дисковых пространств](plan-volumes.md)
- [Расширение томов в дисковых пространств](resize-volumes.md)
- [Удаление томов в дисковых пространств](delete-volumes.md)
