---
ms.assetid: a9f229eb-bef4-4231-97d0-0899e17cef32
title: Создание томов в локальных дисковых пространствах
ms.prod: windows-server-threshold
ms.author: cosdar
ms.manager: eldenc
ms.technology: storage-spaces
ms.topic: article
author: cosmosdarwin
ms.date: 01/11/2017
ms.localizationpriority: medium
ms.openlocfilehash: 277a676d8e53a7847d54039aab6607be8e5a78c5
ms.sourcegitcommit: 0d0b32c8986ba7db9536e0b8648d4ddf9b03e452
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/17/2019
ms.locfileid: "59823615"
---
# <a name="creating-volumes-in-storage-spaces-direct"></a>Создание томов в локальных дисковых пространствах

>Область применения. Windows Server 2016

В этой статье описано, как создавать тома в локальных дисковых пространствах с помощью PowerShell и диспетчера отказоустойчивости кластеров.

   >[!TIP]
   >  Сначала просмотрите статью [Планирование томов в локальных дисковых пространствах](plan-volumes.md).

## <a name="create-volumes-using-powershell"></a>Создание томов с помощью PowerShell

Рекомендуем создавать тома для локальных дисковых пространств с помощью командлета **New-Volume**. Это самый простой и быстрый способ. Этот командлет автоматически создает виртуальный диск, разбивает и форматирует его, создает том с соответствующим именем и добавляет его в общие тома кластера — и все это за один шаг.

Командлет **New-Volume** имеет четыре обязательных параметра:

- **FriendlyName:** Любой строки, например *«Volume1»*
- **Файловая система:** Либо **CSVFS_ReFS** (рекомендуется) или **CSVFS_NTFS**
- **StoragePoolFriendlyName:** Имя хранилища пула, например *«S2D на имя кластера»*
- **Размер:** Размер тома, например *«10 ТБ»*

   >[!NOTE]
   >  Вычисления в Windows, в том числе PowerShell, выполняются с помощью двоичных чисел (с основанием 2), а диски обычно помечаются с помощью десятичных чисел (с основанием 10). Поэтому диск размером 1 ТБ (1 000 000 000 000 байтов) отображается в Windows как приблизительно 909 ГБ. Это нормально. При создании томов с помощью командлета **New-Volume** параметр **Size** следует указывать с помощью двоичных чисел (с основанием 2). Например, укажите "909 ГБ" или "0,909495 ТБ", чтобы создать том размером примерно 1 000 000 000 000 байтов.

### <a name="example-with-2-or-3-servers"></a>Пример. С 2 или 3 серверами

Если в развертывании только два сервера, локальные дисковые пространства будут автоматически использовать двустороннее зеркальное отображение. Если в развертывании только три сервера, они будут автоматически использовать трехстороннее зеркальное отображение.

```
New-Volume -FriendlyName "Volume1" -FileSystem CSVFS_ReFS -StoragePoolFriendlyName S2D* -Size 1TB
```

### <a name="example-with-4-servers"></a>Пример. С 4 + серверами

Если у вас четыре или больше серверов, вы можете использовать дополнительный параметр **ResiliencySettingName**, чтобы выбрать тип устойчивости.

-   **ResiliencySettingName:** Либо **зеркальный** или **четности**.

В следующем примере *"Volume2"* использует трехстороннее зеркальное отображение, а *"Volume3"*  — двойную четность (также называется "помехоустойчивым кодированием").

```
New-Volume -FriendlyName "Volume2" -FileSystem CSVFS_ReFS -StoragePoolFriendlyName S2D* -Size 1TB -ResiliencySettingName Mirror
New-Volume -FriendlyName "Volume3" -FileSystem CSVFS_ReFS -StoragePoolFriendlyName S2D* -Size 1TB -ResiliencySettingName Parity
```

### <a name="example-using-storage-tiers"></a>Пример. С помощью уровней хранилища

В развертываниях с дисками трех типов один том может частично располагаться на уровнях SSD и HDD. Аналогично, в развертываниях с четырьмя или более серверами один том может частично располагаться на каждом из них (при сочетании зеркального отображения и двойной четности).

Для создания таких томов в локальных дисковых пространствах есть шаблоны уровней по умолчанию *Производительность* и *Емкость*. Они объединяют в себе определения для трехстороннего зеркального отображения на более быстрых дисках хранения (если применимо) и двойной четности на более медленных дисках хранения (если применимо).

Чтобы просмотреть их, выполните командлет **Get-StorageTier**.

```
Get-StorageTier | Select FriendlyName, ResiliencySettingName, PhysicalDiskRedundancy
```

![PowerShell уровней хранилища: снимок экрана](media/creating-volumes/storage-tiers-screenshot.png)

Чтобы создать многоуровневые тома, сошлитесь на эти шаблоны уровней с помощью параметров **StorageTierFriendlyNames** и **StorageTierSizes** командлета **New-Volume**. Например, следующий командлет создает один том, в котором трехстороннее зеркальное отображение и двойная четность распределены в пропорции 30:70.

```
New-Volume -FriendlyName "Volume4" -FileSystem CSVFS_ReFS -StoragePoolFriendlyName S2D* -StorageTierFriendlyNames Performance, Capacity -StorageTierSizes 300GB, 700GB
```

## <a name="create-volumes-using-failover-cluster-manager"></a>Создание томов с помощью диспетчера отказоустойчивости кластеров

Вы также можете создавать тома с помощью *мастера создания виртуального диска (локальные дисковые пространства)* и *мастера создания томов* из диспетчера отказоустойчивости кластеров, хотя при этом много действий придется выполнять вручную. Этот способ не рекомендуется.

Существуют три основных шага:

### <a name="step-1-create-virtual-disk"></a>Шаг 1. Создание виртуального диска

![Создать виртуальный диск](media/creating-volumes/GUI-Step-1.png)

1. В диспетчере отказоустойчивости кластеров выберите **Хранилище** -> **Пулы**.
2. Выберите **Создать виртуальный диск** в области действий справа или щелкните правой кнопкой мыши пул и выберите **Создать виртуальный диск**.
3. Выберите пул носителей и нажмите **ОК**. Откроется *мастер создания виртуального диска (локальные дисковые пространства)*.
4. Назовите виртуальный диск и укажите его размер.
5. Просмотрите выбранные параметры и нажмите кнопку **Создать**.
6. Перед закрытием установите флажок **Создать том при закрытии мастера**.

### <a name="step-2-create-volume"></a>Шаг 2. Создание тома

Откроется *мастер создания томов*.

7. Выберите виртуальный диск, который вы только что создали, и нажмите кнопку **Далее**.
8. Укажите размер тома (по умолчанию: соответствует размеру виртуального диска) и нажмите кнопку **Далее**. 
9. Назначьте том букве диска или выберите **Не назначать букве диска** и нажмите кнопку **Далее**.
10. Укажите необходимую файловую систему, оставьте размер кластера *по умолчанию*, назовите том и нажмите кнопку **Далее**.
11. Просмотрите выбранные параметры и нажмите **Создать**, а затем **Закрыть**.

### <a name="step-3-add-to-cluster-shared-volumes"></a>Шаг 3. Добавить в общие тома кластера

![Добавить в общие тома кластера](media/creating-volumes/GUI-Step-2.png)

12. В диспетчере отказоустойчивости кластеров выберите **Хранилище** -> **Диски**.
13. Выберите виртуальный диск, который вы только что создали, и выберите **Добавить в общие тома кластера** в области действий справа или щелкните виртуальный диск правой кнопкой мыши и выберите **Добавить в общие тома кластера**.

Готово! При необходимости повторите, чтобы создавать несколько томов.

## <a name="see-also"></a>См. также

- [Общие сведения о дисковых хранилища](storage-spaces-direct-overview.md)
- [Планирование томов в дисковых пространств](plan-volumes.md)
