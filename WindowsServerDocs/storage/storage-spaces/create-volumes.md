---
title: Создание томов в локальных дисковых пространствах
description: Создание томов в Локальные дисковые пространства с помощью Windows Admin Center и PowerShell.
ms.reviewer: cosmosdarwin
author: cosmosdarwin
ms.author: cosdar
manager: eldenc
ms.date: 02/25/2020
ms.openlocfilehash: 417deaf61b111b6ba54939505c65e8e0f854e604
ms.sourcegitcommit: dfa48f77b751dbc34409aced628eb2f17c912f08
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/07/2020
ms.locfileid: "87960947"
---
# <a name="creating-volumes-in-storage-spaces-direct"></a>Создание томов в локальных дисковых пространствах

> Применяется к: Windows Server 2019, Windows Server 2016

В этом разделе описывается создание томов в кластере Локальные дисковые пространства с помощью Windows Admin Center и PowerShell.

> [!TIP]
> Сначала просмотрите статью [Планирование томов в локальных дисковых пространствах](plan-volumes.md).

## <a name="create-a-three-way-mirror-volume"></a>Создание трехуровневого зеркального тома

Чтобы создать трехстороннее зеркальный том в центре администрирования Windows, выполните следующие действия.

1. В центре администрирования Windows подключитесь к кластеру Локальные дисковые пространства, а затем выберите **тома** в области **инструменты** .
2. На странице тома выберите вкладку **Инвентаризация** и щелкните **создать том**.
3. В области **создать том** введите имя тома **и оставьте для** него **трехстороннее зеркало**.
4. В поле **Размер на жестком диске**укажите размер тома. Например, 5 ТБ (терабайты).
5. Нажмите кнопку **создания**.

В зависимости от размера создание тома может занять несколько минут. Уведомления, расположенные в правом верхнем углу, позволят вам получить сведения о создании тома. Новый том появится в списке Инвентаризация.

Ознакомьтесь с кратким видео о том, как создать трехстороннее зеркальный том.

> [!VIDEO https://www.youtube-nocookie.com/embed/o66etKq70N8]

## <a name="create-a-mirror-accelerated-parity-volume"></a>Создание тома четности с ускорением зеркального отображения

Контроль четности с зеркальным отображением сокращает объем жесткого диска. Например, трехстороннее зеркальный том означает, что для каждых 10 терабайтов размера потребуется 30 ТБ. Чтобы снизить издержки в объеме памяти, создайте том с контролем четности с зеркальным отображением. Это сокращает объем памяти от 30 терабайт до 22 терабайт, даже если всего 4 сервера, зеркальное отображение наиболее активных 20 процентов данных и использование четности, что является более эффективным, чтобы сохранить оставшуюся часть памяти. Вы можете настроить это соотношение четности и зеркала, чтобы обеспечить оптимальный компромисс производительности и емкости для вашей рабочей нагрузки. Например, на 90% четности и на 10 процентов зеркальное отображение приводит к снижению производительности, но еще более упрощает этот объем.

Чтобы создать том с контролем четности с зеркальным отображением в центре администрирования Windows, выполните следующие действия.

1. В центре администрирования Windows подключитесь к кластеру Локальные дисковые пространства, а затем выберите **тома** в области **инструменты** .
2. На странице тома выберите вкладку **Инвентаризация** и щелкните **создать том**.
3. В области **создать том** введите имя тома.
4. В списке **устойчивость**выберите **контрольные суммы с зеркальным ускорением**.
5. В поле **процент четности**выберите процент четности.
6. Нажмите кнопку **создания**.

Ознакомьтесь с быстрым видео о том, как создать том с контролем четности с зеркальным ускорением.

> [!VIDEO https://www.youtube-nocookie.com/embed/R72QHudqWpE]

## <a name="open-volume-and-add-files"></a>Открыть том и добавить файлы

Чтобы открыть том и добавить файлы в том в центре администрирования Windows, выполните следующие действия.

1. В центре администрирования Windows подключитесь к кластеру Локальные дисковые пространства, а затем выберите **тома** в области **инструменты** .
2. На странице тома выберите вкладку **Инвентаризация** .
2. В списке томов выберите имя тома, который требуется открыть.

    На странице сведения о томе можно увидеть путь к тому.

4. В верхней части страницы выберите **Открыть**. Это приведет к запуску средства "файлы" в центре администрирования Windows.
5. Перейдите по пути к тому. Здесь можно просмотреть файлы в томе.
6. Выберите **Отправить**, а затем выберите файл для отправки.
7. Используйте кнопку **назад** в браузере, чтобы вернуться на панель средства в центре администрирования Windows.

Ознакомьтесь с кратким видео о том, как открыть том и добавить файлы.

> [!VIDEO https://www.youtube-nocookie.com/embed/j59z7ulohs4]

## <a name="turn-on-deduplication-and-compression"></a>Включить дедупликацию и сжатие

Управление дедупликацией и сжатием выполняется для каждого тома. При дедупликации и сжатии используется модель последующей обработки. Это означает, что экономия не будет видна до ее запуска. Если это так, он будет работать над всеми файлами, даже если они существовали ранее.

1. В центре администрирования Windows подключитесь к кластеру Локальные дисковые пространства, а затем выберите **тома** в области **инструменты** .
2. На странице тома выберите вкладку **Инвентаризация** .
3. В списке томов выберите имя тома, которым требуется управлять.
4. На странице сведения о томе щелкните коммутатор с меткой **Дедупликация и сжатие**.
5. В области включить дедупликацию выберите режим дедупликации.

    Вместо сложных параметров центр администрирования Windows позволяет выбирать между готовыми профилями для разных рабочих нагрузок. Если вы не уверены, используйте параметр по умолчанию.

6. Нажмите кнопку **Включить**.

Ознакомьтесь с кратким видео о том, как включить дедупликацию и сжатие.

> [!VIDEO https://www.youtube-nocookie.com/embed/PRibTacyKko]

## <a name="create-volumes-using-powershell"></a>Создание томов с помощью PowerShell

Рекомендуем создавать тома для локальных дисковых пространств с помощью командлета **New-Volume**. Он предоставляет самый быстрый и понятный процесс. Один этот командлет автоматически создаст виртуальный диск и разделы на нем, отформатирует его и создаст том с таким же именем, а затем добавит общие тома в кластер. Все это один несложный процесс.

Командлет **New-Volume** принимает четыре параметра, которые вам нужно ему предоставить.

- **FriendlyName:** любая строка на ваше усмотрение, например *"Volume1"* .
- **FileSystem:** введите вариант **CSVFS_ReFS** (рекомендуется) или **CSVFS_NTFS**.
- **StoragePoolFriendlyName:** имя пула носителей, например *"S2D on ClusterName"* .
- **Size:** размер тома, например *"10TB"* .

   > [!NOTE]
   > Windows, в том числе PowerShell, считают размер в двоичных значениях (base-2), а размер на самих дисках обычно маркируется в десятичных значениях (base-10). Это объясняет, почему "терабайтный" диск, который определяется производителем как диск объемом 1 000 000 000 000 байт, отображается в Windows как "909 ГБ". Это ожидаемое поведение. Создавая том с помощью **New-Volume**, нужно указывать значение для параметра **Size** в двоичных числах (base-2). Например, значение "909GB" или "0.909495TB" создаст том с объемом примерно 1 000 000 000 000 байт.

### <a name="example-with-2-or-3-servers"></a>Пример Для двух или трех серверов

Чтобы упростить процесс, для развертывания с двумя серверами Локальные дисковые пространства автоматически создают двустороннее зеркальное отображение для обеспечения устойчивости. Если в развертывании три сервера, автоматически создается трехстороннее зеркальное отображение.

```PowerShell
New-Volume -FriendlyName "Volume1" -FileSystem CSVFS_ReFS -StoragePoolFriendlyName S2D* -Size 1TB
```

### <a name="example-with-4-servers"></a>Пример Для четырех и более серверов

Если у вас четыре сервера или больше, можно применить необязательный параметр **ResiliencySettingName** для выбора типа устойчивости.

-   **ResiliencySettingName:** укажите **Mirror** (Зеркало) или **Parity** (Четность).

В следующем примере для *"Volume2"* применяется трехстороннее зеркальное отображение, а для *"Volume3"*  — двойной контроль четности (также именуется как "удаляющее кодирование").

```PowerShell
New-Volume -FriendlyName "Volume2" -FileSystem CSVFS_ReFS -StoragePoolFriendlyName S2D* -Size 1TB -ResiliencySettingName Mirror
New-Volume -FriendlyName "Volume3" -FileSystem CSVFS_ReFS -StoragePoolFriendlyName S2D* -Size 1TB -ResiliencySettingName Parity
```

### <a name="example-using-storage-tiers"></a>Пример Использование уровней хранилища

В развертываниях с тремя типами дисков каждый том может размещаться частично на уровне дисков SSD, а частично на жестких дисках HDD. Аналогично, в развертываниях с четырьмя и более серверами каждый том может сочетать зеркальное отображение и двойной контроль четности, распределяясь между ними.

Чтобы помочь вам в создании томов, Локальные дисковые пространства предоставляют стандартные шаблоны уровней с названиями *Performance* (Производительность) и *Capacity* (Емкость). Они содержат определения для трехстороннего зеркального отображения для более быстрых дисков емкости (если применимо) и двойного контроля четности для более медленных дисков емкости (если применимо).

Вы можете наблюдать их действие, выполнив командлет **Get-StorageTier**.

```PowerShell
Get-StorageTier | Select FriendlyName, ResiliencySettingName, PhysicalDiskRedundancy
```

![Снимок экрана PowerShell для уровней хранилища](media/creating-volumes/storage-tiers-screenshot.png)

Чтобы создать тома на нескольких уровнях, укажите ссылки на эти шаблоны уровней с помощью параметров **StorageTierFriendlyNames** и **StorageTierSizes** командлета **New-Volume**. Например, следующий командлет создает один том, в котором трехстороннее зеркальное отображение и двойной контроль четности сочетаются в соотношении 30:70.

```PowerShell
New-Volume -FriendlyName "Volume4" -FileSystem CSVFS_ReFS -StoragePoolFriendlyName S2D* -StorageTierFriendlyNames Performance, Capacity -StorageTierSizes 300GB, 700GB
```

Готово! Повторите процесс, если вам нужно создать больше одного тома.

## <a name="additional-references"></a>Дополнительные ссылки

- [Обзор Локальные дисковые пространства](storage-spaces-direct-overview.md)
- [Планирование томов в локальных дисковых пространствах](plan-volumes.md)
- [Расширение томов в локальных дисковых пространствах](resize-volumes.md)
- [Удаление томов в Локальные дисковые пространства](delete-volumes.md)
