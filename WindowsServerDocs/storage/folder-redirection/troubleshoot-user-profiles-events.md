---
title: Устранение неполадок профилей пользователей с событиями
description: Устранение неполадок Загрузка и выгрузка профилей пользователей с помощью событий и журналов трассировки.
ms.prod: windows-server-threshold
ms.topic: article
author: JasonGerend
ms.author: jgerend
ms.technology: storage
ms.date: 04/05/2018
ms.localizationpriority: medium
ms.openlocfilehash: 6099dac7d77e37b761785b4f58b6106472e5ba1e
ms.sourcegitcommit: e0479b0114eac7f232e8b1e45eeede96ccd72b26
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/22/2018
ms.locfileid: "2082589"
---
# <a name="troubleshoot-user-profiles-with-events"></a>Устранение неполадок профилей пользователей с событиями

>Применимо к: Windows 10, Windows 8, Windows 8.1, Windows Server 2012, Windows Server 2012 R2 и Windows Server 2016.

В этом разделе рассматриваются способы устранения проблем Загрузка и выгрузка профилей пользователей с помощью событий и журналов трассировки. В следующих разделах описывается использование три журнала событий, запишите сведения о профилях пользователей.

## <a name="step-1-checking-events-in-the-application-log"></a>Шаг 1: Проверка события в журнале приложений

Первым шагом для устранения проблем с Загрузка и выгрузка пользователя (в том числе перемещаемые профили пользователей) профили должен проверить все события предупреждения и ошибки, выполните вход записей службы профилей пользователей в приложении с помощью средства просмотра событий.

Вот как для просмотра событий служб профилей пользователей в журнале приложений.

1. Запустите средство просмотра событий. Для этого откройте **Панель управления**, выберите пункт **Система и безопасность**и выберите в разделе **Администрирование** **журналы событий представления**. Откроется окно просмотра событий.
2. В дереве консоли перейдите к **Журналы Windows**, затем **приложения**.
3. В области действия выберите **Фильтровать текущий журнал**. Откроется диалоговое окно Фильтровать текущий журнал.
4. В поле **Источники событий** установите флажок **Служба профилей пользователей** и нажмите кнопку « **ОК»**.
5. Просмотрите список событий, оплаты особое внимание на ошибки.
6. Найдя значимые события, выберите ссылку Справка в Интернете журнала событий для отображения дополнительной информации и устранению неполадок.
7. Для дальнейшего устранения неисправностей, обратите внимание на то, Дата и время значимые событий и проверьте действующие журнала (как описано в шаге 2) чтобы просмотреть подробные сведения о службе профилей пользователей выполнив во время события сообщение об ошибке или предупреждение.

>[!NOTE]
>Обращайте внимание на службы профилей пользователей события 1530 «Windows обнаружил, что ваш файл реестра по-прежнему используется с другими приложениями или службами.»

## <a name="step-2-view-the-operational-log-for-the-user-profile-service"></a>Шаг 2: Просмотр действующие журнала для службы профилей пользователей

Если не удается решить эту проблему, с помощью сам по себе он журнал приложений, используйте следующую процедуру для просмотра событий службы профилей пользователей в журнале операций. Данный журнал показаны некоторые внутренней работы службы и может помочь выявить where в профиль нагрузки или выгрузить процесс, который возникновения проблемы.

По умолчанию во все установки Windows включены в журнал приложений Windows и журнала действующие службы профилей пользователей.

Вот как для просмотра журнала действующие для службы профилей пользователей.

1. В дереве консоли просмотра, событий перейдите в **Журналы приложений и служб**, а затем **Microsoft**, а затем **Windows**, а затем **Службы профилей пользователей**, а затем **операций**.
2. Проверьте события, произошедшие во время события сообщение об ошибке или предупреждение, записанные в журнал приложений.

## <a name="step-3-enable-and-view-analytic-and-debug-logs"></a>Шаг 3: Включение и просмотр аналитический и отладочный журналы

Если требуется более подробно, чем предоставляет действующие журнала, можно включить аналитический и отладочный журналы на соответствующем компьютере. Этот уровень ведения журнала намного более подробное описание и должны быть отключены за исключением при попытке Устранение неполадок.

Вот как включить и просматривать аналитический и отладочный журналы.

1. В области **действий** в средстве просмотра событий выберите **представление**и выберите **Отобразить аналитический и отладочный журналы**.
2. Перейдите в **Журналы приложений и служб**, а затем **Microsoft**, а затем **Windows**, а затем **службы профилей пользователей**, а затем **диагностики**.
3. Выберите **Включить журнал** , а затем выберите **Да**. Это позволяет журнала диагностики, который будет запущен процесс ведения журнала.
4. Если требуется более подробной информации, см [Шаг 4: Создание и декодирования трассировки](#step-4:-creating-and-decoding-a-trace) Дополнительные сведения о создании журнала трассировки.
5. По окончании Устранение проблемы, перейдите к журнала **диагностики** , установите флажок **Отключить**, выберите **представление** и затем снимите флажок **Отобразить аналитический и отладочный журналы** , чтобы скрыть аналитический и отладочный ведения журнала.

## <a name="step-4-creating-and-decoding-a-trace"></a>Шаг 4: Создание и декодирования трассировки

Если не удается решить эту проблему, с помощью событий, можно создать журнал трассировки (ETL-файла) при воспроизведении проблему и его с использованием открытых символов с сервера символов Майкрософт декодирования. Журналы трассировки предоставляют особых сведениям о возможностях службы профилей пользователей делает, может помочь определить, где произошел сбой.

При использовании трассировки ETL, рекомендуется сначала Получение наименьшего журнала невозможно. После декодирования журналов, поиск в журнале ошибок.

Вот как для создания и расшифровки трассировки для службы профилей пользователей.

1. Войдите компьютер, где пользователь неполадки, используя учетную запись, которая является членом локальной группы администраторов.
2. Из командной строки с повышенными привилегиями введите следующие команды, где *\ < Path\ >* — это путь в локальную папку, который ранее был создан, например C:\\logs:
        
    ```PowerShell
    logman create trace -n RUP -o <Path>\RUP.etl -ets
    logman update RUP -p {eb7428f5-ab1f-4322-a4cc-1f1a9b2c5e98} 0x7FFFFFFF 0x7 -ets
    ```
3. На начальном экране выберите имя пользователя, а затем выберите **переключатель учетная запись**, не следует выйти администратор. При использовании удаленного рабочего стола закройте сеанс администратора сеанс пользователя.
4. Воспроизведите ошибку. Процедура воспроизведите ошибку, обычно имеет для входа в качестве пользователя, проблема, выход пользователя, или оба.
5. После воспроизведения проблемы, войдите локального администратора еще раз.
6. Командную строку с повышенными привилегиями выполните следующую команду, чтобы сохранять журнал в ETL-файла:
  
    ```PowerShell
    logman stop -n RUP -ets
    ```
7. Введите следующую команду, чтобы экспортировать ETL-файла в восприятия файл в текущем каталоге (вероятно Домашняя папка или папка %WINDIR%\\System32):
    
    ```PowerShell
    Tracerpt <path>\RUP.etl
    ```
8. Откройте файл **Summary.txt** и файл **Dumpfile.xml** (их можно открыть в Microsoft Excel для большего удобства просмотра подробных сведений журнала). Найдите события, которые включают **не работают** или **не удалось**; можно игнорировать строк, которые включают **Неизвестное** имя события.

## <a name="more-information"></a>Дополнительные сведения

* [Развертывание перемещаемых профилей пользователей](deploy-roaming-user-profiles.md)