---
title: Общие сведения о перенаправлении папок, автономных файлах и перемещаемых профилях пользователей
description: Обзор технологий перенаправления папок, автономные файлы и перемещаемых профилей пользователей.
ms.prod: windows-server
ms.topic: article
author: JasonGerend
ms.author: jgerend
ms.technology: storage
ms.date: 04/05/2018
ms.localizationpriority: medium
ms.openlocfilehash: ae1b23244f141cd0806ee14d3c40117ba72aeebb
ms.sourcegitcommit: 6aff3d88ff22ea141a6ea6572a5ad8dd6321f199
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/27/2019
ms.locfileid: "71402052"
---
# <a name="folder-redirection-offline-files-and-roaming-user-profiles-overview"></a>Общие сведения о перенаправлении папок, автономных файлах и перемещаемых профилях пользователей

>Относится к: Windows 10, Windows 8, Windows 8.1, Windows Server 2019, Windows Server 2016, Windows Server 2012, Windows Server 2012 R2

В этом разделе обсуждается перенаправление папок, автономные файлы (кэширование на стороне клиента или CSC) и перемещаемые профили пользователей (иногда известные как RUP), включая новые возможности и место поиска дополнительной информации.

## <a name="technology-description"></a>Описание технологий

Технологии автономных файлов и перенаправления папок при совместном использовании позволяют перенаправлять путь к локальным папкам (например, к папке документов) в какое-либо место в сети. При этом для увеличения скорости и улучшения доступности кэширование содержимого производится локально. Технология перемещаемых профилей пользователей позволяет перенаправлять профиль пользователя в какое-либо место в сети. Эти возможности раньше назывались IntelliMirror.

- **Перенаправление** папок позволяет пользователям и администраторам перенаправлять путь к известной папке в новое расположение, вручную или с помощью групповая политика. Новым расположением может быть папка на локальном компьютере или каталог на файловом ресурсе общего доступа. Пользователи будут работать с файлами в перенаправленной папке, как если бы она по-прежнему находилась на локальном диске. Например, можно перенаправить папку документов, которая обычно хранится на локальном диске, в какое-либо место в сети. Файлы в этой папке будут доступны пользователю с любого компьютера сети.
- **Автономные файлы предоставляет пользователю**доступ к сетевым файлам, даже если сетевое подключение к серверу недоступно или работает слишком долго.  При работе с файлами в сети скорость доступа к ним определяется скоростью сети и сервера. При автономной работе файлы загружаются из папки автономных файлов со скоростью локального доступа. Компьютер переключается в автономный режим в следующих случаях:
  - Включен режим " **всегда вне сети** "
  - сервер недоступен;
  - сетевое подключение медленнее настраиваемого порогового значения;
  - пользователь перешел в автономный режим вручную с помощью кнопки **Работать автономно** в проводнике.
- **Перемещаемые профили** пользователей перенаправляют профили пользователей в общую папку, чтобы пользователи получали одинаковые параметры операционной системы и приложения на нескольких компьютерах. Когда пользователь входит в систему с учетной записью, настроенной с общей папкой в качестве пути к профилю, профиль пользователя загружается на локальный компьютер и объединяется с локальным профилем (если он есть). При выходе пользователя из системы локальная копия профиля с учетом всех изменений объединяется с серверной. Как правило, сетевой администратор включает перемещаемые профили пользователей для учетных записей домена.

## <a name="practical-applications"></a>Практическое применение

С помощью технологий автономных файлов, перемещаемых профилей пользователей и перенаправления папок администраторы могут организовывать централизованное хранение данных и настроек пользователей, а также обеспечивать возможность доступа к данным при автономной работе, отказе сети или сервера. Некоторые частные случаи применения:

- централизация данных с клиентских компьютеров для решения задач администрирования, например использование расположенного на сервере средства архивации для сохранения папок и настроек пользователей;
- обеспечение пользователям непрерывного доступа к сетевым файлам даже при отказе сети или сервера;
- оптимизация использования пропускной способности сети и повышение удобства работы пользователей в филиалах с файлами и папками, размещенными на автономных серверах организации;
- обеспечение пользователям мобильных устройств доступа к сетевым файлам при автономной работе или медленном сетевом подключении.

## <a name="new-and-changed-functionality"></a>Новые и измененные функции

В следующей таблице описаны некоторые основные изменения в технологиях автономных файлов, перемещаемых профилей пользователей и перенаправления папок, реализованные в данной версии.

| Компонент или функция | Новый или обновленный компонент | Описание |
| --- | --- | --- |
| Постоянный автономный режим | Оператор new | Обеспечивает более быстрый доступ к файлам и снижает уровень использования пропускной способности за счет постоянной автономной работы даже при высокоскоростном сетевом подключении. |
| Экономная синхронизация | Оператор new | Помогает пользователям избежать высоких затрат на использование данных при синхронизации при использовании лимитных подключений с ограничениями на использование или роуминге в сети другого поставщика. |
| Поддержка основного компьютера | Оператор new | Позволяет ограничить использование перенаправления папок, перемещаемых профилей пользователей или и того, и другого только для основных компьютеров пользователя. |

## <a name="always-offline-mode"></a>Постоянный автономный режим

Начиная с Windows 8 и Windows Server 2012, администраторы могут настраивать интерфейс для пользователей автономные файлы всегда работать в автономном режиме, даже если они подключены через высокоскоростное сетевое подключение. Windows по умолчанию обновляет автономные файлы в кэше посредством почасовой фоновой синхронизации.

### <a name="what-value-does-always-offline-mode-add"></a>Какое значение всегда добавляется в автономный режим?

Постоянный автономный режим дает следующие преимущества:

- пользователи получают более быстрый доступ к файлам, расположенным в перенаправленных папках, например в папке документов;
- снижается уровень использования пропускной способности, за счет чего сокращаются расходы на дорогостоящие подключения к глобальной сети или лимитные подключения, например к мобильной сети 4G.

### <a name="how-has-always-offline-mode-changed-things"></a>Как режим "всегда автономный" изменил все?

До Windows 8, Windows Server 2012 пользователи переходят между режимами «в сети» и «вне сети», в зависимости от доступности и условий, даже если режим медленной связи (также известный как режим медленного подключения) был включен и установлен в 1 миллисекунду. пороговое значение задержки.

В режиме "всегда автономный режим" компьютеры никогда не переходят в режим "в сети", если настроен параметр " **настроить режим медленной связи** " Групповая политика и для параметра Порог **задержки** задано значение 1 миллисекунда. По умолчанию фоновая синхронизация производится каждые 120 минут, но ее можно настроить с помощью параметра групповой политики **Configure Background Sync** .

Дополнительные сведения см. в разделе [Включение режима постоянной автономной работы для ускорения доступа к файлам](enable-always-offline.md).

## <a name="cost-aware-synchronization"></a>Экономная синхронизация

При синхронизации с учетом затрат Windows отключает фоновую синхронизацию, когда пользователь использует лимитное сетевое подключение, например 4G мобильную сеть, а подписчик приближается к лимиту пропускной способности или перемещается в сети другого поставщика.

> [!NOTE]
> Сетевые подключения с лимитным тарифом обычно имеют задержки сети, которые выполняются медленнее, чем значение задержки по умолчанию 35 миллисекунд для перехода в режим "вне сети" (медленное подключение) в Windows 8, Windows Server 2019, Windows Server 2016 и Windows Server 2012. Поэтому данные подключения переводятся в автономный режим (режим медленного подключения) автоматически.

### <a name="what-value-does-cost-aware-synchronization-add"></a>Какое значение добавляется к синхронизации с учетом затрат?

Синхронизация с учетом стоимости помогает пользователям избежать непредвиденных затрат на использование данных при использовании лимитных подключений с ограничениями на использование или роуминге в сети другого поставщика.

### <a name="how-has-cost-aware-synchronization-changed-things"></a>Как изменились операции синхронизации с учетом затрат?

До Windows 8 и Windows Server 2012 пользователи, желающие максимально сокращать сборы при использовании автономные файлы на сетевых подключениях с лимитным тарифом, хотели отслеживать использование данных с помощью средств поставщика мобильной сети. Затем при приближении к пределу пропускной способности или его превышении можно было переключиться на автономный режим вручную.

При синхронизации с учетом стоимости Windows автоматически отслеживает ограничения использования роуминга и пропускной способности в течение лимитных подключений. Когда пользователь перемещается, приближается к пределу пропускной способности или превышает его, Windows переключается в автономный режим и препятствует любой синхронизации. Тем не менее синхронизация по-прежнему запускается вручную, а администраторы могут переопределить экономную синхронизацию для конкретных пользователей, например руководителей организации.

Дополнительные сведения см. в разделе [Enable Background File Synchronization on Metered Networks](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2012-r2-and-2012/jj127408(v%3dws.11)).

## <a name="primary-computers-for-folder-redirection-and-roaming-user-profiles"></a>Основные компьютеры для перемещаемых профилей пользователей и перенаправления папок

Теперь можно назначить набор компьютеров, называемых первичными компьютерами, для каждого пользователя домена, который позволяет контролировать, какие компьютеры используют перенаправление папок, перемещаемые профили пользователей или и то, и другое. Назначение основных компьютеров — простой и эффективный способ сопоставления данных и настроек пользователя с конкретными компьютерами или устройствами. Это упрощает контроль со стороны администратора, повышает безопасность данных и позволяет защитить профили пользователей от повреждения.

### <a name="what-value-do-primary-computers-add"></a>Какие значения следует добавить на основные компьютеры?

Назначение основных компьютеров для пользователей дает четыре ключевых преимущества.

- Администратор указывает, на каких компьютерах пользователи могут получить доступ к своим перенаправленным данным и настройкам. Например, администратор может перемещать данные и параметры пользователя между настольным компьютером и ноутбуком пользователя, а также не перемещать информацию при входе пользователя на любой другой компьютер, например на компьютер конференц-зала.
- Назначение основных компьютеров снижает риск нарушения безопасности и конфиденциальности, когда на компьютере, за которым работал пользователь, остаются личные или корпоративные данные. Например, общий менеджер, который входит в систему на компьютере сотрудника для временного доступа, не оставляет за собой никаких личных или корпоративных данных.
- Назначение основных компьютеров позволяет администратору снизить риск неверной настройки или повреждения профиля, что может быть следствием перемещения данных между системами разной конфигурации, например 32- и 64-разрядной.
- Время, необходимое для первого входа пользователя на компьютере, не являющемся основным, например сервера, выполняется быстрее, так как перемещаемый профиль пользователя и (или) перенаправленные папки не загружаются. Время выхода из системы тоже сокращается, поскольку отсутствует необходимость в передаче изменений профиля пользователя на файловый ресурс общего доступа.

### <a name="how-have-primary-computers-changed-things"></a>Как основные компьютеры изменили вещи?

Чтобы ограничить загрузку личных данных пользователей на основные компьютеры, с помощью технологий перемещаемых профилей и перенаправления папок производятся следующие проверки логики при входе:

1. Операционная система Windows проверяет новые параметры групповая политика (**скачивать перемещаемые профили только на основных компьютерах** и **перенаправлять папки только на основных компьютерах**), чтобы определить, является ли атрибут **MsDS-PRIMARY-Computer** активным. Доменные службы каталога (AD DS) должны влиять на решение о перемещении профиля пользователя или применении перенаправления папок.
2. Если этот параметр политики обеспечивает поддержку основных компьютеров, Windows проверяет наличие в схеме доменных служб Active Directory поддержки атрибута **msDS-Primary-Computer**. Если она есть, Windows проверяет, назначен ли компьютер, на который заходит пользователь, для него основным:
    1. Если компьютер является одним из основных компьютеров пользователя, Windows применяет перемещаемые профили пользователей и параметры перенаправления папок.
    2. Если компьютер не является одним из основных компьютеров пользователя, Windows загружает кэшированный локальный профиль пользователя, если он есть, или создает новый локальный профиль. Кроме того, Windows удалит все существующие перенаправленные папки в порядке, который указан в ранее примененном параметре групповой политики, сохраненном в локальной конфигурации перенаправления папок.

Дополнительные сведения см. в разделе [развертывание основных компьютеров для перенаправления папок и перемещаемых профилей пользователей](deploy-primary-computers.md)

## <a name="hardware-requirements"></a>Требования к оборудованию

Технологии автономных файлов, перемещаемых профилей пользователей и перенаправления папок реализуются на компьютерах под управлением 32- или 64-разрядной операционной системы и не поддерживаются на компьютерах под управлением Windows на ARM (WOA).

## <a name="software-requirements"></a>Требования к программному обеспечению

Для назначения основных компьютеров среда должна соответствовать следующим требованиям.

- Схема домен Active Directory Services (AD DS) должна быть обновлена для включения схемы и условий Windows Server 2012 (Установка контроллера домена Windows Server 2012 или более поздней версии автоматически обновляет схему). Дополнительные сведения об обновлении схемы AD DS см. в статье [Обновление контроллеров домена до Windows Server 2016](../../identity/ad-ds/deploy/upgrade-domain-controllers.md).
- Клиентские компьютеры должны работать под управлением Windows 10, Windows 8.1, Windows 8, Windows Server 2019, Windows Server 2016, Windows Server 2012 R2 или Windows Server 2012 и быть присоединенными к управляемому домену Active Directory.

## <a name="more-information"></a>Дополнительные сведения

Дополнительные сведения по данной теме см. на следующих ресурсах.

| Тип содержимого | Ссылок |
| --- | --- |
| Оценка продукта | [Поддержка информационных работников с надежными файловыми службами и хранилищем](<https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2012-r2-and-2012/hh831495(v%3dws.11)>)<br>[Новые возможности автономные файлы](<https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/ff183315(v=ws.10)>) (Windows 7 и Windows Server 2008 R2)<br>[Новые возможности автономные файлы для Windows Vista](<https://docs.microsoft.com/previous-versions/windows/it-pro/windows-vista/cc749449(v=ws.10)>)<br>[Изменения в автономные файлы в Windows Vista](<https://technet.microsoft.com/library/2007.11.offline.aspx>) (Журнал TechNet Magazine) |
| Развертывание | [Развертывание перенаправления папок, автономные файлы и перемещаемых профилей пользователей](deploy-folder-redirection.md)<br>[Реализация решения для централизованного использования данных в конечных пользователях: Перенаправление папок и автономные файлыная проверка и развертывание технологий](http://download.microsoft.com/download/3/0/1/3019A3DA-2F41-4F2D-BBC9-A6D24C4C68C4/Implementing%20an%20End-User%20Data%20Centralization%20Solution.docx)<br>[Управление пользовательским руководством по развертыванию пользовательских данных](<https://docs.microsoft.com/previous-versions/windows/it-pro/windows-vista/cc766489(v=ws.10)>)<br>[Пошаговое руководство по настройке новых функций автономных файлов для компьютеров под управлением Windows 7](<https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/ff633429(v=ws.10)>)<br>[Использование перенаправления папок](<https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc753996(v=ws.11)>)<br>[Реализация перенаправления папок](<https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2003/cc737434(v=ws.10)>) (Windows Server 2003) |
| Средства и параметры | [Автономные файлы на сайте MSDN](https://msdn.microsoft.com/library/cc296092.aspx)<br>[Ссылка на групповая политика автономные файлы](https://msdn.microsoft.com/library/ms878937.aspx) (Windows 2000) |
| Ресурсы сообщества | [Форум по файловым службам и хранилищам](https://social.technet.microsoft.com/forums/windowsserver/home?forum=winserverfiles)<br>[Эй, сценарист! Как можно работать с автономные файлыной функцией в Windows?](<https://blogs.technet.microsoft.com/heyscriptingguy/2009/06/02/hey-scripting-guy-how-can-i-enable-and-disable-offline-files/>)<br>[Эй, сценарист! Как включить и отключить автономные файлы?](<https://blogs.technet.microsoft.com/heyscriptingguy/2009/06/02/hey-scripting-guy-how-can-i-enable-and-disable-offline-files/>) |
| Связанные технологии|[Идентификация и доступ в Windows Server](../../identity/identity-and-access.md)<br>[Хранилище в Windows Server](../storage.md)<br>[Удаленный доступ и управление сервером](../../remote/index.md) |