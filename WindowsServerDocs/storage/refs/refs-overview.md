---
title: Обзор файловой системы ReFS
ms.prod: windows-server-threshold
ms.author: gawatu
ms.manager: mchad
ms.technology: storage-file-systems
ms.topic: article
author: gawatu
ms.date: 06/07/2019
ms.openlocfilehash: fed23c999c67ba81b3bbb821170a748ed5eaa7b8
ms.sourcegitcommit: 6ef4986391607bb28593852d06cc6645e548a4b3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/07/2019
ms.locfileid: "66812015"
---
# <a name="resilient-file-system-refs-overview"></a>Обзор файловой системы ReFS

>Относится к: Windows Server 2019, Windows Server 2016, Windows Server 2012 R2, Windows Server 2012, Windows Server (Semi-Annual Channel)

ReFS — это новейшая файловая система Майкрософт, которая повышает уровень доступности данных, обеспечивает эффективное масштабирование для очень крупных наборов данных и различных вариантов нагрузки и гарантирует целостность данных благодаря устойчивости к повреждениям. Она используется для растущего числа сценариев хранения данных и служит основой для будущих нововведений.

## <a name="key-benefits"></a>Основные преимущества

### <a name="resiliency"></a>Устойчивость

ReFS представляет новые функции, которые позволяют точно определить повреждения и исправить их, сохраняя систему в оперативном режиме и обеспечивая целостность и доступность данных. 

- **Потоки целостности** — ReFS использует контрольные суммы для метаданных и, при необходимости, для данных файлов, что дает возможность точно определить повреждения ReFS. 
- **Интеграция дисковых пространств** — при использовании в сочетании с зеркальным пространством или пространством с контролем четности ReFS может автоматически исправлять обнаруженные повреждения с помощью альтернативной копии данных, предоставляемой дисковыми пространствами. Процессы восстановления локализованы в области повреждения и выполняются в оперативном режиме без простоя томов.
- **Утилизация данных** — если том поврежден, а альтернативная копия данных не существует, ReFS удаляет поврежденные данные из пространства имен. ReFS сохраняет том в оперативном режиме при обработке большинства неисправляемых повреждений, но в редких случаях ReFS необходимо перевести том в автономный режим.
- **Упреждающее исправление ошибок** — помимо проверки данных перед операциями чтения и записи, ReFS предоставляет сканер целостности данных, который называют <i>средством очистки</i>. Оно периодически сканирует том, пытаясь выявить скрытые повреждения и профилактически запуская процесс восстановления поврежденных данных. 

### <a name="performance"></a>Производительность

Помимо улучшения устойчивости, ReFS представляет новые функции для рабочих нагрузок, требующих высокой производительности, и виртуализированных рабочих нагрузок. Оптимизация уровней в режиме реального времени, клонирование блоков и разреженный метод VDL — вот примеры развивающихся возможностей ReFS, которые предназначены для поддержки динамических и разнообразных рабочих нагрузок.

- **[Зеркальный аппаратным ускорением четности](./mirror-accelerated-parity.md)**  -ускорением зеркальной четности обеспечивает как высокий уровень производительности, а также емкость эффективного хранения данных. 

    - Для обеспечения высокой производительности и эффективного хранения данных ReFS делит том на две логические группы памяти, которые называются уровнями. У них могут быть собственные типы диска и устойчивости, что позволяет каждому уровню оптимизировать производительность или емкость. Вот некоторые примеры конфигурации: 
    
      | Уровень производительности | Уровень емкости |
      | ---------------- | ----------------- |
      | Зеркальный SSD | Зеркальный жесткий диск |
      | Зеркальный SSD | SSD с контролем четности |
      | Зеркальный SSD | Жесткий диск с контролем четности |
            
    - После настройки этих уровней ReFS использует их для реализации быстрого хранилища для «горячих» данных и объемного хранилища «холодных» данных:
        - Все операции записи происходят на уровне производительности, а большие блоки данных, которые остаются на уровне производительности, перемещаются на уровень емкости в режиме реального времени.
        - Если используется гибридное развертывание (смешивания flash и жесткого диска), [кэша в Storage Spaces Direct](../storage-spaces/understand-the-cache.md) помогает ускорить операции чтения, помогая уменьшить эффект данных фрагментации характеристик виртуализированных рабочих нагрузок. В противном случае если использование развертывания флэш-памяти, считывает также возникает в уровень производительности.

> [!NOTE]
> В средах Windows Server четность с зеркальным ускорение поддерживается только для [локальных дисковых пространств](../storage-spaces/storage-spaces-direct-overview.md). Мы рекомендуем использовать зеркальный аппаратным ускорением четности только рабочих нагрузок архивации и резервного копирования. Для высокой производительности виртуализированной и других произвольных рабочих нагрузок рекомендуется использовать зеркала для повышения производительности.

- **Ускорение операций виртуальных машин** — в ReFS реализованы новые возможности, предназначенные для повышения производительности виртуализированных рабочих нагрузок.
    - [Клонирование блоков](./block-cloning.md) — эта функция ускоряет операции копирования, позволяя выполнять быстрые операции слияния ВМ.
    - Разреженный метод VDL — этот метод позволяет ReFS быстро обнулять файлы, что уменьшает время, необходимое для создания фиксированных VHD, с десятков минут до нескольких секунд.

- **Переменный размер кластера** — ReFS поддерживает размер кластера 4 КБ и 64 КБ. Рекомендуемый для большинства развертываний размер кластера — 4 КБ, а кластеры размером 64 КБ подходят для работы с крупными, последовательными рабочими нагрузками ввода-вывода.

### <a name="scalability"></a>Масштабируемость

Файловая система ReFS предназначена для поддержки очень больших наборов данных (до миллионов терабайт) без снижения производительности и с недоступным ранее уровнем масштабирования.

## <a name="supported-deployments"></a>Поддерживаемые развертывания

Корпорация Майкрософт разработала NTFS специально для использования общего назначения с широкий спектр конфигураций и рабочие нагрузки, однако для клиентов, специально которым требуется доступность, устойчивость и шкалой, ReFS, корпорация Майкрософт поддерживает ссылки для использования в разделе следующие конфигурации и сценариев. 

> [!NOTE]
> Все поддерживаемые ReFS конфигурации необходимо использовать [каталоге Windows Server](https://www.WindowsServerCatalog.com) сертифицированного оборудования и отвечают требованиям приложения.

### <a name="storage-spaces-direct"></a>Локальные дисковые пространства

Развертывать ReFS в локальных дисковых пространствах рекомендуется для виртуализированных рабочих нагрузок либо запоминающих устройств, подключенных к сети: 
- Четность с зеркальным ускорением и [кэш в локальных дисковых пространствах](../storage-spaces/understand-the-cache.md) обеспечивают высокую производительность и эффективное хранение данных. 
- Благодаря клонированию блоков и разреженным VDL значительно ускоряются операции с VHDX-файлами, такие как создание, объединение и расширение.
- Потоки целостности, интерактивный ремонт и другой копии включите ReFS и дисковые пространства для совместно для обнаружения и исправления контроллера хранилища и повреждений носителя хранения в метаданных и данных. 
- ReFS предоставляет возможности масштабирования и поддержки крупных наборов данных. 

### <a name="storage-spaces"></a>Дисковые пространства

- Потоки целостности, интерактивный ремонт и другой копии включить ReFS и [дисковых](../storage-spaces/overview.md) для совместно для обнаружения и исправления контроллера хранилища и повреждений носителя хранения в метаданных и данных.
- Кроме того, в средах дисковых пространств можно использовать функции клонирования блоков и масштабирования, доступные в ReFS.
- Развертывание ссылок на дисковых пространств с помощью общих корпусах SAS подходит для размещения архивных данных и хранение документов пользователя.

> [!NOTE]
> Хранилище локального поддерживает пробелы несъемные непосредственно подключенное через BusTypes SATA, SAS или NVME или подключены через адаптер ШИНЫ (также называемые RAID-контроллер в сквозном режиме).

### <a name="basic-disks"></a>Базовые диски

Развертывание ссылок на базовых дисках лучше всего подходит для приложений, которые реализуют собственные решения программного обеспечения устойчивости и доступности. 
- Приложения, в которых реализованы собственные программные решения для устойчивости и доступности, могут использовать потоки целостности, клонирование блоков и возможность масштабирования и поддержки крупных наборов данных. 

> [!NOTE]
> Базовые диски включают локальной несъемные непосредственно подключенное через BusTypes SATA, SAS, NVME или RAID-МАССИВА. 

### <a name="backup-target"></a>Целевого объекта архивации

Развертывание ссылок, как лучше всего целевого объекта архивации подходит для приложений и оборудования, реализовывать собственные решения для обеспечения устойчивости и доступности.
- Приложения, в которых реализованы собственные программные решения для устойчивости и доступности, могут использовать потоки целостности, клонирование блоков и возможность масштабирования и поддержки крупных наборов данных.

> [!NOTE]
> Целевые объекты резервного копирования включают выше поддерживаемых конфигураций. Обратитесь в службу приложений и хранения поставщики массивов дополнительную информацию о поддержке на Fiber Channel и iSCSI SAN. Для сетей SAN, если требуются функции, такие как тонкой подготовки, операций TRIM и UNMAP или Offloaded Data Transfer (ODX), NTFS необходимо использовать.   

## <a name="feature-comparison"></a>Сравнение функций

### <a name="limits"></a>Ограничения

| Компонент       | ReFS                                        | NTFS |
|----------------|------------------------------------------------|-----------------------|
| Максимальная длина имени файла | 255 символов Юникода  | 255 символов Юникода               |
| Максимальная длина имени пути |32 КБ символов Юникода | 32 КБ символов Юникода                |
| Максимальный размер файла | 35 PB (петабайтов)  | 256 ТБ               |
| Максимальный размер тома | 35 PB                           | 256 ТБ                |

### <a name="functionality"></a>Функция

#### <a name="the-following-features-are-available-on-refs-and-ntfs"></a>В ReFS и NTFS доступны следующие функции:

| Функция       | ReFS                                        | NTFS |
|---------------------------|------------------|-----------------------|
| Шифрование BitLocker | Да | Да |
| Дедупликация данных | Да<sup>1</sup> | Да |
| Поддержка общих томов кластера (CSV) | Да<sup>2</sup> | Да |
| Гибкие ссылки | Да | Да |
| Поддержка отказоустойчивого кластера | Да | Да |
| Списки управления доступом | Да | Да |
| Журнал номеров последовательного обновления (USN) | Да | Да |
| Уведомления об изменениях | Да | Да |
| Точки соединения | Да | Да |
| Точки подключения | Да | Да |
| Точки повторного анализа | Да | Да |
| Моментальные снимки томов | Да | Да |
| Идентификаторы файлов | Да | Да |
| Нежесткая блокировка | Да | Да |
| разреженные файлы; | Да | Да |
| Именованные потоки | Да | Да |
| Тонкая подготовка | Да<sup>3</sup> | Да |
| Операций Trim и Unmap | Да<sup>3</sup> | Да |
1. Доступен в Windows Server версии 1709 и более поздних версий.
2. Доступен в Windows Server 2012 R2 и более поздних версий.
3. Только для дисковых пространств

#### <a name="the-following-features-are-only-available-on-refs"></a>Следующие функции доступны только в ReFS:

| Функция       | ReFS                                        | NTFS |
|---------------------------|------------------|-----------------------|
| Клонирование блоков | Да | Нет |
| Разреженный метод VDL | Да | Нет |
| Четность с зеркальным ускорением| Да (в локальных дисковых пространствах) | Нет |

#### <a name="the-following-features-are-unavailable-on-refs-at-this-time"></a>Следующие функции недоступны в ReFS в настоящее время:

| Функция       | ReFS                                        | NTFS |
|---------------------------|------------------|-----------------------|
| Сжатие файловой системы | Нет | Да |
| Шифрование файловой системы | Нет | Да |
| Транзакции | Нет | Да |
| Жесткие ссылки | Нет | Да |
| Идентификаторы объектов | Нет | Да |
| Прямая передача данных (ODX) | Нет | Да |
| Короткие имена | Нет | Да |
| Расширенные атрибуты | Нет | Да |
| Дисковые квоты | Нет | Да |
| Загружаемый | Нет | Да |
| Поддержка файла страницы | Нет | Да |
| Поддерживается на съемном носителе | Нет | Да |

## <a name="see-also"></a>См. также

-   [Общие сведения о дисковых хранилища](../storage-spaces/storage-spaces-direct-overview.md)
-   [Клонирование блоков reFS](block-cloning.md)
-   [Потоки целостности reFS](integrity-streams.md)