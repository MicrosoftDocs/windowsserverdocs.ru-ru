---
title: Обзор NTFS
description: Объяснение того, что NTFS.
ms.prod: windows-server-threshold
ms.topic: article
author: JasonGerend
ms.author: jgerend
ms.technology: storage
ms.date: 06/17/2019
ms.localizationpriority: medium
ms.openlocfilehash: 2e45fd1eb13044fdf0ba0f66a6e909a3f2d39bc3
ms.sourcegitcommit: 6fec3ca19ddaecbc936320d98cca0736dd8505d1
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/18/2019
ms.locfileid: "67196167"
---
# <a name="ntfs-overview"></a>Обзор NTFS

>Относится к: Windows 10, Windows Server 2019, Windows Server 2016, Windows Server 2012 R2, Windows Server 2012, Windows Server 2008 R2, Windows Server 2008

NTFS — основная файловая система в последних версиях Windows и Windows Server — предоставляет полный набор функций, включая дескрипторы безопасности, шифрование, дисковые квоты и расширенные метаданные и может использоваться для предоставления непрерывно с Общие тома кластера (CSV) доступные тома, которые могут осуществлять одновременно из нескольких узлов отказоустойчивого кластера.

Дополнительные сведения о новых и измененных функциях в файловой системе NTFS в Windows Server 2012 R2, см. в разделе [новые возможности файловой системы NTFS](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2012-r2-and-2012/dn466520(v%3dws.11)). Сведения о дополнительных возможностях, см. в разделе [дополнительную информацию](#additional-information) этого раздела. Дополнительные сведения о новой Resilient File System (ReFS), см. в разделе [Resilient File System (ReFS) Обзор](../refs/refs-overview.md).

## <a name="practical-applications"></a>Практическое применение

### <a name="increased-reliability"></a>повышенная надежность;

Файловая система NTFS использует его журнала файлов и данных контрольных точек для восстановления целостности файловой системы, когда компьютер перезапускается после сбоя системы. После возникновения ошибки поврежденных секторов NTFS динамически указывает кластер, который содержит поврежденный сектор, выделяется новый кластер для хранения данных, помечает исходного кластера как поврежденные и больше не использует старый кластер. Например после сбоя сервера NTFS данные можно восстановить путем воспроизведения файлов журнала.

NTFS постоянно отслеживает и исправляет временных повреждений в фоновом режиме, не переводя том в автономный режим (эта функция называется [самостоятельное восстановление, NTFS](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc771388(v=ws.10)), включенная в Windows Server 2008). Для большего размера повреждений программу Chkdsk, в Windows Server 2012 и более поздних версиях сканирует и анализирует диск, когда том находится в сети, ограничение времени в автономный режим на время, необходимое для восстановления согласованности данных на томе. При использовании с общими томами кластера NTFS без простоя является обязательным. Дополнительные сведения см. в разделе [работоспособность NTFS и Chkdsk](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2012-r2-and-2012/hh831536(v%3dws.11)).

### <a name="increased-security"></a>Повышенная безопасность

- **Доступ к безопасности на основе элемента управления списка ACL для файлов и папок**— NTFS позволяет задать разрешения для файла или папки, укажите групп и пользователей, для разрешения и ограничения доступа и выберите тип доступа.

- **Поддержка шифрования диска BitLocker**— шифрование диска BitLocker обеспечивает дополнительную безопасность для ключевой системной информации и других данных, хранящихся на томах NTFS. Начиная с Windows Server 2012 R2 и Windows 8.1, BitLocker поддерживает шифрование устройств на x86 и x64-разрядных компьютерах с доверенным платформенным модулем (TPM), поддерживающим подключенное ждущий (ранее доступное только для устройств Windows RT). Шифрование помогает защитить данные на компьютерах под управлением Windows, и оно позволяет блокировать злоумышленников, доступ к файлам системы, они используют для обнаружения пароля, или получить доступ к на диск, физически удаляя его из ПК и установив его в другое. Дополнительные сведения см. в разделе [новые возможности в BitLocker](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2012-r2-and-2012/dn306081(v%3dws.11)).

- **Поддержка больших томов**— NTFS может поддерживать тома размером до 256 ТБ. Поддерживаемые размеры зависят от размера кластера и число кластеров тома. С (2<sup>32</sup> – 1) поддерживаются следующие объем и размеры файлов кластеров (максимальное количество кластеров, которые поддерживает NTFS).

  |Размер кластера|Том максимально|Размер самого большого файла|
  |---|---|---|
  |4 КБ (размер по умолчанию)|16 ТБ|16 ТБ|
  |8 КБ|32 ТБ|32 ТБ|
  |16 КБ|64 ТБ|64 ТБ|
  |32 КБ|128 TB|128 TB|
  |64 КБ (максимальный размер)|256 ТБ|256 ТБ|

>[!IMPORTANT]
>Служб и приложений может наложить дополнительные ограничения на размеры файлов и томов. Например ограничения на размер тома — 64 ТБ, если вы используете предыдущие версии функции или резервного копирования приложение, которое позволяет использовать моментальные снимки службы теневого копирования томов (VSS) (и вы не используете SAN или RAID корпуса). Тем не менее может потребоваться использование меньшего размера тома, в зависимости от рабочей нагрузки и производительности хранилища.

### <a name="formatting-requirements-for-large-files"></a>Требованиях к форматированию больших файлов

Чтобы разрешить правильное расширение больших vhdx-файлов, существуют новые рекомендации для форматирования тома. При форматировании тома, которые будут использоваться при дедупликации данных или будет размещена очень большие файлы, такие как vhdx-файлы, размер которых превышает 1 ТБ, используйте **Format-Volume** командлет в Windows PowerShell со следующими параметрами.

|Параметр|Описание|
|---|---|
|-AllocationUnitSize 64 КБ|Задает размер единицы размещения NTFS 64 КБ.|
|-UseLargeFRS|Включает поддержку сегментами записи больших файлов (FRS). Это необходимо, чтобы увеличить количество экстентов, допускаемых каждого файла в томе. Для больших записей FRS предел увеличивается из около 1,5 млн экстентов для экстентов около 6 млн.|

Например следующие форматы командлет диска D том NTFS с поддержкой FRS и размер кластера 64 КБ.

```PowerShell
Format-Volume -DriveLetter D -FileSystem NTFS -AllocationUnitSize 64KB -UseLargeFRS
```

Вы также можете использовать **формат** команды. В системной командной строке введите следующую команду, где **/L** форматирует большое FRS и **/A:64 k** задает размер кластера 64 КБ:

```PowerShell
format /L /A:64k
```

### <a name="maximum-file-name-and-path"></a>Имя файла и путь

Файловая система NTFS поддерживает длинные имена файлов и путей расширенных длины с следующие максимальные значения:

- **Поддержка длинных имен файлов, с обратной совместимостью**— NTFS позволяет длинные имена файлов хранения 8.3 псевдоним на диске (в формате Юникод) для обеспечения совместимости с файловыми системами, на которые существует 8.3 ограничение имен и расширений файлов. При необходимости (по соображениям производительности), вы можете выборочно отключить 8.3 Совмещение имен для отдельных томов NTFS в Windows Server 2008 R2, Windows 8 и более поздние версии операционной системы Windows.
  В Windows Server 2008 R2 и более поздних короткие имена по умолчанию отключены, когда том форматируется с помощью операционной системы. Для обеспечения совместимости приложений короткие имена по-прежнему включены на системном томе.

- **Поддержка расширенных длина путей**— многие API Windows функции имеют версий Юникода, в которых является путь расширенных длиной примерно 32 767 символов — за предел путь 260 символов, определяется максимальное количество\_параметра пути. Подробные имя файла и требования к формату пути и рекомендации по реализации расширенных длины пути, см. в разделе [именование файлов, путей и пространств имен](https://msdn.microsoft.com/library/windows/desktop/aa365247).

- **Кластерного хранилища**— при использовании в отказоустойчивых кластерах, файловая система NTFS поддерживает томов непрерывной доступности, может осуществляться на нескольких узлах кластера одновременно в том случае, при использовании в сочетании с файловой системой Общие тома кластера (CSV). Дополнительные сведения см. в разделе [использование общих томов кластера в отказоустойчивом кластере](../../failover-clustering/failover-cluster-csvs.md).

### <a name="flexible-allocation-of-capacity"></a>Гибкое выделение емкости

Если место на томе, NTFS предоставляет следующие способы работы с объема памяти сервера:

- Используйте дисковые квоты для отслеживания и контроля использования места на диске в файловой системе NTFS для отдельных пользователей.
- Используйте сжатие файловой системы для увеличения объема данных, которые могут быть сохранены.
- Увеличьте размер тома NTFS, добавив незанятое пространство из одного диска или из другой диск.
- Подключите том к пустой папке на локальном томе NTFS при запуске из букв диска, или необходимо создать дополнительное пространство, которое доступно из существующей папки.

## <a name="additional-information"></a>Дополнительные сведения

- [Рекомендации по размерам кластера для ReFS и NTFS](https://techcommunity.microsoft.com/t5/Storage-at-Microsoft/Cluster-size-recommendations-for-ReFS-and-NTFS/ba-p/425960)
- [Общие сведения о Resilient File System (ReFS)](../refs/refs-overview.md)
- [Новые возможности файловой системы NTFS](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2012-r2-and-2012/dn466520(v%3dws.11)) (Windows Server 2012 R2)
- [Новые возможности файловой системы NTFS](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/ff383236(v=ws.10)) (Windows Server 2008 R2, Windows 7)
- [Работоспособность NTFS и Chkdsk](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2012-r2-and-2012/hh831536(v%3dws.11))
- [Самостоятельное восстановление, NTFS](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc771388(v=ws.10)) (появился в Windows Server 2008)
- [Транзакционная NTFS](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2008-r2-and-2008/cc730726(v%3dws.10)) (появился в Windows Server 2008)
- [Хранилища в Windows Server](../storage.md)