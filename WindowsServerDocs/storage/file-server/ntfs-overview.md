---
title: Обзор NTFS
description: Описание файловой системы NTFS.
ms.prod: windows-server
ms.topic: article
author: JasonGerend
ms.author: jgerend
ms.technology: storage
ms.date: 06/17/2019
ms.localizationpriority: medium
ms.openlocfilehash: b98877d0a94ff8033b65bf74d0118e2a5f1ea092
ms.sourcegitcommit: 6aff3d88ff22ea141a6ea6572a5ad8dd6321f199
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/27/2019
ms.locfileid: "71402077"
---
# <a name="ntfs-overview"></a>Обзор NTFS

>Относится к: Windows 10, Windows Server 2019, Windows Server 2016, Windows Server 2012 R2, Windows Server 2012, Windows Server 2008 R2, Windows Server 2008

NTFS — основная файловая система для последних версий Windows и Windows Server — предоставляет полный набор функций, включая дескрипторы безопасности, шифрование, дисковые квоты и обширные метаданные, а также может использоваться совместно с общими томами кластера (CSV) для обеспечения постоянной доступные тома, доступ к которым возможен одновременно из нескольких узлов отказоустойчивого кластера.

Дополнительные сведения о новых и измененных функциональных возможностях в файловой системе NTFS в Windows Server 2012 R2 см. в разделе [новые возможности NTFS](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2012-r2-and-2012/dn466520(v%3dws.11)). Дополнительные сведения о функциях см. в разделе [Дополнительные сведения](#additional-information) этой статьи. Дополнительные сведения о новой отказоустойчивой файловой системе (ReFS) см. в разделе [Общие сведения о отказоустойчивой файловой системе (ReFS)](../refs/refs-overview.md).

## <a name="practical-applications"></a>Практическое применение

### <a name="increased-reliability"></a>повышенная надежность;

NTFS использует файл журнала и сведения о контрольных точках для восстановления согласованности файловой системы при перезагрузке компьютера после сбоя системы. После ошибки с поврежденным сектором NTFS динамически пересопоставляет кластер, который содержит поврежденный сектор, выделяет новый кластер для данных, помечает исходный кластер как неисправный и больше не использует старый кластер. Например, после сбоя сервера NTFS может восстановить данные путем воспроизведения файлов журнала.

NTFS постоянно отслеживает и исправляет проблемы временного повреждения в фоновом режиме без отключения тома (Эта функция известна как [Самовосстанавливающаяся система NTFS](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc771388(v=ws.10)), появившаяся в Windows Server 2008). При значительных проблемах с повреждением программа CHKDSK в Windows Server 2012 и более поздних версиях сканирует и анализирует диск, пока том находится в режиме «в сети», ограничивая время автономной работы до времени, необходимого для восстановления согласованности данных на томе. Когда NTFS используется с общими томами кластера, простои не требуются. Дополнительные сведения см. в разделе Проверка [работоспособности файловой системы NTFS и chkdsk](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2012-r2-and-2012/hh831536(v%3dws.11)).

### <a name="increased-security"></a>Повышенная безопасность

- **Безопасность на основе списка управления доступом (ACL) для файлов и папок**— NTFS позволяет устанавливать разрешения для файла или папки, указывать группы и пользователей, доступ к которым требуется ограничить или разрешить, и выбрать тип доступа.

- **Поддержка шифрование диска BitLocker**— шифрование диска BitLocker обеспечивает дополнительную безопасность для важных системных сведений и других данных, хранящихся на томах NTFS. Начиная с Windows Server 2012 R2 и Windows 8.1, BitLocker обеспечивает поддержку шифрования устройств на компьютерах на базе x86 и x64 с помощью доверенный платформенный модуль (TPM) (доверенного платформенного модуля), поддерживающего подключенную подсистему (ранее доступную только на устройствах Windows RT). Шифрование устройств помогает защитить данные на компьютерах под управлением Windows и помогает предотвратить доступ злоумышленников к системным файлам, которые они используют для обнаружения пароля пользователя или доступа к диску путем физического удаления его с компьютера и установки на другой. Дополнительные сведения см. [в разделе новые возможности BitLocker](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2012-r2-and-2012/dn306081(v%3dws.11)).

- **Поддержка больших томов**— NTFS может поддерживать тома размером до 256 терабайт. Поддерживаемые размеры томов зависят от размера кластера и количества кластеров. При использовании кластеров (2<sup>32</sup> – 1) (максимальное число кластеров, поддерживаемое NTFS) поддерживаются следующие размеры томов и файлов.

  |Размер кластера|Самый крупный том|Самый крупный файл|
  |---|---|---|
  |4 КБ (размер по умолчанию)|16 ТБ|16 ТБ|
  |8 КБ|32 ТБ|32 ТБ|
  |16 КБ|64 ТБ|64 ТБ|
  |32 КБ|128 TB|128 TB|
  |64 КБ (максимальный размер)|256 ТБ|256 ТБ|

>[!IMPORTANT]
>Службы и приложения могут накладывать дополнительные ограничения на размер файлов и томов. Например, ограничение размера тома составляет 64 ТБ, если вы используете функцию предыдущих версий или приложение резервного копирования, которое использует моментальные снимки служба теневого копирования томов (VSS) (и не используете сеть SAN или RAID). Однако может потребоваться использовать меньшие размеры томов в зависимости от рабочей нагрузки и производительности хранилища.

### <a name="formatting-requirements-for-large-files"></a>Требования к форматированию для больших файлов

Для обеспечения правильного расширения больших VHDX-файлов существуют новые рекомендации по форматированию томов. При форматировании томов, которые будут использоваться при дедупликации данных, или при размещении очень больших файлов, таких как VHDX-файлы размером более 1 ТБ, используйте командлет **Format — Volume** в Windows PowerShell со следующими параметрами.

|Параметр|Описание|
|---|---|
|-AllocationUnitSize 64 КБ|Задает размер единицы размещения NTFS 64 КБ.|
|-Уселаржефрс|Включает поддержку сегментов больших записей файлов (FRS). Это необходимо для увеличения количества экстентов, допустимых для каждого файла на томе. Для больших записей FRS ограничение увеличивается от примерно 1 500 000 экстентов до 6 000 000 экстентов.|

Например, следующий командлет форматирует диск D как том NTFS с включенным FRS и размером единицы распределения 64 КБ.

```PowerShell
Format-Volume -DriveLetter D -FileSystem NTFS -AllocationUnitSize 64KB -UseLargeFRS
```

Можно также использовать команду **Format** . В системной командной строке введите следующую команду, где **/l** форматирует большой том FRS и **/a: 64k** устанавливает размер единицы распределения 64 КБ:

```PowerShell
format /L /A:64k
```

### <a name="maximum-file-name-and-path"></a>Максимальное имя и путь к файлу

NTFS поддерживает длинные имена файлов и пути расширенной длины со следующими максимальными значениями:

- **Поддержка длинных имен файлов с обратной совместимостью**— NTFS допускает длинные имена файлов, сохраняя псевдоним 8,3 на диске (в Юникоде) для обеспечения совместимости с файловыми системами, которые накладывают ограничение 8,3 на имена и расширения файлов. При необходимости (по соображениям производительности) можно выборочно отключить 8,3 псевдонимов на отдельных томах NTFS в Windows Server 2008 R2, Windows 8 и более поздних версиях операционной системы Windows.
  В Windows Server 2008 R2 и более поздних версиях короткие имена по умолчанию отключены при форматировании тома с помощью операционной системы. Для совместимости приложений на системном томе все еще включены короткие имена.

- **Поддержка путей расширенной длины**. Многие функции Windows API имеют версии Юникода, позволяющие использовать расширенный путь длиной приблизительно 32 767 символов, за исключением ограничений по сравнению с 260 символами, которые\_определяются параметром max Path. Подробные требования к имени файла и формату пути и рекомендации по реализации путей расширенной длины см. в разделе [присвоение имен файлам, путям и пространствам имен](https://msdn.microsoft.com/library/windows/desktop/aa365247).

- **Кластерное хранилище**. при использовании в отказоустойчивых кластерах NTFS поддерживает постоянно доступные тома, к которым несколько узлов кластера могут одновременно обращаться при использовании совместно с файловой системой кластера общих ТОМОВ (CSV). Дополнительные сведения см. [в статье Использование общих томов кластера в отказоустойчивом кластере](../../failover-clustering/failover-cluster-csvs.md).

### <a name="flexible-allocation-of-capacity"></a>Гибкое выделение емкости

Если пространство на томе ограничено, NTFS предоставляет следующие возможности для работы с емкостью хранилища сервера:

- Используйте дисковые квоты для контроля и контроля использования дискового пространства на томах NTFS для отдельных пользователей.
- Используйте сжатие файловой системы, чтобы максимально увеличить объем данных, которые можно хранить.
- Увеличьте размер тома NTFS, добавив нераспределенное пространство с того же диска или с другого диска.
- Подключите том к любой пустой папке на локальном томе NTFS, если вы исчерпали буквы диска или хотите создать дополнительное пространство, доступное из существующей папки.

## <a name="additional-information"></a>Дополнительные сведения

- [Рекомендации по размеру кластера для ReFS и NTFS](https://techcommunity.microsoft.com/t5/Storage-at-Microsoft/Cluster-size-recommendations-for-ReFS-and-NTFS/ba-p/425960)
- [Общие сведения о отказоустойчивой файловой системе (ReFS)](../refs/refs-overview.md)
- [Новые возможности в файловой системе NTFS](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2012-r2-and-2012/dn466520(v%3dws.11)) (Windows Server 2012 R2)
- [Новые возможности в файловой системе NTFS](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/ff383236(v=ws.10)) (Windows Server 2008 R2, Windows 7)
- [Работоспособность NTFS и chkdsk](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2012-r2-and-2012/hh831536(v%3dws.11))
- [Самостоятельное восстановление NTFS](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc771388(v=ws.10)) (впервые появился в Windows Server 2008)
- [Транзакционная NTFS](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2008-r2-and-2008/cc730726(v%3dws.10)) (впервые появился в Windows Server 2008)
- [Хранилище в Windows Server](../storage.md)