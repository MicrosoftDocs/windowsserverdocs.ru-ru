---
title: Развертывание сетевой файловой системы
description: В этой статье описывается развертывание сетевой файловой системы.
ms.prod: windows-server-threshold
ms.topic: article
author: JasonGerend
ms.author: jgerend
ms.technology: storage
ms.date: 07/09/2018
ms.localizationpriority: medium
ms.openlocfilehash: ab80b6d73a40256d5935635c9afc55b7c53727d3
ms.sourcegitcommit: 2977c707a299929c6ab0d1e0adab2e1c644b8306
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/24/2019
ms.locfileid: "63737830"
---
# <a name="deploy-network-file-system"></a>Развертывание сетевой файловой системы

>Относится к: Windows Server 2016, Windows Server 2012 R2, Windows Server 2012

Сетевой файловой системы (NFS) предоставляет общего решения, которое служит для передачи файлов между компьютерами под управлением Windows Server и операционных системах UNIX, используя протокол NFS. В этом разделе описываются шаги, следует придерживаться, чтобы развернуть NFS.

## <a name="whats-new-in-network-file-system"></a>Новые возможности в сетевой файловой системы

Вот, что изменилось для NFS в Windows Server 2012:

- **Поддержка NFS версии 4.1**. Эта версия протокола включает следующие улучшения.
  - Это проще, Повышение доступности навигации брандмауэры.
  - Поддерживает RPCSEC\_GSS протокола, обеспечивая более высокий уровень безопасности и что клиенты и серверы, для согласования безопасности.
  - Поддерживает семантику файл UNIX и Windows.
  - Использует преимущества развертывание кластерного файлового сервера.
  - Поддерживает процедуры комплексной глобальных сетей.

- **Модуль NFS для Windows PowerShell**. Доступность встроенных командлетов NFS упрощает автоматизацию различных операций. Имена командлетов согласованны с другими Windows командлетами PowerShell (с помощью команды, такие как «Get» и «Set»), это упрощает для пользователей, знакомых с помощью Windows PowerShell, чтобы узнать, как использовать новые командлеты.
- **Усовершенствования управления NFS**. Новая консоль централизованного управления Пользовательским интерфейсом упрощает настройку и управление SMB и NFS общих ресурсов, квоты, блокировки файлов и классификации, а также управление кластеризованными файловыми серверами.
- **Удостоверение, сопоставление улучшения**. Поддержка нового пользовательского интерфейса и командлеты Windows PowerShell на основе задач для настройки сопоставления удостоверений, что позволяет администраторам быстро настроить источник сопоставления удостоверений, а затем создайте отдельные сопоставленные удостоверениями пользователей. Усовершенствования упрощают администраторам настроить общую папку для нескольких протоколов доступ через NFS и SMB.
- **Реструктуризация модели ресурсов кластера**. Это улучшение обеспечивает согласованность модели ресурсов кластера для Windows NFS и серверы протокола SMB и упрощает администрирование. Для NFS-серверов, которые имеют много общих ресурсов сетевых ресурсов и число вызовов WMI требуется выполнить отработку отказа тома, содержащей большое количество общих ресурсов NFS уменьшаются.
- **Интеграция с диспетчером возобновить ключ**. Диспетчер ключа возобновления является компонентом, который отслеживает файлового сервера и состояние файловой системы и позволяет серверам протокол Windows SMB и NFS для отработки отказа без нарушения работы клиентов или серверных приложений, которые хранят свои данные на файловом сервере. Это улучшение является ключевым компонентом возможности непрерывной доступности файлового сервера под управлением Windows Server 2012.

## <a name="scenarios-for-using-network-file-system"></a>Сценарии использования сетевой файловой системы

NFS поддерживает смешанную среду операционных системах Windows и UNIX. В следующих сценариях развертывания являются примерами развертыванием постоянную доступность файлового сервера Windows Server 2012 с помощью NFS.

### <a name="provision-file-shares-in-heterogeneous-environments"></a>Подготовка файловые ресурсы в разнородных средах

Этот сценарий применим для организаций с разнородными средами, как в Windows, так и в других операционных систем, таких как UNIX или клиента на основе Linux компьютеров. В этом сценарии можно предоставить доступ нескольких протоколов в тот же файловый ресурс по протоколам SMB и NFS. Как правило при развертывании файлового сервера Windows в этом сценарии вы хотите организовать совместную работу пользователей в Windows и компьютеров с ОС UNIX. При настройке общей папки с протоколами SMB и NFS, используется совместно с пользователями Windows, доступ к их файлам по протоколу SMB, и пользователи компьютеров с ОС UNIX обычно обращаться к файлам по протоколу NFS.

В этом сценарии необходимо иметь допустимое удостоверение сопоставления источника конфигурации. Windows Server 2012 поддерживает следующие сопоставления хранилища удостоверений:

- Файл сопоставления
- Доменные службы Active Directory (AD DS)
- Хранит RFC 2307 с LDAP, такие как Active Directory облегченного (AD LDS)
- Пользователь сервера имя сопоставления (UNM)

### <a name="provision-file-shares-in-unix-based-environments"></a>Подготовка файловых ресурсов в средах на базе UNIX

В этом случае Windows файловые серверы развертываются в среде преимущественно на основе UNIX для предоставления доступа к файловым ресурсам NFS клиентские компьютеры под управлением UNIX. Параметр доступ несопоставленных пользователей UNIX (UUUA) изначально была реализована для общих ресурсов NFS в Windows Server 2008 R2, Windows, серверы, которые могут использоваться для хранения данных NFS без создания UNIX к Windows сопоставления учетных записей. UUUA администраторы могут быстро подготовить и развернуть NFS не нужно настраивать сопоставление учетной записи. При включении для NFS UUUA создает идентификаторы безопасности (SID) для представления несопоставленных пользователей. Сопоставленные учетные записи используйте стандартные идентификаторы безопасности Windows (SID) и несопоставленных пользователей использовать пользовательские идентификаторы безопасности NFS.

## <a name="system-requirements"></a>Системные требования

Сервер для NFS можно установить в любой версии Windows Server 2012. Можно использовать клиент NFS с компьютеров с ОС UNIX, работающих под управлением NFS-сервер или клиент NFS Если соответствует этих реализаций сервер и клиент NFS с помощью одного из следующих спецификациях протоколов:

1. Спецификация протокола NFS версии 4.1 (как определено в RFC [5661](https://tools.ietf.org/html/rfc5661))
2. Спецификация протокола NFS версии 3 (как определено в RFC [1813](https://tools.ietf.org/html/rfc1813))
3. Спецификация протокола NFS версии 2 (как определено в RFC [1094](https://tools.ietf.org/html/rfc1094))

## <a name="deploy-nfs-infrastructure"></a>Развертывание инфраструктуры NFS

Вам потребуется развернуть следующие компьютеры и подключите их в локальной сети (LAN).

- Один или несколько компьютеров под управлением Windows Server 2012, на котором будет установлен двух основных служб для NFS компонентов: Сервер для NFS и клиента для NFS. Эти компоненты можно установить на одном компьютере или на разных компьютерах.
- Один или несколько компьютеров с ОС UNIX, работающих под управлением сервера NFS и NFS клиентское программное обеспечение. Компьютер на базе UNIX, на котором выполняется сервер NFS размещает общую папку NFS или экспорт, который обращается к компьютеру, на котором работает Windows Server 2012 в качестве клиента с помощью клиента для NFS. NFS-сервер и клиентское программное обеспечение можно установить на одном компьютере с ОС UNIX или на разных компьютерах, на базе UNIX, при необходимости.
- Контроллер домена под управлением на функциональном уровне, Windows Server 2008 R2. Контроллер домена предоставляет сведения о проверке подлинности пользователя и сопоставление для среды Windows.
- Когда контроллер домена не развернута, можно использовать сервер службы сведения сети (NIS) для предоставления информации проверки подлинности пользователя для среды UNIX. Или, при желании можно использовать файлы паролей и групп, которые хранятся на компьютере, на котором запущена служба сопоставления имен пользователей.

### <a name="install-network-file-system-on-the-server-with-server-manager"></a>Установите сетевой файловой системы на сервере с помощью диспетчера серверов

1. В мастере добавления ролей и компонентов в разделе ролей сервера выберите **файловые службы и службы хранилища** (если они еще не установлены).
2. В разделе **файл и iSCSI служб**выберите **файлового сервера** и **сервер для NFS**. Выберите **добавить компоненты** для включения выбранных компонентов NFS.
3. Выберите **установить** для установки компонентов NFS на сервере.

### <a name="install-network-file-system-on-the-server-with-windows-powershell"></a>Установите сетевой файловой системы на сервере с помощью Windows PowerShell

1. Запустите Windows PowerShell. Щелкните правой кнопкой мыши значок PowerShell на панели задач и выберите **Запуск от имени администратора**.
2. Выполните следующие команды Windows PowerShell:

```PowerShell
Import-Module ServerManager
Add-WindowsFeature FS-NFS-Service
Import-Module NFS
```

## <a name="configure-nfs-authentication"></a>Настройка проверки подлинности NFS

При использовании NFS версии 4.1 и протоколы NFS версии 3.0, у вас есть следующие параметры проверки подлинности и безопасности.

- RPCSEC\_GSS
  - **Krb5**. Использует протокол Kerberos версии 5 для проверки подлинности пользователей перед предоставлением доступа к общей папке.
  - **Krb5i**. Использует протокол Kerberos версии 5 для проверки подлинности с целостностью проверки (контрольных сумм), который проверяет, что данные не были изменены.
  - **Krb5p** использует Kerberos версии 5, который выполняет проверку подлинности трафика NFS с шифрованием для конфиденциальности.
- ПРОВЕРКА ПОДЛИННОСТИ\_SYS

Вы можете также не следует использовать сервер авторизации (AUTH\_SYS), что дает возможность разрешить доступ несопоставленным пользователям. Если используется доступ несопоставленных пользователей, необходимо разрешить несопоставленным пользователям доступ по UID / GID, который используется по умолчанию, или разрешить анонимный доступ.

Инструкции по настройке проверки подлинности NFS на обсуждается в следующем разделе.

## <a name="create-an-nfs-file-share"></a>Создайте общую папку NFS

Можно создать файловый ресурс NFS, с помощью командлетов диспетчера серверов или Windows PowerShell NFS.

### <a name="create-an-nfs-file-share-with-server-manager"></a>Создайте общую папку NFS с помощью диспетчера серверов

1. Войдите на сервер от имени члена локальной группы администраторов.
2. Автоматически запустится диспетчер сервера. Если этого не произошло, выберите **запустить**, тип **servermanager.exe**и выберите **диспетчера серверов**.
3. С левой стороны экрана выберите **файловых служб и служб хранилища**, а затем выберите **общих папок**.
4. Выберите **Чтобы создать общую папку, запустите мастер создания общих ресурсов**.
5. На **выберите профиль** выберите либо **общий ресурс NFS — быстрый** или **общий ресурс NFS — дополнительные**, а затем выберите **Далее**.
6. На **расположение общей папки** странице, выберите сервер и том и выберите **Далее**.
7. На **имя общего ресурса** странице, укажите имя для нового общего ресурса и выберите **Далее**.
8. На **проверки подлинности** укажите метод проверки подлинности, который вы хотите использовать для этого общего ресурса.
9. На **разрешения общего ресурса** выберите **добавить**, а затем укажите узел, группа клиентов или сетевых групп, вам необходимо предоставить доступ к общей папке.
10. В **разрешения**, настроить тип управления доступом, необходимо предоставить и выберите **ОК**.
11. На **Подтверждение** странице, проверьте конфигурацию и выберите **создать** для создания общей папки NFS.

### <a name="windows-powershell-equivalent-commands"></a>Эквивалентные команды Windows PowerShell

Следующий командлет Windows PowerShell также можно создать общую папку NFS (где `nfs1` — это имя общего ресурса и `C:\\shares\\nfsfolder` — это путь к файлу):

```PowerShell
New-NfsShare -name nfs1 -Path C:\shares\nfsfolder
```

### <a name="known-issue"></a>Известная проблема
NFS версии 4.1 разрешает имена файлов быть создана или скопировать с помощью содержит недопустимые символы. При попытке открыть файлы с помощью редактора vi, отображается как поврежденный. Не удается сохранить файл из vi, переименовать, переместить его или изменить разрешения. Избегайте использования illigal символов.
