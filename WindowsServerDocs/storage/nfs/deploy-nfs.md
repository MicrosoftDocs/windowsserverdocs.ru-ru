---
title: Развертывание сетевой файловой системы
description: В этой статье описывается развертывание сети файловой системы.
ms.prod: windows-server-threshold
ms.topic: article
author: JasonGerend
ms.author: jgerend
ms.technology: storage
ms.date: 07/09/2018
ms.localizationpriority: medium
ms.openlocfilehash: 2f3671283720d515cd3e3e609d98e02343c15892
ms.sourcegitcommit: fcc26ec5a2cc73b59c5752377b39c070d288655e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/19/2018
ms.locfileid: "8976690"
---
# Развертывание сетевой файловой системы

>Область применения: Windows Server 2016, Windows Server 2012 R2, Windows Server 2012

Сетевой файловой системы (NFS) предоставляет решение, которое позволяет передавать файлы между компьютерами под управлением Windows Server и операционных систем UNIX, используя протокол NFS к файлам. В этом разделе описаны действия, вы должны следовать развертывание NFS.

## Новые возможности в сети файловой системы

Вот, что изменилось для NFS в Windows Server 2012.

- **Поддержка NFS версии 4.1**. Эта версия протокола включает следующие возможности.
  - Переход брандмауэры проще, увеличивая специальных возможностей.
  - Поддерживает протокол RPCSEC\_GSS, предоставляя более высокий уровень безопасности и разрешают клиенты и серверы для согласования безопасности.
  - Поддерживает Windows и UNIX семантики файла.
  - Пользуется кластерного файлового сервера развертывания.
  - Поддерживает процедуры комплексной поддержкой глобальной сети.

- **Модуль NFS для Windows PowerShell**. Доступность встроенных командлетов NFS упрощает автоматизировать различные операции. Имена командлетов согласованы с других командлетов Windows PowerShell (с помощью команд, таких как «Познакомьтесь» и «Установить»), облегчая пользователям знакомы Узнайте, как использовать новые командлеты Windows PowerShell.
- **Усовершенствования в области управления NFS**. Новая консоль централизованное управление на основе пользовательского интерфейса упрощает настройку и управление SMB и NFS общих папок, квоты, фильтры блокировки файлов и классификации, в дополнение к управлению кластерные файловые серверы.
- **Сопоставление удостоверения усовершенствования**. Новые возможности поддержки пользовательского интерфейса и задачу продолжение командлетов Windows PowerShell для настройки сопоставления удостоверений, которая позволяет администраторам быстро настроить источник сопоставления удостоверений, а затем создать отдельные сопоставления удостоверений для пользователей. Улучшения облегчают администраторам настроить общую папку для нескольких протоколов доступ через NFS и SMB.
- **Измените модель ресурсов кластера**. Это улучшение обеспечивает согласованность модели ресурс кластера для Windows NFS и протокола SMB-серверам и упрощает администрирование. Для NFS серверов, которые имеют много общих папок сетевых ресурсов и количество необходимых вызовы WMI при сбое на томе, содержащую сжать большое число общих ресурсов NFS.
- **Интеграция с помощью диспетчера возобновить ключей**. Диспетчер ключ возобновления — это компонент, который отслеживает файловым сервером и состояния файловой системы и позволяет серверах протокола Windows SMB и NFS при сбое не нарушая клиентов и серверных приложений, которые хранят данные на файловом сервере. Это улучшение — это ключевой компонент возможность непрерывную доступность файловых серверов под управлением Windows Server 2012.

## Сценарии использования сети файловой системы

NFS поддерживает смешанной среде операционных систем Windows и UNIX. Как вы можете развернуть непрерывной доступности файловом сервере Windows Server 2012 с помощью NFS примерами являются следующие сценарии развертывания.

### Подготовка общие файлы разнородными средами

Этот сценарий применяется для организаций с разнородными средами, Windows и других операционных систем, таких как UNIX или клиента на основе Linux компьютеров. В этом случае вы можете предоставить доступ нескольких протоколов в том же общую по протоколам NFS и SMB. Как правило при развертывании файловый сервер Windows в этом сценарии, требуется для упрощения совместной работы между пользователями в Windows и UNIX-компьютерах. При настройке общего файлового ресурса, находящейся в общем доступе протоколы SMB и NFS, доступ к их файлам по протоколу SMB, пользователей Windows и пользователей на компьютерах под управлением UNIX обычно доступа к файлам по протоколу NFS.

В этом сценарии должна быть конфигурация действительный идентификатор сопоставления источника. Windows Server 2012 поддерживает следующие хранилищ сопоставления удостоверений.

- Сопоставление файлов
- Доменные службы Active Directory (AD DS)
- RFC 2307 со стандартами LDAP сохраняет например служб Active Directory облегченного доступа (AD LDS)
- Сервер пользователей имя сопоставления (UNM)

### Подготовка общие файлы на основе UNIX

В этом случае Windows файловые серверы развертываются в среде преимущественно на основе UNIX для предоставления доступа к общим ресурсам NFS для клиентских компьютерах под управлением UNIX. Параметр доступа пользователей несопоставленных UNIX (UUUA) изначально была реализована для общих папок NFS в Windows Server 2008 R2 таким образом, чтобы серверы могут использоваться для хранения данных NFS без создания UNIX для Windows Windows сопоставление учетных записей. UUUA позволяет администраторам быстро Подготовка и развертывание NFS без настройки учетной записи сопоставления. При включении для NFS UUUA создает идентификаторы безопасности (SID) для представления несопоставленные пользователи. Сопоставленные учетные записи пользователей использовать стандартные идентификаторы безопасности (SID), а несопоставленные пользователи использовать пользовательские идентификаторы безопасности NFS.

## Требования к системе

Сервер для NFS можно установить в любой версии Windows Server 2012. NFS можно использовать с на основе UNIX компьютерах под управлением NFS-сервер или клиент NFS Если соблюдать эти реализации NFS клиента и сервера с помощью одного из следующих спецификации протокола.

1. Спецификации протокола версии 4.1 NFS (согласно RFC [5661](https://tools.ietf.org/html/rfc5661))
2. Спецификации протокола версии 3 NFS (согласно RFC [1813](https://tools.ietf.org/html/rfc1813))
3. Спецификации протокола версии 2 NFS (согласно RFC [1094](https://tools.ietf.org/html/rfc1094))

## Развертывание инфраструктуры NFS

Необходимо развернуть следующие компьютеры и соединить их в локальной сети (LAN):

- Один или несколько компьютеров под управлением Windows Server 2012, на котором будет установлен двух основных компонентов служб для NFS: сервер для NFS и клиент для NFS. Эти компоненты можно установить на том же компьютере или на разных компьютерах.
- Один или несколько UNIX-компьютерах под управлением NFS-сервера и программное обеспечение клиента NFS. Компьютер под управлением UNIX, на котором выполняется сервер NFS размещаются NFS файловый ресурс, экспорт, к которому можно получить с помощью компьютера под управлением Windows Server 2012 как клиент, использующий клиент для NFS. Обеспечение клиента и сервера NFS можно установить на одном компьютере под управлением UNIX или на разных компьютерах под управлением UNIX, в случае необходимости.
- Контроллер домена, работающего на функциональный уровень Windows Server 2008 R2. Контроллер домена предоставляет сведения о проверке подлинности пользователя и сопоставление для среды Windows.
- Когда контроллер домена не развернута, можно использовать сервера службы сведения о сети (NIS) предоставить сведения о проверке подлинности пользователя для среды UNIX. Или, если вы предпочитаете, можно использовать файлы групп и паролей, которые хранятся на компьютере, на котором выполняется служба сопоставления имен пользователей.

### Установка сетевой файловой системы на сервере с помощью диспетчера сервера

1. На добавление мастера ролей и компонентов, в списке ролей сервера выберите **файловые службы и службы хранилища** , если он еще не установлен.
2. В разделе **файла и iSCSI Services**, выберите **Файловый сервер** и **сервер для NFS**. Выберите **Добавить компоненты** для выбранного NFS возможности.
3. Выберите **установки** для установки компонентов NFS на сервере.

### Установка сетевой файловой системы на сервере с помощью Windows PowerShell

1. Запустите Windows PowerShell. Щелкните правой кнопкой мыши значок PowerShell на панели задач и выберите **Запуск от имени администратора**.
2. Выполните следующие команды Windows PowerShell:

```PowerShell
Import-Module ServerManager
Add-WindowsFeature FS-NFS-Service
Import-Module NFS
```

## Настройка проверки подлинности NFS

При использовании NFS версии 4.1 и протоколы NFS версии 3.0, у вас есть следующие параметры проверки подлинности и обеспечения безопасности.

- RPCSEC\_GSS
  - **Krb5**. Использует протокол Kerberos V5 для проверки подлинности пользователей перед предоставлением доступа к общей папке.
  - **Krb5i**. Использует протокол Kerberos V5 для проверки подлинности целостности проверки (контрольные суммы), который позволяет убедиться, что данные не было изменено.
  - **Krb5p** Использует протокол Kerberos версии 5, который проверяет подлинность NFS трафика с помощью шифрования для обеспечения конфиденциальности.
- AUTH\_SYS

Вы также можете отказаться от сервера авторизации (AUTH\_SYS), что дает возможность предоставить доступ в несопоставленные пользователя. При использовании несопоставленных пользователю доступ, можно задать, чтобы разрешить доступ несопоставленных пользователей по UID / GID, который является значением по умолчанию, или разрешить анонимный доступ.

Инструкции по настройке проверки подлинности NFS на описанные в следующем разделе.

## Создайте общий файловый ресурс NFS

Вы можете создать общий файловый ресурс NFS, с помощью диспетчера сервера или Windows PowerShell NFS командлетов.

### Создайте общий файловый ресурс NFS с помощью диспетчера сервера

1. Войдите на сервер является членом локальной группы "Администраторы".
2. Диспетчер серверов запускается автоматически. Если он не запускается автоматически, выберите **Начать**, введите **servermanager.exe**и выберите **Диспетчер серверов**.
3. В левой части выберите **файловые службы и службы хранилища**, а затем выберите **общих ресурсов**.
4. Выберите **для создания общего файлового ресурса, запустите мастер создания общего доступа**.
5. На странице " **Выберите профиль** " выберите **Общую папку NFS — Быстрая** или **общих папок NFS - Advanced**, а затем выберите **Далее**.
6. На странице **Общую папку** выберите сервер и тома и выберите **Далее**.
7. На странице **Имя общего ресурса** укажите имя для новой общей папки и выберите **Далее**.
8. На странице " **Проверка подлинности** " Укажите метод проверки подлинности, который вы хотите использовать для этого общего ресурса.
9. На странице **Разрешения общего ресурса** выберите **Добавить**и укажите узла, клиентской группы или сетевых групп, вам необходимо предоставить доступ к общей папке.
10. В списке **разрешений**настроить тип элемента управления доступом, вы хотите, чтобы пользователи часто используют и нажмите кнопку **ОК**.
11. На странице **подтверждения** просмотрите конфигурацию и выберите **Создать** для создания общей NFS.

### Эквивалент команды Windows PowerShell

Следующий командлет Windows PowerShell можно также создать общий файловый ресурс NFS (где `nfs1` — это имя общей папки и `C:\\shares\\nfsfolder` — это путь к файлу):

```PowerShell
New-NfsShare -name nfs1 -Path C:\shares\nfsfolder
```

### Известные проблемы
NFS версии 4.1 позволяет имена файлов необходимо создать или скопировать с помощью недопустимые символы. При попытке открыть файлы с помощью редактора vi, отображается как повреждены. Не удается сохранить файл из vi, переименовать, переместить его или изменять разрешения на доступ. Не используйте символы illigal.
