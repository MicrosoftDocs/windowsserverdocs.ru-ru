---
title: Использование унаследованных разрешений с перечислением на основе доступа
description: В этой статье описывается использование унаследованных разрешений с перечислением на основе доступа.
ms.date: 6/5/2017
ms.prod: windows-server
ms.technology: storage
ms.topic: article
author: JasonGerend
manager: brianlic
ms.author: jgerend
ms.openlocfilehash: 433fe53a3d580aafc50b152ec20156436b05481f
ms.sourcegitcommit: 6aff3d88ff22ea141a6ea6572a5ad8dd6321f199
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/27/2019
ms.locfileid: "71402136"
---
# <a name="using-inherited-permissions-with-access-based-enumeration"></a>Использование унаследованных разрешений с перечислением на основе доступа

> Область применения: Windows Server 2019, Windows Server (половина ежегодного канала), Windows Server 2016, Windows Server 2012 R2, Windows Server 2012, Windows Server 2008 R2, Windows Server 2008

По умолчанию разрешения, используемые для папки DFS, наследуются от локальной файловой системы сервера пространства имен. Разрешения наследуются от корневого каталога системного диска и предоставляют ДОМЕНу\\группам пользователей разрешения на чтение. В результате даже после включения перечисления на основе доступа все папки в пространстве имен остаются видимыми всем пользователям домена.

## <a name="advantages-and-limitations-of-inherited-permissions"></a>Преимущества и ограничения унаследованных разрешений

Существует два основных преимущества использования унаследованных разрешений для управления тем, кто из пользователей может просматривать папки в пространстве имен DFS:

-   Можно быстро применить унаследованные разрешения к множеству папок, не прибегая к использованию сценариев.
-   Можно применять унаследованные разрешения к корням пространства имен и папкам без конечных объектов.

Несмотря на преимущества, с унаследованными разрешениями в пространствах имен DFS связан ряд ограничений, которые делают их неприменимыми для большинства сред:

-   Изменения унаследованных разрешений не реплицируются на другие серверы пространства имен. Таким образом, использовать унаследованные разрешения имеет смысл только применительно к изолированным пространствам имен или в средах, где можно реализовать стороннюю систему репликации для обеспечения синхронизации списков управления доступом (ACL) на всех серверах пространства имен.
-   Оснастка "Управление DFS" и команда **Dfsutil** не позволяют просматривать или изменять унаследованные разрешения. Таким образом, для управления пространством имен в дополнение к оснастке "Управление DFS" или команде **Dfsutil** необходимо использовать проводник или команду **Icacls**.
-   При использовании унаследованных разрешений невозможно изменить разрешения папки с конечными объектами, кроме как с помощью команды **Dfsutil**. Пространства имен DFS автоматически удаляют разрешения с папок с конечными объектами, заданные с использованием других средств или методов.
-   При задании разрешений для папки с конечными объектами, когда вы используете унаследованные разрешения, список управления доступом, который вы установили для папки с конечными объектами, объединяется с разрешениями, наследуемыми от родителя папки в файловой системе. Необходимо изучить оба набора разрешений, чтобы определить, каковы будут результирующие разрешения.

> [!NOTE]
> При использовании унаследованных разрешений проще всего задать разрешения для корней пространства имен и папок без конечных объектов. Затем эти унаследованные разрешения можно использовать для папок с конечными объектами, чтобы они наследовали все разрешения от своих родителей.

## <a name="using-inherited-permissions"></a>Использование унаследованных разрешений

Чтобы ограничить круг пользователей, которые могут просматривать папку DFS, необходимо выполнить одну из следующих задач:

-   **Задайте явные разрешения для папки, отключив наследование.** О том, как установить явные разрешения для папки с конечными объектами (ссылки) с помощью оснастки "Управление DFS" или команды **Dfsutil**, см. в разделе [Включение перечисления на основе доступа для пространства имен](enable-access-based-enumeration-on-a-namespace.md).
-   **Изменение унаследованных разрешений на родителе в локальной файловой системе**. Чтобы изменить разрешения, унаследованные папкой с конечными объектами, если вы уже установили явные разрешения для папки, переключитесь с явных разрешений на унаследованные разрешения, как описано в следующей процедуре. Затем с помощью проводника или команды **Icacls** изменить разрешения папки, от которой папка с конечными объектами наследует свои разрешения.

> [!NOTE]
> Перечисление на основе доступа не мешает пользователям переходить по ссылке на конечный объект папки, если они уже знают путь DFS папки с конечными объектами. Разрешения, заданные с помощью проводника или команды **Icacls** для корней пространства имен или папок без конечных объектов, определяют, могут ли пользователи получать доступ к папке DFS или корню пространства имен. Однако они не мешают пользователям получить непосредственный доступ к папке с конечными объектами. Запретить доступ пользователя к конечным объектам папки могут только разрешения для общего ресурса или разрешения файловой системы NTFS, относящиеся к самой общей папке.

## <a name="to-switch-from-explicit-permissions-to-inherited-permissions"></a>Переключение с явных разрешений на унаследованные разрешения

1.  В узле **Пространства имен** дерева консоли найдите папку с конечными объектами, управлять видимостью которых вы хотите, щелкните эту папку правой кнопкой мыши и выберите **Свойства**.

2.  Перейдите на вкладку **Дополнительно**.

3.  Нажмите кнопку **Наследовать разрешения из локальной файловой системы**, а затем нажмите кнопку **ОК** в диалоговом окне **Подтвердите использование унаследованных разрешений**. При этом будут удалены все явно заданные разрешения для этой папки и будут восстановлены унаследованные разрешения NTFS из локальной файловой системы сервера пространства имен.

4.  Чтобы изменить унаследованные разрешения для папок или корней пространства имен в пространстве имен DFS, используйте проводник или команду **ICacls**.

## <a name="see-also"></a>См. также

-   [Создание пространства имен DFS](create-a-dfs-namespace.md)