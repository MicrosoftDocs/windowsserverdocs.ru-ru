---
ms.assetid: 01988844-df02-4952-8535-c87aefd8a38a
title: Deploy Automatic File Classification (Demonstration Steps)
author: billmath
ms.author: billmath
manager: femila
ms.date: 05/31/2017
ms.topic: article
ms.openlocfilehash: 19c2ddbdc7ae00c32147023b2204efface9c4727
ms.sourcegitcommit: dfa48f77b751dbc34409aced628eb2f17c912f08
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/07/2020
ms.locfileid: "87952886"
---
# <a name="deploy-automatic-file-classification-demonstration-steps"></a>Deploy Automatic File Classification (Demonstration Steps)

>Область применения. Windows Server 2016, Windows Server 2012 R2, Windows Server 2012

В этом разделе описывается, как включить свойства ресурсов в Active Directory, создать правила классификации на файловом сервере и назначить значения свойствам ресурсов для файлов на сервере. Для этого примера создаются следующие правила классификации:

-   Правило классификации содержимого, которое ищет в наборе файлов строку "Contoso Confidential". Если строка найдена в файле, для свойства ресурса "Влияние" задается значение "Высокий".

-   Правило классификации содержимого, которое ищет в наборе файлов регулярное выражение, соответствующее номеру социального страхования по крайней мере 10 раз в одном файле. Если данное условие выполняется, файл классифицируется как содержащий личные сведения, а для свойства ресурса "Личные сведения" задается значение "Высокий".

**Содержание документа**

-   [Шаг 1. Создание определений свойств ресурсов](assetId:///4a96cdaf-0081-4824-aab8-f0d51be501ac#BKMK_Step1)

-   [Шаг 2. Создание правила классификации строкового содержимого](assetId:///4a96cdaf-0081-4824-aab8-f0d51be501ac#BKMK_Step2)

-   [Шаг 3. Создание правила классификации содержимого регулярного выражения](assetId:///4a96cdaf-0081-4824-aab8-f0d51be501ac#BKMK_Step3)

-   [Шаг 4. Проверка того, что файлы классифицированы](Deploy-Automatic-File-Classification--Demonstration-Steps-.md#BKMK_Step4)

> [!NOTE]
> В этом разделе приводятся примеры командлетов Windows PowerShell, которые можно использовать для автоматизации некоторых описанных процедур. Дополнительные сведения см. в разделе [Использование командлетов](https://go.microsoft.com/fwlink/p/?linkid=230693).

## <a name="step-1-create-resource-property-definitions"></a><a name="BKMK_Step1"></a>Шаг 1. Создание определений свойств ресурсов
Свойства ресурса "Личные сведения" и "Влияние" включены, поэтому инфраструктура классификации файлов может их использовать для маркировки файлов, которые проверяются в общей сетевой папке.

[Выполните этот шаг с помощью Windows PowerShell.](assetId:///4a96cdaf-0081-4824-aab8-f0d51be501ac#BKMK_PSstep1)

#### <a name="to-create-resource-property-definitions"></a>Создание определений свойств ресурсов

1.  На контроллере домена войдите на сервер как член группы безопасности "Администраторы домена".

2.  Откройте центр администрирования Active Directory. В диспетчере серверов откройте меню **Сервис** и щелкните **Центр администрирования Active Directory**.

3.  Разверните узел **Динамический контроль доступа** и выберите **Свойства ресурса**.

4.  Щелкните правой кнопкой **Влияние** и выберите **Включить**.

5.  Щелкните правой кнопкой мыши **Личные сведения** и выберите команду **Включить**.

![Руководство по решению.](media/Deploy-Automatic-File-Classification--Demonstration-Steps-/PowerShellLogoSmall.gif)***<em>эквивалентные команды Windows PowerShell</em>***

Следующие командлеты Windows PowerShell выполняют ту же функцию, что и предыдущая процедура. Вводите каждый командлет в одной строке, несмотря на то, что здесь они могут отображаться разбитыми на несколько строк из-за ограничений форматирования.

```
Set-ADResourceProperty '"Enabled:$true '"Identity:'CN=Impact_MS,CN=Resource Properties,CN=Claims Configuration,CN=Services,CN=Configuration,DC=contoso,DC=com'
Set-ADResourceProperty '"Enabled:$true '"Identity:'CN=PII_MS,CN=Resource Properties,CN=Claims Configuration,CN=Services,CN=Configuration,DC=contoso,DC=com'
```

## <a name="step-2-create-a-string-content-classification-rule"></a><a name="BKMK_Step2"></a>Шаг 2. Создание правила классификации строкового содержимого
Правило классификации строкового содержимого ищет в файле определенную строку. Если она найдена, значение свойства ресурса можно настроить. В этом примере выполняется сканирование каждого файла в общей сетевой папке и поиск строки "Contoso Confidential". Если строка найдена, связанный файл классифицируется как особо важный для бизнеса.

[Выполните этот шаг с помощью Windows PowerShell.](assetId:///4a96cdaf-0081-4824-aab8-f0d51be501ac#BKMK_PSstep2)

#### <a name="to-create-a-string-content-classification-rule"></a>Создание правила классификации строкового содержимого

1.  Войдите на файловый сервер от имени члена локальной группы безопасности "Администраторы".

2.  В командной строке Windows PowerShell введите команду **Update-FsrmClassificationPropertyDefinition** и нажмите клавишу ВВОД. Эта команда синхронизирует определения свойств, созданные на контроллере домена, с файловым сервером.

3.  Откройте диспетчер ресурсов файлового сервера. В диспетчере серверов откройте меню **Сервис** и щелкните **Диспетчер ресурсов файлового сервера**.

4.  Разверните узел **Управление классификацией**, щелкните правой кнопкой **Правила классификации** и выберите команду **Настроить расписание классификации**.

5.  Установите флажки **Включить фиксированное расписание** и **Разрешить постоянную классификацию для новых файлов**, выберите день недели для выполнения классификации и нажмите кнопку **ОК**.

6.  Щелкните правой кнопкой мыши пункт **Правила классификации** и выберите команду **Создать правило классификации**.

7.  На вкладке **Общие** в поле **Имя правила** введите имя правила, например **Contoso Confidential**.

8.  На вкладке **Область действия** нажмите кнопку **Добавить** и выберите папки, которые необходимо включить в это правило, например D:\Finance Documents.

    > [!NOTE]
    > Также можно выбрать динамическое пространство имен для этой области действия. Дополнительные сведения о динамических пространствах имен для правил классификации см. [в разделе новые возможности файлового сервера диспетчер ресурсов в \[ перенаправленном \] выпуске Windows Server 2012](assetId:///d53c603e-6217-4b98-8508-e8e492d16083).

9. На вкладке **Классификация** выполните следующие действия.

    -   Убедитесь, что в разделе **Выберите метод назначения свойства файлам** установлен флажок **Классификатор содержимого**.

    -   В разделе **Выберите назначаемое свойств** щелкните **Влияние**.

    -   В поле **Укажите значение** выберите значение **Высокий**.

10. Под заголовком **Параметры** нажмите кнопку **Настроить**.

11. В столбце **Тип выражения** выберите элемент **Строка**.

12. В столбце **Выражение** введите **Contoso Confidential** и нажмите кнопку **ОК**.

13. На вкладке **Тип оценки** установите флажок **Заново определить существующие значения свойств**, щелкните **Перезаписать существующее значение** и нажмите кнопку **ОК**.

![Руководство по решению.](media/Deploy-Automatic-File-Classification--Demonstration-Steps-/PowerShellLogoSmall.gif)***<em>эквивалентные команды Windows PowerShell</em>***

Следующие командлеты Windows PowerShell выполняют ту же функцию, что и предыдущая процедура. Вводите каждый командлет в одной строке, несмотря на то, что здесь они могут отображаться разбитыми на несколько строк из-за ограничений форматирования.

```
$date = Get-Date
$AutomaticClassificationScheduledTask = New-FsrmScheduledTask -Time $date -Weekly @(3, 2, 4, 5,1,6,0) -RunDuration 0;$AutomaticClassificationScheduledTask
Set-FsrmClassification -Continuous -schedule $AutomaticClassificationScheduledTask
New-FSRMClassificationRule -Name 'Contoso Confidential' -Property "Impact_MS" -PropertyValue "3000" -Namespace @('D:\Finance Documents') -ClassificationMechanism "Content Classifier" -Parameters @("StringEx=Min=1;Expr=Contoso Confidential") -ReevaluateProperty Overwrite
```

## <a name="step-3-create-a-regular-expression-content-classification-rule"></a><a name="BKMK_Step3"></a>Шаг 3. Создание правила классификации содержимого регулярного выражения
Правило классификации регулярного выражения проверяет файл на наличие шаблона, соответствующего регулярному выражению. Если найдена строка, соответствующая регулярному выражению, значение свойства ресурса можно настроить. В этом примере мы проверим каждый файл в общей сетевой папке на наличие строки, соответствующей номеру социального страхования (XXX-XX-XXXX). Если шаблон найден, связанный файл классифицируется как содержащий личные сведения.

[Выполните этот шаг с помощью Windows PowerShell.](assetId:///4a96cdaf-0081-4824-aab8-f0d51be501ac#BKMK_PSstep3)

#### <a name="to-create-a-regular-expression-content-classification-rule"></a>Создание правила классификации содержимого регулярного выражения

1.  Войдите на файловый сервер от имени члена локальной группы безопасности "Администраторы".

2.  В командной строке Windows PowerShell введите команду **Update-FsrmClassificationPropertyDefinition** и нажмите клавишу ВВОД. Эта команда синхронизирует определения свойств, созданные на контроллере домена, с файловым сервером.

3.  Откройте диспетчер ресурсов файлового сервера. В диспетчере серверов откройте меню **Сервис** и щелкните **Диспетчер ресурсов файлового сервера**.

4.  Щелкните правой кнопкой мыши пункт **Правила классификации** и выберите команду **Создать правило классификации**.

5.  На вкладке **Общие** в поле **Имя правила** введите имя правила, например "Правило PII".

6.  На вкладке **Область действия** нажмите кнопку **Добавить** и выберите папки, которые необходимо включить в это правило, например D:\Finance Documents.

7.  На вкладке **Классификация** выполните следующие действия.

    -   Убедитесь, что в разделе **Выберите метод назначения свойства файлам** установлен флажок **Классификатор содержимого**.

    -   В разделе **Выберите назначаемое свойств** щелкните **Личные сведения**.

    -   В поле **Укажите значение** выберите значение **Высокий**.

8.  Под заголовком **Параметры** нажмите кнопку **Настроить**.

9. В столбце **Тип выражения** выберите элемент **Регулярное выражение**.

10. В столбце **выражение** введите **^ (?! 000) ([0-7] \d {2} | 7 ([0-7] \d | 7 [012])) ([-]?) (?! 00) \d\d\3 (?! 0000) \d {4} $**

11. В столбце **Минимальное число повторений** введите **10** и нажмите кнопку **ОК**.

12. На вкладке **Тип оценки** установите флажок **Заново определить существующие значения свойств**, щелкните **Перезаписать существующее значение** и нажмите кнопку **ОК**.

![Руководство по решению.](media/Deploy-Automatic-File-Classification--Demonstration-Steps-/PowerShellLogoSmall.gif)***<em>эквивалентные команды Windows PowerShell</em>***

Следующие командлеты Windows PowerShell выполняют ту же функцию, что и предыдущая процедура. Вводите каждый командлет в одной строке, несмотря на то, что здесь они могут отображаться разбитыми на несколько строк из-за ограничений форматирования.

```
New-FSRMClassificationRule -Name "PII Rule" -Property "PII_MS" -PropertyValue "5000" -Namespace @('D:\Finance Documents') -ClassificationMechanism "Content Classifier" -Parameters @("RegularExpressionEx=Min=10;Expr=^(?!000)([0-7]\d{2}|7([0-7]\d|7[012]))([ -]?)(?!00)\d\d\3(?!0000)\d{4}$") -ReevaluateProperty Overwrite
```

## <a name="step-4-verify-that-the-files-are-classified-correctly"></a><a name="BKMK_Step4"></a>Шаг 4. Проверка классификации файлов
Вы можете убедиться, что файлы классифицируются правильно, просмотрев свойства файла, созданного в папке, указанной в правилах классификации.

#### <a name="to-verify-that-the-files-are-classified-correctly"></a>Проверка классификации файлов

1.  На файловом сервере примените правила классификации, используя диспетчер ресурсов файлового ресурса.

    1.  Щелкните **Управление классификацией**, щелкните правой кнопкой **Правила классификации** и выберите команду **Запустить классификацию со всеми правилами**.

    2.  Щелкните параметр **Дождаться завершения классификации** и нажмите кнопку **ОК**.

    3.  Закройте отчет об автоматической классификации.

    4.  Это можно сделать с помощью Windows PowerShell, выполнив следующую команду: **Start-фсрмклассификатион ' "рундуратион 0 — Confirm: $false**

2.  Перейдите к папке, указанной в правилах классификации, например D:\Finance Documents.

3.  Щелкните правой кнопкой мыши файл в этой папке и выберите пункт **Свойства**.

4.  Откройте вкладку **Классификация** и убедитесь, что файл классифицирован правильно.

## <a name="see-also"></a><a name="BKMK_Links"></a> См. также

-   [Сценарий. Получение четкого представления о данных с помощью классификации](Scenario--Get-Insight-into-Your-Data-by-Using-Classification.md)

-   [План автоматической классификации файлов](/previous-versions/orphan-topics/ws.11/jj574209(v%3dws.11))


-   [Динамический контроль доступа. Обзор сценария](Dynamic-Access-Control--Scenario-Overview.md)

