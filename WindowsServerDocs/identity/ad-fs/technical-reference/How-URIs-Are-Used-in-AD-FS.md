---
ms.assetid: 53ee93e2-09ea-4f8b-adb7-c24c59f055ea
title: "Как коды URI используются в AD FS"
description: 
author: billmath
ms.author: billmath
manager: femila
ms.date: 05/31/2017
ms.topic: article
ms.prod: windows-server-threshold
ms.technology: identity-adfs
ms.openlocfilehash: 305bf0cece742c961604dacda7e27b8eac8065e5
ms.sourcegitcommit: db290fa07e9d50686667bfba3969e20377548504
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/12/2017
---
>Область применения: Windows Server 2016, Windows Server 2012 R2

# <a name="how-uris-are-used-in-ad-fs"></a>Как коды URI используются в AD FS
\(URI\) универсальный код ресурса представляет собой строку символов, используемый в качестве уникального идентификатора.  В AD FS коды URI используются для обозначения сетевых адресов партнеров и объектов конфигурации.  При использовании для обозначения сетевых адресов партнеров URI всегда является URL-адрес.  При использовании для обозначения объектов конфигурации URI может быть URN или URL-адрес.  Дополнительные общие сведения о кодах URI см. в разделе [RFC 2396](https://go.microsoft.com/fwlink/?LinkId=48289) и [RFC 3986](https://go.microsoft.com/fwlink/?LinkId=90453).  
  
## <a name="uris-as-partner-network-addresses"></a>Коды URI в качестве сетевых адресов партнеров  
Ниже приведены сетевые URL-адреса, которые чаще всего сталкиваются Администраторы в AD FS.  
  
-   URL-адреса службы федерации, в том числе наличия WS-Federation, SAML, наличия WS-Trust, метаданные федерации, наличия WS-MetadataExchange, конфиденциальности и URL-адреса организации  
  
-   URL-адреса доверия с проверяющей стороной, включая наличия WS-Federation, SAML и URL-адреса метаданных федерации  
  
-   URL-адреса отношения доверия поставщика утверждений, включая наличия WS-Federation, SAML и URL-адреса метаданных федерации  
  
## <a name="uris-as-object-identifiers"></a>Коды URI в качестве идентификаторов объектов  
В следующей таблице описаны идентификаторы, с которыми чаще всего сталкиваются Администраторы в AD FS.  
  
|Идентификатор имени|Описание|Сравнение|  
|-------------------|---------------|---------------|  
|Идентификатор службы федерации|Этот идентификатор используется для обозначения службы федерации.  Он используется проверяющими сторонами, использующими утверждения от этой службы федерации, а также поставщиками утверждений, выдающими утверждения для этой службы федерации.|Когда пользователь запрашивает утверждения от поставщика утверждений для этой службы федерации, идентификатор службы федерации будет использоваться для обозначения целевого объекта утверждений.<br /><br />Когда эта служба федерации получает утверждения от поставщика утверждений, она проверяет чтобы убедиться, что утверждения относятся именно к ней, выполняя поиск своего идентификатора.<br /><br />Когда проверяющая сторона получает утверждения из этой службы федерации, проверяющая сторона проверяет, что издатель утверждений соответствует идентификатору службы федерации.|  
|Идентификатор проверяющей стороны|Этот идентификатор используется для обозначения проверяющей стороны в этой службе федерации.  Он используется при выдаче утверждений для проверяющей стороны.|Когда пользователь запрашивает утверждения от этой службы федерации для проверяющей стороны, идентификатор этой проверяющей стороны будет использоваться для обозначения проверяющей стороны, для которой предназначены утверждения.  Это сравнение выполняется с помощью префикса сопоставления \(see below\).<br /><br />Когда проверяющая сторона получает утверждения, она проверяет идентификатор в токене безопасности, чтобы убедиться, что утверждения предназначены для нее.|  
|Идентификатор поставщика утверждений|Этот идентификатор используется для обозначения поставщика утверждений в этой службе федерации.  Он используется при получении утверждений от поставщика утверждений.|Когда эта служба федерации получает утверждения от поставщика утверждений, этой службы федерации проверяет, что издатель утверждений соответствует идентификатору поставщика утверждений.|  
|Тип утверждения|Этот идентификатор используется для определения типа утверждения.  Он используется этой службой федерации, поставщиками утверждений и проверяющими сторонами при отправке и получении утверждений.|Когда служба федерации получает утверждения от поставщика утверждений, правила утверждений, связанный с соответствующим отношением доверия поставщика утверждений позволяют администратору сравнивать типы утверждений и обрабатывать утверждения.  Правила утверждения, связанные с доверия с проверяющей стороной также позволяют администратору сравнивать типы утверждений на основе утверждений, поступающих из правил отношения доверия с поставщиком утверждений и решить, какие утверждения выдавать.|  
  
## <a name="uri-prefix-matching-for-relying-party-identifiers"></a>Сопоставление префиксов URI для идентификаторов проверяющей стороны  
Синтаксис пути URI организован иерархически и отделяется всех «\ или «символов или все»: «символов.  Таким образом, путь может быть разбит на участки пути в зависимости от символа-разделителя в.  При выполнении сопоставления префиксов, каждый участок должен являться полным совпадением согласно правилам сопоставления \ (эти правила определяют регистр matches\). Дополнительные сведения о правилах сопоставления см в стандартах RFC упомянутых выше.  
  
Когда проверяющая сторона определяется в запросе к службе федерации, службы AD FS используют логику сопоставления префиксов для определения соответствия доверия с проверяющей стороной в базе данных конфигурации AD FS.  
  
Например если идентификатор проверяющей стороны в базе данных конфигурации AD FS \(URI1\) префиксом для идентификатора проверяющей стороны в входящего запроса \(URI2\), то должны быть выполнены следующие условия:  
  
-   Конечные разделители \(slashes and colons\) пути участков или ссылок должны игнорироваться.  
  
-   Частей схем URI1 и URI2 должен быть точное совпадение без учета регистра  
  
-   Каждый участок пути идентификатора uri1 должен быть точным соответствием \ (в зависимости от chosen\ чувствительность к регистру) к соответствующему участку пути URI2.  
  
-   URI2 может иметь больше участков пути, чем URI1, однако URI1 не должен иметь больше участков пути, чем URI2.  
  
-   URI1 не может иметь больше участков пути, чем URI2.  
  
-   Если URI1 включает строку запроса, она должна строго соответствовать строке запроса URI2.  
  
-   Если URI1 включает фрагмент, он должен строго соответствовать фрагменту URI2.  
  
Дополнительные примеры приводятся в таблице ниже.  
  
|Идентификатор проверяющей стороны в базе данных конфигурации AD FS|Идентификатор проверяющей стороны в сообщении запроса|Идентификатор запроса совпадает с идентификатором конфигурации?|Причина|  
|------------------------------------------------------------|-----------------------------------------------|------------------------------------------------------------|----------|  
|http:///\/Contoso.com|http:///\/Contoso.com|ЗНАЧЕНИЕ TRUE|Точно соответствует|  
|http:///\/Contoso.com\/|http:///\/Contoso.com|ЗНАЧЕНИЕ TRUE|Конечные символы косой черты игнорируются.|  
|http:///\/Contoso.com|http:///\/Contoso.com\/|ЗНАЧЕНИЕ TRUE|Конечные символы косой черты игнорируются.|  
|http:///\/Contoso.com|http:///\/Contoso.com\/hr|ЗНАЧЕНИЕ TRUE|URI1 имеет не путь и соответствует схеме и для URI2.|  
|http:///\/Contoso.com\/hr|http:///\/Contoso.com\/hr\/Web|ЗНАЧЕНИЕ TRUE|Первые участки пути совпадают, в URI1 нет второго участка пути.|  
|http:///\/Contoso.com\/hr|http:///\/Contoso.com\/hr\/web\/?m\=t|ЗНАЧЕНИЕ TRUE|Те же причины выше строки запроса не влияет.|  
|http:///\/Contoso.com\/hr\/|http:///\/Contoso.com\/hrw\/Main|FALSE|Пути 1 идентификатора URI1 не соответствует участку пути URI2 1|  
|http:///\/Contoso.com\/hr|http:///\/Contoso.com|FALSE|URI1 имеет больше участков пути, чем URI2.|  
|http:///\/Contoso.com\/hr|http:///\/Contoso.com\/hrweb|FALSE|Первые участки пути не совпадают.|  
|http:///\/Contoso.com\/?m\=t|http:///\/Contoso.com\/?m\=f|FALSE|Части строки запроса не совпадают.|  
|https:\/\/Contoso.com|http:///\/Contoso.com|FALSE|Части схемы не совпадают.|  
|http:///\/STS.contoso.com|http:///\/Contoso.com|FALSE|Центр части не совпадают.|  
|http:///\/Contoso.com|http:///\/STS.contoso.com|FALSE|Центр части не совпадают.|  
  

