---
ms.assetid: ffb9d63c-ba7c-4ad1-b814-6db67f98c943
title: Роль канала утверждений
author: billmath
ms.author: billmath
manager: femila
ms.date: 05/31/2017
ms.topic: article
ms.prod: windows-server
ms.technology: identity-adfs
ms.openlocfilehash: ab5cfba579313cbe6aa56c84fb59a87e06101f15
ms.sourcegitcommit: b00d7c8968c4adc8f699dbee694afe6ed36bc9de
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/08/2020
ms.locfileid: "80853847"
---
# <a name="the-role-of-the-claims-pipeline"></a>Роль канала утверждений
Конвейер утверждений в службы федерации Active Directory (AD FS) \(AD FS\) представляет путь, по которому утверждения должны следовать за служба федерации, прежде чем их можно будет выдать. Служба федерации управляет всеми конечными\-, чтобы\-конечный процесс обработки утверждений на различных этапах конвейера утверждений, который также включает обработку правил утверждений обработчиком правил утверждений.  
  
Дополнительные сведения о правилах утверждений см. [в разделе роль правил утверждений](The-Role-of-Claim-Rules.md). Подробнее об обработке правил модулем правил утверждений см. в разделе [The Role of the Claims Engine](The-Role-of-the-Claims-Engine.md).  
  
В следующем подразделе более подробно рассматривается процесс, контролируемый службой федерации.  
  
## <a name="claims-pipeline-process"></a>Процесс конвейера утверждений  
Процесс конвейера утверждений состоит из трех стадий высокого уровня\-. На каждом этапе модуль правил утверждений инициализируется для обработки правил утверждений, относящихся к этому этапу. Эти этапы включают \(в том порядке, в котором они происходят\):  
  
1.  Принятие входящих утверждений — этот этап конвейера утверждений служит для извлечения входящих утверждений из токена и удаления утверждений, не являющихся ожидаемыми или доверенными. После их извлечения выполняются правила принятия, составляющие набор правил преобразования принятия для отношения доверия с поставщиком утверждений. Эти правила могут служить для передачи или добавления новых утверждений, которые затем могут использоваться на последующих этапах конвейера утверждений. Выходные данные этого этапа используются в качестве входных на втором и третьем этапах.  
  
2.  Авторизация инициатора запроса утверждений — этот этап используется модулем утверждений для выдачи разрешающих или запрещающих утверждений в зависимости от того, разрешено ли инициатору запроса токена получить токен для данной проверяющей стороны или нет. Однако перед этим должны быть выполнены правила авторизации, составляющие либо набор правил авторизации выдачи, либо набор правил авторизации делегирования для отношения доверия с проверяющей стороной.  
  
3.  Выдача исходящих утверждений — этот этап служит для выдачи исходящих утверждений и отправки их по конвейеру, где они будут упакованы в токен безопасности. Однако перед этим должны быть выполнены правила выдачи, составляющие набор правил преобразования выдачи для отношения доверия с проверяющей стороной. Они определяют, какие утверждения будут выданы в качестве исходящих.  
  
На всех трех перечисленных выше этапах выполняется обработка правил утверждений, но используются разные наборы правил. Как описано выше, на каждом этапе имеется связанный набор правил на основе издателя входящих утверждений \(правил принятия\) или целевой службы, для которой выдаются клаиминклудес, \(правила авторизации и выдачи\).  
  
Утверждения являются маркерами,\-независимыми, но передаются по сети, инкапсулированной в токены безопасности. Правила утверждений применяются к утверждениям независимо от формата входящего или исходящего токена безопасности.  
  
Правила утверждений содержат администратор\-определенную логику, с помощью которой механизм утверждений принимает входящие утверждения, авторизует утверждения на основе удостоверения инициатора и выдает утверждения, необходимые для проверяющей стороны. Наконец, модуль утверждений определяет, какие утверждения будут добавлены в токен безопасности, который будет выдан после прохождения утверждения через конвейер утверждений.  
  
Как показано на следующем рисунке, конвейер утверждений отвечает за полное\-, чтобы\-конечный процесс перебора заявки через различные этапы конвейера, чтобы получить выданное утверждение, которое будет отправлено через отношение доверия с проверяющей стороной. Исходящее утверждение на рисунке представляет выданное утверждение.  
  
![Роли AD FS](media/adfs2_pipeline.gif)  
  
Хотя на рисунке этого не показано, именно модуль утверждений выполняет фактическую обработку правил на каждом этапе. Дополнительные сведения см. в разделе [The Role of the Claims Engine](The-Role-of-the-Claims-Engine.md).  
  

