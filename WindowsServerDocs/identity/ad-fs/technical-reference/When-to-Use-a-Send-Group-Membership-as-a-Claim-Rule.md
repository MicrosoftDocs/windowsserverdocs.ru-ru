---
description: Дополнительные сведения о том, как использовать членство в группе отправки в качестве правила утверждений.
ms.assetid: af16e847-47c2-461e-9df1-cc352a322043
title: Когда следует использовать правило "Отправлять членство в группе как утверждение"
author: billmath
ms.author: billmath
manager: femila
ms.date: 05/31/2017
ms.topic: article
ms.openlocfilehash: 912ebf3fe8c3db96de2d615d3bda6ea3c7f3f7a4
ms.sourcegitcommit: 65b6de6b44d41f1180c45db11cdd60cb2a093b46
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/10/2020
ms.locfileid: "97050432"
---
# <a name="when-to-use-a-send-group-membership-as-a-claim-rule"></a>Когда следует использовать правило "Отправлять членство в группе как утверждение"
Это правило можно использовать в службы федерации Active Directory (AD FS) \( AD FS \) , если требуется выдать новое значение исходящего утверждения только тем пользователям, которые являются членами указанной Active Directory группы безопасности. При использовании этого правила одно утверждение выдается только для указанной группы, соответствующей логике правила, как описано в следующей таблице.

|Параметр правила|Логика правила|
|---------------|--------------|
|Значение исходящего утверждения|Если членство пользователя в группе равно указанной *группе* , а исходящий тип утверждения равен *указанному типу утверждения*, замените существующее значение имени группы на *указанное значение исходящего утверждения* и выдайте утверждение.|

В следующих разделах содержатся основные сведения о правилах утверждений. Кроме того, в них содержатся сведения об использовании правила "Отправлять членство в группе в качестве утверждения".

## <a name="about-claim-rules"></a>Общие сведения о правилах утверждения
Правило утверждения представляет экземпляр бизнес-логики, который будет принимать входящее утверждение, применить к нему условие, \( если x then y \) и создать исходящее утверждение на основе параметров условия. В следующем списке перечислены важные рекомендации в отношении правил утверждений, с которыми следует ознакомиться перед прочтением дальнейших сведений в этом разделе.

-   В оснастке управления AD FS \- в правила утверждения можно создавать только с помощью шаблонов правил утверждений.

-   Правила утверждений обрабатывают входящие утверждения либо непосредственно из поставщика утверждений, \( например Active Directory или другой служба Федерации, \) либо из выходных данных правил преобразования принятия в отношении доверия поставщика утверждений.

-   Правила утверждений обрабатываются подсистемой выдачи утверждений в хронологическом порядке в пределах заданного набора правил. Установив приоритет правил, можно дополнительно уточнить или отфильтровать утверждения, созданные предыдущими правилами в данном наборе правил.

-   Шаблоны правил утверждения всегда требуют указывать тип входящего утверждения. Тем не менее, можно обрабатывать несколько значений утверждений с одним типом утверждения, используя одно правило.

Дополнительные сведения о правилах утверждений и наборах правил для утверждений см. [в разделе роль правил утверждений](The-Role-of-Claim-Rules.md). Дополнительные сведения о том, как правила обрабатываются, см. [в разделе роль подсистемы утверждений](The-Role-of-the-Claims-Engine.md). Дополнительные сведения о том, как обрабатываются наборы правил для утверждений, см. [в разделе роль конвейера утверждений](The-Role-of-the-Claims-Pipeline.md).

## <a name="outgoing-claim-value"></a>Значение исходящего утверждения
Используя шаблон правила "Отправлять членство в группе в качестве утверждения", можно выдавать утверждение, зависящее от членства пользователя в указанной группе.

Иными словами, этот шаблон правила выдает заявку только в том случае, если у пользователя есть идентификатор безопасности группы \( \) , соответствующий группе Active Directory, которую указывает администратор. Все пользователи, которые проходят проверку подлинности в службах домен Active Directory \( \) , AD DS будут иметь входящие утверждения SID группы для каждой группы, к которой они принадлежат. По умолчанию правила преобразования принятия в отношении доверия с поставщиком утверждений Active Directory пропускают такие утверждения SID группы. Использование этих идентификаторов безопасности группы в качестве основания для выдачи утверждений выполняется гораздо быстрее, чем поиск групп пользователей в AD DS.

При использовании этого правила отправляется только одно утверждение на основе выбранной группы Active Directory. Например, этот шаблон правила можно использовать для создания правила, которое будет отправлять утверждение группы со значением Admin, если пользователь является членом группы безопасности "Администраторы домена".

## <a name="configuring-this-rule-on-a-claims-provider-trust"></a>Настройка этого правила для отношения доверия с поставщиком утверждений
Администраторам следует использовать этот тип правила в правилах преобразования принятия отношения доверия с поставщиком утверждений только в том случае, когда идентификаторы безопасности группы получены от поставщика утверждений, что очень маловероятно для любых поставщиков утверждений, кроме Active Directory или AD DS.

## <a name="how-to-create-this-rule"></a>Создание правила
Это правило создается с помощью языка правил утверждений или с помощью шаблона "Отправка членства в группе" в качестве правила утверждения в оснастке управления AD FS \- в. Этот шаблон правила предоставляет следующие возможности настройки:

-   указание имени правила утверждения;

-   Выбор группы пользователей с помощью средства выбора объектов

-   выбор типа исходящего утверждения;

-   Выберите формат идентификатора исходящего имени \( , который доступен, только если в поле Тип исходящего утверждения выбрано имя.\)

-   указание значения исходящего утверждения.

Дополнительные сведения о создании этого правила см. в разделе [Создание правила для отправки членства в группе в качестве утверждения](/previous-versions/windows/it-pro/windows-server-2012-R2-and-2012/ee913569(v=ws.11)).

## <a name="using-the-claim-rule-language"></a>С помощью языка правил утверждений
Для выдачи утверждений на основе входящего SID, отличающегося от SID группы, следует использовать шаблон правила преобразования входящего утверждения. Если администратору требуется получить имена для всех групп, членом которых является пользователь, вместо этого рекомендуется использовать шаблон правила "Отправлять атрибуты LDAP в качестве утверждений" с атрибутом **tokenGroups**.

### <a name="example-how-to-issue-group-claims-based-on-the-users-group-membership"></a>Пример: как выдавать утверждения группы на основе членства пользователя в группах
Следующее правило выдает утверждения группы для пользователя в зависимости от входящего SID группы:

```
c:[Type == "https://schemas.microsoft.com/ws/2008/06/identity/claims/groupsid", Value == "S-1-5-21-397933417-626991126-188441444-512", Issuer == "AD AUTHORITY"]
=> issue(Type = "http://schemas.xmlsoap.org/claims/Group", Value = "administrators", Issuer = c.Issuer, OriginalIssuer = c.OriginalIssuer, ValueType = c.ValueType);
```

## <a name="additional-references"></a>Дополнительная справка
[Создание правила для отправки атрибутов LDAP в качестве утверждений](/previous-versions/windows/it-pro/windows-server-2012-R2-and-2012/dd807115(v=ws.11))

