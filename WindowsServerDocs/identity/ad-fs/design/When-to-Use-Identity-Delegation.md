---
ms.assetid: 6e711a96-9055-4508-b6d4-318d6aa95fd1
title: "Использование делегирования удостоверений"
description: 
author: billmath
ms.author: billmath
manager: femila
ms.date: 05/31/2017
ms.topic: article
ms.prod: windows-server-threshold
ms.technology: identity-adfs
ms.openlocfilehash: af227d9e87ddb73f194dd46c8ce45fcdf12a34cf
ms.sourcegitcommit: db290fa07e9d50686667bfba3969e20377548504
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/12/2017
---
# <a name="when-to-use-identity-delegation"></a>Использование делегирования удостоверений

>Область применения: Windows Server 2016, Windows Server 2012 R2, Windows Server 2012
  
## <a name="what-is-identity-delegation"></a>Что такое делегирование удостоверений?  
Делегирование удостоверений — это функция \(AD FS\) служб федерации Active Directory, позволяющая заданным administrator\ учетным записям олицетворять пользователей. Учетная запись, которая олицетворяет пользователя, называется *делегат*. Эта возможность делегирования важна для многих распределенных приложений, для которых существует ряд доступа элемента управления проверки, которые должны выполняться последовательно для каждого приложения, базы данных или службы, находящейся в цепочке авторизации для выполнения исходного запроса. Существует множество сценариев включающее мира, в которых веб-приложения «интерфейс» необходимо получать данные из более безопасной» серверной части», например веб-службы, который подключен к базе данных Microsoft SQL Server.  
  
Например существующий порядок parts\ веб-сайт можно усовершенствовать программным образом, так что партнерские организации смогут просматривать свои покупки журнал и отслеживать состояние счетов. По соображениям безопасности все финансовые данные партнера хранятся в защищенную базе данных на выделенном сервере \(SQL\) языка SQL. В этом случае код в приложении front\ окончания ничего не известно о финансовых данных партнерской организации. Таким образом, он должен извлекать данные с другого компьютера сети, на котором размещается \ (в этом нечувствительны) веб-служба для базы данных компонентов \(the back end\).  
  
Для успешного выполнения этого процесса извлечения работа определенная последовательность действий по авторизации «hand\ встряхивание» необходимо выполнить поместить между веб-приложения и веб-служба для базы данных компонентов, как показано на следующем рисунке.  
  
![Делегирование удостоверений](media/adfs2_identitydelegationconcept.gif)  
  
Так как исходный запрос был отправлен на веб-сервер, который может находиться в совершенно другой организации, от организации пользователя, пытающегося получить доступ к веб-сервера, маркер безопасности, который отправляется вместе с запросом не соответствует критериям авторизации, требуется доступ к другому компьютеру, кроме веб-сервера. Таким образом единственным способом выполнения исходного запроса пользователя может быть выполнено является размещение промежуточного сервера в организации партнера по ресурсам для повторного выпуска маркера безопасности, соответствующими правами доступа.  
  
## <a name="how-does-identity-delegation-work"></a>Как работает делегирование удостоверений?  
Веб-приложения в многоуровневых архитектурах приложений часто вызывают веб-службы для доступа к общим данным или функциональным возможностям. Очень важно этим веб-службам должно быть известно удостоверение исходного пользователя, чтобы они могли принимать решения об авторизации и упрощать процедуры проверки. В этом случае окончания front\ веб-приложения представляет пользователя веб-службе качестве делегата. Службы федерации Active Directory реализует этот сценарий, позволяя учетным записям Active Directory в качестве пользователя для другой проверяющей стороны. На следующем рисунке показан сценарий делегирования удостоверения.  
  
![Делегирование удостоверений](media/adfs2_identitydelegationsteps.gif)  
  
1.  Алексей пытается получить доступ к журналу заказов part\ из веб-приложения в другой организации. Его клиентский компьютер запрашивает и получает маркер из AD FS для окончания front\ порядок part\ веб-приложения.  
  
2.  Клиентский компьютер отправляет запрос веб-приложение, включая маркер, полученный на шаге 1, для подтверждения подлинности клиента.  
  
3.  Веб-приложение должно связаться с веб-службу, чтобы завершить транзакцию для клиента. Веб-приложение обращается AD FS для получения маркера делегирования для взаимодействия с веб-службой. Маркеры делегирования являются маркерами безопасности, которые выдаются делегату для работы в качестве пользователя. Службы федерации Active Directory возвращает маркер делегирования с утверждениями о клиенте, предназначенном для веб-службы.  
  
4.  Веб-приложение использует маркер, полученный из службы федерации Active Directory в шаге 3 для доступа к веб-службы, который выступает в качестве клиента. При изучении маркера делегирования веб-служба может определить, что веб-приложения выступает в качестве клиента. Веб-служба выполняет политику авторизации, регистрирует запроса и предоставляет необходимые заказов данные журнала, который был первоначально запрошенные пользователем веб-приложению и поэтому данному пользователю.  
  
Для определенного делегата AD FS может ограничить веб-службы, для которых веб-приложение может запрашивать маркер делегирования. Клиентский компьютер может не иметь учетную запись Active Directory для выполнения данной операции. Наконец как было сказано ранее, веб-служба может легко определить удостоверение делегата, который выступает в качестве пользователя. Это позволяет веб-служб зависит поведение, взаимодействуют ли они непосредственно на клиентском компьютере или через делегата.  
  
## <a name="configuring-ad-fs-for-identity-delegation"></a>Настройка AD FS для делегирования удостоверений  
Управление AD FS оснастка можно использовать для настройки службы федерации Active Directory для делегирования удостоверений в случае необходимости упрощения процесса извлечения данных. После настройки, AD FS можно создавать новые маркеры безопасности, включающие контекст авторизации, который может потребоваться back\ окончания службе до предоставления доступа к защищенным данным.  
  
Службы федерации Active Directory не накладывает ограничения на олицетворяемых пользователей. После настройки службы федерации Active Directory для делегирования удостоверений, происходит следующее:  
  
-   Определяет, какие серверы могут быть делегированы полномочия для запроса маркеров на олицетворение пользователей.  
  
-   Формирование и изолированное хранение контекста обоих удостоверения для учетной записи клиента, которая является делегированной и сервера, который выступает в качестве делегата.  
  
Делегирование удостоверений можно настроить путем добавления правила авторизации делегирования доверия с проверяющей стороной управления AD FS оснастка. Дополнительные сведения о том, как это сделать см. в разделе [контрольный список: Создание правил утверждений для доверия с проверяющей стороной](../../ad-fs/deployment/Checklist--Creating-Claim-Rules-for-a-Relying-Party-Trust.md).  
  
## <a name="configuring-the-front-end-web-application-for-identity-delegation"></a>Настройка веб-приложения front\ окончания для делегирования удостоверений  
Разработчикам доступно несколько возможностей, которые они могут использовать для окончания front\ веб-приложения или службы для перенаправления запросов к компьютеру с AD FS. Дополнительные сведения о настройке веб-приложения для работы с делегированием удостоверений см. в разделе [Windows Identity Foundation SDK](https://go.microsoft.com/fwlink/?LinkId=122266).  
  
## <a name="see-also"></a>См. также:
[Руководство по разработке служб AD FS в Windows Server 2012](AD-FS-Design-Guide-in-Windows-Server-2012.md)
