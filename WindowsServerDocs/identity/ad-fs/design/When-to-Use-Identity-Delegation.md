---
ms.assetid: 6e711a96-9055-4508-b6d4-318d6aa95fd1
title: Использование делегирования удостоверений
description: ''
author: billmath
ms.author: billmath
manager: femila
ms.date: 05/31/2017
ms.topic: article
ms.prod: windows-server-threshold
ms.technology: identity-adfs
ms.openlocfilehash: 2544001b871a1eda2c03005c384a99d5209e7282
ms.sourcegitcommit: 0b5fd4dc4148b92480db04e4dc22e139dcff8582
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/24/2019
ms.locfileid: "66190554"
---
# <a name="when-to-use-identity-delegation"></a>Использование делегирования удостоверений
  
## <a name="what-is-identity-delegation"></a>Что такое делегирование удостоверений?  
Делегирование удостоверений входит в состав служб федерации Active Directory \(AD FS\) , позволяет администратору\-указан учетным записям олицетворять пользователей. Учетная запись, которая олицетворяет пользователя, называется *делегатом*. Делегирование имеет важное значение для многих распределенных приложений с рядом проверок контроля доступа, которые должны выполняться последовательно для каждого приложения, базы данных или службы, находящейся в цепочке авторизации для исходящего запроса. Многие реального\-сценарии из жизни существует, в которых веб-приложения «интерфейса» должно получать данные из более безопасные «серверной», например веб-службы, который подключен к базе данных Microsoft SQL Server.  
  
Например, существующих частей\-упорядочение веб-сайта можно усовершенствовать программным образом, что партнерские организации смогут просматривать свои собственные покупки журнал и отслеживать состояние счетов. По соображениям безопасности все финансовые данные партнера хранятся в защищенную базе данных на выделенный язык структурированных запросов \(SQL\) сервера. В этом случае код в передней\-завершить приложение ничего не известно о финансовых данных партнерской организации. Таким образом, он должен извлекать данные с другого компьютера в сети, на котором размещена \(в данном случае\) веб-службу для базы данных компонентов \(серверной\).  
  
Для этих данных\-успешного выполнения, некоторые последовательности авторизации процесса извлечения «Рука\-встряхните» необходимо выполнять между веб-приложения и веб-службу для базы данных компонентов, как показано на следующем рисунке.  
  
![Делегирование удостоверений](media/adfs2_identitydelegationconcept.gif)  
  
Так как исходный запрос был отправлен к самому веб-серверу, который может находиться в совершенно другой организации, отличной от организации пользователя, пытающегося получить доступ к веб-серверу, маркер безопасности, который отправляется вместе с запросом, не соответствует критериям авторизации, необходимым для доступа к любому другому компьютеру, кроме веб-сервера. Таким образом, единственным способом выполнения исходного запроса пользователя является размещение промежуточного сервера в организации партнера по ресурсам для повторного выпуска маркера безопасности с соответствующими правами доступа.  
  
## <a name="how-does-identity-delegation-work"></a>Как работает делегирование удостоверений?  
Веб-приложения в многоуровневых архитектурах приложений часто вызывают веб-службы для доступа к общим данным или функциональным возможностям. Этим веб-службам должно быть известно удостоверение исходного пользователя, чтобы они могли принимать решения об авторизации и упрощать процедуры проверки. В данном случае передней\-конечных веб-приложения представляет пользователя в веб-службу в качестве делегата. AD FS реализует этот сценарий, позволяя учетным записям Active Directory выступать в качестве пользователя для другой проверяющей. На следующем рисунке показан сценарий делегирования удостоверения.  
  
![Делегирование удостоверений](media/adfs2_identitydelegationsteps.gif)  
  
1.  Алексей пытается получить доступ к части\-упорядочение журнал из веб-приложения в другой организации. Его клиентский компьютер запрашивает и получает маркер из AD FS для начала\-завершить часть\-упорядочение веб-приложения.  
  
2.  Клиентский компьютер отправляет запрос в веб-приложение, включая маркер, полученный на шаге 1, для подтверждения подлинности клиента.  
  
3.  Веб-приложение должно связаться с веб-службой, чтобы завершить транзакцию для клиента. Веб-приложение обращается к AD FS для получения маркера делегирования для взаимодействия с веб-службы. Маркеры делегирования являются маркерами безопасности, которые выдаются делегату для работы в качестве пользователя. Службы федерации Active Directory возвращает маркер делегирования с утверждениями о клиенте, предназначенном для веб-службы.  
  
4.  Веб-приложение использует маркер, полученный из AD FS на шаге 3, чтобы получить доступ к веб-службы, выступающего в качестве клиента. При изучении маркера делегирования веб-служба может определить, что веб-приложение работает в качестве клиента. Веб-служба выполняет политику авторизации, регистрирует запроса и предоставляет необходимые данные журнала заказов, первоначально запрошенные пользователем, в веб-приложение, и, следовательно, данному пользователю.  
  
Для определенного делегата AD FS можно ограничить веб-служб, для которых веб-приложение может запрашивать маркер делегирования. Клиентский компьютер не имеет учетной записи Active Directory для выполнения данной операции. И, наконец, как было отмечено ранее, веб-служба может легко определить удостоверение делегата, который выступает в качестве пользователя. Поведение веб-служб зависит от того, взаимодействуют ли они с клиентским компьютером напрямую или через делегата.  
  
## <a name="configuring-ad-fs-for-identity-delegation"></a>Настройка службы федерации Active Directory для делегирования удостоверений  
Можно использовать оснастку управления AD FS\-в для настройки AD FS для делегирования удостоверений, при необходимости для упрощения процесса извлечения данных. После настройки, AD FS можно создавать новые маркеры безопасности, включающие контекст авторизации, задней\-интерфейса веб-службы может потребоваться до предоставления доступа к защищенным данным.  
  
AD FS накладывает ограничения на олицетворяемых пользователей. После настройки AD FS для делегирования удостоверений, он выполняет следующие функции:  
  
-   Определение серверов, которым можно делегировать полномочия для запроса маркеров на олицетворение пользователей.  
  
-   Формирование и изолированное хранение контекста удостоверения для учетной записи клиента, которая является делегированной, и сервера, который выступает в качестве делегата.  
  
Делегирование удостоверений можно настроить путем добавления правила авторизации делегирования и проверяющей стороной доверять в оснастку управления AD FS\-в. Дополнительные сведения о том, как это сделать, см. в разделе [контрольный список: Создание правил для утверждений для доверия проверяющей стороны](../../ad-fs/deployment/Checklist--Creating-Claim-Rules-for-a-Relying-Party-Trust.md).  
  
## <a name="configuring-the-front-end-web-application-for-identity-delegation"></a>Настройка на передний план\-завершения веб-приложения для делегирования удостоверений  
Разработчикам доступно несколько возможностей, которые используются для программирования веб-интерфейс\-завершить приложение или служба, для перенаправления запросов к серверу AD FS. Дополнительные сведения о настройке веб-приложения для работы с делегированием удостоверений см. в разделе [Пакет SDK Windows Identity Foundation](https://go.microsoft.com/fwlink/?LinkId=122266).  
  
## <a name="see-also"></a>См. также
[Руководство по разработке служб федерации Active Directory в Windows Server 2012](AD-FS-Design-Guide-in-Windows-Server-2012.md)
