---
ms.assetid: 4ef052f0-61a9-4912-b780-5c96187c850f
title: Некоторые аспекты топологии развертывания AD FS
description: ''
author: billmath
ms.author: billmath
manager: femila
ms.date: 05/31/2017
ms.topic: article
ms.prod: windows-server
ms.technology: identity-adfs
ms.openlocfilehash: 260d86c0feae0179620ece09e06f12729691b5a3
ms.sourcegitcommit: 6aff3d88ff22ea141a6ea6572a5ad8dd6321f199
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/27/2019
ms.locfileid: "71359225"
---
# <a name="ad-fs-deployment-topology-considerations"></a>Некоторые аспекты топологии развертывания AD FS

В этом разделе приводятся важные рекомендации, которые помогут вам спланировать и спроектировать, какая топология развертывания службы федерации Active Directory (AD FS) \(AD FS @ no__t-1 для использования в рабочей среде. Этот раздел является отправной точкой для просмотра и оценки вопросов, влияющих на то, какие функции или возможности будут доступны после развертывания AD FS. Например, в зависимости от того, какой тип базы данных выбран для хранения базы данных конфигурации AD FS, в конечном итоге будет определять, можно ли реализовать определенные функции язык разметки зявлений системы безопасности (SAML) \(SAML @ no__t-1, для которых требуется SQL Server.  

## <a name="determining-which-type-of-ad-fs-configuration-database-to-use"></a>Определение типа базы данных конфигурации AD FS для использования  
AD FS использует базу данных для хранения конфигурации и, в некоторых случаях, данные о транзакциях, связанные с служба федерации. AD FS программное обеспечение можно использовать для выбора встроенной внутренней базы данных @ no__t-0in Windows \(WID @ no__t-2 или Microsoft SQL Server 2005 или более новой версии для хранения данных в служба федерации.  

Для большинства целей эти два типа баз данных относительно эквивалентны. Тем не менее, прежде чем приступить к ознакомлению с различными топологиями развертывания, которые можно использовать с AD FS, необходимо помнить о некоторых различиях. В следующей таблице описаны различия в поддерживаемых возможностях между базой данных WID и базой данных SQL Server.  

AD FS функции  

|Компонент|Поддерживается внутренней базой данных Windows?|Поддерживается SQL Server?|Дополнительные сведения об этой функции|  
|-----------|---------------------|----------------------------|---------------------------------------|  
|Развертывание фермы серверов федерации|Да, с ограничением в 30 серверов федерации для каждой фермы|Да. Действующих ограничений на число серверов федерации, которые можно развернуть на одной ферме, не существует|[Определение топологии развертывания для служб федерации Active Directory](Determine-Your-AD-FS-Deployment-Topology.md)|  
|Примечание по разрешению SAML артефакта **:** Эта функция не требуется для сценариев Microsoft Online Services, Microsoft Office 365, Microsoft Exchange или Microsoft Office SharePoint.|Нет|Да|[Роль базы данных конфигурации AD FS](../../ad-fs/technical-reference/The-Role-of-the-AD-FS-Configuration-Database.md).<br /><br />[Рекомендации по безопасному планированию и развертыванию AD FS](Best-Practices-for-Secure-Planning-and-Deployment-of-AD-FS.md)|  
|SAML @ no__t-0WS @ no__t — обнаружение воспроизведения токенов 1Federation|Нет|Да|[Роль базы данных конфигурации AD FS](../../ad-fs/technical-reference/The-Role-of-the-AD-FS-Configuration-Database.md).<br /><br />[Рекомендации по безопасному планированию и развертыванию AD FS](Best-Practices-for-Secure-Planning-and-Deployment-of-AD-FS.md)|  

Функции базы данных  

|Компонент|Поддерживается внутренней базой данных Windows?|Поддерживается SQL Server?|Дополнительные сведения об этой функции|  
|-----------|---------------------|----------------------------|---------------------------------------|  
|Базовая избыточность базы данных с использованием опрашивающей репликации, где один или несколько серверов, на которых размещается копия копии @ no__t-0only запроса базы данных, изменили изменения, внесенные на исходном сервере, где размещена копия базы данных Read @ no__t-1write.|Да|Нет|[Роль базы данных конфигурации AD FS](../../ad-fs/technical-reference/The-Role-of-the-AD-FS-Configuration-Database.md).|  
|Избыточность базы данных с помощью решений High no__t-0availability, таких как отказоустойчивая кластеризация или зеркальное отображение @no__t — 1AT уровень базы данных только @ no__t-2 **Примечание.** Все топологии развертывания AD FS поддерживают кластеризацию на уровне служб AD FS.|Нет|Да|[Роль базы данных конфигурации AD FS](../../ad-fs/technical-reference/The-Role-of-the-AD-FS-Configuration-Database.md).<br /><br />[Общие сведения о решениях высокого уровня доступности](https://go.microsoft.com/fwlink/?LinkId=179853)|  

### <a name="sql-server-considerations"></a>Особенности SQL Server  
При выборе SQL Server в качестве базы данных конфигурации для развертывания AD FS следует учитывать следующие факты развертывания.  

-   **Функции SAML и их влияние на размер и рост базы данных**. Если включены функции обнаружения артефактов SAML или средства определения воспроизведения маркеров SAML, AD FS сохраняет сведения в базе данных конфигурации SQL Server для каждого выданного маркера AD FS. Рост базы данных SQL Server в результате этого действия не считается существенным и зависит от настроенного срока хранения токена. Размер каждой записи артефакта составляет примерно 30 КБ \(KB @ no__t-1.  

-   **Число необходимых для развертывания серверов**. Необходимо добавить хотя бы один дополнительный сервер \(to общее количество серверов, необходимое для развертывания инфраструктуры AD FS @ no__t-1, которая будет служить выделенным узлом экземпляра SQL Server. Если вы планируете использовать отказоустойчивую кластеризацию или зеркальное отображение, чтобы обеспечить отказоустойчивость и масштабируемость для базы данных конфигурации SQL Server, требуется минимум два сервера SQL Server.  

### <a name="how-the-configuration-database-type-you-select-may-impact-hardware-resources"></a>Влияние выбранного типа базы данных конфигурации на аппаратные ресурсы  
Влияние на аппаратные ресурсы на сервере федерации, развернутом в ферме с помощью WID, в отличие от сервера федерации, развернутого в ферме с использованием базы данных SQL Server, не имеет значения. Однако важно учитывать, что при использовании WID для фермы каждый сервер федерации в этой ферме должен хранить, администрировать и обслуживать изменения репликации для своей локальной копии базы данных конфигурации AD FS, а также продолжать предоставлять нормальную операции, необходимые для служба федерации.  

В сравнении серверы федерации, развернутые в ферме, использующей базу данных SQL Server, не обязательно должны содержать локальный экземпляр базы данных конфигурации AD FS. Следовательно, требования к аппаратным ресурсам в этом случае несколько ниже.  

## <a name="verifying-that-your-production-environment-can-support-an-ad-fs-deployment"></a>Проверка возможности поддержки развертывания служб AD FS в рабочей среде  
Помимо серверов федерации, которые будут развернуты, и в зависимости от того, как настроена существующая Рабочая среда, для обеспечения необходимой инфраструктуры для поддержки нового развертывания AD FS могут потребоваться следующие дополнительные серверы:  

-   доменный контроллер Active Directory;  

-   Центр сертификации \(CA @ no__t-1  

-   веб-сервер для размещения метаданных федерации;  

-   Балансировка сетевой нагрузки \(NLB @ no__t-1  

## <a name="see-also"></a>См. также
[Руководство по разработке служб федерации Active Directory в Windows Server 2012](AD-FS-Design-Guide-in-Windows-Server-2012.md)
