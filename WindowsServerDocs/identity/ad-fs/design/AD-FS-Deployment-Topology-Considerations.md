---
description: 'Дополнительные сведения: рекомендации по топологии развертывания AD FS'
ms.assetid: 4ef052f0-61a9-4912-b780-5c96187c850f
title: Некоторые аспекты топологии развертывания AD FS
author: billmath
ms.author: billmath
manager: femila
ms.date: 05/31/2017
ms.topic: article
ms.openlocfilehash: 3ac3c7c06b1e32140f782c2af645d9b6c686c8a1
ms.sourcegitcommit: 65b6de6b44d41f1180c45db11cdd60cb2a093b46
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/10/2020
ms.locfileid: "97046012"
---
# <a name="ad-fs-deployment-topology-considerations"></a>Некоторые аспекты топологии развертывания AD FS

В этом разделе описываются важные моменты, которые помогут спланировать и спроектировать службы федерации Active Directory (AD FS) \( AD FS \) топологии развертывания для использования в рабочей среде. Этот раздел является отправной точкой для просмотра и оценки вопросов, влияющих на то, какие функции или возможности будут доступны после развертывания AD FS. Например, в зависимости от того, какой тип базы данных выбран для хранения базы данных конфигурации AD FS, в конечном итоге будет определять, можно ли реализовать определенные \( функции язык разметки зявлений системы безопасности (SAML) SAML \) , требующие SQL Server.

## <a name="determining-which-type-of-ad-fs-configuration-database-to-use"></a>Определение требуемого типа базы данных конфигурации AD FS
AD FS использует базу данных для хранения конфигурации и, в некоторых случаях, данные о транзакциях, связанные с служба федерации. AD FS программное обеспечение можно использовать для выбора встроенной \- внутренней базы данных Windows \( WID \) или Microsoft SQL Server 2005 или более поздней версии для хранения данных в Служба федерации.

Для большинства целей эти два типа баз данных относительно эквивалентны. Тем не менее, прежде чем приступить к ознакомлению с различными топологиями развертывания, которые можно использовать с AD FS, необходимо помнить о некоторых различиях. В таблице ниже описаны различия в поддерживаемых функциях между внутренней базой данных Windows и базой данных SQL Server.

AD FS функции

|Компонент|Поддерживается внутренней базой данных Windows?|Поддерживается SQL Server?|Дополнительные сведения об этой функции|
|-----------|---------------------|----------------------------|---------------------------------------|
|Развертывание фермы серверов федерации|Да, с ограничением в 30 серверов федерации для каждой фермы|Да. Действующих ограничений на число серверов федерации, которые можно развернуть на одной ферме, не существует|[Определение топологии развертывания для служб федерации Active Directory](Determine-Your-AD-FS-Deployment-Topology.md)|
|Разрешение артефактов SAML **Примечание.** эта функция не требуется для служб Microsoft Online Services, Microsoft Office 365, Microsoft Exchange или Microsoft Office сценариев SharePoint.|Нет|Да|[Роль базы данных конфигурации AD FS](../../ad-fs/technical-reference/The-Role-of-the-AD-FS-Configuration-Database.md)<p>[Рекомендации по безопасному планированию и развертыванию AD FS](Best-Practices-for-Secure-Planning-and-Deployment-of-AD-FS.md)|
|\/ \- Обнаружение воспроизведения токенов SAML WS Federation|Нет|Да|[Роль базы данных конфигурации AD FS](../../ad-fs/technical-reference/The-Role-of-the-AD-FS-Configuration-Database.md)<p>[Рекомендации по безопасному планированию и развертыванию AD FS](Best-Practices-for-Secure-Planning-and-Deployment-of-AD-FS.md)|

Возможности базы данных

|Компонент|Поддерживается внутренней базой данных Windows?|Поддерживается SQL Server?|Дополнительные сведения об этой функции|
|-----------|---------------------|----------------------------|---------------------------------------|
|Базовая избыточность базы данных с использованием опрашивающей репликации, где один или несколько серверов, на которых размещается \- копия запроса базы данных только для чтения, внесены на исходном сервере, на котором размещена \/ копия базы данных с возможностью чтения.|Да|Нет|[Роль базы данных конфигурации AD FS](../../ad-fs/technical-reference/The-Role-of-the-AD-FS-Configuration-Database.md)|
|Избыточность базы данных с помощью решений высокого уровня \- доступности, таких как отказоустойчивая кластеризация или зеркальное отображение \( на уровне базы данных \) **.** все топологии развертывания AD FS поддерживают кластеризацию на уровне служб AD FS.|Нет|Да|[Роль базы данных конфигурации AD FS](../../ad-fs/technical-reference/The-Role-of-the-AD-FS-Configuration-Database.md)<p>[Общие сведения о решениях с высоким уровнем доступности](https://go.microsoft.com/fwlink/?LinkId=179853)|

### <a name="sql-server-considerations"></a>Особенности SQL Server
При выборе SQL Server в качестве базы данных конфигурации для развертываемой системы AD FS необходимо учитывать следующие факты о развертывании.

-   **Функции SAML и их влияние на размер и рост базы данных**. Если включено разрешение артефактов SAML или обнаружение воспроизведения токенов SAML, AD FS сохраняет информацию в базе данных конфигурации SQL Server для каждого выданного токена AD FS. В результате этого наблюдается незначительный рост базы данных SQL Server, масштабы которого зависят от настроенного периода хранения воспроизведения токена. Размер каждой записи артефакта составляет примерно 30 КБ \( \) .

-   **Число необходимых для развертывания серверов**. Необходимо добавить по крайней мере один дополнительный сервер \( к общему количеству серверов, необходимых для развертывания инфраструктуры AD FS \) , которая будет служить выделенным узлом экземпляра SQL Server. Если планируется использовать отказоустойчивую кластеризацию или зеркальное отображение, чтобы обеспечить отказоустойчивость и масштабируемость базы данных конфигурации SQL Server, необходимо по меньшей мере два сервера SQL Server.

### <a name="how-the-configuration-database-type-you-select-may-impact-hardware-resources"></a>Влияние выбранного типа базы данных конфигурации на аппаратные ресурсы
Влияние аппаратных ресурсов на сервер федерации, развернутый в ферме с использованием внутренней базы данных Windows, и сервер федерации, развернутый на ферме с использованием базы данных SQL Server, незначительно. Однако важно помнить, что при использовании внутренней базы данных Windows для фермы каждый сервер федерации на этой ферме должен сохранять, обслуживать изменения репликации для своей локальной копии базы данных конфигурации AD FS и управлять ими, продолжая при этом обеспечивать нормальное функционирование службы федерации.

В отличие от этого серверы федерации, развернутые на ферме, использующей базу данных SQL Server, не обязательно содержат локальный экземпляр базы данных конфигурации AD FS. Следовательно, требования к аппаратным ресурсам в этом случае несколько ниже.

## <a name="verifying-that-your-production-environment-can-support-an-ad-fs-deployment"></a>Проверка возможности поддержки развертывания служб AD FS в рабочей среде
Помимо серверов федерации, которые будут развернуты, и в зависимости от того, как настроена существующая Рабочая среда, для обеспечения необходимой инфраструктуры для поддержки нового развертывания AD FS могут потребоваться следующие дополнительные серверы:

-   Контроллер домена Active Directory

-   ЦС центра сертификации \(\)

-   веб-сервер для размещения метаданных федерации;

-   Балансировка сетевой нагрузки — \( NLB\)

## <a name="see-also"></a>См. также:
[Руководство по разработке служб федерации Active Directory в Windows Server 2012](AD-FS-Design-Guide-in-Windows-Server-2012.md)
