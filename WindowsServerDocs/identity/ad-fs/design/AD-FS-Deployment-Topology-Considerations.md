---
ms.assetid: 4ef052f0-61a9-4912-b780-5c96187c850f
title: "Некоторые аспекты топологии развертывания AD FS"
description: 
author: billmath
ms.author: billmath
manager: femila
ms.date: 05/31/2017
ms.topic: article
ms.prod: windows-server-threshold
ms.technology: identity-adfs
ms.openlocfilehash: eee14ee7bb50e1a82f35caf9fbacda0b86d3a1ad
ms.sourcegitcommit: db290fa07e9d50686667bfba3969e20377548504
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/12/2017
---
# <a name="ad-fs-deployment-topology-considerations"></a>Некоторые аспекты топологии развертывания AD FS

>Область применения: Windows Server 2016, Windows Server 2012 R2, Windows Server 2012

В этом разделе описаны важные аспекты планирования и проектирования какая топология развертывания \(AD FS\) служб федерации Active Directory для использования в производственной среде. Этот раздел является отправной точкой для анализа и оценки аспектов, влияющих на то, какие функции и возможности будут доступны после развертывания Служб федерации Active Directory. Например в зависимости от того, какие базы данных типа выбранного для хранения базы данных конфигурации AD FS конечном счете определяется возможность реализации определенных функций \(SAML\) Security Assertion Markup Language, требующих SQL Server.  
  
## <a name="determining-which-type-of-ad-fs-configuration-database-to-use"></a>Определение требуемого типа базы данных конфигурации AD FS для использования  
Службы федерации Active Directory использует базу данных для хранения конфигурации и — в некоторых случаях — транзакционных данных, связанных со службой федерации. Программное обеспечение службы федерации Active Directory можно использовать для выбора встроенных \(WID\) внутренней базы данных Windows или Microsoft SQL Server 2005 или выше для хранения данных в службе федерации.  
  
Для большинства целей два типа баз данных относительно эквивалентны. Однако существуют некоторые различия, которые следует учитывать, прежде чем начинать изучать дополнительные сведения о различных топологиях развертывания, которые можно использовать с AD FS. В следующей таблице описаны различия в поддерживаемых функциях между Внутренней базой данных и базы данных SQL Server.  
  
Функции AD FS  
  
|Функция|Поддерживается внутренней базой данных Windows?|Поддерживается SQL Server?|Дополнительные сведения об этой функции|  
|-----------|---------------------|----------------------------|---------------------------------------|  
|Развертывание фермы серверов федерации|Да, не более пяти серверов федерации на каждую ферму|Да. Не ограничено, применяемая для число серверов федерации, которые можно развернуть на одной ферме|[Определение топологии развертывания AD FS](Determine-Your-AD-FS-Deployment-Topology.md)|  
|Разрешение артефактов SAML **Примечание:** эта функция не требуется для сценариев Microsoft Online Services, Microsoft Office 365, Microsoft Exchange или Microsoft Office SharePoint.|Нет|Да|[Роль базы данных конфигурации AD FS](../../ad-fs/technical-reference/The-Role-of-the-AD-FS-Configuration-Database.md)<br /><br />[Рекомендации по безопасному планированию и развертыванию AD FS](Best-Practices-for-Secure-Planning-and-Deployment-of-AD-FS.md)|  
|Обнаружение воспроизведения токенов SAML\ и наличия WS-Federation|Нет|Да|[Роль базы данных конфигурации AD FS](../../ad-fs/technical-reference/The-Role-of-the-AD-FS-Configuration-Database.md)<br /><br />[Рекомендации по безопасному планированию и развертыванию AD FS](Best-Practices-for-Secure-Planning-and-Deployment-of-AD-FS.md)|  
  
Компоненты базы данных  
  
|Функция|Поддерживается внутренней базой данных Windows?|Поддерживается SQL Server?|Дополнительные сведения об этой функции|  
|-----------|---------------------|----------------------------|---------------------------------------|  
|Избыточность основной базы данных с помощью репликации по запросу, когда один или несколько серверов, где размещена только для чтения копия базы данных, запрос изменения, внесенные на исходном сервере, на котором расположена для чтения и записи копия базы данных|Да|Нет|[Роль базы данных конфигурации AD FS](../../ad-fs/technical-reference/The-Role-of-the-AD-FS-Configuration-Database.md)|  
|Избыточность базы данных с помощью решений сценарии высокой доступности, например отказоустойчивой кластеризации или зеркального отображения \ (на only\ уровень базы данных) **Примечание:** все топологии развертывания Служб федерации Active Directory поддерживают кластеризацию на уровне служб AD FS.|Нет|Да|[Роль базы данных конфигурации AD FS](../../ad-fs/technical-reference/The-Role-of-the-AD-FS-Configuration-Database.md)<br /><br />[Обзор решений высокой доступности](https://go.microsoft.com/fwlink/?LinkId=179853)|  
  
### <a name="sql-server-considerations"></a>Особенности SQL Server  
При выборе SQL Server для базы данных конфигурации для развертывания Служб федерации Active Directory, необходимо учитывать следующие факты.  
  
-   **SAML функции и их влияние на размер базы данных и рост**. Если включено разрешение артефактов SAML или функции обнаружение воспроизведения токенов SAML, AD FS сохраняет информацию в базе данных конфигурации SQL Server для каждого выданного токена AD FS. Рост базы данных SQL Server, в результате этого действия не могут быть очень высока и зависит от настроенного периода воспроизведения токена хранения. Каждая запись артефакта имеет размер около 30 килобайт \(KB\).  
  
-   **Количество серверов, необходимых для развертывания**. Необходимо добавить хотя бы один дополнительный сервер \ (на общее число серверов, необходимых для развертывания на infrastructure\ AD FS), будет функционировать как выделенный узел экземпляра SQL Server. Если планируется использовать отказоустойчивую кластеризацию или зеркальное отображение, чтобы обеспечить отказоустойчивость и масштабируемость базы данных конфигурации SQL Server, требуется как минимум два сервера SQL.  
  
### <a name="how-the-configuration-database-type-you-select-may-impact-hardware-resources"></a>Влияние выбранного типа базы данных конфигурации аппаратных ресурсов  
Влияние аппаратных ресурсов на сервере федерации, развернутый в ферме с использованием WID сервера федерации, развернутый в ферме с использованием базы данных SQL Server не имеет значения. Однако важно помнить, что при использовании внутренней базы данных Windows для фермы каждый сервер федерации в ферме необходимо хранить, контролировать и обслуживать изменения репликации для своей локальной копии базы данных конфигурации AD FS, продолжая предоставлять нормальное функционирование службы федерации.  
  
В отличие от этого серверы федерации, развернутые на ферме, использующей базу данных SQL Server не обязательно содержит локальный экземпляр базы данных конфигурации AD FS. Таким образом он может вносить немного снижает требования к аппаратным ресурсам.  
  
## <a name="verifying-that-your-production-environment-can-support-an-ad-fs-deployment"></a>Проверка возможности поддержки рабочей среды развертывания AD FS  
Помимо серверов федерации, которые будут развертывать, и в зависимости от того, как настроить существующей рабочей среды для предоставления необходимую инфраструктуру для поддержки нового развертывания Служб федерации Active Directory могут потребоваться следующие дополнительные серверы:  
  
-   Контроллер домена Active Directory  
  
-   Центр сертификации \(CA\)  
  
-   Веб-сервера для размещения метаданных федерации  
  
-   \(NLB\) балансировки нагрузки сети  
  
## <a name="see-also"></a>См. также:
[Руководство по разработке служб AD FS в Windows Server 2012](AD-FS-Design-Guide-in-Windows-Server-2012.md)
