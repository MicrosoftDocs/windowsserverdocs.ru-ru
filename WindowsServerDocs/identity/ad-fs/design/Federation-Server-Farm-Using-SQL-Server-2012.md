---
description: Дополнительные сведения см. в статье ферма серверов федерации с помощью SQL Server
ms.assetid: 6618b3ce-0e94-4009-b887-d8e05453358b
title: Ферма серверов AD FS Федерации с помощью SQL Server
author: billmath
ms.author: billmath
manager: femila
ms.date: 05/31/2017
ms.topic: article
ms.openlocfilehash: 4a537f6dead197b19d2f4ada4f0028c8194dc2bb
ms.sourcegitcommit: 65b6de6b44d41f1180c45db11cdd60cb2a093b46
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/10/2020
ms.locfileid: "97039212"
---
# <a name="federation-server-farm-using-sql-server"></a>Ферма серверов федерации с использованием SQL Server

Эта топология для службы федерации Active Directory (AD FS) \( AD FS \) отличается от фермы серверов федерации с использованием топологии развертывания внутренней базы данных \( WID Windows \) в том, что она не реплицирует данные на каждый сервер федерации в ферме. Вместо этого все серверы федерации в ферме могут считывать и записывать данные в общую базу данных, которая хранится на сервере, работающем Microsoft SQL Server, расположенном в корпоративной сети.

## <a name="deployment-considerations"></a>Рекомендации по развертыванию
В этом разделе описываются различные вопросы о предполагаемой аудитории, преимуществах и ограничениях, связанных с этой топологией развертывания.

### <a name="who-should-use-this-topology"></a>Кто должен использовать эту топологию?

-   Крупные организации с более чем 100 доверительными отношениями, которые должны предоставить внутренним пользователям и внешним пользователям единый вход единого входа к \- \( \) федеративным приложениям или службам.

-   Организации, которые уже используют SQL Server и хотят воспользоваться преимуществами существующих средств и знаний

### <a name="what-are-the-benefits-of-using-this-topology"></a>Каковы преимущества использования этой топологии?

-   Поддержка большего числа отношений доверия \( более 100\)

-   Поддержка обнаружения маркеров. \( компонент безопасности \) и разрешение артефактов \( в язык разметки зявлений системы безопасности (SAML) \( \) протокол SAML 2,0\)

-   Поддержка полных преимуществ SQL Server, таких как зеркальное отображение баз данных, отказоустойчивая кластеризация, отчеты и средства управления

### <a name="what-are-the-limitations-of-using-this-topology"></a>Каковы ограничения использования этой топологии?

-   Эта топология не обеспечивает избыточность базы данных по умолчанию. Хотя ферма серверов федерации с топологией WID автоматически реплицирует базу данных WID на каждом сервере федерации в ферме, ферма серверов федерации с топологией SQL Server содержит только одну копию базы данных.

> [!NOTE]
> SQL Server поддерживает множество различных параметров обеспечения избыточности данных и приложений, включая отказоустойчивую кластеризацию, зеркальное отображение базы данных и несколько различных типов репликации SQL Server.

ИТ-отдел корпорации \( Майкрософт \) использует SQL Server зеркальное отображение базы данных в \- \( синхронном \) режиме высокой безопасности и отказоустойчивой кластеризации, чтобы обеспечить поддержку высокого уровня \- доступности для экземпляра SQL Server. SQL Server транзакционный одноранговый \( узел \- \- \) и репликация слиянием не тестировались группой разработчиков AD FS корпорации Майкрософт. Дополнительные сведения о SQL Server см. в разделе [Общие сведения о решениях высокого уровня доступности](https://go.microsoft.com/fwlink/?LinkId=179853) или [выборе подходящего типа репликации](https://go.microsoft.com/fwlink/?LinkId=214648).

### <a name="supported-sql-server-versions"></a>Поддерживаемые версии SQL Server
В AD FS, устанавливаемых вместе с Windows Server 2012, поддерживаются следующие версии SQL Server:

-   SQL Server 2008 \/ R2

-   SQL Server 2012

## <a name="server-placement-and-network-layout-recommendations"></a>Рекомендации по размещению и макету сети сервера
Аналогично ферме серверов федерации с топологией WID, все серверы федерации в ферме настроены на использование одного \( DNS-имени кластера, \) \( которое представляет имя служба федерации \) и один IP-адрес кластера в составе конфигурации кластера балансировки сетевой нагрузки \( \) . Это помогает узлу балансировки сетевой нагрузки распределять запросы клиентов на отдельные серверы федерации. Прокси-серверы федерации можно использовать для клиентских запросов к ферме серверов федерации.

На следующем рисунке показано, как вымышленная компания Contoso Pharmaceuticals развернула свою ферму серверов федерации с топологией SQL Server в корпоративной сети. Здесь также показано, как компания настроила сеть периметра с доступом к DNS-серверу, дополнительному узлу балансировки сетевой нагрузки, использующему то же DNS-имя кластера \( FS.contoso.com \) , которое используется в КЛАСТЕРе балансировки сетевой нагрузки корпоративной сети, и с двумя прокси сервера федерации \( fsp1 и fsp2 \) .

![ферма серверов, использующая SQL](media/FarmSQLProxies.gif)

Дополнительные сведения о настройке сетевой среды для использования с серверами федерации или прокси-серверами федерации см. в разделе [требования к разрешению имен для серверов федерации](Name-Resolution-Requirements-for-Federation-Servers.md) или [требования к разрешению имен для прокси](Name-Resolution-Requirements-for-Federation-Server-Proxies.md)-серверов федерации.

## <a name="see-also"></a>См. также:
[Руководство по разработке служб федерации Active Directory в Windows Server 2012](AD-FS-Design-Guide-in-Windows-Server-2012.md)
