---
ms.assetid: 6618b3ce-0e94-4009-b887-d8e05453358b
title: Ферма серверов федерации с использованием SQL Server
description: ''
author: billmath
ms.author: billmath
manager: femila
ms.date: 05/31/2017
ms.topic: article
ms.prod: windows-server-threshold
ms.technology: identity-adfs
ms.openlocfilehash: a0fff975b9cb278e59686323d2bd72e641597573
ms.sourcegitcommit: 0d0b32c8986ba7db9536e0b8648d4ddf9b03e452
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/17/2019
ms.locfileid: "59863955"
---
# <a name="federation-server-farm-using-sql-server"></a>Ферма серверов федерации с использованием SQL Server

>Область применения. Windows Server 2012

Эта топология для служб федерации Active Directory \(AD FS\) отличается от фермы серверов федерации с использованием внутренней базы данных Windows \(WID\) топологии развертывания, в который он не реплицирует данные для Каждый сервер федерации в ферме. Вместо этого все серверы федерации в ферме можно чтения и записи данных в единую базу данных, которая хранится на сервере под управлением Microsoft SQL Server, который находится в корпоративной сети.  
  
## <a name="deployment-considerations"></a>Вопросы развертывания  
В этом разделе описываются различные вопросы о целевая аудитория, преимущества и ограничения, связанные с этой топологии развертывания.  
  
### <a name="who-should-use-this-topology"></a>Для кого предназначена эта топология?  
  
-   Крупные организации с более чем 100 отношений доверия, необходимо предоставить как внутренних пользователей, так и внешним пользователям единый вход\-на \(SSO\) доступ к федеративному приложению или служб  
  
-   Организациям, уже SQL Server и хотите воспользоваться преимуществами их существующие средства и знания  
  
### <a name="what-are-the-benefits-of-using-this-topology"></a>Каковы преимущества использования этой топологии?  
  
-   Поддержка большого количества отношений доверия \(более чем 100\)  
  
-   Поддержка для обнаружения воспроизведения маркеров \(средство безопасности\) и разрешение артефактов \(частью Security Assertion Markup Language \(SAML\) 2.0 протокола\)  
  
-   Средства поддержки для все преимущества SQL Server, такие как зеркальное отображение базы данных, отказоустойчивая кластеризация, отчетов и управления  
  
### <a name="what-are-the-limitations-of-using-this-topology"></a>Что такое ограничение на использование этой топологии  
  
-   Эта топология не обеспечения избыточности базы данных по умолчанию. Несмотря на то, что ферма серверов федерации с топологией WID автоматически реплицирует базе данных WID на каждом сервере федерации в ферме, фермы серверов федерации с топологией SQL Server содержит только одну копию базы данных  
  
> [!NOTE]  
> SQL Server поддерживает множество разные данные и параметры избыточности приложения, включая отказоустойчивая кластеризация, зеркальное отображение базы данных и несколько различных типов репликации SQL Server.  
  
В области информационных технологий Майкрософт \(ИТ\) отдел использует зеркальное отображение базы данных SQL Server в высокой\-безопасности \(синхронной\) режим и отказоустойчивой кластеризации для обеспечения высокого\- Поддержка доступности для экземпляра SQL Server. Транзакций SQL Server \(однорангового\-для\-однорангового\) и репликации слиянием не были проверены командой разработчиков AD FS в корпорации Microsoft. Дополнительные сведения о SQL Server, см. в разделе [Обзор решений высокой доступности](https://go.microsoft.com/fwlink/?LinkId=179853) или [выбрав соответствующий тип репликации](https://go.microsoft.com/fwlink/?LinkId=214648).  
  
### <a name="supported-sql-server-versions"></a>Поддерживаемые версии SQL Server  
С AD FS, установленные с Windows Server 2012 поддерживаются следующие версии SQL server:  
  
-   SQL Server 2008 \/ R2  
  
-   SQL Server 2012  
  
## <a name="server-placement-and-network-layout-recommendations"></a>Рекомендации макета для размещения и сети сервера  
Как и в ферму серверов федерации с топологией WID, все серверы федерации в ферме настроено использование одного кластера доменных имен \(DNS\) имя \(, представляющее имя службы федерации\)и IP-адрес одного кластера в процессе балансировки сетевой нагрузки \(балансировки сетевой Нагрузки\) конфигурации кластера. Благодаря этому узел балансировки сетевой Нагрузки распределения клиентских запросов между отдельными серверами федерации. Прокси-сервера федерации может использоваться для клиентских запросов прокси-сервера к ферме серверов федерации.  
  
Ниже показано, как вымышленная компания Contoso Pharmaceuticals развернуть его фермы серверов федерации с топологией SQL Server в корпоративной сети. Также показано, как эту компанию настроить сети периметра с доступом к DNS-сервер, дополнительный узел балансировки сетевой Нагрузки, который использует DNS-именем кластера \(fs.contoso.com\) , используемый в кластере NLB корпоративной сети и с двумя прокси-серверов федерации \(fsp1 и fsp2\).  
  
![Ферма серверов с использованием SQL](media/FarmSQLProxies.gif)  
  
Дополнительные сведения о том, как настроить сетевую среду для использования с серверами федерации и прокси-сервера федерации см. в статье [требования к разрешению имен для серверов федерации](Name-Resolution-Requirements-for-Federation-Servers.md) или [имя Требования к разрешению для прокси-серверов федерации](Name-Resolution-Requirements-for-Federation-Server-Proxies.md).  
  
## <a name="see-also"></a>См. также
[Руководство по разработке AD FS в Windows Server 2012](AD-FS-Design-Guide-in-Windows-Server-2012.md)
