---
ms.assetid: 6618b3ce-0e94-4009-b887-d8e05453358b
title: Ферма серверов федерации с использованием SQL Server
author: billmath
ms.author: billmath
manager: femila
ms.date: 05/31/2017
ms.topic: article
ms.prod: windows-server
ms.technology: identity-adfs
ms.openlocfilehash: 862cbc74833e2d4e9f385ba961b58a1f703e6611
ms.sourcegitcommit: b00d7c8968c4adc8f699dbee694afe6ed36bc9de
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/08/2020
ms.locfileid: "80853137"
---
# <a name="federation-server-farm-using-sql-server"></a>Ферма серверов федерации с использованием SQL Server

Эта топология для службы федерации Active Directory (AD FS) \(AD FS\) отличается от фермы серверов федерации, использующей топологию развертывания внутренней базы данных Windows \(WID\), в том, что она не реплицирует данные на каждый сервер федерации в ферме. Вместо этого все серверы федерации в ферме могут считывать и записывать данные в общую базу данных, которая хранится на сервере, работающем Microsoft SQL Server, расположенном в корпоративной сети.  
  
## <a name="deployment-considerations"></a>Вопросы развертывания  
В этом разделе описываются различные вопросы о предполагаемой аудитории, преимуществах и ограничениях, связанных с этой топологией развертывания.  
  
### <a name="who-should-use-this-topology"></a>Кто должен использовать эту топологию?  
  
-   Крупные организации с более чем 100 доверительными отношениями, которые должны предоставить как внутренних пользователей, так и внешних пользователей, единый вход\-на \(единого входа\) доступ к федеративным приложениям или службам.  
  
-   Организации, которые уже используют SQL Server и хотят воспользоваться преимуществами существующих средств и знаний  
  
### <a name="what-are-the-benefits-of-using-this-topology"></a>Каковы преимущества использования этой топологии?  
  
-   Поддержка большего числа отношений доверия \(более 100\)  
  
-   Поддержка обнаружения воспроизведения маркеров \(функции безопасности\) и разрешения артефактов \(части язык разметки зявлений системы безопасности (SAML) \(SAML\) 2,0\)  
  
-   Поддержка полных преимуществ SQL Server, таких как зеркальное отображение баз данных, отказоустойчивая кластеризация, отчеты и средства управления  
  
### <a name="what-are-the-limitations-of-using-this-topology"></a>Каковы ограничения использования этой топологии?  
  
-   Эта топология не обеспечивает избыточность базы данных по умолчанию. Хотя ферма серверов федерации с топологией WID автоматически реплицирует базу данных WID на каждом сервере федерации в ферме, ферма серверов федерации с топологией SQL Server содержит только одну копию базы данных.  
  
> [!NOTE]  
> SQL Server поддерживает множество различных параметров обеспечения избыточности данных и приложений, включая отказоустойчивую кластеризацию, зеркальное отображение базы данных и несколько различных типов репликации SQL Server.  
  
Информационная технология Майкрософт \(ИТ-\) отдел использует SQL Server зеркальное отображение базы данных в режиме повышенной безопасности\-\(синхронный режим\) и отказоустойчивую кластеризацию, чтобы обеспечить поддержку высокого уровня доступности для экземпляра\-. SQL Server \(\-одноранговых транзакций для\-одноранговых\) и репликация слиянием не тестировалась группой разработчиков AD FS корпорации Майкрософт. Дополнительные сведения о SQL Server см. в разделе [Общие сведения о решениях высокого уровня доступности](https://go.microsoft.com/fwlink/?LinkId=179853) или [выборе подходящего типа репликации](https://go.microsoft.com/fwlink/?LinkId=214648).  
  
### <a name="supported-sql-server-versions"></a>Поддерживаемые версии SQL Server  
В AD FS, устанавливаемых вместе с Windows Server 2012, поддерживаются следующие версии SQL Server:  
  
-   SQL Server 2008 \/ R2  
  
-   SQL Server 2012  
  
## <a name="server-placement-and-network-layout-recommendations"></a>Рекомендации по размещению и макету сети сервера  
Аналогично ферме серверов федерации с топологией WID, все серверы федерации в ферме настроены на использование одной системы доменных имен кластера \(DNS-\) имя \(которое представляет имя служба федерации\) и один IP-адрес кластера в составе балансировки сетевой нагрузки \(конфигурацию кластера NLB\). Это помогает узлу балансировки сетевой нагрузки распределять запросы клиентов на отдельные серверы федерации. Прокси-серверы федерации можно использовать для клиентских запросов к ферме серверов федерации.  
  
На следующем рисунке показано, как вымышленная компания Contoso Pharmaceuticals развернула свою ферму серверов федерации с топологией SQL Server в корпоративной сети. Здесь также показано, как компания настроила сеть периметра с доступом к DNS-серверу, дополнительному узлу балансировки сетевой нагрузки, использующему то же DNS-имя кластера \(fs.contoso.com\), которое используется в кластере балансировки сетевой нагрузки корпоративной сети, и два прокси-сервера федерации \(fsp1 и fsp2\).  
  
![ферма серверов, использующая SQL](media/FarmSQLProxies.gif)  
  
Дополнительные сведения о настройке сетевой среды для использования с серверами федерации или прокси-серверами федерации см. в разделе [требования к разрешению имен для серверов федерации](Name-Resolution-Requirements-for-Federation-Servers.md) или [требования к разрешению имен для прокси](Name-Resolution-Requirements-for-Federation-Server-Proxies.md)-серверов федерации.  
  
## <a name="see-also"></a>См. также
[Руководство по разработке служб федерации Active Directory в Windows Server 2012](AD-FS-Design-Guide-in-Windows-Server-2012.md)
