---
ms.assetid: 96b9f4e6-f01c-4517-8299-017d187d447e
title: Создание правила для отправки утверждения методов проверки подлинности
description: ''
author: billmath
ms.author: billmath
manager: femila
ms.date: 05/31/2017
ms.topic: article
ms.prod: windows-server-threshold
ms.technology: identity-adfs
ms.openlocfilehash: be3a16bac9c146637117aa7b9720cb4aa76177e2
ms.sourcegitcommit: 0b5fd4dc4148b92480db04e4dc22e139dcff8582
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/24/2019
ms.locfileid: "66189391"
---
# <a name="create-a-rule-to-send-an-authentication-method-claim"></a>Создание правила для отправки утверждения методов проверки подлинности


Можно использовать либо **отправлять членство в группе как утверждения** шаблон правила или **преобразование входящего утверждения** шаблон правила для отправки утверждение для метода проверки подлинности. Проверяющая сторона может использовать утверждение для метода проверки подлинности для определения того, механизм входа, пользователь использует для проверки подлинности и получения утверждений из служб федерации Active Directory \(AD FS\). Можно также использовать функцию Контроль механизма проверки подлинности служб федерации Active Directory \(AD FS\) в Windows Server 2012 R2 в качестве входных данных для создания утверждений метода проверки подлинности для ситуаций, в котором проверяющая сторона хочет определить уровень доступа, основанный на вход по смарт-карты. Например разработчик можно назначить разные уровни доступа для федеративных пользователей из приложения проверяющей стороны. Уровни доступа зависят ли входе пользователей в систему с помощью пользователя имя и пароль учетных данных, в отличие от смарт-карты.  
  
В зависимости от требований вашей организации используйте один из следующих процедур:  
  
-   Создать это правило с помощью **отправлять членство в группе как утверждения** шаблон правила \- этот шаблон правила можно использовать при необходимости группе, указанной в этот шаблон, чтобы в конечном счете определить, какой способ проверки подлинности утверждения для выдачи.  
  
-   Создать это правило с помощью **преобразование входящего утверждения** шаблон правила \- этот шаблон правила можно использовать, если вы хотите изменить существующий метод проверки подлинности на новый метод проверки подлинности, который работает с продуктом не распознает стандартных утверждений метода проверки подлинности AD FS.  
  


## <a name="to-create-by-using-the-send-group-membership-as-claims-rule-template-on-a-relying-party-trust-in-windows-server-2016"></a>Создание с помощью отправлять членство в группе как шаблон правила утверждения для доверия с проверяющей стороной в Windows Server 2016 

1.  В диспетчере серверов щелкните **средства**, а затем выберите **управления AD FS**.  
  
2.  В дереве консоли в разделе **AD FS**, нажмите кнопку **доверия проверяющей стороны**. 
![Создание правила](media/Create-a-Rule-to-Pass-Through-or-Filter-an-Incoming-Claim/claimrule9.PNG)  
  
3.  Справа\-выберите выбранного отношения доверия и нажмите кнопку **изменить политику выдачи утверждений**.
![Создание правила](media/Create-a-Rule-to-Pass-Through-or-Filter-an-Incoming-Claim/claimrule10.PNG)   
  
4.  В **изменить политику выдачи утверждений** диалогового **правила преобразования выдачи** щелкните **добавить правило** для запуска мастера создания правила. 
![Создание правила](media/Create-a-Rule-to-Pass-Through-or-Filter-an-Incoming-Claim/claimrule11.PNG)    

5.  На **Выбор шаблона правила** раздела **шаблон правила утверждения**выберите **отправлять членство в группе как утверждение** в списке и нажмите кнопку **Далее**.  
![Создание правила](media/Create-a-Rule-to-Send-Group-Membership-as-a-Claim/group3.PNG)      

6.  На **Настройка правила** введите имя правила утверждения.  
  
7.  Нажмите кнопку **Обзор**, выберите группу, члены которой должны получать это утверждение метод проверки подлинности, а затем нажмите кнопку **ОК**.  
  
8.  В **тип исходящего утверждения**выберите **метод проверки подлинности** в списке.  
  
9. В **значение исходящего утверждения**, введите один универсальный код ресурса идентификатора по умолчанию \(URI\) значения в следующей таблице, в зависимости от способа проверки подлинности щелкните **Готово**, а затем нажмите кнопку **ОК** сохранить правило.  
  
|Фактический метод проверки подлинности|Соответствующий код URI|  
|--------------------------------|---------------------|  
|Проверка подлинности с помощью имени пользователя и пароля|https://schemas.microsoft.com/ws/2008/06/identity/authenticationmethod/password|  
|Проверка подлинности Windows|https://schemas.microsoft.com/ws/2008/06/identity/authenticationmethod/windows|  
|Безопасность на транспортном уровне \(TLS\) взаимной проверки подлинности, который использует сертификаты X.509|https://schemas.microsoft.com/ws/2008/06/identity/authenticationmethod/tlsclient|  
|X.509\-на основе проверки подлинности, который не использует протокол TLS|https://schemas.microsoft.com/ws/2008/06/identity/authenticationmethod/x509|  
![Создание правила](media/Create-a-Rule-to-Send-an-Authentication-Method-Claim/auth2.PNG)
  
## <a name="to-create-by-using-the-send-group-membership-as-claims-rule-template-on-a-claims-provider-trust-in-windows-server-2016"></a>Создание с помощью отправлять членство в группе как шаблон правила утверждения на отношением доверия поставщика утверждений в Windows Server 2016 
  
1.  В диспетчере серверов щелкните **средства**, а затем выберите **управления AD FS**.  
  
2.  В дереве консоли в разделе **AD FS**, нажмите кнопку **отношения доверия поставщиков утверждений**. 
![Создание правила](media/Create-a-Rule-to-Pass-Through-or-Filter-an-Incoming-Claim/claimrule1.PNG)  
  
3.  Справа\-выберите выбранного отношения доверия и нажмите кнопку **изменение правил для утверждений**.
![Создание правила](media/Create-a-Rule-to-Pass-Through-or-Filter-an-Incoming-Claim/claimrule2.PNG)   
  
4.  В **изменение правил для утверждений** диалогового **правила преобразования принятия** щелкните **добавить правило** для запуска мастера создания правила.
![Создание правила](media/Create-a-Rule-to-Pass-Through-or-Filter-an-Incoming-Claim/claimrule3.PNG)    

5.  На **Выбор шаблона правила** раздела **шаблон правила утверждения**выберите **отправлять членство в группе как утверждение** в списке и нажмите кнопку **Далее**.  
![Создание правила](media/Create-a-Rule-to-Send-Group-Membership-as-a-Claim/group3.PNG)     

6.  На **Настройка правила** введите имя правила утверждения.  
  
7.  Нажмите кнопку **Обзор**, выберите группу, члены которой должны получать это утверждение метод проверки подлинности, а затем нажмите кнопку **ОК**.  
  
8.  В **тип исходящего утверждения**выберите **метод проверки подлинности** в списке.  
  
9. В **значение исходящего утверждения**, введите один универсальный код ресурса идентификатора по умолчанию \(URI\) значения в следующей таблице, в зависимости от способа проверки подлинности щелкните **Готово**, а затем нажмите кнопку **ОК** сохранить правило.  
  
|Фактический метод проверки подлинности|Соответствующий код URI|  
|--------------------------------|---------------------|  
|Проверка подлинности с помощью имени пользователя и пароля|https://schemas.microsoft.com/ws/2008/06/identity/authenticationmethod/password|  
|Проверка подлинности Windows|https://schemas.microsoft.com/ws/2008/06/identity/authenticationmethod/windows|  
|Безопасность на транспортном уровне \(TLS\) взаимной проверки подлинности, который использует сертификаты X.509|https://schemas.microsoft.com/ws/2008/06/identity/authenticationmethod/tlsclient|  
|X.509\-на основе проверки подлинности, который не использует протокол TLS|https://schemas.microsoft.com/ws/2008/06/identity/authenticationmethod/x509|  
![Создание правила](media/Create-a-Rule-to-Send-an-Authentication-Method-Claim/auth2.PNG)


## <a name="to-create-this-rule-by-using-the-transform-an-incoming-claim-rule-template-on-a-relying-party-trust-in-windows-server-2016"></a>Чтобы создать это правило путем использования преобразования входящего утверждения шаблон правила на доверия с проверяющей стороной в Windows Server 2016 

1.  В диспетчере серверов щелкните **средства**, а затем выберите **управления AD FS**.  
  
2.  В дереве консоли в разделе **AD FS**, нажмите кнопку **доверия проверяющей стороны**. 
![Создание правила](media/Create-a-Rule-to-Pass-Through-or-Filter-an-Incoming-Claim/claimrule9.PNG)  
  
3.  Справа\-выберите выбранного отношения доверия и нажмите кнопку **изменить политику выдачи утверждений**.
![Создание правила](media/Create-a-Rule-to-Pass-Through-or-Filter-an-Incoming-Claim/claimrule10.PNG)   
  
4.  В **изменить политику выдачи утверждений** диалогового **правила преобразования выдачи** щелкните **добавить правило** для запуска мастера создания правила. 
![Создание правила](media/Create-a-Rule-to-Pass-Through-or-Filter-an-Incoming-Claim/claimrule11.PNG)    

5.  На **Выбор шаблона правила** раздела **шаблон правила утверждения**выберите **преобразование входящего утверждения** в списке и нажмите кнопку **Далее**.  
![Создание правила](media/Create-a-Rule-to-Transform-an-Incoming-Claim/transform3.PNG)      

6.  На **Настройка правила** введите имя правила утверждения.  
  
7.  В **тип входящего утверждения**выберите **метод проверки подлинности** в списке.  
  
8.  В **тип исходящего утверждения**выберите **метод проверки подлинности** в списке.  
  
9. Выберите **замените значение входящего утверждения на значение другого исходящего утверждения**, а затем сделайте следующее:  
  
    1.  В **значение входящего утверждения**, введите одну из следующих значений URI, которые основаны на URI, который изначально использовался метод фактическую проверку подлинности, нажмите кнопку **Готово**, а затем нажмите кнопку **ОК** сохранить правило.  
  
    2.  В **значение исходящего утверждения**введите одно из значений URI по умолчанию в следующей таблице, зависит от выбранного новый метод проверки подлинности, щелкните **Готово**, а затем нажмите кнопку **ОК**  сохранить правило.  
  
|Метод фактическую проверку подлинности|Соответствующий код URI|  
|--------------------------------|---------------------|  
|Проверка подлинности с помощью имени пользователя и пароля|https://schemas.microsoft.com/ws/2008/06/identity/authenticationmethod/password|  
|Проверка подлинности Windows|https://schemas.microsoft.com/ws/2008/06/identity/authenticationmethod/windows|  
|Взаимная проверка подлинности TLS, который использует сертификаты X.509|https://schemas.microsoft.com/ws/2008/06/identity/authenticationmethod/tlsclient|  
|X.509\-на основе проверки подлинности, который не использует протокол TLS|https://schemas.microsoft.com/ws/2008/06/identity/authenticationmethod/x509|  
![Создание правила](media/Create-a-Rule-to-Send-an-Authentication-Method-Claim/auth4.PNG)
  
> [!NOTE]  
> Другие значения URI можно использовать в дополнение к значениям в таблице. Значения URI, которые отображаются ion в предыдущей таблице отражают коды URI, проверяющая сторона принимает по умолчанию.  

## <a name="to-create-this-rule-by-using-the-transform-an-incoming-claim-rule-template-on-a-claims-provider-trust-in-windows-server-2016"></a>Чтобы создать это правило путем использования преобразования входящего утверждения шаблон правила на отношением доверия поставщика утверждений в Windows Server 2016 
  
1.  В диспетчере серверов щелкните **средства**, а затем выберите **управления AD FS**.  
  
2.  В дереве консоли в разделе **AD FS**, нажмите кнопку **отношения доверия поставщиков утверждений**. 
![Создание правила](media/Create-a-Rule-to-Pass-Through-or-Filter-an-Incoming-Claim/claimrule1.PNG)  
  
3.  Справа\-выберите выбранного отношения доверия и нажмите кнопку **изменение правил для утверждений**.
![Создание правила](media/Create-a-Rule-to-Pass-Through-or-Filter-an-Incoming-Claim/claimrule2.PNG)   
  
4.  В **изменение правил для утверждений** диалогового **правила преобразования принятия** щелкните **добавить правило** для запуска мастера создания правила.
![Создание правила](media/Create-a-Rule-to-Pass-Through-or-Filter-an-Incoming-Claim/claimrule3.PNG)    

5.  На **Выбор шаблона правила** раздела **шаблон правила утверждения**выберите **преобразование входящего утверждения** в списке и нажмите кнопку **Далее**.  
![Создание правила](media/Create-a-Rule-to-Transform-an-Incoming-Claim/transform3.PNG)      

6.  На **Настройка правила** введите имя правила утверждения.  
  
7.  В **тип входящего утверждения**выберите **метод проверки подлинности** в списке.  
  
8.  В **тип исходящего утверждения**выберите **метод проверки подлинности** в списке.  
  
9. Выберите **замените значение входящего утверждения на значение другого исходящего утверждения**, а затем сделайте следующее:  
  
    1.  В **значение входящего утверждения**, введите одну из следующих значений URI, которые основаны на URI, который изначально использовался метод фактическую проверку подлинности, нажмите кнопку **Готово**, а затем нажмите кнопку **ОК** сохранить правило.  
  
    2.  В **значение исходящего утверждения**введите одно из значений URI по умолчанию в следующей таблице, зависит от выбранного новый метод проверки подлинности, щелкните **Готово**, а затем нажмите кнопку **ОК**  сохранить правило.  
  
|Метод фактическую проверку подлинности|Соответствующий код URI|  
|--------------------------------|---------------------|  
|Проверка подлинности с помощью имени пользователя и пароля|https://schemas.microsoft.com/ws/2008/06/identity/authenticationmethod/password|  
|Проверка подлинности Windows|https://schemas.microsoft.com/ws/2008/06/identity/authenticationmethod/windows|  
|Взаимная проверка подлинности TLS, который использует сертификаты X.509|https://schemas.microsoft.com/ws/2008/06/identity/authenticationmethod/tlsclient|  
|X.509\-на основе проверки подлинности, который не использует протокол TLS|https://schemas.microsoft.com/ws/2008/06/identity/authenticationmethod/x509|  
![Создание правила](media/Create-a-Rule-to-Send-an-Authentication-Method-Claim/auth4.PNG)























## <a name="to-create-this-rule-by-using-the-send-group-membership-as-claims-rule-template-in-windows-server-2012-r2"></a>Чтобы создать это правило с помощью отправлять членство в группе как шаблон правила утверждения в Windows Server 2012 R2  
  
1.  В диспетчере серверов щелкните **средства**, а затем выберите **управления AD FS**.  
  
2.  В дереве консоли в разделе **AD FS\\отношения доверия**, нажать **отношения доверия поставщиков утверждений** или **доверия проверяющей стороны**и нажмите кнопку конкретного доверие в списке, где вы хотите создать это правило.  
  
3.  Справа\-выберите выбранного отношения доверия и нажмите кнопку **изменение правил для утверждений**.
![Создание правила](media/Create-a-Rule-to-Pass-Through-or-Filter-an-Incoming-Claim/claimrule6.PNG)  
  
4.  В **изменение правил для утверждений** диалоговом окне выберите один следующие вкладки, в зависимости от отношения доверия, что вы изменяете и какие правила вы хотите создать это правило в и нажмите кнопку **добавить правило** для запуска правила Задайте мастер, который связан с этим правилом.  
  
    -   **Правила преобразования принятия**  
  
    -   **Правила преобразования выдачи**  
  
    -   **Правила авторизации выдачи**  
  
    -   **Правила авторизации делегирования**  
![Создание правила](media/Create-a-Rule-to-Permit-All-Users/permitall5.PNG)
    
5.  На **Выбор шаблона правила** раздела **шаблон правила утверждения**выберите **отправлять членство в группе как утверждение** в списке и нажмите кнопку **Далее**.  
![Создание правила](media/Create-a-Rule-to-Send-Group-Membership-as-a-Claim/group1.PNG)
  
6.  На **Настройка правила** введите имя правила утверждения.  
  
7.  Нажмите кнопку **Обзор**, выберите группу, члены которой должны получать это утверждение метод проверки подлинности, а затем нажмите кнопку **ОК**.  
  
8.  В **тип исходящего утверждения**выберите **метод проверки подлинности** в списке.  
  
9. В **значение исходящего утверждения**, введите один универсальный код ресурса идентификатора по умолчанию \(URI\) значения в следующей таблице, в зависимости от способа проверки подлинности щелкните **Готово**, а затем нажмите кнопку **ОК** сохранить правило.  
  
|Фактический метод проверки подлинности|Соответствующий код URI|  
|--------------------------------|---------------------|  
|Проверка подлинности с помощью имени пользователя и пароля|https://schemas.microsoft.com/ws/2008/06/identity/authenticationmethod/password|  
|Проверка подлинности Windows|https://schemas.microsoft.com/ws/2008/06/identity/authenticationmethod/windows|  
|Безопасность на транспортном уровне \(TLS\) взаимной проверки подлинности, который использует сертификаты X.509|https://schemas.microsoft.com/ws/2008/06/identity/authenticationmethod/tlsclient|  
|X.509\-на основе проверки подлинности, который не использует протокол TLS|https://schemas.microsoft.com/ws/2008/06/identity/authenticationmethod/x509|  
![Создание правила](media/Create-a-Rule-to-Send-an-Authentication-Method-Claim/auth1.PNG)
 
> [!NOTE]  
> Другие значения URI можно использовать в дополнение к значениям в таблице. Значения URI, приведенных в предыдущей таблице, отражают коды URI, проверяющая сторона принимает по умолчанию.  
  
## <a name="to-create-this-rule-by-using-the-transform-an-incoming-claim-rule-template-in-windows-server-2012-r2"></a>Чтобы создать это правило путем использования преобразования шаблона правила входящего утверждения в Windows Server 2012 R2  
   
  
  
1.  В диспетчере серверов щелкните **средства**, а затем нажмите кнопку **управления AD FS**.  
  
2.  В дереве консоли в разделе **AD FS\\отношения доверия**, нажать **отношения доверия поставщиков утверждений** или **доверия проверяющей стороны**и нажмите кнопку конкретного доверие в списке, где вы хотите создать это правило.  
  
3.  Справа\-выберите выбранного отношения доверия и нажмите кнопку **изменение правил для утверждений**.  
![Создание правила](media/Create-a-Rule-to-Pass-Through-or-Filter-an-Incoming-Claim/claimrule6.PNG) 
 
4.  В **изменение правил для утверждений** диалоговое окно, выберите один следующие вкладки, которое зависит от для отношения доверия, редактирования и в какие наборе правил вы хотите создать это правило и нажмите кнопку **добавить правило** для запуска правила Задайте мастер, который связан с этим правилом.  
  
    -   **Правила преобразования принятия**  
  
    -   **Правила преобразования выдачи**  
  
    -   **Правила авторизации выдачи**  
  
    -   **Правила авторизации делегирования**  
![Создание правила](media/Create-a-Rule-to-Permit-All-Users/permitall5.PNG)
  
5.  На **Выбор шаблона правила** раздела **шаблон правила утверждения**выберите **преобразование входящего утверждения** в списке и нажмите кнопку **Далее**.  
![Создание правила](media/Create-a-Rule-to-Transform-an-Incoming-Claim/transform1.PNG)    
  
6.  На **Настройка правила** введите имя правила утверждения.  
  
7.  В **тип входящего утверждения**выберите **метод проверки подлинности** в списке.  
  
8.  В **тип исходящего утверждения**выберите **метод проверки подлинности** в списке.  
  
9. Выберите **замените значение входящего утверждения на значение другого исходящего утверждения**, а затем сделайте следующее:  
  
    1.  В **значение входящего утверждения**, введите одну из следующих значений URI, которые основаны на URI, который изначально использовался метод фактическую проверку подлинности, нажмите кнопку **Готово**, а затем нажмите кнопку **ОК** сохранить правило.  
  
    2.  В **значение исходящего утверждения**введите одно из значений URI по умолчанию в следующей таблице, зависит от выбранного новый метод проверки подлинности, щелкните **Готово**, а затем нажмите кнопку **ОК**  сохранить правило.  
  
|Метод фактическую проверку подлинности|Соответствующий код URI|  
|--------------------------------|---------------------|  
|Проверка подлинности с помощью имени пользователя и пароля|https://schemas.microsoft.com/ws/2008/06/identity/authenticationmethod/password|  
|Проверка подлинности Windows|https://schemas.microsoft.com/ws/2008/06/identity/authenticationmethod/windows|  
|Взаимная проверка подлинности TLS, который использует сертификаты X.509|https://schemas.microsoft.com/ws/2008/06/identity/authenticationmethod/tlsclient|  
|X.509\-на основе проверки подлинности, который не использует протокол TLS|https://schemas.microsoft.com/ws/2008/06/identity/authenticationmethod/x509|  
![Создание правила](media/Create-a-Rule-to-Send-an-Authentication-Method-Claim/auth3.PNG)
  
> [!NOTE]  
> Другие значения URI можно использовать в дополнение к значениям в таблице. Значения URI, которые отображаются ion в предыдущей таблице отражают коды URI, проверяющая сторона принимает по умолчанию.  

## <a name="additional-references"></a>Дополнительная справка 
[Настройка правил для утверждения](Configure-Claim-Rules.md)  
 
[Контрольный список. Создание правил утверждений для отношений доверия с проверяющей стороной](https://technet.microsoft.com/library/ee913578.aspx)  

[Контрольный список. Создание правил утверждений для отношений доверия с поставщиком утверждений](https://technet.microsoft.com/library/ee913564.aspx)  
  
[Когда следует использовать Authorization Claim Rule](../../ad-fs/technical-reference/When-to-Use-an-Authorization-Claim-Rule.md)  

[Роль утверждений](../../ad-fs/technical-reference/The-Role-of-Claims.md)  
  
[Роль правил утверждений](../../ad-fs/technical-reference/The-Role-of-Claim-Rules.md) 
