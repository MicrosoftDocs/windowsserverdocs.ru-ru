---
ms.assetid: 102eeeb1-6c55-42a2-b321-71a7dab46146
title: Политики управления доступом в AD FS
author: billmath
ms.author: billmath
manager: femila
ms.date: 05/31/2017
ms.topic: article
ms.prod: windows-server
ms.technology: identity-adfs
ms.openlocfilehash: 9b85e6e10f8df3ec4d2c70e9aff687f264e055a8
ms.sourcegitcommit: d5e27c1f2f168a71ae272bebf8f50e1b3ccbcca3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/23/2020
ms.locfileid: "86962826"
---
# <a name="access-control-policies-in-windows-server-2016-ad-fs"></a>Политики управления доступом в Windows Server 2016 AD FS

  
## <a name="access-control-policy-templates-in-ad-fs"></a>Шаблоны политик контроля доступа в AD FS  
Службы федерации Active Directory (AD FS) теперь поддерживает использование шаблонов политики управления доступом.  С помощью шаблонов политики управления доступом администратор может применять параметры политики, назначив шаблон политики группе проверяющих сторон (RPs). Администратор также может вносить обновления в шаблон политики, и изменения будут применены к проверяющим сторонам автоматически, если взаимодействие с пользователем не требуется.  
  
## <a name="what-are-access-control-policy-templates"></a>Что такое шаблоны политик контроля доступа?  
Конвейер AD FS Core для обработки политики имеет три этапа: проверка подлинности, авторизация и выдача заявки. В настоящее время AD FS администраторам необходимо отдельно настроить политику для каждого из этих этапов.  Это также подразумевает понимание влияния этих политик и, если эти политики имеют взаимную зависимость. Кроме того, администраторы должны понимать язык правил утверждений и создавать настраиваемые правила для реализации простой или общей политики (например, блокировать внешний доступ).  
  
Шаблоны политики управления доступом заменяют эту старую модель, где администраторы должны настроить правила авторизации выдачи с помощью языка утверждений.  Старые командлеты PowerShell для правил авторизации выдачи по-прежнему применяются, но являются взаимоисключающими для новой модели. Администраторы могут выбрать вариант использования новой модели или старой модели.  Новая модель позволяет администраторам управлять моментом предоставления доступа, включая применение многофакторной проверки подлинности.  
  
Шаблоны политики управления доступом используют модель разрешений.  Это означает по умолчанию, что никто не имеет доступа, и этот доступ должен быть явно предоставлен.  Однако это не просто не все или ничего.  Администраторы могут добавлять исключения в правило разрешения.  Например, администратор может предоставить доступ на основе определенной сети, выбрав этот параметр и указав диапазон IP-адресов.  Но администратор может добавить и исключение, например, администратор может добавить исключение из определенной сети и указать этот диапазон IP-адресов.  
  
![политики управления доступом](media/Access-Control-Policies-in-AD-FS/ADFSACP2.PNG)  
  
## <a name="built-in-access-control-policy-templates-vs-custom-access-control-policy-templates"></a>Встроенные шаблоны политик управления доступом и пользовательские шаблоны политики управления доступом  
AD FS включает несколько встроенных шаблонов политик управления доступом.  Они предназначены для некоторых распространенных сценариев, имеющих одинаковый набор требований политики, например политику клиентского доступа для Office 365.  Эти шаблоны нельзя изменить.  
  
![политики управления доступом](media/Access-Control-Policies-in-AD-FS/ADFSACP3.PNG)  
  
Чтобы обеспечить повышенную гибкость для удовлетворения бизнес-потребностей, администраторы могут создавать собственные шаблоны политик доступа.  Их можно изменить после создания, а изменения в шаблоне настраиваемой политики будут применяться ко всем RP, которые управляются этими шаблонами политики.  Чтобы добавить шаблон настраиваемой политики, просто щелкните Добавить политику управления доступом в AD FS управления.  
  
Чтобы создать шаблон политики, администратор должен сначала указать, при каких условиях запрос будет разрешен для выдачи или делегирования маркера. Условия и параметры действий показаны в таблице ниже.   Условия, выделенные жирным шрифтом, могут быть дополнительно настроены администратором с использованием различных или новых значений. Администратор может также указать исключения, если они есть. При выполнении условия действие разрешения не будет запущено, если указано исключение и входящий запрос соответствует условию, указанному в исключении.  
  
|Разрешение пользователям|Except| 
| --- | --- | 
 |Из **определенной** сети|Из **определенной** сети<p>Из **конкретных** групп<p>С устройств с **указанными** уровнями доверия<p>С **конкретными** утверждениями в запросе|  
|Из **конкретных** групп|Из **определенной** сети<p>Из **конкретных** групп<p>С устройств с **указанными** уровнями доверия<p>С **конкретными** утверждениями в запросе|  
|С устройств с **указанными** уровнями доверия|Из **определенной** сети<p>Из **конкретных** групп<p>С устройств с **указанными** уровнями доверия<p>С **конкретными** утверждениями в запросе|  
|С **конкретными** утверждениями в запросе|Из **определенной** сети<p>Из **конкретных** групп<p>С устройств с **указанными** уровнями доверия<p>С **конкретными** утверждениями в запросе|  
|И требовать многофакторную проверку подлинности|Из **определенной** сети<p>Из **конкретных** групп<p>С устройств с **указанными** уровнями доверия<p>С **конкретными** утверждениями в запросе|  
  
Если администратор выбирает несколько условий, они относятся к **и** связи. Действия являются взаимоисключающими и для одного правила политики можно выбрать только одно действие. Если администратор выбирает несколько исключений, они связаны со связью **или** . Ниже приведены несколько примеров правил политики.  
  
|**Политика**|**Правила политики**|
| --- | --- |  
|Для доступа к экстрасети требуется MFA<p>Все пользователи разрешены|**#1 правила**<p>из **экстрасети**<p>и с MFA<p>Разрешение<p>**Правило 2**<p>из **интрасети**<p>Разрешение|  
|Внешний доступ не разрешен, кроме FTE<p>Разрешен доступ к интрасети для устройства с присоединением FTE на рабочем месте|**#1 правила**<p>Из **экстрасети**<p>и из группы **не FTE**<p>Разрешение<p>**#2 правила**<p>из **интрасети**<p>и с **присоединенного устройства на рабочем месте**<p>и из группы **FTE**<p>Разрешение|  
|Для доступа к экстрасети требуется MFA, за исключением администратора службы<p>Всем пользователям разрешен доступ|**#1 правила**<p>из **экстрасети**<p>и с MFA<p>Разрешение<p>Кроме **группы администраторов службы**<p>**#2 правила**<p>always<p>Разрешение|  
|для доступа к подключенному к рабочему месту устройству из экстрасети требуется MFA<p>Разрешите AD Fabric доступ к интрасети и экстрасети|**#1 правила**<p>из **интрасети**<p>И из группы " **структура AD** "<p>Разрешение<p>**#2 правила**<p>из **экстрасети**<p>и с устройства, **не присоединенного к рабочему месту**<p>и из группы " **структура AD** "<p>и с MFA<p>Разрешение<p>**#3 правила**<p>из **экстрасети**<p>и с **присоединенного устройства на рабочем месте**<p>и из группы " **структура AD** "<p>Разрешение|  
  
## <a name="parameterized-policy-template-vs-non-parameterized-policy-template"></a>Параметризованный шаблон политики и шаблон политики без параметров  
Политики контроля доступа могут быть  
  
Параметризованный шаблон политики — это шаблон политики, имеющий параметры. Администратору необходимо ввести значения этих параметров при назначении этого шаблона RPs.An администратору не удается внести изменения в параметризованный шаблон политики после его создания.  Примером параметризованной политики является встроенная политика, разрешив определенную группу.  При применении этой политики к RP необходимо указать этот параметр.  
  
![политики управления доступом](media/Access-Control-Policies-in-AD-FS/ADFSACP5.PNG)  
  
Непараметризованный шаблон политики — это шаблон политики без параметров. Администратор может назначить этот шаблон RP без каких-либо необходимых входных данных и внести изменения в шаблон непараметризованной политики после его создания.  Примером этого является встроенная политика, позволяющая всем и требовать MFA.  
  
![политики управления доступом](media/Access-Control-Policies-in-AD-FS/ADFSACP4.PNG)  
  
## <a name="how-to-create-a-non-parameterized-access-control-policy"></a>Создание непараметризованной политики управления доступом  
Чтобы создать непараметризованную политику управления доступом, используйте следующую процедуру.  
  
#### <a name="to-create-a-non-parameterized-access-control-policy"></a>Создание непараметризованной политики управления доступом  
  
1.  В области Управление AD FS на левой панели выберите политики управления доступом и щелкните правой кнопкой мыши добавить политику управления доступом.  
  
2.  Введите имя и описание.  Например, разрешите пользователям с проверкой подлинности устройства.  
  
3.  В разделе **разрешение доступа при соблюдении любого из следующих правил**нажмите кнопку **Добавить**.  
  
4.  В разделе "разрешено" установите флажок рядом **с устройствами с указанным уровнем доверия** .  
  
5.  В нижней части экрана выберите Подчеркивание **specific**  
  
6.  Во всплывающем окне выберите **Проверка подлинности** в раскрывающемся списке.  Нажмите кнопку **Ок**.  
  
    ![политики управления доступом](media/Access-Control-Policies-in-AD-FS/ADFSACP6.PNG)  
  
7.  Нажмите кнопку **Ок**. Нажмите кнопку **Ок**.  
  
    ![политики управления доступом](media/Access-Control-Policies-in-AD-FS/ADFSACP7.PNG)  
  
## <a name="how-to-create-a-parameterized-access-control-policy"></a>Создание параметризованной политики управления доступом  
Чтобы создать параметризованную политику управления доступом, используйте следующую процедуру.  
  
#### <a name="to-create-a-parameterized-access-control-policy"></a>Создание параметризованной политики управления доступом  
  
1.  В области Управление AD FS на левой панели выберите политики управления доступом и щелкните правой кнопкой мыши добавить политику управления доступом.  
  
2.  Введите имя и описание.  Пример: разрешение пользователям с конкретным утверждением.  
  
3.  В разделе **разрешение доступа при соблюдении любого из следующих правил**нажмите кнопку **Добавить**.  
  
4.  В разделе "разрешено" установите флажок рядом **с конкретными утверждениями в запросе** .  
  
5.  В нижней части экрана выберите Подчеркивание **specific**  
  
6.  Во всплывающем окне выберите **параметр, указанный при назначении политики контроля доступа**.  Нажмите кнопку **Ок**.  
  
    ![политики управления доступом](media/Access-Control-Policies-in-AD-FS/ADFSACP8.PNG)  
  
7.  Нажмите кнопку **Ок**. Нажмите кнопку **Ок**.  
  
    ![политики управления доступом](media/Access-Control-Policies-in-AD-FS/ADFSACP9.PNG)  
  
## <a name="how-to-create-a-custom-access-control-policy-with-an-exception"></a>Создание пользовательской политики контроля доступа с исключением  
Чтобы создать политику управления доступом с помощью исключения, используйте следующую процедуру.  
  
#### <a name="to-create-a-custom-access-control-policy-with-an-exception"></a>Создание пользовательской политики контроля доступа с исключением  
  
1.  В области Управление AD FS на левой панели выберите политики управления доступом и щелкните правой кнопкой мыши добавить политику управления доступом.  
  
2.  Введите имя и описание.  Например: разрешение пользователям, прошедшим проверку подлинности, но не управляемой.  
  
3.  В разделе **разрешение доступа при соблюдении любого из следующих правил**нажмите кнопку **Добавить**.  
  
4.  В разделе "разрешено" установите флажок рядом **с устройствами с указанным уровнем доверия** .  
  
5.  В нижней части экрана выберите Подчеркивание **specific**  
  
6.  Во всплывающем окне выберите **Проверка подлинности** в раскрывающемся списке.  Нажмите кнопку **Ок**.  
  
7.  В разделе за исключением установите флажок рядом **с поля устройства с указанным уровнем доверия** .  
  
8.  В нижней части раздела за исключением выберите Подчеркивание **specific**  
  
9. Во всплывающем окне выберите пункт **управляемый** из раскрывающегося списка.  Нажмите кнопку **Ок**.  
  
10. Нажмите кнопку **Ок**. Нажмите кнопку **Ок**.  
  
    ![политики управления доступом](media/Access-Control-Policies-in-AD-FS/ADFSACP10.PNG)  
  
## <a name="how-to-create-a-custom-access-control-policy-with-multiple-permit-conditions"></a>Создание пользовательской политики управления доступом с несколькими условиями "Разрешите"  
Чтобы создать политику управления доступом с несколькими условиями разрешения, используйте следующую процедуру.  
  
#### <a name="to-create-a-parameterized-access-control-policy"></a>Создание параметризованной политики управления доступом  
  
1.  В области Управление AD FS на левой панели выберите политики управления доступом и щелкните правой кнопкой мыши добавить политику управления доступом.  
  
2.  Введите имя и описание.  Пример: разрешение пользователям с конкретными утверждениями и из определенной группы.  
  
3.  В разделе **разрешение доступа при соблюдении любого из следующих правил**нажмите кнопку **Добавить**.  
  
4.  В разделе "разрешено" установите флажок рядом **с определенной группой** и **с конкретными утверждениями в запросе** .  
  
5.  В нижней части экрана выберите Подчеркивание **для первого** условия, рядом с пунктом группы.  
  
6.  Во всплывающем окне выберите **параметр, указанный при назначении политики**.  Нажмите кнопку **Ок**.  
  
7.  В нижней части экрана выберите Подчеркивание **для второго** условия рядом с полем утверждения.  
  
8.  Во всплывающем окне выберите **параметр, указанный при назначении политики контроля доступа**.  Нажмите кнопку **Ок**.  
  
9. Нажмите кнопку **Ок**. Нажмите кнопку **Ок**.  
  
![политики управления доступом](media/Access-Control-Policies-in-AD-FS/ADFSACP12.PNG)  
  
## <a name="how-to-assign-an-access-control-policy-to-a-new-application"></a>Назначение политики управления доступом для нового приложения  
Назначение политики контроля доступа новому приложению осуществляется довольно просто и теперь интегрировано в мастер добавления RP.  В мастере отношения доверия с проверяющей стороной можно выбрать политику управления доступом, которую вы хотите назначить.  Это требование необходимо при создании нового отношения доверия с проверяющей стороной.  
  
![политики управления доступом](media/Access-Control-Policies-in-AD-FS/ADFSACP13.PNG)  
  
## <a name="how-to-assign-an-access-control-policy-to-an-existing-application"></a>Назначение политики контроля доступа для существующего приложения  
Назначение политики контроля доступа для существующего приложения просто выберите приложение из отношения доверия с проверяющей стороной и щелкните правой кнопкой мыши **изменить политику управления доступом**.  
  
![политики управления доступом](media/Access-Control-Policies-in-AD-FS/ADFSACP14.PNG)  
  
Здесь можно выбрать политику управления доступом и применить ее к приложению.  
  
![политики управления доступом](media/Access-Control-Policies-in-AD-FS/ADFSACP15.PNG)  
  
## <a name="see-also"></a>См. также  
[Операции AD FS](../ad-fs-operations.md) 
