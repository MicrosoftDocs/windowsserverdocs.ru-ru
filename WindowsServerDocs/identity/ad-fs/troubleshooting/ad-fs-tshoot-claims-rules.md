---
title: Правила утверждений AD FS Устранение неполадок.
description: В этом документе описывается устранение синтаксис правила утверждений с AD FS
author: billmath
ms.author: billmath
manager: mtillman
ms.date: 03/01/2018
ms.topic: article
ms.prod: windows-server-threshold
ms.technology: identity-adfs
ms.openlocfilehash: 027b2afc9e580253ec820e7e5be14419387ddd44
ms.sourcegitcommit: 0d0b32c8986ba7db9536e0b8648d4ddf9b03e452
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/17/2019
ms.locfileid: "59837925"
---
# <a name="ad-fs-troubleshooting---claims-rules-syntax"></a>AD FS Устранение неполадок — утверждений правила синтаксиса
Утверждение является оператором, отдельный субъект делает в отношении себя или другого субъекта.  Заявки опубликованы проверяющей стороной, и их получает одно или несколько значений и затем упакованных в маркерах безопасности, выдаваемых сервера AD FS.  В этой статье рассматривается с синтаксисом утверждений и создания.  Сведения о утверждений выдачи см. в разделе [AD FS Устранение неполадок — выдачи утверждений](ad-fs-tshoot-claims-issuance.md).

>[!NOTE]  
>Можно использовать [ClaimsXRay](https://adfshelp.microsoft.com/ClaimsXray/TokenRequest) на [служб федерации Active Directory помогают](https://adfshelp.microsoft.com) сайта, чтобы помочь в диагностике утверждений проблемы.   

## <a name="how-claim-rules-are-processed"></a>Порядок обработки правил утверждений
Правила утверждений обрабатываются посредством [конвейер утверждений](../../ad-fs/technical-reference/The-Role-of-the-Claims-Pipeline.md) с помощью [модуль утверждений](../../ad-fs/technical-reference/The-Role-of-the-Claims-Engine.md). Модуль утверждений — это логический компонент службы федерации, который проверяет набор входящих утверждений, представленный пользователем, и в соответствии с логикой каждого правила создает выходной набор утверждений.

## <a name="how-to-create-a-claim-rule"></a>Создание правила утверждения
Правила утверждений создаются отдельно для каждого федеративного отношения доверия в службе федерации и не используются совместно несколькими отношениями. Можно создать правила на основе [шаблон правила для утверждений](../../ad-fs/technical-reference/determine-the-type-of-claim-rule-template-to-use.md), начните с нуля путем создания правила с помощью [языка правил для утверждений](../../ad-fs/technical-reference/when-to-use-a-custom-claim-rule.md) или с помощью Windows PowerShell для настройки правила.

## <a name="understanding-the-components-of-the-claim-rule-language"></a>Основные сведения о компонентах языка правил утверждений
Язык правил утверждений состоит из следующих компонентов, разделенных точкой "= >» оператор:

- Условие — используется для проверки входящих утверждений и определить, следует ли выполнять инструкцию выдачи правила.  Он представляет логическое выражение, которое должно вычисляться в значение true, для выполнения части текста правила.

- Заявление на размещение

Пример.

```c:[type == "Name", value == "domain user"] => issue(type = "Role", value = "employee");``` 

Следующее утверждение содержит следующее:
- условие — `c:[type == "Name", value == "domain user"] ` -принимает входящее утверждение, является ли имя учетной записи windows пользователя домена
- выдачи - `issue(type = "Role", value = "employee")` — Если условие имеет значение true, Добавление нового утверждения во входной утверждений с ролью сотрудника.

Дополнительные сведения о утверждений и синтаксис см. в разделе [роль языка правил утверждений](../../ad-fs/technical-reference/the-role-of-the-claim-rule-language.md).

## <a name="claims-rule-editor"></a>Редактор правил утверждений
Проверка синтаксиса выполняется с помощью редактора правил утверждений после завершения утверждения и щелкните **ОК**.  Поэтому при наличии неверный синтаксис затем редакторе сообщит вам.

![утверждения](media/ad-fs-tshoot-claims/claims1.png)

## <a name="event-logs"></a>Журналы событий
При поиске неполадок, связанных с утверждения с помощью журналов лучше для поиска для вывода утверждений.  Можно искать 1000 и 1001 события в журнале событий.

![утверждения](media/ad-fs-tshoot-claims/claims2.png)

## <a name="creating-a-sample-application"></a>Создание примера приложения
Можно также создать пример приложения эха утверждений.  Например можно использовать пример приложения и создать проверяющую сторону, имеющий то же утверждение, который вы пытаетесь диагностировать и определить, содержит ли приложение любые неполадки, утверждения.

![утверждения](media/ad-fs-tshoot-claims/claim4.png)

Хороший пример веб-приложения можно найти здесь.  Это приложение является простой веб-приложения, выводящую утверждения, полученные от проверяющей стороне.  Для их использования необходимо изменить файл web.config приложения по:
- Изменение https://app1.contoso.com/sampapp URL-адрес будет использоваться для размещения sampapp
- изменить все экземпляры sts.contoso.com расскажем вам о сервере федерации AD FS
- Заменив отпечаток отпечаток

![утверждения](media/ad-fs-tshoot-claims/claims3.png)

Следующие [статье блога](https://blogs.technet.microsoft.com/tangent_thoughts/2015/02/20/install-and-configure-a-simple-net-4-5-sample-federated-application-samapp/) имеет отличный и подробные инструкции по настройке.

## <a name="next-steps"></a>Следующие шаги

- [Устранение неполадок AD FS](ad-fs-tshoot-overview.md)