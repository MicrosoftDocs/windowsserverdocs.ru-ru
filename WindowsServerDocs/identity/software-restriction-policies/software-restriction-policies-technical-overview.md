---
title: Технический обзор политик ограниченного использования программ
description: Безопасность Windows Server
ms.prod: windows-server
ms.technology: security-software-restriction-policies
ms.topic: article
ms.assetid: dc7013b0-0efd-40fd-bd6d-75128adbd0b8
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 10/12/2016
ms.openlocfilehash: 38625a8d416345a6a7ed40c021b55aa10d1fd92f
ms.sourcegitcommit: b00d7c8968c4adc8f699dbee694afe6ed36bc9de
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/08/2020
ms.locfileid: "80855277"
---
# <a name="software-restriction-policies-technical-overview"></a>Технический обзор политик ограниченного использования программ

>Область применения: Windows Server 2016, Windows Server 2012 R2, Windows Server 2012

В этом разделе описываются политики ограниченного использования программ, когда и как используется функция, какие изменения были реализованы в прошлых выпусках, а также ссылки на дополнительные ресурсы, помогающие создавать и развертывать политики ограниченного использования программ, начиная с Windows Server 2008 и Windows Vista.

## <a name="introduction"></a>Введение
Политики ограниченного использования программ предоставляют администраторам управляемый групповая политика механизм для обнаружения программного обеспечения и управления его возможностью запуска на локальном компьютере. Эти политики можно использовать для защиты компьютеров под управлением операционных систем Microsoft Windows (начиная с Windows Server 2003 и Windows XP Professional) от известных конфликтов и защиты компьютеров от угроз безопасности, таких как вредоносные вирусы и программы-троянские кони. Кроме того, данные политики помогают создать конфигурацию с расширенными ограничениями для компьютеров, на которых разрешается запуск только определенных приложений. Политики ограниченного использования программ интегрируются со службой Microsoft Active Directory и групповой политикой. Политики можно создавать на изолированных компьютерах.

Они являются политиками доверия, то есть представляют собой правила, устанавливаемые администратором, чтобы ограничить выполнение сценариев и другого кода, не имеющего полного доверия. Расширение политик ограниченного использования программ для редактор локальных групповых политик предоставляет единый пользовательский интерфейс, с помощью которого можно управлять параметрами ограничения на использование приложений на локальном компьютере или в домене.

## <a name="procedures"></a>Процедуры

-   [Администрирование политик ограниченного использования программ](administer-software-restriction-policies.md)

    -   [Определение списка разрешенных и запрещенных инвентаризации приложений для политик ограниченного использования программ](determine-allow-deny-list-and-application-inventory-for-software-restriction-policies.md)

    -   [Работа с правилами политик ограниченного использования программ](work-with-software-restriction-policies-rules.md)

    -   [Использование политик ограниченного использования программ для защиты компьютера от вирусов по электронной почте](use-software-restriction-policies-to-help-protect-your-computer-against-an-email-virus.md)

-   [Устранение неполадок политик ограниченного использования программ](troubleshoot-software-restriction-policies.md)

## <a name="software-restriction-policy-usage-scenarios"></a>Сценарии применения политики ограниченного использования программ
Бизнес-пользователи совместно работают с помощью электронной почты, обмена мгновенными сообщениями и одноранговых приложений. По мере роста этих совместной работы, особенно при использовании Интернета в бизнес-вычислениях, необходимо выполнить угрозы от вредоносного кода, например червей, вирусов, вредоносных атак или угроз злоумышленников.

Пользователи могут получить вредоносный код во многих формах, от собственных исполняемых файлов Windows (exe-файлы) до макросов в документах (таких как файлы. doc), в скрипты (например, vbs-файлы). Злоумышленники и злоумышленники часто используют методы социальных сетей, чтобы пользователи могли запускать код, содержащий вирусы и черви. (Социальные сети — это термин, с помощью которого люди получают свой пароль или какую-либо форму сведений о безопасности.) Если такой код активирован, он может создавать атаки типа "отказ в обслуживании" на сеть, отправлять конфиденциальные или закрытые данные в Интернет, обеспечивать безопасность компьютера под угрозой или повредить содержимое жесткого диска.

ИТ-организации и пользователи должны иметь возможность определить, какое программное обеспечение можно использовать для безопасного выполнения, а это не так. Благодаря большим числам и формам, которые могут сделать код злонамеренно, это довольно сложная задача.

Для защиты сетевых компьютеров от вредоносного кода и неизвестного или неподдерживаемого программного обеспечения Организации могут применять политики ограниченного использования программ в рамках общей стратегии безопасности.

Администраторы могут использовать политики ограничения использования программ для решения следующих задач:

-   определить доверенный код;

-   разработать гибкую групповую политику для регулирования работы сценариев, исполняемых файлов и элементов ActiveX.

Политики ограниченного использования программ применяются операционной системой и приложениями (например, для создания сценариев), которые им соответствуют.

В частности, администраторы могут использовать политики ограниченного использования программ в следующих целях:

-   Укажите, какие программы (исполняемые файлы) могут выполняться на клиентских компьютерах

-   запретить пользователям выполнять определенные программы на компьютерах с общим доступом;

-   Укажите, кто может добавлять доверенных издателей на клиентские компьютеры

-   Задайте область применения политик ограниченного использования программ (укажите, влияют ли политики на всех пользователей или на подмножество пользователей на клиентских компьютерах).

-   запретить работу исполняемых файлов на локальном компьютере, сайте, в подразделении или домене. Это уместно в тех случаях, когда политики ограниченного использования программ не применяются для решения потенциальных проблем со злоумышленниками.

## <a name="differences-and-changes-in-functionality"></a><a name="BKMK_Diffs_Changes"></a>Различия и изменения в функциональных возможностях
В наборе исправлений безопасности для Windows Server 2012 и Windows 8 нет изменений в функциональности.

**Поддерживаемые версии**

Политики ограниченного использования программ могут быть настроены и применены только к компьютерам под управлением Windows Server 2003, включая Windows Server 2012 и Windows XP, в том числе Windows 8.

> [!NOTE]
> Некоторые выпуски клиентской операционной системы Windows, начиная с Windows Vista, не имеют политик ограничений программного обеспечения. Компьютеры, не контролируемые в домене, групповая политика могут не получить распределенные политики.

**Сравнение функций управления приложениями в политиках ограниченного использования программ и AppLocker**

В следующей таблице сравниваются функции и функции функции политик ограниченного использования программ (SRP) и AppLocker.

|Функция управления приложениями|SRP|AppLocker|
|----------------|----|-------|
|Область видимости|Политики SRP могут применяться во всех операционных системах Windows, начиная с Windows XP и Windows Server 2003.|Политики AppLocker применяются только к Windows Server 2008 R2, Windows Server 2012, Windows 7 и Windows 8.|
|Создание политик|Политики SRP обслуживаются с использованием групповой политики, а обновлять политику SRP может только администратор объекта групповой политики (GPO). Администратор на локальном компьютере может изменять политики SRP, определенные в локальном объекте групповой политики.|Политики AppLocker обслуживаются с использованием групповой политики, а обновлять политику может только администратор объекта групповой политики. Администратор на локальном компьютере может изменять политики AppLocker, определенные в локальном объекте групповой политики.<p>AppLocker позволяет настраивать сообщения об ошибках, которые перенаправляют пользователей на веб-страницы справки.|
|Обслуживание политик|Политики SRP необходимо обновлять с использованием оснастки локальной политики безопасности (если политики создаются локально) или консоли управления групповыми политиками (GPMC).|Политики AppLocker можно обновлять, используя оснастку локальной политики безопасности (если политики создаются локально) или консоли GPMC, а также командлетов Windows PowerShell AppLocker.|
|Применение политик|Политики SRP распространяются с использованием групповой политики.|Политики AppLocker распространяются с использованием групповой политики.|
|Режим применения политик|SRP работает в "режиме списка запретов", где администраторы могут создавать правила для файлов, которые не нужно разрешать в этом предприятии, в то время как остальная часть файла может выполняться по умолчанию.<p>Параметр SRP можно также настроить в режиме списка разрешений, так что по умолчанию все файлы заблокированы, и администраторам необходимо создать разрешения для файлов, которые они хотят разрешить.|AppLocker по умолчанию работает в "режиме списка разрешений", в котором разрешено выполнение только этих файлов, для которых существует соответствующее правило разрешения.|
|Типы файлов, которые можно контролировать|С помощью политик SRP можно контролировать следующие типы файлов.<p>— Исполняемые файлы<br />-DLL<br />— Скрипты<br />-Установщики Windows<p>С помощью SRP невозможно контролировать каждый из этих типов файлов по отдельности. Все правила SRP находятся в единой коллекции правил.|С помощью AppLocker можно контролировать следующие типы файлов.<p>— Исполняемые файлы<br />-DLL<br />— Скрипты<br />-Установщики Windows<br />— Упакованные приложения и установщики (Windows Server 2012 и Windows 8)<p>В AppLocker существует по отдельной коллекции правил для каждого из пяти типов файлов.|
|Специальные типы файлов|SRP поддерживает расширяемый список типов файлов, которые считаются исполняемыми. Администраторы могут добавлять расширения файлов, которые должны считаться исполняемыми.|AppLocker не поддерживает эту возможность. В настоящее время AppLocker поддерживает следующие расширения файлов.<p>— Исполняемые файлы (. exe,. com)<br />-DLL (. ocx,. dll)<br />-Scripts (. vbs,. js,. ps1,. cmd,. bat)<br />-Установщики Windows (. msi,. MST,. MSP)<br />-Упакованные установщики приложений (. appx)|
|Типы правил|SRP поддерживает четыре типа правил.<p>-Hash<br />-Path<br />-Signature<br />-Зона Интернета|AppLocker поддерживает три типа правил.<p>-Hash<br />-Path<br />-Издатель|
|Изменение значения хеша|SRP позволяет администраторам предоставлять пользовательские хэш-значения.|AppLocker вычисляет значение хеша самостоятельно. На внутреннем уровне используется хэш SHA1 Authenticode для переносимых исполняемых файлов (exe и DLL), а также установщики Windows и хэш неструктурированного файла SHA1 для остальных.|
|Поддержка разных уровней безопасности|С помощью администраторов SRP можно указать разрешения, с которыми может работать приложение. Таким образом, администратор может настроить такое правило, чтобы Блокнот всегда выполнялся с ограниченными разрешениями и не был прав администратора.<p>Политики SRP в Windows Vista и более ранних версиях поддерживали несколько уровней безопасности. В Windows 7 этот список был ограничен двумя уровнями: недопустимый и неограниченный (базовый пользователь преобразуется в запрещенный).|AppLocker не поддерживает уровни безопасности.|
|Управление упакованными приложениями и упакованными установщиками приложений|Невозможно|APPX — это допустимый тип файла, доступный для управления с помощью AppLocker.|
|Назначение правила для пользователя или группы пользователей|Правила политики ограниченного использования программ применяются ко всем пользователям определенного компьютера.|Правила AppLocker можно назначить для конкретного пользователя или группы пользователей.|
|Поддержка исключений из правил|SRP не поддерживает исключения из правил|Правила AppLocker могут иметь исключения, которые позволяют администраторам создавать такие правила, как «разрешить все из Windows, кроме regedit. exe».|
|Поддержка режима аудита|SRP не поддерживает режим аудита. Единственный способ проверки политик SRP — настроить тестовую среду и провести несколько экспериментов.|AppLocker поддерживает режим аудита, что позволяет администраторам проверить действие политики в реальной рабочей среде, не влияя на работу пользователей. Получив удовлетворительный результат, можно приступать к принудительному применению политики.|
|Поддержка экспорта и импорта политик|SRP не поддерживает импорт и экспорт политик.|AppLocker поддерживает импорт и экспорт политик. Это позволяет создать политику AppLocker на образце компьютера, проверить ее, а затем экспортировать и снова импортировать в нужный объект групповых политик.|
|Принудительное применение правил|Внутри системы применение правил SRP происходит в режиме пользователя, который является менее защищенным.|На внутреннем уровне правила AppLocker для файлов exe и DLL применяются в режиме ядра, что является более безопасным, чем принудительное выполнение в пользовательском режиме.|

## <a name="system-requirements"></a>Требования к системе
Политики ограниченного использования программ могут быть настроены и применены только к компьютерам под управлением Windows Server 2003 и более поздних ОС и Windows XP. Групповая политика требуется для распространения групповая политика объектов, содержащих политики ограниченного использования программ.

## <a name="software-restriction-policies-components-and-architecture"></a>Компоненты и архитектура политик ограниченного использования программ
Политики ограниченного использования программ предоставляют механизм для операционной системы и приложений, совместимых с политиками ограниченного использования программ, чтобы ограничить выполнение программного обеспечения средой выполнения.

На высоком уровне политики ограниченного использования программ состоят из следующих компонентов:

-   API политик ограниченного использования программ. Прикладные программные интерфейсы (API) используются для создания и настройки правил, составляющих политику ограниченного использования программ. Существуют также API политик ограниченного использования программ для запросов, обработки и применения политик ограниченного использования программ.

-   Средство управления политиками ограниченного использования программ. Это состоит из расширения **политик ограниченного использования программ** для **локальной** оснастки Редактор объектов групповой политики, которую администраторы используют для создания и изменения политик ограниченного использования программ.

-   Набор интерфейсов API и приложений операционной системы, которые вызывают API политик ограниченного использования программ для обеспечения принудительного применения политик ограниченного использования программ во время выполнения.

-   Active Directory и групповая политика. Политики ограниченного использования программ зависят от инфраструктуры групповая политика, чтобы распространить политики ограниченного использования программ из Active Directory на соответствующие клиенты, а также для определения области и фильтрации применения этих политик на соответствующих целевых компьютерах.

-   API-интерфейсы доверия Authenticode и Винверифи, которые используются для обработки подписанных исполняемых файлов.

-   Просмотр событий. Функции, используемые политиками ограниченного использования программ, регистрируют события в журналах Просмотр событий.

-   Результирующий набор политик (RSoP), который может помочь в диагностике действующей политики, которая будет применена к клиенту.

Дополнительные сведения об архитектуре SRP, о том, как SRP управляет правилами, процессами и взаимодействиями, см. в статье [как работают политики ограниченного использования программ](https://technet.microsoft.com/library/cc786941(v=WS.10).aspx) в технической библиотеке Windows Server 2003.

## <a name="best-practices"></a><a name="BKMK_Best_Practices"></a>Рекомендации

### <a name="do-not-modify-the-default-domain-policy"></a>Не изменяйте политику домена по умолчанию.

-   Если вы не изменяете политику домена по умолчанию, вы всегда можете повторно применить политику домена по умолчанию, если что-то пойдет не так с политикой настраиваемого домена.

### <a name="create-a-separate-group-policy-object-for-software-restriction-policies"></a>Создайте отдельный объект групповая политика для политик ограниченного использования программ.

-   При создании отдельного объекта групповая политика (GPO) для политик ограниченного использования программ можно отключить политики ограниченного использования программ в экстренной ситуации без отключения остальной политики домена.

### <a name="if-you-experience-problems-with-applied-policy-settings-restart-windows-in-safe-mode"></a>При возникновении проблем с примененными параметрами политики перезапустите Windows в защищенном режиме.

-   Политики ограниченного использования программ не применяются при запуске Windows в защищенном режиме. Если вы случайно заблокировали рабочую станцию с политиками ограниченного использования программ, перезапустите компьютер в защищенном режиме, войдите в систему как локальный администратор, измените политику, запустите **gpupdate**, перезагрузите компьютер, а затем войдите в систему обычным образом.

### <a name="use-caution-when-defining-a-default-setting-of-disallowed"></a>Будьте внимательны при определении значения по умолчанию запрещенного.

-   При определении **неразрешенного**значения по умолчанию запрещено использовать все программное обеспечение, Кроме программ, которые были явно разрешены. Любой файл, который необходимо открыть, должен иметь правило политик ограниченного использования программ, которое позволяет открыть его.

-   Чтобы защитить администраторов от блокировки вне системы, если установлен уровень безопасности по умолчанию " **запрещено**", автоматически создаются четыре правила для путей в реестре. Вы можете удалить или изменить эти правила для путей реестра. Однако это не рекомендуется.

### <a name="for-best-security-use-access-control-lists-in-conjunction-with-software-restriction-policies"></a>Для обеспечения лучшей безопасности используйте списки управления доступом в сочетании с политиками ограниченного использования программ.

-   Пользователи могут попытаться обойти политики ограниченного использования программ путем переименования или перемещения запрещенных файлов или перезаписи неограниченных файлов. Поэтому рекомендуется использовать списки управления доступом (ACL), чтобы запретить пользователям доступ для выполнения этих задач.

### <a name="test-new-policy-settings-thoroughly-in-test-environments-before-applying-the-policy-settings-to-your-domain"></a>Тщательно проверяйте новые параметры политики в тестовых средах перед применением параметров политики к домену.

-   Новые параметры политики могут работать иначе, чем ожидалось изначально. Тестирование уменьшает вероятность возникновения проблемы при развертывании параметров политики в сети.

-   Вы можете настроить тестовый домен отдельно от домена организации, в котором будут проверяться новые параметры политики. Вы также можете проверить параметры политики, создав объект тестового объекта и связав его с тестовым подразделением. При тщательном тестировании параметров политики с помощью тестовых пользователей можно связать тестовый объект групповой политики с вашим доменом.

-   Не устанавливайте программы или файлы, чтобы они не **пропускали** проверку, чтобы увидеть, что может быть результатом. Ограничения на определенные файлы могут серьезно повлиять на работу компьютера или сети.

-   Неверно введенные сведения или опечатки могут привести к тому, что параметр политики не будет выполняться должным образом. Тестирование новых параметров политики перед их применением может препятствовать непредвиденному поведению.

### <a name="filter-user-policy-settings-based-on-membership-in-security-groups"></a>Фильтрация параметров политики пользователя на основе членства в группах безопасности.

-   Можно указать пользователей или группы, для которых не нужно применять параметр политики, сняв флажки **применить групповая политика** и **Чтение** , которые находятся на вкладке **Безопасность** диалогового окна Свойства объекта групповой политики.

-   Если разрешение на чтение запрещено, этот параметр политики не загружается компьютером. В результате для загрузки ненужных параметров политики используется меньше пропускной способности, что позволяет сети работать быстрее. Чтобы запретить разрешение чтение, установите флажок **запретить** для **чтения** , который находится на вкладке **Безопасность** диалогового окна Свойства объекта групповой политики.

### <a name="do-not-link-to-a-gpo-in-another-domain-or-site"></a>Не применяйте связь с объектом групповой политики в другом домене или сайте.

-   Связывание с объектом GPO в другом домене или на сайте может привести к снижению производительности.

## <a name="additional-resources"></a>Дополнительные ресурсы

|Тип контента|Ссылки|
|--------|-------|
|**Планирование**|[Технический справочник по политикам ограниченного использования программ](https://technet.microsoft.com/library/cc728085(v=WS.10).aspx)|
|**Операции**|[Администрирование политик ограниченного использования программ](administer-software-restriction-policies.md)|
|**Устранение неполадок**|[Устранение неполадок политик ограниченного использования программ (2003)](https://technet.microsoft.com/library/cc737011(v=WS.10).aspx)|
|**Безопасность**|[Угрозы и контрмеры для политик ограниченного использования программ (2008)](https://technet.microsoft.com/library/dd349795(v=WS.10).aspx)<p>[Угрозы и контрмеры для политик ограниченного использования программ (2008 R2)](https://technet.microsoft.com/library/hh125926(v=WS.10).aspx)|
|**Средства и параметры**|[Средства и параметры политик ограниченного использования программ (2003)](https://technet.microsoft.com/library/cc782454(v=WS.10).aspx)|
|**Ресурсы сообщества**|[Блокировка приложений с помощью политик ограниченного использования программ](https://technet.microsoft.com/magazine/2008.06.srp.aspx?pr=blog)|


