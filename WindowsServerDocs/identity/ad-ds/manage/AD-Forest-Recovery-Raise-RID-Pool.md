---
title: Восстановление леса AD - вызов RID пулов
description: ''
ms.author: joflore
author: MicrosoftGuyJFlo
manager: mtillman
ms.date: 08/09/2018
ms.topic: article
ms.prod: windows-server-threshold
ms.assetid: c37bc129-a5e0-4219-9ba7-b4cf3a9fc9a4
ms.technology: identity-adds
ms.openlocfilehash: c8f91226e10ea6681933d5a5dc00b92f5ab2179c
ms.sourcegitcommit: 0d0b32c8986ba7db9536e0b8648d4ddf9b03e452
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/17/2019
ms.locfileid: "59862985"
---
# <a name="ad-forest-recovery---raising-the-value-of-available-rid-pools"></a>Восстановление леса AD - возведение значения доступных пулов RID 

>Область применения. Windows Server 2016, Windows Server 2012 и 2012 R2, Windows Server 2008 и 2008 R2

Используйте следующую процедуру для возведения из относительный идентификатор (RID) пулов, что хозяин операций RID выделит после восстановления контроллера домена. Изменение значения доступные пулы RID, гарантирует, что нет контроллера домена выделяет RID для субъекта безопасности, который был создан после резервного копирования, который был использован для восстановления домена. 

## <a name="about-active-directory-rid-pools-and-ridavailablepool"></a>О пулы RID Active Directory и rIDAvailablePool

Каждый домен имеет объект **CN = RID Manager$, CN = System, DC**=<*имя_домена*>. Этот объект имеет атрибут с именем **rIDAvailablePool**. Это значение атрибута поддерживает глобального пространства RID для всего домена. Значение равно большое целое число с верхней и нижней частей. Верхняя часть определяет количество субъектов безопасности, которые могут быть выделены для каждого домена (0x3FFFFFFF или чуть более 1 млрд). Нижняя часть — количество идентификаторов RID, которые были выделены в домене. 
  
> [!NOTE]
> В Windows Server 2016 и 2012 количество субъектов безопасности, которые могут быть распределены увеличивается до чуть более 2 миллиардов. Дополнительные сведения см. в разделе [управление RID issuance](https://technet.microsoft.com/library/jj574229.aspx). 
  
- Пример значения: 4611686014132422708  
- Младшей части: 2100 (в начале следующего пула относительных ИДЕНТИФИКАТОРОВ)  
- Верхняя часть. 1073741823 (общее число идентификаторов RID, которые могут быть созданы в домене)  
  
Если увеличить значение большое целое число, можно увеличить значение младшей части. Например при добавлении 100 000 значению образец 4611686014132422708 суммы 4611686014132522708 новый младшей части является 102100. Это означает, что далее пул относительных ИДЕНТИФИКАТОРОВ, который будет выделен с хозяином RID будет начинаться с 102100 вместо 2100. 
  
### <a name="to-raise-the-value-of-available-rid-pools-using-adsiedit-and-the-calculator"></a>Чтобы увеличить значение доступные пулы RID, с помощью adsiedit и калькулятор

1. Откройте диспетчер сервера, щелкните **средства** и нажмите кнопку **"Редактирование ADSI"**.
2. Щелкните правой кнопкой мыши, выберите **подключиться к** и подключение этого контекста именования по умолчанию и нажмите кнопку **ОК**.
   !["Редактирование ADSI"](media/AD-Forest-Recovery-Raise-RID-Pool/adsi1.png) 
3. Перейдите по следующему пути различающееся имя: **CN = RID Manager$, CN = System, DC =<domain name>**.
   !["Редактирование ADSI"](media/AD-Forest-Recovery-Raise-RID-Pool/adsi2.png) 
3. Щелкните правой кнопкой мыши и выберите свойства CN = RID Manager$. 
4. Выберите атрибут **rIDAvailablePool**, нажмите кнопку **изменить**и скопировать в буфер обмена значение большое целое число.
   !["Редактирование ADSI"](media/AD-Forest-Recovery-Raise-RID-Pool/adsi3.png)  
5. Запустить калькулятор и из **представление** меню, выберите **научных режим**. 
6. Добавьте текущее значение 100 000.
   !["Редактирование ADSI"](media/AD-Forest-Recovery-Raise-RID-Pool/adsi4.png) 
7. С помощью клавиш ctrl-c, или **копирования** команду **изменить** меню, скопируйте значение в буфер обмена. 
8. В диалоговом окне редактирования adsiedit вставьте это значение. 
   !["Редактирование ADSI"](media/AD-Forest-Recovery-Raise-RID-Pool/adsi5.png) 
9. Нажмите кнопку **ОК** в диалоговом окне и **применить** в окне свойств, чтобы обновить **rIDAvailablePool** атрибута. 
  
### <a name="to-raise-the-value-of-available-rid-pools-using-ldp"></a>Чтобы увеличить значение доступные пулы RID, с помощью программы LDP  
  
1. В командной строке введите следующую команду и нажмите клавишу ВВОД:  
   **ldp**  
2. Нажмите кнопку **подключения**, нажмите кнопку **Connect**, введите имя диспетчера RID и нажмите кнопку **ОК**. 
   ![LDP](media/AD-Forest-Recovery-Raise-RID-Pool/ldp1.png)
3. Нажмите кнопку **подключения**, нажмите кнопку **привязать**выберите **привязать с учетными данными** и введите свои учетные данные администратора и нажмите кнопку **ОК**. 
   ![LDP](media/AD-Forest-Recovery-Raise-RID-Pool/ldp2.png)
4. Нажмите кнопку **представление**, нажмите кнопку **дерева** и введите следующий путь различающееся имя:  CN = RID Manager$, CN = System, DC =*доменное имя*  
   ![LDP](media/AD-Forest-Recovery-Raise-RID-Pool/ldp3.png)
5. Нажмите кнопку **Обзор**, а затем нажмите кнопку **изменить**. 
6. Добавление 100 000 текущему **rIDAvailablePool** значение, а затем введите суммы в **значения**. 
7. В **Dn**, тип `cn=RID Manager$,cn=System,dc=` *< имя домена\>*. 
8. В **изменить атрибут записи**, тип `rIDAvailablePool`. 
9. Выберите **замените** как операции, а затем нажмите кнопку **ввод**.
   ![LDP](media/AD-Forest-Recovery-Raise-RID-Pool/ldp4.png) 
10. Нажмите кнопку **запуска** для выполнения операции. Нажмите кнопку **Закрыть**.
11. Проверка изменения, нажмите кнопку **представление**, нажмите кнопку **дерева**, а затем введите следующий путь различающееся имя:   CN = RID Manager$, CN = System, DC =*доменное имя*.   Проверьте **rIDAvailablePool** атрибута. 
   ![LDP](media/AD-Forest-Recovery-Raise-RID-Pool/ldp5.png)

## <a name="next-steps"></a>Следующие шаги

- [Руководство по восстановлению из леса AD](AD-Forest-Recovery-Guide.md)
- [Восстановление леса AD - процедуры](AD-Forest-Recovery-Procedures.md)
