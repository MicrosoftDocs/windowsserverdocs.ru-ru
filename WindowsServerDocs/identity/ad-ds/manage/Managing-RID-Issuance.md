---
ms.assetid: aac117a7-aa7a-4322-96ae-e3cc22ada036
title: Управление выдачей RID
author: MicrosoftGuyJFlo
ms.author: joflore
manager: mtillman
ms.date: 05/31/2017
ms.topic: article
ms.prod: windows-server
ms.technology: identity-adds
ms.openlocfilehash: 0451917da46c94c9c637d1bb26d68e0c33d65be4
ms.sourcegitcommit: 3632b72f63fe4e70eea6c2e97f17d54cb49566fd
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/03/2020
ms.locfileid: "87518981"
---
# <a name="managing-rid-issuance"></a>Управление выдачей RID

>Область применения. Windows Server 2016, Windows Server 2012 R2, Windows Server 2012

В этом разделе описываются изменения, касающиеся роли FSMO "Хозяин RID", включая новые функциональные возможности хозяина RID в плане выдачи и мониторинга, а также способы анализа и устранения неполадок, связанных с выдачей RID.

- [Управление выдачей относительных идентификаторов](../../ad-ds/manage/Managing-RID-Issuance.md#BKMK_Manage)

- [Устранение неполадок, связанных с выдачей RID](../../ad-ds/manage/Managing-RID-Issuance.md#BKMK_Tshoot)

Дополнительные сведения можно найти в [блоге аскдс](/archive/blogs/askds/managing-rid-issuance-in-windows-server-2012).

## <a name="managing-rid-issuance"></a><a name="BKMK_Manage"></a>Управление выдачей RID
По умолчанию емкость домена составляет приблизительно один миллиард субъектов безопасности, таких как пользователи, группы и компьютеры. Естественно, не существует доменов с таким количеством активно используемых объектов. Однако служба поддержки Майкрософт сталкивалась с указанными ниже ситуациями.

- С помощью программного обеспечения для подготовки или сценариев администрирования случайно создавалось большое количество пользователей, групп и компьютеров.

- Делегированные пользователи создавали множество неиспользуемых групп безопасности и групп рассылки.

- Выполнялось понижение роли или восстановление множества контроллеров домена; очищался большой объем метаданных.

- Выполнялось восстановление лесов.

- Часто выполнялась операция InvalidateRidPool.

- Параметр реестра, отвечающий за размер блока RID, увеличивался некорректно.

Во всех этих ситуациях используются лишние идентификаторы RID, причем часто по ошибке. Через много лет в некоторых средах идентификаторы RID заканчивались, из-за чего приходилось выполнять миграцию в новый домен или восстанавливать лес.

В Windows Server 2012 решаются проблемы, связанные с выделением идентификаторов RID, которые стали актуальны только тогда, когда среды Active Directory достигли определенного возраста. К ним относятся более качественное ведение журнала событий, более подходящие ограничения и возможность возможного удвоения общего размера глобального пространства RID для домена.

### <a name="periodic-consumption-warnings"></a>Периодические предупреждения об использовании
В Windows Server 2012 реализовано отслеживание событий, связанных с глобальным пространством RID, которое позволяет своевременно получать предупреждения при достижении основных контрольных точек. Модель рассчитывает десятипроцентный уровень использования глобального пула и регистрирует в журнале событие при его достижении. Затем рассчитывается десятипроцентный уровень использования оставшегося пространства и цикл продолжается. По мере исчерпания глобального пространства RID события будут регистрироваться все чаще, так как каждый последующий десятипроцентный уровень будет достигаться быстрее (однако частота событий журнала ограничена одной записью в час). В журнал системных событий в каждом контроллере домена записывается событие предупреждения Directory-Services-SAM с кодом 16658.

При использовании 30-разрядного глобального пространства RID по умолчанию первое событие регистрируется при выделении 107 374 182<sup></sup>идентификаторов RID. Скорость регистрации событий увеличивается, пока не будет достигнута последняя контрольная точка на уровне 100 000 идентификаторов. Пр этом всего будет зарегистрировано 110 событий. При использовании 31-разрядного глобального пространства RID без блокировки цикл аналогичен: первое событие наступает при выделении 214 748 365 идентификаторов, а всего регистрируется 117 событий.

> [!IMPORTANT]
> Это непредвиденная ситуация: немедленно проанализируйте процессы создания пользователей, компьютеров и групп в домене. Создание более 100 миллионов объектов доменных служб Active Directory — это необычное явление.

![Выдача RID](media/Managing-RID-Issuance/ADDS_RID_TR_EventWaypoints2.png)

### <a name="rid-pool-invalidation-events"></a>События, связанные с недействительностью пула RID
Появились новые события, связанные с отменой локального пула RID контроллера домена. Они имеют информационный характер и вполне ожидаемы, особенно в связи с новыми функциональными возможностями виртуальных контроллеров пула. Подробные сведения о каждом событии см. в приведенном ниже списке событий.

### <a name="rid-block-size-limit"></a><a name="BKMK_RIDBlockMaxSize"></a>Ограничение на размер блока RID
Как правило, по запросу контроллера домена идентификаторы RID выделяются блоками по 500 идентификаторов. Это значение по умолчанию можно переопределить с помощью следующего параметра реестра REG_DWORD в контроллере домена:

```
HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\NTDS\RID Values
RID Block Size

```

До выпуска Windows Server 2012 максимальное значение этого параметра было ограничено только его типом DWORD (максимальное значение для которого составляет 0xffffffff, или 4 294 967 295). Это значение значительно больше общего размера глобального пространства RID. Иногда администраторы по ошибке или незнанию настраивали такие значения для размера блока RID, которые приводили к быстрому исчерпанию глобального пространства RID.

В Windows Server 2012 этому параметру реестра нельзя присвоить значение больше 15 000 в десятичной системе (0x3A98 в шестнадцатеричной). Это позволяет предотвратить непреднамеренное выделение большого количества идентификаторов RID.

Если задано значение, *превышающее* 15 000, оно считается равным 15 000, а контроллер домена при каждой перезагрузке записывает событие 16653 в журнал событий служб каталогов, пока значение не будет исправлено.

### <a name="global-rid-space-size-unlock"></a><a name="BKMK_GlobalRidSpaceUnlock"></a>Разблокирование размера глобального пространства RID
До выхода Windows Server 2012 общий размер глобального пространства RID был ограничен 2<sup>30</sup> (1 073 741 823) идентификаторами RID. При достижении этого предела создание новых идентификаторов безопасности было возможным только после миграции домена или восстановления леса, то есть в любом случае требовало аварийного восстановления. Начиная с версии Windows Server 2012, можно разблокировать 31-й<sup></sup> разряд, чтобы увеличить глобальный пул до 2 147 483 648 идентификаторов RID.

В доменных службах Active Directory этот параметр хранится в специальном скрытом атрибуте **SidCompatibilityVersion** в контексте RootDSE каждого контроллера домена. Этот атрибут недоступен для чтения с помощью ADSIEdit, LDP или других средств. Чтобы узнать, увеличилось ли глобальное пространство RID, найдите в журнале системных событий событие предупреждения с кодом 16655 от Directory-Services-SAM или используйте следующую команду Dcdiag:

```
Dcdiag.exe /TEST:RidManager /v | find /i "Available RID Pool for the Domain"

```

Если глобальный пул RID увеличен, то его доступный размер должен составлять 2 147 483 647 вместо 1 073 741 823 (значение по умолчанию). Пример:

![Выдача RID](media/Managing-RID-Issuance/ADDS_RID_TR_Dcdiag.png)

> [!WARNING]
> Это снятие ограничения предназначено *только* для предотвращения исчерпания пула RID, и к нему следует прибегать *только в сочетании* с принудительной установкой верхнего порога RID (см. следующий раздел). Не используйте его превентивно в средах, в которых остаются миллионы идентификаторов RID и которые имеют невысокий темп роста, так как идентификаторы безопасности, созданные на основе разблокированного пула RID, могут вызывать проблемы с совместимостью приложений.
>
> Операцию снятия ограничения нельзя отменить или откатить, кроме как полным восстановлением леса из более ранних резервных копий.

#### <a name="important-caveats"></a>Важные предостережения
Контроллеры домена Windows Server 2003 и Windows Server 2008 не могут выдавать идентификаторы RID, если в глобальном пуле RID разблокирован 31-й<sup></sup> разряд. Контроллеры домена Windows Server 2008 R2 *могут* использовать<sup>31-</sup> разрядный идентификатор RID, *но только в том случае, если* на них установлено исправление [KB 2642658](https://support.microsoft.com/kb/2642658) . Неподдерживаемые контроллеры домена без установленного исправления рассматривают разблокированный глобальный пул RID как исчерпанный.

Эта функция не применяется принудительно ни одним режимом работы домена, поэтому следите за тем, чтобы в домене были только контроллеры домена Windows Server 2012 или обновленные контроллеры домена Windows Server 2008 R2.

#### <a name="implementing-unlocked-global-rid-space"></a>Реализация разблокированного глобального пространства RID
Чтобы разблокировать пул RID, сделав его 31-разрядным<sup></sup>, после получения предупреждения о достижении верхнего порога RID (см. ниже), выполните указанные ниже действия.

1. Убедитесь в том, что роль хозяина RID выполняется на контроллере домена с ОС Windows Server 2012. Если это не так, перенесите эту роль в контроллер домена Windows Server 2012.

2. Запустите программу LDP.exe.

3. В меню **Подключение** выберите команду **Подключить** для хозяина RID с ОС Windows Server 2012, работающего через порт 389, а затем щелкните **Привязать** (необходимо быть администратором домена).

4. В меню **Обзор** выберите пункт **Изменить**.

5. Убедитесь в том, что поле **Различаемое имя (DN)** пустое.

6. В поле **изменить атрибут записи**введите:

    ```
    SidCompatibilityVersion
    ```

1. В поле **Значения** введите:

    ```
    1
    ```

2. Убедитесь в том, что в поле **Операция** выбран вариант **Добавление**, и нажмите кнопку **Ввод**. **Список записей** обновится.

3. Выберите параметры **Синхронный** и **Расширенный**, после чего нажмите кнопку **Выполнить**.

    ![Выдача RID](media/Managing-RID-Issuance/ADDS_RID_TR_LDPModify.png)

4. В случае успешного выполнения в окне выходных данных LDP появятся следующие результаты:

    ```
    ***Call Modify...
     ldap_modify_ext_s(Id, '(null)',[1] attrs, SvrCtrls, ClntCtrls);
    modified "".

    ```

    ![Выдача RID](media/Managing-RID-Issuance/ADDS_RID_TR_LDPModifySuccess.png)

5. Проверьте, увеличился ли глобальный пул RID, проверив наличие информационного события Directory-Services-SAM с кодом 16655 в журнале системных событий контроллера домена.

### <a name="rid-ceiling-enforcement"></a>Принудительная установка верхнего порога RID
С целью обеспечения защиты и оповещения администраторов в Windows Server 2012 введен искусственный верхний порог для глобального пространства RID на уровне десяти (10) процентов от оставшегося количества идентификаторов RID. Когда до этого искусственного порога остается один (1) процент, контроллеры домена, запрашивающие пулы RID, записывают событие предупреждения Directory-Services-SAM с кодом 16656 в свои журналы системных событий. При достижении десятипроцентного верхнего порога на компьютере с ролью FSMO хозяина RID он записывает событие Directory-Services-SAM с кодом 16657 в свой журнал системных событий и перестает выделять пулы RID до тех пор, пока верхний порог не будет переопределен. Поэтому администратор вынужден оценить состояние хозяина RID в домене и устранить избыточное выделение RID, если таковое имеется. Это также позволяет защитить домены от полного исчерпания пространства RID.

Пороговое значение жестко запрограммировано на уровне десяти процентов от оставшегося доступного пространства RID. То есть порог считается достигнутым, когда хозяин RID выделяет такое количество идентификаторов RID, которое соответствует 90 процентам глобального пространства RID.

- Для доменов по умолчанию первое срабатывание происходит на уровне 2<sup>30</sup>-1 * 0,90 = 966 367 640 (или когда остается 107 374 183 идентификаторов RID).

- Для доменов с разблокированным 31-разрядным пространством RID срабатывание происходит на уровне 2<sup>31</sup>-1 * 0,90 = 1 932 735 282 (или когда остается 214 748 365 идентификаторов RID).

При достижении порогового значения хозяин RID присваивает атрибуту Active Directory **msDS-RIDPoolAllocationEnabled** (общее имя **ms-DS-RID-Pool-Allocation-Enabled**) значение FALSE для следующего объекта:

CN = RID Manager $, CN = System, DC =*<domain>*

Это приводит к записи в журнал события с кодом 16657 и прекращению выдачи блоков RID всем контроллерам домена. Контроллеры домена продолжают использовать все оставшиеся пулы RID, которые уже выданы им.

Чтобы снять блокировку и разрешить дальнейшее выделение пулов RID, установите значение атрибута равным TRUE. При следующем выделении RID хозяином RID атрибут вернется к значению по умолчанию NOT SET. После этого пороговое значение больше применяться не будет и в конечном итоге глобальное пространство RID будет исчерпано, из-за чего потребуется восстановление леса или миграция домена.

#### <a name="removing-the-ceiling-block"></a>Снятие блокировки при достижении верхнего порога
Чтобы снять блокировку при достижении искусственного верхнего порога, выполните указанные ниже действия.

1. Убедитесь в том, что роль хозяина RID выполняется на контроллере домена с ОС Windows Server 2012. Если это не так, перенесите эту роль в контроллер домена Windows Server 2012.

2. Запустите программу LDP.exe.

3. В меню **Подключение** выберите команду *Подключить* для хозяина RID с ОС Windows Server 2012, работающего через порт 389, а затем щелкните **Привязать** (необходимо быть администратором домена).

4. В меню **Вид** выберите пункт **Дерево**, а затем в поле **Базовое DN** выберите собственный контекст именования домена хозяина RID. Нажмите кнопку **ОК**.

5. На панели навигации откройте контейнер **CN=System** и выберите объект **CN=RID Manager$**. Щелкните его правой кнопкой мыши и выберите команду **Изменить**.

6. В поле "Изменить атрибут записи" введите:

    ```
    MsDS-RidPoolAllocationEnabled
    ```

7. В поле **Значения** введите заглавными буквами:

    ```
    TRUE
    ```

8. В разделе **Операция** выберите пункт **Замена** и нажмите кнопку **Ввод**. **Список записей** обновится.

9. Выберите параметры **Синхронный** и **Расширенный**, после чего нажмите кнопку **Выполнить**.

    ![Выдача RID](media/Managing-RID-Issuance/ADDS_RID_TR_LDPRaiseCeiling.png)

10. В случае успешного выполнения в окне выходных данных LDP появятся следующие результаты:

    ```
    ***Call Modify...
    ldap_modify_ext_s(ld, 'CN=RID Manager$,CN=System,DC=<domain>',[1] attrs, SvrCtrls, ClntCtrls);
    Modified "CN=RID Manager$,CN=System,DC=<domain>".

    ```

    ![Выдача RID](media/Managing-RID-Issuance/ADDS_RID_TR_LDPRaiseCeilingSuccess.png)

### <a name="other-rid-fixes"></a>Другие исправления, касающиеся относительных идентификаторов
В предыдущих версиях операционной системы Windows Server при отсутствии атрибута rIDSetReferences происходила утечка пула RID. Чтобы устранить эту проблему на контроллерах домена под управлением Windows Server 2008 R2, установите исправление из [KB 2618669](https://support.microsoft.com/kb/2618669).

### <a name="unfixed-rid-issues"></a>Неустраненные неполадки, связанные с относительными идентификаторами
При сбоях создания учетных записей происходит утечка идентификаторов RID. Если создать учетную запись не удалось, идентификатор RID все равно используется. Распространенным примером является создание пользователя с паролем, который не отвечает требованиям к сложности.

### <a name="rid-fixes-for-earlier-versions-of-windows-server"></a>Исправления, касающиеся относительных идентификаторов в предыдущих версиях Windows Server
Все описанные выше исправления и изменения реализованы в исправлениях, выпущенных для Windows Server 2008 R2. В настоящее время новые исправления для Windows Server 2008 не планируются к выпуску.

## <a name="troubleshooting-rid-issuance"></a><a name="BKMK_Tshoot"></a>Устранение неполадок, связанных с выдачей RID

### <a name="introduction-to-troubleshooting"></a>Общие сведения об устранении неполадок
Устранение неполадок с выдачей RID требует логического линейного подхода. Если вы не проверяете журналы событий тщательно на наличие предупреждений и ошибок, вызванных относительными идентификаторами, то первым признаком проблемы, скорее всего, будут сбои при создании учетных записей. Самым важным при устранении неполадок с выдачей RID является понимание того, когда тот или иной симптом является ожидаемым, а когда нет. Многие проблемы с выдачей RID могут затрагивать только один контроллер домена и не имеют отношения к улучшению компонентов. Приведенная ниже простая схема может помочь прояснить процесс принятия решений.

![Выдача RID](media/Managing-RID-Issuance/adds_rid_issuance_troubleshooting.png)

### <a name="troubleshooting-options"></a>Способы устранения неполадок

#### <a name="logging-options"></a>Параметры ведения журнала
Все записи, связанные с выдачей RID, регистрируются в журнале системных событий, а источником их является Directory-Services-SAM. По умолчанию ведение журнала включено, и для него настроена максимальная степень подробности. Если в журнале нет записей, которые связанны с изменениями в компонентах, реализованными в Windows Server 2012, проблемы следует решать как классические (то есть до выпуска Windows Server 2012) неполадки с выдачей RID, возникавшие в Windows 2008 R2 или более ранних версиях.

#### <a name="utilities-and-commands-for-troubleshooting"></a>Служебные программы и команды для устранения неполадок
Для устранения неполадок, объяснения которым нет в упомянутых выше журналах, в особенности проблем выдачи RID в предыдущих версиях ОС, используйте в качестве отправной точки средства из следующего списка:

- Dcdiag.exe

- Repadmin.exe

- Network Monitor 3.4

### <a name="general-methodology-for-troubleshooting-domain-controller-configuration"></a>Общая методика устранения неполадок, связанных с конфигурацией контроллеров домена

1. Вызвана ли ошибка очевидной проблемой с разрешениями или доступностью контроллера домена?

    1. Пытаетесь ли вы создать субъект безопасности, не имея необходимых разрешений? Проверьте в выходных данных наличие ошибок отказа в доступе.

    2. Доступен ли контроллер домена? Изучите полученную ошибку либо сообщения о доступности LDAP или контроллеров домена.

2. Упоминаются ли в полученном сообщении об ошибке относительные идентификаторы и достаточно ли это сообщение конкретно, чтобы его можно было использовать в качестве инструкции? Если да, то следуйте этой инструкции.

3. Упоминаются ли в полученном сообщении об ошибке относительные идентификаторы, но при этом оно является недостаточно конкретным? Пример: "Не удается создать объект, так как службе каталогов не удалось выделить относительный идентификатор".

    1. Изучите журнал системных событий на контроллере домена для "устаревших" (пред-Windows Server 2012) событий RID, подробно описанных в [запросе пула RID](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/ee406152(v=ws.10)) (16642, 16643, 16644, 16645, 16656).

    2. Проверьте журнал системных событий в контроллере домена и хозяине RID на наличие новых событий, связанных с блокировкой, которые описаны ниже в этом разделе (16655, 16656, 16657).

    3. Проверьте работоспособность репликации Active Directory с помощью средства Repadmin.exe и доступность хозяина RID с помощью команды **Dcdiag.exe /test:ridmanager /v**. Включите запись двухстороннего сетевого мониторинга между контроллером домена и хозяином RID, если этих проверок оказалось недостаточно.

### <a name="troubleshooting-specific-problems"></a>Диагностика определенных проблем

В журнале системных событий контроллера домена Windows Server 2012 регистрируются указанные ниже новые сообщения. Системы автоматического отслеживания работоспособности Active Directory, такие как System Center Operations Manager, должны вести наблюдение за этими событиями, так как все они важны, а некоторые являются признаком серьезных проблем с доменом.

| Идентификатор события | 16653 |
|--|--|
| Источник | Directory-Services-SAM |
| Статус | Предупреждение |
| Сообщение | Размер пула для идентификаторов учетных записей (относительных идентификаторов (RID)), настроенный администратором, превышает поддерживаемое максимальное значение. Если контроллер домена является хозяином RID, будет использоваться максимальное значение %1.<p>Дополнительные сведения см. в разделе [Ограничение на размер блока RID](../../ad-ds/manage/../../ad-ds/manage/../../ad-ds/manage/../../ad-ds/manage/Managing-RID-Issuance.md#BKMK_RIDBlockMaxSize). |
| Примечания и решение | Максимальное значение размера блока RID теперь составляет 15 000 в десятичной системе (3A98 в шестнадцатеричной). Контроллер домена не может запросить более 15 000 идентификаторов RID. Это событие регистрируется при каждой загрузке, пока не будет задано значение, не превышающее максимальное. |

| Идентификатор события | 16654 |
|--|--|
| Источник | Directory-Services-SAM |
| Статус | Informational |
| Сообщение | Пул идентификаторов учетных записей (относительных идентификаторов (RID)) сделан недействительным. Такое может произойти в следующих ожидаемых случаях:<p>1. контроллер домена восстанавливается из резервной копии.<p>2. контроллер домена, работающий на виртуальной машине, восстанавливается из моментального снимка.<p>3. администратор вручную сделает пул недействительным.<p>Дополнительные сведения см. в разделе https://go.microsoft.com/fwlink/?LinkId=226247. |
| Примечания и решение | Если это событие является непредвиденным, свяжитесь со всеми администраторами домена и выясните, кто из них выполнил действие. Журнал событий служб каталогов также содержит дополнительную информацию о том, когда было выполнено одно из этих действий. |

| Идентификатор события | 16655 |
|--|--|
| Источник | Directory-Services-SAM |
| Статус | Informational |
| Сообщение | Глобальный максимум идентификаторов учетных записей (относительных идентификаторов) был увеличен до %1. |
| Примечания и решение | Если это событие является непредвиденным, свяжитесь со всеми администраторами домена и выясните, кто из них выполнил действие. Это событие указывает на увеличение общего размера пула RID выше значения 2<sup>30</sup> по умолчанию и может возникать только в результате действия администратора, но не автоматически. |

| Идентификатор события | 16656 |
|--|--|
| Источник | Directory-Services-SAM |
| Статус | Предупреждение |
| Сообщение | Глобальный максимум идентификаторов учетных записей (относительных идентификаторов) был увеличен до %1. |
| Примечания и решение | Требуется действие! Для этого контроллера домена выделен пул идентификаторов учетных записей (относительных идентификаторов). Значение пула указывает на то, что этот домен использовал существенную часть всех доступных идентификаторов учетных записей.<p>Механизм защиты активируется, когда домен достигает следующего порогового значения для всех доступных идентификаторов учетной записи: %1. Он предотвращает создание учетных записей до тех пор, пока администратор вручную не включит выделение идентификаторов учетных записей на контроллере домена с ролью "RID-мастер".<p>Дополнительные сведения см. в разделе https://go.microsoft.com/fwlink/?LinkId=228610. |

| Идентификатор события | 16657 |
|--|--|
| Источник | Directory-Services-SAM |
| Статус | Error |
| Сообщение | Требуется действие! Этот домен использовал существенную часть всех доступных идентификаторов учетных записей (относительных идентификаторов). Механизм защиты активирован, так как общее количество доступных идентификаторов учетной записи меньше: X% [аргумент искусственного потолка].<p>Он предотвращает создание учетных записей до тех пор, пока администратор вручную не включит выделение идентификаторов учетных записей на контроллере домена с ролью "RID-мастер".<p>Перед повторным включением создания учетных записей чрезвычайно важно выполнить определенные диагностические процедуры, чтобы убедиться, что домен не использует идентификаторы учетных записей со слишком высокой скоростью. Любые обнаруженные проблемы необходимо устранить до повторного включения создания учетных записей.<p>Если не исправить причины использования идентификаторов учетных записей со слишком большой скоростью, идентификаторы учетных записей в домене могут быть исчерпаны, после чего создание учетных записей в этом домене будет безвозвратно отключено.<p>Дополнительные сведения см. в разделе https://go.microsoft.com/fwlink/?LinkId=228610. |
| Примечания и решение | Свяжитесь со всеми администраторами домена и сообщите им о том, что дальнейшее создание субъектов безопасности в этом домене невозможно до тех пор, пока эта блокировка не будет переопределена. Подробнее о переопределении блокировки и возможности увеличения общего размера пула RID см. в разделе [Разблокирование размера глобального пространства RID](../../ad-ds/manage/../../ad-ds/manage/../../ad-ds/manage/../../ad-ds/manage/Managing-RID-Issuance.md#BKMK_GlobalRidSpaceUnlock). |

| Идентификатор события | 16658 |
|--|--|
| Источник | Directory-Services-SAM |
| Статус | Предупреждение |
| Сообщение | Это событие представляет собой периодическое обновление общего количества оставшихся доступными идентификаторов учетных записей (относительных идентификаторов). Количество оставшихся идентификаторов учетной записи приблизительно: %1.<p>Идентификаторы учетных записей используются при создании учетных записей. Когда они заканчиваются, в домене становится невозможно создавать новые учетные записи.<p>Дополнительные сведения см. в разделе https://go.microsoft.com/fwlink/?LinkId=228745. |
| Примечания и решение | Свяжитесь со всеми администраторами домена и сообщите им о том, что использование RID превысило контрольную точку. Определите, является ли это событие ожидаемым, изучив закономерности создания субъектов безопасности. Наступление этого события является крайне маловероятным, так как оно означает, что выделено по крайней мере 100 миллионов идентификаторов RID. |

## <a name="see-also"></a>См. также:

- [Управление выдачей RID в Windows Server 2012](/archive/blogs/askds/managing-rid-issuance-in-windows-server-2012)
