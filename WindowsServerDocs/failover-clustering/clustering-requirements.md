---
title: Требования к отказоустойчивой кластеризации оборудования и варианты хранилища
description: Требования к оборудованию и варианты хранилища для создания отказоустойчивого кластера.
ms.prod: windows-server-threshold
ms.topic: article
author: JasonGerend
ms.author: jgerend
ms.technology: storage-failover-clustering
ms.date: 04/26/2018
ms.localizationpriority: medium
ms.openlocfilehash: e6eb6f2acd420ae657a5c1b698e9733751378552
ms.sourcegitcommit: ed27ddbe316d543b7865bc10590b238290a2a1ad
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/09/2019
ms.locfileid: "65476077"
---
# <a name="failover-clustering-hardware-requirements-and-storage-options"></a>Требования к отказоустойчивой кластеризации оборудования и варианты хранилища

Относится к: Windows Server 2019 г., Windows Server 2016, Windows Server 2012 R2, Windows Server 2012

Для создания отказоустойчивого кластера требуется следующее оборудование. Чтобы оборудование поддерживалось программным обеспечением Майкрософт, оно все должно быть сертифицированным для используемой версии Windows Server, а решение отказоустойчивого кластера должно пройти все тесты в мастере проверки конфигурации. Подробнее о проверке отказоустойчивого кластера см. в разделе [Проверка оборудования для отказоустойчивого кластера](<https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2012-r2-and-2012/jj134244(v%3dws.11)>).

- **Серверы**. Рекомендуется использовать набор совпадающих компьютеров, содержащих одинаковые или похожие компоненты.
- **Сетевые адаптеры и кабели (для передачи данных по сети)** . Если используется iSCSI, то каждый сетевой адаптер должен быть выделенным для подключения к сети или для iSCSI, но не для того и другого одновременно.

    Избегайте единственных точек отказа в сетевой инфраструктуре, соединяющей узлы кластера. Например, можно соединить узлы кластера несколькими независимыми сетями. Кроме того можно соединить узлы кластера с одной сетью, который создается с объединенные сетевые адаптеры, дублированных коммутаторах, маршрутизаторах и аналогичном оборудовании, единых точек отказа.

    >[!NOTE]
    >Если узлы кластера соединены одной сетью, сеть пройдет тест на избыточность мастера проверки конфигурации. Однако отчет мастера будет включать предупреждение, что в сети не должно быть единственных точек отказа.

- **Контроллеры устройств или соответствующие адаптеры для хранилища**.

  - **Serial Attached SCSI или Fibre Channel**. Если используется Serial Attached SCSI или Fibre Channel во всех кластерных серверах, то все элементы стека хранилища должны быть идентичными. Это обязательное поле совпадала программное обеспечение multipath I/O (MPIO) и что программное обеспечение определенного модуля устройства (DSM) быть одинаковыми. Рекомендуется контроллеры запоминающих устройств — шины адаптера шины, драйверы HBA и встроенное по адаптера ШИНЫ —, вложенные в хранилище кластера должно совпадать. При использовании различных HBA следует уточнить у поставщика хранилища, обеспечиваются ли при этом поддерживаемые или рекомендуемые конфигурации.
  - **iSCSI**. При использовании iSCSI у каждого кластерного сервера должно быть не менее одного сетевого адаптера или адаптера шины, предназначенного исключительно для хранилища кластера. Сеть, используемая для iSCSI, не может использоваться для сетевого взаимодействия. На всех кластеризованных серверах сетевые адаптеры для подключения к целевому хранилищу iSCSI должны быть одинаковыми. Рекомендуется использовать адаптеры Gigabit Ethernet или с более высокой пропускной способностью.
- **Хранилище**. Необходимо использовать [Storage Spaces Direct](../storage/storage-spaces/storage-spaces-direct-overview.md) или общего хранилища, которая совместима с Windows Server 2012 R2 или Windows Server 2012. Можно использовать общее хранилище, к которой подключен, а также, можно использовать как общее хранилище общих папок SMB 3.0 для серверов, работающих под управлением Hyper-V, настроенные в отказоустойчивом кластере. Дополнительные сведения см. в разделе [Развертывание Hyper-V через SMB](<https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2012-r2-and-2012/jj134187(v%3dws.11)>).

    В большинстве случаев в подключенном хранилище должно быть несколько отдельных дисков (логических номеров устройств, или LUN), настроенных на аппаратном уровне. Для некоторых кластеров один из дисков работает как диск-свидетель (см. в конце этого подраздела). На других дисках содержатся файлы, необходимые для кластерных ролей (ранее называвшихся кластеризованными службами или приложениями). К хранилищу предъявляются следующие требования.

  - Для использования собственной поддержки дисков, включенной в компонент отказоустойчивого кластера, применяйте базовые, а не динамические диски.
  - Мы рекомендуем форматировать разделы с использованием файловой системой NTFS. Если вы используете общие тома кластера (CSV), их разделы должны иметь формат NTFS.

    >[!NOTE]
    >Если в конфигурации кворума используется диск-свидетель, его можно отформатировать в NTFS или в Resilient File System (ReFS).

  - Для разделения диска на разделы можно использовать основную загрузочную запись (MBR) или таблицу разделов GPT.

    Диск-свидетель — это диск в хранилище кластера, предназначенная для хранения копии базы данных конфигурации кластера. Отказоустойчивый кластер имеет диск-свидетель, только если он настроен в конфигурации кворума. Дополнительные сведения см. в разделе [понимание кворума в Storage Spaces Direct](../storage/storage-spaces/understand-quorum.md).

## <a name="hardware-requirements-for-hyper-v"></a>Требования к оборудованию для Hyper-V

Если вы создаете отказоустойчивый кластер с кластерными виртуальными машинами, то серверы кластера должны отвечать требованиям к оборудованию для роли Hyper-V. Для Hyper-V требуется 64-разрядный процессор, включающий следующие возможности.

- Виртуализация с использованием оборудования. Это возможно на процессорах, допускающих виртуализацию, а именно на процессорах с технологией Intel Virtualization Technology (Intel VT) или AMD Virtualization (AMD-V).
- Должна быть доступна и включена технология аппаратного предотвращения выполнения данных (DEP). То есть необходимо включить атрибут Intel XD (атрибут отключения выполнения) или AMD NX (атрибут запрета выполнения).

Дополнительные сведения о роли Hyper-V см. в статье [Обзор Hyper-V](<https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2012-r2-and-2012/hh831531(v%3dws.11)>).

## <a name="deploying-storage-area-networks-with-failover-clusters"></a>Развертывание сетей хранения данных с отказоустойчивыми кластерами

При развертывании сети хранения данных (SAN) с отказоустойчивым кластером руководствуйтесь следующими рекомендациями.

- **Подтвердите совместимость хранилища**. Обратитесь к производителям и поставщикам, чтобы подтвердить, что хранилище, включая драйверы, встроенное ПО и ПО, используемое для хранилища, совместимо с отказоустойчивыми кластерами в используемой версии Windows Server.
- **Изолируйте запоминающие устройства по одному кластеру на устройство**. Серверы из различных кластеров не должны иметь доступа к одним и тем же запоминающим устройствам. В большинстве случаев LUN, используемый для одного набора серверов кластера, должен быть изолирован от всех остальных серверов с помощью маски или зонирования LUN.
- **Рассмотрите использование ПО многоканального ввода-вывода или объединенных сетевых адаптеров**. В архитектуре хранилищ с высокой доступностью можно развернуть отказоустойчивые кластеры с несколькими адаптерами шины, используя ПО многоканального ввода-вывода или объединенных сетевых адаптеров (что также называется отказоустойчивой балансировкой нагрузки — LBFO). Это обеспечивает максимальный уровень резервирования и доступности. Для Windows Server 2012 R2 или Windows Server 2012 многоканальное решение должно основываться на Microsoft Multipath I/O (MPIO). Поставщики оборудования обычно предоставляют модуль MPIO для конкретного устройства (DSM), но в комплект поставки операционной системы Windows Server также входят один или несколько модулей DSM.

    Подробнее о LBFO см. в разделе [Обзор объединения Сетевых карт](https://docs.microsoft.com/windows-server/networking/technologies/nic-teaming/nic-teaming) в технической библиотеке Windows Server.

    >[!IMPORTANT]
    >Некоторые адаптеры шины и программное обеспечение многоканального ввода-вывода сильно зависят от версий. При реализации многоканального решения для кластера следует проконсультироваться с поставщиком оборудования, чтобы выбрать правильные адаптеры, встроенное программное обеспечение и программное обеспечение для используемой версии Windows Server.

- **Рассмотрите использование дисковых пространств**. Если планируется развертывание хранилища serial attached SCSI (SAS) clustered, настраивается с помощью дисковых пространств, см. в разделе [Deploy Clustered Storage Spaces](<https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2012-r2-and-2012/jj822937(v%3dws.11)>) требований.

## <a name="more-information"></a>Дополнительные сведения

- [Отказоустойчивая кластеризация](failover-clustering.md)
- [Дисковые пространства](<https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2012-r2-and-2012/hh831739(v%3dws.11)>)
- [Использование гостевой кластеризации для высокой доступности](<https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2012-r2-and-2012/dn440540(v%3dws.11)>)