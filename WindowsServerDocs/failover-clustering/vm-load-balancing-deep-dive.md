---
description: См. Дополнительные сведения о балансировке нагрузки виртуальных машин.
ms.assetid: 5b5bab7a-727b-47ce-8efa-1d37a9639cba
title: Подсистема балансировки нагрузки виртуальных машин — подробное углубление
ms.topic: article
manager: eldenc
ms.author: johnmar
author: JasonGerend
ms.date: 09/19/2016
ms.openlocfilehash: 719aad65d5b4683e7c3a4472ae29098522c89f2e
ms.sourcegitcommit: 65b6de6b44d41f1180c45db11cdd60cb2a093b46
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/10/2020
ms.locfileid: "97040542"
---
# <a name="virtual-machine-load-balancing-deep-dive"></a>Подсистема балансировки нагрузки виртуальных машин — подробное углубление

> Применяется к: Windows Server 2019, Windows Server 2016

[Функция балансировки нагрузки виртуальной машины](vm-load-balancing-overview.md) оптимизирует использование узлов в отказоустойчивом кластере. В этом документе описывается настройка и Управление балансировкой нагрузки виртуальных машин.

## <a name="heuristics-for-balancing"></a><a id="heuristics-for-balancing"></a>Эвристика для балансировки
Балансировка нагрузки виртуальных машин оценивает загрузку узла на основе следующих эвристик:
1. Текущая **нехватка памяти**: память является наиболее распространенным ограничением ресурсов на узле Hyper-V
2. **Использование** ЦП усредненного узла в течение 5-минутного периода: устранение чрезмерного зафиксированного узла в кластере

## <a name="controlling-the-aggressiveness-of-balancing"></a><a id="controlling-aggressiveness-of-balancing"></a>Управление интенсивностью балансировки
Интенсивность балансировки, основанная на эвристике памяти и ЦП, может быть настроена с помощью общего свойства "Аутобаланцерлевел" кластера. Для управления интенсивностью выполните следующую команду в PowerShell:

```PowerShell
(Get-Cluster).AutoBalancerLevel = <value>
```

| аутобаланцерлевел | Интенсивность | Поведение |
|-------------------|----------------|----------|
| 1 (по умолчанию) | Низкий | Перемещать, когда узел больше 80% загружен |
| 2 | Средний | Перемещать, когда узел больше 70% загружен |
| 3 | Высокий | Среднее число узлов и перемещение при превышении на 5% выше среднего |

![Рисунок PowerShell по настройке интенсивности балансировки](media/vm-load-balancing/detailed-VM-load-balancing-1.jpg)

## <a name="controlling-vm-load-balancing"></a>Управление балансировкой нагрузки виртуальных машин
Балансировка нагрузки виртуальных машин включена по умолчанию, и, когда происходит балансировка нагрузки, можно настроить общее свойство кластера "Аутобаланцермоде". Для контроля за балансом распределения узлов в кластере:

### <a name="using-failover-cluster-manager"></a>Использование диспетчер отказоустойчивости кластеров:
1. Щелкните правой кнопкой мыши имя кластера и выберите параметр "Свойства" в раскрывающемся списке  ![ Выбор свойства кластера с помощью Диспетчер отказоустойчивости кластеров](media/vm-load-balancing/detailed-VM-load-balancing-2.jpg)

2.  Выберите область "балансировщик", ![ выбрав параметр балансировщика в Диспетчер отказоустойчивости кластеров](media/vm-load-balancing/detailed-VM-load-balancing-3.jpg)

### <a name="using-powershell"></a>С помощью PowerShell:
Выполните следующую команду:
```powershell
(Get-Cluster).AutoBalancerMode = <value>
```

|аутобаланцермоде |Поведение|
|:----------------:|:----------:|
|0| Выключено|
|1| Балансировка нагрузки при присоединении узла|
|2 (по умолчанию)| Балансировка нагрузки при соединении узлов и каждые 30 минут |

## <a name="vm-load-balancing-vs-system-center-virtual-machine-manager-dynamic-optimization"></a>Балансировка нагрузки виртуальных машин и System Center Virtual Machine Manager динамическая оптимизация
Функция равноправия узлов предоставляет встроенную функциональность, предназначенную для развертываний без System Center Virtual Machine Manager (SCVMM). Динамическая оптимизация SCVMM является рекомендуемым механизмом балансировки нагрузки виртуальных машин в кластере для развертываний SCVMM. Если включена динамическая оптимизация, SCVMM автоматически отключает балансировку нагрузки виртуальных машин Windows Server.

## <a name="see-also"></a>См. также:
* [Общие сведения о балансировке нагрузки виртуальной машины](vm-load-balancing-overview.md)
* [Отказоустойчивая кластеризация](failover-clustering-overview.md)
* [Обзор Hyper-V](../virtualization/hyper-v/Hyper-V-on-Windows-Server.md)
