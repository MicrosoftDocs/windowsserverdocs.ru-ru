---
ms.assetid: 5b5bab7a-727b-47ce-8efa-1d37a9639cba
title: 'Балансировка нагрузки виртуальной машины: глубокое погружение'
ms.prod: windows-server-threshold
ms.technology: storage-failover-clustering
ms.topic: article
author: bhattacharyaz
manager: eldenc
ms.author: subhatt
ms.date: 09/19/2016
ms.openlocfilehash: 50213cf47c2c59f1775ae704e82ed51794715ac0
ms.sourcegitcommit: 276a480b470482cba4682caa3df4cd07ba5b7801
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/24/2019
ms.locfileid: "66198552"
---
# <a name="virtual-machine-load-balancing-deep-dive"></a>Балансировка нагрузки виртуальной машины: глубокое погружение

> Относится к: Windows Server 2019, Windows Server 2016

[Функцию балансировки нагрузки виртуальной машины](vm-load-balancing-overview.md) оптимизируется использование узлов в отказоустойчивом кластере. В этом документе описывается, как для настройки и управления, балансировка нагрузки виртуальной Машины. 

## <a id="heuristics-for-balancing"></a>Эвристический подход для балансировки
Балансировка нагрузки виртуальной машины оценивает узла нагрузкой, основываясь на следующих эвристических методов:
1. Текущий **нехватки памяти**: Память — это наиболее общие ограничения ресурсов на узле Hyper-V
2. ЦП **использование** среднее значение за 5-минутное окно узла: Уменьшает узла в кластере, как стать перегруженное

## <a id="controlling-aggressiveness-of-balancing"></a>Управление интенсивность балансировки
Интенсивность балансировки на основе эвристики памяти и ЦП можно настроить на использование по общее свойство кластера «AutoBalancerLevel». Для управления Интенсивность в PowerShell выполните следующую команду:

```PowerShell
(Get-Cluster).AutoBalancerLevel = <value>
```

| AutoBalancerLevel | Интенсивность | Поведение |
|-------------------|----------------|----------|
| 1 (по умолчанию) | Низкий | Когда узел находится загружен более чем на 80% |
| 2 | Средний | Когда узел находится загружен более чем на 70% |
| 3 | Высокий | Среднее число узлов и перемещать, когда узел находится более чем на 5% выше среднего | 

![График ключевого PowerShell настройки интенсивность балансировки](media/vm-load-balancing/detailed-VM-load-balancing-1.jpg)

## <a name="controlling-vm-load-balancing"></a>Управление балансировки нагрузки для виртуальных Машин
Балансировка нагрузки виртуальной Машины включена по умолчанию и когда происходит Балансировка нагрузки можно настроить с общее свойство кластера «AutoBalancerMode». Для управления, когда распределение ресурсов узла сальдо кластера:

### <a name="using-failover-cluster-manager"></a>С помощью диспетчера отказоустойчивости кластеров:
1. Щелкните правой кнопкой мыши на имя кластера и выберите параметр «Свойства»  
    ![Рисунок выбора свойств для кластера с помощью диспетчера отказоустойчивости кластеров](media/vm-load-balancing/detailed-VM-load-balancing-2.jpg)

2.  Выберите на панели «Балансировщик»  
    ![Рисунок выбора параметра балансировки через диспетчер отказоустойчивости кластеров](media/vm-load-balancing/detailed-VM-load-balancing-3.jpg)

### <a name="using-powershell"></a>С помощью PowerShell.
Используйте следующую команду:
```powershell
(Get-Cluster).AutoBalancerMode = <value>
```

|AutoBalancerMode |Поведение| 
|:----------------:|:----------:|
|0| Отключено| 
|1| Балансировать нагрузку на узел соединения| 
|2 (по умолчанию)| Балансировать нагрузку на узел соединения и каждые 30 минут |

## <a name="vm-load-balancing-vs-system-center-virtual-machine-manager-dynamic-optimization"></a>Балансировка нагрузки виртуальных Машин vs. System Center Virtual Machine Manager динамической оптимизации
Функция распределение ресурсов узла, предоставляет готовую возможности, которые ориентирован развертываний без System Center Virtual Machine Manager (SCVMM). Рекомендуемый механизм для балансировки нагрузки виртуальной машины в кластере для развертываний SCVMM — SCVMM динамической оптимизации. SCVMM автоматически отключает балансировку нагрузки виртуальных Машин для Windows Server при включенной динамической оптимизации.

## <a name="see-also"></a>См. также
* [Обзор балансировки нагрузки виртуальной машины](vm-load-balancing-overview.md)
* [Отказоустойчивая кластеризация](failover-clustering-overview.md)
* [Обзор Hyper-V](../virtualization/hyper-v/Hyper-V-on-Windows-Server.md)
