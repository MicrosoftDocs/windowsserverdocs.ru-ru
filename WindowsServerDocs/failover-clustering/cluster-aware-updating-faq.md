---
ms.assetid: 6416d125-bcaf-433d-971a-2f0283bca2c2
title: Кластерное обновление — часто задаваемые вопросы
ms.topic: article
ms.prod: windows-server-threshold
manager: dongill
ms.author: jgerend
author: JasonGerend
ms.date: 04/28/2017
description: Ответы на часто задаваемые вопросы о кластерного обновления в Windows Server.
ms.openlocfilehash: f9009811093823554f16295cc1205f1b99ead93f
ms.sourcegitcommit: 0d0b32c8986ba7db9536e0b8648d4ddf9b03e452
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/17/2019
ms.locfileid: "59882525"
---
# <a name="cluster-aware-updating-frequently-asked-questions"></a>Кластерное обновление: Вопросы и ответы

> Относится к: Windows Server (полугодовой канал), Windows Server 2016, Windows Server 2012 R2, Windows Server 2012

[Кластерное обновление](cluster-aware-updating.md) \(CAU\) является компонентом, который координирует программного обеспечения обновления на всех серверах в отказоустойчивом кластере таким образом, чтобы не ограничивать доступность служб больше чем при плановой отработке отказа узла кластера. Для некоторых приложений, где возможна постоянная доступность \(например Hyper\-V с динамической миграцией или файловый сервер SMB 3.x с прозрачной отработкой отказа SMB\), CAU может координировать автоматическое обновление кластера, не затрагивая на доступность служб.

## <a name="does-cau-support-updating-storage-spaces-direct-clusters"></a>Поддерживает ли кластерное обновление обновление кластеров дисковых пространств?  
Да. Кластерное обновление поддерживает обновление [Storage Spaces Direct](../storage/storage-spaces/storage-spaces-direct-overview.md) кластеров независимо от типа развертывания: гиперконвергентной или со схождением. В частности оркестрации кластерное обновление гарантирует, что приостановка каждого узла кластера ожидает базовой кластерного дискового пространства работоспособным.

## <a name="does-cau-work-with-windowsserver-2008r2-or-windows7"></a>Работает ли кластерное обновление с Windows Server 2008 R2 или Windows 7?  
Нет. Кластерное обновление управляет обновлением операции только с компьютеров под управлением Windows Server 2016, Windows Server 2012 R2, Windows Server 2012, Windows 10, Windows 8.1 или Windows 8 кластера. Обновление отказоустойчивого кластера необходимо запустить Windows Server 2016, Windows Server 2012 R2 или Windows Server 2012.
  
## <a name="is-cau-limited-to-specific-clustered-applications"></a>Кластерное обновление ограничено определенными кластерными приложениями?  
Нет. Для кластерного обновления не важен тип кластерного приложения. Кластерное обновление используется кластер внешних\-обновление занимает положение над кластеризации командлеты PowerShell и API-интерфейсы. Таким образом кластерное обновление может управлять обновлением любой кластерной системы, настроенной в отказоустойчивом кластере Windows Server.  
  
> [!NOTE]  
> В настоящее время проверены и сертифицированы для CAU следующие: SMB, Hyper\-V, репликация DFS, пространства имен DFS, iSCSI и NFS.  
  
## <a name="does-cau-support-updates-from-microsoft-update-and-windows-update"></a>Поддерживает ли кластерное обновление обновление из Центра обновления Майкрософт и Центра обновления Windows?  
Да. По умолчанию кластерное обновление настраивается с подключаемым\-тем, что использует агент обновления Windows \(WUA\) API для служебных программ на узлах кластера. В параметрах инфраструктуры АГЕНТА можно настроить таким образом, чтобы указывать на Microsoft Update и Центр обновления Windows или Windows Server Update Services \(WSUS\) в качестве источника обновлений.  
  
## <a name="does-cau-support-wsus-updates"></a>Поддерживает ли кластерное обновление обновления WSUS?  
Да. По умолчанию кластерное обновление настраивается с подключаемым\-тем, что использует агент обновления Windows \(WUA\) API для служебных программ на узлах кластера. В параметрах инфраструктуры АГЕНТА можно настроить таким образом, чтобы указывать Microsoft Update и Центр обновления Windows или на локальном Windows Server Update Services \(WSUS\) сервер в качестве источника обновления.  
  
## <a name="can-cau-apply-limited-distribution-release-updates"></a>Способно ли кластерное обновление применять выпуски обновлений для ограниченного распространения?  
Да. Ограниченный выпуск \(LDR\) обновлений, также называемые исправлениями, не публикуются в центре обновления Майкрософт или центре обновления Windows, поэтому их не удается загрузить агент обновления Windows \(WUA\) подключите\-в том, что используется CAU по умолчанию.  
  
Тем не менее, CAU включает второй plug\-тем, что можно выбрать для применения исправлений. Это исправление plug\-в также можно настроить для применения не\-Microsoft драйверов, встроенного по и обновлений BIOS.  
  
## <a name="can-i-use-cau-to-apply-cumulative-updates"></a>Можно ли использовать CAU для применения накопительных пакетов обновлений?  
Да. Если накопительные пакеты обновлений представляют собой обновления выпуска для общего распространения или обновления LDR, CAU может применить их.  
  
## <a name="can-i-schedule-updates"></a>Можно запланировать обновления?  
Да. Кластерное обновление поддерживает следующие режимы обновления, оба из которых позволяют назначать расписание для установки обновлений:  
  
**SELF\-обновление** позволяет кластеру выполнять Самообновление в соответствии с указанным профилем и по регулярному расписанию, например период ежемесячного обслуживания. Вы также можете начать самостоятельный\-прогона по требованию в любое время. Чтобы включить self\-режима обновления, необходимо добавить кластерную роль CAU в кластере. CAU self\-обновление функции действует, как любые другие кластерные рабочие нагрузки, и он может легко работать с запланированную и незапланированную отработку отказа для компьютера-координатора обновлений.  
  
**Удаленный\-обновление** позволяет запускать выполнение обновления в любое время на компьютере под управлением Windows или Windows Server. Можно запустить выполнение обновления через окно кластерного обновления или с помощью **Invoke\-CauRun** командлета PowerShell. Удаленный\-обновление — это значение по умолчанию режима обновления для CAU. Можно запускать командлет [Invoke-CauRun](https://technet.microsoft.com/itpro/powershell/windows/cluster-aware-updating/invoke-caurun) по расписанию с удаленного компьютера, который не является одним из узлов кластера, с помощью планировщика заданий.  
  
## <a name="can-i-schedule-updates-to-apply-during-a-backup"></a>Можно запланировать обновления для применения во время резервного копирования?  
Да. Кластерное обновление не ограничений в этом отношении. Однако обновление программного обеспечения на сервере \(связанные потенциально перезапускает\) резервной копии сервера поддерживает в ход выполнения не рекомендуется. Помните, что при определении отработки отказа и восстановления размещения ресурса кластерное обновление применяет только API кластеризации, поэтому кластерному обновлению неизвестно, что выполняется архивация сервера.  
  
## <a name="can-cau-work-with-system-center-configuration-manager"></a>Можно ли кластерное обновление бесперебойно с System Center Configuration Manager?  
Кластерное обновление — это средство, координирующий обновления программного обеспечения на узле кластера, и Диспетчер конфигураций также выполняет обновление программного обеспечения сервера. Важно настроить эти средства таким образом, чтобы они не имеют перекрытия тех же серверах, в любом развертывании центра обработки данных, в том числе с использованием разных серверах Windows Server Update Services. Это гарантирует, что цель использования кластерного обновления отменяется не случайно, так как Configuration Manager\-на основе обновление не содержит поддержку кластера.  
  
## <a name="do-i-need-administrative-credentials-to-run-cau"></a>Нужны ли мне учетные записи администратора, чтобы запустить кластерное обновление?  
Да. Для запуска средств CAU кластерному обновлению требуются учетные данные администратора на локальном сервере либо право пользователя **Олицетворение клиента после проверки подлинности** на локальном сервере или на клиентском компьютере, на котором работает кластерное обновление. Однако для координации обновлений программного обеспечения в узлах кластера кластерному обновлению требуются учетные данные администратора кластера на каждом узле. Несмотря на то, что в пользовательском Интерфейсе CAU можно запустить без учетных данных, он запросит учетные данные администратора кластера при подключении к экземпляру кластера для предварительного просмотра или применения обновлений.  
  
## <a name="can-i-script-cau"></a>Можно ли создавать скрипты кластерное обновление?  
Да. Кластерное обновление поставляется с командлетами PowerShell, которые предлагают широкий набор параметров создания скриптов. Это те же командлеты, которые пользовательский интерфейс кластерного обновления вызывает, чтобы выполнять действия кластерного обновления.  

## <a name="what-happens-to-active-clustered-roles"></a>Что происходит с активных кластерных ролей?

Кластерные роли \(называлась приложений и служб\) , которые активны на узле, отработку отказа на другие узлы, прежде чем может начаться обновление программного обеспечения. CAU управляет такой отработкой отказа, используя режим обслуживания, который приостанавливает и очищает узел от всех активных кластерных ролей. После завершения обновления программного обеспечения кластерное обновление возобновляет работу узла, и кластерные роли восстанавливаются после сбоя в обновленном узле. Благодаря этому распределение кластерных ролей между узлами кластера после выполнения кластерного обновления сохраняется.  
  
## <a name="how-does-cau-select-target-nodes-for-clustered-roles"></a>Каким образом кластерное обновление выбирает целевые узлы для кластерных ролей?

Для координации отработки отказа CAU использует API кластеризации. Реализации API кластеризации Выбор целевых узлов с проверяющей стороной с внутренними метриками и интеллектуальное размещение эвристики \(например, уровни\) на целевых узлах.  
  
## <a name="does-cau-load-balance-the-clustered-roles"></a>Кластерное обновление нагрузку между кластерными ролями?

Кластерное обновление не будет загружена баланс кластеризованные узлы, но пытается сохранить распределение кластерных ролей. Завершив обновление узла кластера, CAU пытается восстановить ранее размещенные кластерные роли после сбоя. Чтобы восстановить ресурсы после сбоя до состояния на момент приостановки, кластерное обновление использует API кластеризации. Таким образом, при отсутствии незапланированных отработок отказа и настроек предпочтительного владельца распределение кластерных ролей должно оставаться без изменений.  
  
## <a name="how-does-cau-select-the-order-of-nodes-to-update"></a>Каким образом кластерное обновление выбирает порядок обновления узлов?  
По умолчанию кластерное обновление выбирает порядок обновления узлов на основании их уровня активности. В первую очередь обновляются узлы, на которых размещено наименьшее число кластерных ролей. Тем не менее администратор может указать определенный порядок обновления узлов, задав параметр для выполнения обновления в пользовательском Интерфейсе CAU или с помощью командлетов PowerShell.  
  
## <a name="what-happens-if-a-cluster-node-is-offline"></a>Что произойдет, если узел кластера находится в автономном режиме?

Администратор, запускающий выполнение обновления, может задать порог количества узлов, которые могут быть не в сети. Поэтому выполнение обновления может продолжать обновление кластера, даже если все узлы кластера отключены от сети.  
  
## <a name="can-i-use-cau-to-update-only-a-single-node"></a>Можно ли использовать CAU для обновления только на одном узле?  
Нет. Кластерное обновление — это кластер\-области инструмента, обновлений, поэтому он позволяет только выбрать кластеры для обновления. Чтобы обновить отдельный узел, можно использовать существующие средства обновления сервера независимо от кластерного обновления.  
  
## <a name="can-cau-report-updates-that-are-initiated-from-outside-cau"></a>Можно ли кластерное обновление сообщить обновлений, которые инициируются вне кластерного обновления?  
Нет. Кластерное обновление может сообщать только о выполнении обновления, запущенном из кластерного обновления. Тем не менее, при последующем запуске выполнения Кластерного обновления запускается, обновления, которые были установлены с помощью не\-CAU методы считаются соответствующим образом для определения дополнительных обновлений, которые могут быть применимы к каждому узлу кластера.  
  
## <a name="can-cau-support-my-unique-it-process-needs"></a>Можно моей уникальный процесс ИТ должен поддержки кластерного обновления?  
Да. Кластерное обновление предлагает следующие возможности адаптации к индивидуальным потребностям клиента в ИТ-обеспечении:  
  
**Сценарии** для выполнения обновления можно указать подготовительной\-обновить сценарий PowerShell и блога\-обновить скрипт PowerShell. Pre\-сценарий обновления запускается на каждом узле кластера перед приостановкой. Post\-сценарий обновления запускается на каждом узле кластера, после установки обновления узла.  
  
> [!NOTE]  
> .NET framework 4.6 и 4.5 и PowerShell должен устанавливаться на каждом узле кластера, на котором вы хотите запустить pre\-обновить и провести\-обновления сценариев. Также необходимо включить удаленное взаимодействие PowerShell на узлах кластера. Подробные требования к системе, см. в разделе [требованиях и рекомендациях для кластерного обновления](cluster-aware-updating-requirements.md).  
  
**Дополнительные параметры запуска обновления** администратор может дополнительно указать в большом наборе дополнительных параметров выполнения обновления, таких как максимальное количество попыток процесса обновления на каждом узле. Эти параметры можно задать с помощью пользовательского интерфейса CAU или командлеты PowerShell для кластерного обновления. Эти настраиваемые параметры можно сохранить в профиле запуска обновления и использовать для последующих запусков обновления.  
  
**Открытый plug\-в архитектуре** CAU имеются функции для Register, Unregister, и подключите выберите\-ins. Кластерное обновление поставляется с plug два заданных по умолчанию\-ins: один координирует агент обновления Windows \(WUA\) API-интерфейсы на каждом узле кластера; второй применяет исправления, вручную скопированные в файловый ресурс, доступный узлам кластера. Если предприятие имеет уникальным потребностям, а не может удовлетворить с помощью этих двух подключите\-ins, предприятия можно построить новый подключаемого модуля CAU\-в соответствии со спецификацией для общедоступных API. Дополнительные сведения см. в разделе [кластера\-виду Plug обновление\-справочника по](https://msdn.microsoft.com/library/hh418084(VS.85).aspx).  
  
Сведения о конфигурации и настройке CAU подключите\-модули для поддержки различных сценариев, обновления см. в разделе [как подключить\-ins работать](assetId:///847b571b-12b3-473c-953f-75a5a1f51333).  
  
## <a name="how-can-i-export-the-cau-preview-and-update-results"></a>Как можно экспортировать из кластерного обновления результаты просмотра и обновления?  
Кластерное обновление предлагает экспортировать параметры с помощью команды\-интерфейс строки и в пользовательском Интерфейсе.  
  
**Команда\-интерфейс варианты:**  
  
-   Предварительный просмотр результатов с помощью командлета PowerShell **Invoke\-CauScan | ConvertTo\-Xml**. Вывод: XML  
  
-   С помощью командлета PowerShell отчета о результатах **Invoke\-CauRun | ConvertTo\-Xml**. Вывод: XML  
  
-   С помощью командлета PowerShell отчета о результатах **получить\-CauReport | Экспорт\-CauReport**. Вывод: HTML, CSV  
  
**Параметры пользовательского интерфейса:**  
  
-   Копирование результатов отчета из экрана **Просмотр обновлений**. Вывод: CSV  
  
-   Копирование результатов отчета из экрана **Создать отчет**. Вывод: CSV  
  
-   Экспорт результатов отчета из экрана **Создать отчет** . Вывод: HTML  
  
## <a name="how-do-i-install-cau"></a>Как установить кластерное обновление?  
Установка CAU легко интегрируется в компонент отказоустойчивой кластеризации. Установка кластерного обновления выполняется следующим образом:  
  
-   При установке отказоустойчивого кластера на узле кластера, инструментарий управления Windows CAU \(WMI\) поставщик устанавливается автоматически.  
  
-   При установке компонентов средства отказоустойчивой кластеризации на сервер или клиентский компьютер командлеты кластерного обновления пользовательского интерфейса и PowerShell устанавливаются автоматически.
  
## <a name="does-cau-need-components-running-on-the-cluster-nodes-that-are-being-updated"></a>Требуется ли кластерное обновление компонентов, работающих на узлах кластера, которые обновляются?  
Кластерное обновление не потребуется служба, работающая на узлах кластера. Тем не менее, CAU необходимо, чтобы компонент программного обеспечения \(поставщик WMI\) установлены на узлах кластера. Этот компонент устанавливается вместе с компонентом отказоустойчивой кластеризации.  
  
Чтобы включить self\-режима обновления, кластерная роль CAU необходимо также добавить в кластер.  
  
## <a name="what-is-the-difference-between-using-cau-and-vmm"></a>Какова разница между использованием кластерного обновления и VMM?  
  
-   System Center Virtual Machine Manager \(VMM\) предназначен для обновления только Hyper\-V кластеров под управлением Windows, тогда как кластерное обновление можно обновить любой тип, поддерживаемый отказоустойчивого кластера, включая Hyper\-V кластеров.  
  
-   Диспетчера виртуальных МАШИН нужна дополнительная лицензия, а CAU имеет лицензию для всех Windows Server. Возможности, средства и пользовательский интерфейс кластерного обновления устанавливаются вместе с компонентами отказоустойчивой кластеризации.  
  
-   Если у вас уже есть лицензия System Center, можно продолжать использовать VMM для обновления Hyper\-V кластеров, так как он обеспечивает возможность интегрированного управления и обновления программного обеспечения.  
  
-   Кластерное обновление поддерживается только в кластерах, работающих под управлением Windows Server 2016, Windows Server 2012 R2 и Windows Server 2012. VMM также поддерживает Hyper\-V кластеров под управлением Windows на компьютерах под управлением Windows Server 2008 R2 и Windows Server 2008.  
  
## <a name="can-i-use-remote-updating-on-a-cluster-that-is-configured-for-self-updating"></a>Могу ли я использовать удаленный\-обновления в кластере, который настроен для самообслуживания\-обновление?  
Да. Отказоустойчивый кластер в самостоятельный\-обновление конфигурации можно обновлять с помощью удаленного\-обновление на\-спроса, так же, как можно принудительно сканирование обновления Windows в любое время на компьютере, даже если обновления Windows настроен на Установите обновления автоматически. Однако следует убедиться, что выполнение обновления не происходит в данный момент.  
  
## <a name="can-i-reuse-my-cluster-update-settings-across-clusters"></a>Могу ли я применить свои параметры обновления кластера ко всем кластерам?  
Да. Кластерное обновление поддерживает разные параметры выполнения обновления, определяющие, как ведет себя выполнение обновления, обновляя кластер. Эти параметры можно сохранить в качестве профиля выполнения обновления, и тогда их можно применять к любому кластеру. Рекомендуется сохранять и повторно использовать настройки для отказоустойчивых кластеров со сходными потребностями обновления. Например, можно создать «бизнеса\-профиля выполнения критических SQL Server кластера обновление» для всех кластеров Microsoft SQL Server, которые поддерживают бизнес\-критически важных служб.  
  
## <a name="where-is-the-cau-plug-in-specification"></a>Где — это вилка CAU\-в спецификации?  
  
-   [Кластер\-кластерного обновления Plug\-справочника](https://msdn.microsoft.com/library/hh418084(VS.85).aspx)  
  
-   [Подключаемого модуля кластерного обновления кластера\-в образце](https://code.msdn.microsoft.com/windowsdesktop/Cluster-Aware-Updating-6a8854c9)  
  
## <a name="see-also"></a>См. также  
  
-   [Кластер\-Обзор кластерного обновления](cluster-aware-updating.md)  
  
