---
ms.assetid: 6416d125-bcaf-433d-971a-2f0283bca2c2
title: "Кластерное обновление — вопросы и ответы"
ms.topic: article
ms.prod: storage-failover-clustering
manager: dongill
ms.author: jgerend
author: JasonGerend
ms.date: 4/28/2017
description: "Ответы на часто задаваемые вопросы о кластерного обновления в Windows Server."
ms.openlocfilehash: 8417ea8b6b76e16c3f4db3bac5062d90a8da3ff2
ms.sourcegitcommit: 583355400f6b0d880dc0ac6bc06f0efb50d674f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/17/2017
---
# <a name="cluster-aware-updating-frequently-asked-questions"></a>Кластерное обновление: Вопросы и ответы

> Применяется к: Windows Server (канал точками годовой), Windows Server 2016, Windows Server 2012 R2, Windows Server 2012

[Кластерное обновление](cluster-aware-updating.md) \(CAU\) — это компонент, координирующий обновления программного обеспечения на всех серверах в отказоустойчивом кластере образом, чтобы не ограничивать доступность служб больше, чем при плановой отработке отказа в узле кластера. В некоторых приложениях, где возможна постоянная доступность \ например (Hyper\-V с динамической миграции), или файл 3.x SMB-сервера с прозрачной Failover\ SMB, CAU может координировать автоматическое обновление кластера, не влияя на доступность служб.

## <a name="does-cau-support-updating-storage-spaces-direct-clusters"></a>Поддерживает ли кластерное обновление обновления кластеров дисковых пространств?  
Да. Кластерное обновление поддерживает обновление [локальных дисковых пространств](../storage/storage-spaces/storage-spaces-direct-overview.md) кластеры, независимо от типа развертывания: гиперконвергентных или конвергентных. В частности кластерное обновление оркестрации гарантирует, что приостановка каждого узла кластера ожидает базового кластерного дискового пространства, работоспособность.

## <a name="does-cau-work-with-windows-server-2008-r2-or-windows-7"></a>Кластерное обновление Бесперебойно работать с Windows Server 2008 R2 или Windows 7?  
Нет. Кластерное обновление управляет обновлением кластера только с компьютеров под управлением Windows Server 2016, Windows Server 2012 R2, Windows Server 2012, Windows 10, Windows 8.1 или Windows 8. Выполняется обновление отказоустойчивого кластера необходимо запустить Windows Server 2016, Windows Server 2012 R2 или Windows Server 2012.
  
## <a name="is-cau-limited-to-specific-clustered-applications"></a>Кластерное обновление, ограничены определенными кластерными приложениями?  
Нет. Кластерное обновление не важен тип кластерного приложения. CAU является внешним решением по обновлению cluster\ положение над кластеризации командлеты PowerShell и API-интерфейсы. Таким образом CAU может управлять обновлением любой кластерной системы, настроенной в отказоустойчивом кластере Windows Server.  
  
> [!NOTE]  
> В настоящее время протестированы и сертифицированы для CAU следующие кластерные рабочие нагрузки: SMB, Hyper\-V, репликация DFS, пространства имен DFS, iSCSI и NFS.  
  
## <a name="does-cau-support-updates-from-microsoft-update-and-windows-update"></a>Поддерживает ли кластерное обновление обновление из центра обновления Майкрософт и центра обновления Windows?  
Да. По умолчанию кластерное обновление настраивается с помощью модулей, в которых используется API для служебных \(WUA\) агента обновления Windows на узлах кластера. Инфраструктуры агента обновления Windows можно настроить в качестве источника обновления Центр обновления Майкрософт и центра обновления Windows или Windows Server Update Services \(WSUS\).  
  
## <a name="does-cau-support-wsus-updates"></a>Поддерживает ли кластерное обновление обновления WSUS?  
Да. По умолчанию кластерное обновление настраивается с помощью модулей, в которых используется API для служебных \(WUA\) агента обновления Windows на узлах кластера. В качестве источника обновления Центр обновления Майкрософт и центра обновления Windows или на локальном сервере \(WSUS\) Windows Server Update Services можно настроить инфраструктуры агента обновления Windows.  
  
## <a name="can-cau-apply-limited-distribution-release-updates"></a>Можно ли кластерное обновление применять выпуски обновлений для ограниченного распространения?  
Да. \(LDR\) обновлений для ограниченного распространения, также называемые исправлениями, не публикуются через Центр обновления Майкрософт или Центра обновления Windows, поэтому их невозможно загрузить через \(WUA\) plug\ агента обновления Windows — в том, что используется CAU по умолчанию.  
  
Тем не менее, CAU включает второй модулей в том, что можно выбрать для применения исправлений. Это исправление модулей в также можно настроить для применения отличных Майкрософт драйверов, встроенного по и обновлений BIOS.  
  
## <a name="can-i-use-cau-to-apply-cumulative-updates"></a>Можно использовать CAU для применения накопительных пакетов обновлений?  
Да. Если накопительные пакеты обновления, обновления выпуска для общего распространения или обновления LDR, CAU может применить их.  
  
## <a name="can-i-schedule-updates"></a>Можно запланировать обновления  
Да. Кластерное обновление поддерживает следующие режимы обновления, оба из которых позволяют для планирования установки обновлений:  
  
**Обновление многоразовый** позволяет кластеру выполнять Самообновление в соответствии с указанным профилем и по регулярному расписанию, например период ежемесячного обслуживания. Можно также запустить многоразовый-выполнение обновления по требованию в любое время. Чтобы включить режим многоразовый обновления, необходимо добавить кластерную роль CAU в кластер. Кластерное обновление многоразовый действует как рабочая нагрузка, и может без проблем работать с плановыми и внеплановыми отработками отказа компьютера-координатора обновлений.  
  
**Обновление Remote\** позволяет запускать выполнение обновления в любое время на компьютере под управлением Windows или Windows Server. Можно запустить выполнение обновления через окно кластерного обновления или с помощью **Invoke\ CauRun** командлета PowerShell. Remote\ обновление является режимом Кластерного обновления по умолчанию. Планировщик заданий можно использовать для запуска [Invoke-CauRun](https://technet.microsoft.com/itpro/powershell/windows/cluster-aware-updating/invoke-caurun) командлета по расписанию с удаленного компьютера, который не является одним из узлов кластера.  
  
## <a name="can-i-schedule-updates-to-apply-during-a-backup"></a>Можно запланировать обновления для применения при резервном копировании  
Да. Кластерное обновление не имеет ограничений в этом отношении. Однако обновление программного обеспечения на сервере \ (связанные потенциальных restarts\) во время архивации сервера хода выполнения не рекомендуется. Имейте в виду, что кластерное обновление использует только API для определения ресурса отработки отказа и восстановления после сбоя; кластеризации Таким образом неизвестно состояние архивации сервера.  
  
## <a name="can-cau-work-with-system-center-configuration-manager"></a>Можно ли кластерное обновление Бесперебойно работать с System Center Configuration Manager?  
CAU представляет собой инструмент, координирующий обновления программного обеспечения на узле кластера, и Диспетчер конфигураций также выполняет обновление программного обеспечения на сервере. Важно настроить эти средства таким образом, чтобы у них нет перекрытия теми же серверами в любом развертывании центра обработки данных, в том числе с помощью различных серверах служб Windows Server Update Services. Это гарантирует, что не случайно сохраняется цель использования Кластерного из-за конфигурации Manager\ обновление не поддержку кластера.  
  
## <a name="do-i-need-administrative-credentials-to-run-cau"></a>Использовать учетные данные администратора, чтобы запустить кластерное обновление?  
Да. Для запуска средств CAU CAU требуются учетные данные администратора на локальном сервере, либо **имитация клиента после проверки подлинности** права пользователя на локальном сервере или клиентском компьютере, на котором он выполняется. Тем не менее для координации обновлений программного обеспечения в узлах кластера, кластерному обновлению требуются учетные данные администратора кластера на каждом узле. Несмотря на то, что пользовательский Интерфейс CAU могут запускаться без этих учетных данных, он запросит учетные данные администратора кластера при его подключении к экземпляру кластера для предварительного просмотра или применения обновлений.  
  
## <a name="can-i-script-cau"></a>Можно ли я написать скрипт кластерное обновление?  
Да. Кластерное обновление поставляется с командлетами PowerShell, которые предоставляют широкий набор параметров скриптов. Это те же командлеты, которые пользовательский Интерфейс кластерного обновления вызывает, чтобы выполнять действия кластерного обновления.  

## <a name="what-happens-to-active-clustered-roles"></a>Что происходит с активных кластерных ролей?

Кластерные роли \ (ранее называвшиеся приложений и services\), которые активные в узле, переход на другие узлы, прежде чем может начаться обновление программного обеспечения. Кластерное обновление управляет такой отработкой отказа, используя режим обслуживания, который приостанавливает и очищает узел от всех активных кластерных ролей. После завершения обновления программного обеспечения, кластерное обновление возобновляет работу узла и переключение кластерных ролей на обновленном узле. Это гарантирует, что распределение кластерных ролей между узлами сохраняется выполнения Кластерного обновления кластера.  
  
## <a name="how-does-cau-select-target-nodes-for-clustered-roles"></a>Каким образом кластерное обновление выбирает целевые узлы для кластерных ролей

Кластерное обновление использует API, для координации отработки отказа кластеризации. Реализации API кластеризации Выбор целевых узлов с внутренними метриками и эвристикой интеллектуального размещения \ (например, levels\ рабочей нагрузки) на целевых узлах.  
  
## <a name="does-cau-load-balance-the-clustered-roles"></a>Распределяет ли кластерное обновление нагрузку между кластерными ролями?

Кластерное обновление не распределяет нагрузку между кластерными узлами, но пытается сохранить распределение кластерных ролей. Завершив обновление узла кластера, CAU пытается сбоя восстановить ранее размещенные кластерные роли на этот узел. Кластерное обновление использует API сбоя ресурсы на момент приостановки кластеризации. Таким образом в отсутствие незапланированных отработок отказа и настроек предпочтительного владельца распределение кластерных ролей должно оставаться без изменений.  
  
## <a name="how-does-cau-select-the-order-of-nodes-to-update"></a>Каким образом кластерное обновление выбирает порядок обновления узлов?  
По умолчанию кластерное обновление выбирает порядок обновления узлов на основании их уровня активности. В первую очередь обновляются узлы, на которых размещено наименьшее число кластерных ролей. Тем не менее администратор может указать определенный порядок обновления узлов, задав параметр для выполнения обновления в пользовательском Интерфейсе CAU или с помощью командлетов PowerShell.  
  
## <a name="what-happens-if-a-cluster-node-is-offline"></a>Что произойдет, если на узле кластера находится в автономном режиме?

Администратор, запускающий выполнение обновления может задать порог количества узлов, которые могут быть отключены. Поэтому прогона обновления можно продолжать в кластере, даже если все узлы кластера отключены от сети.  
  
## <a name="can-i-use-cau-to-update-only-a-single-node"></a>Можно использовать кластерное обновление обновление только один узел?  
Нет. Кластерное обновление — это ограниченную cluster\ обновления средство, поэтому только позволяет выбрать кластеры для обновления. Если вы хотите обновить отдельный узел, можно использовать существующие средства независимо от Кластерного обновления сервера.  
  
## <a name="can-cau-report-updates-that-are-initiated-from-outside-cau"></a>Способно ли кластерное обновление обновления, запущенном вне кластерного обновления?  
Нет. Кластерное обновление может только отчета о выполнении обновления, запущенном из кластерного. Тем не менее при запуске последующих выполнения Кластерного обновления, обновления, которые были установлены не через кластерное обновление отличных учитываются чтобы определить, какие дополнительные обновления могут быть применимы к каждому узлу кластера.  
  
## <a name="can-cau-support-my-unique-it-process-needs"></a>Можно CAU поддержки моей потребностям ИТ-обеспечении?  
Да. Кластерное обновление предлагает следующие возможности адаптации к индивидуальным клиентов потребностям ИТ-обеспечении:  
  
**Сценарии** выполнения обновления можно указать сценарий PowerShell предварительно обновления и сценарий PowerShell post\ обновления. Обновление предварительно сценарий выполняется на каждом узле кластера, прежде чем узел приостановлен. Сценарий post\ обновления запускается на каждом узле кластера после обновления узла.  
  
> [!NOTE]  
> .NET framework 4.6 или 4.5 и оболочка PowerShell должен устанавливаться на каждом узле кластера, на котором требуется запустить скрипты предварительно обновления и обновления post\. Необходимо также включить удаленное взаимодействие PowerShell на узлах кластера. Подробные требования к системе, в разделе [требования и рекомендации для кластерного обновления](cluster-aware-updating-requirements.md).  
  
**Дополнительные параметры выполнения обновления** администратор может дополнительно указать в большом наборе дополнительных параметров выполнения обновления, например максимальное число повторных попыток процесс обновления на каждом узле. Эти параметры можно задать с помощью пользовательского интерфейса CAU или командлеты PowerShell для кластерного обновления. Эти параметры можно сохранить в профиле прогона обновления и использовать для последующих запусков обновления.  
  
**Архитектура общедоступных модулей в** CAU имеются функции для регистрации, отменить регистрацию, и выберите модулей модулей кластерное обновление поставляется с двумя модулями модулей по умолчанию: один координирует \(WUA\) агента обновления Windows API-интерфейсов на каждом узле кластера; второй применяет исправления, вручную скопированные в общую папку, доступную для узлов кластера. Если предприятия потребности, которые не удовлетворяют эти два модулей по умолчанию, можно построить новый кластерного обновления в модулей в соответствии со спецификацией для общедоступных API. Дополнительные сведения см. в разделе [модулей в справочник по обновлению с поддержкой Cluster\](http://msdn.microsoft.com/library/hh418084(VS.85).aspx).  
  
Сведения о конфигурации и настройке кластерное обновление модулей модули для поддержки различных сценариев, обновления в разделе [модулей Общие сведения о модулях](assetId:///847b571b-12b3-473c-953f-75a5a1f51333).  
  
## <a name="how-can-i-export-the-cau-preview-and-update-results"></a>Как экспортировать preview кластерного обновления и обновления результатов?  
Кластерное обновление предусматривает возможности экспорта через интерфейс командной строки и через пользовательский Интерфейс.  
  
**Возможности экспорта через интерфейс командной строки:**  
  
-   Просмотр результатов с помощью командлета PowerShell **Invoke\-CauScan | ConvertTo\-Xml**. Вывод: XML  
  
-   Отчета о результатах при помощи командлета PowerShell **Invoke\-CauRun | ConvertTo\-Xml**. Вывод: XML  
  
-   Отчета о результатах при помощи командлета PowerShell **Get\-CauReport | Этого CauReport**. Вывод: HTML-ФАЙЛ, CSV  
  
**Параметры пользовательского интерфейса:**  
  
-   Копирование результатов отчета из **просмотра обновлений** экрана. Вывод: CSV  
  
-   Копирование результатов отчета из **создать отчет о** экрана. Вывод: CSV  
  
-   Экспорт результатов отчета из **создать отчет о** экрана. Вывод: HTML  
  
## <a name="how-do-i-install-cau"></a>Как установить кластерное обновление?  
Установка CAU легко интегрируется в компонент отказоустойчивой кластеризации. Установка кластерного обновления выполняется следующим образом:  
  
-   При установке отказоустойчивой кластеризации в узле кластера, поставщик \(WMI\) инструментария WMI CAU устанавливается автоматически.  
  
-   При установке компонента средств отказоустойчивой кластеризации на сервер или клиентский компьютер командлеты PowerShell для кластерного обновления пользовательского интерфейса и устанавливаются автоматически.
  
## <a name="does-cau-need-components-running-on-the-cluster-nodes-that-are-being-updated"></a>Нужна ли кластерное обновление компонентов, работающих на узлах кластера, которые обновляются?  
Для кластерного обновления не требуется к службе, запущенной на узлах кластера. Тем не менее, CAU необходимо программный компонент \ (имени поставщика WMI), установленных на узлах кластера. Этот компонент устанавливается вместе с компонентом отказоустойчивой кластеризации.  
  
Чтобы включить режим обновления многоразовый, кластерная роль CAU необходимо добавить в кластер.  
  
## <a name="what-is-the-difference-between-using-cau-and-vmm"></a>В чем разница между использованием кластерного обновления и VMM?  
  
-   System Center Virtual Machine Manager \(VMM\) предназначен для обновления только кластеров Hyper\-V, тогда как Кластерное обновление может обновлять поддерживаемые отказоустойчивые кластеры, включая кластеры Hyper\ V любого типа.  
  
-   Диспетчера виртуальных МАШИН нужна дополнительная лицензия, а CAU имеет лицензию для всех серверов Windows. Возможности, средства и пользовательский Интерфейс кластерного обновления устанавливаются вместе с компонентами отказоустойчивой кластеризации.  
  
-   Если у вас уже есть лицензия System Center, можно продолжать использовать диспетчер виртуальных МАШИН для обновления кластеров Hyper\-V, так как он обеспечивает возможность интегрированного управления и обновления программного обеспечения.  
  
-   Кластерное обновление поддерживается только в кластерах, работающих под управлением Windows Server 2016, Windows Server 2012 R2 и Windows Server 2012. VMM также поддерживает кластеры Hyper\-V на компьютерах под управлением Windows Server 2008 R2 и Windows Server 2008.  
  
## <a name="can-i-use-remote-updating-on-a-cluster-that-is-configured-for-self-updating"></a>Можно использовать remote\ обновления в кластере, который настроен для обновления многоразовый?  
Да. Отказоустойчивый кластер в конфигурации многоразовый обновления можно обновлять с использованием обновление remote\ запросу, так же, как можно принудительно проверку в центре обновления Windows в любое время на компьютере, даже если центр обновления Windows настроен на автоматическую установку обновлений. Тем не менее необходимо убедитесь, что выполнение обновления уже не выполняется.  
  
## <a name="can-i-reuse-my-cluster-update-settings-across-clusters"></a>Могу ли я применить свои параметры обновления кластера ко всем кластерам?  
Да. Кластерное обновление поддерживает ряд параметров прогона обновления, которые определяют, как выполнение обновления ведет себя обновления кластера. Эти параметры можно сохранить в виде профиля прогона обновления, и их можно применять к любому кластеру. Рекомендуется сохранять и повторно использовать настройки для отказоустойчивых кластеров со сходными потребностями обновления. Например можно создать» критически важных Business\ SQL Server кластера профиль выполнения обновления» для всех кластеров Microsoft SQL Server, поддерживающие business\ важных служб.  
  
## <a name="where-is-the-cau-plug-in-specification"></a>Где находится спецификации в модулей для кластерного обновления?  
  
-   [Cluster\ обновления с поддержкой модулей в ссылку](http://msdn.microsoft.com/library/hh418084(VS.85).aspx)  
  
-   [Образец кластерного обновления в модулей](http://code.msdn.microsoft.com/windowsdesktop/Cluster-Aware-Updating-6a8854c9)  
  
## <a name="see-also"></a>См. также:  
  
-   [Обзор обновления с поддержкой Cluster\](cluster-aware-updating.md)  
  
