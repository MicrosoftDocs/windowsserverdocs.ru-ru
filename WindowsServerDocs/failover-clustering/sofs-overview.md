---
title: Масштабирование файлового сервера для обзора данных приложения
description: Общие сведения о функции масштабирования файлового сервера для Windows Server 201 R2, Windows Server 2012 и Windows Server 2016.
ms.prod: windows-server-threshold
ms.topic: article
author: JasonGerend
ms.author: jgerend
ms.technology: storage-failover-clustering
ms.date: 04/26/2018
ms.localizationpriority: medium
ms.openlocfilehash: 04e25e9c69062611d9d14c220614f148ac5de770
ms.sourcegitcommit: e0479b0114eac7f232e8b1e45eeede96ccd72b26
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/22/2018
ms.locfileid: "2082574"
---
# <a name="scale-out-file-server-for-application-data-overview"></a>Масштабирование файлового сервера для обзора данных приложения

>Применимо к: Windows Server 2012 R2, Windows Server 2012, Windows Server 2016

Масштабирование файлового сервера — функция, которая обеспечивает масштабирования файловые ресурсы, которые постоянно доступны для хранилища приложения на основе файла. Общие файловые ресурсы горизонтального масштабирования предоставляет возможность совместно использовать одну и ту же папку из нескольких узлов одного кластера. В этом сценарии рассматривается планирование и развертывание файлового сервера горизонтального масштабирования.

Можно развернуть и настроить кластерные файлового сервера с помощью одного из следующих методов:

- **Масштабирование файлового сервера для данных приложения** Эта функция сервера кластерные файла была введена в Windows Server 2012 и его позволяет хранения данных приложений сервера, например файлы виртуальной машины Hyper-V, в общих папках и получить следующий уровень надежности, доступности, управляемости и высоким производительности, характерные для сети хранения данных. Все файловые ресурсы, одновременно online на всех узлах. Общие файловые ресурсы, связанные с этим типом кластерные файлового сервера вызываются горизонтального масштабирования общие файловые ресурсы. Иногда называется активный активный. Это рекомендуемый файл тип сервера при развертывании Hyper-V через блок SMB (Server Message) или Microsoft SQL Server по SMB.
- **Файлового сервера для общего использования** Здесь указывается продолжения кластерные файлового сервера, который поддерживается в Windows Server с момента внедрения отказоустойчивой кластеризации. Этот тип кластерные файлового сервера и таким образом все папках связанных с кластерные файлового сервера находится в сети на одном узле за раз. Это иногда называется активный пассивный или активный двойного. Общие файловые ресурсы, связанные с этим типом кластерные файлового сервера вызываются кластерные файловые ресурсы. Это тип сервера рекомендуется при развертывании сценариев работников сведения.

## <a name="scenario-description"></a>Описание сценария

С горизонтальным масштабированием файловые ресурсы могут совместно использовать одну и ту же папку из нескольких узлов кластера. Например при наличии файла четырех узлов кластера серверов, с помощью блок SMB (Server Message) горизонтального масштабирования компьютера под управлением Windows Server 2012 R2 или Windows Server 2012 можно получить доступ общие файловые ресурсы с любой из четырех узлов. Это можно сделать, используя новые функции отказоустойчивой кластеризации Windows Server и возможности протокол Windows server файла SMB 3.0. Администраторы сервера файлов обеспечивают горизонтального масштабирования общие файловые ресурсы и постоянно доступные файловые службы на сервере приложения и быстро реагировать на возрастающих требований, просто перенос дополнительные серверы в оперативный режим. Все это можно выполнить в производственной среде и полностью прозрачен для сервера приложений.

Ключевые преимущества, предоставляемые сервером файл горизонтального масштабирования в следующие:

- **Активный-активный общие файловые ресурсы**. Все узлы кластера можно принимать и обрабатывать запросы клиента SMB. Выполнив файл одновременно общий доступ к содержимому доступна через все узлы кластера, SMB 3.0 кластеры и клиентов сотрудничать для обеспечения прозрачной отработки отказа для узлов кластера альтернативный во время запланированного технического обслуживания и незапланированные сбои со службой прерывание.
- **Увеличение пропускной способности**. Пропускная способность, максимальный общий доступ, общая полоса пропускания все узлы кластера серверов файла. В отличие от предыдущих версий Windows Server общая полоса пропускания больше не ограничен пропускной способности единого узла кластера; Однако вместо этого возможность системы резервного хранилища определяет ограничения. Общая полоса пропускания можно увеличить путем добавления узлов.
- **CHKDSK с нуля времени простоя**. CHKDSK в Windows Server 2012 существенно улучшены значительно сократить время, когда файловая система работает в автономном режиме для восстановления. Кластерные Общие тома (CSV) выполните этот шаг вперед, устраняя автономной этап. Система файл CSV (CSVFS) можно использовать команду CHKDSK без влияния на приложений с помощью открытые дескрипторы в файловой системе.
- **Кластерные общий доступ к тому кэша**. CSV в Windows Server 2012 вводится поддержка кэша чтения, который позволяет значительно повысить производительность в определенных сценариях, например, в инфраструктуры виртуальных рабочих столов (VDI).
- **Упрощенный управления**. С горизонтальным масштабированием файлового сервера создание горизонтального масштабирования файловые серверы и добавьте необходимые CSV и общим файловым ресурсам. Больше не необходимо создать несколько кластеризованных файла серверов с отдельной кластер дисков и затем разработать политики расположения для обеспечения действия на каждом узле кластера.
- **Автоматическое перераспределение клиентов с горизонтальным масштабированием файлового сервера**. В Windows Server 2012 R2 автоматическое перераспределение повышает масштабируемость и управляемость для масштабирования файловые серверы. SMB клиентских подключений должны сохраняться в общей папке (а не на каждом сервере), и Клиенты затем перенаправляются на узле кластера с наиболее доступа на том с общего файлового ресурса. Это повышает эффективность благодаря уменьшению числа в режиме одобрения администратором трафик между узлами файлов сервера. Клиенты перенаправляются после начального подключения и при изменении параметров хранения данных кластера.

## <a name="in-this-scenario"></a>В этом сценарии

Доступны следующие разделы помогут вам в развертывании горизонтального масштабирования файлового сервера:

- [Планирование для масштабирования файлового сервера](<https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2012-r2-and-2012/jj134258(v%3dws.11)>)

  - [Этап 1: Планирование хранилище в масштабируемой файлового сервера](<https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2012-r2-and-2012/jj134181%28v%3dws.11%29>)
  - [Шаг 2: Планирование сети на масштабируемой файлового сервера](<https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2012-r2-and-2012/jj134253%28v%3dws.11%29>)

- [Развертывание горизонтального масштабирования файлового сервера](<https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2012-r2-and-2012/hh831359%28v%3dws.11%29>)

  - [Шаг 1: Установка необходимых компонентов для масштабирования файлового сервера](<https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2012-r2-and-2012/hh831478%28v%3dws.11%29>)
  - [Шаг 2: Настройка масштабирования файлового сервера](<https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2012-r2-and-2012/hh831718%28v%3dws.11%29>)
  - [Шаг 3: Настройка Hyper-V для использования масштабируемой файлового сервера](<https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2012-r2-and-2012/hh831463%28v%3dws.11%29>)
  - [Шаг 4: Настройка Microsoft SQL Server для использования масштабируемой файлового сервера](<https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2012-r2-and-2012/hh831815%28v%3dws.11%29>)

## <a name="when-to-use-scale-out-file-server"></a>Когда следует использовать горизонтального масштабирования файлового сервера

Если рабочая нагрузка создает большое количество операций, метаданных, таких как открытие файлов, не следует использовать горизонтального масштабирования файлового сервера, закрытие файлов, создания новых файлов или переименование существующие файлы. Типичные информационный работник будет создается большое количество операций метаданных. Следует использовать файлового сервера горизонтальным масштабированием, если вы заинтересованы в масштабируемость и простоты, который вы получаете и требуется технологий, поддерживаемых с горизонтальным масштабированием файлового сервера.

В следующей таблице перечислены возможности в SMB 3.0, распространенные файловой системы Windows, файл данных управления серверами. и распространенных рабочих нагрузок. Можно увидеть ли поддержка технологии с горизонтальным масштабированием файлового сервера, а если требуется традиционных кластерные файлового сервера (также известной как файлового сервера для общего использования).

<table>
<thead>
<tr class="header">
<th>Область технологии</th>
<th>Возможность</th>
<th>Использовать общие файл кластера серверов</th>
<th>Масштабирование файлового сервера</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>SMB</td>
<td>SMB непрерывной доступности</td>
<td>Да</td>
<td>Да</td>
</tr>
<tr class="even">
<td>SMB</td>
<td>SMB multichannel</td>
<td>Да</td>
<td>Да</td>
</tr>
<tr class="odd">
<td>SMB</td>
<td>SMB Direct</td>
<td>Да</td>
<td>Да</td>
</tr>
<tr class="even">
<td>SMB</td>
<td>SMB Encryption</td>
<td>Да</td>
<td>Да</td>
</tr>
<tr class="odd">
<td>SMB</td>
<td>SMB Transparent failover</td>
<td>Да (если включены непрерывной доступности)</td>
<td>Да</td>
</tr>
<tr class="even">
<td>Файловая система</td>
<td>NTFS</td>
<td>Да</td>
<td>NA</td>
</tr>
<tr class="odd">
<td>Файловая система</td>
<td>Устойчивое файловой системы (<a href="https://docs.microsoft.com/windows-server/storage/refs/refs-overview">ссылки</a>)</td>
<td>Рекомендуется использовать с хранилищем пространств прямых</td>
<td>Рекомендуется использовать с хранилищем пространств прямых</td>
</tr>
<tr class="even">
<td>Файловая система</td>
<td>Кластер общих тома файловой системы (CSV)</td>
<td>NA</td>
<td>Да</td>
</tr>
<tr class="odd">
<td>Управление файлами</td>
<td>BranchCache</td>
<td>Да</td>
<td>Нет</td>
</tr>
<tr class="even">
<td>Управление файлами</td>
<td>Дедупликации данных (Windows Server 2012 г.)</td>
<td>Да</td>
<td>Нет</td>
</tr>
<tr class="odd">
<td>Управление файлами</td>
<td>Дедупликации данных (Windows Server 2012 R2)</td>
<td>Да</td>
<td>Да (VDI)</td>
</tr>
<tr class="even">
<td>Управление файлами</td>
<td>Корневой сервер корневого пространства имен DFS (Компьютеры)</td>
<td>Да</td>
<td>Нет</td>
</tr>
<tr class="odd">
<td>Управление файлами</td>
<td>Пространство имен DFS (Компьютеры) папки целевого сервера</td>
<td>Да</td>
<td>Да</td>
</tr>
<tr class="even">
<td>Управление файлами</td>
<td>Репликация DFS (DFSR)</td>
<td>Да</td>
<td>Нет</td>
</tr>
<tr class="odd">
<td>Управление файлами</td>
<td>Диспетчер ресурсов файлового сервера (экранов и квот)</td>
<td>Да</td>
<td>Нет</td>
</tr>
<tr class="even">
<td>Управление файлами</td>
<td>Инфраструктура классификации файлов</td>
<td>Да</td>
<td>Нет</td>
</tr>
<tr class="odd">
<td>Управление файлами</td>
<td>Контроль доступа (доступ на основе утверждений, БОЛТЫ)</td>
<td>Да</td>
<td>Нет</td>
</tr>
<tr class="even">
<td>Управление файлами</td>
<td>Перенаправление папок</td>
<td>Да</td>
<td>Не рекомендуется *</td>
</tr>
<tr class="odd">
<td>Управление файлами</td>
<td>Автономные файлы (кэширование на стороне клиента)</td>
<td>Да</td>
<td>Не рекомендуется *</td>
</tr>
<tr class="even">
<td>Управление файлами</td>
<td>Перемещаемые профили пользователей</td>
<td>Да</td>
<td>Не рекомендуется *</td>
</tr>
<tr class="odd">
<td>Управление файлами</td>
<td>Домашних каталогов</td>
<td>Да</td>
<td>Не рекомендуется *</td>
</tr>
<tr class="even">
<td>Управление файлами</td>
<td>рабочие папки</td>
<td>Да</td>
<td>Нет</td>
</tr>
<tr class="odd">
<td>NFS</td>
<td>Сервер NFS</td>
<td>Да</td>
<td>Нет</td>
</tr>
<tr class="even">
<td>Приложения</td>
<td>Hyper-V</td>
<td>Не рекомендуется</td>
<td>Да</td>
</tr>
<tr class="odd">
<td>Приложения</td>
<td>Microsoft SQL Server</td>
<td>Не рекомендуется</td>
<td>Да</td>
</tr>
</tbody>
</table>

\ * Перенаправление папок, автономные файлы, перемещаемые профили пользователей или каталоги Домашняя страница создания большое число операций записи, которые должны быть записаны на диск (без буферизация) сразу же при использовании постоянно доступны общие файловые ресурсы, уменьшение производительности по сравнению с файловые ресурсы общего назначения. Постоянно доступны общие файловые ресурсы также несовместимы с диспетчер ресурсов файлового сервера и ПК под управлением Windows XP. Кроме того автономные файлы могут не переход в автономный режим для 3-6 минут после пользователь теряет доступ к общему ресурсу, который может разочаровать пользователей, которые еще не используете всегда автономный режим автономных файлов.

## <a name="practical-applications"></a>Практическое применение

Файловые серверы горизонтального масштабирования подходят для хранилища сервера приложений. Ниже перечислены некоторые примеры серверных приложений, которые можно хранить свои данные в общей папке горизонтального масштабирования.

- Internet Information Services (IIS) веб-сервера можно хранить конфигурации и данных для веб-сайтов в общей папке горизонтального масштабирования. Дополнительные сведения см в [Общей конфигурации](http://www.iis.net/learn/manage/managing-your-configuration-settings/shared-configuration_264).
- Hyper-V можно хранить конфигурации и live виртуальные диски в общей папке горизонтального масштабирования. Дополнительные сведения можно [Развернуть Hyper-V через протокол SMB](<https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2012-r2-and-2012/jj134187(v%3dws.11)>).
- SQL Server может хранить файлы активной базы данных горизонтального масштабирования файловом ресурсе. Дополнительные сведения можно [установить SQL Server с помощью файла SMB общий доступ как варианты хранения](https://docs.microsoft.com/sql/database-engine/install-windows/install-sql-server-with-smb-fileshare-as-a-storage-option).
- Диспетчер виртуальных машин (VMM) можно хранить в общей папке библиотеки (который содержит шаблоны виртуальных машин и связанные файлы) в общей папке горизонтального масштабирования. Тем не менее, сам сервер библиотека не может быть масштабируемой файлового сервера — это должен быть на изолированном сервере или в отказоустойчивый кластер, которое не использует роль кластера горизонтального масштабирования файлового сервера.

При использовании масштабирования общей папки в общей папке библиотеки, можно использовать только технологий, которые совместимы с горизонтальным масштабированием файлового сервера. Например нельзя использовать репликации DFS для репликации общей папки библиотеки, размещенные в общей папке горизонтального масштабирования. Также важно, что на сервере файл горизонтального масштабирования быть установлены последние обновления программного обеспечения.

Для использования масштабируемой общей папки в качестве общую папку библиотеки, сначала добавьте сервер библиотеки (скорее всего виртуальной машины) с локальной папки или ресурсы не вообще. При добавлении в общей папке библиотеки, выберите общую папку, которая находится на сервере файл горизонтального масштабирования. Эту папку следует управляемых VMM и созданный исключительно для использования на сервере библиотеки. Также убедитесь, что установка последних обновлений на сервере файл горизонтального масштабирования. Дополнительные сведения о добавлении серверов библиотеки VMM и общие папки библиотеки [Профили добавить библиотеку VMM](https://docs.microsoft.com/system-center/vmm/library-profiles?view=sc-vmm-1801)см. Чтобы получить список доступные в настоящее время исправления для служб хранилища файлов и статье [базы знаний Майкрософт 2899011](https://support.microsoft.com/help/2899011/list-of-currently-available-hotfixes-for-the-file-services-technologie).

>[!NOTE]
>Некоторые пользователи, такие как информационные работники имеют рабочих нагрузок, более сказывается на производительности. Например операции, такие как открытие и закрытие файлов, создания новых файлов и переименование существующие файлы при выполнении нескольких пользователей, оказывают влияние на производительность. Если этот параметр включен в общей папке с непрерывной доступностью, обеспечивает целостность данных, но также влияет на общую производительность. Постоянное требуется записывает данные через на диске для обеспечения целостности данных в случае сбоя узла кластера на файловом сервере горизонтального масштабирования. Таким образом пользователь, который копируется несколько больших файлов на файловом сервере может предполагать значительно больше времени на непрерывно доступные файловый ресурс.

## <a name="features-included-in-this-scenario"></a>Компонентов, содержащихся в этом сценарии

В следующей таблице перечислены функции, которые входят в этот сценарий и описывается, как они поддерживают.

<table>
<thead>
<tr class="header">
<th>Возможность</th>
<th>Как он поддерживает этот сценарий</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><a href="failover-clustering.md">Отказоустойчивая кластеризация</a></td>
<td>Отказоустойчивые кластеры добавлены следующие возможности в Windows Server 2012 для поддержки масштабирования файлового сервера: распределенного сетевое имя, тип ресурса горизонтального масштабирования файлового сервера, кластера общих томов CSV-2 и роли высокой доступности масштабируемой файлового сервера. Дополнительные сведения об этих возможностях см <a href="https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2012-r2-and-2012/dn265972(v%3dws.11)">в отказоустойчивой кластеризации в Windows Server 2012 [перенаправленных]</a>.</td>
</tr>
<tr class="even">
<td><a href="https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2012-r2-and-2012/hh831795(v%3dws.11)">Протокол SMB</a></td>
<td>SMB 3.0 добавлены следующие возможности в Windows Server 2012 для поддержки масштабирования файлового сервера: SMB Transparent Failover SMB multichannel; и SMB прямой.<br />
<br />
Дополнительные сведения о новых и измененных функций для SMB в Windows Server 2012 R2 изучите статью <a href="https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2012-r2-and-2012/hh831474(v%3dws.11)">новые в SMB в Windows Server</a>.</td>
</tr>
</tbody>
</table>

## <a name="more-information"></a>Дополнительные сведения

- [Руководство по вопросы проектирования хранилища определенные программного обеспечения](<https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2012-r2-and-2012/mt243829(v%3dws.11)>)
- [Увеличение сервера, хранения и доступность сети](<https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2012-r2-and-2012/hh831437(v%3dws.11)>)
- [Развертывание Hyper-V при SMB](<https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2012-r2-and-2012/jj134187(v%3dws.11)>)
- [Развертывание быстрее и эффективнее файловые серверы для сервера приложений](<https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2012-r2-and-2012/hh831723(v%3dws.11)>)
- [Горизонтальное масштабирование или не с горизонтальным масштабированием, являющегося вопрос](https://blogs.technet.com/b/filecab/archive/2013/12/05/to-scale-out-or-not-to-scale-out-that-is-the-question.aspx) (публикация в блоге)
- [Перенаправление папок, автономные файлы и перемещаемые профили пользователей](<https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2012-r2-and-2012/hh848267(v%3dws.11)>)