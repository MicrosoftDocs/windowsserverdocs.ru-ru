---
title: "Служба работоспособности в Windows Server 2016"
ms.prod: windows-server-threshold
manager: eldenc
ms.author: cosdar
ms.technology: storage-health-service
ms.topic: article
ms.assetid: 5bc71e71-920e-454f-8195-afebd2a23725
author: cosmosdarwin
ms.date: 08/14/2017
ms.openlocfilehash: 834fcfb749e89e4768dce3f229564feea550a432
ms.sourcegitcommit: 30fcae929ce7b611f5d3a5f8fee64b0299272110
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/15/2017
---
# <a name="health-service-in-windows-server-2016"></a>Служба работоспособности в Windows Server 2016
> Применяется к Windows Server 2016

Служба работоспособности — это новая функция в Windows Server 2016, которая улучшает качество повседневного наблюдения за и рабочей взаимодействие для кластеров под управлением дисковых пространств.

## <a name="prerequisites"></a>Предварительные требования  

Служба работоспособности включена по умолчанию для локальных дисковых пространств. Никаких дополнительных действий не требуется для его настройки и запустите ее. Дополнительные сведения о дисковых пространствах см. в разделе [дисковых пространств в Windows Server 2016](../storage/storage-spaces/storage-spaces-direct-overview.md).  

## <a name="reports"></a>Отчеты

В разделе [служба работоспособности отчеты](health-service-reports.md).

## <a name="faults"></a>Сообщения об ошибках

В разделе [ошибок службы работоспособности](health-service-faults.md).

## <a name="actions"></a>Действия

В разделе [действия службы работоспособности](health-service-actions.md).

## <a name="automation"></a>Автоматизации  

В этом разделе описываются рабочие процессы, которые автоматизирует служба работоспособности в жизненный цикл диска.  

### <a name="disk-lifecycle"></a>Жизненный цикл диска   

Служба работоспособности автоматизирует практически все этапы жизненного цикла физического диска. Предположим, что начальное состояние развертывания находится в идеальном состоянии - то есть, все физические диски работают должным образом.  

#### <a name="retirement"></a>Вывод из эксплуатации  

Физические диски автоматически снимаются с учета, когда они больше не используется, и создается соответствующее сообщение об ошибке. Существует несколько вариантов:  

-   Сбой носителя: физический диск несомненный сбой или Неработающая и должны быть заменены.  

-   Потеря связи: физический диск теряет подключение более чем на 15 минут подряд.  

-   Отсутствие ответа: физического диска задерживался из более чем 5 секунд как минимум три раза за час.  

>[!NOTE]
> Если подключение потеряно с несколькими физическими дисками сразу или всем узлом или дисковой полкой, служба работоспособности будет *не* снимает диски с учета, поскольку они являются главной проблемой.  

Если снятый с учета диск выполнял функции кэша для нескольких других физических дисков, они будут автоматически назначается новый диск кэша при его наличии. Никаких действий специального пользователя не требуется.  

#### <a name="restoring-resiliency"></a>Восстановление устойчивости  

После физического диска было прекращено, служба работоспособности немедленно начинает копировать данные на оставшиеся физические диски, чтобы восстановить полную устойчивость. После завершения этой данные полностью защищены и отказоустойчивы.  

>[!NOTE]
> Для такого немедленного восстановления требуется наличие достаточной емкости на оставшихся физических дисках.  

#### <a name="blinking-the-indicator-light"></a>Мигающий световой индикатор  

Если это возможно служба работоспособности начнется мигающий световой индикатор на этом физическом диске или на его слоте. Мигание продолжается неограниченно долго, вплоть до замены снятого с учета диска.  

>[!NOTE]
> В некоторых случаях диск может не удаться в, становится невозможным даже мигание индикатора работать — например, полной потере питания.  

#### <a name="physical-replacement"></a>Физическая замена  

Необходимо заменить снятого с учета физический диск, когда это возможно. Чаще всего это делается горячей замены т. е. выключение корпуса хранилища или узел не является обязательным. В разделе сбоя для расположения полезно и часть информации.  

#### <a name="verification"></a>Проверка

Когда вы вставляете новый диск, он проверяется от документ поддерживаемых компонентов (см. следующий раздел).

#### <a name="pooling"></a>Добавление в пул  

Если доступ разрешен, заменяющий диск автоматически заменяется своего предшественника в пуле на введите использования. На этом этапе система возвращается в исходное состояние идеальной работоспособности и ошибка исчезает.  

## <a name="supported-components-document"></a>Поддерживаемые компоненты документа  

Служба работоспособности предоставляет механизм принудительного применения только компоненты, используемые локальные дисковые пространства для тех, для предоставленных администратора или поставщика решений компоненты документа поддерживается. Это можно использовать, чтобы предотвратить случайное использование неподдерживаемого оборудования, вы или другие пользователи, что помогает соблюсти условия гарантии или договора. Эта функция действует только в настоящее время для физических дисковых устройств, включая твердотельные накопители, жесткие диски, и диски NVMe. Документ поддерживается компонентов можно ограничить на модель, производителям (необязательно) и версия встроенного по (необязательно).

### <a name="usage"></a>Использование  

Документ компонентов поддерживается использует синтаксис на основе XML. Мы рекомендуем с помощью любого текстового редактора, например Visual Studio Code (доступны бесплатно [здесь](http://code.visualstudio.com/)) или "Блокнот", чтобы создать XML-документ, который можно сохранить и использовать повторно.

#### <a name="sections"></a>Разделы

Документ состоит из двух независимых разделов: **дисков** и **кэша**.

Если **дисков** предоставляются раздела, присоединение пулы разрешены только указанные диски. Все отсутствующие в списке диски не могут присоединяться к пулам, что фактически исключает их использование в рабочей среде. Если в этом разделе оставлено пустым, любого диска будет разрешено присоединение пулов.

Если **кэша** разделе предоставляется, только диски, в списке будет использоваться для кэширования. Если в этом разделе оставлено пустым, локальные дисковые пространства будут попыток угадать на основе типа носителя и тип шины. Например если в развертывании используется твердотельные накопители (SSD) и жестких дисков (HDD), первое автоматически выбирается для кэширования; Тем не менее если в развертывании используется только с флэш накопителями, может потребоваться указать выше износостойкости устройств, которые вы хотите использовать для кэширования здесь.

>[!IMPORTANT]
> Документ поддерживается компонентов не имеет обратной силы для уже включенных в пул и дисков используется.  

#### <a name="example"></a>Пример  

```XML
<Components>

  <Disks>
    <Disk>
      <Manufacturer>Contoso</Manufacturer>
      <Model>XYZ9000</Model>
      <AllowedFirmware>
        <Version>2.0</Version>
        <Version>2.1</Version>
        <Version>2.2</Version>
      </AllowedFirmware>
      <TargetFirmware>
        <Version>2.1</Version>
        <BinaryPath>\\path\to\image.bin</BinaryPath>
      </TargetFirmware>
    </Disk>
  </Disks>

  <Cache>
    <Disk>
      <Manufacturer>Fabrikam</Manufacturer>
      <Model>QRSTUV</Model>
    </Disk>
  </Cache>

</Components>

```

Чтобы вывести список несколько дисков, просто добавить дополнительные ** &lt;диска&gt; ** тегов или раздел.

Чтобы запустить этот XML-код, при развертывании локальных дисковых пространств, используйте **- XML** флаг:

```PowerShell
Enable-ClusterS2D -XML <MyXML>
```

Чтобы задать или изменить документ компонентов поддерживается после дисковых пространств развертывания (т. е. После уже выполняется служба работоспособности), используйте следующий командлет PowerShell:

```PowerShell
$MyXML = Get-Content <\\path\to\file.xml> | Out-String  
Get-StorageSubSystem Cluster* | Set-StorageHealthSetting -Name "System.Storage.SupportedComponents.Document" -Value $MyXML  
```

>[!NOTE]
>Модель, изготовитель и версия встроенного должно точно соответствовать значения, которые можно получить с помощью **Get-PhysicalDisk** командлета. Это может отличаться от ваши ожидания «здравый смысл», в зависимости от реализации поставщика. Например вместо «Contoso», производитель может быть «CONTOSO-LTD», или может быть пустым, зато для модели указывается значение «Contoso-XZY9000».  

Это можно проверить с помощью командлета PowerShell.  

```PowerShell
Get-PhysicalDisk | Select Model, Manufacturer, FirmwareVersion  
```

## <a name="settings"></a>Параметры

В разделе [параметры службы работоспособности](health-service-settings.md).

## <a name="see-also"></a>См. также:

- [Отчеты о работоспособности службы](health-service-reports.md)
- [Ошибок службы работоспособности](health-service-faults.md)
- [Действия службы работоспособности](health-service-actions.md)
- [Параметры службы работоспособности](health-service-settings.md)
- [Локальные дисковые пространства в Windows Server 2016](../storage/storage-spaces/storage-spaces-direct-overview.md)
