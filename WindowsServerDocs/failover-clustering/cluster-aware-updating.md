---
title: Общие сведения о кластерном обновлении
ms.topic: article
ms.prod: windows-server-threshold
ms.manager: dongill
author: JasonGerend
ms.author: jgerend
ms.technology: storage-failover-clustering
ms.date: 08/06/2018
description: Кластерное обновление (CAU) автоматизирует установку обновления в кластерах под управлением Windows Server.
ms.assetid: 3c2993b4-aa81-452b-a5c3-3724ad95d892
ms.openlocfilehash: 77ccfe7dc9a769d602ff069d5f1d8e77522aa001
ms.sourcegitcommit: 0d0b32c8986ba7db9536e0b8648d4ddf9b03e452
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/17/2019
ms.locfileid: "59827425"
---
# <a name="cluster-aware-updating-overview"></a>Общие сведения о кластерном обновлении

> Относится к: Windows Server (полугодовой канал), Windows Server 2016, Windows Server 2012 R2, Windows Server 2012

В этом разделе представлен обзор кластера\-кластерного обновления \(CAU\), это функция, которая автоматизирует процесс обновления для программного обеспечения кластерные серверы сохранением доступности.

> [!NOTE]
> При обновлении [Storage Spaces Direct](../storage/storage-spaces/storage-spaces-direct-overview.md) кластеров, мы рекомендуем использовать кластерное обновление.
  
## <a name="BKMK_OVER"></a>Описание компонента  
Кластерное обновление — это автоматизированный компонент, который позволяет обновить серверы в [отказоустойчивого кластера](failover-clustering-overview.md) с незначительной или нулевой потерей доступности во время обновления. Во время прогона кластерное обновление прозрачно выполняет следующие задачи:  

1. Переводит каждый узел кластера в режим обслуживания узла.
2. Удаляет кластерные роли с узла.
3. Устанавливает обновления и все зависимые обновления.
4. При необходимости выполняет перезагрузку.
5. Выводит узел из режима обслуживания.
6. Восстанавливает кластерные роли на узле.
7. Переходит к обновлению следующего узла.

Для многих кластерных ролей в кластере процесс автоматического обновления вызывает плановую отработку отказа. Это может привести к временному прерыванию обслуживания подключенных клиентов. Тем не менее, в случае постоянную доступность рабочих нагрузок, таких как Hyper\-V с динамической миграции или файловый сервер с прозрачной отработкой отказа SMB, кластерное обновление позволяет управлять обновлениями кластера, не влияя на доступность службы.    
  
## <a name="practical-applications"></a>Практическое применение  
  
-   Кластерное обновление позволяет сократить простои в кластеризованных служб, уменьшает потребность в ручном обновлении и готовит окончания\-для\-обновления повысить надежность процесса для администратора кластера. Когда функция CAU используется вместе с непрерывно доступными рабочими нагрузками кластера, например непрерывно доступные файловые серверы \(рабочая нагрузка файлового сервера с прозрачной отработкой отказа SMB\) или Hyper\-V, кластер обновления могут быть выполнены с нуля влияя на доступность службы для клиентов.  
  
-   Кластерное обновление упрощает адаптацию ИТ-процессов на предприятии. Профили прогона обновления можно создавать для разных классов отказоустойчивых кластеров и затем централизованно управлять ими в общей папке, чтобы убедиться, что во всей ИТ-организации согласованно применять обновления, даже если кластерами управляют разные строки \-из\-бизнеса или Администраторы.  
  
-   Кластерное обновление позволяет запланировать запуск обновления ежедневно, раз в неделю или раз в месяц. Это позволяет согласовать обновление кластера с другими процессами управления.  
  
-   Кластерное обновление предоставляет расширяемую архитектуру для обновления программного обеспечения в кластере\-виду манере. Это можно использовать издателями, чтобы координировать установку обновлений программного обеспечения, которые не опубликованы для обновления Windows или Центра обновления Майкрософт или, которые не предоставляются Майкрософт, например, обновления для не\-драйверов устройств Microsoft.  
  
-   Кластерное обновление self\-режима обновления позволяет реализовать «кластера в поле» готовое решение \(набор кластерных физических компьютеров, обычно объединенных в одном корпусе\) для самостоятельного обновления. Как правило, такие решения развертываются в филиалах с минимальной локальной поддержкой. SELF\-режима обновления предоставляет существенные преимущества в этих сценариях развертывания.  
  
## <a name="important-functionality"></a>Важные функции  
Ниже приведено описание важные функции кластерного обновления.  
  
-   Пользовательский интерфейс \(пользовательского интерфейса\) -окно кластерного обновления - и набор командлетов, которые можно использовать для предварительного просмотра, применения и отслеживания и отчетов по обновлениям  
  
-   Окончание\-для\-завершить автоматизации кластера\-обновления \(прогона\), организованное с одного или нескольких компьютеров координатора обновлений  
  
-   Подключения по умолчанию\-, интегрируется с существующей агентом обновления Windows \(WUA\) и Windows Server Update Services \(WSUS\) инфраструктуры в Windows Server для применения важных Microsoft обновления  
  
-   Второй plug\-тем, что можно использовать для применения исправлений Майкрософт и, можно настроить для применения не\-обновлений Майкрософт  
  
-   Профили выполнения обновления, в которых можно указывать параметры запуска обновления, например максимальное число повторных попыток запуска процесса обновления на каждом узле Профили выполнения обновления позволяют повторно использовать одинаковые параметры для разных экземпляров обновления и использовать параметры обновления совместно с другими отказоустойчивыми кластерами.  
  
-   Расширяемая архитектура, которая поддерживает новые plug\-в разработке для координации другого узла\-обновление средств в кластере, например пользовательские установщики программного обеспечения, обновления, средства и сетевого адаптера или адаптера шины BIOS\( Адаптер ШИНЫ\) средства обновления.  
  
Кластерное обновление может координировать полное обновление в двух режимах кластеров:  
  
-   **SELF\-режима обновления** для этого режима кластерная роль CAU настраивается в качестве рабочей нагрузки на отказоустойчивом кластере, который должен быть обновлен, и определено расписание обновления. Затем кластер самостоятельно обновляется в запланированное время с использованием профиля по умолчанию или пользовательского профиля прогона обновления. В ходе прогона обновления на узле, который в этот момент является владельцем кластерной роли CAU, запускается процесс координатора обновлений, последовательно обновляющий каждый узел кластера. Чтобы обновить текущий узел кластера, кластерная роль CAU переводится на другой узел кластера, а новый процесс координатора обновлений на этом узле берет на себя управление прогоном обновления. В самостоятельно\-режима обновления, CAU может обновить отказоустойчивый кластер с помощью полностью автоматизированных, завершить\-для\-окончания процесса обновления. Администратор также может активироваться обновлений при\-требующих в этом режиме, или просто использовать удаленный\-обновление подход, при необходимости. В самостоятельно\-режима обновления, администратор может получить сводные данные о прогоне обновления в процессе выполнения необходимо подключиться к кластеру и выполнить **получить\-CauRun** командлета Windows PowerShell.  
  
-   **Удаленный\-режима обновления** для этого режима удаленный компьютер, называемый координатором обновлений, настраивается с помощью средств CAU. Координатор обновлений не является членом кластера, обновление которого проводится во время прогона обновления. На удаленном компьютере, администратор запускает на\-требуют выполнения обновления с помощью профиля по умолчанию или пользовательского профиля выполнения обновления. Удаленный\-режима обновления полезна для мониторинга реального\-время хода выполнения во время выполнения обновления, а также для кластеров под управлением установки основных серверных компонентов.  
  
## <a name="hardware-and-software-requirements"></a>Требования к аппаратному и программному обеспечению  

Кластерное обновление может использоваться во всех выпусках Windows Server, включая установки основных серверных компонентов. Подробную информацию о требованиях, см. в разделе [требования кластерного обновления и рекомендации](cluster-aware-updating-requirements.md).

### <a name="installing-cluster-aware-updating"></a>Установка кластерного обновления
Использовать кластерное обновление, установите компонент отказоустойчивой кластеризации в Windows Server и создайте отказоустойчивый кластер. Компоненты, поддерживающие кластерное обновление, автоматически устанавливаются на каждом узле кластера.

Для установки компонента "Средство отказоустойчивости кластеров" можно использовать следующие средства:
- Мастер добавления ролей и компонентов в диспетчере сервера
- [Install-WindowsFeature](https://docs.microsoft.com/powershell/module/servermanager/Install-WindowsFeature?view=winserver2012r2-ps&viewFallbackFrom=win10-ps) командлета Windows PowerShell
- Программа командной строки "Система обслуживания образов развертывания и управления ими" (DISM)

Дополнительные сведения см. в разделе [установить компонент отказоустойчивой кластеризации](create-failover-cluster.md#install-the-failover-clustering-feature).

Также необходимо установить средства отказоустойчивой кластеризации, которые являются частью средств удаленного администрирования сервера и устанавливаются по умолчанию при установке компонента отказоустойчивой кластеризации в диспетчере сервера. Средства отказоустойчивости кластеров включают кластерное обновление пользовательского интерфейса и командлетов PowerShell. 

Для поддержки различных режимов обновления CAU необходимо установить средства отказоустойчивости кластеров, как указано ниже.

- Чтобы использовать CAU в self\-режима обновления установить средства отказоустойчивости кластеров на каждом узле кластера.   
  
- Чтобы включить удаленный\-режима обновления установить средства отказоустойчивой кластеризации на компьютере, который имеет сетевое подключение к отказоустойчивому кластеру.  
  
> [!NOTE]  
> -   Нельзя использовать средства отказоустойчивой кластеризации в Windows Server 2012 для управления кластерного обновления на более новой версии Windows Server. 
> -   Для использования CAU только в удаленных\-режима обновления, установка средства отказоустойчивости кластеров на узлах кластера не требуется. Однако определенные функции CAU будут недоступны. Дополнительные сведения см. в разделе [требования и рекомендации для кластера\-кластерного обновления](cluster-aware-updating-requirements.md).  
> -   Если вы не используете CAU только в самостоятельно\-режима обновления, компьютер, на котором установлены средства CAU и управляющий обновлениями не может быть членом отказоустойчивого кластера.  
  
### <a name="enabling-self-updating-mode"></a>Включение режима самообновления
Чтобы включить режим самообновления, необходимо добавить кластерную роль кластерного обновления отказоустойчивый кластер. Чтобы сделать это, используйте один из следующих методов:
- В диспетчере серверов выберите **средства** > **кластерное обновление**, выберите в окне кластерное обновление **параметровсамообновлениянастройкакластера**. 
- В сеансе PowerShell выполните [Add-CauClusterRole](https://docs.microsoft.com/powershell/module/clusterawareupdating/Add-CauClusterRole?view=win10-ps) командлета.  
  
Чтобы удалить CAU, удалите компонент отказоустойчивой кластеризации или средства отказоустойчивой кластеризации с помощью диспетчера серверов, [Uninstall-WindowsFeature](https://docs.microsoft.com/powershell/module/servermanager/Uninstall-WindowsFeature?view=win10-ps) командлета, или команду DISM\-программ командной строки.  
  
### <a name="additional-requirements-and-best-practices"></a>Дополнительные требования и рекомендации  

Для успешного обновления узлов кластера через CAU и для получения дополнительных рекомендаций по настройке среды отказоустойчивой кластеризации для использования CAU можно запустить анализатор соответствия рекомендациям CAU.  
  
Подробные требования и рекомендации по использованию CAU, а также сведения о запуске анализатора соответствия рекомендациям для кластерного обновления, см. в разделе [требования и рекомендации для кластера\-кластерного обновления](cluster-aware-updating-requirements.md).  
  
### <a name="starting-cluster-aware-updating"></a>Запуск кластерного обновления  
  
##### <a name="to-start-cluster-aware-updating-from-server-manager"></a>Запуск кластерного обновления из диспетчера сервера  
  
1.  Запустите диспетчер сервера.  
  
2.  Выполните одно из следующих действий.  
  
    -   На **средства** меню, щелкните **кластера\-кластерного обновления**.  
  
    -   Если один или несколько узлов кластера или сам кластер добавлены в диспетчер серверов на **все серверы** странице справа\-щелкните имя узла \(или имя кластера\), а затем нажмите кнопку  **Обновление кластера**.  
  
## <a name="see-also"></a>См. также  
Следующие ссылки предоставляют дополнительные сведения об использовании кластерного обновления.  
  
-   [Требования и рекомендации для кластера\-кластерного обновления](cluster-aware-updating.md)  
  
-   [Кластер\-кластерного обновления: Часто задаваемые вопросы](cluster-aware-updating-faq.md)  
  
-   [Дополнительные параметры и профили прогона обновления для CAU](cluster-aware-updating-options.md)  
  
-   [Как подключить CAU\-рабочие модули](cluster-aware-updating-plug-ins.md)  
  
-   [Кластер\-кластерном обновлении командлетов в Windows PowerShell](https://docs.microsoft.com/powershell/module/clusterawareupdating/?view=win10-ps&viewFallbackFrom=winserverr2-ps)  
  
-   [Кластер\-кластерного обновления Plug\-справочника](https://docs.microsoft.com/previous-versions/windows/desktop/mscs/cluster-aware-update-plug-in-interfaces-and-classes)  
  

