---
title: Общие сведения о кластерном обновлении
ms.topic: article
ms.prod: windows-server
ms.manager: dongill
author: JasonGerend
ms.author: jgerend
ms.technology: storage-failover-clustering
ms.date: 08/06/2018
description: Обновление с поддержкой кластера (CAU) автоматизирует установку обновлений программного обеспечения в кластерах под управлением Windows Server.
ms.assetid: 3c2993b4-aa81-452b-a5c3-3724ad95d892
ms.openlocfilehash: e96223e0b4b44e87ade9dc8eb875f9aa7104f451
ms.sourcegitcommit: 6aff3d88ff22ea141a6ea6572a5ad8dd6321f199
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/27/2019
ms.locfileid: "71361255"
---
# <a name="cluster-aware-updating-overview"></a>Общие сведения о кластерном обновлении

> Относится к: Windows Server 2019, Windows Server 2016, Windows Server 2012 R2, Windows Server 2012

В этом разделе содержится обзор кластера @ no__t-0Aware с обновлением \(CAU @ no__t-2 — функции, которая автоматизирует процесс обновления программного обеспечения на кластеризованных серверах, сохраняя доступность.

> [!NOTE]
> При обновлении кластеров [Локальные дисковые пространства](../storage/storage-spaces/storage-spaces-direct-overview.md) рекомендуется использовать обновление с поддержкой кластера.
  
## <a name="BKMK_OVER"></a>Описание функции  
Кластерное обновление — это автоматизированная функция, которая позволяет обновлять серверы в [отказоустойчивом кластере](failover-clustering-overview.md) с незначительной потерей доступности в процессе обновления. Во время прогона обновления кластерное обновление прозрачно выполняет следующие задачи:  

1. Помещает каждый узел кластера в режим обслуживания узла.
2. Перемещает кластерные роли за пределы узла.
3. Устанавливает обновления и все зависимые обновления.
4. При необходимости выполняет перезагрузку.
5. Переводит узел в режим обслуживания.
6. Восстанавливает кластерные роли на узле.
7. Переходит к обновлению следующего узла.

Для многих кластерных ролей в кластере процесс автоматического обновления вызывает плановую отработку отказа. Это может привести к временному прерыванию обслуживания подключенных клиентов. Однако в случае непрерывных доступных рабочих нагрузок, таких как Hyper @ no__t-0V с динамической миграцией или файловый сервер с прозрачной отработкой отказа SMB, обновление с поддержкой кластера может координировать обновления кластера без влияния на доступность службы.    
  
## <a name="practical-applications"></a>Практическое применение  
  
-   CAU сокращает время простоя служб в кластеризованных службах, снижает потребность в способах обновления вручную и делает процесс обновления кластера End @ no__t-0to @ no__t-1end более надежным для администратора. Если функция CAU используется в сочетании с постоянно доступными рабочими нагрузками кластера, например постоянно доступных файловых серверов \(file Server с прозрачной отработкой отказа SMB no__t-1 или Hyper @ no__t-2V, можно выполнить обновления кластера. с нулевым влиянием на доступность службы для клиентов.  
  
-   Кластерное обновление упрощает адаптацию ИТ-процессов на предприятии. Обновление профилей выполнения можно создать для различных классов отказоустойчивых кластеров, а затем управлять ими централизованно на файловом ресурсе, чтобы обеспечить согласованное применение обновлений в рамках ИТ-организации, даже если кластеры управляются разными строки @ no__t-0of @ no__t-1Business или Администраторы.  
  
-   Кластерное обновление позволяет запланировать запуск обновления ежедневно, раз в неделю или раз в месяц. Это позволяет согласовать обновление кластера с другими процессами управления.  
  
-   CAU предоставляет расширяемую архитектуру для обновления инвентаризации программного обеспечения кластера в кластере @ no__t-0aware. Они могут использоваться издателями для координации установки обновлений программного обеспечения, которые не публикуются в Центр обновления Windows или Центр обновления Майкрософт или недоступны в корпорации Майкрософт, например обновления для драйверов устройств, не относящихся к no__t-0Microsoft.  
  
-   Режим Self @ no__t-0updating позволяет устройству "кластер в Box" \(A набора кластеризованных физических компьютеров, обычно упакованных в один корпус, а no__t-2 — для обновления. Как правило, такие решения развертываются в филиалах с минимальной локальной поддержкой. Режим "Self @ no__t-0updating" обеспечивает отличное значение в этих сценариях развертывания.  
  
## <a name="important-functionality"></a>Важные функции  
Ниже приведено описание важных функций обновления, поддерживающих кластер.  
  
-   Пользовательский интерфейс \(UI @ no__t-1 — обновление окна с поддержкой кластера, а также набор командлетов, которые можно использовать для просмотра, применения, мониторинга и отчетов по обновлениям.  
  
-   Операция End @ no__t-0to @ no__t-1end для операции Cluster @ no__t-2updating, \(AN, обновляет Run @ no__t-4, управляемую одним или несколькими компьютерами координатора обновлений  
  
-   Подключаемый модуль @ no__t-0in по умолчанию, который интегрируется с существующим агентом Центр обновления Windows \(WUA @ no__t-2 и Windows Server Update Services \(WSUS @ no__t-4 в Windows Server для применения важных обновлений Майкрософт.  
  
-   Второй подключаемый модуль @ no__t-0in, который можно использовать для применения исправлений Майкрософт. его можно настроить для применения обновлений, отличных от @ no__t-1Microsoft  
  
-   Профили выполнения обновления, в которых можно указывать параметры запуска обновления, например максимальное число повторных попыток запуска процесса обновления на каждом узле Профили выполнения обновления позволяют повторно использовать одинаковые параметры для разных экземпляров обновления и использовать параметры обновления совместно с другими отказоустойчивыми кластерами.  
  
-   Расширяемая архитектура, которая поддерживает новую разработку подключаемых модулей @ no__t-0in для координации других средств node @ no__t-1updating в кластере, таких как пользовательские установщики программного обеспечения, средства обновления BIOS, сетевой адаптер или адаптер шины узла \(HBA @ no__t-3 Обновление средств.  
  
Обновление с поддержкой кластера может координировать полную операцию обновления кластера в двух режимах:  
  
-   **Режим Self @ no__t-1updating** В этом режиме кластерная роль CAU настраивается в качестве рабочей нагрузки для обновляемого отказоустойчивого кластера и определяется соответствующее расписание обновления. Затем кластер самостоятельно обновляется в запланированное время с использованием профиля по умолчанию или пользовательского профиля прогона обновления. В ходе прогона обновления на узле, который в этот момент является владельцем кластерной роли CAU, запускается процесс координатора обновлений, последовательно обновляющий каждый узел кластера. Чтобы обновить текущий узел кластера, кластерная роль CAU переводится на другой узел кластера, а новый процесс координатора обновлений на этом узле берет на себя управление прогоном обновления. В режиме Self @ no__t-0updating, CAU может обновить отказоустойчивый кластер с помощью полностью автоматизированного процесса End @ no__t-1to @ no__t-2end обновления. Администратор может также активировать обновления в @ no__t-0demand в этом режиме или просто использовать удаленный метод @ no__t-1updating, если это необходимо. В режиме Self @ no__t-0updating администратор может получить сводные сведения о выполняемом прогоне обновления, подключившись к кластеру и запустив командлет **Get @ no__t-2CauRun** Windows PowerShell.  
  
-   **Remote @ no__t-1updating Mode** В этом режиме удаленный компьютер, который называется координатором обновлений, настраивается с помощью средств CAU. Координатор обновлений не является членом кластера, обновление которого проводится во время прогона обновления. С удаленного компьютера администратор запускает в процессе обновления @ no__t-0demand, используя стандартный или настраиваемый профиль выполнения обновления. Режим "удаленный @ no__t-0updating" полезен для наблюдения за реальными процессами @ no__t-1time во время прогона обновления и для кластеров, работающих в установках Server Core.  
  
## <a name="hardware-and-software-requirements"></a>Требования к аппаратному и программному обеспечению  

CAU можно использовать во всех выпусках Windows Server, включая установки Server Core. Подробные сведения о требованиях см. в статье [требования к кластерному обновлению и](cluster-aware-updating-requirements.md)рекомендации.

### <a name="installing-cluster-aware-updating"></a>Установка обновления с поддержкой кластера
Чтобы использовать CAU, установите компонент отказоустойчивой кластеризации в Windows Server и Создайте отказоустойчивый кластер. Компоненты, поддерживающие кластерное обновление, автоматически устанавливаются на каждом узле кластера.

Для установки компонента "Средство отказоустойчивости кластеров" можно использовать следующие средства:
- Мастер добавления ролей и компонентов в диспетчере сервера
- Командлет 1Windows PowerShell [Install-@no__t WindowsFeature](https://docs.microsoft.com/powershell/module/servermanager/Install-WindowsFeature?view=winserver2012r2-ps&viewFallbackFrom=win10-ps)
- Программа командной строки "Система обслуживания образов развертывания и управления ими" (DISM)

Дополнительные сведения см. [в разделе Установка компонента отказоустойчивой кластеризации](create-failover-cluster.md#install-the-failover-clustering-feature).

Также необходимо установить средства отказоустойчивой кластеризации, которые являются частью средства удаленного администрирования сервера и устанавливаются по умолчанию при установке компонента отказоустойчивой кластеризации в диспетчер сервера. Средства отказоустойчивой кластеризации включают в себя пользовательский интерфейс обновления с поддержкой кластера и командлеты PowerShell. 

Для поддержки различных режимов обновления CAU необходимо установить средства отказоустойчивости кластеров, как указано ниже.

- Чтобы использовать CAU в режиме Self @ no__t-0updating, установите средства отказоустойчивой кластеризации на каждом узле кластера.   
  
- Чтобы включить удаленный режим @ no__t-0updating, установите средства отказоустойчивой кластеризации на компьютере с сетевым подключением к отказоустойчивому кластеру.  
  
> [!NOTE]  
> -   Средства отказоустойчивой кластеризации в Windows Server 2012 нельзя использовать для управления кластерным обновлением в более новой версии Windows Server. 
> -   Чтобы использовать CAU только в удаленном режиме @ no__t-0updating, установка средств отказоустойчивой кластеризации на узлах кластера не требуется. Однако определенные функции CAU будут недоступны. Дополнительные сведения см. в разделе [требования и рекомендации по обновлению Cluster @ no__t-1Aware](cluster-aware-updating-requirements.md).  
> -   Если вы не используете CAU только в режиме Self @ no__t-0updating, то компьютер, на котором установлены средства CAU и который координирует обновления, не может быть членом отказоустойчивого кластера.  
  
### <a name="enabling-self-updating-mode"></a>Включение режима самообновления
Чтобы включить режим самообновления, необходимо добавить кластерную роль обновления с поддержкой кластера в отказоустойчивый кластер. Для этого используйте один из следующих методов.
- В диспетчер сервера выберите **инструменты** > **обновление с поддержкой кластера**, а затем в окне кластерное обновление выберите **настроить параметры самостоятельного обновления кластера**. 
- В сеансе PowerShell выполните командлет [Add-кауклустерроле](https://docs.microsoft.com/powershell/module/clusterawareupdating/Add-CauClusterRole?view=win10-ps) .  
  
Чтобы удалить CAU, удалите компонент отказоустойчивой кластеризации или средства отказоустойчивой кластеризации с помощью диспетчер сервера, командлета [uninstall-WindowsFeature](https://docs.microsoft.com/powershell/module/servermanager/Uninstall-WindowsFeature?view=win10-ps) или средства DISM Command @ no__t-1line.  
  
### <a name="additional-requirements-and-best-practices"></a>Дополнительные требования и рекомендации  

Для успешного обновления узлов кластера через CAU и для получения дополнительных рекомендаций по настройке среды отказоустойчивой кластеризации для использования CAU можно запустить анализатор соответствия рекомендациям CAU.  
  
Подробные требования и рекомендации по использованию CAU, а также сведения о выполнении анализатор соответствия рекомендациям CAU см. в разделе [требования и рекомендации по обновлению кластера @ no__t-1Aware](cluster-aware-updating-requirements.md).  
  
### <a name="starting-cluster-aware-updating"></a>Запуск обновления с поддержкой кластера  
  
##### <a name="to-start-cluster-aware-updating-from-server-manager"></a>Запуск обновления с поддержкой кластера с диспетчер сервера  
  
1.  Запустите диспетчер сервера.  
  
2.  Выполните одно из следующих действий.  
  
    -   В меню **Сервис** выберите **cluster @ No__t-2Aware обновление**.  
  
    -   Если один или несколько узлов кластера или кластер добавляются в диспетчер сервера, на странице **все серверы** щелкните правой кнопкой @ no__t-1Click имя узла \(or имя кластера @ no__t-3, а затем щелкните **обновить кластер**.  
  
## <a name="see-also"></a>См. также  
Дополнительные сведения об использовании кластерного обновления см. по следующим ссылкам.  
  
-   [Требования и рекомендации для кластера @ no__t — обновление 1Aware](cluster-aware-updating.md)  
  
-   [Cluster @ no__t-1Aware обновление: вопросы и ответы](cluster-aware-updating-faq.md)  
  
-   [Дополнительные параметры и обновление профилей выполнения для CAU](cluster-aware-updating-options.md)  
  
-   [Как работает функция CAU Plug @ no__t-1ins](cluster-aware-updating-plug-ins.md)  
  
-   [Командлеты обновления Cluster @ no__t-1Aware в Windows PowerShell](https://docs.microsoft.com/powershell/module/clusterawareupdating/?view=win10-ps&viewFallbackFrom=winserverr2-ps)  
  
-   [Cluster @ no__t-1Aware. обновление справочника по вилке @ no__t-2in](https://docs.microsoft.com/previous-versions/windows/desktop/mscs/cluster-aware-update-plug-in-interfaces-and-classes)  
  

