---
title: "Обзор кластерного обновления"
ms.topic: article
ms.prod: windows-server-threshold
ms.manager: dongill
author: JasonGerend
ms.author: jgerend
ms.technology: storage-failover-clustering
ms.date: 3/23/2017
description: "Кластерное обновление (CAU) автоматизирует установки обновления программного обеспечения в кластерах с ОС Windows Server."
ms.assetid: 3c2993b4-aa81-452b-a5c3-3724ad95d892
ms.openlocfilehash: 68336741accabd6e4cb0da5dbd708be707f68df6
ms.sourcegitcommit: 583355400f6b0d880dc0ac6bc06f0efb50d674f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/17/2017
---
# <a name="cluster-aware-updating-overview"></a>Обзор кластерного обновления

> Применяется к: Windows Server (канал точками годовой), Windows Server 2016, Windows Server 2012 R2, Windows Server 2012

Здесь представлен обзор обновления с поддержкой Cluster\ \(CAU\), этот компонент позволяет автоматизировать обновление программ на кластерных серверах сохранением доступности.

> [!NOTE]
> При обновлении [локальных дисковых пространств](../storage/storage-spaces/storage-spaces-direct-overview.md) кластеры, мы рекомендуем использовать кластерное обновление.
  
## <a name="BKMK_OVER"></a>Описание компонентов  
Кластерное обновление — это автоматизированный компонент, который позволяет обновлять серверы в [отказоустойчивого кластера](failover-clustering-overview.md) с минимальной или нулевой потерей доступности во время процесса обновления. Во время прогона обновления кластерное обновление прозрачно выполняет следующие задачи:  

1. Переводит каждый узел кластера в режим обслуживания узла.
2. Удаляет кластерные роли с узла.
3. Устанавливает обновления и все зависимые обновления.
4. При необходимости выполняет перезагрузку.
5. Выводит узел из режима обслуживания.
6. Восстанавливает кластерные роли на узле.
7. Переходит к обновлению следующего узла.

Для многих кластерных ролей в кластере процесс автоматического обновления запускает плановую отработку отказа. Это может привести к временному прерыванию обслуживания подключенных клиентов. Тем не менее в случае постоянно доступных рабочих нагрузок, например Hyper\-V с динамической миграцией или файловый сервер с прозрачной отработкой отказа SMB, кластерное обновление позволяет управлять обновлениями кластера, не влияя на доступность служб.    
  
## <a name="practical-applications"></a>Практическое применение  
  
-   Кластерное обновление позволяет сократить простои служб, уменьшает потребность в ручном обновлении и делает end\ заполнением весь кластер, повысить надежность процесса обновления для администратора. Если функция CAU используется вместе с непрерывно доступными рабочими нагрузками кластера, например непрерывно доступные файловые серверы \ (рабочая нагрузка файлового сервера с прозрачной Failover\ SMB) или Hyper\-V, кластер можно обновлять с нуля влияя на доступность службы для клиентов.  
  
-   Кластерное обновление упрощает адаптацию ИТ-процессов на предприятии. Профили выполнения обновления можно создавать для разных классов отказоустойчивых кластеров и затем централизованно управлять ими в общей папки, убедитесь, что во всей организации согласованно применять обновления, даже если кластерами управляют разные lines\ of\ бизнес-или Администраторы.  
  
-   Кластерное обновление позволяет запланировать запуск обновления через регулярные интервалы ежедневно, еженедельно или ежемесячно позволяет согласовать обновление кластера с другими процессами управления.  
  
-   Кластерное обновление предоставляет расширяемую архитектуру для обновления программного обеспечения с учетом cluster\ особенностей. Это можно использовать издателями, чтобы координировать установку обновлений программного обеспечения, которые не опубликованы в центре обновления Windows или Центра обновления Майкрософт или, которые не предоставляются Майкрософт, например, обновлений для драйверов устройств, не являющихся Microsoft.  
  
-   Режим многоразовый обновления CAU позволяет реализовать готовое решение "кластера в поле» \ (набор кластерных физических компьютеров, обычно объединенных в один chassis\) для самостоятельного обновления. Как правило такие решения развертываются в филиалах с минимальной локальной поддержкой по управлению кластерами. Режим многоразовый обновления предоставляет существенные преимущества в этих сценариях развертывания.  
  
## <a name="important-functionality"></a>Важные функции  
Ниже описаны важные функции кластерного обновления.  
  
-   Пользовательский интерфейс \(UI\) - окно кластерного обновления - и набор командлетов, которые можно использовать для предварительного просмотра, применения и отслеживания и отчетов по обновлениям  
  
-   End\ заполнением-автоматизацию операции обновления cluster\ \ (обновление Отладка), под управлением одного или нескольких компьютеров координатора обновлений.  
  
-   По умолчанию в модулей с существующей \(WUA\) агента обновления Windows и инфраструктуры Windows Server Update Services \(WSUS\) в Windows Server для применения важных обновлений Майкрософт  
  
-   Второй модулей, в который можно использовать для применения исправлений Майкрософт и, могут быть настроены для применения обновлений Майкрософт для отличных  
  
-   Профили выполнения обновления, которой можно настроить параметры прогона обновления, например максимальное число попыток обновления на каждом узле. Профили выполнения обновления позволяют повторно использовать те же параметры разных экземпляров обновления и использовать параметры обновления совместно с другими отказоустойчивыми кластерами.  
  
-   Расширяемая архитектура, которая поддерживает возможности разработки новых модулей в управлять другими средствами обновления node\ в кластере, например пользовательскими установщиками программного обеспечения, средства обновления BIOS и сетевого адаптера или шины адаптера \(HBA\) средств обновления.  
  
Кластерное обновление координирует полное обновление в двух режимах кластеров:  
  
-   **Режим обновления многоразовый** для этого режима кластерная роль CAU настраивается как рабочая нагрузка на отказоустойчивом кластере, который необходимо обновить, и составляется расписание обновления определен. Кластер самостоятельно обновляется в запланированное время с помощью профиля по умолчанию или пользовательского профиля выполнения обновления. Во время прогона обновления кластерное обновление обновления процесс координатора обновлений запускает на узле, которому принадлежит кластерная роль CAU, и процесс обновлений, последовательно обновляющий каждый узел кластера. Чтобы обновить текущий узел кластера, кластерная роль CAU будет перемещена на другой узел кластера, а новый процесс координатора обновлений на этом узле берет на себя управление прогоном обновления. В режиме обновления многоразовый кластерное обновление может обновить отказоустойчивый кластер с помощью полной автоматизации, end\ заполнением части процесса обновления. Администратор также может запустить обновление запросу в этом режиме, или использовать метод remote\ обновления. В режиме обновления многоразовый администратор можно получить сводные данные о выполнении обновления выполняется необходимо подключиться к кластеру и выполнить **Get\-CauRun** командлета Windows PowerShell.  
  
-   **Режим обновления Remote\** для этого режима удаленный компьютер, называемый координатором обновлений, настраивается с помощью средств CAU. Координатор обновлений не является членом кластера, обновление которого проводится во время прогона обновления. С удаленного компьютера администратор запускает запросу прогона обновления с помощью профиля по умолчанию или пользовательского профиля выполнения обновления. Режим обновления Remote\ полезен для отслеживания хода выполнения во время включающее во время прогона обновления, а также для кластеров, работающих под управлением установки основных серверных компонентов.  
  
## <a name="hardware-and-software-requirements"></a>Требования к оборудованию и программному обеспечению  

Кластерное обновление доступно во всех выпусках Windows Server, включая установки основных серверных компонентов. Подробную информацию о требованиях, в разделе [кластерное обновление требования и рекомендации](cluster-aware-updating-requirements.md).

### <a name="installing-cluster-aware-updating"></a>Установка кластерного обновления
Использовать кластерное обновление, установите компонент отказоустойчивой кластеризации в Windows Server и создайте отказоустойчивый кластер. Компоненты, поддерживающие кластерное автоматически устанавливаются на каждом узле кластера.

Чтобы установить компонент отказоустойчивой кластеризации, можно использовать следующие средства:
- Мастер добавления ролей и компонентов в диспетчере сервера
- [Install-WindowsFeature](https://technet.microsoft.com/itpro/powershell/windows/server-manager/install-windowsfeature) командлета Windows PowerShell
- Средство командной строки системы обслуживания образов развертывания и управления ими (DISM)

Дополнительные сведения см. в разделе [Установка или удаление ролей, служб ролей или компонентов](https://technet.microsoft.com/library/hh831809(v=ws.11).aspx).

Кроме того, необходимо установить средства отказоустойчивой кластеризации, которые устанавливаются по умолчанию при установке компонента отказоустойчивости кластеров в диспетчере серверов и часть средства удаленного администрирования сервера. Средства отказоустойчивости кластеров включают кластерное обновление пользовательского интерфейса и командлеты PowerShell. 

Необходимо установить средства отказоустойчивости кластеров для поддержки различных режимов обновления CAU, следующим образом:

- Чтобы использовать CAU в режиме многоразовый обновления, установите средства отказоустойчивости кластеров на каждом узле кластера.   
  
- Чтобы включить режим remote\ обновления, установите средства отказоустойчивой кластеризации на компьютере, который имеет подключение к сети для отказоустойчивого кластера.  
  
> [!NOTE]  
> -   Для управления кластерное обновление на более новую версию Windows Server, нельзя использовать средства отказоустойчивости кластеров в Windows Server 2012. 
> -   Для использования CAU только в режим обновления remote\, не требуется установка средства отказоустойчивости кластеров на узлах кластера. Однако в некоторых функций CAU, не будут доступны. Дополнительные сведения см. в разделе [требования и рекомендации по обновлению с поддержкой Cluster\](cluster-aware-updating-requirements.md).  
> -   Если вы используете CAU только в режим обновления многоразовый, компьютер, на котором установлены средства кластерного обновления, управляющий обновлениями, не может быть членом отказоустойчивого кластера.  
  
### <a name="enabling-self-updating-mode"></a>Включение режима самообновления
Чтобы включить режим самообновления, необходимо добавить кластерную роль кластерного обновления отказоустойчивый кластер. Чтобы сделать это, используйте один из следующих методов:
- В диспетчере сервера выберите **средства** > **кластерное обновление**, выберите в окне кластерное обновление **параметров самообновления кластера Настройка**. 
- В сеансе PowerShell выполните [Add-CauClusterRole](https://technet.microsoft.com/itpro/powershell/windows/cluster-aware-updating/add-cauclusterrole) командлета.  
  
Чтобы удалить CAU, удалите отказоустойчивости кластеров или средства отказоустойчивой кластеризации с помощью диспетчера сервера [Uninstall-WindowsFeature](https://technet.microsoft.com/itpro/powershell/windows/server-manager/uninstall-windowsfeature) командлета, или средства командной строки DISM.  
  
### <a name="additional-requirements-and-best-practices"></a>Дополнительные требования и рекомендации  

Для проверки успешного обновления узлов кластера, и дополнительные рекомендации по настройке среды отказоустойчивой кластеризации для использования CAU можно запустить анализатор соответствия рекомендациям для кластерного обновления.  
  
Подробные требования и рекомендации по использованию CAU, а также сведения о запуске анализатора соответствия рекомендациям для кластерного обновления см. в разделе [требования и рекомендации по обновлению с поддержкой Cluster\](cluster-aware-updating-requirements.md).  
  
### <a name="starting-cluster-aware-updating"></a>Запуск кластерного обновления  
  
##### <a name="to-start-cluster-aware-updating-from-server-manager"></a>Чтобы запустить кластерное обновление с помощью диспетчера сервера  
  
1.  Запустите диспетчер сервера.  
  
2.  Выполните одно из следующих действий.  
  
    -   На **средства** меню, нажмите кнопку **обновления с поддержкой Cluster\**.  
  
    -   Если один или несколько узлов кластера или сам кластер добавлены в диспетчер сервера, на **все серверы** страницы, щелкните правой кнопкой мыши имя узла \ (или имя cluster\), а затем нажмите кнопку **обновить кластер**.  
  
## <a name="see-also"></a>См. также:  
Дополнительные сведения об использовании кластерного обновления по следующим ссылкам.  
  
-   [Требования и рекомендации по обновлению с поддержкой Cluster\](cluster-aware-updating.md)  
  
-   [Обновления с поддержкой Cluster\: Вопросы и ответы](cluster-aware-updating-faq.md)  
  
-   [Дополнительные параметры и профили прогона обновления для CAU](cluster-aware-updating-options.md)  
  
-   [Работа модулей модулей кластерного обновления](cluster-aware-updating-plug-ins.md)  
  
-   [Командлеты Cluster\ учитывать обновления в Windows PowerShell](https://go.microsoft.com/fwlink/p/?LinkId=237675)  
  
-   [Cluster\ обновления с поддержкой модулей в ссылку](https://msdn.microsoft.com/library/hh418084.aspx)  
  

