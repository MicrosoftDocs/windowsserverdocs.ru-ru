---
title: Разработка подключаемый модуль шлюза
description: Разработка подключаемый модуль шлюза Windows Admin Center SDK (проект Honolulu)
ms.technology: manage
ms.topic: article
author: nwashburn-ms
ms.author: niwashbu
ms.date: 09/18/2018
ms.localizationpriority: medium
ms.prod: windows-server-threshold
ms.openlocfilehash: 93cee5b8e3611a264119947103d22d9aa3b9a56b
ms.sourcegitcommit: be0144eb59daf3269bebea93cb1c467d67e2d2f1
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/20/2018
ms.locfileid: "4081161"
---
# Разработка подключаемый модуль шлюза

>Относится к: Windows Admin Center, ознакомительная версия Windows Admin Center

Подключаемый модуль шлюза Windows Admin Center позволяет связи API из пользовательского интерфейса средства или решения для целевого узла.  Windows Admin Center размещена служба шлюза, которая ретранслирует команды и сценарии с подключаемыми модулями шлюза для выполнения на целевом узлах. Службу шлюза можно расширить для включения пользовательских шлюза подключаемые модули, которые поддерживают протоколы, отличные от по умолчанию.

Эти подключаемые модули шлюза включены по умолчанию с помощью Windows Admin Center:

* Подключаемый модуль шлюза PowerShell
* Подключаемый модуль шлюза WMI

Если вы хотите обмениваться данными с протоколу, отличному от PowerShell или WMI, например с помощью REST, вы можете создать собственные подключаемого модуля шлюза.  Подключаемые модули шлюза загружаются в отдельном домене приложения из существующих процесса шлюза, но использовать тот же уровень повышение прав для прав.

> [!NOTE]
> Не знакомы с типами другое расширение? Дополнительные сведения о [расширяемости типы архитектуры и расширение](understand-extensions.md).

## Подготовка среды

Если вы еще не сделали этого, [Подготовьте свою среду](prepare-development-environment.md) , установив зависимостей и глобального компонентов, необходимых для всех проектов.

## Создать подключаемый модуль шлюза (библиотека по C#)

Чтобы создать подключаемый модуль шлюза пользовательские, создайте новый C# класс, реализующий ```IPlugIn``` интерфейс из ```Microsoft.ManagementExperience.FeatureInterfaces``` пространства имен.  

> [!NOTE]
> ```IFeature``` Интерфейса, доступных в более ранних версиях пакета SDK, теперь помечен как устаревший.  Все разработки подключаемый модуль шлюза должен использовать IPlugIn (при необходимости абстрактный класс HttpPlugIn).

### Скачать пример из GitHub

Чтобы быстро приступить к работе с подключаемый модуль шлюза пользовательские, можно клонировать или скачать копию нашего [примера C# подключаемый модуль проекта](https://github.com/Microsoft/windows-admin-center-sdk/tree/master/GatewayPluginExample/Plugin) из наших пакета SDK Windows Admin Center [сайта GitHub](https://aka.ms/wacsdk).

### Добавление содержимого

Добавьте новое содержимое в клонированную копию [подключаемый модуль проекта C# пример](https://github.com/Microsoft/windows-admin-center-sdk/tree/master/GatewayPluginExample/Plugin) проекта (или собственный проект) для хранения пользовательских API-интерфейсы, а затем сборка файла DLL подключаемого модуля шлюза пользовательских для использования в следующих шагах.

### Развертывание подключаемого модуля для тестирования

Проверки подключаемого модуля шлюза пользовательские DLL загружать его в процессе шлюз Windows Admin Center.

Windows Admin Center ищет все подключаемые модули в ```plugins``` папку в папке данных приложения текущего компьютера (с помощью CommonApplicationData значения перечисления Environment.SpecialFolder). В Windows 10 — это расположение ```C:\ProgramData\Server Management Experience```.  Если ```plugins``` папки еще не существует, можно создать папку самостоятельно.

> [!NOTE]
> Вы можете переопределить расположение подключаемого модуля в отладочной сборке, изменив значение конфигурации «StaticsFolder». При отладке локально, этот параметр находится в App.Config рабочего стола решения. 

Подключаемые модули во вложенной папке (в этом примере ```C:\ProgramData\Server Management Experience\plugins```)

* Создайте новую папку с тем же именем, что ```Name``` значения ```Feature``` в вашей подключаемого модуля шлюза пользовательские DLL (в нашем примере проекте ```Name``` — «UЗапрет на примере»)
* Скопируйте файл DLL подключаемого модуля шлюза пользовательских эту новую папку
* Запустите процесс Windows Admin Center

После перезагрузки процесс администратора Windows, вы сможете осуществлять API в вашей подключаемого модуля шлюза пользовательские DLL, выполнив GET, PUT, исправление, удалить или публикации ```http(s)://{domain|localhost}/api/nodes/{node}/features/{feature name}/{identifier}```

### Необязательно: Присоединение к подключаемого модуля для отладки

В Visual Studio 2017 меню "Отладка" выберите «Присоединение к процессу». На следующем шаге прокрутите список доступных процессов и выберите SMEDesktop.exe, а затем нажмите кнопку «Присоединить». Один раз запуске отладчика, можно поместить точку останова в коде компонентов и затем упражнении через выше формат URL-адреса. Наш пример с проектом (имя компонента: «UЗапрет на примере») — URL-адрес: "http://localhost:6516/api/nodes/fake-server.my.domain.com/features/Sample%20Uno»

## Создание расширения средства с помощью Windows Admin Center CLI ##

Теперь нам необходимо создать расширение средства, из которой вы можете вызвать подключаемого пользовательских шлюза.  Создание или перейдите к папке, где вы хотите хранить файлы проекта, откройте командную строку и задать эту папку в качестве рабочий каталог.  С помощью CLI центра администрирования Windows, который ранее был установлен, создайте новое расширение с помощью следующего синтаксиса:

```
wac create --company "{!Company Name}" --tool "{!Tool Name}"
```

| Значение | Объяснение | Пример. |
| ----- | ----------- | ------- |
| ```{!Company Name}``` | Название компании (с пробелами) | ```Contoso Inc``` |
| ```{!Tool Name}``` | Ваше средство имя (пробелы) | ```Manage Foo Works``` |

Вот пример использования:

```
wac create --company "Contoso Inc" --tool "Manage Foo Works"
```

В результате создается новая папка в текущий рабочий каталог, используя имя для вашего средства, копирует все необходимые шаблона файлы в свой проект и настраивает файлы с именем вашей компании и средства.  

Затем измените каталог в папке только что создали, а затем установите необходимые локальные зависимости, выполнив следующую команду:

```
npm install
```

По завершении этого настройки все необходимые для загрузки нового расширения в Windows Admin Center. 

## Подключение к вашей подключаемого модуля шлюза пользовательского расширения средства

Теперь, когда вы создали расширения с помощью Windows Admin Center CLI, можно приступать к подключаемого пользовательских шлюз, расширения средства, выполнив следующие действия:

- Добавление [пустой модуль](guides\add-module.md)
- Использовать [подключаемый модуль шлюза пользовательских](guides\use-custom-gateway-plugin.md) в расширении средство
 
## Создание и загрузка расширения

Затем создание и загрузка расширения в Windows Admin Center.  Откройте окно командной строки, измените каталог на каталог источника, а затем все готово для построения.

* Создание и обслуживание с помощью Gulp:

    ```
    gulp build
    gulp serve -p 4201
    ```

Обратите внимание, что необходимо выбрать порт, который в данный момент будет не занят. Убедитесь, что вы не используете порт, на котором работает Windows Admin Center.

Проект можно загрузить в локальный экземпляр Windows Admin Center для тестирования, присоединив локально обслуживаемый проект к Windows Admin Center.

* Запустите Windows Admin Center в веб-браузере
* Откройте отладчик (F12)
* Откройте консоль и введите следующую команду:

    ```
    MsftSme.sideLoad("http://localhost:4201")
    ```

*   Обновите веб-браузер

Теперь проект будет отображаться в списке "Средства" (неопубликованный) рядом с соответствующим именем.

## Выбрать другую версию пакета SDK Windows Admin Center

Поддержание в актуальном состоянии с помощью пакета SDK изменений и платформы расширения очень просто.  Прочитать о том, как [другая версия целевого](target-sdk-version.md) пакета SDK Windows Admin Center.