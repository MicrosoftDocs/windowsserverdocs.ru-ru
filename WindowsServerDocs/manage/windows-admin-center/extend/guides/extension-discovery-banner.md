---
title: Включение баннера обнаружения расширений
description: Включение баннера обнаружения расширений
ms.topic: article
author: daniellee-msft
ms.author: jol
ms.date: 06/06/2019
ms.localizationpriority: medium
ms.openlocfilehash: ef08eec08b43f83121bc94abc46a5f657556db65
ms.sourcegitcommit: dfa48f77b751dbc34409aced628eb2f17c912f08
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/07/2020
ms.locfileid: "87945026"
---
# <a name="enabling-the-extension-discovery-banner"></a>Включение баннера обнаружения расширений

>Область применения. Windows Admin Center, ознакомительная версия Windows Admin Center

Функция баннера обнаружения расширений появилась в выпуске Windows Admin Center (Предварительная версия) 1903. Эта функция позволяет расширению объявить изготовителя и модели оборудования сервера, которые он поддерживает, а также когда пользователь подключается к серверу или кластеру, для которого доступно расширение, для простоты установки расширения отображается баннер уведомления. Разработчики расширений смогут получить дополнительную видимость своих расширений, а пользователи смогут легко обнаружить дополнительные возможности управления для своих серверов.

![Баннер обнаружения расширения](../../media/extend-guides-extension-discovery-banner/extension-discovery-banner.png)

## <a name="how-the-extension-discovery-banner-works"></a>Как работает баннер обнаружения расширений

При запуске центра администрирования Windows он подключается к зарегистрированным веб-каналам расширений и получает метаданные для доступных пакетов расширений. Затем, когда пользователь подключается к серверу или кластеру в центре администрирования Windows, мы прочитали изготовителя и модель оборудования сервера, которые будут отображаться в средстве обзора. Если мы обнаружили расширение, которое объявляет, что оно поддерживает производителя и модель текущего сервера, мы покажем баннер, чтобы сообщить пользователю об этом. Щелкнув ссылку "настроить сейчас", вы перейдете пользователя в Диспетчер расширений, где он сможет установить расширение.

## <a name="how-to-implement-the-extension-discovery-banner"></a>Как реализовать баннер обнаружения расширений

Метаданные "Tags" в nuspec-файле используются для объявления изготовителя оборудования и (или) моделей, поддерживаемых расширением. Теги разделяются пробелами. можно добавить либо производителя, либо тег модели, либо и то, и другое, чтобы объявить поддерживаемых производителей и (или) модели. Формат тега ``"[value type]_[value condition]"`` [тип значения] — это «Manufacturer» или «Model» (с учетом регистра), а [условие значения] — это [регулярное выражение JavaScript](https://developer.mozilla.org/docs/Web/JavaScript/Guide/Regular_Expressions) , определяющее производителя или строку модели, а [тип значения] и [условие значения] разделены символом подчеркивания. Затем эта строка кодируется с использованием кодировки URI и добавляется в строку метаданных. nuspec "Теги".

### <a name="example"></a>Пример

Предположим, что я разработал расширение, которое поддерживает серверы компании Contoso Inc. с именем Model R3xx и R4xx.

1. Тег для производителя — ``"Manufacturer_/Contoso Inc./"`` . Тег для моделей может иметь значение ``"Model_/^R[34][0-9]{2}$/"`` . В зависимости от того, насколько строго нужно определить условие сопоставления, для определения регулярного выражения можно использовать разные способы. Можно также разделить Теги производителя или модели на несколько тегов, например, тег модели также может иметь значение ``"Model_/R3../ Model_/R4../"`` .
2. Регулярное выражение можно проверить с помощью консоли DevTools веб-браузера. В границах или хроме нажмите клавишу F12, чтобы открыть окно DevTools, а на вкладке консоль введите следующую команду и нажмите клавишу ВВОД:

   ```javascript
   var regex = /^R[34][0-9]{2}$/
   ```

   Если ввести и выполнить следующую команду, будет возвращено значение "true".

   ```javascript
   regex.test('R300')
   ```

   И если выполнить следующую команду, будет возвращено значение false.

   ```javascript
   regex.test('R500')
   ```

3. После проверки регулярного выражения можно также закодировать его в консоли DevTools, используя следующий метод JavaScript:

   ```javascript
   encodeURI(/^R[34][0-9]{2}$/)
   ```

   Окончательный формат строки тега, добавляемой в файл. nuspec, будет следующим:

   ```
   <tags>Manufacturer_/Contoso%20Inc./ Model_/%5ER%5B34%5D%5B0-9%5D%7B2%7D$/</tags>
   ```

> [!Tip]
> Мы понимаем, что производитель оборудования может иметь очень широкий спектр имен моделей, которые могут поддерживаться, а некоторые — нет. Помните, что эта функция предназначена для **обнаружения** вашего расширения, но она не обязательно должна быть актуальной инвентаризацией всех моделей. Регулярное выражение можно определить как более простое выражение, соответствующее подмножеству моделей. Пользователь может не видеть баннер обнаружения, если сначала он подключится к серверной модели, которая не соответствует условию, но более ранние или более поздние версии будут подключаться к другому серверу, на котором будет обнаружено и установлено расширение. Можно также определить простое регулярное выражение, которое соответствует только имени производителя. В некоторых случаях расширение может не поддерживать определенную модель, но можно использовать [функцию динамического отображения инструментов](./dynamic-tool-display.md) , чтобы определить пользовательский скрипт PowerShell для проверки поддержки модели и показать расширение только при необходимости или предоставить ограниченные функциональные возможности в расширении для моделей, которые не поддерживают все возможности.