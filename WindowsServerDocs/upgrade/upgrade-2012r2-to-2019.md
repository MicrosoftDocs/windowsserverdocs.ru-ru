---
title: Обновление Windows Server 2012 R2 до Windows Server 2019 | Документация Майкрософт
description: Узнайте, как выполнить обновление на месте для перехода с Windows Server 2012 R2 на Windows Server 2019.
ms.prod: windows server
ms.technology: server-general
ms.topic: upgrade
author: RobHindman
ms.author: robhind
ms.date: 09/16/2019
ms.openlocfilehash: 173e066e6e68322d279561aca07b29ed0b9cbd9d
ms.sourcegitcommit: 27f0caf74e88781054250455c3c1adf06deb6234
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/19/2019
ms.locfileid: "71125064"
---
# <a name="upgrade-windows-server-2012-r2-to-windows-server-2019"></a>Обновление Windows Server 2012 R2 до Windows Server 2019

Если вы хотите сохранить существующее оборудование и все роли сервера, которые вы настроили, без сжатия сервера, необходимо выполнить обновление на месте. При обновлении на месте вы переходите с более старой версии операционной системы на более новую, сохраняя свои параметры, роли сервера и данные. Эта статья поможет вам перейти с Windows Server 2012 R2 на Windows Server 2019.

## <a name="before-you-begin-your-in-place-upgrade"></a>Подготовка к обновлению на месте

Перед началом обновления Windows Server рекомендуется выполнить сбор данных с устройств для диагностики и устранения неполадок. Так как эти сведения предназначены для использования только в случае сбоя обновления, необходимо убедиться в том, что вы храните информацию в расположении, доступ к которому можно получить с вашего устройства.

### <a name="to-collect-your-info"></a>Сбор данных

1. Откройте командную строку, перейдите в `c:\Windows\system32`, а затем введите **systeminfo.exe**.

2. Скопируйте, вставьте и сохраните полученные сведения о системе в любом расположении на устройстве.

3. Введите **ipconfig /all** в командной строке, а затем скопируйте и вставьте полученные сведения о конфигурации в то же расположение, что и ранее.

4. Откройте редактор реестра, перейдите в куст HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\WindowsNT\CurrentVersion, а затем скопируйте и вставьте значения **BuildLabEx** (версия) и **EditionID** (выпуск) для Windows Server в то же расположение, что и выше.

После получения всех данных, относящихся к Windows Server, мы настоятельно рекомендуем создать резервную копию операционной системы, приложений и виртуальных машин. Кроме того, необходимо **завершить работу**, выполнить **быструю миграцию** или **динамическую миграцию** всех виртуальных машин, выполняющихся в данный момент на сервере. Во время обновления на месте виртуальные машины не могут работать.

## <a name="to-perform-the-upgrade"></a>Выполнение обновления

1. Убедитесь, что значение **BuildLabEx** указывает, что используется Windows Server 2012 R2.

2. Найдите установочный носитель Windows Server 2019 и выберите **setup.exe**.

    ![Проводник, отображающий файл setup.exe](media/upgrade-2012r2-2019/setup-2019.png)

3. Выберите **Да**, чтобы начать процесс установки.

    ![Контроль учетных записей пользователей, запрашивающий разрешение на запуск программы установки](media/upgrade-2012r2-2019/start-setup-uac-box.png)

4. Для устройств, подключенных к Интернету, выберите вариант **Скачать обновления, драйверы и дополнительные компоненты (рекомендуется)** , а затем щелкните **Далее**.

    ![Страница перехода в сетевой режим для получения важных обновлений Windows](media/upgrade-2012r2-2019/online-updates-win-setup.png)

5. Программа установки проверяет конфигурацию устройства. Дождитесь ее завершения и щелкните **Далее**.

6. В зависимости от канала распространения, из которого был получен носитель Windows Server (розничная, корпоративная, OEM, ODM и т. д.) и лицензия на сервер, может появиться запрос на ввод лицензионного ключа для продолжения.

7. Выберите выпуск Windows Server 2019, который вы хотите установить, а затем щелкните **Далее**.

    ![Экран для выбора устанавливаемого выпуска Windows Server 2012 R2](media/upgrade-2012r2-2019/select-os-edition.png)

8. Выберите **Принимаю**, чтобы подтвердить условия лицензионного соглашения, исходя из вашего канала распространения (например, розничная, корпоративная, OEM, ODM версия и т. д.).

    ![Экран для принятия лицензионного соглашения](media/upgrade-2012r2-2019/license-terms.png)

9. Программа установки предложит вам удалить модуль Microsoft Endpoint Protection через оснастку **Установка и удаление программ**.

    Эта функция несовместима с Windows Server 2019.

10. Выберите **Сохранить личные файлы и приложения**, чтобы выполнить обновление на месте, а затем щелкните **Далее**.

    ![Экран для выбора типа установки](media/upgrade-2012r2-2019/choose-install-upgrade.png)

11. Когда программа установки завершит анализ устройства, она предложит перейти к обновлению, выбрав действие **Установить**.

    ![Экран для подтверждения готовности начать обновление](media/upgrade-2012r2-2019/ready-to-install.png)

    Начнется обновление на месте, в котором отображается окно **Обновление Windows** с информацией о ходе выполнения. После завершения обновления сервер перезапустится.

    ![Снимок экрана, отображающий ход выполнения обновления](media/upgrade-2012r2-2019/upgrading-windows-with-progress.png)

## <a name="after-your-upgrade-is-done"></a>Действия по завершении обновления

После завершения обновления необходимо убедиться, что обновление до Windows Server 2019 прошло успешно.

### <a name="to-make-sure-your-upgrade-was-successful"></a>Проверка успешности обновления

1. Откройте редактор реестра, перейдите в куст HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\WindowsNT\CurrentVersion и просмотрите запись **ProductName**. Вы должны увидеть здесь выпуск Windows Server 2019, например **Windows Server 2019 Datacenter**.

2. Убедитесь, что все приложения работают, и что подключения клиентов к приложениям выполняются успешно.

Если вы считаете, что во время обновления возникли проблемы, скопируйте и создайте архив каталога `%SystemRoot%\Panther` (обычно `C:\Windows\Panther`) и обратитесь в службу поддержки Майкрософт.

## <a name="related-articles"></a>Похожие статьи

- Дополнительные сведения о начале работы с Windows Server 2019 см. [здесь](https://docs.microsoft.com/windows-server/get-started-19/get-started-19).