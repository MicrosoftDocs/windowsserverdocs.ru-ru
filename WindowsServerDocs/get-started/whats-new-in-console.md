---
title: Новые возможности консоли Windows в WindowsServer2016
description: Список важных новых функций в консоли Windows Server2016.
ms.custom: na
ms.prod: windows-server-threshold
ms.technology: server-general
ms.reviewer: na
ms.suite: na
ms.date: 10/04/2016
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: da9fc582-033b-4973-84e7-0c6024ecfcbc
author: jaimeo
ms.author: jaimeo
manager: dongill
ms.localizationpriority: medium
ms.openlocfilehash: 2f05bcffa7c8c4f9e74f3699b9838b8a627af1b1
ms.sourcegitcommit: e0479b0114eac7f232e8b1e45eeede96ccd72b26
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/22/2018
ms.locfileid: "2082567"
---
# <a name="whats-new-in-the-windows-console-in-windows-server-2016"></a>Новые возможности консоли Windows в WindowsServer2016
>Область применения: Windows Server2016

Внесено несколько обновлений в узел консоли (базовый код, который поддерживает все приложения символьного режима, включая командную строку Windows, строку Windows PowerShell и т. п.), которые добавили ряд новых возможностей.  

## <a name="controlling-the-new-features"></a>Управление новыми возможностями  
Новые функциональные возможности включены по умолчанию, но вы можете включить или отключить каждую из новых функций, а также вернуться к узлу консоли прежней версии. Для этого используйте интерфейс "Свойства" (преимущественно на вкладке **Параметры**) или измените указанные ниже разделы реестра (все ключи являются значениями типа DWORD в разделе **HKEY_CURRENT_USER\Console**):  

|Раздел реестра|Описание|  
|----------------|---------------|  
|ForceV2|1— включает все новые возможности консоли; 0— отключает все новые возможности. Примечание: это значение не сохраняется в ярлыках, его можно изменить только в этом разделе реестра.|  
|LineSelection|1— разрешает выделение строки; 0— только блочный режим выделения|  
|FilterOnPaste|1— включает новое поведение вставки|  
|LineWrap|1— переносит текст при изменении размера окна консоли|  
|CtrlKeyShortcutsDisabled|0— включает новые сочетания клавиш; 1— отключает их|  
|ExtendedEditKeys|1— включает полный набор сочетаний клавиш для выделения; 0— отключает их|  
|TrimLeadingZeros|1— включает обрезку начальных нулей в сегментах, выбранных двойным щелчком; 0— сохраняет начальные нули|  
|WindowsAlpha|Задает значение непрозрачности в диапазоне от 30% до 100%. Используйте значения от0x4C до0xFF (от76 до255)|  
|WordDelimiters|Определяет символ, который используется для разделения слов при выделении текста целыми словами с помощью клавиш CTRL+SHIFT+СТРЕЛКА (значение по умолчанию— пробел). В этом значении типа REG_SZ можно перечислить все символы, которые необходимо рассматривать как разделители. Примечание: это значение не сохраняется в ярлыках, его можно изменить только в этом разделе реестра.|  

Эти параметры хранятся отдельно для каждого заголовка окна в разделе реестра HKCU\Console. Для окон консоли, открываемых с помощью ярлыка, используются значения этих параметров, сохраненные в ярлыке. Если скопировать такой ярлык на другой компьютер, параметры перемещаются вместе с ним на новый компьютер. Параметры в ярлыках переопределяют все другие параметры, в том числе глобальные параметры и значения по умолчанию. Но если вы вернетесь к использованию исходной консоли, установив флажок **Использовать прежнюю версию консоли** на вкладке **Параметры**, этот выбор будет глобальным и сохранится для всех окон даже после перезагрузки компьютера.  

Эти параметры можно предварительно настроить для быстрого применения, сохранив соответствующие изменения реестра в файл автоматической установки или в сценарий Windows PowerShell.  

Для 16-разрядных приложений NTVDM всегда используется старый узел консоли.  

> [!NOTE]  
> Если возникнут проблемы с использованием новых параметров консоли, которые не удастся устранить с помощью перечисленных здесь параметров, вы всегда можете вернуться к прежней версии консоли, установив для параметра ForceV2 значение0 или отметив флажок **Использовать прежнюю версию консоли** на вкладке **Параметры**.  

## <a name="console-behavior"></a>Поведение консоли  
Теперь можно изменять размеры окна консоли, перетаскивая мышью край окна. Полосы прокрутки отображаются, только если размеры окна заданы вручную (на вкладке **Макет** в окне **Свойства**), или если самая длинная строка текста в буфере шире, чем текущий размер окна.  

Новое окно консоли поддерживает перенос слов. Но если вы используете API-интерфейсы консоли для изменения текста в буфере, текст будет сохранен в том виде, в котором был изначально получен.  

Окно консоли теперь может быть полупрозрачным (вплоть до уровня 30%). Прозрачность можно отрегулировать из меню "Свойства" или с помощью следующих команд клавиатуры:  

|Выполните указанные ниже действия.|Используйте следующие клавиши:|  
|---------------|-----------------------------|  
|Увеличение прозрачности.|CTRL+SHIFT+плюс (+) или CTRL+SHIFT+прокрутить колесо мыши вверх|  
|Уменьшение прозрачности.|CTRL+SHIFT+минус (-) или CTRL+SHIFT+прокрутить колесо мыши вниз|  
|Включение и отключение полноэкранного режима.|ALT+ВВОД|  

## <a name="selection"></a>Выбор  
Существует множество новых возможностей для выбора текста и строк, а также для пометки текста и использования буфера журнала. Консоль старается избегать конфликтов с приложениями, которые могут использовать те же клавиши.  

**Для разработчиков:** Если возникает конфликт, обычно можно изменить поведение приложений с помощью API SetConsoleMode(), указав, как следует использовать режимы ввода текста, обработки ввода и отображения ввода. В режиме обработки ввода будут применяться описанные ниже клавиши, а в других режимах их должно обрабатывать ваше приложение. Любые сочетания клавиш, не перечисленные здесь, работают так же, как и в предыдущих версиях консоли. Конфликты между различными настройками можно попытаться устранить на вкладке **Параметры**. Если ни один из вариантов не поможет, можно вернуться к использованию старой консоли.  

Теперь щелкать и перетаскивать выбранные фрагменты можно не только в режиме выделения мышью. Также можно выбирать сразу несколько строк текста, как в приложении Блокнот, а не только прямоугольный блок. При операциях копирования теперь не требуется удалять разрывы строк. Кроме возможности щелкать и перетаскивать доступны следующие сочетания клавиш.  

**Выбор текста**  

|Выполните указанные ниже действия.|Используйте следующие клавиши:|  
|---------------|-----------------------------|  
|Перемещение курсора на один символ влево с расширением выделенного фрагмента.|SHIFT+СТРЕЛКА ВЛЕВО|  
|Перемещение курсора на один символ вправо с расширением выделенного фрагмента.|SHIFT+СТРЕЛКА ВПРАВО|  
|Выбор текста по одной строке вверх, начиная от курсора.|SHIFT+СТРЕЛКА ВВЕРХ|  
|Расширение выделенного фрагмента текста по одной строке вниз, начиная от курсора.|SHIFT+СТРЕЛКА ВНИЗ|  
|Если курсор находится в редактируемой строке, первое нажатие этих клавиш расширит область выделения до последнего символа в строке ввода. Второе нажатие расширит выделение до правой границы окна.|SHIFT+END|  
|Если курсор находится **не** в редактируемой строке, эта команда сразу выделит весь текст от курсора до правого поля.|SHIFT+END|  
|Если курсор находится в редактируемой строке, первое нажатие этих клавиш расширит область выделения до начала строки ввода, сразу за приглашением командной строки. Второе нажатие расширит выделение до правой границы окна.|SHIFT+HOME|  
|Если курсор находится **не** в редактируемой строке, эта команда выделит текст от курсора до левого поля.|SHIFT+HOME|  
|Расширение выделения на один экран вниз.|ALT+PAGE DOWN|  
|Расширение выделения на один экран вверх.|ALT+PAGE UP|  
|Расширение выбора на одно слово вправо. (Разделители слов можно определить в разделе реестра WordDelimiters.)|CTRL+SHIFT+СТРЕЛКА ВПРАВО|  
|Расширение выбора на одно слово влево.|CTRL+SHIFT+HOME|  
|Расширение выбора до начала экранного буфера.|CTRL+SHIFT+END|  
|Выбор всего текста строки ввода, если курсор находится в текущей строке, и строка не пуста.|CTRL+A|  
|Выбор всего буфера, если курсор находится **не** в текущей строке.|CTRL+A|  

**Редактирование текста**  

С помощью клавиш можно копировать и вставлять текст в консоли. CTRL+C теперь выполняет две функции. Если текст не выбран, нажатие этих клавиш отправляет команду BREAK, как и раньше. Если текст выбран, первое нажатие копирует текст и отменяет выделение, а второе нажатие отправляет команду BREAK. Ниже приведены другие команды редактирования.  

|Выполните указанные ниже действия.|Используйте следующие клавиши:|  
|---------------|-----------------------------|  
|Вставка текста в командную строку.|CTRL+V|  
|Копирование выбранного текста в буфер обмена.|CTRL+INS|  
|Копирование выбранного текста в буфер обмена; команда BREAK.|CTRL+C|  
|Вставка текста в командную строку.|SHIFT+INS|  

**Режим пометки**  

Чтобы в любой момент перейти в режим пометки, щелкните правой кнопкой мыши в любой части заголовка консоли, выберите команду **Изменить**, и в открывшемся меню выберите **Пометка**. Можно также нажать клавиши CTRL+M. В режиме пометки клавишей ALT можно обозначить начало выделения с переносом строк. (Если отключен параметр **Включить выделение переноса строк**, в режиме пометки выделяется блочный фрагмент текста.) В режиме пометки текста клавиши CTRL+SHIFT+СТРЕЛКА выбирают текст по одному символу, а не целыми словами, как в обычном режиме. Помимо сочетаний клавиш, описанных в разделе **Редактирование текста**, в режиме пометки действуют дополнительные сочетания.  

|Выполните указанные ниже действия.|Используйте следующие клавиши:|  
|---------------|-----------------------------|  
|Переход в режим пометки, позволяющий перемещать курсор по окну.|CTRL+M|  
|Начало выделения с переносом строк в режиме пометки, используется в сочетании с другими клавишами.|ALT|  
|Перемещение курсора в указанном направлении.|Клавиши со стрелками|  
|Перемещение курсора на одну страницу в указанном направлении.|PAGE UP или PAGE DOWN|  
|Перемещение курсора в начало буфера.|CTRL+HOME|  
|Перемещение курсора в конец буфера.|CTRL+END|  

**Навигация по истории.**  

|Выполните указанные ниже действия.|Используйте следующие клавиши:|  
|---------------|-----------------------------|  
|Перемещение вверх на одну строку по истории вывода.|CTRL+СТРЕЛКА ВВЕРХ|  
|Перемещение вниз на одну строку по истории вывода.|CTRL+СТРЕЛКА ВНИЗ|  
|Перемещение окна просмотра в начало буфера (если командная строка пуста) или удаление всех символов слева от курсора (если командная строка не пуста).|CTRL+HOME|  
|Перемещение окна просмотра к командной строке (если командная строка пуста) или удаление всех символов справа от курсора (если командная строка не пуста).|CTRL+END|  

**Дополнительные сочетания клавиш**  

|Выполните указанные ниже действия.|Используйте следующие клавиши:|  
|---------------|-----------------------------|  
|Открытие диалогового окна поиска.|CTRL+F|  
|Закрытие окна консоли.|ALT + F4|  
