---
title: Использование личных сеансовых рабочих столов с помощью служб удаленных рабочих столов
description: Узнайте, как совместно использовать персонализированные назначенные рабочие столы с помощью RDS.
ms.custom: na
ms.prod: windows-server
ms.reviewer: na
ms.suite: na
ms.technology: remote-desktop-services
ms.tgt_pltfrm: na
ms.topic: article
author: lizap
ms.author: elizapo
ms.date: 09/16/2016
manager: dongill
ms.openlocfilehash: 7429cd9cb87db310a716136c171de47cfe0892f2
ms.sourcegitcommit: 6aff3d88ff22ea141a6ea6572a5ad8dd6321f199
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/27/2019
ms.locfileid: "71387358"
---
# <a name="use-personal-session-desktops-with-remote-desktop-services"></a>Использование личных сеансовых рабочих столов с помощью служб удаленных рабочих столов

>Относится к: Windows Server (Semi-Annual Channel), Windows Server 2019, Windows Server 2016

Серверные личные рабочие столы можно развернуть в среде облачных вычислений с помощью личных сеансовых рабочих столов.  (В среде облачных вычислений разделяются серверы структуры Hyper-V и гостевые виртуальные машины, например облако Microsoft Azure и облачная платформа Майкрософт.) Применение личного сеансового рабочего стола расширяет возможности в сценарии развертывания сеансовых рабочих столов в службах удаленных рабочих столов. Это позволяет создать новый тип коллекции сеансов, где каждому пользователю назначается собственный личный узел сеансов с правами администратора. 

Используйте следующие сведения для создания коллекции личных сеансовых рабочих столов и управления ими.

## <a name="create-a-personal-session-desktop-collection"></a>Создание коллекции личных сеансовых рабочих столов

Используйте командлет New-RDSessionCollection, чтобы создать коллекцию личных сеансовых рабочих столов. Следующие три параметра предоставляют сведения о конфигурации, необходимые для личных сеансовых рабочих столов.

- **-PersonalUnmanaged**: указывает тип коллекции сеансов, позволяя назначать пользователей на сервер узла личных сеансов. Если вы не укажете этот параметр, коллекция создается как традиционная коллекция узла сеансов удаленных рабочих столов, где пользователи назначаются на очередной доступный узел сеансов при входе.
- **-GrantAdministrativePrivilege**: если вы используете **-PersonalUnmanaged**, указывает, что пользователь, назначенный на узел сеансов, получает права администратора. Если вы не используете этот параметр, пользователи получают только обычные привилегии.
- **-AutoAssignUser**: если вы используете **-PersonalUnmanaged**, указывает, что новые пользователи, подключающиеся через посредник подключений к удаленному рабочему столу, автоматически назначаются на неназначенный узел сеансов. Если в коллекции нет таких узлов, пользователь увидит сообщение об ошибке. Если вы не используете этот параметр, то придется [вручную назначить пользователей на узел сеансов](#manually-assign-a-user-to-a-personal-session-host), прежде чем они войдут в систему.

## <a name="manually-assign-a-user-to-a-personal-session-host"></a>Назначение пользователю личного узла сеансов вручную
Используйте командлет **Set-RDPersonalSessionDesktopAssignment**, чтобы вручную назначить пользователю на личный сервер узла сеансов в коллекции. Этот командлет поддерживает следующие параметры.

-CollectionName \<строка\>

-ConnectionBroker \<строка\> 

-User \<строка\>

-Name \<строка\>

- **-CollectionName**: указывает имя коллекции личных сеансовых рабочих столов. Это обязательный параметр.
- **-ConnectionBroker**: указывает сервер посредника подключений к удаленному рабочему столу для вашего развертывания Удаленного рабочего стола. Если вы не указали значение, командлет будет использовать полное доменное имя (FQDN) локального компьютера.
- **-User**: указывает учетную запись пользователя, связываемую с личным сеансовым рабочим столом, в формате "ДОМЕН\Пользователь". Это обязательный параметр.
- **-Name**: имя сервера узла сеансов. Это обязательный параметр. Узел сеансов, определенный здесь, должен быть членом коллекции, заданной параметром **-CollectionName**.

Командлет **Import-RDPersonalSessionDesktopAssignment** импортирует связи между учетными записями пользователей и личными сеансовыми рабочими столами из текстового файла. Этот командлет поддерживает следующие параметры.

-CollectionName \<строка\>

-ConnectionBroker \<строка\>

-Path \<строка>

**-Path**: задает путь и имя файла для импорта.
 
## <a name="removing-a-user-assignment-from-a-personal-session-host"></a>Удаление назначения пользователю личного узла сеансов
Используйте командлет **Remove-RDPersonalSessionDesktopAssignment**, чтобы удалить связь между личным сеансовым рабочим столом и пользователем. Этот командлет поддерживает следующие параметры.

-CollectionName \<строка\>

-ConnectionBroker \<строка\>

-Force

-Name \<строка\>

-User \<строка\>

**-Force**: принудительное выполнение команды без запроса подтверждения у пользователя.

## <a name="query-user-assignments"></a>Запрос назначений пользователей
Используйте командлет **Get-RDPersonalSessionDesktopAssignment**, чтобы получить список личных сеансовых рабочих столов и связанных учетных записей пользователей. Этот командлет поддерживает следующие параметры.

-CollectionName \<строка\>

-ConnectionBroker \<строка\>

-User \<строка\>

-Name \<строка\>

Вы можете выполнить этот командлет, чтобы выполнить запрос по имени коллекции, пользователя или сеансового рабочего стола. Если указать только параметр **-CollectionName**, то командлет возвращает список узлов сеансов и связанных с ними пользователей. Если также указать параметр **-User**, то будет возвращен узел сеансов, связанный с данным пользователем. Если указать параметр **-Name**, будет возвращен пользователь, связанный с этим узлом сеансов. 


Командлет **Export-RDPersonalPersonalDesktopAssignment** экспортирует текущие связи между пользователями и личными виртуальными рабочими столами в текстовый файл. Этот командлет поддерживает следующие параметры.

-CollectionName \<строка\>

-ConnectionBroker \<строка\>

-Path \<строка\>


Все новые командлеты поддерживают общие параметры: -Verbose, -Debug, -ErrorAction, -ErrorVariable, -OutBuffer и -OutVariable. Дополнительные сведения см. в разделе [about_CommonParameters](https://go.microsoft.com/fwlink/p/?LinkID=113216).

## <a name="hardware-accelerated-graphics"></a>Графика с аппаратным ускорением
Windows Server 2016 расширяет возможности 3D-видеоадаптера RemoteFX (vGPU) для поддержки OpenGL и поддерживает гостевые виртуальные машины Windows Server 2016 с одним пользователем. Личные сеансовые рабочие столы можно объединить с новыми возможностями vGPU, чтобы обеспечить поддержку размещенных приложений, требующих ускоренной обработки графики. Кроме того, личные сеансовые рабочие столы можно объединить с новыми возможностями дискретного назначения устройств (DDA), чтобы также обеспечить поддержку размещенных приложений, требующих ускоренной обработки графики.
