---
title: Использование личных сеансовых рабочих столов с помощью служб удаленных рабочих столов
description: Узнайте, как совместно использовать персонализированные назначенные рабочие столы с помощью RDS.
ms.topic: article
author: lizap
ms.author: elizapo
ms.date: 10/22/2019
manager: dongill
ms.openlocfilehash: ccb8bd5a91af6e4b9a8d1a610bf22747433bf913
ms.sourcegitcommit: dfa48f77b751dbc34409aced628eb2f17c912f08
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/07/2020
ms.locfileid: "87946427"
---
# <a name="use-personal-session-desktops-with-remote-desktop-services"></a>Использование личных сеансовых рабочих столов с помощью служб удаленных рабочих столов

>Применяется к: Windows Server (Semi-Annual Channel), Windows Server 2019, Windows Server 2016

Серверные личные рабочие столы можно развернуть в среде облачных вычислений с помощью личных сеансовых рабочих столов.  (В среде облачных вычислений разделяются серверы структуры Hyper-V и гостевые виртуальные машины, например облако Microsoft Azure и облачная платформа Майкрософт.) Применение личного сеансового рабочего стола расширяет возможности в сценарии развертывания сеансовых рабочих столов в службах удаленных рабочих столов. Это позволяет создать новый тип коллекции сеансов, где каждому пользователю назначается собственный личный узел сеансов с правами администратора.

Используйте следующие сведения для создания коллекции личных сеансовых рабочих столов и управления ими.

## <a name="create-a-personal-session-desktop-collection"></a>Создание коллекции личных сеансовых рабочих столов

Используйте командлет New-RDSessionCollection, чтобы создать коллекцию личных сеансовых рабочих столов. Следующие три параметра предоставляют сведения о конфигурации, необходимые для личных сеансовых рабочих столов.

- **-PersonalUnmanaged**: указывает тип коллекции сеансов, позволяя назначать пользователей на сервер узла личных сеансов. Если вы не укажете этот параметр, коллекция создается как традиционная коллекция узла сеансов удаленных рабочих столов, где пользователи назначаются на очередной доступный узел сеансов при входе.
- **-GrantAdministrativePrivilege**: если вы используете **-PersonalUnmanaged**, указывает, что пользователь, назначенный на узел сеансов, получает права администратора. Если вы не используете этот параметр, пользователи получают только обычные привилегии.
- **-AutoAssignUser**: если вы используете **-PersonalUnmanaged**, указывает, что новые пользователи, подключающиеся через посредник подключений к удаленному рабочему столу, автоматически назначаются на неназначенный узел сеансов. Если в коллекции нет таких узлов, пользователь увидит сообщение об ошибке. Если вы не используете этот параметр, то придется [вручную назначить пользователей на узел сеансов](#manually-assign-a-user-to-a-personal-session-host), прежде чем они войдут в систему.

## <a name="manually-assign-a-user-to-a-personal-session-host"></a>Назначение пользователю личного узла сеансов вручную
Используйте командлет **Set-RDPersonalSessionDesktopAssignment**, чтобы вручную назначить пользователю на личный сервер узла сеансов в коллекции. Этот командлет поддерживает следующие параметры.

-CollectionName \<string\>

-ConnectionBroker \<string\>

-User \<string\>

-Name \<string\>

- **-CollectionName**: указывает имя коллекции личных сеансовых рабочих столов. Это обязательный параметр.
- **-ConnectionBroker**: указывает сервер посредника подключений к удаленному рабочему столу для вашего развертывания Удаленного рабочего стола. Если вы не указали значение, командлет будет использовать полное доменное имя (FQDN) локального компьютера.
- **-User**: указывает учетную запись пользователя, связываемую с личным сеансовым рабочим столом, в формате "ДОМЕН\Пользователь". Это обязательный параметр.
- **-Name**: имя сервера узла сеансов. Это обязательный параметр. Узел сеансов, определенный здесь, должен быть членом коллекции, заданной параметром **-CollectionName**.

Командлет **Import-RDPersonalSessionDesktopAssignment** импортирует связи между учетными записями пользователей и личными сеансовыми рабочими столами из текстового файла. Этот командлет поддерживает следующие параметры.

-CollectionName \<string\>

-ConnectionBroker \<string\>

-Path \<string>

**-Path**: задает путь и имя файла для импорта.

## <a name="removing-a-user-assignment-from-a-personal-session-host"></a>Удаление назначения пользователю личного узла сеансов
Используйте командлет **Remove-RDPersonalSessionDesktopAssignment**, чтобы удалить связь между личным сеансовым рабочим столом и пользователем. Этот командлет поддерживает следующие параметры.

-CollectionName \<string\>

-ConnectionBroker \<string\>

-Force

-Name \<string\>

-User \<string\>

**-Force**: принудительное выполнение команды без запроса подтверждения у пользователя.

## <a name="query-user-assignments"></a>Запрос назначений пользователей
Используйте командлет **Get-RDPersonalSessionDesktopAssignment**, чтобы получить список личных сеансовых рабочих столов и связанных учетных записей пользователей. Этот командлет поддерживает следующие параметры.

-CollectionName \<string\>

-ConnectionBroker \<string\>

-User \<string\>

-Name \<string\>

Вы можете выполнить этот командлет, чтобы выполнить запрос по имени коллекции, пользователя или сеансового рабочего стола. Если указать только параметр **-CollectionName**, то командлет возвращает список узлов сеансов и связанных с ними пользователей. Если также указать параметр **-User**, то будет возвращен узел сеансов, связанный с данным пользователем. Если указать параметр **-Name**, будет возвращен пользователь, связанный с этим узлом сеансов.


Командлет **Export-RDPersonalPersonalDesktopAssignment** экспортирует текущие связи между пользователями и личными виртуальными рабочими столами в текстовый файл. Этот командлет поддерживает следующие параметры.

-CollectionName \<string\>

-ConnectionBroker \<string\>

-Path \<string\>


Все новые командлеты поддерживают общие параметры: -Verbose, -Debug, -ErrorAction, -ErrorVariable, -OutBuffer и -OutVariable. См. сведения в разделе [about_CommonParameters](https://go.microsoft.com/fwlink/p/?LinkID=113216).
