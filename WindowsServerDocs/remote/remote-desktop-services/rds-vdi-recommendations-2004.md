---
title: Оптимизация Windows 10 версии 2004 для роли виртуального рабочего стола
description: Рекомендуемые параметры и конфигурация для снижения временных затрат на компьютеры Windows 10 версии 2004, используемые в качестве образов VDI.
ms.prod: windows-server
ms.reviewer: robsmi, timuessi
ms.technology: remote-desktop-services
author: Heidilohr
ms.author: helohr
ms.topic: article
manager: ''
ms.date: 09/24/2020
ms.openlocfilehash: b39207461d9ee99a2da0bdf07a9190c769b7511f
ms.sourcegitcommit: fa74f7297855ff1c9cb7df4b784b946cdce99e22
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/24/2020
ms.locfileid: "91206421"
---
# <a name="optimizing-windows-10-version-2004-for-a-virtual-desktop-infrastructure-vdi-role"></a>Оптимизация Windows 10 версии 2004 для роли инфраструктуры виртуальных рабочих столов (VDI)

Эта статья поможет вам выбрать параметры для Windows 10 версии 2004, которые должны обеспечить оптимальную производительность в среде инфраструктуры виртуальных рабочих столов (VDI) и виртуальных рабочих столов Windows. Все параметры в этом руководстве являются рекомендуемыми для рассмотрения, а не обязательными.

Сведения в этом руководстве относятся к Windows 10 версии 2004 (ОС сборки 19041).

Основные способы оптимизировать производительность Windows 10 в среде виртуальных рабочих столов: обеспечить минимальную перерисовку графических элементов и эффектов, минимизировать фоновые действия, которые не дают особых преимуществ среде виртуальных рабочих столов, и, как правило, максимально уменьшить число запущенных процессов. Вторая цель — уменьшить использование дискового пространства в базовом образе до самого минимума. Благодаря реализациям виртуальных рабочих столов наименьший возможный размер базового или "золотого" образа может немного сократить использование памяти в основной системе, а также немного уменьшить общее число сетевых операций, необходимых для доставки среды рабочих столов потребителю.

Оптимизация не должна снижать удобство работы пользователя. Каждый параметр оптимизации тщательно проверен, чтобы предотвратить ухудшение работы пользователя.

> [!NOTE]
> Эти рекомендуемые параметры могут применяться к другим установкам Windows 10 версии 1909, в том числе на физических или виртуальных устройствах. Рекомендации в этой статье не должны влиять на возможность поддержки Windows 10 в VDI.

## <a name="vdi-optimization-principles"></a>Принципы оптимизации VDI

Среда VDI по сети предоставляет пользователю компьютера полный сеанс рабочего стола, включая приложения. Средство доставки сети может быть локальной сетью, Интернетом или и тем и другим. Некоторые реализации среды VDI используют базовый образ операционной системы, который становится основой для рабочих столов, позднее предоставляемых пользователям для работы. Существуют варианты реализации виртуального рабочего стола, например "постоянная" среда, "временная" среда и "сеанс рабочего стола". Постоянная среда сохраняет изменения операционной системы виртуального рабочего стола между сеансами. Временная среда не сохраняет изменения операционной системы виртуального рабочего стола между сеансами. Для пользователя этот рабочий стол будет несколько отличаться для разных виртуальных или физических устройств, используемых для доступа по сети.

Параметры оптимизации будут действовать на эталонном компьютере. Виртуальная машина — это идеальное место для создания виртуальной машины, так как вы можете сохранить ее состояние, а также создать контрольные точки и резервные копии и т. д. Установка ОС по умолчанию выполняется на базовой виртуальной машине. Затем выполняется оптимизация этой базовой виртуальной машины путем удаления ненужных приложений, установки обновлений Windows, установки других обновлений, удаления временных файлов, применения параметров и т. д.

Существуют и другие типы технологии виртуального рабочего стола, такие как сеанс удаленного рабочего стола (RDS) и недавно выпущенная служба [виртуальных рабочих столов Windows](https://azure.microsoft.com/services/virtual-desktop/) Microsoft Azure. Более подробное обсуждение этих технологий выходит за рамки данной статьи. В этой статье рассматриваются параметры базового образа Windows без упоминания о других факторах среды, таких как оптимизация серверного оборудования.

Когда речь идет о продуктах и службах, безопасность и стабильность являются главными приоритетами для корпорации Майкрософт. Безопасность виртуальных рабочих столов не сильно отличается от безопасности физических устройств. Корпоративные клиенты могут использовать возможности встроенного приложения "Безопасность Windows", состоящего из набора служб, которые хорошо работают как с подключением к Интернету, так и без него. Для сред виртуальных рабочих столов, которые не подключены к Интернету, подписи безопасности можно заблаговременно скачивать несколько раз в день, так как корпорация Майкрософт может выпускать более одного обновления подписи в день. Затем эти подписи могут быть предоставлены устройствам виртуальных рабочих столов и запланированы для установки во время производства независимо от того, являются ли они постоянными или непостоянными. Таким образом, защита виртуальной машины будет оставаться максимально актуальной.

Существуют некоторые параметры безопасности, которые не применимы к средам виртуальных рабочих столов, которые не подключены к Интернету и, следовательно, не могут участвовать в облачной безопасности. Кроме того, существуют и другие параметры, которые могут использовать "обычные" устройства Windows, такие как Cloud Experience, Магазин Windows и т. д. Удаление доступа к неиспользуемым функциям уменьшает занимаемое место, пропускную способность сети и количество уязвимых зон.

Что касается обновлений, Windows 10 использует алгоритм ежемесячных обновлений. В некоторых случаях администраторы виртуальных рабочих столов контролируют процесс обновления с помощью процесса завершения работы виртуальных машин на основе "главного" или "золотого" образа, распечатывая этот образ, предназначенный только для чтения, исправляя его, затем упаковывая его и возвращая обратно в рабочую среду. Следовательно, нет необходимости в том, чтобы устройства виртуальных рабочих столов проверяли Центр обновления Windows. В некоторых случаях, например в постоянных "личных" устройствах виртуальных рабочих столов, выполняются обычные процедуры исправления. Кроме того, можно использовать Центр обновления Windows, а в некоторых — Microsoft Intune. Для обработки обновлений и доставки других пакетов может использоваться Microsoft Endpoint Configuration Manager (прежнее название — SCCM). Каждая организация должна определить наилучший способ обновления устройств виртуальных рабочих столов и сократить временные циклы.

Параметры локальной политики, а также другие параметры в этом руководстве можно переопределить с помощью политики на основе домена. Рекомендуется тщательно изучить параметры политики и удалить или не использовать те из них, которые не нужны или не применимы к вашей среде. Параметры, перечисленные в этом документе, обеспечивают лучший баланс оптимизации производительности в средах виртуальных рабочих столов, сохраняя при этом качество взаимодействия с пользователем.

> [!NOTE]
> Существует набор скриптов, доступных на сайте GitHub.com, с помощью которых выполняются все рабочие элементы, описанные в этом документе. URL-адрес в Интернете для сценариев оптимизации можно найти на сайте [https://github.com/The-Virtual-Desktop-Team/Virtual-Desktop-Optimization-Tool](https://github.com/The-Virtual-Desktop-Team/Virtual-Desktop-Optimization-Tool). Этот сценарий был разработан для простоты настройки в соответствии с вашей средой и требованиями. Основным кодом является PowerShell, а работа выполняется с использованием входных файлов (обычный текст JSON) и файлов экспорта средства объектов локальной групповой политики (LGPO). Эти текстовые файлы содержат списки приложений, которые нужно удалить, служб, которые нужно отключить, и т. д. Если вы не хотите удалять определенное приложение или отключать определенную службу, измените соответствующий текстовый файл и удалите элемент, с которым не требуется выполнять действия. Наконец, существуют экспортируемые параметры локальной политики, которые можно импортировать на компьютеры среды. Лучше иметь некоторые параметры в базовом образе, чем применять параметры с помощью групповой политики, так как некоторые из них вступают в силу при следующей перезагрузке или при первом использовании компонента.

### <a name="persistent-virtual-desktop-environments"></a>Среды постоянных виртуальных рабочих столов

В основе модели постоянных виртуальных рабочих столов лежит устройство, которое сохраняет состояние операционной системы между перезапусками. Другие слои программного обеспечения решения виртуальных рабочих столов предоставляют пользователям простой и удобный доступ к назначенным им виртуальным машинам, часто с помощью решения единого входа.

Существует несколько разных реализаций постоянных сред виртуальных рабочих столов.

- Традиционная виртуальная машина, которая имеет собственный файл виртуального диска, запускается обычным образом и сохраняет изменения между сеансами. Различие заключается в том, как пользователь получает к ней доступ. Пользователь может входить на какой-либо веб-портал, который автоматически направляет его к одной или нескольким назначенным ему виртуальным машинам виртуальных рабочих столов.
- Постоянная виртуальная машина на основе образа с индивидуальными виртуальными дисками (при необходимости). При таком типе реализации на одном или нескольких серверах узла хранится базовый (или "золотой") образ. Когда создается виртуальная машина, создается один или несколько виртуальных дисков, которым назначается этот диск для постоянного хранения.
  - При запуске виртуальной машины копия базового образа считывается в ее память. В то же время этой виртуальной машине назначается постоянный виртуальный диск со всеми предыдущими изменениями операционной системы, объединенными с помощью сложного процесса.
  - Изменения, например, записи в журнале событий, записи в других журналах и т. д., перенаправляются на виртуальный диск для чтения и записи, назначенный этой виртуальной машине.
  - В этом случае операционная система и обслуживание приложений могут выполняться в обычном режиме с помощью традиционного программного обеспечения для обслуживания, например Windows Server Update Services или других технологий управления.
- Различие между постоянным и "обычным" устройством виртуального рабочего стола заключается в отношении к главному или золотому образу. В определенный момент обновления должны быть применены к главному образу. Способ обработки постоянных изменений пользователя на этом этапе зависит от организации. В некоторых случаях диск с изменениями удаляется или сбрасывается. Кроме того, может случиться так, что изменения, сделанные пользователем на компьютере, сохраняются в ежемесячных исправлениях, а базовый образ сбрасывается после обновления компонентов.

### <a name="non-persistent-virtual-desktop-environments"></a>Среды временных виртуальных рабочих столов

Когда временная реализация виртуального рабочего стола основана на базовом или "золотом" образе, оптимизации главным образом выполняются в базовом образе, а затем — посредством локальных параметров и политик.

При использовании временной среды виртуальных рабочих столов на основе образа базовый образ доступен только для чтения. При запуске устройства временного виртуального рабочего стола копия базового образа передается потоком в виртуальную машину. Действия, которые выполняются во время запуска, а затем — до последующей перезагрузки, перенаправляются во временное расположение. Обычно пользователям предоставляются сетевые расположения для хранения данных. В некоторых случаях профиль пользователя объединяется со стандартной виртуальной машиной, чтобы предоставить этому пользователю возможность использовать свои параметры.

Одним важным аспектом временной среды виртуальных рабочих столов, основанной на отдельном образе, является обслуживание. Обновления и компоненты для операционной системы обычно доставляются один раз в месяц. При использовании среды виртуальных рабочих столов на основе образа существует ряд процессов, которые необходимо выполнить, чтобы обновить образ.

- На заданном узле все виртуальные машины, являющиеся производными от базового образа, должны завершить работу или быть отключены. Это означает, что пользователи будут перенаправлены на другие виртуальные машины.

- В некоторых реализациях это называется очисткой. Если задан режим очистки, виртуальная машина или узел сеансов прекращает принимать новые запросы, но продолжает обслуживать пользователей, подключенных к устройству в настоящее время.

- В режиме очистки, когда последний пользователь выходит из системы устройства, это устройство готово к операциям обслуживания.
- Базовый образ открывается и запускается. Затем выполняются все действия по обслуживанию, в том числе установка обновлений операционной системы, обновлений платформы .NET, обновлений приложений и т. д.
- На этом этапе применяются все новые параметры, которые должны быть применены.
- Кроме того, выполняются все прочие операции обслуживания.
- Затем работа базового образа завершается.
- Базовый образ упаковывается и возвращается в рабочую среду.
- Теперь пользователи могут войти в систему.

> [!NOTE]
> Windows 10 автоматически выполняет ряд задач обслуживания на периодической основе. Имеется запланированная задача, которая по умолчанию запускается в 3:00 каждый день. Она выполняет ряд задач, включая очистку обновлений Windows. Вы можете просмотреть все категории операций обслуживания, которые выполняются автоматически, с помощью следующей команды PowerShell.
>
> ```powershell
> Get-ScheduledTask | Where-Object {$_.Settings.MaintenanceSettings}
> ```

Одной из проблем, связанных со временной средой виртуальных рабочих столов, является то, что после выхода пользователя отменяются почти все действия в операционной системе. Профиль или состояние пользователя могут быть сохранены в центральном расположении, но почти все изменения, внесенные с момента последней загрузки, отменяются самой виртуальной машиной. Поэтому оптимизации, предназначенные для компьютера с Windows, который сохраняет состояние между сеансами, не подходят.

В зависимости от архитектуры устройства виртуального рабочего стола такие операции, как PreFetch и SuperFetch, не спасут при переходе между сеансами, так как все оптимизации отменяются при перезапуске виртуальной машины. Индексирование может оказаться отчасти пустой тратой ресурсов, как и любые оптимизации дисков, например традиционная дефрагментация.

> [!NOTE]
> При подготовке образа с использованием виртуализации и при подключении к Интернету во время процесса создания образа во время первого входа в систему следует отложить обновление компонентов. Для этого выберите **Параметры** > **Центр обновления Windows**.

### <a name="to-sysprep-or-not-sysprep"></a>Быть Sysprep или не быть

В Windows 10 есть встроенное [средство подготовки системы (SysPrep)](/windows-hardware/manufacture/desktop/sysprep--system-preparation--overview), предназначенное для ее подготовки. Средство Sysprep используется, чтобы подготовить пользовательский образ Windows 10 для дублирования. Процесс Sysprep гарантирует, что итоговая операционная система будет обладать соответствующими уникальными характеристиками для запуска в рабочей среде.

У средства Sysprep имеется несколько достоинств и недостатков. В случае использования сред виртуальных рабочих столов может потребоваться возможность настроить профиль пользователя по умолчанию, который будет использоваться в качестве шаблона профиля для последующих пользователей, осуществляющих вход с помощью этого образа. У вас могут быть приложения, которые требуется установить, но с возможностью управлять параметрами на уровне приложения.

Альтернативой является использование стандартного ISO-файла для установки, возможно, с файлом ответов для автоматической установки, и последовательности задач для установки приложений или их удаления. Можно также использовать последовательность задач для настройки параметров локальной политики в образе, возможно, с помощью инструмента [Local Group Policy Object Utility (LGPO)](/archive/blogs/secguide/lgpo-exe-local-group-policy-object-utility-v1-0).

Дополнительные сведения о подготовке образа для Azure см. в статье [Подготовка диска VHD или VHDX Windows к отправке в Azure](/azure/virtual-machines/windows/prepare-for-upload-vhd-image).

### <a name="supportability"></a>Возможности поддержки

Каждый раз при изменении значений по умолчанию Windows возникают вопросы относительно поддержки. После настройки образа виртуального рабочего стола (виртуальной машины или сеанса) каждое изменение, внесенное в образ, необходимо отслеживать в журнале изменений. Часто при устранении неполадок образ можно изолировать в пуле и настроить для анализа проблем. Как только будет отслежена первопричина проблемы, это изменение можно будет сначала развернуть в тестовой среде и, в конечном итоге, в рабочей среде.

В этом документе намеренно не затрагиваются системные службы, политики или задачи, влияющие на безопасность. После этого идет обслуживание Windows. Возможность обслуживания образов виртуальных рабочих столов за пределами периодов обслуживания исключается, так как эти периоды касаются того времени, когда в средах VDI происходит большинство событий обслуживания, за исключением обновлений программного обеспечения безопасности. Корпорация Майкрософт опубликовала руководство по приложению "Безопасность Windows" в средах виртуальных рабочих столов:

**Майкрософт.** [Руководство по развертыванию антивирусной программы "Защитник Windows" в инфраструктуре виртуальных рабочих столов](https://docs.microsoft.com/windows/security/threat-protection/windows-defender-antivirus/deployment-vdi-windows-defender-antivirus)

Рассмотрите возможность поддержки при изменении параметров Windows по умолчанию. Иногда сложные проблемы возникают при изменении системных служб, политик или запланированных задач в целях усиления защиты, облегчения выполнения задач и т. д. Обратитесь в базу знаний Майкрософт для получения информации о текущих известных проблемах, связанных с измененными параметрами по умолчанию. Руководство в этом документе и соответствующий сценарий на GitHub будут поддерживаться в отношении известных проблем, если таковые возникнут. Кроме того, вы можете сообщать о проблемах в корпорацию Майкрософт несколькими способами.

Вы можете использовать предпочтительную поисковую систему с условиями `"start value" site:support.microsoft.com`, чтобы отобразить известные проблемы, касающиеся начальных значений по умолчанию для служб.

Вы можете заметить, что этот документ и связанные сценарии на GitHub не изменяют никаких разрешений по умолчанию. Если вы хотите увеличить параметры безопасности, начните с проекта **AaronLocker**, который можно найти в статье [ОБЪЯВЛЕНИЕ. Добавление приложений в список разрешенных с помощью AaronLocker](https://blogs.msdn.microsoft.com/aaron_margosis/2018/06/26/announcing-application-whitelisting-with-aaronlocker/)

### <a name="virtual-desktop-optimization-categories"></a>Категории оптимизации виртуальных рабочих столов

- Очистка приложений UWP
- очистка дополнительных компонентов;
- Параметры локальной политики
- Системные службы
- Запланированные задачи
- Установка обновлений Windows и других обновлений
- Автоматическая трассировка Windows
- Оптимизация Защитника Windows с помощью VDI
- Настройка производительности клиентской сети с помощью параметров реестра
- Дополнительные параметры из руководства "Базовый план ограниченной функциональности трафика Windows".
- "Очистка диска"

### <a name="universal-windows-platform-uwp-application-cleanup"></a>Очистка приложений для универсальной платформы Windows (UWP)

Одной из целей образа виртуального рабочего стола является максимальная облегченность относительно постоянного хранилища. Один из способов уменьшить размер образа — удалить приложения UWP, которые не будут использоваться в среде. Вместе с приложениями UWP хранятся файлы основного приложения, также известные как полезные данные. В каждом профиле пользователя хранится небольшой объем данных параметров приложения. Небольшой объем данных также хранится в профиле "Все пользователи".

Кроме того, все приложения UWP регистрируются либо на уровне пользователя, либо на уровне компьютера в какой-то момент после запуска устройства и входа пользователя в систему. Приложения UWP, которые содержатся в меню "Пуск" и оболочке Windows, выполняют различные задачи во время или после установки, а также при первом входе пользователя в систему и, в меньшей степени, при последующих входах. Для всех приложений UWP требуется выполнить определенные оценки, например:

- Нужно ли обновить приложение до последней версии?
- Приложению, закрепленному в меню "Пуск", может потребоваться загрузить динамические данные плитки.
- Есть ли у приложения кэш данных, которые необходимо обновить, например данные карт или погоды?
- Использует ли приложение постоянные данные из профиля пользователя, которые должны быть представлены при входе в систему (например, Записки)?

При установке Windows 10 по умолчанию не все приложения UWP могут использоваться в организации. Следовательно, если эти приложения удаляются, требуется меньше оценок, например меньший объем кэширования и т. д. Второй метод заключается в отключении "возможностей потребителя" Windows. Это снижает активность в Store, так как каждому пользователю приходится проверять, какие приложения установлены, какие доступны, а затем скачивать приложения UWP. Экономия производительности может быть значительной при наличии большого количества пользователей. Все они начинают работать приблизительно в одно и то же время или же начинают работу в разное время в разных часовых поясах.

Для очистки приложений UWP очень важными факторами являются наличие подключения и время. Если развернуть базовый образ на устройство без подключения к сети, Windows 10 не сможет подключиться к Microsoft Store и скачать приложения, поэтому ОС будет пытаться установить их, пока вы пытаетесь их удалить. Это может быть хорошим подходом, чтобы иметь возможность настроить образ, а затем обновить то, что осталось на более позднем этапе процесса создания образа.

Если изменить базовый WIM-файл, используемый для установки Windows 10, и удалить из него ненужные приложения UWP перед установкой, то эти приложения не будут устанавливаться с самого начала и последующее создание профиля ускорится. Позже в этом разделе вы найдете сведения о том, как удалить приложения UWP из WIM-файла установки.

Хорошая стратегия для виртуальных рабочий столов — подготовить нужные приложения в базовом образе, а затем ограничить или запретить доступ к Microsoft Store. Приложения Store периодически обновляются в фоновом режиме на обычных компьютерах. Приложения UWP могут обновляться во время периода обслуживания, когда остальные обновления применены.

#### <a name="delete-the-payload-of-uwp-apps"></a>Удаление полезных данных приложений UWP

Приложения UWP, которые не требуются, по-прежнему занимают небольшое дисковое пространство в файловой системе. Полезные данные приложений UWP, которые никогда не потребуются, можно удалить из базового образа с помощью команд PowerShell. Если удалить их из WIM-файла установки, используя ссылки, приведенные ниже в этом разделе, то можно начать работу с очень коротким списком приложений UWP.

Выполните следующую команду, чтобы перечислить подготовленные приложения UWP из выполняющейся операционной системы, как показано ниже в сокращенном примере выходных данных PowerShell.

```powershell
Get-AppxProvisionedPackage -Online

DisplayName  : Microsoft.3DBuilder
Version      : 13.0.10349.0  
Architecture : neutral
ResourceId   : \~
PackageName  : Microsoft.3DBuilder_13.0.10349.0_neutral_\~_8wekyb3d8bbwe
Regions      :

DisplayName  : Microsoft.Appconnector
Version      : 2015.707.550  
Architecture : neutral
ResourceId   : \~
PackageName  : Microsoft.Appconnector_2015.707.550.0_neutral_\~_8wekyb3d8bbwe
Regions      :
...
```

Приложения UWP, подготовленные для системы, можно удалить при установке операционной системы с помощью последовательности задач. Кроме того, это можно сделать и после установки операционной системы. Этот метод может быть предпочтительным, так как он значительно упрощает весь процесс создания и обслуживания модульного образа. Если после разработки сценариев в последующие сборки будут внесены изменения, вы сможете изменить имеющийся сценарий, а не повторять процесс с нуля.

Дополнительные сведения см. в следующих ресурсах:

- [Removing Windows 10 in-box apps during a task sequence](/archive/blogs/mniehaus/removing-windows-10-in-box-apps-during-a-task-sequence) (Удаление встроенных приложений для Windows 10 с помощью последовательности задач)
- [Удаление встроенных приложений из WIM-файла Windows 10 с помощью PowerShell версии 1.3](https://gallery.technet.microsoft.com/Removing-Built-in-apps-65dc387b)
- [Windows 10 1607: Keeping apps from coming back when deploying the feature update](https://blogs.technet.microsoft.com/mniehaus/2016/08/23/windows-10-1607-keeping-apps-from-coming-back-when-deploying-the-feature-update/) (Windows 10 версии 1607: как сделать так, чтобы приложения не устанавливались заново при развертывании обновления компонента)
- [Removing Windows 10 in-box apps during a task sequence](https://blogs.technet.microsoft.com/mniehaus/2015/11/11/removing-windows-10-in-box-apps-during-a-task-sequence/) (Удаление встроенных приложений для Windows 10 с помощью последовательности задач)

Затем выполните следующую команду PowerShell, чтобы удалить полезные данные приложений UWP.

```powershell
Remove-AppxProvisionedPackage -Online - PackageName MyAppxPackage
```

Наконец, полезность каждого приложения UWP должна быть отдельно оценена для каждой уникальной среды. Вам потребуется выполнить установку по умолчанию Windows 10 версии 2004, а затем определить, какие приложения запускаются и потребляют память. Например, можно рассмотреть возможность удаления приложений, которые запускаются автоматически, или приложений, которые автоматически отображают информацию в меню "Пуск", таких как "Погода" и "Новости", и которые могут быть бесполезными в вашей среде.

> [!NOTE]
> При использовании сценариев из GitHub вы можете легко управлять списком приложений, которые удаляются перед запуском сценария. После скачивания файлов сценария найдите файл AppxPackage.json, измените его и удалите записи для приложений, которые хотите сохранить, таких как "Калькулятор", "Записки" и т. д.

## <a name="windows-optional-features-cleanup"></a>Очистка дополнительных компонентов Windows

### <a name="managing-optional-features-with-powershell"></a>Управление дополнительными компонентами с помощью PowerShell

Microsoft: [Windows 10. Управление дополнительными компонентами с помощью PowerShell](https://social.technet.microsoft.com/wiki/contents/articles/39386.windows-10-managing-optional-features-with-powershell.aspx)

Вы можете управлять дополнительными компонентами Windows с помощью PowerShell. Чтобы перечислить текущие установленные компоненты Windows, выполните следующую команду PowerShell:

```powershell
Get-WindowsOptionalFeature -Online
```

С помощью PowerShell перечисляемый дополнительный компонент Windows можно включить или отключить, как показано в следующем примере:

```powershell
Enabled-WindowsOptionalFeature -Online -FeatureName "DirectPlay" -All
```

Ниже приведен пример команды, которая отключает проигрыватель Windows Media в образе виртуального рабочего стола.

```powershell
Disable-WindowsOptionalFeature -Online -FeatureName "WindowsMediaPlayer"
```

Затем вы можете удалить пакет проигрывателя Windows Media. В следующем примере команды показано, как это сделать:

```powershell

PS C:\> Get-WindowsPackage -Online -PackageName *media*

PackageName              : Microsoft-Windows-MediaPlayer-Package~31bf3856ad364e35~amd64~~10.0.19041.153
Applicable               : True
Copyright                : Copyright (c) Microsoft Corporation. All Rights Reserved
Company                  :
CreationTime             :
Description              : Play audio and video files on your local machine and on the Internet.
InstallClient            : DISM Package Manager Provider
InstallPackageName       : Microsoft-Windows-MediaPlayer-Package~31bf3856ad364e35~amd64~~10.0.19041.153.mum
InstallTime              : 5/11/2020 5:43:37 AM
LastUpdateTime           :
DisplayName              : Windows Media Player
ProductName              : Microsoft-Windows-MediaPlayer-Package
ProductVersion           :
ReleaseType              : OnDemandPack
RestartRequired          : Possible
SupportInformation       : http://support.microsoft.com/?kbid=777777
PackageState             : Installed
CompletelyOfflineCapable : Undetermined
CapabilityId             : Media.WindowsMediaPlayer~~~~0.0.12.0
Custom Properties        :

Features                 : {}
```

Если вы хотите удалить пакет проигрывателя Windows Media (чтобы освободить около 60 МБ места на диске), выполните следующую команду:

```powershell
PS C:\Windows\system32> Remove-WindowsPackage -PackageName Microsoft-Windows-MediaPlayer-Package~31bf3856ad364e35~amd64~~10.0.19041.153 -Online

Path          :
Online        : True
RestartNeeded : False
```

### <a name="enable-of-disabling-windows-features-using-dism"></a>Включение или отключение компонентов Windows с помощью DISM

Вы можете воспользоваться встроенным средством Dism.exe, чтобы перечислить дополнительные компоненты Windows и управлять ими. Сценарий Dism.exe может быть разработан и запущен во время последовательности задач установки операционной системы. Используемая технология Windows называется Компоненты по требованию. Дополнительные сведения об этой технологии см. в следующей статье:

Microsoft: [Компоненты по требованию](https://docs.microsoft.com/windows-hardware/manufacture/desktop/features-on-demand-v2--capabilities)

### <a name="default-user-settings"></a>Параметры пользователя по умолчанию

Файл реестра Windows можно настроить по пути `C:\Users\Default\NTUSER.DAT`. Любые изменения параметров, внесенные для этого файла, будут применены ко всем последующим профилям пользователей, созданным на основе компьютера, на котором выполняется этот образ. Вы можете управлять списком параметров, которые будут применяться к профилю пользователя по умолчанию, изменив файл **DefaultUserSettings.txt**.

Чтобы уменьшить количество передаваемых графических данных через инфраструктуру VDI, вы можете установить для фона по умолчанию сплошной цвет вместо изображения по умолчанию для Windows 10. Вы также можете установить сплошной цвет экрана входа в систему, а также отключить эффект непрозрачного размытия.

Следующие параметры применяются к кусту реестра профиля пользователя по умолчанию, главным образом для уменьшения количества анимаций. Если некоторые или все эти параметры не нужны, удалите параметры, которые не будут применяться к новым профилям пользователей на основе этого изображения. Целью этих параметров является включение следующих аналогичных параметров.

- Отображение тени под указателем мыши.
- Отображение теней, отбрасываемых окнами.
- Сглаживание неровностей экранных шрифтов.

![Снимок экрана меню параметров производительности, в котором выбраны соответствующие элементы.](media/performance-options.png)

Кроме того, новым в этой версии настроек является метод отключения следующих двух параметров конфиденциальности для любого профиля пользователя, созданного после выполнения оптимизации:

- "Разрешить веб-сайтам предоставлять местную информацию за счет доступа к моему списку языков"
- "Показывать рекомендуемое содержимое в приложении «Параметры»"

![Снимок экрана окна параметров конфиденциальности. Два отключенных параметра выделены красным цветом.](media/privacy-settings.png)

Ниже приведены параметры оптимизации, которые применяются к кусту реестра профиля пользователя по умолчанию для оптимизации производительности. Обратите внимание, что эта операция выполняется сначала путем загрузки куста реестра профиля пользователя по умолчанию **NTUser.dat** в качестве имени временного ключа **Temp**, а затем внесения указанных ниже изменений.

```regedit
Load HKLM\Temp C:\Users\Default\NTUSER.DAT
add "HKLM\Temp\Software\Microsoft\Windows\CurrentVersion\Explorer" /v ShellState /t REG_BINARY /d 240000003C2800000000000000000000 /f
add "HKLM\Temp\Software\Microsoft\Windows\CurrentVersion\Explorer\Advanced" /v IconsOnly /t REG_DWORD /d 1 /f
add "HKLM\Temp\Software\Microsoft\Windows\CurrentVersion\Explorer\Advanced" /v ListviewAlphaSelect /t REG_DWORD /d 0 /f
add "HKLM\Temp\Software\Microsoft\Windows\CurrentVersion\Explorer\Advanced" /v ListviewShadow /t REG_DWORD /d 0 /f
add "HKLM\Temp\Software\Microsoft\Windows\CurrentVersion\Explorer\Advanced" /v ShowCompColor /t REG_DWORD /d 1 /f
add "HKLM\Temp\Software\Microsoft\Windows\CurrentVersion\Explorer\Advanced" /v ShowInfoTip /t REG_DWORD /d 1 /f
add "HKLM\Temp\Software\Microsoft\Windows\CurrentVersion\Explorer\Advanced" /v TaskbarAnimations /t REG_DWORD /d 0 /f
add "HKLM\Temp\Software\Microsoft\Windows\CurrentVersion\Explorer\VisualEffects" /v VisualFXSetting /t REG_DWORD /d 3 /f
add "HKLM\Temp\Software\Microsoft\Windows\DWM" /v EnableAeroPeek /t REG_DWORD /d 0 /f
add "HKLM\Temp\Software\Microsoft\Windows\DWM" /v AlwaysHiberNateThumbnails /t REG_DWORD /d 0 /f
add "HKLM\Temp\Control Panel\Desktop" /v DragFullWindows /t REG_SZ /d 0 /f
add "HKLM\Temp\Control Panel\Desktop" /v FontSmoothing /t REG_SZ /d 2 /f
add "HKLM\Temp\Control Panel\Desktop" /v UserPreferencesMask /t REG_BINARY /d 9032078010000000 /f
add "HKLM\Temp\Control Panel\Desktop\WindowMetrics" /v MinAnimate /t REG_SZ /d 0 /f
add "HKLM\Temp\Software\Microsoft\Windows\CurrentVersion\StorageSense\Parameters\StoragePolicy" /v 01 /t REG_DWORD /d 0 /f
add "HKLM\Temp\Software\Microsoft\Windows\CurrentVersion\ContentDeliveryManager" /v SubscribedContent-338393Enabled /t REG_DWORD /d 0 /f
add "HKLM\Temp\Software\Microsoft\Windows\CurrentVersion\ContentDeliveryManager" /v SubscribedContent-353694Enabled /t REG_DWORD /d 0 /f
add "HKLM\Temp\Software\Microsoft\Windows\CurrentVersion\ContentDeliveryManager" /v SubscribedContent-353696Enabled /t REG_DWORD /d 0 /f
add "HKLM\Temp\Software\Microsoft\Windows\CurrentVersion\ContentDeliveryManager" /v SubscribedContent-338388Enabled /t REG_DWORD /d 0 /f
add "HKLM\Temp\Software\Microsoft\Windows\CurrentVersion\ContentDeliveryManager" /v SubscribedContent-338389Enabled /t REG_DWORD /d 0 /f
add "HKLM\Temp\Software\Microsoft\Windows\CurrentVersion\ContentDeliveryManager" /v SystemPaneSuggestionsEnabled /t REG_DWORD /d 0 /f
add "HKLM\Temp\Control Panel\International\User Profile" /v HttpAcceptLanguageOptOut /t REG_DWORD /d 1 /f
add "HKLM\Temp\Software\Microsoft\Windows\CurrentVersion\BackgroundAccessApplications\Microsoft.Windows.Photos_8wekyb3d8bbwe" /v Disabled /t REG_DWORD /d 1 /f
add "HKLM\Temp\Software\Microsoft\Windows\CurrentVersion\BackgroundAccessApplications\Microsoft.Windows.Photos_8wekyb3d8bbwe" /v DisabledByUser /t REG_DWORD /d 1 /f
add "HKLM\Temp\Software\Microsoft\Windows\CurrentVersion\BackgroundAccessApplications\Microsoft.SkypeApp_kzf8qxf38zg5c" /v Disabled /t REG_DWORD /d 1 /f
add "HKLM\Temp\Software\Microsoft\Windows\CurrentVersion\BackgroundAccessApplications\Microsoft.SkypeApp_kzf8qxf38zg5c" /v DisabledByUser /t REG_DWORD /d 1 /f
add "HKLM\Temp\Software\Microsoft\Windows\CurrentVersion\BackgroundAccessApplications\Microsoft.YourPhone_8wekyb3d8bbwe" /v Disabled /t REG_DWORD /d 1 /f
add "HKLM\Temp\Software\Microsoft\Windows\CurrentVersion\BackgroundAccessApplications\Microsoft.YourPhone_8wekyb3d8bbwe" /v DisabledByUser /t REG_DWORD /d 1 /f
add "HKLM\Temp\Software\Microsoft\Windows\CurrentVersion\BackgroundAccessApplications\Microsoft.MicrosoftEdge_8wekyb3d8bbwe" /v Disabled /t REG_DWORD /d 1 /f
add "HKLM\Temp\Software\Microsoft\Windows\CurrentVersion\BackgroundAccessApplications\Microsoft.MicrosoftEdge_8wekyb3d8bbwe" /v DisabledByUser /t REG_DWORD /d 1 /f
add "HKLM\Temp\Software\Microsoft\InputPersonalization" /v RestrictImplicitInkCollection /t REG_DWORD /d 1 /f
add "HKLM\Temp\Software\Microsoft\InputPersonalization" /v RestrictImplicitTextCollection /t REG_DWORD /d 1 /f
add "HKLM\Temp\Software\Microsoft\Personalization\Settings" /v AcceptedPrivacyPolicy /t REG_DWORD /d 0 /f
add "HKLM\Temp\Software\Microsoft\InputPersonalization\TrainedDataStore" /v HarvestContacts /t REG_DWORD /d 0 /f
add "HKLM\Temp\Software\Microsoft\Windows\CurrentVersion\UserProfileEngagement" /v ScoobeSystemSettingEnabled /t REG_DWORD /d 0 /f
add "HKLM\Temp\Software\Microsoft\Windows\CurrentVersion\UserProfileEngagement" /v ScoobeSystemSettingEnabled /t REG_DWORD /d 0 /f
add "HKLM\Temp\Software\Microsoft\Windows\CurrentVersion\UserProfileEngagement" /v ScoobeSystemSettingEnabled /t REG_DWORD /d 0 /f
Unload HKLM\Temp
```

Еще одна серия недавно добавленных пользовательских параметров по умолчанию — это отключение запуска и работы нескольких приложений Windows в фоновом режиме. Хотя для одного устройства это не имеет значения, Windows 10 запускает ряд процессов для каждого сеанса пользователя на определенном устройстве (узле). Одним из примеров является приложение Skype, а другим — Microsoft Edge. Эти параметры отключают в нескольких приложениях возможность запуска в фоновом режиме. Если эта функция нужна, просто удалите строки из файла DefaultUserSettings.txt, содержащие имена приложений **Windows.Photos**, **SkypeApp**, **YourPhone** или **MicrosoftEdge**.

### <a name="local-policy-settings"></a>Параметры локальной политики

Многие оптимизации для Windows 10 в среде виртуальных рабочих столов можно выполнить с помощью политики Windows. Параметры, перечисленные в таблице в этом разделе, могут применяться локально к базовому или золотому образу. Тогда они будут действовать, если аналогичные параметры не будут указаны любым другим способом, например с помощью групповой политики.

Обратите внимание, что некоторые решения могут быть основаны на особенностях среды.

- У среды виртуальных рабочих столов есть доступ к Интернету?
- Решение виртуальных рабочих столов является постоянным или временным?

Указанные ниже параметры были выбраны для того, чтобы не противоречить и не конфликтовать с параметрами, каким-либо образом связанными с безопасностью. Эти параметры были выбраны для удаления параметров или отключения функций, которые могут стать неприменимыми в средах виртуальных рабочих столов.

| Параметр политики | Элемент | Вложенный элемент | Возможные значения и комментарии |
|--------------|----|--------|----------------------------|
| Политика локального компьютера \\ Конфигурация компьютера \\ Параметры Windows \\ Параметры безопасности | Н/Д | Н/Д | Н/Д |
| Политики диспетчера списка сетей | Все свойства сети | Сетевое расположение | **Пользователь не может изменить расположение** (Это необходимо для предотвращения появления всплывающего окна по щелчку правой кнопкой мыши при обнаружении новой сети.) |
| Политика локального компьютера \\ Конфигурация компьютера \\ Административные шаблоны \\ Панель управления | Н/Д | Н/Д |
| Панель управления | Отображение советов в Интернете | Н/Д  | **Отключен** (Параметры запретят обращение к службам содержимого Майкрософт для получения советов и справки.) |
| "Панель управления" и "Персонализация" | Применить конкретное изображение экрана блокировки и экрана входа в систему, которое будет использоваться по умолчанию | Н/Д | "Включен" (Этот параметр позволяет принудительно применить конкретное изображение экрана блокировки окна входа по умолчанию с помощью ввода пути (расположение) файла изображения. Одно и то же изображение будет использоваться для окна блокировки и для окна входа в систему. <p>Это необходимо для сокращения числа передаваемых по сети данных для сред виртуальных рабочих столов. Параметр можно удалить или настроить для каждой среды.)|
|"Панель управления", "Язык и региональные стандарты", "Персонализация рукописного ввода"|Отключить автоматическое обучение| Н/Д |**Включен** (Если вы включите этот параметр политики, автоматическое обучение будет остановлено, а все сохраненные данные будут удалены. пользователи не могут настроить этот параметр на панели управления).|
|Политика локального компьютера \\ Конфигурация компьютера \\ Административные шаблоны \\ Сеть|Н/Д|Н/Д|Н/Д|
|Фоновая интеллектуальная служба передачи (BITS)|Разрешить кэширование членов одноранговой группы BITS| Н/Д |**Отключен** (Этот параметр политики определяет, включена ли функция однорангового кэширования фоновой интеллектуальной службы передачи (BITS) на определенном компьютере.)|
|Фоновая интеллектуальная служба передачи (BITS)|Запретить клиенту BITS использование кэша филиалов Windows|Н/Д|**Включен** (Если этот параметр политики включен, клиент BITS не использует кэш филиалов Windows.)<p>Это необходимо для того, чтобы устройства виртуальных рабочих столов не использовались для кэширования содержимого, в результате чего устройства не смогут использовать пропускную способность сети.|
|Фоновая интеллектуальная служба передачи (BITS)|Запретить компьютеру действовать как клиенту кэширования членов одноранговой группы BITS|Н/Д|**Включен** (Если этот параметр политики включен, компьютер больше не будет использовать функцию однорангового кэширования BITS для скачивания файлов; файлы будут загружаться только с исходного сервера.)|
Фоновая интеллектуальная служба передачи (BITS)|Запретить компьютеру действовать как серверу кэширования членов одноранговой группы BITS|Н/Д|**Включен** (Если этот параметр политики включен, компьютер больше не будет кэшировать скачанные файлы и предоставит их одноранговым узлам.)|
|BranchCache|Включить BranchCache|Н/Д|**Отключен** (Если этот параметр отключен, BranchCache отключается для всех клиентских компьютеров, на которых применяется политика.)|
|*Шрифты|Enabled Font Providers (Включенные поставщики шрифтов)|Н/Д|**Отключен** (Если этот параметр отключен, Windows не подключается к поставщику шрифтов в Интернете, а только перечисляет локально установленные шрифты.)|
|Проверка подлинности для территории беспроводного доступа|Включить проверку подлинности для территории беспроводного доступа| Н/Д |**Отключен** (Этот параметр политики определяет, проверяются ли хот-споты беспроводной сети на предмет поддержки протокола беспроводного подключения поставщика услуг Интернета (WISPR). Если этот параметр политики отключен, поддержка протокола WISPR хот-спотами беспроводной сети не проверяется и пользователи могут проходить проверку подлинности только в точках доступа WLAN с помощью веб-браузера.)|
|Службы одноранговых сетей Майкрософт|Отключение служб одноранговых сетей Майкрософт|Н/Д|**Включен** (Этот параметр отключает службы одноранговых сетей Майкрософт целиком и все зависимые приложения. Если включить этот параметр политики, одноранговые протоколы будут отключены.)|
|Индикатор работоспособности сетевых подключений<p>(Обратите внимание на то, что в разделе есть другие параметры, которые можно использовать в изолированных сетях.)|Задать пассивный опрос|Отключить пассивный опрос (**флажок**)|**Включен** (Этот параметр политики позволяет указать режим пассивного опроса. NCSI периодически опрашивает различные метрики в сетевом стеке, чтобы определить, потеряно ли сетевое подключение. Эти параметры можно использовать для управления поведением пассивного опроса.)<P>Отключение пассивного опроса NCI может повысить нагрузку на ЦП на серверах или на других компьютерах, сетевое подключение которых является статическим.|
|Автономные файлы|Разрешить или запретить использование автономных файлов|Н/Д|**Отключен** (Этот параметр политики определяет, включена ли функция автономных файлов. Функция автономных файлов сохраняет копию сетевых файлов на компьютере пользователя для использования, когда компьютер не подключен к сети. Если этот параметр политики отключен, функция автономных файлов отключается и пользователи не могут ее включить.)|
|*"Параметры TCP/IP", "Технологии туннелирования для IP версии 6"| Установка состояния Teredo|Отключенное состояние|**Включен** (В отключенном состоянии интерфейсы Teredo на узле отсутствуют.)|
*"Служба WLAN", "Параметры WLAN"|Разрешить Windows автоматически подключаться к предложенным открытым хот-спотам, к сетям, доступ к которым предоставили контакты, и к хот-спотам, предлагающим платные услуги|Н/Д|**Отключен** (Этот параметр политики определяет, могут ли пользователи включать следующие параметры WLAN: "Подключаться к рекомендованным хот-спотам беспроводных сетей", "Подключаться к сетям, общий доступ к которым предоставляют мои контакты" и Enable paid services (Включить платные службы). Если этот параметр политики отключен, параметры "Подключаться к рекомендованным хот-спотам беспроводных сетей", "Подключаться к сетям, общий доступ к которым предоставляют мои контакты" и Enable paid services (Включить платные службы) будут отключены и пользователи этого устройства не смогут их включать.)|
|"Служба WWAN", Cellular Data Access (Доступ к передаче данных)|Let Windows apps access cellular data (Разрешить приложениям для Windows доступ к передаче данных)|По умолчанию для всех приложений: **Запретить принудительно**|**Включен** (Если выбран параметр "Запретить принудительно", приложениям для Windows запрещается доступ к передаче данных и пользователи не могут это изменить.)|
|"Политика локального компьютера", "Конфигурация компьютера", "Административные шаблоны", "Меню «Пуск» и панель задач"|Н/Д|Н/Д|
|*Уведомления|Отключить использование уведомлениями сети| Н/Д |**Включен** (Если вы включите этот параметр политики, приложения и компоненты системы не смогут получать уведомления по сети от WNS или с помощью интерфейсов API опроса уведомлений.)|
|"Политика локального компьютера", "Конфигурация компьютера", "Административные шаблоны", "Система"| Н/Д | Н/Д |Н/Д|
|Установка устройств|Не отправлять отчет об ошибках Windows, если на устройстве установлен универсальный драйвер| Н/Д |**Включен** (Если этот параметр политики включен, отчет об ошибках не отправляется, если установлен универсальный драйвер.)|
|Установка устройства|Не создавать контрольную точку восстановления системы во время работы устройства, при которой обычно требуется создание точки восстановления| Н/Д |**Включен** (Если этот параметр политики включен, Windows не создает точку восстановления системы, хотя она обычно создается.)|
|Установка устройства|Запретить получение метаданных устройств из Интернета| Н/Д |**Включен** (Этот параметр политики позволяет запретить Windows извлекать метаданные устройств из Интернета. Если этот параметр политики включен, Windows не извлекает метаданные установленных устройств из Интернета. Этот параметр политики переопределяет параметр в диалоговом окне параметров установки устройств ("Панель управления > Система и безопасность > Система > Дополнительные параметры системы > Оборудование").)|
|Установка устройства|Отключить всплывающие напоминания "Найдено новое оборудование" во время установки устройства| Н/Д |**Включен** (Этот параметр политики позволяет отключить всплывающие подсказки "Найдено новое оборудование" во время установки устройства. Если этот параметр политики включен, всплывающие подсказки "Найдено новое оборудование" не отображаются во время установки устройства.)|
|"Файловая система", NTFS|Параметры создания коротких имен|Параметры создания коротких имен: Отключены для всех томов.|**Включен** (Эти параметры позволяют контролировать, создаются ли короткие имена во время создания файлов. Некоторым приложениям требуются короткие имена для обеспечения совместимости, но такие имена отрицательно влияют на производительность системы. Если на всех томах отключены короткие имена, они никогда не будут создаваться.)|
|*Групповая политика|Продолжить работу на этом устройстве| Н/Д |**Отключен** (Этот параметр политики определяет, может ли устройство Windows взаимодействовать с другими устройствами (продолжить работу). Отключение этой политики предотвращает обнаружение этого устройства другими устройствами и ограничивает взаимодействие.)|
|"Управление связью через Интернет", "Параметры связи через Интернет"|Отключить ссылки просмотра событий Events.asp| Н/Д |**Включен** (Этот параметр политики указывает, доступны ли гиперссылки Events.asp для событий в приложении "Просмотр событий".)|
|"Управление связью через Интернет", "Параметры связи через Интернет"|Отключить совместный доступ к данным настройки рукописного ввода.| Н/Д |**Включен** (Отключает совместный доступ к данным из средства настройки распознавания рукописного ввода.)|
|"Управление связью через Интернет", "Параметры связи через Интернет"|Отключить отчеты об ошибках распознавания рукописного текста.| Н/Д |**Включен** (Отключает средство создания отчетов об ошибках распознавания рукописного ввода.)|
|"Управление связью через Интернет", "Параметры связи через Интернет"|Отключить поиск в базе знаний Майкрософт в окне "Центр справки и поддержки".| Н/Д |**Включен** (Этот параметр политики указывает, могут ли пользователи выполнять поиск в базе знаний Майкрософт в Центре справки и поддержки.)|
|"Управление связью через Интернет", "Параметры связи через Интернет"|Отключить мастер подключения к Интернету, если URL-адрес ссылается на сайт Microsoft.com.| Н/Д |**Включен** (Этот параметр политики указывает, может ли мастер подключения к Интернету подключиться к серверам Майкрософт для скачивания списка поставщиков услуг Интернета (ISP).)|
|"Управление связью через Интернет", "Параметры связи через Интернет"|Отключить загрузку из Интернета для мастеров публикаций и заказов в Интернете.| Н/Д |**Включен** (Этот параметр политики указывает, следует ли Windows загружать список поставщиков для мастеров публикаций и заказов в Интернете.)|
|"Управление связью через Интернет", "Параметры связи через Интернет"|Отключить службу сопоставления файлов Интернета.| Н/Д |**Включен** (Этот параметр политики указывает, следует ли использовать веб-службу Майкрософт для поиска приложения, чтобы открыть файл с необработанным сопоставлением файлов.)|
|"Управление связью через Интернет", "Параметры связи через Интернет"|Отключить регистрацию, если адрес-URL указывает на сайт Microsoft.com.| Н/Д |**Включен** (Этот параметр политики указывает, будет ли мастер регистрации Windows подключаться к сайту Microsoft.com для регистрации в сети.)|
|"Управление связью через Интернет", "Параметры связи через Интернет"|Отключить обновление файлов содержимого помощника по поиску| Н/Д |**Включен** (Этот параметр политики указывает, должен ли помощник по поиску автоматически скачивать обновления содержимого во время локальных поисковых запросов и поисковых запросов в Интернете).|
|"Управление связью через Интернет", "Параметры связи через Интернет"|Отключить заказ отпечатков в списке задач для изображений.| Н/Д |**Включен** (Если этот параметр политики включен, задача "Заказ отпечатков в сети" удаляется из папок задач для изображений в папках проводника.)|
"Управление связью через Интернет", "Параметры связи через Интернет"|Отключить задачу "Опубликовать в Интернете" для файлов и папок.| Н/Д |**Включен* (Этот параметр политики указывает, будут ли задачи "Опубликовать файл в Интернете", "Опубликовать папку в Интернете" и "Опубликовать выделенные элементы в Интернете" отображаться в разделе задач для файлов и папок в папках Windows.)|
|"Управление связью через Интернет", "Параметры связи через Интернет"|Отключить программу по улучшению качества программного обеспечения Windows.| Н/Д |**Включен** (Программа по улучшению качества программного обеспечения Windows (CEIP) служит для сбора сведений об аппаратной конфигурации пользователя, а также об использовании им программного обеспечения и служб для определения тенденций и моделей использования. Если этот параметр включен, все пользователи отказались от участия в этой программе.)|
|"Управление связью через Интернет", "Параметры связи через Интернет"|Отключить отчеты об ошибках Windows.| Н/Д |**Включен** (Этот параметр политики определяет, передаются ли отчеты об ошибках в Майкрософт. Если этот параметр политики включен, пользователям не предоставляется возможность сообщать об ошибках.)|
|"Управление связью через Интернет", "Параметры связи через Интернет"|Отключить поиск драйверов устройств в Центре обновления Windows.| Н/Д |**Включен** (Эта политика указывает, будет ли производиться поиск драйверов устройств в Центре обновления Windows при их отсутствии на локальном диске устройства. Если этот параметр политики включен, Центр обновления Windows не будет выполнять поиск при установке нового устройства.)|
|Вход в систему|Не показывать экран приветствия "Приступая к работе" при входе в систему| Н/Д |**Включен** (Если этот параметр включен, экран приветствия скрыт от пользователя, выполнившего вход в систему на устройстве Windows.)|
|Вход в систему|Не перечислять подключенных пользователей на компьютерах, подключенных к домену| Н/Д |**Включен** (Если этот параметр включен, пользовательский интерфейс входа не будет перечислять подключенных пользователей на компьютерах, присоединенных к домену.)|
|Вход в систему|Перечислить локальных пользователей на компьютерах, подключенных к домену| Н/Д |**Отключен** (Если этот параметр отключен, пользовательский интерфейс входа не будет перечислять локальных пользователей на компьютерах, подключенных к домену.)|
|Вход в систему|Show clear logon background (Показывать пустое фоновое изображение экрана входа)| Н/Д |**Включен** (Этот параметр политики отключает эффект размытия на фоновом изображении экрана входа. Если этот параметр включен, фоновое изображение экрана входа отображается без размытия.)|
|Вход в систему|Демонстрация анимации при первом входе| Н/Д |**Отключен** (Этот параметр политики позволяет контролировать, видят ли пользователи анимацию при первом входе в систему компьютера. Это относится как к первому пользователю компьютера, который выполняет начальную настройку, так и к пользователям, добавленным на компьютер позже. Этот параметр политики также определяет, будут ли пользователи с учетными записями Майкрософт получать запрос на использование служб при первом входе в систему.<p>Если этот параметр отключен, анимация не будет отображаться и пользователи с учетными записями Майкрософт не будут получать запрос на использование служб.)|
|Вход в систему|Отключение уведомлений приложений на экране блокировки| Н/Д |**Включен** (Этот параметр политики позволяет запретить отображение уведомлений приложений на экране блокировки. Если этот параметр включен, уведомления приложений не отображаются на экране блокировки.)|
|Управление питанием|Выбрать текущую схему управления питанием|Текущая схема управления питанием: Высокая производительность|**Включен** (Если этот параметр политики включен, укажите схему управления питанием в списке текущих схем управления питанием.) <p>Если служба управления питанием отключена, пользовательский интерфейс powercfg.cpl не может отобразить эти параметры управления питанием, а вместо этого возвращает ошибку RPC.|
|"Управление питанием", "Параметры экрана и видео"|Включить фоновый показ слайдов на рабочем столе (питание от сети)| Н/Д |**Отключен** (Этот параметр политики позволяет указать, должна ли Windows включить показ слайдов на рабочем столе.) Если этот параметр отключен, показ слайдов на рабочем столе отключено. Этот параметр, скорее всего, не оказывает влияние на виртуальную машину.|
|Восстановление|Разрешить восстановление системы в состояние по умолчанию| Н/Д |**Отключен** (Если этот параметр отключен, элементы "Используйте образ системы, созданный ранее для восстановления компьютера" и "Переустановить Windows" (или "Вернуть компьютер в состояние, заданное изготовителем") в параметре "Восстановление" (на панели управления) будут недоступны.)|
|*Работоспособность хранилища|Разрешить скачивать обновления в модель прогнозирования сбоев диска| Н/Д |**Отключен** (Обновления для модели прогнозирования сбоев диска не будут скачиваться.)|
|"Восстановление системы"|Отключить восстановление системы| Н/Д |**Включен** (Если этот параметр включен, восстановление системы отключено, а мастер восстановления недоступен. Кроме того, отключена возможность настройки восстановления системы или создания точки восстановления с помощью функции "Защита системы".)|
|"Диагностика и устранение неполадок", "Запланированное обслуживание"|Настроить поведение при запланированном обслуживании| Н/Д |**Отключен** (Параметр определяет, будет ли запланированная диагностика выполняться для упреждающего обнаружения и разрешения системных проблем. Если этот параметр политики отключен, Windows не сможет обнаруживать, диагностировать или устранять проблемы по расписанию.)|
|"Диагностика и устранение неполадок", "Диагностика со сценариями"|Устранение неполадок: разрешить пользователям запускать мастера устранения неполадок| Н/Д |**Отключен** (Если этот параметр отключен, пользователи не смогут получить доступ к средствам устранения неполадок и запустить их из панели управления.)|
|"Диагностика и устранение неполадок", "Диагностика со сценариями"|Устранение неполадок: разрешить пользователям доступ к сведениям об устранении неполадок, расположенным на серверах корпорации Майкрософт, из компонента "Устранение неполадок" панели управления (через интернет-службу устранения неполадок Windows (WOTS))| Н/Д |**Отключен** (Если этот параметр отключен, пользователи могут получать доступ и искать информацию об устранении неполадок только локально на своих компьютерах даже при подключении к Интернету. Им запрещено подключаться к серверам Майкрософт, на которых размещена служба WOTS.)|
|"Диагностика и устранение неполадок", "Диагностика быстродействия загрузки Windows"|Настройка уровня выполнения сценария| Н/Д |**Отключен** (Определяет уровень выполнения для диагностики производительности загрузки Windows. Если отключить этот параметр политики, Windows не сможет обнаружить или устранить проблемы с производительностью загрузок Windows, которые обрабатываются службой DPS.)<p>Этот параметр полезен на этапах проектирования, тестирования, разработки или обслуживания. Этот параметр можно включить на изолированной виртуальной машине или узле сеанса, выполнить измерения и записать результаты в журналы событий в разделе Microsoft-Windows-Diagnostics-Performance/Operational: Diagnostics-Performance, категория задачи "Контроль производительности при загрузке".<p>**ПРИМЕЧАНИЕ.** Если служба DPS отключена, этот параметр не действует, так как Windows не будет вести журнал данных о производительности.|
|"Диагностика и устранение неполадок", Windows Memory Leak Diagnostics (Диагностика утечки памяти Windows)|Настройка уровня выполнения сценария| Н/Д |**Отключен** (Этот параметр политики определяет, будет ли служба политики диагностики (DPS) диагностировать проблемы утечки памяти. Если этот параметр отключен, служба DPS не может диагностировать проблемы утечки памяти.) <p>Вы можете включить множество режимов диагностики и средств, таких как WPT, хотя они обычно выполняются в сценариях разработки, тестирования и обслуживания, но не включены и не используются на рабочих виртуальных машинах или сеансах.|
|"Диагностика и устранение неполадок", "Быстродействие Windows PerfTrack"|Включить или отключить PerfTrack| Н/Д |**Отключен** (Этот параметр политики указывает, следует ли включать или отключать отслеживание событий реагирования. Если этот параметр отключен, события реагирования не обрабатываются.)|
|"Диагностика и устранение неполадок", "Обнаружение и устранение нехватки ресурсов Windows"|Настройка уровня выполнения сценария| Н/Д |**Отключен** (Определяет уровень выполнения обнаружения и устранения нехватки ресурсов Windows. Если отключить этот параметр, Windows не сможет обнаружить или устранить проблемы с нехваткой ресурсов Windows, которые обрабатываются службой DPS.)|
|"Диагностика и устранение неполадок", "Диагностика быстродействия завершения работы Windows"|Настройка уровня выполнения сценария| Н/Д |**Отключен** (Определяет уровень выполнения для диагностики производительности завершения работы Windows. Если отключить этот параметр, Windows не сможет обнаружить или устранить проблемы с производительностью завершения работы Windows, которые обрабатываются службой DPS.)|
|"Диагностика и устранение неполадок", "Диагностика производительности ждущего режима и возобновления работы Windows"|Настройка уровня выполнения сценария| Н/Д |**Отключен** (Определяет уровень выполнения для диагностики производительности ждущего режима и возобновления работы Windows. Если отключить этот параметр, Windows не сможет обнаружить или устранить проблемы с производительностью ждущего режима и возобновления работы Windows, которые обрабатываются службой DPS.)|
|"Диагностика и устранение неполадок", "Диагностика скорости отклика системы Windows"|Настройка уровня выполнения сценария| Н/Д |**Отключен** (Определяет уровень выполнения для диагностики скорости отклика системы Windows. Если отключить этот параметр, Windows не сможет обнаружить или устранить проблемы с производительностью скорости отклика системы Windows, которые обрабатываются службой DPS.)|
*Профили пользователей|Отключение идентификатора рекламы| Н/Д |**Включен** (Если этот параметр включен, идентификатор рекламы отключен. Приложения не могут использовать этот идентификатор для взаимодействия с другими приложениями.)|
|"Политика локального компьютера", "Конфигурация компьютера", "Административные шаблоны", "Компоненты Windows"| Н/Д | Н/Д | Н/Д |
|*Конфиденциальность приложения|Разрешить приложениям для Windows доступ к диагностическим сведениям о других приложениях|По умолчанию для всех приложений: "Запретить принудительно"|**Включен** (Если этот параметр включен и используется настройка "Запретить принудительно", приложениям Windows не разрешается получать диагностические сведения о других приложениях и сотрудники вашей организации не смогут изменить параметр.)|
|*Конфиденциальность приложения|Предоставление приложениям для Windows доступа к данным о расположении|По умолчанию для всех приложений: "Запретить принудительно"|**Включен** (Если этот параметр включен и используется настройка "Запретить принудительно", приложениям Windows запрещен доступ к расположению и пользователи не могут изменить этот параметр.)|
|*Конфиденциальность приложения|Разрешить приложениям для Windows доступ к данным о движении|По умолчанию для всех приложений: "Запретить принудительно"|**Включен** (Если этот параметр включен и используется настройка "Запретить принудительно", приложениям Windows запрещен доступ к данным о движении и пользователи не могут изменить этот параметр.)|
|*Конфиденциальность приложения|Разрешить приложениям для Windows получать доступ к уведомлениям|По умолчанию для всех приложений: "Запретить принудительно"|**Включен** (Если этот параметр включен и используется настройка "Запретить принудительно", приложениям Windows запрещен доступ к уведомлениям и пользователи не могут изменить этот параметр.)|
|*Конфиденциальность приложения|Let Windows apps activate with voice (Разрешить активацию приложений для Windows голосом)|По умолчанию для всех приложений: "Запретить принудительно"|**Включен** (Этот параметр политики определяет, могут ли приложения Windows активироваться голосом.)|
|*Конфиденциальность приложения|Let Windows apps activate with voice while the system is locked (Разрешить активацию приложений для Windows голосом, если система заблокирована)|По умолчанию для всех приложений: "Запретить принудительно"|**Включен** (Этот параметр политики определяет, могут ли приложения Windows активироваться голосом, если система заблокирована.)|
|*Конфиденциальность приложения|Предоставление приложениям для Windows доступа к радио|По умолчанию для всех приложений: "Запретить принудительно"|**Включен** (Если выбран параметр "Запретить принудительно", приложениям для Windows запрещается доступ к радио и сотрудники вашей организации не могут это изменить.)|
|Совместимость приложений|Отключение сборщика перечней| Н/Д |**Включен** (Этот параметр политики управляет состоянием Inventory Collector. Inventory Collector выполняет инвентаризацию приложений, файлов, устройств и драйверов в системе и отправляет сведения о них в Майкрософт. Если этот параметр политики включен, Inventory Collector будет отключен и данные не будут отправляться в Майкрософт. Сбор данных об установке с помощью помощника по совместимости программ также отключен.)|
|Политики автозапуска|Установка поведения по умолчанию для автозапуска|Не выполнять команды автозапуска|**Включен** (Этот параметр политики задает поведение по умолчанию для команд автозапуска.)|
|*Политики автозапуска|Отключить автозапуск|Все диски|**Включен** (Если этот параметр политики включен, автозапуск будет отключен на всех дисках.)|
|*Содержимое облака|Отключение советов по использованию Windows| Н/Д |**Включен** (Этот параметр политики отключает отображение советов по использованию Windows для пользователей.)|
|*Содержимое облака|Выключение возможностей потребителя Microsoft| Н/Д |**Включен** (Если этот параметр политики включен, пользователи больше не увидят персонализированные рекомендации от корпорации Майкрософт и уведомления о своей учетной записи Майкрософт.)|
|*Сборки для сбора данных и предварительные сборки|Разрешить телеметрию|0 — безопасность [только в выпуске Enterprise]|**Включен** (Значение 0 применяется только к устройствам под управлением выпусков "Корпоративная", "Для образовательных учреждений", "IoT" или Windows Server и сокращает объем данных телеметрии, отправляемых на самый базовый поддерживаемый уровень.)|
|Сборки для сбора данных и предварительные сборки|Configure collection of browsing data for Desktop Analytics (Настроить сбор данных обзора для Аналитики компьютеров)|Настройка сбора данных телеметрии: запретить отправку журнала интрасети или Интернета|**Включен** (В Microsoft Edge можно настроить отправку только журнала интрасети, только журнала Интернета или и того и другого в Аналитике компьютеров для корпоративных устройств с настроенным коммерческим идентификатором. Если этот параметр отключен или не настроен, Microsoft Edge не отправляет данные журнала браузера в Аналитику компьютеров.)|
|*Сборки для сбора данных и предварительные сборки|Запрет отображения уведомлений об отзывах| Н/Д |**Включен** (Этот параметр политики позволяет организации запрещать отображение на своих устройствах вопросов с предложением Майкрософт отправить отзыв.)|
|Оптимизация доставки|Режим скачивания|Режим скачивания: простой (99)|**Включен** (99 — простой режим скачивания без использования одноранговых клиентов. Оптимизация доставки означает скачивание только с помощью HTTP без попытки связаться с облачными службами оптимизации доставки.)|
|Диспетчер окон рабочего стола|Не разрешать анимацию окон| Н/Д |**Включен** (Этот параметр политики управляет внешним видом анимации окна, например при восстановлении, свертывании и развертывании окон. Если этот параметр политики включен, анимация окон отключена.)|
|Диспетчер окон рабочего стола|Использовать сплошной цвет для фона начального экрана| Н/Д |**Включен** (Этот параметр политики управляет визуальными элементами фона начального экрана. Если этот параметр политики включен, для фона начального экрана будет использоваться сплошной цвет.)|
|Пользовательский интерфейс границ|Разрешить прокрутку от краев| Н/Д |**Отключен** (Если вы отключите этот параметр политики, пользователи не смогут вызывать какой-либо системный пользовательский интерфейс, проводя пальцем от края экрана.)|
|Пользовательский интерфейс границ|Отключить полезные советы| Н/Д |**Включен** (Если этот параметр включен, Windows не будет показывать советы пользователю.)|
|Проводник|Не показывать уведомление "установлено новое приложение"| Н/Д |**Включен** (Эта политика удаляет уведомления для пользователей о новых связях между приложениями. Эти связи основаны на типах файлов (например, TXT-файлах) или протоколах (например, HTTP). Если эта политика включена, уведомления для пользователя не будут отображаться.)|
|История файлов|Отключить историю файлов| Н/Д |**Включен** (Если этот параметр политики включен, историю файлов невозможно активировать для регулярного автоматического резервного копирования.)|
|*Поиск устройства|Включение и выключение поиска устройства| Н/Д |**Отключен** (Когда поиск устройства отключен, устройство и его расположение не регистрируются и функция "Поиск устройства" не работает. Пользователь также не сможет просмотреть на своем устройстве, где в последний раз был использован активный дигитайзер).|
|Домашняя группа|Запретить присоединение компьютера к домашней группе| Н/Д |**Включен** (Если этот параметр политики включен, пользователи не могут добавлять компьютеры в домашнюю группу. Этот параметр политики не влияет на другие функции общего доступа к сети.)|
|*Internet Explorer|Разрешить службам Майкрософт предоставлять расширенные предложения, когда пользователь вводит текст в адресной строке| Н/Д |**Отключен** (Пользователи не получают расширенные предложения при вводе текста в адресной строке. Кроме того, пользователи не могут изменить параметр "Предложения".)|
|Internet Explorer|Отключить периодическую проверку наличия обновлений программного обеспечения Internet Explorer| Н/Д |**Включен** (Не позволяет Internet Explorer проверять, доступна ли новая версия браузера.)|
|Internet Explorer|Отключить отображение заставки| Н/Д |**Включен** (Запрещает отображение заставки Internet Explorer при запуске браузера.)|
|Internet Explorer|Устанавливать новые версии Internet Explorer автоматически| Н/Д |**Отключен** (Этот параметр политики позволяет настроить автоматическую установку новых версий Internet Explorer по мере их выхода.)|
|Internet Explorer|Запретить участие в программе улучшения качества программного обеспечения| Н/Д |**Включен** (Если этот параметр включен, пользователи не будут участвовать в программе улучшения качества программного обеспечения (CEIP).)|
|Internet Explorer|Не выполнять мастер запуска в первый раз|Перейти сразу на домашнюю страницу|**Включен** (Этот параметр политики не разрешает Internet Explorer запускать мастер первого запуска при первом запуске браузера после установки Internet Explorer или Windows.)|
|Internet Explorer|Задать рост процессов вкладок|Низкий|**Включен** (Этот параметр политики позволяет задать скорость, с которой Internet Explorer создает новые процессы Интернет-вкладок.)|
|Internet Explorer|Отключить уведомления о производительности надстроек| Н/Д |**Включен** (Этот параметр политики не позволяет Internet Explorer отображать уведомление, если среднее время загрузки всех надстроек, включенных пользователем, превышает пороговое значение.)|
|Internet Explorer|Выключить автоматическое восстановление после сбоя| Н/Д |**Включен** (Этот параметр политики выключает автоматическое восстановление после сбоя. Если этот параметр политики включен, автоматическое восстановление после сбоя не запрашивает у пользователя необходимость восстановления его данных после того, как программа перестает отвечать на запросы.)|
|*Internet Explorer|Отключить функцию определения географического положения браузера| Н/Д |**Включен** (Если этот параметр политики включен, поддержка геолокации в браузерах будет отключена.)|
|*Internet Explorer|Включить функцию "Рекомендуемые сайты"| Н/Д |**Отключен** (Если вы отключите этот параметр политики, точки входа и функции, связанные с этим компонентом, будут отключены.)|
|Internet Explorer, "Панель управления браузером", "Вкладка "Дополнительно"|Показывать анимацию на веб-страницах| Н/Д |**Отключен** (Этот параметр политики позволяет управлять отображением в Internet Explorer анимированных изображений, найденных в веб-содержимом. Как правило, этот параметр влияет только на анимированные GIF-файлы, но не на активное веб-содержимое, такое как Java-приложения.)|
|Internet Explorer, "Панель управления браузером", "Вкладка "Дополнительно"|Воспроизводить звуки на веб-страницах| Н/Д |**Отключен** (Если этот параметр политики отключен, Internet Explorer не будет воспроизводить или скачивать звуки в веб-содержимом, что помогает быстрее отображать страницы.)|
|Internet Explorer, "Панель управления браузером", "Вкладка "Дополнительно"|Воспроизводить видео на веб-страницах| Н/Д |**Отключен** (Если этот параметр политики отключен, Internet Explorer не будет воспроизводить или скачивать видео в веб-содержимом, что помогает быстрее отображать страницы.)|
|Internet Explorer, "Панель управления браузером", "Вкладка "Дополнительно"|Отключить загрузку веб-сайтов и содержимого в фоновом режиме для оптимизации производительности| Н/Д |**Включен** (Если включить этот параметр политики, IE не будет загружать веб-сайты или содержимое в фоновом режиме.)|
|*Internet Explorer, "Панель управления браузером", "Вкладка "Дополнительно"|Отключить пролистывание вперед с прогнозированием страниц| Н/Д |**Включен** (Корпорация Майкрософт анализирует журнал браузера, чтобы улучшить способ прогнозирования страниц при пролистывании вперед. Если вы включите этот параметр политики, пролистывание вперед с прогнозированием страниц отключится и следующая веб-страница не будет загружаться в фоновом режиме.)|
|Internet Explorer, "Параметры браузера", "Дополнительные параметры", "Просмотр"|Выключение определения номера телефона| Н/Д |**Включен** (Этот параметр политики определяет, распознаются ли номера телефонов и преобразуются ли они в гиперссылки, что может использоваться для вызова телефонного приложения по умолчанию на компьютере. Если вы отключаете этот параметр политики, обнаружение телефонных номеров включается. Пользователи не смогут изменять этот параметр.)|
|Службы IIS|Предотвратить установку служб IIS| Н/Д |**Включен** (Если этот параметр политики включен, IIS не может быть установлен и вы не сможете установить компоненты Windows или приложения, для которых требуются службы IIS.)|
|*Расположение и датчики|"Отключить расположение".| Н/Д |**Включен** (Если вы включите этот параметр политики, функция определения расположения будет отключена и все программы на этом компьютере не смогут использовать сведения о расположении, предоставляемые этой функцией.)|
|Расположение и датчики|"Отключить датчики".| Н/Д |**Включен** (Этот параметр политики отключает функцию датчика для этого устройства. Если этот параметр политики включен, функция датчика отключается и все программы на этом компьютере не могут использовать эту функцию.)|
|Расположение и датчики/ Определитель местоположения Windows|Отключить определитель местоположения Windows| Н/Д |**Включен** (Этот параметр политики отключает функцию Определителя местоположения Windows для этого устройства.)|
|*Карты|Отключение автоматического скачивания и обновления данных карты| Н/Д |**Включен** (Если вы включите этот параметр, автоматическое скачивание и обновление данных карты будет отключено.)|
|*Карты|Отключение незапрошенного сетевого трафика на странице параметров "Автономные карты"| Н/Д |**Включен** (Если вы включите этот параметр политики, компоненты, которые создают сетевой трафик на странице "Параметры автономных карт", будут отключены. Примечание. Это может привести к отключению всей страницы "Параметры".)|
|*Сообщения|"Allow Message Service Cloud Sync" (Разрешить синхронизацию с облаком службы сообщений)| Н/Д |**Отключен** (Этот параметр политики позволяет выполнять резервное копирование и восстановление текстовых сообщений мобильной связи в облачных службах Майкрософт.)|
|*Microsoft Edge|Разрешить обновления конфигурации для библиотеки книг| Н/Д |**Отключен** (Если этот параметр отключен, Microsoft Edge не будет автоматически скачивать обновленные данные конфигурации для библиотеки книг.)|
|*Microsoft Edge|Allow extended telemetry for the Books tab (Разрешить расширенные данные телеметрии для вкладки "Книги")| Н/Д |**Отключен** (Если этот параметр отключен, Microsoft Edge отправляет только основные данные телеметрии в зависимости от конфигурации устройства.)|
|Microsoft Edge|Разрешить Microsoft Edge выполнять предварительный запуск при запуске Windows, когда система находится в режиме простоя и каждый раз при закрытии Microsoft Edge|Настроить предварительный запуск: предотвращение предварительного запуска|**Включен** (Если этот параметр включен и настроено предотвращение предварительного запуска, Microsoft Edge не будет предварительно запускаться во время входа в Windows, при бездействии системы или при каждом закрытии Microsoft Edge.)|
|Microsoft Edge|Allow Microsoft Edge to start and load the Start and New Tab page at Windows startup and each time Microsoft Edge is closed (Разрешить Microsoft Edge запускать и загружать начальную страницу и страницу "Новая вкладка" при запуске Windows и при каждом закрытии Microsoft Edge)|Настройка предварительной загрузки вкладок: запретить предварительную загрузку вкладки|**Включен** (Этот параметр политики позволяет определить, может ли Microsoft Edge загружать начальную страницу и страницу "Новая вкладка" при запуске Windows и при каждом закрытии Microsoft Edge. По умолчанию этот параметр разрешает предварительную загрузку. При отключенной предварительной загрузке Microsoft Edge не будет загружать начальную страницу и страницу "Новая вкладка" при запуске Windows и при каждом закрытии Microsoft Edge.)|
|Microsoft Edge|Разрешение веб-содержимым на странице "Новая вкладка"| Н/Д |**Отключен** (Если отключить этот параметр, то на новой вкладке Microsoft Edge будет открывать пустую страницу. Если этот параметр включен, пользователи не могут его изменить.)|
|*Microsoft Edge|Запрет открытия веб-страницы первого запуска в Microsoft Edge| Н/Д |**Включен** (Пользователи не увидят страницу первого запуска при первом открытии Microsoft Edge.)|
|OneDrive|"Prevent OneDrive from generating network traffic until the user signs in to OneDrive" (Запретить OneDrive создавать сетевой трафик, пока пользователь не войдет в OneDrive)| Н/Д |**Включен** (Включите этот параметр, чтобы запретить клиенту синхронизации OneDrive (OneDrive.exe) создавать сетевой трафик (проверка наличия обновлений и т. д.), пока пользователь не войдет в OneDrive или не начнет синхронизацию файлов на локальном компьютере.)|
|Встроенная справка|Отключение активной справки| Н/Д |**Включен** (Если этот параметр политики включен, ссылки на активное содержимое не подготавливаются к просмотру. Текст отображается, но для этих элементов нет активных ссылок.)|
|OOBE|Don’t launch privacy settings experience on user logon (Не запускать параметры конфиденциальности при входе пользователя)| Н/Д |**Включен** (При первом входе в новую учетную запись пользователя или после обновления в некоторых сценариях этому пользователю может быть предоставлен экран или серия экранов с предложением выбрать параметры конфиденциальности для своей учетной записи. Включите эту политику, чтобы предотвратить запуск этой функции.)|
|RSS-каналы|Запретить автоматическое обнаружение веб-каналов и веб-фрагментов| Н/Д |**Включен** (Этот параметр политики запрещает пользователям устанавливать Internet Explorer автоматически, чтобы веб-фрагмент был доступен для соответствующей страницы.)|
|*RSS-каналы|Отключение синхронизации в фоновом режиме для веб-каналов и веб-фрагментов| Н/Д |**Включен** (Если вы включите этот параметр политики, возможность синхронизации веб-каналов и веб-фрагментов в фоновом режиме будет отключена.)|
|*Поиск|Разрешение использовать Кортану| Н/Д |**Отключен** (Этот параметр политики указывает, разрешено ли использование Кортаны на устройстве. Если Кортана отключена, пользователи по-прежнему смогут использовать поиск на устройстве.)|
|Найти|Разрешить использование Кортаны на экране блокировки| Н/Д |**Отключен** (Этот параметр политики указывает, может ли пользователь взаимодействовать с Кортаной с помощью речи, если система заблокирована.)|
|*Поиск|Разрешение средствам поиска и Кортане использовать информацию о расположении| Н/Д |**Отключен** (Этот параметр политики указывает, будут ли Кортана и средство поиска предоставлять результаты поиска с учетом местоположения.)|
|Поиск|Области просмотра вложений с различными элементами управления|Области просмотра вложений с различными элементами управления: **DOCX, XLSX, TXT и XLS**|**Включен** (Эта политика определяет разделенный точкой с запятой список расширений файлов, для которых будет доступен полный предварительный просмотр вложений.)<p>**ПРИМЕЧАНИЕ.** Этот параметр можно использовать для ограничения предварительного просмотра вложений, что может помочь предотвратить автоматический предварительный просмотр некоторых потенциально опасных типов содержимого.|
|Найти|Запрет на поиск в Интернете| Н/Д |**Включен** (Этот параметр определяет, можно ли выполнять поиск в Интернете с панели поиска Windows.)|
|*Поиск|Don’t search the web or display web results in Search (Не выполнять поиск в Интернете и не отображать результаты из Интернета в поиске)| Н/Д |**Включен** (Если этот параметр политики включен, запросы не будут выполняться в Интернете и результаты из Интернета не будут отображаться, когда пользователь выполняет запрос в Поиске.)|
|Поиск|Разрешить индексирование некэшированных папок Exchange| Н/Д |**Отключен** (Включение этой политики позволяет индексировать сообщения электронной почты на сервере Microsoft Exchange, если Microsoft Outlook не работает в режиме кэширования. Поведение по умолчанию для поиска — не индексировать некэшированные папки Exchange. При отключении этой политики индексация некэшированных папок Exchange будет заблокирована.)|
|Найти|Отключить индексирование файлов в кэше автономных файлов| Н/Д |**Включен** (Если этот параметр включен, файлы в общих сетевых ресурсах, предоставляемые в автономном режиме, не индексируются. В противном случае они индексируются. По умолчанию отключено.)|
|*Поиск|Определение информации, предоставляемой другим продуктам в средстве поиска|Анонимные сведения|**Включен** (Анонимные сведения: отправка сведений об использовании (но не журнала поиска) сведений об учетной записи Майкрософт или определенного расположения.)|
|Поиск|Остановка индексирования при недостатке свободного места на жестком диске|Ограничение, МБ: **5000**|**Включен** (Включение этой политики предотвращает продолжение индексирования по достижении минимального заданного объема свободного места на том же жестком диске, где располагается индекс. Выберите от 0 до 2 147 483 647 МБ.)|
|Платформа защиты программного обеспечения|Отключение веб-проверки AVS клиента сервера управления ключами| Н/Д |**Включен** (Если этот параметр включен, устройство не отправляет в Майкрософт данные о состоянии активации.)|
|*Голосовые функции|Разрешить автоматическое обновление данных речи| Н/Д |**Отключен** (Указывает, будет ли устройство получать обновления моделей распознавания речи и синтеза речи.)|
|Магазин|Выключить предложение обновления до последней версии Windows| Н/Д |**Включен** (Включает или отключает предложение Store об обновлении до последней версии Windows. Если этот параметр включен, Store не будет предлагать обновления до последней версии Windows.)|
|Ввод текста|"Improve inking and typing recognition" (Улучшить распознавание рукописного ввода и ввода с клавиатуры)| Н/Д |**Отключен** (Этот параметр политики управляет возможностью отправки рукописного ввода и ввода данных в Майкрософт для улучшения возможностей распознавания языка и предложения приложений и служб, работающих в Windows.)|
|Отчеты об ошибках Windows|Отключение отчетов об ошибках Windows| Н/Д |**Включен** (Если этот параметр политики включен, функция отчетов об ошибках Windows не отправляет сведения о проблемах в Майкрософт. Кроме того, сведения о решении недоступны на панели управления в Центре безопасности и обслуживания.)|
|Запись и трансляция игр Windows|Включает или отключает запись и трансляцию игр Windows| Н/Д |**Отключен** (Если этот параметр отключен, запись и трансляция игр Windows не будет разрешена.)|
|Windows Ink Workspace|Разрешить Windows Ink Workspace|Выберите один из следующих вариантов. Отключен|**Включен** (Если этот параметр включен, а для поднабора задано значение "Отключено", функциональные возможности Windows Ink Workspace недоступны.)|
|Установщик Windows|Задать максимальный размер кэша базисных файлов|5|**Включен** (Эта политика определяет процент дискового пространства, доступного для базового файлового кэша установщика Windows. Если этот параметр политики включен, максимальный размер кэша можно изменить.)|
|Установщик Windows|Отключение создания контрольных точек восстановления системы| Н/Д |**Включен** (Если этот параметр политики включен, установщик Windows не создает контрольные точки восстановления системы при установке приложений.)|
|Центр мобильности Windows|Отключить центр мобильности Windows| Н/Д |**Включен** (Если этот параметр политики включен, пользователь не может вызвать Центр мобильности Windows. Пользовательский интерфейс Центра мобильности Windows удаляется из всех точек входа оболочки, а EXE-файл не запускает его.)|
|Анализ стабильности Windows|Настройка поставщиков WMI стабильности системы| Н/Д |**Отключен** (Если этот параметр политики отключен, монитор стабильности системы не отображает сведения о системе, а приложения, поддерживающие WMI, не смогут получить доступ к сведениям о стабильности от перечисленных поставщиков.)|
|"Безопасность Windows", "Уведомления"|Hide non-critical notifications (Скрывать некритические уведомления)| Н/Д |**Включен** (Если этот параметр включен, локальные пользователи увидят только критические уведомления службы "Безопасность Windows". Они не будут видеть другие типы уведомлений, такие как обычная информация о состоянии ПК или устройства.)|
|Центр обновления Windows|Включить уведомления о наличии программ| Н/Д |**Отключен** (Этот параметр политики позволяет управлять отображением пользователям подробных расширенных уведомлений о рекомендуемом программном обеспечении из службы Центра обновления Майкрософт. Расширенные уведомления предоставляют данные о дополнительных возможностях и обеспечивают установку и использование дополнительного программного обеспечения. Этот параметр политики предназначен для использования в локально управляемой среде, в которой разрешен доступ конечного пользователя к службе Центра обновления Майкрософт.)|
|*"Центр обновления Windows", "Центр обновления Windows для бизнеса"|"Manage preview builds" (Управление предварительными сборками)|Настройка поведения при получении предварительных сборок: **Отключить предварительные сборки**|**Включен** (Если выбрать параметр "Отключить предварительные сборки", на устройстве будет запрещена установка предварительных сборок. Это не позволит пользователям принять участие в Программе предварительной оценки Windows, выбрав "Параметры > Обновление и безопасность".|
|*"Центр обновления Windows", "Центр обновления Windows для бизнеса"|"Select when Preview Builds and Feature Updates are received" (Выберите, когда следует получать предварительные сборки и обновления компонентов)|Выберите уровень готовности Windows для обновлений, которые вы хотите получить:<p>**Полугодовой канал**<p>После выпуска предварительной версии сборки или обновления функции можно отложить ее получение в течение такого числа дней: **365**<p>Приостановка получения предварительных сборок или обновлений компонентов начиная с: **ГГГГ-ММ-ДД**|**Включен** (Включите эту политику, чтобы указать уровень получаемых предварительных сборок или обновлений компонентов и условия их получения. Полугодовой канал: получайте обновления компонентов, когда они выпускаются в общедоступной версии.<p> При выборе полугодового канала:<p>Получение обновлений компонентов можно отложить на срок до 365 дней.<p>Чтобы предотвратить получение обновлений компонентов в запланированное время, их можно временно приостановить. Приостановка будет действовать в течение 35 дней с указанного времени.<p> Чтобы возобновить получение приостановленных обновлений компонентов, очистите поле даты начала.)|
|"Центр обновления Windows", "Центр обновления Windows для бизнеса"|Выберите, когда следует получать исправления|После выпуска исправления его получение можно отложить в течение такого числа дней: **30**<p>Начало приостановки получения исправлений: ГГГГ-ММ-ДД|**Включен** (Включите эту политику, чтобы указать, когда следует получать исправления.<p>Получение исправлений можно отложить на срок до 30 дней.<p>Чтобы предотвратить получение исправлений в запланированное время, их можно временно приостановить. Приостановка будет действовать в течение 35 дней или до тех пор, пока не будет очищено поле даты начала.<p>Чтобы возобновить получение приостановленных исправлений, очистите поле даты начала.)<p>Это помогает контролировать время применения обновлений и гарантировать, что обновления не будут предлагаться и устанавливаться неожиданно.|
|"Политика локального компьютера", "Конфигурация пользователя", "Административные шаблоны"| Н/Д | Н/Д | Н/Д |
|"Панель управления", "Язык и региональные стандарты"|Отключить прогнозирование текста при вводе| Н/Д |**Включен** (Эта политика отключает функцию прогнозирования текста при вводе. Однако это не мешает пользователю или приложению изменять этот параметр программным способом. Если этот параметр политики включен, прогнозирование текста будет недоступно.)|
|Рабочий стол|Не добавлять общие ресурсы из недавно использовавшихся документов в папку "Сетевые размещения"| Н/Д |**Включен** (Если этот параметр включен, общие папки не добавляются в сетевые расположения автоматически при открытии документа в общей папке.)|
|Рабочий стол|Отключить сворачивание окна Aero Shake жестом мышью| Н/Д |**Включен** (Предотвращает сворачивание или восстановление окон, когда активное окно перемещается с помощью мыши. Если эта политика включена, окна приложений не будут сворачиваться или восстанавливаться, когда активное окно перемещается с помощью мыши.)|
|Рабочий стол/Active Directory|Максимальный объем результатов поиска в Active Directory|Число возвращенных объектов: **1500**|**Включен** (Указывает максимальное число объектов, отображаемых системой в ответ на команду поиска и просмотра Active Directory. Этот параметр влияет на все экраны просмотра, связанные с Active Directory, такие как "Локальные пользователи и группы", "Пользователи и компьютеры Active Directory", а также на диалоговые окна, используемые для задания разрешений для объектов пользователей или групп в Active Directory.)|
|Панель задач и меню ''Пуск''|Запрет на отображение и отслеживание элементов в списках переходов из удаленных расположений| Н/Д |**Включен** (Этот параметр политики позволяет управлять отображением и отслеживанием элементов в списках переходов из удаленных расположений.)|
|Панель задач и меню ''Пуск''|Запретить поиск в файлах Интернета| Н/Д |**Включен** (Если этот параметр политики включен, поле поиска в меню "Пуск" не будет искать журнал Интернета или избранное.)|
|Панель задач и меню ''Пуск''|Не использовать сопоставление ярлыков оболочки на основе поиска| Н/Д |**Включен** (Этот параметр политики не позволяет системе выполнять полный поиск на целевом диске для сопоставления ярлыков.)|
|Панель задач и меню ''Пуск''|Отключить все всплывающие уведомления| Н/Д |**Включен** (Если этот параметр политики включен, всплывающие уведомления для пользователя не отображаются.)
|Панель задач и меню ''Пуск''|Отключить всплывающие уведомления объявлений компонентов| Н/Д |**Включен** (Если этот параметр политики включен, некоторые всплывающие уведомления, помеченные как объявления компонентов, не отображаются.)|
|Панель задач и меню ''Пуск''|Отключить слежение за действиями пользователя| Н/Д |**Включен** (Если этот параметр политики включен, система не выполняет отслеживание программ, запущенных пользователем, и не отображает часто используемые программы в меню "Пуск".)|
|Панель задач и меню ''Пуск'' /Уведомления|Отключить всплывающие уведомления| Н/Д |**Включен** (Если этот параметр политики включен, приложения не смогут создавать всплывающие уведомления.)|
|*"Панель задач и меню ''Пуск'', "Уведомления"|Отключить всплывающие уведомления на экране блокировки| Н/Д |**Включен** (Если этот параметр политики включен, приложения не смогут создавать всплывающие уведомления на экране блокировки.)|
|"Политика локального компьютера", "Конфигурация пользователя"| Н/Д | Н/Д | Н/Д |
|Компоненты Windows/Содержимое облака|Настроить "Windows: интересное" на экране блокировки| Н/Д |**Отключен** (Если этот параметр политики отключен, раздел "Windows: интересное" будет отключен и пользователи больше не смогут выбрать его в качестве экрана блокировки. Пользователи увидят изображение экрана блокировки по умолчанию и смогут выбрать другой образ, если вы не включили политику "Запрет изменения изображения экрана блокировки".)|
|*"Компоненты Windows", "Содержимое облака"|Не предлагать стороннее содержимое в Windows: интересное| Н/Д |**Включен** (Если этот параметр политики включен, такие функции Windows, как интересное на экране блокировки, предлагаемые приложения в меню "Пуск" или советы по использованию Windows, больше не будут предлагать приложения и содержимое от сторонних издателей программного обеспечения. Пользователи по-прежнему могут просматривать предложения и советы для повышения эффективности работы с функциями и приложениями Майкрософт.)|
|Компоненты Windows/Содержимое облака|Запрет использования данных диагностики для специализированных интерфейсов| Н/Д |**Включен** (Если этот параметр политики включен, Windows не будет использовать диагностические данные с этого устройства (в зависимости от значения параметра "диагностические данные", такие данные могут включать использование браузера, приложения и функции), чтобы настроить содержимое, отображаемое на экране блокировки, советы по использованию Windows, возможности клиента Майкрософт и другие связанные функции.)|
|Компоненты Windows/Содержимое облака|Отключение всех функций "Windows: интересное"| Н/Д |**Включен** (Windows: интересное на экране блокировки, советы по использованию Windows, возможности клиента Майкрософт и другие связанные функции будут отключены. Следует включить этот параметр политики, если целью является минимизация сетевого трафика с целевых устройств.)|
|Пользовательский интерфейс границ|Отключить отслеживание использования приложений| Н/Д |**Включен** (Этот параметр политики позволяет запретить Windows отслеживать приложения, которые используют и ищут наиболее часто. Если включить этот параметр политики, приложения будут отсортированы в алфавитном порядке:<p> — в результатах поиска;<p> — на панели поиска и общего доступа;<p> — в раскрывающемся списке приложений в средстве выбора.)|
|Проводник|Отключить кэширование эскизов изображений| Н/Д |**Включен** (Если этот параметр политики включен, эскизы представлений не кэшируются.)|
|Проводник|Отключить анимацию общих элементов управления и окон| Н/Д |**Включен** (Отключение анимации может улучшить удобство использования для пользователей с нарушениями зрения, а также повысить производительность и время работы аккумулятора в некоторых сценариях.)|
|Проводник|Отключить отображение предыдущих поисковых запросов в поле поиска проводника| Н/Д |**Включен** (Отключает предложение недавних запросов для поля поиска и предотвращает сохранение вводимых запросов в реестре для их последующего использования.)|
|Проводник|Отключить кэширование эскизов в скрытых файлах thumbs.db| Н/Д |**Включен** (Если этот параметр политики включен, проводник не создает файлы thumbs.db, не считывает их и не выполняет в них запись.)|

\* Взято из [базового плана ограниченной функциональности трафика Windows](https://go.microsoft.com/fwlink/?linkid=828887).

### <a name="system-services"></a>Системные службы

Если вы собираетесь отключить системные службы для экономии ресурсов, убедитесь, что выбранная служба не является компонентом какой-либо другой службы. В этом документе и доступных сценариях GitHub некоторые службы отсутствуют в списке, потому что их нельзя отключить поддерживаемым способом.

Большинство из этих рекомендаций относятся к Windows Server 2016 с возможностями рабочего стола (в соответствии с инструкциями в руководстве [по отключению системных служб в Windows Server 2016 с возможностями рабочего стола](../../security/windows-services/security-guidelines-for-disabling-system-services-in-windows-server.md)).

Для многих служб, которые обычно могут быть хорошими кандидатами для отключения, задан тип запуска службы вручную. Это означает, что служба не запустится автоматически и вообще не запустится, пока процесс или событие не активирует запрос к службе, которую вы планируете отключить. Службы, для которых уже задан тип запуска вручную, обычно здесь не указываются.

> [!NOTE]
> Вы можете перечислить запущенные службы с помощью этого примера кода PowerShell, выводя только короткое имя службы:
>
> ```powershell
> Get-Service | Where-Object {$_.Status -eq 'Running'} | Select-Object -ExpandProperty Name
> ```

В следующей таблице содержатся некоторые службы, которые можно рассматривать для отключения в средах виртуальных рабочих столов.

| Службы Windows | Имя службы | Элемент | Комментарий|
| --------------- | ------------ | ---- | ------ |
|Cellular Time (Время мобильной сети)|autotimesvc|Эта служба устанавливает время на основе сообщений NITZ из мобильной сети.|В средах виртуальных рабочих столов такие устройства могут быть недоступны. <p>Дополнительные сведения см. в [этой статье](/windows-hardware/drivers/network/mb-nitz-support). |
|Пользовательская служба GameDVR и вещания|BcastDVRUserService|Эта служба (на пользователя) используется для записи игр и вещания в прямом эфире.|ПРМЕЧАНИЕ. Это служба "на пользователя", поэтому служба шаблонов должна быть отключена. Эта пользовательская служба используется для записи игр и вещания в прямом эфире.<p>Дополнительные сведения см. в [этой статье](/windows-hardware/drivers/network/mb-nitz-support). |
|CaptureService|CaptureService|Включает дополнительные функции захвата экрана для приложений, вызывающих API Windows.Graphics.Capture.|Служба захвата OneCore: включает дополнительные функции захвата экрана для приложений, вызывающих API Windows.Graphics.Capture.<p> Дополнительные сведения см. в [этой статье](/uwp/api/windows.graphics.capture?view=winrt-19041&preserve-view=true).|
|Служба платформы подключенных устройств|CDPSvc|Эта служба используется для сценариев платформы подключенных устройств.|Служба платформы подключенных устройств <p> Дополнительные сведения см. в [этой статье](/openspecs/windows_protocols/ms-cdp/929c2238-6d49-4ba4-a36a-37e732c4f736).|
|CDP User Service (Пользовательская служба CDP)|CDPUserSvc| Н/Д |Пользовательская служба платформы подключенных устройств. Дополнительные сведения см. в [этой статье](/openspecs/windows_protocols/ms-cdp/f5a15c56-ac3a-48f9-8c51-07b2eadbe9b4).<p> Эта пользовательская служба используется для сценариев платформы подключенных устройств. <br><br>Это служба "на пользователя", поэтому служба шаблонов должна быть отключена (CDPUserSvc).|
|Оптимизация дисков|defragsvc|Помогает компьютеру работать более эффективно, оптимизируя файлы на дисках хранения.|Решения виртуальных рабочих столов обычно не получают преимуществ от оптимизации дисков. В них не используются традиционные диски. Часто это просто выделенное временное хранилище.|
|Diagnostic Execution Service (Служба выполнения диагностики)|DiagSvc|Выполняет диагностические действия для поддержки устранения неполадок.|Отключение этой службы прекращает возможность запуска службы выполнения диагностики Windows.|
|Функциональные возможности для подключенных пользователей и телеметрия|DiagTrack|Эта служба включает функции, которые поддерживают возможности приложений и подключенных пользователей. Кроме того, эта служба управляет сбором информации на основе событий и передачей диагностических сведений и сведений об использовании (используемых для улучшения работы и качества платформы Windows), когда в разделе "Отзывы и диагностика" включены параметры диагностики и конфиденциальности использования.|Рекомендуется отключить, если сеть отключена. Дополнительные сведения см. в [этой статье](/windows/privacy/configure-windows-diagnostic-data-in-your-organization).|
|Служба политики диагностики|DPS|Служба политики диагностики позволяет обнаруживать проблемы с компонентами Windows, выполнять их диагностику и устранять их. Если эта служба остановлена, диагностика не будет работать.|Отключение этой службы отключает возможность запуска диагностики Windows. Дополнительные сведения см. в [этой статье](/uwp/api/Windows.System.Diagnostics?view=winrt-19041&preserve-view=true).|
|Диспетчер настройки устройств|DsmSvc|Обеспечивает обнаружение, скачивание и установку программного обеспечения, относящегося к устройствам. |Если эту службу отключить, то устройства могут быть настроены с устаревшим программным обеспечением и работать неправильно. <p>Среды виртуальных рабочих столов очень тщательно управляют тем, какое программное обеспечение установлено и поддерживает согласованность в среде.|
|Служба использования данных|DusmSvc|Использование данных сети, ограничение данных, ограничение фоновой передачи данных в сетях с лимитным тарифным планом.| Дополнительные сведения см. в [этой статье](/uwp/schemas/mobilebroadbandschema/dusm/schema-root). |
|Служба Windows Mobile Hotspot|icssvc|Предоставляет возможность обмениваться мобильными данными с другим устройством.|Дополнительные сведения см. в [этой статье](/uwp/api/Windows.Networking.NetworkOperators.NetworkOperatorTetheringAccessPointConfiguration?view=winrt-19041&preserve-view=true).|
|Служба установки Microsoft Store|InstallService|Обеспечивает поддержку инфраструктуры для Microsoft Store. |Эта служба запускается по требованию, и, если она отключена, установки не будут работать должным образом.<p>Рекомендуется отключить эту службу на временном виртуальном рабочем столе, оставить "как есть" для постоянных решений виртуальных рабочих столов.|
|Служба географического положения|Lfsvc|Отслеживает текущее расположение системы и управляет геозонами (географическое местоположение со связанными событиями). |Если вы отключите эту службу, приложения не смогут использовать или получать уведомления для геолокации или геозон. Дополнительные сведения см. в [этой статье](/uwp/api/Windows.Devices.Geolocation?view=winrt-19041&preserve-view=true).|
|Диспетчер скачанных карт|MapsBroker|Служба Windows для доступа приложений к скачанным картам. Эта служба запускается по требованию, когда приложение обращается к скачанным картам.|Отключение этой службы сделает невозможным доступ приложений к картам. Дополнительные сведения см. в [этой статье](/uwp/api/Windows.Services.Maps?view=winrt-19041&preserve-view=true).|
|MessagingService|MessagingService|Служба, поддерживающая обмен текстовыми сообщениями и связанные функции.|Это служба "на пользователя", поэтому служба шаблонов должна быть отключена.|
|Узел синхронизации|OneSyncSvc|Служба синхронизирует почту, контакты, календарь и различные другие пользовательские данные. |(UWP) Почта и другие приложения, зависящие от этого компонента, не будут работать должным образом, когда эта служба не запущена. <p>Это служба "на пользователя", поэтому служба шаблонов должна быть отключена.|
|Служба контактных данных|PimIndexMaintenanceSvc|Индексирует данные контактов для их быстрого поиска. Если вы остановите или отключите эту службу, данные контактов могут отсутствовать в результатах поиска.|Это служба "на пользователя", поэтому служба шаблонов должна быть отключена.|
|Питание|Питание|Управляет политикой электропитания и доставки уведомлений на основе этой политики.|Виртуальные машины практически не влияют на свойства электропитания. Если эта служба отключена, управление питанием и отчеты недоступны. Дополнительные сведения см. в [этой статье](/windows-hardware/drivers/powermeter/user-mode-power-service).|
|Диспетчер платежей и NFC/защищенных элементов|SEMgrSvc|Управляет платежами и защищенными элементами на основе NFC (радиочастотная связь ближнего действия).|Эта служба может не потребоваться для платежей в корпоративной среде.|
|Служба маршрутизатора SMS Microsoft Windows|SmsRouter|Направляет сообщения на основе правил соответствующим клиентам.|Эта служба может не потребоваться, если для обмена сообщениями используются другие средства, например Teams, Skype или т. д. Дополнительные сведения см. в [этой статье](/dotnet/framework/wcf/feature-details/routing-service).|.
|Superfetch (SysMain)|SysMain|Поддерживает и улучшает производительность системы с течением времени.|В большинстве случаев Superfetch не повышает производительность сред виртуальных рабочих столов по разным причинам. Базовое хранилище часто виртуализировано и, возможно, распределено между несколькими дисками. В некоторых решениях виртуальных рабочих столов суммарное пользовательское состояние удаляется при выходе пользователя из системы. Функция SysMain должна оцениваться в каждой среде.|
|Служба сенсорной клавиатуры и панели рукописного ввода|TabletInputService|Обеспечивает функционирование пера и рукописного ввода для сенсорной клавиатуры и панели рукописного ввода.|Не требуется, если не используется активный сенсорный экран или устройство ввода рукописного текста.|
|Обновление службы оркестратора|UsoSvc|Управляет обновлениями Windows. В случае остановки службы ваши устройства не смогут скачивать и устанавливать последние обновления.|Устройства виртуальных рабочих столов часто тщательно контролируются в отношении обновлений. Обслуживание обычно выполняется во время выделенных для него периодов. В некоторых случаях можно использовать клиент обновления, например SCCM. Исключением будут обновления подписей безопасности, которые будут применены в любое время на любом устройстве виртуальных рабочих столов, чтобы поддерживать актуальные подписи. Если эта служба отключена, убедитесь, что подписи безопасности по-прежнему можно установить.|
|Служба теневого копирования томов|VSS|Управляет созданием теневых копий томов, которые используются для резервного копирования и восстановления или для иных целей. |Если эта служба остановлена, теневые копии томов для восстановления не будут доступны и резервное копирование может не работать. Если служба отключена, все явно зависящие от нее службы запустить не удастся. Дополнительные сведения см. в [этой статье](../../../WindowsServerDocs/storage/file-server/volume-shadow-copy-service.md).|
|Узел системы диагностики|WdiSystemHost|Узел системы диагностики используется службой политики диагностики для размещения диагностики, которая должна выполняться в контексте локального компьютера. Если эта служба остановлена, любая диагностика, которая зависит от нее, больше не будет работать.|Отключение этой службы отключает возможность запуска диагностики Windows.
|Отчеты об ошибках Windows|WerSvc|Разрешает отправку отчетов об ошибках в случае прекращения работы или реагирования программы на запросы, а также разрешает доставку имеющихся решений. Разрешает также создание журналов для служб диагностики и восстановления. Если эта служба остановлена, то могут не работать отчеты об ошибках и не отображаться результаты служб диагностики и восстановления.|При использовании сред виртуальных рабочих столов диагностика часто выполняется автономно, а не в основной рабочей среде. Кроме того, некоторые клиенты в любом случае отключают отчеты об ошибках Windows (WER). Для отчетов об ошибках Windows используется небольшой объем ресурсов, необходимых для различных задач, включая запись сбоев при установке устройств или обновлений. Дополнительные сведения см. в [этой статье](/windows/win32/wer/windows-error-reporting).|
|Поиск Windows|WSearch|Обеспечивает индексацию содержимого, кэширование свойств и результаты поиска файлов, электронной почты и другого содержимого.|Отключение этой службы отменяет индексирование электронной почты и других объектов. Проверьте перед отключением этой службы. Дополнительные сведения см. в [этой статье](/windows/win32/search/-search-3x-wds-overview#windows-search-service). |
|Диспетчер проверки подлинности Xbox Live|XblAuthManager|Предоставляет службы аутентификации и авторизации для взаимодействия с Xbox Live. |Если эта служба остановлена, некоторые приложения могут не работать должным образом.
|Сохранение игр на Xbox Live|XblGameSave|Эта служба синхронизирует данные сохранения игр для Xbox Live с поддержкой сохранения. |Если эта служба остановлена, данные сохранения игры не будут передаваться в Xbox Live или скачиваться оттуда.
|Служба управления периферийными устройствами Xbox|XboxGipSvc|Эта служба управляет подключенными Аксессуарами Xbox.| Н/Д |
|Сетевая служба Xbox Live.|XboxNetApiSvc|Эта служба поддерживает API-интерфейс Windows.Networking.XboxLive.| Н/Д |

#### <a name="per-user-services-in-windows"></a>Службы "на пользователя" в Windows

Службы "на пользователя" — это службы, которые создаются, когда пользователь входит в Windows или Windows Server, и останавливаются и удаляются, когда пользователь выходит из системы. Эти службы выполняются в контексте безопасности учетной записи пользователя. Это обеспечивает лучшее управление ресурсами, чем предыдущий подход, заключавшийся в выполнении таких служб в обозревателе, связанном с предварительно настроенной учетной записью, или в их выполнении в качестве задач. Дополнительные сведения см. в статье [Службы "на пользователя" в Windows 10 и Windows Server](/windows/application-management/per-user-services-in-windows).

Если вы планируете изменить значения запуска службы, рекомендуется открыть запрос с повышенными правами CMD и запустить средство диспетчера служб `SC.EXE`. Дополнительные сведения см. в статье [SC](/previous-versions/windows/it-pro/windows-server-2012-R2-and-2012/cc754599(v=ws.11)).

### <a name="scheduled-tasks"></a>Запланированные задачи

Как и с другими элементами в Windows, перед отключением запланированной задачи убедитесь, что элемент не требуется. Некоторые задачи в средах виртуальных рабочих столов, например **StartComponentCleanup**, могут оказаться нежелательными для запуска в рабочей среде, но могут быть запущены в период обслуживания на "золотом образе" (эталонном образе).

Ниже приведен список задач, включая и те, которые выполняют оптимизации или сбор данных на компьютерах, которые сохраняют свое состояние между перезагрузками. Если устройство виртуального рабочего стола выполняет перезагрузку и отменяет все изменения с момента последней загрузки, оптимизации, предназначенные для физических компьютеров, бесполезны.

Вы можете получить все текущие запланированные задачи, включая их описание, выполнив следующий код PowerShell:

```powershell
  Get-ScheduledTask | Select-Object -Property TaskPath,TaskName,State,Description
```

> [!NOTE]
> Есть несколько задач, которые невозможно отключить с помощью сценария, даже если работаете в командной строке с повышенными привилегиями. Здесь и в сценариях GitHub не рекомендуется пытаться отключить задачи, которые могут быть отключены с помощью сценария.

|Имя запланированной задачи|Описание|
|-------------------|-----------|
|MNO|Синтаксический анализатор метаданных в учетной записи мобильной широкополосной связи.|
|AnalyzeSystem|Эта задача анализирует систему на предмет условий, которые могут вызвать высокое энергопотребление.|
|Сотовая сеть|Связано с сотовыми устройствами.|
|Совместимость|Собирает данные телеметрии программ, если дается явное согласие на участие в программе улучшения качества программного обеспечения Майкрософт.|
|Consolidator|Если пользователь принимает участие в программе улучшения качества программного обеспечения Windows, это задание собирает и отправляет данные об использовании в Майкрософт.|
|Диагностика|(DiskFootprint в пути задачи) DiskFootprint — это общий вклад всех процессов, которые выполняют операции ввода-вывода хранилища в виде чтения, записи и очистки хранилища.|
|FamilySafetyMonitor|Инициализирует мониторинг и принудительное применение Семейной безопасности.|
|FamilySafetyRefreshTask|Синхронизирует последние параметры со службой функций семьи учетных записей Майкрософт.|
|MapsToastTask|Эта задача показывает различные всплывающие уведомления, связанные с картой.|
|Microsoft-Windows-DiskDiagnosticDataCollector|Функция диагностики диска Windows сообщает Майкрософт общие сведения о диске и системе пользователей, участвующих в программе улучшения качества программного обеспечения.|
|NotificationTask|Фоновая задача выполнения действий пользователя и веб-взаимодействий.|
|ProcessMemoryDiagnosticEvents|Планирует диагностику памяти в ответ на системные события.|
|Proxy (Прокси)|Эта задача собирает и отправляет данные autochk SQM, если дается явное согласие на участие в программе улучшения качества программного обеспечения Майкрософт.|
|QueueReporting|Задача отчетов об ошибках Windows для обработки отчетов в очереди.|
|RecommendedTroubleshootingScanner|Проверка наличия рекомендованных действий по устранению неполадок от Майкрософт.|
|RegIdleBackup|Задача резервного копирования реестра в режиме простоя.|
|RunFullMemoryDiagnostic|Обнаруживает и устраняет проблемы в физической памяти (ОЗУ).|
|Назначенные|Задача планового обслуживания Windows выполняет периодическое обслуживание компьютерной системы, устраняя проблемы автоматически или сообщая о них через безопасность и обслуживание.|
|ScheduledDefrag|Эта задача оптимизирует диски локального хранилища.|
|SilentCleanup|Задача обслуживания, используемая системой для запуска фоновой автоматической очистки диска при нехватке свободного места на диске.|
|SpeechModelDownloadTask|
|Sqm-Tasks|Эта задача собирает сведения о доверенном платформенном модуле (TPM), безопасной загрузке и измеряемой загрузке.|
|SR|Эта задача создает обычные точки защиты системы.|
|StartComponentCleanup|Задача обслуживания, которую лучше выполнять во время периодов обслуживания.|
|StartupAppTask|Проверяет записи запуска и создает уведомление для пользователя, если таких записей слишком много.|
|SyspartRepair|
|WindowsActionDialog|Уведомление о расположении.|
|WinSAT|Измеряет производительность и возможности системы.|
|XblGameSaveTask|Резервная задача Xbox Live GameSave.|

### <a name="apply-windows-and-other-updates"></a>Установка обновлений Windows и других обновлений

Устанавливайте обновления из Центра обновления Майкрософт или своих внутренних источников, включая сигнатуры Защитника Windows. Это подходящий момент, чтобы применить другие доступные обновления, в том числе для Microsoft Office, если он установлен, и другие обновления программного обеспечения. Если PowerShell останется в образе, вы можете скачать последнюю доступную справку для PowerShell, выполнив команду `Update-Help`.

#### <a name="servicing-os-and-apps"></a>Обслуживание ОС и приложений

В определенный момент при оптимизации образа следует применить доступные обновления Windows. В параметрах обновлений Windows 10 есть параметр, который может предоставлять дополнительные обновления. Его можно найти, последовательно выбрав **Параметры** > **Дополнительные параметры**. Здесь выберите для параметра **При обновлении Windows предоставить обновления для других продуктов Майкрософт** значение **Включено**.

![Снимок экрана меню дополнительных параметров. Включение параметра "При обновлении Windows предоставить обновления для других продуктов Майкрософт".](media/rds-vdi-recommendations-1909/servicing.png)

Это будет удобно в случае, если вы собираетесь установить в базовый образ приложения Майкрософт, например Microsoft Office. Таким образом Office будет находиться в актуальном состоянии, когда вы воспользуетесь этим образом. Существуют также обновления для платформы .NET и определенных компонентов сторонних производителей, таких как Adobe, которые можно устанавливать с помощью Центра обновления Windows.

Очень важным моментом для устройств временного виртуального рабочего стола являются обновления системы безопасности, включая файлы определений для программного обеспечения безопасности. Эти обновления могут выпускаться один раз в день или чаще.

Возможно, лучше всего разрешить обновление Защитника Windows даже во временных средах виртуальных рабочих столов. Обновления будут применяться практически каждый раз при входе в систему, но они занимают мало места, поэтому не должны стать проблемой. Кроме того, устройство всегда будет в актуальном состоянии, так как будет применяться только последнее доступное обновление. Это может быть верно и для файлов определений сторонних производителей.

>[!NOTE]
> Приложения Store (приложения UWP) обновляются с помощью Магазина приложений Windows. Современные версии Office, например Office 365, обновляются с помощью собственных механизмов, когда имеется прямое подключение к Интернету, или с помощью технологий управления, если подключение отсутствует.

#### <a name="windows-system-startup-event-traces-autologgers"></a>Трассировки событий запуска системы Windows (AutoLoggers)

Windows по умолчанию собирает и хранит диагностические данные. Это делается, чтобы обеспечить диагностику или записывать данные, если потребуются дополнительные действия по устранению неполадок. Данные автоматической трассировки системы можно найти в расположении, показанном на следующем рисунке:

![Снимок экрана папки управления компьютером. Открытая папка трассировок системы и выбранный файл WiFiSession.](media/rds-vdi-recommendations-1909/system-traces.png)

Некоторые трассировки в разделах **Сеансы отслеживания событий** и **Сеансы отслеживания событий запуска** невозможно остановить и не следует останавливать. Другие трассировки, например WiFiSession, можно остановить. Чтобы остановить выполняемую трассировку, щелкните ее правой кнопкой мыши в разделе **Сеансы отслеживания событий** и выберите **Остановить**. Чтобы запретить автоматический запуск трассировок вместе с системой, выполните приведенные ниже действия.

1. Выберите папку **Сеансы отслеживания событий запуска**.

2. Найдите и выберите файл трассировки, который нужно просмотреть, чтобы его открыть.

3. Выберите вкладку **Сеансы отслеживания**.

4. Снимите флажок **Включено**.

5. Щелкните **ОК**.

В следующей таблице перечислены некоторые системные трассировки, которые следует рассмотреть при отключении в средах виртуальных рабочих столов.

|Название|Комментарий|
|---|--------|
|CellCore|[https://docs.microsoft.com/windows-hardware/drivers/network/cellular-architecture-and-driver-model](/windows-hardware/drivers/network/cellular-architecture-and-driver-model)|
|CloudExperienceHostOOBE|Описана в [этом документе](/windows/security/identity-protection/hello-for-business/hello-how-it-works-technology#cloud-experience-host).|
|DiagLog|Журнал, созданный службой политики диагностики, который описан [здесь](/windows-server/security/windows-services/security-guidelines-for-disabling-system-services-in-windows-server).|
|RadioMgr|Описана в [этом документе](/windows-hardware/drivers/nfc/what-s-new-in-nfc-device-drivers).|
|ReadyBoot|Описана в [этом документе](/previous-versions/windows/desktop/xperf/readyboot-analysis).|
|WDIContextLog|Интерфейс драйвера устройства беспроводной локальной сети (WLAN) описан здесь. |
|WiFiDriverIHVSession|Описана в [этом документе](/windows-hardware/drivers/network/user-initiated-feedback-normal-mode).|
|WiFiSession|Журнал диагностики для технологии WLAN. Если технология Wi-Fi не реализована, это средство ведения журнала не требуется.|
|WinPhoneCritical|Журнал диагностики для телефона (Windows?). Если вы не используете телефоны, это средство ведения журнала не требуется.|

#### <a name="windows-defender-optimization-in-the-virtual-desktop-environment"></a>Оптимизация Защитника Windows в среде виртуальных рабочих столов

Дополнительные сведения о том, как оптимизировать Защитник Windows в среде виртуальных рабочих столов, см. в [руководстве по развертыванию антивирусной программы "Защитник Windows" в инфраструктуре виртуальных рабочих столов](/windows/security/threat-protection/windows-defender-antivirus/deployment-vdi-windows-defender-antivirus).

В указанной выше статье приведены процедуры подготовки "золотого" образа виртуального рабочего стола и обслуживания запущенных клиентов виртуальных рабочих столов. Чтобы сократить нагрузку на пропускную способность сети, когда устройствам виртуальных рабочих столов необходимо обновить подписи Защитника Windows, распределите перезагрузки по этапам и запланируйте их на нерабочее время, где это возможно. Обновления сигнатур Защитника Windows можно хранить во внутренних файловых ресурсах и, когда это целесообразно, эти ресурсы можно размещать в тех же или в ближайших сетевых сегментах к устройствам виртуальных рабочих столов.

#### <a name="client-network-performance-tuning-by-registry-settings"></a>Настройка производительности клиентской сети с помощью параметров реестра

Существуют некоторые параметры реестра, которые могут повысить производительность сети. Это особенно важно в средах, где в устройстве виртуального рабочего стола или на физическом компьютере выполняется рабочая нагрузка, которая в основном использует сеть. Мы рекомендуем использовать параметры, указанные в этом разделе, для точной настройки производительности профиля рабочей нагрузки сети, путем установки дополнительной буферизации и кэширования таких объектов, как записи каталога и т. д.

> [!NOTE]
> Некоторые параметры в этом разделе доступны только в реестре и должны быть включены в базовый образ до его развертывания для использования в рабочей среде.

Следующие параметры описаны в [руководстве по обеспечению высокой производительности Windows Server 2016](../../administration/performance-tuning/index.md).

#### <a name="disablebandwidththrottling"></a>DisableBandwidthThrottling

`HKLM\System\CurrentControlSet\Services\LanmanWorkstation\Parameters\DisableBandwidthThrottling`

Применяется к Windows 10. Значение по умолчанию — **0**. По умолчанию перенаправитель SMB регулирует пропускную способность для сетевых подключений с высокой задержкой, что позволяет в некоторых случаях избежать превышения времени ожидания, связанного с сетью. Значение **1** для этого параметра реестра отключает такое регулирование, ускоряя передачу файлов через сетевые соединения с высокой задержкой. Попробуйте установить значение **1**.

#### <a name="fileinfocacheentriesmax"></a>FileInfoCacheEntriesMax

`HKLM\System\CurrentControlSet\Services\LanmanWorkstation\Parameters\FileInfoCacheEntriesMax`

Применяется к Windows 10. По умолчанию имеет значение **64**. Допускаются значения от 1 до 65536. Это значение используется для определения объема метаданных файла, которые могут кэшироваться клиентом. Увеличение значения позволяет сократить сетевой трафик и повысить производительность, если осуществляется доступ к большому числу файлов. Попробуйте увеличить это значение до **1024**.

#### <a name="directorycacheentriesmax"></a>DirectoryCacheEntriesMax

`HKLM\System\CurrentControlSet\Services\LanmanWorkstation\Parameters\DirectoryCacheEntriesMax`

Применяется к Windows 10. По умолчанию имеет значение **16**. Допускаются значения от 1 до 4096. Это значение используется для определения объема сведений о каталогах, которые могут кэшироваться клиентом. Увеличение значения позволяет сократить сетевой трафик и повысить производительность, если осуществляется доступ к большому числу каталогов. Попробуйте увеличить это значение до **1024**.

#### <a name="filenotfoundcacheentriesmax"></a>FileNotFoundCacheEntriesMax

`HKLM\System\CurrentControlSet\Services\LanmanWorkstation\Parameters\FileNotFoundCacheEntriesMax`

Применяется к Windows 10. По умолчанию имеет значение **128**. Допускаются значения от 1 до 65536. Это значение используется для определения объема сведений об именах файлов, которые могут кэшироваться клиентом. Увеличение значения позволяет сократить сетевой трафик и повысить производительность, если осуществляется доступ к большому числу имен файлов. Попробуйте увеличить это значение до **2048**.

#### <a name="dormantfilelimit"></a>DormantFileLimit

`HKLM\System\CurrentControlSet\Services\LanmanWorkstation\Parameters\DormantFileLimit`

Применяется к Windows 10. Значение по умолчанию — **1023**. Этот параметр определяет максимальное число файлов, которые нужно оставить открытыми в общем ресурсе после того, как приложение закроет файл. Если много тысяч клиентов подключается к серверам SMB, попробуйте уменьшить это значение до **256**.

Вы можете настроить многие из этих параметров SMB с помощью командлетов Windows PowerShell [Set-SmbClientConfiguration](/powershell/module/smbshare/set-smbclientconfiguration?view=win10-ps&preserve-view=true) и [Set-SmbServerConfiguration](/powershell/module/smbshare/set-smbserverconfiguration?view=win10-ps&preserve-view=true). Параметры реестра можно настроить с помощью Windows PowerShell, как показано в приведенном ниже примере.

```powershell
Set-ItemProperty -Path "HKLM:\SYSTEM\CurrentControlSet\Services\LanmanWorkstation\Parameters" RequireSecuritySignature -Value 0 -Force
```

#### <a name="additional-settings-from-the-windows-restricted-traffic-limited-functionality-baseline-guidance"></a>Дополнительные параметры из руководства "Базовый план ограниченной функциональности трафика Windows"

Корпорация Майкрософт выпустила базовый план, созданный на основе тех же процедур, что и [базовые параметры Безопасности Windows](/windows/device-security/windows-security-baselines), для сред, которые либо не подключены к Интернету напрямую, либо для которых вы хотите сократить объем данных, отправляемых в корпорацию Майкрософт и другие службы.

Параметры [базового плана ограниченной функциональности трафика Windows](/windows/privacy/manage-connections-from-windows-operating-system-components-to-microsoft-services) помечены звездочкой в таблице параметров групповой политики.

#### <a name="disk-cleanup-including-using-the-disk-cleanup-wizard"></a>Очистка диска (в том числе с помощью мастера очистки диска)

Очистка диска может быть особенно полезной для реализации золотого или главного образа виртуального рабочего стола. После подготовки, обновления и настройки золотого или главного образа одной из последних задач является очистка диска. Сценарии оптимизации на сайте Github.com содержат код PowerShell для выполнения общих задач очистки диска.

> [!NOTE]
> Параметры очистки диска находятся в категории параметров "Система" под названием "Память". При достижении порога свободного пространства на диске по умолчанию запускается Контроль памяти.
>
> Дополнительные сведения об использовании Контроля памяти с пользовательскими VHD-образами Azure см. в статье [Подготовка и настройка главного образа VHD](/azure/virtual-desktop/set-up-customize-master-image).
>
> Для узла сеансов Виртуальных рабочих столов Windows, использующего Windows 10 Корпоративная или Windows 10 Корпоративная с несколькими сеансами, рекомендуется отключить Контроль памяти. Вы можете отключить Контроль памяти в меню параметров в разделе **Память**.

Ниже приведены рекомендации для различных задач очистки диска. Перед внедрением необходимо проверить их все.

1. Контроль памяти можно использовать вручную или автоматически. Дополнительные сведения о Контроле памяти см. в статье по использованию OneDrive и Контроля памяти в Windows 10 для управления дисковым пространством.
2. Очистите временные файлы и журналы вручную. В командной строке с повышенными привилегиями выполните следующие команды.

   1. `Del C:\*.tmp /s`
   2. `C:\*.etl /s`
   3. `C:\*.evtx /s`

   ```powershell
   Get-ChildItem -Path c:\ -Include *.tmp, *.dmp, *.etl, *.evtx, thumbcache*.db, *.log -File -Recurse -Force -ErrorAction SilentlyContinue | Remove-Item -ErrorAction SilentlyContinue

   Remove-Item -Path $env:ProgramData\Microsoft\Windows\WER\Temp\* -Recurse -Force -ErrorAction SilentlyContinue

   Remove-Item -Path $env:ProgramData\Microsoft\Windows\WER\ReportArchive\* -Recurse -Force -ErrorAction SilentlyContinue

   Remove-Item -Path $env:ProgramData\Microsoft\Windows\WER\ReportQueue\* -Recurse -Force -ErrorAction SilentlyContinue

   Clear-RecycleBin -Force -ErrorAction SilentlyContinue

   Clear-BCCache -Force -ErrorAction SilentlyContinue
   ```

3. Удалите неиспользуемые профили в системе с помощью следующей команды:

    `wmic path win32_UserProfile where LocalPath="C:\\users\\<users>" Delete`

Если у вас есть вопросы или возникли сложности, касающиеся сведений в этом документе, обратитесь к группе поддержки учетных записей Майкрософт, изучите [блог о виртуальных рабочих столах (Майкрософт) для ИТ-специалистов](https://community.windows.com/stories/virtual-desktop-windows-10), отправьте сообщение на [форумы о виртуальных рабочих столах (Майкрософт)](https://techcommunity.microsoft.com/t5/windows-virtual-desktop/bd-p/WindowsVirtualDesktop) или сообщите о своих вопросах и проблемах в [корпорацию Майкрософт](https://support.microsoft.com/contactus/).

### <a name="re-enable-windows-update"></a>Повторное включение Центра обновления Windows

Если вы хотите снова включить Центр обновления Windows после его отключения, как в случае постоянного виртуального рабочего стола, выполните приведенные ниже действия.

1. Повторно включите параметры групповой политики, выполнив следующие действия.

   - Последовательно выберите пункты **Политика локального компьютера** > **Конфигурация компьютера** > **Административные шаблоны** > **Система** > **Управление связью через Интернет** > **Параметры связи через Интернет**.
     - Отключите доступ ко всем компонентам Центра обновления Windows, изменив параметр с **Включено** на **Не настроено**.
   - Последовательно выберите пункты **Политика локального компьютера** > **Конфигурация компьютера** > **Административные шаблоны** > **Компоненты Windows** > **Центр обновления Windows**.
     - Запретите доступ ко всем компонентам Центра обновления Windows, изменив параметр с **Включено** на **Не настроено**.
     - Не подключайтесь к расположениям Центра обновления Windows в Интернете, изменив параметр с **Включено** на **Не настроено**.
   - Последовательно выберите пункты **Политика локального компьютера** > **Конфигурация компьютера** > **Административные шаблоны** > **Компоненты Windows** > **Центр обновления Windows** > **Центр обновления Windows для бизнеса**.
     - Выберите время получения исправлений (измените значение с **Включено** на **Не настроено**).
   - Последовательно выберите пункты **Политика локального компьютера** > **Конфигурация компьютера** > **Административные шаблоны** > **Компоненты Windows** > **Центр обновления Windows** > **Центр обновления Windows для бизнеса**.
     - Выберите время получения предварительных сборок и обновлений компонентов (измените значение с **Включено** на **Не настроено**).

2. Повторно включите службы, выполнив приведенные ниже действия.

   - Измените значение параметра **Обновление службы оркестратора** с **Отключено** на **Автоматически (отложенный запуск)** .

3. Измените реестр Windows (будьте внимательны при редактировании реестра).

   - Перейдите по адресу `HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\WindowsUpdate\UpdatePolicy\PolicyState`.
     - Измените **DeferQualityUpdates** с "1" на "0".
   - `HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\WindowsUpdate\UpdatePolicy\Settings`
     - Удалите любое имеющееся значение для **PausedQualityDate**.
   - Перейдите на сайт `HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\Explorer\WAU`.
     - Установите значение **Отключено**.

4. Повторно включите запланированные задачи, выполнив следующие действия.

   - Последовательно выберите **Библиотека планировщика заданий** > **Microsoft** > **Windows** > **InstallService** > **ScanForUpdates**.
   - Последовательно выберите **Библиотека планировщика заданий** > **Microsoft** > **Windows** > **InstallService** > **ScanForUpdatesAsUser**.

5. Перезагрузите устройство, чтобы все эти параметры вступили в силу.

6. Если вы хотите отключить на этом устройстве предлагаемые обновления компонентов, последовательно выберите **Параметры** > **Центр обновления Windows** > **Дополнительные параметры** > **Выберите, когда устанавливать обновления** и установите параметр вручную. **Обновление компонентов включает в себя новые возможности и улучшения. Обновление может быть отложено на указанное число дней** ненулевого значения, например 180, 365 и т. д.

## <a name="additional-information"></a>Дополнительные сведения

Сведения об архитектуре Microsoft VDI приведены в [документации по Виртуальному рабочему столу Windows](https://azure.microsoft.com/services/virtual-desktop/).

Если вам нужна дополнительная помощь по устранению неполадок с программой Sysprep, см. статью [Sysprep выходит из строя после удаления или обновления приложений Microsoft Store, включающих встроенные образы Windows](https://support.microsoft.com/help/2769827/sysprep-fails-after-you-remove-or-update-windows-store-apps-that-inclu).
