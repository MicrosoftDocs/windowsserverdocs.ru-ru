---
title: Оптимизация Windows 10 версии 1909 для роли инфраструктуры виртуальных рабочих столов (VDI)
description: Рекомендуемые параметры и конфигурация для снижения временных затрат на компьютеры Windows 10 версии 1909, используемые в качестве образов VDI.
ms.reviewer: robsmi
ms.author: helohr
ms.topic: article
author: heidilohr
manager: lizross
ms.date: 02/19/2020
ms.openlocfilehash: b0ff8f353d4536f89d698f362e2998d9682665f2
ms.sourcegitcommit: e164aeffc01069b8f1f3248bf106fcdb7f64f894
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/26/2020
ms.locfileid: "91389018"
---
# <a name="optimizing-windows-10-version-1909-for-a-virtual-desktop-infrastructure-vdi-role"></a>Оптимизация Windows 10 версии 1909 для роли инфраструктуры виртуальных рабочих столов (VDI)

Эта статья поможет вам выбрать параметры для Windows 10 версии 1909 (сборка 18363), которые должны обеспечить оптимальную производительность в среде инфраструктуры виртуальных рабочих столов (VDI). Все параметры в этом руководстве являются рекомендуемыми для рассмотрения, а не обязательными.

Основные способы оптимизировать производительность Windows 10 в среде VDI — это обеспечить минимальную перерисовку графических элементов приложений, минимизировать фоновые действия, которые не дают особых преимуществ среде VDI, и, как правило, максимально уменьшить число запущенных процессов. Вторая цель — уменьшить использование дискового пространства в базовом образе до самого минимума. Благодаря реализациям VDI наименьший возможный размер базового или "золотого" образа может немного сократить использование памяти в гипервизоре, а также немного уменьшить общее число сетевых операций, необходимых для доставки образа компьютера потребителю.

> [!NOTE]
> Эти рекомендуемые параметры могут применяться к другим установкам Windows 10 версии 1909, в том числе на физических или виртуальных устройствах. Рекомендации в этой статье не должны влиять на возможность поддержки Windows 10 версии 1909.

## <a name="vdi-optimization-principles"></a>Принципы оптимизации VDI

Среда VDI по сети предоставляет пользователю компьютера полный сеанс рабочего стола, включая приложения. Средство доставки сети может быть локальной сетью или Интернетом. Среды VDI используют "базовый" образ операционной системы, который становится основой для рабочих столов, позднее предоставляемых пользователям. Существуют варианты реализации VDI, например "постоянная" среда, "временная" среда и "сеанс рабочего стола". Постоянная среда сохраняет изменения ОС настольного компьютера VDI между сеансами. Временная среда не сохраняет изменения ОС настольного компьютера VDI между сеансами. Для пользователя этот рабочий стол не будет сильно отличаться для других виртуальных или физических устройств, используемых для доступа по сети.

Параметры оптимизации будут действовать на эталонном устройстве. Виртуальная машина — это идеальное место для создания образа, так как вы можете сохранить ее состояние, а также создать контрольные точки и резервные копии. Установка ОС по умолчанию выполняется на базовой виртуальной машине. Затем выполняется оптимизация этой базовой виртуальной машины путем удаления ненужных приложений, установки обновлений Windows, установки других обновлений, удаления временных файлов и применения параметров.

Существуют и другие типы VDI, такие как сеанс удаленного рабочего стола (RDS) и недавно выпущенная служба [виртуальных рабочих столов Windows](https://azure.microsoft.com/services/virtual-desktop/). Более подробное обсуждение этих технологий выходит за рамки данной статьи. В этой статье рассматриваются параметры базового образа Windows без упоминания о других факторах среды, таких как оптимизация узла.

Когда речь идет о продуктах и службах, безопасность и стабильность являются главными приоритетами для корпорации Майкрософт. Корпоративные клиенты могут использовать возможности встроенного приложения "Безопасность Windows" — набор служб, которые хорошо работают как с подключением к Интернету, так и без него. Для сред VDI, которые не подключены к Интернету, подписи безопасности можно скачивать несколько раз в день, так как корпорация Майкрософт может выпускать более одного обновления подписи в день. Затем эти подписи могут быть предоставлены виртуальным машинам VDI и запланированы для установки во время производства, независимо от того, являются ли они постоянными или непостоянными. Таким образом, защита виртуальной машины будет оставаться максимально актуальной.

Существуют некоторые параметры безопасности, которые не применимы к средам VDI, которые не подключены к Интернету и, следовательно, не могут участвовать в облачной безопасности. Кроме того, существуют и другие параметры, которые могут использовать "обычные" устройства Windows, такие как Cloud Experience, Магазин Windows и т. д. Удаление доступа к неиспользуемым функциям уменьшает занимаемое место, пропускную способность сети и количество уязвимых зон.

Что касается обновлений, Windows 10 использует алгоритм ежемесячных обновлений, чтобы клиентам не нужно было их выполнять. В большинстве случаев администраторы VDI контролируют процесс обновления с помощью процесса завершения работы виртуальных машин на основе "главного" или "золотого" образа, распечатывая этот образ, предназначенный только для чтения, исправляя его, затем упаковывая и возвращая обратно в рабочую среду. Следовательно, нет необходимости в том, чтобы виртуальные машины VDI проверяли Центр обновления Windows. В некоторых случаях, например в виртуальных машинах постоянных сред VDI, выполняются обычные процедуры исправления. Кроме того, можно использовать Центр обновления Windows или Microsoft Intune. System Center Configuration Manager может использоваться для обработки обновлений и доставки других пакетов. Каждая организация должна определить наилучший способ обновления VDI.

> [!TIP]
> Сценарий, который реализует оптимизации, описанные в этой статье, а также файл экспорта объекта групповой политики (GPO), который можно импортировать с помощью **LGPO.exe**, доступны на странице [TheVDIGuys](https://github.com/TheVDIGuys) на портале GitHub.

Этот сценарий был разработан в соответствии с вашей средой и требованиями. Основным кодом является PowerShell, а работа выполняется с использованием входных файлов (обычный текст) и файлов экспорта средства объектов локальной групповой политики (LGPO). Эти файлы содержат списки приложений, которые нужно удалить, и служб, которые нужно отключить. Если вы не хотите удалять определенное приложение или отключать определенную службу, измените соответствующий текстовый файл и удалите элемент. Наконец, существуют параметры локальной политики, которые можно импортировать на устройство. Лучше иметь некоторые параметры в базовом образе, чем применять параметры с помощью групповой политики, так как некоторые параметры вступают в силу при следующей перезагрузке или при первом использовании компонента.

### <a name="persistent-vdi"></a>Постоянная среда VDI

В основе модели постоянной среды VDI лежит виртуальная машина, которая сохраняет состояние операционной системы между перезагрузками. Другие слои программного обеспечения решения VDI предоставляют пользователям простой и удобный доступ к назначенным им виртуальным машинам, часто с помощью решения единого входа.

Существует несколько разных реализаций постоянных сред VDI.

- Традиционная виртуальная машина, которая имеет собственный файл виртуального диска, запускается обычным образом и сохраняет изменения между сеансами. Различие заключается в том, как пользователь получает к ней доступ. Пользователь может входить на какой-либо веб-портал, который автоматически направляет пользователя к одной или нескольким назначенным ему виртуальным машинам VDI.

- Постоянная виртуальная машина на основе образа с индивидуальными виртуальными дисками (при необходимости). При таком типе реализации на одном или нескольких серверах узла хранится базовый (или "золотой") образ. Когда создается виртуальная машина, создается один или несколько виртуальных дисков, которым назначается этот диск для постоянного хранения.

    - При запуске виртуальной машины копия базового образа считывается в ее память. В то же время этой виртуальной машине назначается постоянный виртуальный диск со всеми предыдущими изменениями операционной системы, объединенными с помощью сложного процесса.

    - Изменения, например записи в журнале событий, записи в других журналах и т. д., перенаправляются на виртуальный диск для чтения и записи, назначенный этой виртуальной машине.

    - В этом случае операционная система и обслуживание приложений могут выполняться в обычном режиме с помощью традиционного программного обеспечения для обслуживания, например Windows Server Update Services или других технологий управления.

    - Различие между постоянной виртуальной машиной VDI и "обычной" виртуальной машиной заключается в отношении к главному или золотому образу. В определенный момент обновления должны быть применены к главному образу. Способ обработки постоянных изменений пользователя здесь зависит от реализаций. В некоторых случаях диск с изменениями удаляется и сбрасывается, устанавливая тем самым новую контрольную точку. Кроме того, может случиться так, что изменения, сделанные пользователем, сохраняются в ежемесячных исправлениях, а базовый образ сбрасывается после обновления компонентов.

### <a name="non-persistent-vdi"></a>Временная среда VDI

Когда временная реализация VDI основана на базовом или "золотом" образе, оптимизации главным образом выполняются в базовом образе, а затем — посредством локальных параметров и политик.

При использовании временной среды VDI на основе образа базовый образ доступен только для чтения. При запуске виртуальной машины временной среды копия базового образа передается потоком в виртуальную машину. Действия, которые выполняются во время запуска, а затем — до последующей перезагрузки, перенаправляются во временное расположение. Обычно пользователям предоставляются сетевые расположения для хранения данных. В некоторых случаях профиль пользователя объединяется с виртуальной машиной ценовой категории "Стандартный", чтобы предоставить этому пользователю возможность использовать свои параметры.

Одним важным аспектом временной среды VDI, основанной на отдельном образе, является обслуживание. Обновления и компоненты для операционной системы обычно доставляются один раз в месяц. При использовании VDI на основе образа существует ряд процессов, которые необходимо выполнить, чтобы обновить образ.

- На заданном узле все виртуальные машины, являющиеся производными от базового образа, должны завершить работу или быть отключены. Это означает, что пользователи будут перенаправлены на другие виртуальные машины.

- Базовый образ открывается и запускается. Затем выполняются все действия по обслуживанию, в том числе установка обновлений операционной системы, обновлений платформы .NET, обновлений приложений и т. д.

- На этом этапе применяются все новые параметры, которые должны быть применены.

- Кроме того, выполняются все прочие операции обслуживания.

- Затем работа базового образа завершается.

- Базовый образ упаковывается и возвращается в рабочую среду.

- Пользователи могут снова войти в систему.

> [!NOTE]
> Windows 10 автоматически выполняет ряд задач обслуживания на периодической основе. Имеется запланированная задача, которая по умолчанию запускается в 3:00 каждый день. Она выполняет ряд задач, включая очистку обновлений Windows. Вы можете просмотреть все категории операций обслуживания, которые выполняются автоматически, с помощью следующей команды PowerShell.
>
>```powershell
>Get-ScheduledTask | ? {$_.Settings.MaintenanceSettings}
>```
>

Одной из проблем, связанных с временной средой VDI, является то, что после выхода пользователя отменяются почти все действия в операционной системе. Профиль пользователя или состояние могут быть сохранены в центральном расположении, но почти все изменения, внесенные с момента последней загрузки, отменяются самой виртуальной машиной. Поэтому оптимизации, предназначенные для компьютера с Windows, который сохраняет состояние между сеансами, не подходят.

В зависимости от архитектуры виртуальной машины VDI такие операции, как PreFetch и SuperFetch, не спасут при переходе между сеансами, так как все оптимизации отменяются при перезапуске виртуальной машины. Индексирование может оказаться отчасти пустой тратой ресурсов, как и любые оптимизации дисков, например традиционная дефрагментация.

> [!NOTE]
> При подготовке образа с использованием виртуализации и при подключении к Интернету во время процесса создания образа во время первого входа в систему следует отложить обновление компонентов. Для этого выберите **Параметры**, **Центр обновления Windows**.

### <a name="to-sysprep-or-not-sysprep"></a>Быть Sysprep или не быть

В Windows 10 есть встроенное [средство SysPrep](/windows-hardware/manufacture/desktop/sysprep--system-preparation--overview), предназначенное для подготовки системы. Средство Sysprep используется, чтобы подготовить пользовательский образ Windows 10 для дублирования. Процесс Sysprep гарантирует, что итоговая операционная система будет обладать соответствующими уникальными характеристиками для запуска в рабочей среде.

У средства Sysprep имеется несколько достоинств и недостатков. В случае VDI может потребоваться возможность настроить профиль пользователя по умолчанию, который будет использоваться в качестве шаблона профиля для последующих пользователей, осуществляющих вход с помощью этого образа. У вас могут быть приложения, которые требуется установить, но с возможностью управлять параметрами на уровне приложения.

Альтернативой является использование стандартного ISO-файла для установки, возможно, с файлом ответов для автоматической установки, и последовательности задач для установки приложений или их удаления. Вы можете также использовать последовательность задач для настройки параметров локальной политики в образе, возможно, с помощью средства [Local Group Policy Object Utility (LGPO)](/archive/blogs/secguide/lgpo-exe-local-group-policy-object-utility-v1-0).

### <a name="supportability"></a>Возможности поддержки

Каждый раз при изменении значений по умолчанию Windows возникают вопросы относительно поддержки. После настройки образа VDI (виртуальной машины или сеанса) каждое изменение, внесенное в образ, необходимо отслеживать в журнале изменений. Часто при устранении неполадок образ можно изолировать в пуле и настроить для анализа проблем. Как только будет отслежена первопричина проблемы, это изменение можно будет сначала развернуть в тестовой среде и, в конечном итоге, в рабочей среде.

В этом документе намеренно не затрагиваются системные службы, политики или задачи, влияющие на безопасность. После этого идет обслуживание Windows. Возможность обслуживания образов VDI за пределами периодов обслуживания исключается, так как эти периоды касаются того времени, когда в средах VDI происходят большинство событий обслуживания, *за исключением обновлений программного обеспечения безопасности*. Корпорация Майкрософт опубликовала руководство по приложению "Безопасность Windows" в средах VDI. Дополнительные сведения см. в статье [Deployment guide for Windows Defender Antivirus in a virtual desktop infrastructure (VDI) environment](/windows/security/threat-protection/windows-defender-antivirus/deployment-vdi-windows-defender-antivirus) (Руководство по развертыванию антивирусной программы "Защитник Windows" в инфраструктуре виртуальных рабочих столов).

Рассмотрите возможность поддержки при изменении параметров Windows по умолчанию. Сложные проблемы могут возникнуть при изменении системных служб, политик или запланированных задач в целях усиления защиты, облегчения выполнения задач и т. д. Обратитесь в базу знаний Майкрософт для получения информации о текущих известных проблемах, связанных с измененными параметрами по умолчанию. Руководство в этом документе и соответствующий сценарий на GitHub будут поддерживаться в отношении известных проблем, если таковые возникнут. Кроме того, вы можете сообщать о проблемах в корпорацию Майкрософт несколькими способами.

Вы можете использовать предпочтительную поисковую систему с условиями "начальное значение site:support.microsoft.com", чтобы отобразить известные проблемы, касающиеся начальных значений по умолчанию для служб.

Вы можете заметить, что этот документ и связанные сценарии на GitHub не изменяют никаких разрешений по умолчанию. Если вы хотите увеличить параметры безопасности, начните с проекта **AaronLocker**. Дополнительные сведения об AaronLocker см. на [этой странице](https://github.com/microsoft/AaronLocker).

#### <a name="vdi-optimization-categories"></a>Категории оптимизации VDI

- Категории глобальных параметров операционной системы:

    - очистка приложений UWP;

    - очистка дополнительных компонентов;

    - Параметры локальной политики

    - Системные службы

    - Запланированные задачи

    - Установка обновлений Windows и других обновлений

    - Автоматическая трассировка Windows

    - очистка диска перед завершением (упаковкой) образа.

    - Параметры пользователя

    - Параметры узла и гипервизора

### <a name="universal-windows-platform-uwp-application-cleanup"></a>Очистка приложений для универсальной платформы Windows (UWP)

Одна из целей образа VDI — он должен быть максимально облегченным. Один из способов уменьшить размер образа — удалить приложения UWP, которые не будут использоваться в среде. Вместе с приложениями UWP хранятся файлы основного приложения, также известные как полезные данные. В каждом профиле пользователя хранится небольшой объем данных параметров приложения. Кроме того, небольшой объем данных хранится в профиле "Все пользователи".

Для очистки приложений UWP очень важными факторами являются наличие подключения и время. Если развернуть базовый образ на устройство без подключения к сети, Windows 10 не сможет подключиться к Microsoft Store и скачать приложения, поэтому ОС будет пытаться установить их, пока вы пытаетесь их удалить. Это может быть хорошим подходом, чтобы иметь возможность настроить образ, а затем обновить то, что осталось на более позднем этапе процесса создания образа.

Если изменить базовый WIM-файл, используемый для установки Windows 10, и удалить из него ненужные приложения UWP перед установкой, то эти приложения не будут устанавливаться с самого начала и создание профиля ускорится. Позже в этом разделе вы найдете сведения о том, как удалить приложения UWP из WIM-файла установки.

Хорошая стратегия для VDI — подготовить нужные приложения в базовом образе, а затем ограничить или запретить доступ к Microsoft Store. Приложения Store периодически обновляются в фоновом режиме на обычных компьютерах. Приложения UWP могут обновляться во время периода обслуживания, когда остальные обновления применены. Дополнительные сведения см. в статье о [приложениях универсальной платформы Windows](https://docs.citrix.com/citrix-virtual-apps-desktops/manage-deployment/applications-manage/universal-apps.html).

#### <a name="delete-the-payload-of-uwp-apps"></a>Удаление полезных данных приложений UWP

Приложения UWP, которые не требуются, по-прежнему занимают небольшое дисковое пространство в файловой системе. Полезные данные приложений UWP, которые никогда не потребуются, можно удалить из базового образа с помощью команд PowerShell.

На самом деле, если удалить их из WIM-файла установки, используя ссылки, приведенные ниже в этом разделе, то можно начать работу с очень коротким списком приложений UWP.

Выполните следующую команду, чтобы перечислить подготовленные приложения UWP из выполняющейся операционной системы, как показано ниже в сокращенном примере выходных данных PowerShell.

```powershell

    Get-AppxProvisionedPackage -Online

    DisplayName  : Microsoft.3DBuilder
    Version      : 13.0.10349.0
    Architecture : neutral
    ResourceId   : \~
    PackageName  : Microsoft.3DBuilder_13.0.10349.0_neutral_\~_8wekyb3d8bbwe
    Regions      :
    ...
```

Приложения UWP, подготовленные для системы, можно удалить при установке операционной системой с помощью последовательности задач. Кроме того, это можно сделать и после установки операционной системы. Этот метод может быть предпочтительным, так как он значительно упрощает весь процесс создания и обслуживания модульного образа. Если после разработки сценариев в последующие сборки будут внесены изменения, вы сможете изменить имеющийся сценарий, а не повторять процесс с нуля. Ниже приведены ссылки на сведения по этой теме.

[Removing Windows 10 in-box apps during a task sequence](/archive/blogs/mniehaus/removing-windows-10-in-box-apps-during-a-task-sequence) (Удаление встроенных приложений для Windows 10 с помощью последовательности задач)

[Removing Built-in apps from Windows 10 WIM-File with Powershell - Version 1.3](https://gallery.technet.microsoft.com/Removing-Built-in-apps-65dc387b) (Удаление встроенных приложений из WIM-файла Windows 10 с помощью PowerShell версии 1.3)

[Windows 10 1607: Keeping apps from coming back when deploying the feature update](/archive/blogs/mniehaus/windows-10-1607-keeping-apps-from-coming-back-when-deploying-the-feature-update) (Windows 10 версии 1607: как сделать так, чтобы приложения не устанавливались заново при развертывании обновления компонента)

Затем выполните команду PowerShell [Remove-AppxProvisionedPackage](/powershell/module/dism/remove-appxprovisionedpackage?view=win10-ps), чтобы удалить полезные данные приложений UWP.

```powershell
Remove-AppxProvisionedPackage -Online -PackageName
```

Полезность каждого приложения UWP должна быть отдельно оценена для каждой уникальной среды. Вам потребуется выполнить установку по умолчанию Windows 10 версии 1909, а затем определить, какие приложения запускаются и потребляют память. Например, можно рассмотреть возможность удаления приложений, которые запускаются автоматически, или приложений, которые автоматически отображают информацию в меню "Пуск", такие как "Погода" и "Новости", и которые могут быть бесполезными в вашей среде.

> [!NOTE]
> При использовании сценариев из GitHub вы можете легко управлять списком приложений, которые удаляются перед запуском сценария. После скачивания файлов сценария найдите файл AppxPackages.json, измените его и удалите записи для приложений, которые хотите сохранить, таких как "Калькулятор", "Записки" и т. д. Дополнительные сведения см. в разделе [Настройка](https://github.com/TheVDIGuys/Windows_10_VDI_Optimize#customization).

### <a name="manage-windows-optional-features-using-powershell"></a>Управление дополнительными компонентами Windows с помощью PowerShell

Вы можете управлять дополнительными компонентами Windows с помощью PowerShell. См. сведения на [форуме Windows Server PowerShell](/answers/topics/windows-server-powershell.html). Чтобы перечислить текущие установленные компоненты Windows, выполните следующую команду PowerShell:

```powershell
Get-WindowsOptionalFeature -Online
```

Вы можете включить или отключить определенный дополнительный компонент Windows, как показано в следующем примере:

```powershell
Enable-WindowsOptionalFeature -Online -FeatureName "DirectPlay" -All
```

Вы можете отключить компоненты в образе VDI, как показано в этом примере:

```powershell
Disable-WindowsOptionalFeature -Online -FeatureName "WindowsMediaPlayer"
```

Затем вы можете удалить пакет проигрывателя Windows Media. В Windows 10 версии 1909 есть два пакета проигрывателя Windows Media:

```powershell
Get-WindowsPackage -Online -PackageName *media*

PackageName       : Microsoft-Windows-MediaPlayer-Package~31bf3856ad364e35~amd64~~10.0.18362.1
Applicable        : True
Copyright        : Copyright (c) Microsoft Corporation. All Rights Reserved
Company         :
CreationTime       :
Description       : Play audio and video files on your local device and on the Internet.
InstallClient      : DISM Package Manager Provider
InstallPackageName    : Microsoft-Windows-MediaPlayer-Package~31bf3856ad364e35~amd64~~10.0.18362.1.mum
InstallTime       : 3/19/2019 6:20:22 AM
...

Features         : {}

PackageName       : Microsoft-Windows-MediaPlayer-Package~31bf3856ad364e35~amd64~~10.0.18362.449
Applicable        : True
Copyright        : Copyright (c) Microsoft Corporation. All Rights Reserved
Company         :
CreationTime       :
Description       : Play audio and video files on your local device and on the Internet.
InstallClient      : UpdateAgentLCU
InstallPackageName    : Microsoft-Windows-MediaPlayer-Package~31bf3856ad364e35~amd64~~10.0.18362.449.mum
InstallTime       : 10/29/2019 5:15:17 AM
...
```

Если вы хотите удалить пакет проигрывателя Windows Media (чтобы освободить около 60 МБ места на диске), выполните следующую команду:

```powershell
 Remove-WindowsPackage -PackageName Microsoft-Windows-MediaPlayer-Package~31bf3856ad364e35~amd64~~10.0.18362.1 -Online

 Remove-WindowsPackage -PackageName Microsoft-Windows-MediaPlayer-Package~31bf3856ad364e35~amd64~~10.0.18362.449 -Online
```

#### <a name="enable-or-disable-windows-features-using-dism"></a>Включение или отключение компонентов Windows с помощью DISM

Вы можете воспользоваться встроенным средством Dism.exe, чтобы перечислить дополнительные компоненты Windows и управлять ими. Сценарий Dism.exe может быть разработан и запущен во время последовательности задач установки операционной системы. Используемая технология Windows называется [Компоненты по требованию](/windows-hardware/manufacture/desktop/features-on-demand-v2--capabilities).

#### <a name="default-user-settings"></a>Параметры пользователя по умолчанию

Существуют настройки, которые можно внести в файл реестра Windows C:\Users\Default\NTUSER.DAT. Любые параметры, настроенные для этого файла, будут применены ко всем последующим профилям пользователей, созданным на основе устройства, на котором выполняется этот образ. Вы можете управлять списком параметров, которые будут применяться к профилю пользователя по умолчанию, изменив файл DefaultUserSettings.txt. Одним из параметров, который вы, возможно, захотите рассмотреть более подробно (новый для этой итерации рекомендаций по настройке), является параметр **TaskbarSmallIcons**. Возможно, вы захотите проверить этот параметр в своей базе пользователей, прежде чем применять его. Параметр **TaskbarSmallIcons** уменьшает панель задач Windows и занимает меньше места на экране, делает значки более компактными, минимизирует интерфейс поиска. Пример панели задач до и после использования этого параметра можно посмотреть на приведенных ниже рисунках.

Рисунок 1. Обычная панель задач Windows 10 версии 1909

![Стандартная версия панели задач Windows 10 версии 1909](media/rds-vdi-recommendations-1909/standard-taskbar.png)

Рисунок 2. Панель задач с применением параметра для мелких значков

![Панель задач с применением параметра для мелких значков](media/rds-vdi-recommendations-1909/taskbar-sm-icons.png)

Кроме того, чтобы уменьшить количество передаваемых образов через инфраструктуру VDI, вы можете установить для фона по умолчанию сплошной цвет вместо изображения по умолчанию для Windows 10. Вы также можете установить сплошной цвет экрана входа в систему, а также отключить эффект непрозрачного размытия.

Следующие параметры применяются к кусту реестра профиля пользователя по умолчанию, главным образом для уменьшения количества анимаций. Если некоторые или все эти параметры не нужны, удалите параметры, которые не будут применяться к новым профилям пользователей на основе этого изображения. Целью этих параметров является включение следующих аналогичных параметров.

Рисунок 3. Оптимизированные свойства системы, параметры производительности

![Оптимизированные свойства системы, параметры производительности](media/rds-vdi-recommendations-1909/performance-options.png)

Для Windows 10 версии 1909 ниже приведены параметры оптимизации, которые применяются к кусту реестра профиля пользователя по умолчанию для оптимизации производительности.

```dos
add "HKLM\Temp\Software\Microsoft\Windows\CurrentVersion\Explorer" /v ShellState /t REG_BINARY /d 240000003C2800000000000000000000 /f
add "HKLM\Temp\Software\Microsoft\Windows\CurrentVersion\Explorer\Advanced" /v IconsOnly /t REG_DWORD /d 1 /f
add "HKLM\Temp\Software\Microsoft\Windows\CurrentVersion\Explorer\Advanced" /v ListviewAlphaSelect /t REG_DWORD /d 0 /f
add "HKLM\Temp\Software\Microsoft\Windows\CurrentVersion\Explorer\Advanced" /v ListviewShadow /t REG_DWORD /d 0 /f
add "HKLM\Temp\Software\Microsoft\Windows\CurrentVersion\Explorer\Advanced" /v ShowCompColor /t REG_DWORD /d 1 /f
add "HKLM\Temp\Software\Microsoft\Windows\CurrentVersion\Explorer\Advanced" /v ShowInfoTip /t REG_DWORD /d 1 /f
add "HKLM\Temp\Software\Microsoft\Windows\CurrentVersion\Explorer\Advanced" /v TaskbarAnimations /t REG_DWORD /d 0 /f
add "HKLM\Temp\Software\Microsoft\Windows\CurrentVersion\Explorer\VisualEffects" /v VisualFXSetting /t REG_DWORD /d 3 /f
add "HKLM\Temp\Software\Microsoft\Windows\DWM" /v EnableAeroPeek /t REG_DWORD /d 0 /f
add "HKLM\Temp\Software\Microsoft\Windows\DWM" /v AlwaysHiberNateThumbnails /t REG_DWORD /d 0 /f
add "HKLM\Temp\Control Panel\Desktop" /v DragFullWindows /t REG_SZ /d 0 /f
add "HKLM\Temp\Control Panel\Desktop" /v FontSmoothing /t REG_SZ /d 2 /f
add "HKLM\Temp\Control Panel\Desktop" /v UserPreferencesMask /t REG_BINARY /d 9032078010000000 /f
add "HKLM\Temp\Control Panel\Desktop\WindowMetrics" /v MinAnimate /t REG_SZ /d 0 /f
add "HKLM\Temp\Software\Microsoft\Windows\CurrentVersion\StorageSense\Parameters\StoragePolicy" /v 01 /t REG_DWORD /d 0 /f
add "HKLM\Temp\Software\Microsoft\Windows\CurrentVersion\ContentDeliveryManager" /v SubscribedContent-338393Enabled /t REG_DWORD /d 0 /f
add "HKLM\Temp\Software\Microsoft\Windows\CurrentVersion\ContentDeliveryManager" /v SubscribedContent-353694Enabled /t REG_DWORD /d 0 /f
add "HKLM\Temp\Software\Microsoft\Windows\CurrentVersion\ContentDeliveryManager" /v SubscribedContent-353696Enabled /t REG_DWORD /d 0 /f
add "HKLM\Temp\Software\Microsoft\Windows\CurrentVersion\ContentDeliveryManager" /v SubscribedContent-338388Enabled /t REG_DWORD /d 0 /f
add "HKLM\Temp\Software\Microsoft\Windows\CurrentVersion\ContentDeliveryManager" /v SubscribedContent-338389Enabled /t REG_DWORD /d 0 /f
add "HKLM\Temp\Software\Microsoft\Windows\CurrentVersion\ContentDeliveryManager" /v SystemPaneSuggestionsEnabled /t REG_DWORD /d 0 /f
add "HKLM\Temp\Control Panel\International\User Profile" /v HttpAcceptLanguageOptOut /t REG_DWORD /d 1 /f
add "HKLM\Temp\Software\Microsoft\Windows\CurrentVersion\BackgroundAccessApplications\Microsoft.Windows.Photos_8wekyb3d8bbwe" /v Disabled /t REG_DWORD /d 1 /f
add "HKLM\Temp\Software\Microsoft\Windows\CurrentVersion\BackgroundAccessApplications\Microsoft.Windows.Photos_8wekyb3d8bbwe" /v DisabledByUser /t REG_DWORD /d 1 /f
add "HKLM\Temp\Software\Microsoft\Windows\CurrentVersion\BackgroundAccessApplications\Microsoft.SkypeApp_kzf8qxf38zg5c" /v Disabled /t REG_DWORD /d 1 /f
add "HKLM\Temp\Software\Microsoft\Windows\CurrentVersion\BackgroundAccessApplications\Microsoft.SkypeApp_kzf8qxf38zg5c" /v DisabledByUser /t REG_DWORD /d 1 /f
add "HKLM\Temp\Software\Microsoft\Windows\CurrentVersion\BackgroundAccessApplications\Microsoft.YourPhone_8wekyb3d8bbwe" /v Disabled /t REG_DWORD /d 1 /f
add "HKLM\Temp\Software\Microsoft\Windows\CurrentVersion\BackgroundAccessApplications\Microsoft.YourPhone_8wekyb3d8bbwe" /v DisabledByUser /t REG_DWORD /d 1 /f
add "HKLM\Temp\Software\Microsoft\Windows\CurrentVersion\BackgroundAccessApplications\Microsoft.MicrosoftEdge_8wekyb3d8bbwe" /v Disabled /t REG_DWORD /d 1 /f
add "HKLM\Temp\Software\Microsoft\Windows\CurrentVersion\BackgroundAccessApplications\Microsoft.MicrosoftEdge_8wekyb3d8bbwe" /v DisabledByUser /t REG_DWORD /d 1 /f
add "HKLM\Temp\Software\Microsoft\Windows\CurrentVersion\BackgroundAccessApplications\Microsoft.PPIProjection_cw5n1h2txyewy" /v Disabled /t REG_DWORD /d 1 /f
add "HKLM\Temp\Software\Microsoft\Windows\CurrentVersion\BackgroundAccessApplications\Microsoft.PPIProjection_cw5n1h2txyewy" /v DisabledByUser /t REG_DWORD /d 1 /f
add "HKLM\Temp\Software\Microsoft\InputPersonalization" /v RestrictImplicitInkCollection /t REG_DWORD /d 1 /f
add "HKLM\Temp\Software\Microsoft\InputPersonalization" /v RestrictImplicitTextCollection /t REG_DWORD /d 1 /f
add "HKLM\Temp\Software\Microsoft\Personalization\Settings" /v AcceptedPrivacyPolicy /t REG_DWORD /d 0 /f
add "HKLM\Temp\Software\Microsoft\InputPersonalization\TrainedDataStore" /v HarvestContacts /t REG_DWORD /d 0 /f
add "HKLM\Temp\Software\Microsoft\Windows\CurrentVersion\UserProfileEngagement" /v ScoobeSystemSettingEnabled /t REG_DWORD /d 0 /f
add "HKLM\Temp\Software\Microsoft\Windows\CurrentVersion\UserProfileEngagement" /v ScoobeSystemSettingEnabled /t REG_DWORD /d 0 /f
add "HKLM\Temp\Software\Microsoft\Windows\CurrentVersion\UserProfileEngagement" /v ScoobeSystemSettingEnabled /t REG_DWORD /d 0 /f
add "HKCU\Software\Microsoft\InputPersonalization" /v RestrictImplicitInkCollection /t REG_DWORD /d 1 /f
add "HKCU\Software\Microsoft\InputPersonalization" /v RestrictImplicitTextCollection /t REG_DWORD /d 1 /f
```

В параметрах локальной политики вы можете отключить изображения для фонов в VDI. Если вам нужны изображения, вы можете создать собственные фоновые изображения с уменьшенной глубиной цвета, чтобы ограничить пропускную способность сети, которая используется для передачи информации об изображении. Если вы не хотите указывать фоновое изображение в локальной политике, может потребоваться установить цвет фона перед установкой параметров локальной политики, так как после настройки политики у пользователя не будет возможности изменить цвет фона. Возможно, было бы лучше указать значение NULL в качестве фонового изображения. В следующем разделе приведен еще один параметр политики, который запрещает использование фона в сеансах протокола удаленного рабочего стола.

### <a name="local-policy-settings"></a>Параметры локальной политики

Многие оптимизации для Windows 10 в среде VDI можно выполнить с помощью политики Windows. Параметры, перечисленные в таблице в этом разделе, могут применяться локально к базовому или золотому образу. Они будут действовать, если аналогичные параметры не будут указаны любым другим способом, например с помощью групповой политики.

Некоторые решения могут быть основаны на особенностях среды, например:

- У среды VDI есть доступ к Интернету?

- Решение VDI является постоянным или временным?

Указанные ниже параметры были выбраны для того, чтобы не противоречить и не конфликтовать с параметрами, каким-либо образом связанными с безопасностью. Эти параметры были выбраны для удаления параметров или отключения функций, которые могут стать неприменимыми в средах VDI.

| Параметр политики | Элемент | Вложенный элемент | Возможные значения и комментарии|
| -------------- | ---- | -------- | ---------------------------- |
| Политика локального компьютера \\ Конфигурация компьютера \\ Параметры Windows \\ Параметры безопасности | | | |
| Политики диспетчера списка сетей | Все свойства сети | Сетевое расположение | Пользователь не может изменить расположение |
| Политика локального компьютера \\ Конфигурация компьютера \\ Административные шаблоны \\ Панель управления | | | |
| *Панель управления | Отображение советов в Интернете | | Отключена. Параметры запретят обращение к службам содержимого Майкрософт для получения советов и справки. |
| *Панель управления и Персонализация | Не отображает экран блокировки | Включен. Этот параметр определяет, отображается ли экран блокировки для пользователей. Если этот параметр политики включен, пользователи, которым не требуется нажимать клавиши CTRL+ALT+DEL перед входом, будут видеть выбранную плитку после блокировки своего компьютера. |
| *Панель управления и Персонализация | Применить конкретное изображение экрана блокировки и экрана входа в систему, которое будет использоваться по умолчанию | [![Пользовательский интерфейс для задания пути к экрану блокировки](media/lock-screen-image-settings.png)](media/lock-screen-image-settings.png) | Включен. Этот параметр позволяет указать изображение по умолчанию для экранов блокировки и входа в систему, отображаемых, когда вход пользователя не выполнен; кроме того, этот параметр позволяет установить указанное изображение по умолчанию для всех пользователей — оно заменяет прежнее изображение по умолчанию.<p>Мы рекомендуем использовать низкое разрешение и простое изображение, чтобы при каждой отрисовке изображения по сети передавалось меньше данных. |
| *Панель управления, Язык и региональные стандарты, Персонализация рукописного ввода | Отключить автоматическое обучение | | Включен. Если вы включите этот параметр политики, автоматическое обучение будет остановлено, а все сохраненные данные будут удалены. Пользователи не могут настроить этот параметр на панели управления. |
| Политика локального компьютера \\ Конфигурация компьютера \\ Административные шаблоны \\ Сеть | | | |
| Фоновая интеллектуальная служба передачи (BITS) | Запретить клиенту BITS использование кэша филиалов Windows |  | Включен |
| Фоновая интеллектуальная служба передачи (BITS) | Запретить компьютеру действовать как клиенту кэширования членов одноранговой группы BITS |  | Включен |
| Фоновая интеллектуальная служба передачи (BITS) | Запретить компьютеру действовать как серверу кэширования членов одноранговой группы BITS |  | Включен |
| Фоновая интеллектуальная служба передачи (BITS) | Разрешить кэширование членов одноранговой группы BITS |  | Отключен |
| BranchCache | Включить BranchCache |  | Отключен |
| *Шрифты | Включить поставщики шрифтов |  | Отключена. Windows не подключается к поставщику шрифтов в Интернете, а только перечисляет локально установленные шрифты. |
| Проверка подлинности для территории беспроводного доступа | Включить проверку подлинности для территории беспроводного доступа |  | Отключен |
| Службы одноранговых сетей Майкрософт | Отключение служб одноранговых сетей Майкрософт |  | Включен |
| Индикатор работоспособности сетевых подключений | Задать пассивный опрос. | Отключить пассивный опрос (флажок) | Включен. Используйте этот параметр, если используется изолированная сеть или статический IP-адрес. |
| автономные файлы; | Разрешить или запретить использование автономных файлов. |  | Отключен |
| Параметры TCP/IP \\ Технологии туннелирования для IP версии 6 | Установка состояния Teredo | Отключенное состояние | Включен. В отключенном состоянии интерфейсы Teredo на узле отсутствуют. |
| Служба WLAN \\ Параметры WLAN | Разрешить Windows автоматически подключаться к предложенным открытым хот-спотам, к сетям, доступ к которым предоставили контакты, и к хот-спотам, предлагающим платные услуги. |  | Отключена. Параметры **Подключаться к рекомендованным хот-спотам беспроводных сетей**, **Подключаться к сетям, общий доступ к которым предоставляют мои контакты** и **Enable paid services** (Включить платные службы) отключены, но пользователи на этом устройстве могут их включить. |
| Политика локального компьютера \\ Конфигурация компьютера \\ Административные шаблоны \\ Панель задач и меню ''Пуск'' |  |  |  |
| *Уведомления | Отключить использование уведомлениями сети |  | Включен. Если вы включите этот параметр, приложения и компоненты системы не смогут получать уведомления по сети от WNS или с помощью интерфейсов API опроса уведомлений. |
| Политика локального компьютера \\ Конфигурация компьютера \\ Административные шаблоны \\ Система |  |  |  |
| Установка устройств | Не отправлять отчет об ошибках Windows, если на устройстве установлен универсальный драйвер |  | Включен |
| Установка устройств | Не создавать контрольную точку восстановления системы во время работы устройства, при которой обычно требуется создание точки восстановления. |  | Включен |
| Установка устройств | Запретить получение метаданных устройств из Интернета |  | Включен |
| Установка устройств | Запретить Windows отправлять отчет об ошибках, если драйвер устройства запрашивает дополнительное программное обеспечение в ходе установки |  | Включен |
| Установка устройств | Отключить всплывающие напоминания **Найдено новое оборудование** во время установки устройства. |  | Включен |
| Файловая система \\ NTFS | Параметры создания коротких имен | Отключены для всех томов. | Включен |
| *Групповая политика | Настройка привязки приложений к Интернету с помощью обработчиков URI приложения |  | Отключена. Отключает привязку приложений к Интернету, и универсальные коды ресурса (URI) HTTP(s) будут открываться в браузере по умолчанию вместо запуска связанного приложения. |
| *Групповая политика | Продолжить работу на этом устройстве. |  | Отключена. Устройство с Windows не может быть обнаружено другими устройствами и не может взаимодействовать с ними. |
| Управление связью через Интернет \\ Параметры связи через Интернет | Отключить доступ ко всем возможностям Центра обновления Windows |  |Включен. Если этот параметр политики включен, все компоненты Центра обновления Windows будут удалены. Это относится и к блокировке доступа к веб-сайту Центра обновления Windows (https://windowsupdate.microsoft.com ) с помощью гиперссылки "Центр обновления Windows" в меню "Пуск" и в меню "Сервис" в Internet Explorer. Автоматическое обновление Windows также отключается. Вы не будете получать уведомления о критических обновлениях из Центра обновления Windows, как и сами обновления. Этот параметр политики также отключает автоматическую установку диспетчером устройств обновлений для драйверов с веб-сайта Центра обновления Windows. |
| Управление связью через Интернет \\ Параметры связи через Интернет | Отключить автоматическое обновление корневых сертификатов |  |Включен. Если этот параметр политики включен, то, когда вы получите сертификат, выданный ненадежным корневым центром, ваш компьютер не свяжется с веб-сайтом Центра обновления Windows, чтобы узнать, добавила ли корпорация Майкрософт этот ЦС в список доверенных центров сертификации. ПРМЕЧАНИЕ. Используйте этот параметр только в том случае, если у вас есть альтернативный способ получить последний список отзыва сертификатов. |
| Управление связью через Интернет \\ Параметры связи через Интернет | Отключить ссылки просмотра событий Events.asp |  | Включен |
| Управление связью через Интернет \\ Параметры связи через Интернет | Отключить совместный доступ к данным настройки рукописного ввода. |  | Включен |
| Управление связью через Интернет \\ Параметры связи через Интернет | Отключить отчеты об ошибках распознавания рукописного текста. |  | Включен |
| Управление связью через Интернет \\ Параметры связи через Интернет | Отключить центр справки и поддержки "Знаете ли вы?". Содержимое |  | Включен |
| Управление связью через Интернет \\ Параметры связи через Интернет | Отключить поиск в базе знаний Майкрософт в окне "Центр справки и поддержки". |  | Включен |
| Управление связью через Интернет \\ Параметры связи через Интернет | Отключить мастер подключения к Интернету, если URL-адрес ссылается на сайт Microsoft.com |  | Включен |
| Управление связью через Интернет \\ Параметры связи через Интернет | Отключить загрузку из Интернета для мастеров публикаций и заказов в Интернете. |  | Включен |
| Управление связью через Интернет \\ Параметры связи через Интернет | Отключить службу сопоставления файлов Интернета. |  | Включен |
| Управление связью через Интернет \\ Параметры связи через Интернет | Отключить регистрацию, если адрес-URL указывает на сайт Microsoft.com. |  | Включен |
| Управление связью через Интернет \\ Параметры связи через Интернет | Отключить заказ отпечатков в списке задач для изображений. |  | Включен |
| Управление связью через Интернет \\ Параметры связи через Интернет | Отключить задачу "Опубликовать в Интернете" для файлов и папок. |  | Включен |
| Управление связью через Интернет \\ Параметры связи через Интернет | Отключить программу улучшения качества программного обеспечения Windows Messenger. |  | Включен |
| Управление связью через Интернет \\ Параметры связи через Интернет | Отключить программу по улучшению качества программного обеспечения Windows. |  | Включен |
| Управление связью через Интернет \\ Параметры связи через Интернет | Отключить активные проверки индикатора работоспособности сетевых подключений |  | Включен. Этот параметр политики отключает активные проверки, выполняемые индикатором работоспособности сетевых подключений Windows (NCSI), чтобы определить, подключен ли компьютер к Интернету или к более ограниченной сети. При определении уровня подключения NCSI выполняет один из двух активных тестов: скачивание страницы с выделенного веб-сервера или запрос DNS для выделенного адреса. Если этот параметр политики включен, NCSI не выполняет ни один из двух активных тестов. Это может снизить возможности NCSI и других компонентов, которые используют NCSI, по определению доступа к Интернету). Примечание. Существуют другие политики, которые позволяют перенаправить тесты NCSI к внутренним ресурсам, если требуются такие функциональные возможности. |
| Управление связью через Интернет \\ Параметры связи через Интернет | Отключить отчеты об ошибках Windows. |  | Включен |
| Управление связью через Интернет \\ Параметры связи через Интернет | Отключить поиск драйверов устройств в Центре обновления Windows. |  | Включен |
| Вход в систему | Демонстрация анимации при первом входе |  | Отключен |
| Вход в систему | Отключение уведомлений приложений на экране блокировки |  | Включен |
| Вход в систему | Отключить звук запуска Windows |  | Включен |
| Управление питанием | Выбрать текущую схему управления питанием | Высокая производительность | Включен |
| Восстановление | Разрешить восстановление системы в состояние по умолчанию |  | Отключен |
| *Работоспособность хранилища | Разрешить скачивать обновления в модель прогнозирования сбоев диска |  | Отключена. Обновления для модели прогнозирования сбоев диска не скачиваются. |
| *Служба времени Windows \\ Поставщики времени | Включить NTP-клиент Windows |  | Отключена. Если отключить или не настраивать этот параметр политики, часы локального компьютера не синхронизируются с NTP-серверами. ПРМЕЧАНИЕ. Используйте этот параметр очень осторожно. Устройства с Windows, присоединенные к домену, должны использовать **NT5DS**. Контроллер домена и родительский контроллер могут использовать NTP. Роль PDCe может использовать NTP. Виртуальные машины иногда используют расширения или службы интеграции. |
| Диагностика и устранение неполадок \\ Запланированное обслуживание | Настроить поведение при запланированном обслуживании |   | Отключен |
| Диагностика и устранение неполадок \\ Диагностика быстродействия загрузки Windows | Настройка уровня выполнения сценария |   | Отключен |
| Диагностика и устранение неполадок \\ Диагностика утечки памяти Windows | Настройка уровня выполнения сценария |   | Отключен |
| Диагностика и устранение неполадок \\ Обнаружение и устранение нехватки ресурсов Windows | Настройка уровня выполнения сценария |   | Отключен |
| Диагностика и устранение неполадок \\ Диагностика быстродействия завершения работы Windows | Настройка уровня выполнения сценария |   | Отключен |
| Диагностика и устранение неполадок \\ Диагностика производительности ждущего режима и возобновления работы Windows | Настройка уровня выполнения сценария |   | Отключен |
| Диагностика и устранение неполадок \\ Диагностика скорости отклика системы Windows | Настройка уровня выполнения сценария |   | Отключен |
| *Профили пользователей | Отключение идентификатора рекламы |   | Включен. Если этот параметр политики включен, идентификатор получателя рекламы отключается. Приложения не могут использовать этот идентификатор для взаимодействия с другими приложениями. |
| Политика локального компьютера \\ Конфигурация компьютера \\ Административные шаблоны \\ Компоненты Windows |  |  |  |
| Добавить компоненты в Windows 10 | Запретить запускать мастер |  | Включен |
| *Конфиденциальность приложения | Запретить запускать мастер |  | Включен |
| *Конфиденциальность приложения | Предоставление приложениям для Windows доступа к данным учетной записи | По умолчанию для всех приложений: "Запретить принудительно" | Включен. Если выбран параметр **Запретить принудительно**, приложениям для Windows запрещается доступ к данным учетной записи и сотрудники вашей организации не могут это изменить. |
| *Конфиденциальность приложения | Разрешить приложениям для Windows получать доступ к журналу вызовов | По умолчанию для всех приложений: "Запретить принудительно" | Включен. Если выбран параметр **Запретить принудительно**, приложениям для Windows запрещается доступ к журналу вызовов и сотрудники вашей организации не могут это изменить. |
| *Конфиденциальность приложения | Предоставление приложениям для Windows доступа к контактам | По умолчанию для всех приложений: "Запретить принудительно" | Включен. Если выбран параметр **Запретить принудительно**, приложениям для Windows запрещается доступ к контактам и сотрудники вашей организации не могут это изменить. |
| *Конфиденциальность приложения | Разрешить приложениям для Windows доступ к диагностическим сведениям о других приложениях | По умолчанию для всех приложений: "Запретить принудительно" | Включен. Если вы отключите или не настроите этот параметр политики, сотрудники вашей организации смогут выбрать, будут ли приложения для Windows получать диагностические сведения о других приложениях, выбрав "Параметры > Конфиденциальность" на устройстве. |
| *Конфиденциальность приложения | Разрешить приложениям для Windows доступ к электронной почте | По умолчанию для всех приложений: "Запретить принудительно" | Включен. Если выбран параметр **Разрешить принудительно**, приложениям для Windows разрешается доступ к электронной почте и сотрудники вашей организации не могут это изменить. |
| *Конфиденциальность приложения | Предоставление приложениям для Windows доступа к данным о расположении | По умолчанию для всех приложений: "Запретить принудительно" | Включен. Если выбран параметр **Запретить принудительно**, приложениям для Windows запрещается доступ к расположению и сотрудники вашей организации не могут это изменить. |
| *Конфиденциальность приложения | Предоставление приложениям для Windows доступа к сообщениям | По умолчанию для всех приложений: "Запретить принудительно" | Включен. Если выбран параметр **Запретить принудительно**, приложениям для Windows запрещается доступ к сообщениям и сотрудники вашей организации не могут это изменить. |
| *Конфиденциальность приложения | Разрешить приложениям для Windows доступ к данным о движении | По умолчанию для всех приложений: "Запретить принудительно" | Включен. Если выбран параметр **Запретить принудительно**, приложениям для Windows запрещается доступ к данным о движении и сотрудники вашей организации не могут это изменить. |
| *Конфиденциальность приложения | Разрешить приложениям для Windows получать доступ к уведомлениям | По умолчанию для всех приложений: "Запретить принудительно" | Включен. Если выбран параметр **Запретить принудительно**, приложениям для Windows запрещается доступ к уведомлениям и сотрудники вашей организации не могут это изменить. |
| *Конфиденциальность приложения | Разрешить приложениям для Windows доступ к задачам | По умолчанию для всех приложений: "Запретить принудительно" | Включен. Если выбран параметр **Запретить принудительно**, приложениям для Windows запрещается доступ к задачам и сотрудники вашей организации не могут это изменить. |
| *Конфиденциальность приложения | Предоставление приложениям для Windows доступа к календарю | По умолчанию для всех приложений: "Запретить принудительно" | Включен. Если выбран параметр **Запретить принудительно**, приложениям для Windows запрещается доступ к календарю и сотрудники вашей организации не могут это изменить. |
| *Конфиденциальность приложения | Предоставление приложениям для Windows доступа к камере | По умолчанию для всех приложений: "Запретить принудительно" | Включен. Если выбран параметр **Запретить принудительно**, приложениям для Windows запрещается доступ к камере и сотрудники вашей организации не могут это изменить. |
| *Конфиденциальность приложения | Предоставление приложениям для Windows доступа к микрофону | По умолчанию для всех приложений: "Запретить принудительно" | Включен. Если выбран параметр **Запретить принудительно**, приложениям для Windows запрещается доступ к микрофону и сотрудники вашей организации не могут это изменить. |
| *Конфиденциальность приложения | Предоставление приложениям для Windows доступа к устройствам | По умолчанию для всех приложений: "Запретить принудительно" | Включен. Если выбран параметр **Запретить принудительно**, приложениям для Windows запрещается доступ к доверенным устройствам и сотрудники вашей организации не могут это изменить. |
| *Конфиденциальность приложения | "Let Windows apps communicate with unpaired devices" (Разрешить приложениям для Windows взаимодействовать с несопряженными устройствами) | По умолчанию для всех приложений: "Запретить принудительно" | Включен. Если выбран параметр **Запретить принудительно**, приложениям для Windows запрещается взаимодействие с несопряженными беспроводными устройствами и сотрудники вашей организации не могут это изменить. |
| *Конфиденциальность приложения | "Let Windows apps access radios" (Разрешить приложениям для Windows доступ к радио) | По умолчанию для всех приложений: "Запретить принудительно" | Включен. Если выбран параметр **Запретить принудительно**, приложениям для Windows запрещается доступ для управления радио и сотрудники вашей организации не могут это изменить. |
| *Конфиденциальность приложения | Разрешить приложениям для Windows совершать телефонные звонки | По умолчанию для всех приложений: "Запретить принудительно" | Включен. Если выбран параметр **Запретить принудительно**, приложениям для Windows запрещается доступ к совершению звонков по телефону и сотрудники вашей организации не могут это изменить. |
| *Конфиденциальность приложения | Разрешить приложениям для Windows работать в фоновом режиме | По умолчанию для всех приложений: "Запретить принудительно" | Включен. Если выбран параметр **Запретить принудительно**, приложениям для Windows запрещается выполнение в фоновом режиме и сотрудники вашей организации не могут это изменить. |
| Политики автозапуска | Установка поведения по умолчанию для автозапуска | Не выполнять команды автозапуска | Включен |
| *Политики автозапуска | Отключить автозапуск |   | Включен. Если этот параметр политики включен, будет отключен автозапуск на приводах для компакт-дисков и съемных носителях или он будет отключен на всех дисках. |
| *Содержимое облака | Отключение советов по использованию Windows | Включен. Этот параметр политики отключает отображение советов Windows для пользователей. |
| *Содержимое облака | Выключение возможностей потребителя Microsoft | Включен. Если этот параметр политики включен, пользователи больше не увидят персонализированные рекомендации от корпорации Майкрософт и уведомления о своей учетной записи Майкрософт. |
| *Сборки для сбора данных и предварительные сборки | Разрешить телеметрию | 0 — безопасность [только для предприятий] | Включен. Значение "0" применяется только к устройствам под управлением выпусков "Корпоративная", "Для образовательных учреждений", "Интернет вещей" или Windows Server. |
| *Сборки для сбора данных и предварительные сборки | Запрет отображения уведомлений об отзывах |  | Включен |
| *Сборки для сбора данных и предварительные сборки | Переключение пользовательских элементов управления над сборками для предварительной оценки  |  | Отключен |
| Оптимизация доставки | Режим скачивания | Режим скачивания: простой (99) | 99 — простой режим скачивания без использования одноранговых клиентов. Оптимизация доставки означает скачивание только с помощью HTTP без попытки связаться с облачными службами оптимизации доставки. |
| Диспетчер окон рабочего стола |  Не разрешать вызов эргономичного пролистывания |  | Включен |
| Диспетчер окон рабочего стола |  Не разрешать анимацию окон |  | Включен |
| Диспетчер окон рабочего стола |  Использовать сплошной цвет для фона начального экрана |  | Включен |
| Пользовательский интерфейс границ |  Разрешить прокрутку от краев |  | Отключен |
| Пользовательский интерфейс границ |  Отключить полезные советы |  | Включен |
| Пользовательский интерфейс границ | Отключить отслеживание использования приложений |  | Включен |
| *Проводник |  Настройка фильтра SmartScreen Защитника Windows |  | Отключена. SmartScreen будет отключен для всех пользователей. Пользователи не будут предупреждены при попытке запуска подозрительных приложений из Интернета. ПРМЕЧАНИЕ. Если подключение к Интернету отсутствует, это помешает компьютерам обращаться к корпорации Майкрософт за сведениями SmartScreen. |
| Проводник |  Не показывать уведомление **установлено новое приложение** |  | Включен |
| *Поиск устройства |  Включение и выключение поиска устройства |  | Отключена. Когда параметр "Поиск устройства" отключен, устройство и его расположение не регистрируются и функция "Поиск устройства" не работает. Пользователь также не сможет просмотреть на своем устройстве, где в последний раз был использован активный дигитайзер. |
| Проводник | Отключить кэширование эскизов изображений |  | Включен |
| Проводник | Отключить отображение предыдущих поисковых запросов в поле поиска проводника |  | Включен |
| Проводник | Отключить кэширование эскизов в скрытых файлах thumbs.db |  | Включен |
| Обозреватель игр | Выключить загрузку сведений об игре |  | Включен |
| Обозреватель игр | Отключить обновления игр |  | Включен |
| Обозреватель игр | Не отслеживать время последнего сеанса игр в папке "Игры" |  | Включен |
| Домашняя группа | Запретить присоединение компьютера к домашней группе |  | Включен |
| *Internet Explorer | Разрешить службам Майкрософт предоставлять расширенные предложения, когда пользователь вводит текст в адресной строке |  | Отключена. Пользователи не получают расширенные предложения при вводе текста в адресной строке. Кроме того, пользователи не могут изменить параметр "Предложения". |
| Internet Explorer | Отключить периодическую проверку наличия обновлений программного обеспечения Internet Explorer |  | Включен |
| Internet Explorer | Отключить отображение заставки |  | Включен |
| Internet Explorer | Устанавливать новые версии Internet Explorer автоматически |  | Отключен |
| Internet Explorer | Запретить участие в программе улучшения качества программного обеспечения |  | Включен |
| Internet Explorer | Не выполнять мастер запуска в первый раз | Перейти сразу на домашнюю страницу | Включен |
| Internet Explorer | Задать рост процессов вкладок | Низкий | Включен |
| Internet Explorer | Задать действие по умолчанию для новой вкладки | Страница "Новая вкладка" | Включен |
| Internet Explorer | Отключить уведомления о производительности надстроек |  | Включен |
| *Internet Explorer | Отключить функцию автозаполнения для веб-адресов |  | Включен. Если этот параметр политики включен, пользователю не будут предлагаться варианты при вводе веб-адресов. Пользователь не сможет изменить параметры автозаполнения веб-адресов. |
| *Internet Explorer | Отключить функцию определения географического положения браузера |  | Включен. Если этот параметр политики включен, поддержка геолокации в браузерах будет отключена. |
| *Internet Explorer | Выключить повторное открытие последнего сеанса просмотра |  | Включен |
| Internet Explorer | Выключить повторное открытие последнего сеанса просмотра |  | Включен |
| *Internet Explorer | Включить функцию "Рекомендуемые сайты" |  | Отключена. Если вы отключите этот параметр политики, точки входа и функции, связанные с этим компонентом, будут отключены. |
| *Internet Explorer \\ Просмотр в режиме совместимости | Отключение функции просмотра в режиме совместимости |  | Включен. Если этот параметр политики включен, пользователь не может использовать кнопку "Просмотр в режиме совместимости" или управлять списком сайтов для просмотра в режиме совместимости. |
| *Internet Explorer \\ Панель управления браузером \\ вкладка "Дополнительно" | Показывать анимацию на веб-страницах |  | Отключен |
| *Internet Explorer \\ Панель управления браузером \\ вкладка "Дополнительно" | Воспроизводить видео на веб-страницах |  | Отключен |
| *Internet Explorer \\ Панель управления браузером \\ вкладка "Дополнительно" | Отключить пролистывание вперед с прогнозированием страниц |  | Включен. Корпорация Майкрософт анализирует журнал браузера, чтобы улучшить способ прогнозирования страниц при пролистывании вперед. Эта функция недоступна в классическом браузере Internet Explorer. Если вы включите этот параметр политики, пролистывание вперед с прогнозированием страниц отключится и следующая веб-страница не будет загружаться в фоновом режиме. |
| Internet Explorer \\ Параметры браузера \\ Дополнительные параметры \\ Просмотр | Выключение определения номера телефона |  | Включен |
| *Расположение и датчики | "Отключить расположение". |  | Включен. Если вы включите этот параметр политики, функция определения расположения будет отключена и все программы на этом компьютере не смогут использовать сведения о расположении, предоставляемые этой функцией. |
| Расположение и датчики | "Отключить датчики". |  | Включен |
| Расположение и датчики \\ Определитель местоположения Windows | Отключить определитель местоположения Windows |  | Включен |
| *Карты | Отключение автоматического скачивания и обновления данных карты |  | Включен. Если вы включите этот параметр, автоматическое скачивание и обновление данных карты будет отключено. |
| *Карты | Отключение незапрошенного сетевого трафика на странице параметров "Автономные карты" |  | Включен. Если вы включите этот параметр политики, компоненты, которые создают сетевой трафик на странице "Параметры автономных карт", будут отключены. Примечание. Это может привести к отключению всей страницы "Параметры". |
| *Сообщения | "Allow Message Service Cloud Sync" (Разрешить синхронизацию с облаком службы сообщений) |  | Отключена. Этот параметр политики позволяет выполнять резервное копирование и восстановление текстовых сообщений сотовой сети в облачных службах Майкрософт. |
| *Microsoft Edge | Разрешить предлагать варианты поиска в раскрывающемся списке адресной строки |  | Отключен |
| *Microsoft Edge | Разрешить обновления конфигурации для библиотеки книг |  | Отключена. Отключает списки совместимости в Microsoft Edge. |
| *Microsoft Edge | Разрешить список совместимости Майкрософт |  | Отключена. Если вы выключите этот параметр, список совместимости от корпорации Майкрософт не будет использоваться во время навигации в браузере. |
| *Microsoft Edge | Разрешение веб-содержимым на странице "Новая вкладка" |  | Отключена. Указывает Microsoft Edge открывать новую вкладку с пустым содержимым. |
| *Microsoft Edge | Настройка автозаполнения |  | Отключена. Отключает автозаполнение в адресной строке. |
| *Microsoft Edge | Настройка запрета на отслеживание |  | Включен. Если вы включите этот параметр, запросы Do Not Track будут всегда отправляться на веб-сайты, запрашивающие сведения для отслеживания. |
| *Microsoft Edge | Настройка диспетчера паролей |  | Отключена. Если вы отключите этот параметр, сотрудникам будет запрещено использовать диспетчер паролей для локального сохранения паролей. |
| *Microsoft Edge | Настройка вариантов поиска в адресной строке |  | Отключена. Для пользователей не отображаются варианты поиска в адресной строке Microsoft Edge. |
| *Microsoft Edge | Настройка начальных страниц |  | Включен. Если вы включите этот параметр, то сможете настроить одну или несколько начальных страниц. Если вы включите этот параметр, то вам придется указать URL-адреса страниц, разделяя страницы с помощью угловых скобок в следующем формате: <support.contoso.com><support.microsoft.com> Windows 10 версии 1703 или более поздней: Если вы не хотите отправлять трафик в корпорацию Майкрософт, то можете использовать значение <about:blank>, которое будет соблюдаться для устройств (присоединенных или не присоединенных к домену), если это единственный настроенный URL-адрес. |
| *Microsoft Edge | Настройка фильтра SmartScreen Защитника Windows |  | Отключена. Фильтр SmartScreen Защитника Windows отключен, и сотрудники не смогут его включить. ПРМЕЧАНИЕ. Рассмотрите этот параметр в среде. Если подключение к Интернету отсутствует, это помешает компьютерам обращаться к корпорации Майкрософт за сведениями SmartScreen. |
| *Microsoft Edge | "Prevent the First Run web page from opening on Microsoft Edge" (Запретить открытие веб-страницы первого запуска в Microsoft Edge) |  | Включен. Пользователи не увидят страницу первого запуска при первом открытии Microsoft Edge. |
| OneDrive | "Prevent OneDrive from generating network traffic until the user signs in to OneDrive" (Запретить OneDrive создавать сетевой трафик, пока пользователь не войдет в OneDrive) |  | Включен. Включите этот параметр, чтобы запретить клиенту синхронизации OneDrive (OneDrive.exe) создавать сетевой трафик (проверка наличия обновлений и т. д.), пока пользователь не войдет в OneDrive или не начнет синхронизацию файлов на локальном компьютере. |
| *OneDrive | Запрет использования OneDrive для хранения файлов |  | Включен. Если только OneDrive не используется в локальной или облачной среде. |
| OneDrive | По умолчанию сохранять документы в OneDrive |  | Отключена. Если только OneDrive не используется в локальной или облачной среде. |
| RSS-каналы | Запретить автоматическое обнаружение веб-каналов и веб-фрагментов |  | Включен |
|*RSS-каналы | Отключение синхронизации в фоновом режиме для веб-каналов и веб-фрагментов |  | Включен. Если вы включите этот параметр политики, возможность синхронизации веб-каналов и веб-фрагментов в фоновом режиме будет отключена. |
|*Поиск | Разрешение использовать Кортану |  | Отключена. Если Кортана отключена, пользователи по-прежнему смогут использовать поиск на устройстве. |
|Найти | Разрешить использование Кортаны на экране блокировки |   | Отключен |
|*Поиск | Разрешение средствам поиска и Кортане использовать информацию о расположении |  | Отключен |
|Найти | Запрет на поиск в Интернете |   | Включен |
|*Поиск | Запрет на поиск в Интернете и отображение результатов из Интернета в средстве поиска |  | Включен. Если этот параметр политики включен, запросы не будут выполняться в Интернете и результаты из Интернета не будут отображаться, когда пользователь выполняет запрос в службе поиска. |
|Найти | Не добавлять местоположения в формате UNC для индексирования с помощью панели управления |  | Включен |
|Найти | Отключить индексирование файлов в кэше автономных файлов |  | Включен |
|*Поиск | Определение информации, предоставляемой в средстве поиска анонимных сведений |  | Включен. Отправка сведений об использовании (но не журнала поиска) сведений об учетной записи Майкрософт или определенного расположения. |
|*Платформа защиты программного обеспечения | "Turn off KMS Client Online AVC Validation" (Отключить проверку AVC клиента KMS в Интернете) | Включен. Включите этот параметр, чтобы запретить компьютеру отправку в корпорацию Майкрософт данных о состоянии активации. |
|*Голосовые функции | Разрешить автоматическое обновление данных речи |  | Отключена. Периодическая проверка наличия обновленных моделей речи выполняться не будет. |
|*Store | Выключить автоматическую загрузку и установку обновлений |  | Включен. Если вы включите этот параметр, автоматическое скачивание и установка обновлений для приложений будет отключена. |
|*Store | "Turn off Automatic Download of updates on Win8 devices" (Отключить автоматическое скачивание обновлений на устройства с Windows 8) | Включен. Если вы включите этот параметр, автоматическое скачивание обновлений для приложений будет отключено. |
| Магазин | Выключить предложение обновления до последней версии Windows |  | Включен |
|*Синхронизация параметров | Не синхронизировать | "Разрешить пользователям включать синхронизацию" (не выбрано) | Включен. Если этот параметр политики включен, синхронизация параметров будет отключена и ни одна из групп синхронизации параметров не будет синхронизирована на этом устройстве. |
| Ввод текста | "Improve inking and typing recognition" (Улучшить распознавание рукописного ввода и ввода с клавиатуры) |  | Отключен |
| Антивирусная программа "Защитник Windows" \\ MAPS | Присоединиться к Microsoft MAPS |  | Отключена. Если отключить или не настроить этот параметр, вы не присоединитесь к Microsoft MAPS. |
| Антивирусная программа "Защитник Windows" \\ MAPS | Отправлять образцы файлов, если требуется дальнейший анализ | Не отправлять | Включен. Только если пользователь не дал согласие на отправку диагностических данных MAPS. |
| Антивирусная программа "Защитник Windows" \\ Отчеты | Отключить расширенные уведомления |  | Включен. Если вы включите этот параметр, антивирусная программа "Защитник Windows" не будет отображать расширенные уведомления в клиентах. |
| Антивирусная программа "Защитник Windows" \\ Обновление подписей | Определить порядок источников для загрузки обновлений определений | FileShares | Включен. Если вы включите этот параметр, взаимодействие с источниками обновлений определений будет осуществляться в указанном порядке. После успешного скачивания обновлений определений из одного указанного источника другие источники в списке пропускаются. |
| Отчеты об ошибках Windows | Автоматически отправлять дампы памяти для отчетов об ошибках, созданных ОС |  | Отключен |
| Отчеты об ошибках Windows | Отключение отчетов об ошибках Windows |  | Включен |
| Запись и трансляция игр Windows | Включает или отключает запись и трансляцию игр Windows | | Отключен |
| Установщик Windows | Задать максимальный размер кэша базисных файлов | 5 | Включен |
| Установщик Windows | Отключение создания контрольных точек восстановления системы |  | Включен |
| Почта Windows | "Turn off the communities feature" (Отключить функцию сообществ) |  | Включен |
| Проигрыватель Windows Media | Запрет отображения диалоговых окон первого запуска |  | Включен |
| Проигрыватель Windows Media | Запрет общего доступа к файлам мультимедиа |  | Включен |
| Центр мобильности Windows | Отключить центр мобильности Windows |  | Включен |
| Анализ стабильности Windows | Настройка поставщиков WMI стабильности системы |  | Отключен |
| Центр обновления Windows | Разрешить немедленную установку автоматических обновлений |  | Включен |
| Центр обновления Windows | Не подключаться к расположениям Центра обновления Windows в Интернете |  | Включен. При включении этой политики данные функции будут отключены, что может привести к тому, что подключение к общедоступным службам (например, к Магазину Windows) перестанет работать. ПРМЕЧАНИЕ. Эта политика применяется, только когда устройство настроено для подключения к службе обновления в интрасети с помощью политики "Указать размещение службы обновлений Майкрософт в интрасети". |
| Центр обновления Windows | Запретить использование любых средств Центра обновления Windows |   | Включен |
| *Центр обновления Windows \\ Центр обновления Windows для бизнеса | "Manage preview builds" (Управление предварительными сборками) | Настройка поведения при получении предварительных сборок: | Включен. Если выбрать параметр Disable preview builds (Отключить предварительные сборки), на устройстве будет запрещена установка предварительных сборок. Это не позволит пользователям принять участие в Программе предварительной оценки Windows, выбрав "Параметры > Обновление и безопасность".<br>Отключена. Отключает предварительные сборки. |
| *Центр обновления Windows \\ Центр обновления Windows для бизнеса | "Select when Preview Builds and Feature Updates are received" (Выберите, когда следует получать предварительные сборки и обновления компонентов) | Полугодовой канал<br>"Deferment" (Отсрочка): 365 дней<br>Начало приостановки: дд.мм.гггг. | Включен. Включите эту политику, чтобы указать уровень получаемых предварительных сборок или обновлений компонентов и условия их получения. |
| Центр обновления Windows \\ Центр обновления Windows для бизнеса | Выберите, когда следует получать исправления | 1. 30 дней.<br>2. "Начало приостановки получения исправлений": гггг-мм-дд | Включен |
| Параметры настраиваемой политики ограничения трафика Windows | "Prevent OneDrive from generating network traffic until the user signs in to OneDrive" (Запретить OneDrive создавать сетевой трафик, пока пользователь не войдет в OneDrive) |  | Включен. Включите этот параметр, если хотите запретить клиенту синхронизации OneDrive (OneDrive.exe) создавать сетевой трафик (проверка наличия обновлений и т. д.), пока пользователь не войдет в OneDrive или не начнет синхронизацию файлов на локальном компьютере. |
| Параметры настраиваемой политики ограничения трафика Windows | "Turn off Windows Defender Notifications" (Отключить уведомления Защитника Windows) |  | Включен. Если вы включите этот параметр, Защитник Windows не будет отправлять уведомления с критически важными сведениями о работоспособности и безопасности вашего устройства. |
| Политика локального компьютера \\ Конфигурация пользователя \\ Административные шаблоны  |  |  |
|Панель управления \\ Язык и региональные стандарты | Отключить прогнозирование текста при вводе |  | Включен |
| Рабочий стол | Не добавлять общие ресурсы из недавно использовавшихся документов в папку "Сетевые размещения" |  | Включен |
| Рабочий стол | Отключить сворачивание окна Aero Shake жестом мышью |  | Включен |
| Рабочий стол \\ Active Directory | Максимальный объем результатов поиска в Active Directory | 2500 | Включен |
| Панель задач и меню ''Пуск'' | Не разрешать закрепление значка Магазина на панели задач |  | Включен |
| Панель задач и меню ''Пуск'' | Запрет на отображение и отслеживание элементов в списках переходов из удаленных расположений |  | Включен |
| Панель задач и меню ''Пуск'' | Не использовать сопоставление ярлыков оболочки на основе поиска |  | Включен. Система не выполняет полный поиск на конечном диске. Она просто отображает сообщение о том, что файл не найден. |
| Панель задач и меню ''Пуск'' | "Remove the People Bar from the taskbar" (Удалить панель "Люди" с панели задач) |  | Включен. Значок "Люди" будет удален с панели задач; соответствующие переключатели параметров будут удалены со страницы "Параметры панели задач", и пользователи не смогут закреплять значок "Люди" на панели задач. |
| Панель задач и меню ''Пуск'' | Отключить всплывающие уведомления объявлений компонентов |  | Включен. Пользователи не могут закрепить приложение Store на панели задач. Если приложение Store уже закреплено на панели задач, оно будет удалено с панели задач при следующем входе. |
| Панель задач и меню ''Пуск'' | Отключить слежение за действиями пользователя |  | Включен |
| Панель задач и меню ''Пуск'' \\ Уведомления | Отключить всплывающие уведомления |  | Включен |
| Компоненты Windows \\ Содержимое облака | Отключение всех функций "Windows: интересное" |  | Включен |

### <a name="notes-about-network-connectivity-status-indicator"></a>Примечания об индикаторе работоспособности сетевых подключений

Приведенные выше параметры групповой политики включают в себя параметры, которые можно отключить, чтобы проверить, подключена ли система к Интернету. Если среда вообще не подключается к Интернету или делает это косвенно, можно задать параметр групповой политики для удаления значка сети с панели задач. Причина, по которой может потребоваться удалить значок сети с панели задач, следующая: если вы отключите проверки подключения к Интернету, на значке сети будет отображаться желтый флаг, хотя сеть может функционировать нормально. Если вы хотите удалить значок сети с помощью параметра групповой политики, его можно найти в следующем расположении:

| Параметр политики | Элемент | Вложенный элемент | Возможные значения и комментарии|
| -------------- | ---- | -------- | ---------------------------- |
| Центр обновления Windows или Центр обновления Windows для бизнеса. | Выберите, когда следует получать исправления | 1. 30 дней.<br>2. "Начало приостановки получения исправлений": гггг-мм-дд | Включен |
| Политика локального компьютера \\ Конфигурация пользователя \\ Административные шаблоны |  |  |  |
| Панель задач и меню ''Пуск'' | Удалить значок сети |  | Включен. Значок сети не отображается в области системных уведомлений. |

Дополнительные сведения об индикаторе работоспособности сетевых подключений (NCSI) см. в статьях [Управление конечными точками подключений для Windows 10 Корпоративная, версия 1903](/windows/privacy/manage-windows-1903-endpoints) и [Управление подключениями к службам Майкрософт из компонентов операционной системы Windows 10](/windows/privacy/manage-connections-from-windows-operating-system-components-to-microsoft-services).

### <a name="system-services"></a>Системные службы

Если вы собираетесь отключить системные службы для экономии ресурсов, внимательно следите за тем, чтобы выбранная служба не оказалась компонентом какой-либо другой службы. Обратите внимание, что некоторые службы отсутствуют в списке, потому что их нельзя отключить поддерживаемым способом.

Большинство из этих рекомендаций относятся к Windows Server 2016 с возможностями рабочего стола (дополнительные сведения см. в статье [Руководство по отключению системных служб в Windows Server 2016 с возможностями рабочего стола](../../security/windows-services/security-guidelines-for-disabling-system-services-in-windows-server.md)).

Для многих служб, которые обычно могут быть хорошими кандидатами для отключения, задан тип запуска службы вручную. Это означает, что служба не запустится автоматически и вообще не запустится, пока процесс или событие не активирует запрос к службе, которую вы планируете отключить. Службы, для которых уже задан тип запуска вручную, обычно здесь не указываются.

> [!NOTE]
> Вы можете перечислить запущенные службы с помощью этого примера кода PowerShell, выводя только короткое имя службы:

```powershell
 Get-Service | Where-Object {$_.Status -eq "Running"} | Select-Object -ExpandProperty Name
 ```

| Службы Windows | Элемент | Комментарии|
| -------------- | ---- | ---------------------------- |
| CDPUserService | Эта пользовательская служба используется для сценариев платформы подключенных устройств. | Это служба "на пользователя", поэтому *служба шаблонов* должна быть отключена. |
| Функциональные возможности для подключенных пользователей и телеметрия | Включает функции, которые поддерживают возможности приложений и подключенных пользователей. Кроме того, эта служба управляет сбором информации на основе событий и передачей диагностических сведений и сведений об использовании (используемых для улучшения работы и качества платформы Windows), когда в разделе "Обратная связь и диагностика" включены параметры диагностики и конфиденциальности использования. | Рекомендуется отключить, если сеть отключена. |
| Служба контактных данных | Индексирует данные контактов для их быстрого поиска. Если вы остановите или отключите эту службу, данные контактов могут отсутствовать в результатах поиска. | Это служба "на пользователя", поэтому *служба шаблонов* должна быть отключена. |
| Служба политики диагностики | Позволяет обнаруживать проблемы с компонентами Windows, выполнять их диагностику и устранять эти проблемы. Если эта служба остановлена, диагностика не будет работать. | |
| Диспетчер скачанных карт | Служба Windows для доступа приложений к скачанным картам. Эта служба запускается по требованию, когда приложение обращается к скачанным картам. Отключение этой службы сделает невозможным доступ приложений к картам. | |
| Служба географического положения | Отслеживает текущее расположение системы и управляет геозонами. | |
| Пользовательская служба GameDVR и вещания | Эта пользовательская служба используется для записи игр и вещания в прямом эфире. | Это служба "на пользователя", поэтому служба шаблонов должна быть отключена. |
| MessagingService | Служба, поддерживающая обмен текстовыми сообщениями и связанные функции. | Это служба "на пользователя", поэтому *служба шаблонов* должна быть отключена. |
| Оптимизация дисков | Помогает компьютеру работать более эффективно, оптимизируя файлы на дисках хранения. | Решения VDI обычно не получают преимуществ от оптимизации дисков. В них не используются традиционные диски. Часто это просто выделенное временное хранилище. |
| Superfetch | Поддерживает и улучшает производительность системы с течением времени. | Обычно не повышают производительность в среде VDI, особенно во временной ее реализации, учитывая, что состояние операционной системы отменяется при каждой перезагрузке. |
| Служба сенсорной клавиатуры и панели рукописного ввода | Обеспечивает функционирование пера и рукописного ввода для сенсорной клавиатуры и панели рукописного ввода. | |
| Отчеты об ошибках Windows | Разрешает отправку отчетов об ошибках в случае прекращения работы или реагирования программы на запросы, а также разрешает доставку имеющихся решений. Разрешает также создание журналов для служб диагностики и восстановления. Если эта служба остановлена, то могут не работать отчеты об ошибках и не отображаться результаты служб диагностики и восстановления. | При использовании среды VDI диагностика часто выполняется автономно, а не в основной рабочей среде. Кроме того, некоторые клиенты в любом случае отключают отчеты об ошибках Windows (WER). Для отчетов об ошибках Windows используется небольшой объем ресурсов, необходимых для различных задач, включая запись сбоев при установке устройств или обновлений. |
| Служба общего доступа к проигрывателю Windows Media по сети | Публикует библиотеки проигрывателя Windows Media на других сетевых проигрывателях и мультимедийных устройствах с помощью технологии Universal Plug and Play. | Не требуется, если только клиенты не используют совместно библиотеки проигрывателя Windows Media в сети. |
| Служба Windows Mobile Hotspot | Предоставляет возможность обмениваться мобильными данными с другим устройством. | |
| Поиск Windows | Обеспечивает индексацию содержимого, кэширование свойств и результаты поиска файлов, электронной почты и другого содержимого.                                                                    | Скорее всего не требуется, особенно при использовании временной среды VDI. |

#### <a name="per-user-services-in-windows"></a>Службы "на пользователя" в Windows

Службы "на пользователя" — это службы, которые создаются, когда пользователь входит в Windows или Windows Server, и останавливаются и удаляются, когда пользователь выходит из системы. Эти службы выполняются в контексте безопасности учетной записи пользователя. Это обеспечивает лучшее управление ресурсами, чем предыдущий подход, заключавшийся в выполнении таких служб в обозревателе, связанном с предварительно настроенной учетной записью, или в их выполнении в качестве задач.

[Per-user services in Windows 10 and Windows Server](/windows/application-management/per-user-services-in-windows) (Службы "на пользователя" в Windows 10 и Windows Server)

Если вы планируете изменить значения запуска службы, рекомендуется открыть запрос с повышенными правами CMD и запустить средство диспетчера служб Sc.exe. Дополнительные сведения об использовании Sc.exe см. в [этой статье](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2012-R2-and-2012/cc754599(v=ws.11)).

### <a name="scheduled-tasks"></a>Запланированные задачи

Как и с другими элементами в Windows, убедитесь, что элемент не требуется, прежде чем рассмотреть его отключение.

Ниже приведен список задач, которые выполняют оптимизации или сбор данных на компьютерах, которые сохраняют свое состояние между перезагрузками. Если задача виртуальной машины VDI выполняет перезагрузку и отменяет все изменения с момента последней загрузки, оптимизации, предназначенные для физических компьютеров, бесполезны.

Вы можете получить все текущие запланированные задачи, включая их описание, выполнив следующий код PowerShell:

```powershell
 Get-ScheduledTask | Select-Object -Property TaskPath,TaskName,State,Description
```

> [!NOTE]
> Есть несколько задач, которые невозможно отключить с помощью сценария, даже если вы работаете с повышенными правами. Рекомендуется не отключать задачи, которые нельзя отключить с помощью сценария.

Имя запланированной задачи:

- Сотовая сеть
- Consolidator
- Диагностика
- FamilySafetyMonitor
- FamilySafetyRefreshTask
- MaintenanceTasks
- MapsToastTask
- Совместимость
- Microsoft-Windows-DiskDiagnosticDataCollector
- MNO
- NotificationTask
- PerformRemediation
- ProactiveScan
- ProcessMemoryDiagnosticEvents
- ProgramDataUpdater
- Proxy (Прокси)
- QueueReporting
- RecommendedTroubleshootingScanner
- ReconcileFeatures
- ReconcileLanguageResources
- RefreshCache
- RegIdleBackup
- ResPriStaticDbSync
- RunFullMemoryDiagnostic
- ScanForUpdates
- ScanForUpdatesAsUser
- Назначенные
- ScheduledDefrag
- sihpostreboot
- SilentCleanup
- SmartRetry
- SpaceAgentTask
- SpaceManagerTask
- SpeechModelDownloadTask
- Sqm-Tasks
- SR
- StartComponentCleanup
- StartupAppTask
- StorageSense
- SyspartRepair
- Sysprep
- UninstallDeviceTask
- UpdateLibrary
- UpdateModelTask
- UsbCeip
- Usb-Notifications
- USO_UxBroker
- Wi-Fi
- WIM-Hash-Management
- WindowsActionDialog
- WinSAT
- Папки
- WsSwapAssessmentTask
- XblGameSaveTask

### <a name="apply-windows-and-other-updates"></a>Установка обновлений Windows и других обновлений

Устанавливайте обновления из Центра обновления Майкрософт или своих внутренних источников, включая сигнатуры Защитника Windows. Это подходящий момент, чтобы применить другие доступные обновления, в том числе для Microsoft Office, если он установлен, и другие обновления программного обеспечения. Если PowerShell останется в образе, вы можете скачать последнюю доступную справку для PowerShell, выполнив команду [Update-Help](/powershell/module/microsoft.powershell.core/update-help?view=powershell-7).

#### <a name="servicing-the-operating-system-and-apps"></a>Обслуживание операционной системы и приложений

В определенный момент при оптимизации образа следует применить доступные обновления Windows. В параметрах обновлений Windows 10 есть параметр, который может предоставлять дополнительные обновления:

![Дополнительные обновления](media/rds-vdi-recommendations-1909/servicing.png)

Это будет удобно в случае, если вы собираетесь установить в базовый образ приложения Майкрософт, например Microsoft Office. Таким образом Office будет находиться в актуальном состоянии, когда вы воспользуетесь этим образом. Существуют также обновления для платформы .NET и определенных компонентов сторонних производителей, таких как Adobe, которые можно устанавливать с помощью Центра обновления Windows.

Очень важным моментом для виртуальных машин временной среды VDI являются обновления системы безопасности, включая файлы определений для программного обеспечения безопасности. Эти обновления могут выпускаться один раз в день или чаще. Возможно, существует способ сохранять эти обновления, включая обновления для Защитника Windows и компонентов сторонних производителей.

Возможно, лучше всего разрешить обновление Защитника Windows даже во временной среде VDI. Обновления будут применяться практически в каждом сеансе входа в систему, но они занимают мало места и это не должно стать проблемой. Кроме того, виртуальная машина всегда будет в актуальном состоянии, так как будут применяться только последние доступные обновления. Это может быть верно и для файлов определений сторонних производителей.

> [!NOTE]
> Приложения Store (приложения UWP) обновляются с помощью Магазина приложений Windows. Современные версии Office, например Microsoft 365, выполняют обновление с помощью собственных механизмов, когда имеется прямое подключение к Интернету, или с помощью технологий управления, если такое подключение отсутствует.

### <a name="windows-system-startup-event-traces"></a>Трассировки событий запуска системы Windows

Windows по умолчанию собирает и хранит ограниченные диагностические данные. Это делается, чтобы обеспечить диагностику или записывать данные, если потребуются дополнительные действия по устранению неполадок. Данные автоматической трассировки системы можно найти в расположении, показанном на следующем рисунке:

![Трассировки системы](media/rds-vdi-recommendations-1909/system-traces.png)

Некоторые трассировки в разделах **Сеансы отслеживания событий** и **Сеансы отслеживания событий запуска** невозможно остановить и не следует останавливать. Другие трассировки, например WiFiSession, можно остановить. Чтобы остановить выполняемую трассировку, щелкните ее правой кнопкой мыши в разделе **Сеансы отслеживания событий** и выберите "Остановить". Чтобы запретить автоматический запуск трассировок вместе с системой, выполните приведенные ниже действия.

1. Щелкните папку **Сеансы отслеживания событий запуска**.

2. Найдите интересующую вас трассировку и дважды щелкните ее.

3. Щелкните вкладку **Сеансы отслеживания**.

4. Щелкните поле **Включено**, чтобы удалить флажок.

5. Нажмите кнопку **ОК**.

Ниже приведены некоторые трассировки системы, которые можно рассмотреть для отключения при использовании VDI.

| Название                    | Комментарий                       |
| ----------------------- | ----------------------------- |
| AppModel | Коллекция трассировок, одна из которых предназначена для телефона. |
| CloudExperienceHostOOBE | |
| DiagLog | |
| NtfsLog | |
| TileStore | |
| UBPM | |
| WiFiDriverIHVSession | Если не используется устройство Wi-Fi. |
| WiFiSession | |
| WinPhoneCritical | |

### <a name="windows-defender-optimization-with-vdi"></a>Оптимизация Защитника Windows с помощью VDI

Корпорация Майкрософт недавно опубликовала документацию по использованию Защитника Windows в среде VDI. Дополнительные сведения см. в статье [Deployment guide for Windows Defender Antivirus in a virtual desktop infrastructure (VDI) environment](/windows/security/threat-protection/windows-defender-antivirus/deployment-vdi-windows-defender-antivirus) (Руководство по развертыванию антивирусной программы "Защитник Windows" в инфраструктуре виртуальных рабочих столов).

В указанной выше статье приведены процедуры подготовки "золотого" образа VDI и обслуживания запущенных клиентов VDI. Чтобы сократить нагрузку на пропускную способность сети, когда компьютерам VDI необходимо обновить сигнатуры Защитника Windows, распределите перезагрузки по этапам и запланируйте их на нерабочее время, где это возможно. Обновления сигнатур Защитника Windows можно хранить во внутренних файловых ресурсах и, когда это целесообразно, эти файловые ресурсы можно размещать в тех же или в ближайших сетевых сегментах к виртуальным машинам VDI.

### <a name="client-network-performance-tuning-by-registry-settings"></a>Настройка производительности клиентской сети с помощью параметров реестра

Существуют некоторые параметры реестра, которые могут повысить производительность сети. Это особенно важно в средах, где в VDI или на компьютере выполняется рабочая нагрузка, которая в основном использует сеть. Мы рекомендуем использовать параметры, указанные в этом разделе, для повышения производительности сети, путем настройки дополнительной буферизации и кэширования таких объектов, как записи каталога.

>[!NOTE]
> Некоторые параметры в этом разделе доступны только в реестре и должны быть включены в базовый образ до его развертывания для использования в рабочей среде.

Следующие параметры описаны в [руководстве по обеспечению высокой производительности Windows Server 2016](../../administration/performance-tuning/index.md), опубликованном на сайте Microsoft.com группой по разработке продуктов Windows.

#### <a name="disablebandwidththrottling"></a>DisableBandwidthThrottling

`HKLM\System\CurrentControlSet\Services\LanmanWorkstation\Parameters\DisableBandwidthThrottling`

Применяется к Windows 10. Значение по умолчанию — **0**. По умолчанию перенаправитель SMB регулирует пропускную способность для сетевых подключений с высокой задержкой, что позволяет в некоторых случаях избежать превышения времени ожидания, связанного с сетью. Значение 1 для этого параметра реестра отключает такое регулирование, ускоряя передачу файлов через сетевые соединения с высокой задержкой. Попробуйте установить значение **1**.

#### <a name="fileinfocacheentriesmax"></a>FileInfoCacheEntriesMax

`HKLM\System\CurrentControlSet\Services\LanmanWorkstation\Parameters\FileInfoCacheEntriesMax` применяется к Windows 10. По умолчанию имеет значение **64**. Допускаются значения от 1 до 65536. Это значение используется для определения объема метаданных файла, которые могут кэшироваться клиентом. Увеличение значения позволяет сократить сетевой трафик и повысить производительность, если осуществляется доступ к большому числу файлов. Попробуйте увеличить это значение до **1024**.

#### <a name="directorycacheentriesmax"></a>DirectoryCacheEntriesMax

`HKLM\System\CurrentControlSet\Services\LanmanWorkstation\Parameters\DirectoryCacheEntriesMax`

Применяется к Windows 10. По умолчанию имеет значение **16**. Допускаются значения от 1 до 4096. Это значение используется для определения объема сведений о каталогах, которые могут кэшироваться клиентом. Увеличение значения позволяет сократить сетевой трафик и повысить производительность, если осуществляется доступ к большому числу каталогов. Попробуйте увеличить это значение до **1024**.

#### <a name="filenotfoundcacheentriesmax"></a>FileNotFoundCacheEntriesMax

`HKLM\System\CurrentControlSet\Services\LanmanWorkstation\Parameters\FileNotFoundCacheEntriesMax`

Применяется к Windows 10. По умолчанию имеет значение **128**. Допускаются значения от 1 до 65536. Это значение используется для определения объема сведений об именах файлов, которые могут кэшироваться клиентом. Увеличение значения позволяет сократить сетевой трафик и повысить производительность, если осуществляется доступ к большому числу имен файлов. Попробуйте увеличить это значение до **2048**.

#### <a name="dormantfilelimit"></a>DormantFileLimit

`HKLM\System\CurrentControlSet\Services\LanmanWorkstation\Parameters\DormantFileLimit`

Применяется к Windows 10. Значение по умолчанию — **1023**. Этот параметр определяет максимальное число файлов, которые нужно оставить открытыми в общем ресурсе после того, как приложение закроет файл. Если много тысяч клиентов подключается к серверам SMB, попробуйте уменьшить это значение до **256**.

Вы можете настроить многие из этих параметров SMB с помощью командлетов Windows PowerShell [Set-SmbClientConfiguration](/powershell/module/smbshare/set-smbclientconfiguration?view=win10-ps) и [Set-SmbServerConfiguration](/powershell/module/smbshare/set-smbserverconfiguration?view=win10-ps). Параметры реестра можно настроить с помощью Windows PowerShell, как показано в приведенном ниже примере.

```powershell
Set-ItemProperty -Path "HKLM:\SYSTEM\CurrentControlSet\Services\LanmanWorkstation\Parameters" RequireSecuritySignature -Value 0 -Force
```

Дополнительные параметры из руководства [Базовый план ограниченной функциональности трафика Windows](https://docs.microsoft.com/windows/privacy/manage-connections-from-windows-operating-system-components-to-microsoft-services).

Корпорация Майкрософт выпустила базовый план, созданный на основе тех же процедур, что и [базовые параметры безопасности Windows](https://docs.microsoft.com/windows/security/threat-protection/windows-security-baselines), для сред, которые либо не подключены к Интернету напрямую, либо для которых вы хотите сократить объем данных, отправляемых в корпорацию Майкрософт и другие службы.

Параметры базового плана ограниченной функциональности трафика Windows помечены звездочкой в таблице параметров групповой политики.

#### <a name="disk-cleanup-including-using-the-disk-cleanup-wizard"></a>Очистка диска (в том числе с помощью мастера очистки диска)

Очистка диска может быть особенно полезной для реализации золотого или главного образа VDI. После подготовки, обновления и настройки образа одной из последних задач является очистка диска. Существует встроенное средство "Мастер очистки диска", которое может помочь очистить большинство возможных областей, позволяющих сэкономить дисковое пространство. На виртуальной машине с очень небольшим количеством установленных, но полностью исправленных файлов, при очистке диска обычно можно освободить около 4 ГБ дискового пространства.

Ниже приведены рекомендации для различных задач очистки диска. Перед внедрением необходимо проверить их все.

1. Запустите мастер очистки диска (с повышенными правами) после установки всех обновлений. Включите категории "Оптимизация доставки" и "Очистка обновлений Windows". Этот процесс можно автоматизировать, используя командную строку `Cleanmgr.exe` с параметром `/SAGESET:11`. Параметр `/SAGESET` задает значения реестра, которые могут использоваться позже для автоматизации очистки диска, и использует все доступные параметры в мастере очистки диска.

    1. Выполнение `Cleanmgr.exe /SAGESET:11` на тестовой виртуальной машине с чистой установкой показывает, что только два параметра автоматической очистки диска включены по умолчанию:

        - "Загруженные файлы программ";

        - "Временные файлы Интернета".

    2. Если задать дополнительные параметры или сразу все параметры, они будут записаны в реестр в соответствии со значением параметра **Индекс**, указанным в предыдущей команде (`Cleanmgr.exe /SAGESET:11`). В этом случае мы будем использовать значение `11` в качестве индекса для последующей процедуры автоматической очистки диска.

    3. После запуска `Cleanmgr.exe /SAGESET:11` вы увидите несколько категорий параметров очистки диска. Вы можете проверить каждый параметр, а затем нажать кнопку **OК**. Мастер очистки диска исчезнет, а ваши параметры будут сохранены в реестре.

2. Очистите хранилище теневого копирования томов, если оно используется.

    - Откройте командную строку с повышенными привилегиями и выполните последовательно команды `vssadmin list shadows` и `vssadmin list shadowstorage`.

        Если выходные данные этих команд содержат сообщение **Удовлетворяющие запросу элементы не найдены**, то хранилище VSS не используется.

3. Очистите временные файлы и журналы. Откройте командную строку с повышенными привилегиями и выполните последовательно команды `Del C:\*.tmp /s`, `Del C:\Windows\Temp\.` и `Del %temp%\.`.

4. Удалите неиспользуемые профили в системе с помощью команды `wmic path win32_UserProfile where LocalPath="c:\users\<user>" Delete`.

### <a name="remove-onedrive-components"></a>Удаление компонентов OneDrive

Удаление OneDrive включает в себя удаление пакета и LNK-файлов. Следующий пример кода PowerShell включен в сценарии оптимизации VDI GitHub и может быть использован для удаления OneDrive из образа:

```azurecli
Get-Process -Name OneDrive | Stop-Process -Force -Confirm:$false
Get-Process -Name explorer | Stop-Process -Force -Confirm:$false
if (Test-Path "C:\\Windows\\System32\\OneDriveSetup.exe")`
    { Start-Process "C:\\Windows\\System32\\OneDriveSetup.exe"`
        -ArgumentList "/uninstall"`
        -Wait }
if (Test-Path "C:\\Windows\\SysWOW64\\OneDriveSetup.exe")`
    { Start-Process "C:\\Windows\\SysWOW64\\OneDriveSetup.exe"`
        -ArgumentList "/uninstall"`
        -Wait }
Remove-Item -Path "C:\\Windows\\ServiceProfiles\\LocalService\\AppData\\Roaming\\Microsoft\\Windows\\Start Menu\\Programs\\OneDrive.lnk" -Force
Remove-Item -Path "C:\\Windows\\ServiceProfiles\\NetworkService\\AppData\\Roaming\\Microsoft\\Windows\\Start Menu\\Programs\\OneDrive.lnk" -Force

# Remove the automatic start item for OneDrive from the default user profile registry hive

Start-Process C:\\Windows\\System32\\Reg.exe -ArgumentList "Load HKLM\\Temp C:\\Users\\Default\\NTUSER.DAT" -Wait
Start-Process C:\\Windows\\System32\\Reg.exe -ArgumentList "Delete HKLM\\Temp\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Run /v OneDriveSetup /f" -Wait
Start-Process C:\\Windows\\System32\\Reg.exe -ArgumentList "Unload HKLM\\Temp" -Wait Start-Process -FilePath C:\\Windows\\Explorer.exe -Wait
```

## <a name="turn-windows-update-back-on"></a>Повторное включение Центра обновления Windows

Если вы хотите снова включить Центр обновления Windows, как в случае постоянной среды VDI, выполните приведенные ниже действия.

- Повторно включите эти параметры групповой политики:

    - Политика локального компьютера \\ Конфигурация компьютера \\ Административные шаблоны \\ Система \\ Управление связью через Интернет \\ Параметры связи через Интернет.

        - Отключите доступ ко всем компонентам Центра обновления Windows (измените значение с **Включено** на **Не настроено**).

    - Политика локального компьютера \\ Конфигурация компьютера \\ Административные шаблоны \\ Компоненты Windows \\ Центр обновления Windows

        - Запретите доступ для использования всех компонентов Центра обновления Windows (измените значение с **Включено** на **Не настроено**).

        - Не подключайтесь к расположениям Центра обновления Windows в Интернете (измените значение с **Включено** на **Не настроено**).

    - Политика локального компьютера \\ Конфигурация компьютера \\ Административные шаблоны \\ Компоненты Windows \\ Центр обновления Windows \\ Центр обновления Windows для бизнеса

        - Выберите время получения исправлений (измените значение с "Включено" на "Не настроено").

    -   Политика локального компьютера \\ Конфигурация компьютера \\ Административные шаблоны \\ Компоненты Windows \\ Центр обновления Windows \\ Центр обновления Windows для бизнеса

        - Выберите время получения предварительных сборок и обновлений компонентов (измените значение с **Включено** на **Не настроено**).

-  Повторно включите службы.

    - Обновите службу оркестратора (измените значение с **Отключено** на **Автоматически (отложенный запуск)** ).

    - Измените указанные ниже параметры реестра Windows.

        - HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\WindowsUpdate\UpdatePolicy\PolicyState;

            - DeferQualityUpdates (измените с **1** на **0**);

        - HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\WindowsUpdate\UpdatePolicy\Settings;

            - PausedQualityDate (удалите любое имеющееся значение);

        - HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\Explorer\WAU;

            - Отключен

-  Повторно включите запланированные задачи:

    - библиотека планировщика заданий \\ Microsoft \\ Windows \\ InstallService \\ ScanForUpdates;

    - библиотека планировщика заданий \\ Microsoft \\ Windows \\ InstallService \\ ScanForUpdatesAsUser.

Перезагрузите устройство, чтобы все эти параметры вступили в силу. Если вы хотите отключить на этом устройстве предлагаемые обновления компонентов, последовательно выберите "Параметры" \\ "Центр обновления Windows" \\ "Дополнительные параметры". Выберите, когда устанавливать обновления, а затем установите параметр вручную. **Обновление компонентов включает в себя новые возможности и улучшения. Обновление может быть отложено на указанное число дней ненулевого значения, такого как 180, 365 и т. д.**

Если у вас есть вопросы или возникли сложности, касающиеся сведений в этом документе, обратитесь к группе поддержки учетных записей Майкрософт, изучите блог о Microsoft VDI, отправьте сообщение на форумы Майкрософт или сообщите о своих вопросах и проблемах в корпорацию Майкрософт.

### <a name="references"></a>Ссылки

- [What is VDI (virtual desktop infrastructure)?](https://www.citrix.com/glossary/vdi.html) (Что такое VDI (Инфраструктура виртуальных рабочих столов)?)

- [Sysprep fails after you remove or update Microsoft Store apps that include built-in Windows images](https://support.microsoft.com/help/2769827/sysprep-fails-after-you-remove-or-update-windows-store-apps-that-inclu) (Sysprep выходит из строя после удаления или обновления приложений Microsoft Store, включающих встроенные образы Windows)