---
title: Поддерживаемые конфигурации для служб удаленных рабочих столов
description: Предоставляет сведения о поддерживаемых конфигурациях для RDS в Windows Server 2016 и Windows Server 2019.
ms.prod: windows-server
ms.technology: remote-desktop-services
ms.author: elizapo
ms.date: 07/14/2020
ms.topic: article
ms.assetid: c925c7eb-6880-411f-8e59-bd0f57cc5fc3
author: lizap
manager: dongill
ms.openlocfilehash: 406112eae884b1e34d54eb18700c3ad28c3f52c6
ms.sourcegitcommit: f81aa22739d818382d314561dece59a9341dfb6f
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/15/2020
ms.locfileid: "86390081"
---
# <a name="supported-configurations-for-remote-desktop-services"></a>Поддерживаемые конфигурации для служб удаленных рабочих столов

> Область применения. Windows Server 2016, Windows Server 2019

Когда речь идет о поддерживаемых конфигурациях для сред служб удаленных рабочих столов, наибольшую озабоченность вызывает взаимодействие версий. Большинство сред включают несколько версий Windows Server — например, у вас может быть существующее развертывание Windows Server 2012 R2 RDS, но вы хотите обновить его до Windows Server 2016, чтобы воспользоваться преимуществами новых функций (таких как поддержка OpenGL\OpenCL, дискретное назначение устройств или локальные дисковые пространства). Тогда возникает вопрос, какие компоненты RDS могут работать с разными версиями и какие должны быть одинаковыми?

Исходя из этого, ниже перечислены основные рекомендации по поддерживаемым конфигурациям служб удаленных рабочих столов в Windows Server.

> [!NOTE]
> Обязательно ознакомьтесь с требованиями к системе для [Windows Server 2016](../../get-started/system-requirements.md) и [Windows Server 2019](../../get-started-19/sys-reqs-19.md).

## <a name="best-practices"></a>Рекомендации

- Используйте Windows Server 2019 для инфраструктуры удаленного рабочего стола — веб-доступа, шлюза, посредника подключений и сервера лицензирования. Windows Server 2019 обеспечивает обратную совместимость с этими компонентами. Это означает, что узел сеансов удаленного рабочего стола Windows Server 2016 или Windows Server 2012 R2 может подключаться к RDCB 2019, но не наоборот.

- Для узлов сеансов удаленных рабочих столов — все узлы сеансов в коллекции должны находиться на одном уровне, но вы можете иметь несколько коллекций. У вас может быть коллекция с узлами сеансов Windows Server 2016 и коллекция с узлами сеансов Windows Server 2019.

- Если вы обновляете свой узел сеансов удаленных рабочих столов до Windows Server 2019, также обновите сервер лицензирования. Помните, что сервер лицензирования версии 2019 может обрабатывать клиентские лицензии всех предыдущих версий Windows Server, вплоть до Windows Server 2003.

- Следуйте порядку обновления, рекомендованному в разделе [Обновление среды служб удаленных рабочих столов](upgrade-to-rds.md#flow-for-deployment-upgrades).

- Если вы создаете высокодоступную среду, все ваши посредники подключений должны быть на одном уровне ОС.

## <a name="rd-connection-brokers"></a>Посредники подключений к удаленному рабочему столу

Windows Server 2016 снимает ограничение на количество посредников подключений, которое может иметься в развертывании при использовании узлов сеансов удаленных рабочих столов (RDSH) и узлов виртуализации удаленных рабочих столов (RDVH), которые также работают под управлением Windows Server 2016. В следующей таблице показано, какие версии компонентов RDS работают с версиями посредника подключений R2 2016 и 2012 годов в высокодоступном развертывании с тремя или более посредниками подключений.

|3+ посредников подключений к удаленному рабочему столу|Узлы сеансов удаленных рабочих столов (RDSH) или узлы виртуализации удаленных рабочих столов (RDVH) 2019|Узлы сеансов удаленных рабочих столов (RDSH) или узлы виртуализации удаленных рабочих столов (RDVH) 2016|Узлы сеансов удаленных рабочих столов (RDSH) или узлы виртуализации удаленных рабочих столов (RDVH) 2012 R2|
|---|---|---|---|
 |Посредник подключений Windows Server 2019|Поддерживается|Поддерживается|Поддерживается|
 |Посредник подключений Windows Server 2016|Н/Д|Поддерживается|Поддерживается|
 |Посредник подключений Windows Server 2012 R2|Н/Д|Н/Д|Не поддерживается|

## <a name="support-for-graphics-processing-unit-gpu-acceleration"></a>Поддержка ускорения с помощью графического процессора (GPU)

Службы удаленных рабочих столов поддерживают системы, оснащенные графическими процессорами. Приложения, которым требуется GPU, можно использовать через удаленное подключение. Кроме того, можно включить ускорение отрисовки и кодирования с помощью GPU, чтобы повысить производительность и улучшить масштабируемость приложений.

Узлы сеансов служб удаленных рабочих столов и односеансовые клиентские операционные системы поддерживают возможности физических или виртуальных графических процессоров, представляемых в операционной системе различными способами. Сюда входят [размеры виртуальных машин, оптимизированных для Azure GPU](/en-us/azure/virtual-machines/windows/sizes-gpu); GPU, доступные для физического сервера RDSH; GPU, предоставляемые виртуальным машинам поддерживаемыми гипервизорами.

Чтобы узнать, что вам нужно, см. раздел [Какие технологии виртуализации графики подходят вам?](rds-graphics-virtualization.md). Узнайте подробные сведения о DDA в [Плане развертывания дискретного назначения устройств](../../virtualization/hyper-v/plan/plan-for-deploying-devices-using-discrete-device-assignment.md).

Поставщики GPU могут применять отдельную схему лицензирования для сценариев узлов сеансов удаленных рабочих столов или ограничивать использование GPU в серверных ОС. Ознакомьтесь с требованиями выбранного поставщика.

Графические процессоры, представленные гипервизорами или облачной платформой сторонних производителей, должны иметь драйверы с цифровой подписью WHQL, предоставляемые соответствующими поставщиками.

### <a name="remote-desktop-session-host-support-for-gpus"></a>Поддержка GPU узлами сеансов удаленных рабочих столов

В следующей таблице приведены сценарии, в которых возможно применение различных версий узлов RDSH.

|Функция|Windows Server 2008 R2|Windows Server 2012 R2|Windows Server 2016|Windows Server 2019|
|---|---|---|---|---|
|Использование аппаратного GPU для всех сеансов RDP|Нет|Да|Да|Да|
|Аппаратное кодирование H.264/AVC (если поддерживается GPU)|Нет|Нет|Да|Да|
|Балансировка нагрузки между несколькими GPU, предоставленными операционной системе|Нет|Нет|Нет|Да|
|Оптимизация кодирования H.264/AVC для минимизации использования пропускной способности|Нет|Нет|Нет|Да|
|Поддержка кодирования H.264/AVC для разрешения 4K|Нет|Нет|Нет|Да|

### <a name="vdi-support-for-gpus"></a>Поддержка VDI для GPU

В следующей таблице описывается поддержка применения GPU в клиентской операционной системе.

|Функция|Windows 7 с пакетом обновления 1 (SP1)|Windows 8.1|Windows 10|
|---|---|---|---|
|Использование аппаратного GPU для всех сеансов RDP|Нет|Да|Да|
|Аппаратное кодирование H.264/AVC (если поддерживается GPU)|Нет|Нет|Windows 10 (сборка 1703) и более поздние версии|
|Балансировка нагрузки между несколькими GPU, предоставленными операционной системе|Нет|Нет|Windows 10 (сборка 1803) и более поздние версии|
|Оптимизация кодирования H.264/AVC для минимизации использования пропускной способности|Нет|Нет|Windows 10 (сборка 1803) и более поздние версии|
|Поддержка кодирования H.264/AVC для разрешения 4K|Нет|Нет|Windows 10 (сборка 1803) и более поздние версии|

### <a name="remotefx-3d-video-adapter-vgpu-support"></a>Поддержка 3D-видеоадаптера RemoteFX (vGPU)

> [!NOTE]
> Из соображений безопасности процессор RemoteFX vGPU по умолчанию отключен для всех версий Windows, начиная с обновления для системы безопасности за 14 июля 2020 г. См. [KB 4570006](https://support.microsoft.com/help/4570006).

Службы удаленных рабочих столов поддерживают процессоры vGPU RemoteFX, когда виртуальная машина работает в качестве гостевой виртуальной машины Hyper-V в Windows Server 2012 R2 или Windows Server 2016. В следующих гостевых операционных системах поддерживается vGPU RemoteFX:

- Windows 7 с пакетом обновления 1 (SP1)
- Windows 8.1
- Windows 10 (сборка 1703) или более поздней версии
- Windows Server 2016 (только односеансовое развертывание)

### <a name="discrete-device-assignment-support"></a>Поддержка дискретного назначения устройств

Службы удаленных рабочих столов поддерживают физические GPU, предоставляемые с помощью дискретного назначения устройств с узлов Hyper-V Windows Server 2016 или Windows Server 2019. Дополнительные сведения см. в разделе [Планирование развертывания устройств с помощью дискретного назначения устройств](../../virtualization/hyper-v/plan/plan-for-deploying-devices-using-discrete-device-assignment.md).


## <a name="vdi-deployment--supported-guest-oses"></a>Развертывание VDI: поддерживаемые гостевые ОС

Серверы узлов виртуализации удаленных столов Windows Server 2016 и Windows Server 2019 поддерживают следующие гостевые ОС:

- Windows 10 Корпоративная
- Windows 8.1 Корпоративная
- Windows 7 SP1 Корпоративная

> [!NOTE]
> - Службы удаленных рабочих столов не поддерживают разнородные коллекции сеансов. Операционные системы всех виртуальных машин в коллекции должны быть одной версии.
> - Вы можете иметь отдельные однородные коллекции с разными версиями гостевой ОС на одном узле.
> - Узел Hyper-V, используемый для запуска виртуальных машин, должен иметь ту же версию операционной системы, что и узел Hyper-V, использованный для создания исходных шаблонов виртуальных машин.

## <a name="single-sign-on"></a>Единый вход

Службы удаленных рабочих столов Windows Server 2016 и Windows Server 2019 поддерживают два основных режима единого входа:

- В приложении (приложение удаленного рабочего стола в Windows, iOS, Android и Mac)
- Веб-служба SSO

Используя приложение удаленного рабочего стола, вы можете хранить учетные данные либо как часть информации о подключении ([Mac](clients/remote-desktop-mac.md)), либо как часть управляемых учетных записей ([iOS](clients/remote-desktop-ios.md#manage-your-user-accounts), [Android](clients/remote-desktop-android.md#manage-your-user-accounts), Windows ) безопасно с помощью механизмов, уникальных для каждой ОС.

Чтобы подключиться к рабочим столам и приложениям RemoteApp с помощью единого входа в клиенте подключения удаленных рабочих столов в Windows, необходимо подключиться к веб-странице удаленных рабочих столов через Internet Explorer. На стороне сервера требуются следующие параметры конфигурации. Другие конфигурации для единого входа для интернет-решений не поддерживаются.

- Веб-интерфейс удаленного рабочего стола установлен на проверку подлинности на основе форм (по умолчанию)
- Веб-интерфейс шлюза удаленного рабочего стола установлен на проверку пароля (по умолчанию)
- Для развертывания RDS установлено значение "Использовать учетные данные шлюза удаленных рабочих столов" (по умолчанию) в свойствах шлюза удаленных рабочих столов.

> [!NOTE]
> Из-за требуемых параметров конфигурации единый вход для интернет-решений не поддерживается смарт-картами. Пользователи, которые входят через смарт-карты, могут столкнуться с несколькими приглашениями на вход.

Дополнительные сведения о создании развертывания служб удаленных рабочих столов VDI см. в разделе [Поддерживаемые настройки безопасности в Windows 10 для служб удаленных рабочих столов VDI](rds-vdi-supported-config.md).

## <a name="using-remote-desktop-services-with-application-proxy-services"></a>Использование служб удаленных рабочих столов со службами прокси приложений

Вы можете использовать службы удаленных рабочих столов, кроме веб-клиента, с [прокси приложениями Azure AD](https://docs.microsoft.com/azure/active-directory/application-proxy-publish-remote-desktop). Службы удаленных рабочих столов не поддерживают использование [прокси-службы веб-приложения](https://docs.microsoft.com/windows-server/remote/remote-access/web-application-proxy/web-application-proxy-windows-server), включенного в Windows Server 2016 и более поздние версии.
