---
title: Клиент удаленного рабочего стола отключается и не может повторно подключиться к тому же сеансу
description: В этой статье описано, как устранить проблему, когда клиент удаленного рабочего стола отключается и не может повторно подключиться к тому же сеансу.
ms.reviewer: rklemen
ms.topic: troubleshooting
author: kaushika-msft
manager: dcscontentpm
ms.author: delhan
ms.date: 07/24/2019
ms.localizationpriority: medium
ms.openlocfilehash: 0d116c99b7c8b1daffc4ec58bd93414781eea321
ms.sourcegitcommit: 3a3d62f938322849f81ee9ec01186b3e7ab90fe0
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2020
ms.locfileid: "80857207"
---
# <a name="remote-desktop-client-disconnects-and-cant-reconnect-to-the-same-session"></a>Клиент Удаленного рабочего стола отключается и не может повторно подключиться к тому же сеансу

Когда клиент удаленного рабочего стола теряет подключение к Удаленному рабочему столу, ему не удается сразу же повторно подключиться. Пользователю отображается одно из таких сообщений об ошибке:

  - Клиенту не удалось подключиться к серверу терминалов из-за ошибки системы безопасности. Убедитесь, что вы вошли в сеть, и повторите попытку подключения.
  - Удаленный рабочий стол отключен. Из-за ошибки безопасности клиент не смог подключиться к удаленному компьютеру. Убедитесь в том, что вы вошли в сеть, и повторите попытку подключения к серверу.

При повторном подключении клиента Удаленных рабочих столов сервер RDSH подключает клиента к новому, а не исходному сеансу. Но при проверке состояния сервера RDSH сообщается, что исходный сеанс еще активен и не был отключен.

Чтобы устранить эту проблему, можете включить политику **Настроить интервал проверяемых на активность подключений** в папке групповой политики, выбрав **Конфигурация компьютера\\Административные шаблоны\\Компоненты Windows\\Службы удаленных рабочих столов\\Узел сеансов удаленных рабочих столов\\Подключения**. Если вы включите эту политику, нужно будет задать интервал проверки активности. Интервал проверки активности позволяет определить, как часто (в минутах) сервер проверяет состояние сеанса.

Эту проблему также можно устранить, изменив параметры аутентификации и настройки. Вы можете изменить их на уровне сервера или с помощью объектов групповой политики. Чтобы изменить параметры, выберите **Конфигурация компьютера\\Административные шаблоны\\Компоненты Windows\\Службы удаленных рабочих столов\\Узел сеансов удаленных рабочих столов\\Безопасность**.

1. Откройте на сервере узла сеансов Удаленных рабочих столов **соответствующее средство настройки**.
2. В области **Подключения** щелкните правой кнопкой мыши имя подключения и выберите **Свойства**.
3. В диалоговом окне **Свойства** для этого подключения на вкладке **Общие** в разделе **Безопасность** выберите метод защиты.
4. Выберите нужное значение для параметра **Уровень шифрования**. Можно выбрать значение **Низкий уровень**, **Совместимый с клиентом**, **Высокий уровень** или **FIPS-совместимый**.

> [!NOTE]  
>  - Если для обмена данными между клиентами и серверами RDSH требуется самый высокий уровень шифрования, используйте FIPS-совместимое шифрование.
>  - Любые параметры уровня шифрования, настроенные в групповой политике, переопределяют параметры, заданные с помощью средства настройки служб удаленных рабочих столов. Кроме того, если включить политику [Системная криптография: использовать FIPS-совместимые алгоритмы для шифрования, хэширования и подписывания](https://docs.microsoft.com/windows/security/threat-protection/security-policy-settings/system-cryptography-use-fips-compliant-algorithms-for-encryption-hashing-and-signing), она переопределит политику **Установить уровень шифрования для клиентских подключений**. Чтобы перейти к папке с системными средствами шифрования, выберите **Конфигурация компьютера\\Конфигурация Windows\\Параметры безопасности\\Локальные политики\\Параметры безопасности**.
>  - Измененный уровень шифрования вступает в силу при следующем входе пользователя. Если требуется несколько уровней шифрования на сервере, установите несколько сетевых адаптеров и настройте каждый из них в отдельности.
>  - Чтобы убедиться в наличии соответствующего закрытого ключа для сертификата, в средстве настройки служб удаленного рабочего стола щелкните правой кнопкой мыши имя подключения, для которого нужно проверить сертификат, выберите **Общие** и **Изменить**. Затем нажмите **Просмотреть сертификат**. Если вы перейдете на вкладку **Общие**, при наличии ключа должно отображаться сообщение "Есть закрытый ключ для этого сертификата". Эти сведения также можно просмотреть в оснастке диспетчера сертификатов.
>  - FIPS-совместимое шифрование (политика **Системная криптография: использовать FIPS-совместимые алгоритмы для шифрования, хэширования и подписывания** или параметр **FIPS-совместимый** в средстве настройки сервера Удаленных рабочих столов) предусматривает шифрование и расшифровку данных, передаваемых между клиентом и сервером, с использованием алгоритмов шифрования федерального стандарта обработки информации (FIPS) 140-1 и криптографических модулей от Майкрософт. Дополнительные сведения см. в статье [Проверка FIPS 140](https://docs.microsoft.com/windows/security/threat-protection/fips-140-validation).
>  - Если выбрать параметр **Высокий уровень**, для шифрования данных, передаваемых между клиентом и сервером, будет использоваться 128-битное шифрование.
>  - Если выбрать параметр **Совместимый с клиентом**, для шифрования данных, передаваемых между клиентом и сервером, будет использоваться ключ максимальной силы, поддерживаемой клиентом.
>  - Если же выбрать параметр **Низкий уровень**, для шифрования данных, передаваемых между клиентом и сервером, будет использоваться 56-битное шифрование.
