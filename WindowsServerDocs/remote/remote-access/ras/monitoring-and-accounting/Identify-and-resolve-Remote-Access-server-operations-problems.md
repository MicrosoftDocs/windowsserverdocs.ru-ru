---
title: Выявление и ликвидация сбоев в работе сервера удаленного доступа
description: Узнайте, как обнаруживать проблемы с работой сервера удаленного доступа, их основные причины и разрешение, необходимое для устранения проблем.
manager: brianlic
ms.topic: article
ms.assetid: 7ce84c9f-fd1f-4463-8fc7-d2f33344a2c9
ms.author: jgerend
author: JasonGerend
ms.date: 08/07/2020
ms.openlocfilehash: f378be3489791513a9f2e3bc79f232a17e6c3d2f
ms.sourcegitcommit: db4c35ebe56d561768d2a657da9e6d6a791457bd
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/04/2021
ms.locfileid: "101834195"
---
# <a name="identify-and-resolve-remote-access-server-operations-problems"></a>Выявление и ликвидация сбоев в работе сервера удаленного доступа

>Область применения. Windows Server (Semi-Annual Channel), Windows Server 2016

**Примечание.** Windows Server 2012 объединяет DirectAccess и службы маршрутизации и удаленного доступа (RRAS) в единую роль удаленного доступа.

Следующие процедуры используются для определения проблем с операциями сервера удаленного доступа, их основных причин и разрешения, необходимого для устранения проблем.

> [!NOTE]
> Для выполнения задач, описанных в этом разделе, необходимо войти в систему как член группы "Администраторы домена" или член группы "Администраторы" на каждом компьютере. Если вы не можете выполнить задачу, войдя в учетную запись, которая является членом группы "Администраторы", попробуйте выполнить задачу, войдя в учетную запись, которая является членом группы "Администраторы домена".

Этот раздел содержит сведения о выполнении следующих задач.

- Моделирование проблемы операций

- Выявление проблемных операций и выполнение корректирующих действий

- Восстановление службы поддержки IP-адресов

### <a name="simulate-an-operations-issue"></a><a name="BKMK_Simulate"></a>Моделирование проблемы операций

> [!CAUTION]
> Так как сервер удаленного доступа, вероятно, настроен правильно и в нем не возникли какие-либо проблемы, можно использовать следующую процедуру для имитации проблем с операциями. Если сервер в настоящее время обслуживает клиенты в рабочей среде, возможно, вы не хотите выполнять эти действия. Вы можете прочесть шаги, чтобы понять, как решить проблемы, которые могут возникнуть на сервере удаленного доступа в будущем.

Служба поддержки IP (IPHlpSvc) размещает технологии туннелирования IPv6 (например, IP-HTTPS, 6to4 или Teredo) и требуется для правильной работы сервера DirectAccess. Чтобы продемонстрировать проблемы имитации операций на сервере удаленного доступа, необходимо отключить сетевую службу (IPHlpSvc).

##### <a name="to-stop-the-ip-helper-service"></a>Чтобы отключить службу поддержки IP-адресов

1.  На **начальном** экране сервера удаленного доступа щелкните **Администрирование**, а затем дважды щелкните **службы**.

2.  В списке **служб** прокрутите вниз и щелкните правой кнопкой мыши **вспомогательный метод IP** и выберите команду " **Закрыть**".

### <a name="identify-the-operations-issue-and-take-corrective-action"></a><a name="BKMK_Identify"></a>Выявление проблемных операций и выполнение корректирующих действий
Отключение службы поддержки IP-адресов вызовет серьезную ошибку на сервере удаленного доступа. На панели мониторинга отображается состояние операций сервера и сведения о ней.

##### <a name="to-identify-the-details-and-take-corrective-action"></a>Для указания сведений и выполнения корректирующих действий

1.  В **диспетчере серверов** щелкните **Средства** и выберите пункт **Управление удаленным доступом**.

2.  Щелкните **ПАНЕЛЬ МОНИТОРИНГА**, чтобы открыть **Панель удаленного доступа** в **Консоли управления удаленным доступом**.

3.  Убедитесь, что сервер удаленного доступа выбран в левой области, а затем в средней области щелкните **состояние операции**.

4.  Вы увидите список компонентов с зеленым или красным значком, который указывает их рабочее состояние. Щелкните строку **IP-HTTPS** в списке. При выборе строки сведения об этой операции отображаются в области **сведений** следующим образом:

    **Ошибка**

    Служба вспомогательного приложения IP (IPHlpSvc) остановлена. DirectAccess может работать не так, как ожидалось. Служба поддержки IP-адресов обеспечивает туннельное подключение с помощью платформы подключения, технологий туннелирования IPv6 и IP-HTTPS.

    **Причины**

    1.  Служба поддержки IP-адресов остановлена.

    2.  Служба поддержки IP-адресов не отвечает.

    **Решение**

    1.  Чтобы убедиться, что служба запущена, введите в командной строке Windows PowerShell команду **Get-Service IpHlpSvc** .

    2.  Чтобы включить службу, введите команду **Start-Service IpHlpSvc** в командной строке Windows PowerShell с повышенными привилегиями.

    3.  Чтобы перезапустить службу, введите в командной строке Windows PowerShell с повышенными привилегиями команду **Restart-Service IpHlpSvc** .

### <a name="restore-the-ip-helper-service"></a><a name="BKMK_Restart"></a>Восстановление службы поддержки IP-адресов
Чтобы восстановить службу поддержки IP на сервере удаленного доступа, можно выполнить описанные выше действия по запуску или перезапуску службы. также можно использовать следующую процедуру, чтобы отменить процедуру, которая использовалась для имитации сбоя службы поддержки IP-адресов.

##### <a name="to-restart-the-ip-helper-service-on-the-remote-access-server"></a>Перезапуск службы поддержки IP на сервере удаленного доступа

1.  На **начальном** экране щелкните **Администрирование**, а затем дважды щелкните **службы**.

2.  В списке **служб** прокрутите вниз и щелкните правой кнопкой мыши **вспомогательный метод IP** и выберите пункт **запустить**.

![](../../../media/Identify-and-resolve-Remote-Access-server-operations-problems/PowerShellLogoSmall.gif)***<em>Эквивалентные команды</em> в Windows PowerShell Windows PowerShell***

Следующие командлеты Windows PowerShell выполняют ту же функцию, что и предыдущая процедура. Вводите каждый командлет в одной строке, несмотря на то, что здесь они могут отображаться разбитыми на несколько строк из-за ограничений форматирования.

```PowerShell
PS> Get-RemoteAccessHealth | Where-Object {$_.Component -eq "IP-HTTPS"} | Format-List -Property *
```
