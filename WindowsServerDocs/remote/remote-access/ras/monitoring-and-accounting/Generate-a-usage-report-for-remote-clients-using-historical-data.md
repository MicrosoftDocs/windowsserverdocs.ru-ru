---
title: Создание отчетов по использованию на основе зарегистрированных ранее данных для удаленных клиентов
description: Узнайте, как включить учет на сервере удаленного доступа, чтобы можно было создать отчет об использовании для удаленных клиентов, обращающихся к серверу.
manager: brianlic
ms.topic: article
ms.assetid: 0305467b-ce39-4532-a05a-2cc5ff946f55
ms.author: jgerend
author: JasonGerend
ms.date: 08/07/2020
ms.openlocfilehash: 81d735e8500b18f34c6ad723a5a664fc90aca8e1
ms.sourcegitcommit: db4c35ebe56d561768d2a657da9e6d6a791457bd
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/04/2021
ms.locfileid: "101832151"
---
# <a name="generate-a-usage-report-for-remote-clients-using-historical-data"></a>Создание отчетов по использованию на основе зарегистрированных ранее данных для удаленных клиентов

>Область применения. Windows Server (Semi-Annual Channel), Windows Server 2016

**Примечание.** Windows Server 2012 объединяет DirectAccess и службы маршрутизации и удаленного доступа (RRAS) в единую роль удаленного доступа.

Консоль управления на сервере удаленного доступа может использоваться для создания отчета об использовании для удаленных клиентов, обращающихся к серверу. Чтобы создать отчет об использовании для удаленных клиентов, сначала необходимо включить учет на сервере удаленного доступа. После создания отчета можно использовать панель мониторинга мониторинга, доступную в консоли управления на сервере удаленного доступа для просмотра статистики нагрузки на сервере.

> [!NOTE]
> Для выполнения задач, описанных в этом разделе, необходимо войти в систему как член группы "Администраторы домена" или член группы "Администраторы" на каждом компьютере. Если вы не можете выполнить задачу, войдя в учетную запись, которая является членом группы "Администраторы", попробуйте выполнить задачу, войдя в учетную запись, которая является членом группы "Администраторы домена".

#### <a name="to-enable-accounting-on-the-remote-access-server"></a>Включение учета на сервере удаленного доступа

1.  В **диспетчере серверов** щелкните **Средства** и выберите пункт **Управление удаленным доступом**.

2.  Щелкните **отчеты** , чтобы перейти к **отчетам удаленного доступа** в **консоли управления удаленным доступом**.

3.  Нажмите кнопку **Настройка учета** в области задач « **отчет об удаленном доступе** ».

4.  Установите флажок **использовать учетную запись в папке «Входящие»** , чтобы включить учет на сервере удаленного доступа.

5.  Нажмите кнопку **Применить** , чтобы включить конфигурацию учета на сервере, а затем нажмите кнопку **Закрыть** после того, как сервер успешно применит конфигурацию.

#### <a name="to-generate-the-usage-report"></a>Создание отчета об использовании

1.  В **диспетчере серверов** щелкните **Средства** и выберите пункт **Управление удаленным доступом**.

2.  Щелкните **отчеты** , чтобы перейти к **отчетам удаленного доступа** в **консоли управления удаленным доступом**.

3.  В средней области щелкните даты в календаре, чтобы выбрать **дату начала срока действия отчета:** и **дату окончания:**, а затем нажмите кнопку **создать отчет**.

4.  Вы увидите список пользователей, которые подключены к серверу удаленного доступа в течение выбранного времени и подробные статистические данные о них. Щелкните первую строку в списке. При выборе строки на панели предварительного просмотра отображается активность удаленных пользователей. Теперь перейдите на вкладку **Статистика загрузки сервера** в области просмотра, чтобы просмотреть хронологию нагрузки на сервер.

    Щелкните вкладку **Статистика загрузки сервера** в области просмотра, чтобы просмотреть хронологию нагрузки на сервер.

> [!NOTE]
> **Общие сведения о сеансах**
>
> Учетные данные удаленного доступа основаны на концепции **сеансов**. В отличие от **подключения**, **сеанс** однозначно ИДЕНТИФИЦИРУЕТСЯ сочетанием IP-адреса и имени пользователя удаленного клиента. Например, если туннель компьютера сформирован из удаленного клиента с именем КЛИЕНТ1, то сеанс будет создан и сохранен в базе данных учета. Когда пользователь с именем User1 подключается к этому клиенту через некоторое время (но туннель компьютера по-прежнему активен), сеанс записывается в отдельный сеанс. Различие между сеансами заключается в хранении различий между туннелем компьютера и пользовательским туннелем.

![](../../../media/Generate-a-usage-report-for-remote-clients-using-historical-data/PowerShellLogoSmall.gif)***<em>Эквивалентные команды</em> в Windows PowerShell Windows PowerShell***

Следующие командлеты Windows PowerShell выполняют ту же функцию, что и предыдущая процедура. Вводите каждый командлет в одной строке, несмотря на то, что здесь они могут отображаться разбитыми на несколько строк из-за ограничений форматирования.

В следующем скрипте измените диапазон дат, для которого требуется отчет, в параметре **-StartDateTime** и **-енддатетиме** .

```
PS> Get-RemoteAccessConnectionStatisticsSummary -StartDateTime "1 October 2010 00:00:00" -EndDateTime "14 October 2010 00:00:00"
Shows server load statistics.
PS> Get-RemoteAccessUserActivity -HostIPAddress 10.0.0.1 -StartDateTime "1 October 2010 00:00:00" -EndDateTime "14 October 2010 00:00:00"
```



