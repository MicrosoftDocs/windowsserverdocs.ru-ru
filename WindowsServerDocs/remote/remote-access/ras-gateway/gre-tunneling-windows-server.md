---
title: Туннелирование GRE в Windows Server 2016
description: В этом разделе можно использовать, чтобы узнать, какие обновления возможность туннель протоколом (GRE) для шлюза удаленного доступа в Windows Server 2016.
manager: brianlic
ms.prod: windows-server-threshold
ms.technology: networking-ras
ms.topic: article
ms.assetid: df2023bf-ba64-481e-b222-6f709edaa5c1
ms.author: pashort
author: shortpatti
ms.openlocfilehash: e0ec077ad5e97edd3db7d1dc4e662bb191f7885b
ms.sourcegitcommit: 0d0b32c8986ba7db9536e0b8648d4ddf9b03e452
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/17/2019
ms.locfileid: "59887865"
---
# <a name="gre-tunneling-in-windows-server-2016"></a>Туннелирование GRE в Windows Server 2016

>Область применения. Windows Server (полугодовой канал), Windows Server 2016

Windows Server 2016 содержит обновления для Generic Routing Encapsulation \(GRE\) туннеля возможность для шлюза RAS.  
  
GRE — это упрощенный протокол туннелирования, который может инкапсулировать разнообразные протоколы сетевого уровня внутри виртуальных каналов "точка-точка" в IP-сети. Реализация Майкрософт GRE может инкапсулировать IPv4 и IPv6.  
  
Туннели GRE полезны во многих сценариях так как:  
  
-   Они являются облегченными и RFC 2890 соответствует требованиям, делая с возможностью взаимодействия с различными устройствами поставщика  
  
-   Можно использовать протокол BGP \(BGP\) для динамической маршрутизации  
  
-   Можно настроить мультитенантный GRE шлюзов удаленного доступа для использования с программно-Конфигурируемую сеть \(SDN\)
  
-   System Center Virtual Machine Manager можно использовать для управления GRE\-основе шлюзов RAS
  
-   Вы можете достичь до 2,0 пропускной способности Гбит/с на виртуальной машине 6 ядер, настроенный в качестве шлюза RAS GRE
  
-   Один шлюз поддерживает несколько режимов подключения  
  
Туннели на основе GRE обеспечивают подключение между виртуальными сетями клиентов и внешними сетями. Так как протокол GRE является упрощенным и поддерживается большинством сетевых устройств, он становится идеальным выбором для туннелирования когда шифрование данных не требуется. 

Поддержка GRE в сеть — сеть (S2S) туннелях решает проблему перенаправления между виртуальными и внешними сетями клиента с помощью мультитенантного шлюза, как описано далее в этом разделе.  
  
Функция туннель GRE должна выполнить следующие требования:  
  
-   Поставщика услуг размещения должен иметь возможность создать виртуальные сети для пересылки без изменения конфигурации физическому коммутатору.  
  
-   Поставщика услуг размещения должен иметь возможность добавить подсети их внешние сети без изменения конфигурации физических коммутаторов внутри своей инфраструктуры.  
Функция туннель GRE обеспечивают реализацию или расширение несколько ключевых сценариев для размещения поставщиков услуг, использующих технологии Майкрософт для реализации программно-Конфигурируемую сеть в свои предложения службы.  
  
Ниже приведены примеры сценариев.  
  
-   [Доступ из виртуальных сетей клиентов для клиента физических сетях](#BKMK_Access)  
  
-   [Высокая скорость подключения](#BKMK_Speed)  
  
-   [Интеграция с изоляцией виртуальной локальной сети на основе](#BKMK_Integration)  
  
-   [Доступ к общим ресурсам](#BKMK_Shared)  
  
-   [Службы сторонних устройств для клиентов](#BKMK_thirdparty)  
  
## <a name="key-scenarios"></a>Основные сценарии

Ниже приведены основные сценарии, что GRE туннеля адреса функции.  
  
### <a name="BKMK_Access"></a>Доступ из виртуальных сетей клиентов для клиента физических сетях

Этот сценарий позволяет масштабируемый способ предоставления доступа из виртуальных сетей клиентов для клиента физической сетями, размещенными локально поставщика услуг размещения службы. Конечную точку туннеля GRE устанавливается на мультитенантный шлюз, другую конечную точку туннеля GRE устанавливается на устройстве независимых производителей в физической сети. 3-го уровня трафик передается между виртуальными машинами в виртуальной сети и устройств сторонних в физической сети.  
  
![Туннель GRE подключении поставщика услуг размещения физической сетью и виртуальной сети клиента](../../media/gre-tunneling-in-windows-server/GRE_.png)  
  
### <a name="BKMK_Speed"></a>Высокая скорость подключения

Этот сценарий позволяет масштабируемым способом для обеспечения высокой скорости подключения из локальной сети клиента к их виртуальной сети, которая находится в сети поставщика услуг размещения. Клиент подключается к сети поставщика услуг через многопротокольной коммутацией на основе метки, переключение (MPLS), где устанавливается туннель GRE между пограничного маршрутизатора поставщика услуг размещения службы и мультитенантный шлюз виртуальной сети клиента.  
  
![Туннель GRE подключение сети MPLS enterprise клиента и виртуальной сети клиента](../../media/gre-tunneling-in-windows-server/GRE-.png)  
  
### <a name="BKMK_Integration"></a>Интеграция с изоляцией виртуальной локальной сети на основе

Этот сценарий позволяет интегрировать изоляция виртуальных локальных СЕТЕЙ на базе виртуализации сети Hyper-V. Физической сети в сети поставщика услуг размещения содержит подсистему балансировки нагрузки, использующих изоляцию на основе виртуальной ЛС. Мультитенантный шлюз устанавливает GRE туннелей между балансировщиком нагрузки в физической сети и мультитенантного шлюза в виртуальной сети.  
  
Можно установить несколько туннелей между источником и назначением и ключ GRE используется для выявления различий между туннелями.  
  
![Несколько GRE туннелей подключение нескольких виртуальных сетей клиента](../../media/gre-tunneling-in-windows-server/GRE-VLANIsolation.png)  
  
### <a name="BKMK_Shared"></a>Доступ к общим ресурсам

Этот сценарий позволяет получить доступ к общим ресурсам на физической сети, которая находится в сети поставщика услуг размещения.  
  
Возможно, общая служба на сервере в физической сети, расположенный в сети поставщика услуг размещения, который вы хотите поделиться с несколькими виртуальными сетями клиента.  
  
Сетей клиентов с подсетями неперекрывающихся получить доступ к общей сети через туннель GRE. Один клиент шлюз направляет трафик между туннели GRE, тем самым маршрутизации пакетов в сети, соответствующего клиента.  
  
В этом случае шлюз одного клиента могут быть заменены независимых производителей аппаратного обеспечения.  
  
![Шлюз одним клиентом с помощью нескольких туннелей для подключения нескольких виртуальных сетей](../../media/gre-tunneling-in-windows-server/GRE-SharedResource.png)  
  
### <a name="BKMK_thirdparty"></a>Службы сторонних устройств для клиентов

Этот сценарий можно использовать для интеграции сторонних устройств (например, аппаратных подсистем балансировки нагрузки) о потоке трафика клиента виртуальной сети. Например трафик, исходящий из сайт предприятия передается через туннель S2S мультитенантного шлюза. Трафик направляется к подсистеме балансировки нагрузки через туннель GRE. Подсистема балансировки нагрузки направляет трафик по нескольким виртуальным машинам в виртуальной сети предприятия. То же самое выполняется и для другого клиента с потенциально перекрывающихся IP-адреса в виртуальных сетях. Сетевой трафик изолирована в подсистеме балансировки нагрузки, используя виртуальные локальные сети и применяется ко всем устройствам уровня 3, которые поддерживают виртуальные локальные сети.  
  
![Несколько GRE туннелей подключение нескольких виртуальных сетей для сторонних устройств](../../media/gre-tunneling-in-windows-server/GREThirdParty.png)  
  
## <a name="configuration-and-deployment"></a>Настройка и развертывание

Туннель GRE указывается в виде дополнительные протоколы в интерфейсе S2S. Она реализуется таким же образом, как туннель IPSec S2S, описанные в следующей записи сети: [Мультитенантные-сайтами (S2S) VPN-шлюз с Windows Server 2012 R2](https://blogs.technet.com/b/networking/archive/2013/09/29/multi-tenant-site-to-site-s2s-vpn-gateway-with-windows-server-2012-r2.aspx)  
  
В следующем разделе пример, который развертывает шлюзов, включая шлюзы туннель GRE:  
  
[Развертывание инфраструктуры программно-определяемой сети с помощью сценариев](../../../networking/sdn/deploy/Deploy-a-Software-Defined-Network-infrastructure-using-scripts.md)
  
## <a name="more-information"></a>Дополнительные сведения

Дополнительные сведения о развертывании S2S шлюзов см. в разделах:  
  
-   [Шлюз RAS](RAS-Gateway.md)  
  
-   [Протокола пограничного шлюза &#40;BGP&#41;](../bgp/Border-Gateway-Protocol-BGP.md)  
  
-   [Новые функции! Руководство для развертывания Windows Server 2012 R2 RAS Мультитенантного шлюза](https://blogs.technet.com/b/wsnetdoc/archive/2014/03/26/new-windows-server-2012-r2-RAS-multitenant-gateway-deployment-guide.aspx)  
  
-   [Развернуть протокол BGP (BGP) с помощью Мультитенантного шлюза RAS](https://blogs.technet.com/b/wsnetdoc/archive/2014/04/03/deploy-border-gateway-protocol-bgp-with-the-RAS-multitenant-gateway.aspx)  
  


