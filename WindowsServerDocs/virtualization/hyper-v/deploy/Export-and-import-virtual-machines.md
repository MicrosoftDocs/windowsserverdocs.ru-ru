---
title: Экспорт и импорт виртуальных машин
description: Показано, как, экспорт и импорт виртуальных машин с помощью диспетчера Hyper-V или Windows PowerShell.
ms.prod: windows-server-threshold
author: KBDAzure
ms.author: kathydav
manager: dongill
ms.technology: compute-hyper-v
ms.date: 12/13/2016
ms.topic: article
ms.assetid: 7fd996f5-1ea9-4b16-9776-85fb39a3aa34
ms.openlocfilehash: b326fe8d7ff05ba73fc94225fa38921b42eb3fc6
ms.sourcegitcommit: 0d0b32c8986ba7db9536e0b8648d4ddf9b03e452
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/17/2019
ms.locfileid: "59844325"
---
>Область применения. Windows 10, Windows Server 2016, Microsoft Hyper-V Server 2016, Windows Server 2019 г., Microsoft Hyper-V Server 2019 г.

# <a name="export-and-import-virtual-machines"></a>Экспорт и импорт виртуальных машин

В этой статье показано, как экспортировать и импортировать виртуальную машину, который является быстрый способ переместить или скопировать их. В этой статье также рассматриваются некоторые из вариантов, чтобы сделать при выполнении экспорта или импорта.

## <a name="export-a-virtual-machine"></a>Экспорт виртуальной машины

Экспорт объединяет все необходимые файлы в один блок--файлы виртуального жесткого диска, файлов конфигурации виртуальных машин и файлы контрольных точек. Это можно сделать на виртуальной машине, который находится в состоянии либо запущена или остановлена.

### <a name="using-hyper-v-manager"></a>Использование диспетчера Hyper-V

Чтобы экспортировать виртуальную машину:

1. В диспетчере Hyper-V, щелкните правой кнопкой мыши виртуальную машину и выберите **Экспорт**.

2. Выберите место для сохранения экспортированных файлов и нажмите кнопку **Экспорт**.

После завершения экспорта можно увидеть все экспортированные файлы в указанном расположении.

### <a name="using-powershell"></a>Использование PowerShell

Откройте сеанс от имени администратора и выполните команду следующим образом, после замены \<имя виртуальной машины\> и \<путь\>:

```powershell
Export-VM -Name \<vm name\> -Path \<path\>
```

Дополнительные сведения см. в разделе [Export-VM](https://docs.microsoft.com/powershell/module/hyper-v/export-vm).

## <a name="import-a-virtual-machine"></a>Импорт виртуальной машины 

При импорте виртуальной машины она регистрируется на узле Hyper-V. Можно импортировать обратно в узел, то есть новый узел. Если вы импортируете на том же узле, не нужно экспортировать виртуальную машину, во-первых, поскольку Hyper-V пытается воссоздать виртуальную машину из доступных файлов. При импорте виртуальной машины регистрирует его, он может использоваться на узле Hyper-V.

Мастер импорта виртуальной машины также поможет устранить проблемы с совместимостью, которые могут существовать при переходе с одного узла на другой. Это часто различия в физическим оборудованием, таким как память, виртуальными коммутаторами и виртуальными процессорами.

### <a name="import-using-hyper-v-manager"></a>Импорт с помощью диспетчера Hyper-V

Чтобы импортировать виртуальную машину:

1. Из **действия** меню в диспетчере Hyper-V, щелкните **Импорт виртуальной машины**.

2. Нажмите кнопку **Далее**.

3. Выберите папку, содержащую экспортированные файлы и нажмите кнопку **Далее**.

4. Выберите виртуальную машину для импорта.

5. Выберите тип импорта и нажмите кнопку **Далее**. (Описание, см. в разделе [импорт типов](#import-types)ниже.)

6. Нажмите кнопку **Готово**.

### <a name="import-using-powershell"></a>Импорт с помощью PowerShell

Используйте **Import-VM** командлета, в следующем примере для типа импорта, которое требуется. Описания типов, см. в разделе [импорт типов](#import-types)ниже. 

#### <a name="register-in-place"></a>Регистрация на месте

Этот тип импорта использует файлы, где они хранятся во время импорта и сохраняет идентификатор виртуальной машины. Команду ниже показан пример файла импорта. Выполните аналогичные команды собственными значениями.

```powershell
Import-VM -Path 'C:\<vm export path>\2B91FEB3-F1E0-4FFF-B8BE-29CED892A95A.vmcx' 
```

#### <a name="restore"></a>Восстановление

Чтобы импортировать виртуальную машину, указав собственный путь для файлов виртуальной машины, выполните следующую команду, заменяя примеры собственными значениями:

```powershell
Import-VM -Path 'C:\<vm export path>\2B91FEB3-F1E0-4FFF-B8BE-29CED892A95A.vmcx' -Copy -VhdDestinationPath 'D:\Virtual Machines\WIN10DOC' -VirtualMachinePath 'D:\Virtual Machines\WIN10DOC'
```

#### <a name="import-as-a-copy"></a>Импортировать в качестве копии

Чтобы завершить импорт копирования и переместить файлы виртуальной машины в расположение по умолчанию Hyper-V, выполните следующую команду, заменяя примеры собственными значениями:

``` PowerShell
Import-VM -Path 'C:\<vm export path>\2B91FEB3-F1E0-4FFF-B8BE-29CED892A95A.vmcx' -Copy -GenerateNewId
```

Дополнительные сведения см. в разделе [Import-VM](https://docs.microsoft.com/powershell/module/hyper-v/import-vm).

### <a name="import-types"></a>Импорт типов

Hyper-V предоставляет три типа импорта:

- **Регистрация на месте** — этот тип предполагается, что файлы экспорта находятся в расположении, где можно хранить и запуска виртуальной машины. Импортированной виртуальной машины имеет тот же идентификатор, как и во время экспорта. Из-за этого Если виртуальная машина уже зарегистрирована с помощью Hyper-V, ее необходимо удалить перед works импорта. После завершения импорта файлы экспорта переходят выполнения состояние файлов и их нельзя удалить.

- **Восстановить виртуальную машину** — восстановить виртуальную машину в расположение, можно выбрать, или используйте значение по умолчанию для Hyper-V. Этот тип импорта создается копия экспортированных файлов и перемещает их в выбранном расположении. При импорте идентификатор виртуальной машины такой же, как и при экспорте. Из-за этого Если виртуальная машина уже запущена в Hyper-V, ее необходимо удалить перед выполнением импорта. После завершения импорта экспортированные файлы остаются без изменений и может быть удален или импортировать снова.

- **Копировать виртуальную машину** – это похоже на тип восстановления тем, что вы выбираете расположение для файлов. Разница в том, что импортированную виртуальную машину имеет новый уникальный идентификатор, это означает, что можно импортировать виртуальную машину на том же узле несколько раз.

