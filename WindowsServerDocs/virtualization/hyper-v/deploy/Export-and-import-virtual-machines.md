---
title: Экспорт и импорт виртуальных машин
description: Здесь показано, как экспортировать и импортировать виртуальные машины с помощью диспетчера Hyper-V или Windows PowerShell.
ms.prod: windows-server
author: KBDAzure
ms.author: kathydav
manager: dongill
ms.technology: compute-hyper-v
ms.date: 12/13/2016
ms.topic: article
ms.assetid: 7fd996f5-1ea9-4b16-9776-85fb39a3aa34
ms.openlocfilehash: 6e130ee8a040cd5b56908d77d91bf196a60de6f7
ms.sourcegitcommit: 6aff3d88ff22ea141a6ea6572a5ad8dd6321f199
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/27/2019
ms.locfileid: "71392974"
---
>Область применения: Windows 10, Windows Server 2016, Microsoft Hyper-V Server 2016, Windows Server 2019, Microsoft Hyper-V Server 2019

# <a name="export-and-import-virtual-machines"></a>Экспорт и импорт виртуальных машин

В этой статье показано, как экспортировать и импортировать виртуальную машину, что является быстрым способом их перемещения или копирования. В этой статье также обсуждаются некоторые варианты, которые необходимо выполнить при экспорте или импорте.

## <a name="export-a-virtual-machine"></a>Экспорт виртуальной машины

Экспорт собирает все необходимые файлы в одну единицу — файлы виртуального жесткого диска, файлы конфигурации виртуальной машины и файлы контрольных точек. Это можно сделать на виртуальной машине, которая находится в запущенном или остановленном состоянии.

### <a name="using-hyper-v-manager"></a>Использование диспетчера Hyper-V

Чтобы экспортировать виртуальную машину:

1. В диспетчере Hyper-V щелкните правой кнопкой мыши виртуальную машину и выберите пункт **Экспорт**.

2. Выберите место хранения экспортируемых файлов и нажмите кнопку **Экспорт**.

После завершения экспорта можно просмотреть все экспортированные файлы в расположении экспорта.

### <a name="using-powershell"></a>Использование PowerShell

Откройте сеанс от имени администратора и выполните команду, подобную следующей, после замены имени \<виртуальной машины\> и пути \<\>:

```powershell
Export-VM -Name \<vm name\> -Path \<path\>
```

Дополнительные сведения см. в разделе [Export-VM](https://docs.microsoft.com/powershell/module/hyper-v/export-vm).

## <a name="import-a-virtual-machine"></a>Импорт виртуальной машины 

При импорте виртуальной машины она регистрируется на узле Hyper-V. Вы можете выполнить импорт в узел или на новый узел. При импорте в тот же узел вам не нужно сначала экспортировать виртуальную машину, так как Hyper-V пытается повторно создать виртуальную машину из доступных файлов. Импорт виртуальной машины регистрирует ее, чтобы ее можно было использовать на узле Hyper-V.

Мастер импорта виртуальных машин также помогает устранить несовместимости, которые могут существовать при переходе с одного узла на другой. Обычно это различие в физическом оборудовании, таком как память, виртуальные коммутаторы и виртуальные процессоры.

### <a name="import-using-hyper-v-manager"></a>Импорт с помощью диспетчера Hyper-V

Чтобы импортировать виртуальную машину, выполните следующие действия.

1. В меню **действия** в диспетчере Hyper-V щелкните **Импорт виртуальной машины**.

2. Нажмите кнопку **Далее**.

3. Выберите папку, содержащую экспортированные файлы, и нажмите кнопку **Далее**.

4. Выберите виртуальную машину для импорта.

5. Выберите тип импорта и нажмите кнопку **Далее**. (Описание см. в разделе [типы импорта](#import-types)ниже.)

6. Нажмите кнопку **Готово**.

### <a name="import-using-powershell"></a>Импорт с помощью PowerShell

Используйте командлет **Import-VM** , следуя примеру для требуемого типа импорта. Описание типов см. в разделе [типы импорта](#import-types)ниже. 

#### <a name="register-in-place"></a>Регистрация на месте

Этот тип импорта использует файлы, где они хранятся во время импорта, и хранит идентификатор виртуальной машины. Следующая команда показывает пример файла импорта. Выполните аналогичную команду со своими собственными значениями.

```powershell
Import-VM -Path 'C:\<vm export path>\2B91FEB3-F1E0-4FFF-B8BE-29CED892A95A.vmcx' 
```

#### <a name="restore"></a>Восстановление

Чтобы импортировать виртуальную машину, указав собственный путь к файлам виртуальной машины, выполните команду, подобную следующей, заменив примеры значениями.

```powershell
Import-VM -Path 'C:\<vm export path>\2B91FEB3-F1E0-4FFF-B8BE-29CED892A95A.vmcx' -Copy -VhdDestinationPath 'D:\Virtual Machines\WIN10DOC' -VirtualMachinePath 'D:\Virtual Machines\WIN10DOC'
```

#### <a name="import-as-a-copy"></a>Импортировать как копию

Чтобы завершить импорт и переместить файлы виртуальной машины в расположение Hyper-V по умолчанию, выполните команду, подобную следующей, заменив примеры значениями.

``` PowerShell
Import-VM -Path 'C:\<vm export path>\2B91FEB3-F1E0-4FFF-B8BE-29CED892A95A.vmcx' -Copy -GenerateNewId
```

Дополнительные сведения см. в статье [Импорт-виртуальная машина](https://docs.microsoft.com/powershell/module/hyper-v/import-vm).

### <a name="import-types"></a>Типы импорта

Hyper-V предлагает три типа импорта:

- **Регистрация на месте** — этот тип предполагает, что файлы экспорта находятся в расположении, где вы храните и запускаете виртуальную машину. Импортированная виртуальная машина имеет тот же идентификатор, что и во время экспорта. Поэтому, если виртуальная машина уже зарегистрирована в Hyper-V, ее необходимо удалить перед тем, как будет работать импорт. После завершения импорта файлы экспорта становятся файлами выполняющегося состояния и не могут быть удалены.

- **Восстановите виртуальную машину** . Восстановите виртуальную машину в выбранное расположение или используйте по умолчанию Hyper-V. Этот тип импорта создает копию экспортированных файлов и перемещает их в выбранное расположение. При импорте идентификатор виртуальной машины такой же, как и при экспорте. Поэтому, если виртуальная машина уже запущена в Hyper-V, ее необходимо удалить перед завершением импорта. После завершения импорта экспортированные файлы остаются неизменными и могут быть удалены или импортированы снова.

- **Копировать виртуальную машину** — аналогично типу восстановления в, в котором выбирается расположение для файлов. Разница заключается в том, что импортированная виртуальная машина имеет новый уникальный идентификатор. Это означает, что виртуальную машину можно импортировать на один узел несколько раз.

