---
title: Использование динамической миграции без отказоустойчивой кластеризации для перемещения виртуальной машины
description: Предоставляет необходимые условия и инструкции по выполнению динамической миграции в автономной среде.
ms.prod: windows-server-threshold
ms.service: na
manager: dongill
ms.technology: compute-hyper-v
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: 75c32e42-97f7-48df-aac9-1d82d34825e1
author: KBDAzure
ms.author: kathydav
ms.date: 01/17/2017
ms.openlocfilehash: a33912e09d664296f6eda964c40177353718d49c
ms.sourcegitcommit: 0d0b32c8986ba7db9536e0b8648d4ddf9b03e452
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/17/2019
ms.locfileid: "59851545"
---
# <a name="use-live-migration-without-failover-clustering-to-move-a-virtual-machine"></a>Использование динамической миграции без отказоустойчивой кластеризации для перемещения виртуальной машины

>Область применения. Windows Server 2016

В этой статье показано, как переместить виртуальную машину, выполнив динамической миграции без использования отказоустойчивой кластеризации. Динамическая миграция перемещает работающие виртуальные машины между узлами Hyper-V без заметного простоя.   
  
Чтобы иметь возможность сделать это, вам потребуется:   

- Учетная запись пользователя, который является членом локальной группы администраторов Hyper-V или в группу администраторов на исходном и конечном компьютерах. 
  
- Роль Hyper-V в Windows Server 2016 или Windows Server 2012 R2 устанавливается на исходном и конечном серверах и настроить для динамической миграции. Можно выполнить динамическую миграцию между узлами под управлением Windows Server 2016 и Windows Server 2012 R2, если виртуальная машина по крайней мере версии 5. <br>Инструкции по обновлению версии, см. в разделе [обновление версии виртуальной машины в Hyper-V в Windows 10 или Windows Server 2016](..\deploy\Upgrade-virtual-machine-version-in-Hyper-V-on-Windows-or-Windows-Server.md). Инструкции по установке см. в разделе [Настройка узлов для динамической миграции](../deploy/Set-up-hosts-for-live-migration-without-Failover-Clustering.md). 
  
- Средства управления Hyper-V, установленных на компьютере под управлением Windows Server 2016 или Windows 10, если средства устанавливаются на сервере источника или назначения и вы будете запускать их оттуда.  
   
## <a name="BKMK_Step3"></a>Перемещение работающей виртуальной машины с помощью диспетчера Hyper-V  
  
1.  Откройте диспетчер Hyper-V. (В диспетчере сервера щелкните **средства** >>**диспетчера Hyper-V**.)  
  
2.  В области навигации выберите один из серверов. (Если его нет в списке, щелкните правой кнопкой мыши **диспетчера Hyper-V**, нажмите кнопку **соединение с сервером**, введите имя сервера и нажмите кнопку **ОК**. Повторите эти шаги для добавления дополнительных серверов.)  
  
3.  Из **виртуальных машин** панели, щелкните правой кнопкой мыши виртуальную машину и нажмите кнопку **переместить**. Откроется мастер перемещения. 
  
4.  Позволяет выбирать тип перемещения, конечный сервер и параметры на страницах мастера.
  
5.  На странице **сводных данных** просмотрите выбранные вами параметры и нажмите кнопку **Готово**.  

## <a name="use-windows-powershell-to-move-a-running-virtual-machine"></a>Перемещение работающей виртуальной машины с помощью Windows PowerShell
  
В следующем примере используется командлет Move-VM для перемещения виртуальной машины с именем *LMTest* конечный сервер под названием *TestServer02* с перемещением виртуальных жестких дисков и других файлов, такие контрольные точки и В смарт-файлов подкачки, *D:\LMTest* каталог на целевом сервере.  
  
```  
PS C:\> Move-VM LMTest TestServer02 -IncludeStorage -DestinationStoragePath D:\LMTest  
```  
  
## <a name="troubleshooting"></a>Устранение неполадок

### <a name="failed-to-establish-a-connection"></a>Не удалось установить подключение 

Если вы еще не настроили ограниченное делегирование, вам необходимо войти на исходный сервер перед перемещением виртуальной машины. Если этого не сделать, попытки проверки подлинности завершается ошибкой, возникает ошибка, и это сообщение:  
  
«Сбой операции миграции виртуальной машины в исходном расположении миграции.  
Не удалось установить соединение с узлом *имя_компьютера*: Учетные данные не доступны в пакете безопасности данные 0x8009030E.»
  
 Чтобы устранить эту проблему, войдите на исходный сервер и повторите его еще раз. Чтобы избежать необходимости входа на исходном сервере, прежде чем выполнять динамическую миграцию, настройте ограниченное делегирование. Вам потребуется учетные данные администратора домена для настройки ограниченного делегирования. Инструкции см. в разделе [Настройка узлов для динамической миграции](../deploy/Set-up-hosts-for-live-migration-without-Failover-Clustering.md). 
 
 ### <a name="failed-because-the-host-hardware-isnt-compatible"></a>Сбой оборудования узла не совместимо
 
 Если виртуальная машина не имеет совместимости процессора, включен и имеет один или несколько моментальных снимков, перемещение завершается неудачей, если узлы имеют процессора, отличной от версии. Возникает ошибка и появится сообщение:
 
**Невозможно переместить виртуальную машину на конечном компьютере. Оборудование на конечном компьютере не совместим с требованиями к оборудованию этой виртуальной машины.**
 
 Чтобы устранить эту проблему, завершите работу виртуальной машины и включить этот параметр совместимости процессора.
 
1. В диспетчере Hyper-V в **виртуальных машин** панели, щелкните правой кнопкой мыши виртуальную машину и щелкните "Параметры".
2. В области навигации разверните **процессоров** и нажмите кнопку **совместимости**.
3. Проверьте **выполнить перенос на компьютер с другой версией процессора**.
4. Нажмите кнопку **ОК**.
 
 Чтобы использовать Windows PowerShell, используйте [Set-VMProcessor](https://technet.microsoft.com/library/hh848533.aspx) командлета:
 
  ```
  PS C:\> Set-VMProcessor TestVM -CompatibilityForMigrationEnabled $true
  ```