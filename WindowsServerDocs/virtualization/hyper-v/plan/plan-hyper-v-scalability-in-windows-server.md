---
title: Планирование масштабируемости Hyper-V в Windows Server 2016
description: Выводит максимальное поддерживаемое число компонентов, которые можно добавить или удалить из Hyper-V и виртуальных машин, например объем памяти и количество виртуальных процессоров.
ms.prod: windows-server-threshold
ms.service: na
manager: dongill
ms.technology: compute-hyper-v
ms.tgt_pltfrm: na
ms.topic: article
author: KBDAzure
ms.author: kathydav
ms.date: 09/28/2016
ms.openlocfilehash: 534de49e50d7b415c9d64c32927418a4395f6f4f
ms.sourcegitcommit: 6f968368c12b9dd699c197afb3a3d13c2211f85b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/26/2019
ms.locfileid: "68544745"
---
# <a name="plan-for-hyper-v-scalability-in-windows-server-2016"></a>Планирование масштабируемости Hyper-V в Windows Server 2016

> Область применения. Windows Server 2016, Windows Server 2019
  
В этой статье приводятся сведения о максимальной конфигурации компонентов, которые можно добавить и удалить на узле Hyper-V или на его виртуальных машинах, таких как виртуальные процессоры или контрольные точки. При планировании развертывания следует учитывать максимальные значения, применяемые к каждой виртуальной машине, а также те, которые применяются к узлу Hyper-V. 

Максимальные значения для памяти и логических процессоров являются крупнейшим повышением из Windows Server 2012 в ответ на запросы поддержки более новых сценариев, таких как машинное обучение и аналитика данных. В блоге Windows Server недавно публиковались результаты производительности виртуальной машины с 5,5 терабайтами памяти и виртуальными процессорами 128, в которых используется 4 ТБ базы данных в памяти. Производительность была выше 95% от производительности физического сервера. Дополнительные сведения см. [в разделе производительность крупномасштабной виртуальной машины Windows Server 2016 Hyper-V для обработки транзакций в памяти](https://blogs.technet.microsoft.com/windowsserver/2016/09/28/windows-server-2016-hyper-v-large-scale-vm-performance-for-in-memory-transaction-processing/). Другие числа похожи на те, которые относятся к Windows Server 2012. \(Максимальные значения для Windows Server 2012 R2 совпадают с Windows Server 2012.\) 
  
> [!NOTE]  
> Дополнительные сведения о System Center Virtual Machine Manager (VMM) см. в разделе [Virtual Machine Manager](https://technet.microsoft.com/system-center-docs/vmm/vmm). VMM — это продукт Майкрософт, предназначенный для управления виртуализированным центром обработки данных, который продается отдельно.  
  
## <a name="maximums-for-virtual-machines"></a>Максимум для виртуальных машин  
Эти максимальные значения применяются к каждой виртуальной машине. Не все компоненты доступны в обеих поколениях виртуальных машин. Сравнение поколений см [. в статье как создать виртуальную машину поколения 1 или 2 в Hyper-V?](should-i-create-a-generation-1-or-2-virtual-machine-in-hyper-v.md) 
  
|Component|Максимум|Примечания|  
|-------------|-----------|---------|  
|Контрольные точки|50|Реальное количество может быть ниже в зависимости от доступного объема хранения. Каждая контрольная точка хранится в виде AVHD-файла, использующего физическое хранилище.|  
|Память|12 ТБ для поколения 2; <br>1 ТБ для поколения 1|Сверьтесь с требованиями для конкретной операционной системы, чтобы определить минимальный и рекомендуемый объемы.|  
|Последовательные порты (COM)|2|Нет.|  
|Объем физических дисков, напрямую подключенных к виртуальной машине|Различается|Максимальный размер зависит от операционной системы на виртуальной машине.|  
|Виртуальные адаптеры Fibre Channel|4|Мы рекомендуем подключать каждый виртуальный адаптер Fibre Channel к отдельной виртуальной сети SAN.|  
|Виртуальные гибкие диски|1 виртуальный гибкий диск.|Нет.|
|Емкость виртуального жесткого диска|64 ТБ для формата VHDX;<br>2040 ГБ для формата VHD|Каждый виртуальный жесткий диск хранится на физическом носителе в виде файла .VHDX или .VHD в зависимости от используемого формата виртуального жесткого диска.|  
|Виртуальные IDE-диски|4|Загрузочный диск (иногда называемый загрузочным диском) должен быть подключен к одному из устройств IDE. Диск запуска может быть виртуальным жестким диском или физическим диском, напрямую подключенным к виртуальной машине.|  
|Виртуальные процессоры|240 для поколения 2;<br>64 для поколения 1;<br>320 доступна для ОС узла (корневой раздел)|Число виртуальных процессоров, поддерживаемых операционной системой на виртуальной машине, может быть ниже. Дополнительные сведения см. в сведениях, опубликованных для конкретной операционной системы.|
|Виртуальные SCSI-контроллеры|4|Для использования виртуальных устройств SCSI требуются службы Integration Services, доступные для поддерживаемых гостевых операционных систем. Дополнительные сведения о поддерживаемых операционных системах см. в разделе [Поддерживаемые виртуальные машины Linux и FreeBSD](../Supported-Linux-and-FreeBSD-virtual-machines-for-Hyper-V-on-Windows.md) и [Поддерживаемые гостевые операционные системы Windows](../supported-windows-guest-operating-systems-for-hyper-v-on-windows.md).|  
|Виртуальные SCSI-диски|256|Каждый SCSI-контроллер поддерживает до 64 дисков; это означает, что в каждой виртуальной машине может быть настроено до 256 виртуальных SCSI-дисков (4 контроллера x 64 диска).|  
|Виртуальные сетевые адаптеры|Windows Server 2016 поддерживает 12:<br> -8 сетевых адаптеров, связанных с Hyper-V<br>-4 устаревшие сетевые адаптеры <br> Windows Server 2019 поддерживает всего 72: <br> -64 сетевых адаптеров, связанных с Hyper-V<br>-4 устаревшие сетевые адаптеры  |Сетевой адаптер, относящийся к Hyper-V, обеспечивает лучшую производительность и требует наличия драйвера, входящего в службы Integration Services. Дополнительные сведения см. [в статье Планирование сетей Hyper-V в Windows Server](plan-hyper-v-networking-in-windows-server.md).|  
  
## <a name="maximums-for-hyper-v-hosts"></a>Максимум для узлов Hyper-V  
Эти максимальные значения применяются к каждому узлу Hyper-V.  
  
|Component|Максимум|Примечания|  
|-------------|-----------|---------|  
|Логические процессоры|512|Оба они должны быть включены в встроенном по:<br /><br />— Виртуализация с аппаратной поддержкой<br />— Предотвращение выполнения данных, обеспечивающее аппаратное обеспечение (DEP)<br /><br />Операционная система узла (корневой раздел) будет видеть только максимум 320 логических процессоров|  
|Память|24 ТБ|Нет.|  
|Группы сетевых адаптеров (объединение сетевых карт)|Оболочка Hyper-V не налагает дополнительных ограничений.|Дополнительные сведения см. в разделе [Объединение сетевых карт](../../../networking/technologies/nic-teaming/NIC-Teaming.md).|  
|Физические сетевые адаптеры|Оболочка Hyper-V не налагает дополнительных ограничений.|Нет.|  
|Количество виртуальных машин на один сервер|1024|Нет.|  
|Хранилище|Ограничено тем, что поддерживается операционной системой узла. Оболочка Hyper-V не налагает дополнительных ограничений.|**Примечание.** Корпорация Майкрософт поддерживает сетевое хранилище (NAS) при использовании SMB 3,0. Хранилища на базе NFS не поддерживаются.|
|Виртуальные сетевые порты коммутаторов на один сервер|Переменное значение. Оболочка Hyper-V не налагает дополнительных ограничений.|Реальное ограничение зависит от доступных вычислительных ресурсов.|  
|Виртуальные процессоры на один логический процессор|Оболочка Hyper-V не налагает дополнительных ограничений.|Нет.|  
|Виртуальные процессоры на один сервер|2048|Нет.|  
|Виртуальные сети хранения данных (SAN)|Оболочка Hyper-V не налагает дополнительных ограничений.|Нет.|  
|Виртуальные коммутаторы|Переменное значение. Оболочка Hyper-V не налагает дополнительных ограничений.|Реальное ограничение зависит от доступных вычислительных ресурсов.|  
 
## <a name="failover-clusters-and-hyper-v"></a>Отказоустойчивые кластеры и Hyper-V  
В этой таблице перечислены максимальные значения, которые применяются при использовании Hyper-V и отказоустойчивой кластеризации. Важно выполнить планирование емкости, чтобы убедиться в наличии достаточного количества аппаратных ресурсов для запуска всех виртуальных машин в кластерной среде.  

Дополнительные сведения об обновлениях для отказоустойчивой кластеризации, включая новые функции для виртуальных машин, см. в статье [новые возможности отказоустойчивой кластеризации в Windows Server 2016](../../../failover-clustering/whats-new-in-failover-clustering.md).

|Component|Максимум|Примечания|  
|-------------|-----------|---------|  
|Узлы на один кластер|64|Определите число узлов, которые следует зарезервировать для отработки отказов, а также выполнения задач обслуживания, например применения обновлений. Рекомендуется предусмотреть ресурсоемкость, позволяющую выделить 1 резервный узел для отработки отказов; это означает, что он будет бездействовать до момента отработки отказа на другом узле. (Такие узлы иногда называются пассивными.) При необходимости резервирования дополнительных узлов это число можно увеличить. Для активных узлов не существует рекомендуемого соотношения или множителя зарезервированных узлов; Единственное требование заключается в том, что общее число узлов в кластере не может превышать 64.|  
|Работающих виртуальных машин в каждом кластере и каждом узле|8 000 на кластер|На реальное количество виртуальных машин, которые можно выполнять одновременно на одном узле, может влиять несколько факторов, например:<br />— Объем физической памяти, используемой каждой виртуальной машиной.<br />— Пропускная способность сети и хранилища.<br />— Число дисков, влияющих на производительность операций ввода-вывода диска.|  
  

