---
title: Планирование сети Hyper-V в Windows Server
description: Описывает, что требуется для основных сетевых технологий в Hyper-V, а также ссылки на инструкции
ms.prod: windows-server-threshold
ms.service: na
manager: dongill
ms.technology: compute-hyper-v
ms.tgt_pltfrm: na
ms.topic: article
author: KBDAzure
ms.author: kathydav
ms.date: 10/04/2016
ms.openlocfilehash: 83c014b917566a78796d061dd88962966ec0c9ab
ms.sourcegitcommit: 0d0b32c8986ba7db9536e0b8648d4ddf9b03e452
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/17/2019
ms.locfileid: "59829875"
---
# <a name="plan-for-hyper-v-networking-in-windows-server"></a>Планирование сети Hyper-V в Windows Server

>Область применения. Microsoft Hyper-V Server 2016, Windows Server 2016, Microsoft Hyper-V Server 2019, Windows Server 2019 г.
  
Базовое представление о сетевых технологий в Hyper-V помогает Планирование сетей для виртуальных машин. В этой статье также рассматриваются некоторые сетевые аспекты при использовании динамической миграции и при использовании с другими функциями сервера и роли Hyper-V.  
  
## <a name="hyper-v-networking-basics"></a>Основы сетевых соединений Hyper-V  
Базовая работа с сетью в Hyper-V достаточно прост. Он использует две части — виртуальный коммутатор и виртуальный сетевой адаптер. Вам потребуется по меньшей мере одна из для установления сети для виртуальной машины. Виртуальный коммутатор подключается к любой сети на основе Ethernet. Виртуальный сетевой адаптер подключается к порту виртуального коммутатора, что делает возможным для виртуальной машины для использования в сети.  
  
Чтобы установить эту Базовая работа с сетью проще всего создать виртуальный коммутатор при установке Hyper-V. Затем при создании виртуальной машины, можно подключить его к коммутатору. Подключение к коммутатору автоматически добавляет виртуальный сетевой адаптер к виртуальной машине. Инструкции см. в разделе [создать виртуальный коммутатор для виртуальных машин Hyper-V](../get-started/Create-a-virtual-switch-for-Hyper-V-virtual-machines.md).  
  
Для обработки различных типов сетей, можно добавить виртуальные коммутаторы и виртуальные сетевые адаптеры. Все параметры являются частью на узле Hyper-V, но каждый виртуальный сетевой адаптер принадлежит только одной виртуальной машины.  
  
Виртуальный коммутатор является сетевой коммутатор программных Ethernet уровня 2. Она предоставляет встроенные функции для мониторинг, управление, занимаемого трафика, а также безопасности и диагностики.  Можно добавить в набор встроенных функций, установив подключаемые модули, также называемый *расширения*. Они доступны из независимых поставщиков программного обеспечения. Дополнительные сведения о коммутатора и расширения, см. в разделе [виртуальный коммутатор Hyper-V](../../hyper-v-virtual-switch/Hyper-V-Virtual-Switch.md).  
  
### <a name="switch-and-network-adapter-choices"></a>Параметры адаптера коммутатора и сети  
Hyper-V предоставляет три типа виртуальных коммутаторов и два типа виртуальных сетевых адаптеров. Вам нужно выбрать, какое из каждого при ее создании. Создание и управление ими виртуальных коммутаторов и виртуальных сетевых адаптеров можно использовать диспетчер Hyper-V или модуле Hyper-V для Windows PowerShell. Некоторые расширенные сетевые возможности, такие как списки управления доступом расширенных портов (ACL), можно управлять только с помощью командлетов в модуле Hyper-V.  
  
Для виртуального коммутатора или виртуального сетевого адаптера можно внести некоторые изменения, после его создания. Например можно изменить существующий коммутатор к другому типу, но это влияет на все виртуальные машины, подключенные к этим коммутаторам сетевые возможности.  Таким образом вы, вероятно, не будет это сделать, если вы допустили ошибку или нужен какой-либо. Еще один пример виртуального сетевого адаптера подключаются к другому коммутатору, которое можно использовать, если вы хотите подключиться к другой сети. Однако невозможно изменить виртуальный сетевой адаптер из одного типа в другой. Вместо изменения типа необходимо добавить другой виртуальный сетевой адаптер и выберите соответствующий тип.  
  
Ниже приведены типы виртуального коммутатора.  
  
-   **Внешний виртуальный коммутатор** -подключается к проводной сети физических путем привязки к физическому сетевому адаптеру.  
  
-   **Внутренний виртуальный коммутатор** -подключается к сети, которая может использоваться только виртуальных машин, работающих на узле, который имеет виртуальный коммутатор, а также между узлом и виртуальными машинами.  
  
-   **Частный виртуальный коммутатор** -подключается к сети, которая может использоваться только при использовании виртуальных машин, работающих на узле, виртуальный коммутатор, но не предоставляет сети между узлом и виртуальными машинами.  
  
Ниже приведены типы адаптера виртуальной сети.  
  
-   **Hyper-V конкретного сетевого адаптера** : доступен для поколения 1 и виртуальные машины поколения 2. Он предназначен специально для Hyper-V и требуется драйвер, который входит в службы интеграции Hyper-V. Этот тип сетевого адаптера быстрее и рекомендуемый вариант, если вы не должны загружаться из сети или неподдерживаемый гостевой операционной системой. Необходимый драйвер предоставляется только для поддерживаемых операционных систем. Обратите внимание, что в диспетчере Hyper-V и сетевых командлетов, этот тип называется так же как сетевой адаптер.  
  
-   **Устаревший сетевой адаптер** : доступен только в виртуальных машинах поколения 1. Эмулирует на базе Intel 21140 PCI Fast адаптер Ethernet и может использоваться для загрузки в сети, поэтому можно установить операционную систему из службы, например служб развертывания Windows.  
  
## <a name="hyper-v-networking-and-related-technologies"></a>Сети Hyper-V и связанные технологии  
Последние выпуски Windows Server представлены усовершенствования, которые предоставляют дополнительные возможности для настройки сетей для Hyper-V. Например Windows Server 2012 была предусмотрена возможность конвергентные сети. Это позволяет направлять сетевой трафик через один внешний виртуальный коммутатор. Windows Server 2016 допускает это, разрешая удаленный доступ к памяти (RDMA) с сетевых адаптеров, связанных с виртуальным коммутатором Hyper-V. Эту конфигурацию можно использовать с или без коммутатора внедренных коммутаторов (SET). Дополнительные сведения см. в разделе [удаленный доступ к памяти &#40;RDMA&#41; и Switch Embedded Teaming &#40;значение&#41;](../../hyper-v-virtual-switch/RDMA-and-Switch-Embedded-Teaming.md)  
  
Некоторые функции зависят от конкретных сетевых конфигураций или лучше выполнять в определенных конфигурациях. При планировании или обновлении инфраструктуры сети, проверьте следующие.  
  
**Отказоустойчивая кластеризация** -это лучший способ изолировать трафик и использовать Hyper-V качества обслуживания (QoS) виртуального коммутатора. Дополнительные сведения см. в разделе [рекомендации по сети для кластера Hyper-V](https://technet.microsoft.com/library/dn550728.aspx)  
  
**Динамическая миграция** -используйте параметры производительности, чтобы сократить время, необходимое для выполнения динамической миграции и использования ЦП сети. Инструкции см. в разделе [Настройка узлов для динамической миграции без отказоустойчивой кластеризации](../deploy/set-up-hosts-for-live-migration-without-failover-clustering.md).  
  
**Дисковыми пространствами** -эта функция основывается на SMB3.0 сетевого протокола и RDMA. Дополнительные сведения см. в разделе [дисковых пространств в Windows Server 2016](../../../storage/storage-spaces/storage-spaces-direct-overview.md).