---
title: Поддерживаемые виртуальные машины Ubuntu на базе Hyper-V
description: Список служб интеграции Linux и функций, включенных в каждую версию
ms.prod: windows-server-threshold
ms.service: na
manager: dongill
ms.technology: compute-hyper-v
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: 95ea5f7c-25c6-494b-8ffd-2a77f631ee94
author: shirgall
ms.author: shirgall
ms.date: 11/19/2018
ms.openlocfilehash: b58193ec570cf0d94b6c95018b8c00c813331986
ms.sourcegitcommit: 8ba2c4de3bafa487a46c13c40e4a488bf95b6c33
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/25/2019
ms.locfileid: "66222644"
---
# <a name="supported-ubuntu-virtual-machines-on-hyper-v"></a>Поддерживаемые виртуальные машины Ubuntu на базе Hyper-V

>Область применения. Windows Server 2019 г., 2016 г., 2019 сервера Hyper-V, 2016, Windows Server 2012 R2, Hyper-V Server 2012 R2, Windows Server 2012, Hyper-V Server 2012, Windows Server 2008 R2, Windows 10, Windows 8.1, Windows 8, Windows 7.1, Windows 7

Начиная с Ubuntu 12.04, загрузку пакета «"linux-" виртуальные» устанавливается ядра, подходящий для использования в качестве гостевой виртуальной машины. Этот пакет всегда зависит от последней версии образа минимальной универсального ядра и заголовки, используемые для виртуальных машин. Хотя его использование не является обязательным, ядро linux виртуальной загрузит меньшее количество драйверов и может загружаться быстрее и сопряжена с меньшими затратами памяти, чем обычный образ.

Чтобы получить полностью использовать Hyper-V, установите соответствующие linux средства и пакеты средств на облако для linux для установки средств и управляющие программы для использования с виртуальными машинами. При использовании linux виртуального ядра, нагрузки linux, средства виртуального и linux cloud-tools виртуальные.

На следующей карте распространения функция указывает функции в каждой версии. Известные проблемы и обходные пути для каждого распределения, перечислены под таблицей.

## <a name="table-legend"></a>Условные обозначения

* **Встроенные** -LIS входят в состав этого дистрибутива Linux. Пакет загрузки предоставленного корпорацией Майкрософт LIS не работает для этого распространения, поэтому не устанавливают его. Номера версий модуля ядра для встроенных LIS (как показано **lsmod**, например) отличаются от номер версии на пакет загрузки LIS предоставленного корпорацией Майкрософт. Несоответствие не указывает, что встроенные в службах LIS является устаревшим.

* &#10004;-Компонент, доступный

* (*пустой*)-функция, отсутствующая

|**Возможность**|**Версия операционной системы Windows Server**|**18.10**|**18.04 LTS**|**16.04 LTS**|**14.04 LTS**|**12.04 LTS**|
|-|-|-|-|-|-|-|
|**Доступность**||Встроенные методы|Встроенные методы|Встроенные методы|Встроенные методы|Встроенные методы|
|**[Core](Feature-Descriptions-for-Linux-and-FreeBSD-virtual-machines-on-Hyper-V.md#core)**|2019, 2016, 2012 R2, 2012, 2008 R2|&#10004;|&#10004;|&#10004;|&#10004;|&#10004;|
|Точное время Windows Server 2016|2019, 2016|&#10004;|&#10004;|&#10004;|||
|**[Сетевые подключения](Feature-Descriptions-for-Linux-and-FreeBSD-virtual-machines-on-Hyper-V.md#networking)**|||||||
|Кадры крупного размера|2019, 2016, 2012 R2, 2012, 2008 R2|&#10004;|&#10004;|&#10004;|&#10004;|&#10004;|
|Теги виртуальной локальной сети и коммутации|2019, 2016, 2012 R2, 2012, 2008 R2|&#10004;|&#10004;|&#10004;|&#10004;|&#10004;|
|Динамическая миграция|2019, 2016, 2012 R2, 2012, 2008 R2|&#10004;|&#10004;|&#10004;|&#10004;|&#10004;|
|Статический IP-адрес внедрения|2019, 2016, 2012 R2, 2012|&#10004;Примечание 1|&#10004;Примечание 1|&#10004;Примечание 1|&#10004;Примечание 1|&#10004;Примечание 1|
|vRSS|2019, 2016, 2012 R2|&#10004;|&#10004;|&#10004;|&#10004;||
|Сегментация TCP и разгрузка контрольной суммы|2019, 2016, 2012 R2, 2012, 2008 R2|&#10004;|&#10004;|&#10004;|&#10004;||
|SR-IOV;|2019, 2016|&#10004;|&#10004;|&#10004;|||
|**[Хранилища](Feature-Descriptions-for-Linux-and-FreeBSD-virtual-machines-on-Hyper-V.md#storage)**||||||
|Изменения размера VHDX|2019, 2016, 2012 R2|&#10004;|&#10004;|&#10004;|&#10004;||
|виртуальный адаптер Fibre Channel;|2019, 2016, 2012 R2|&#10004;Примечание 2|&#10004;Примечание 2|&#10004;Примечание 2|&#10004;Примечание 2||
|Резервное копирование виртуальной машины|2019, 2016, 2012 R2|&#10004;Обратите внимание, 3, 4, 6|&#10004;Обратите внимание, 3, 4, 5|&#10004;Обратите внимание, 3, 4, 5|&#10004;Обратите внимание, 3, 4, 5||
|ОБРЕЗАТЬ поддержки|2019, 2016, 2012 R2|&#10004;|&#10004;|&#10004;|&#10004;|&#10004;|
|WWN-ИМЕН SCSI|2019, 2016, 2012 R2|&#10004;|&#10004;|&#10004;|&#10004;||
|**[Память](Feature-Descriptions-for-Linux-and-FreeBSD-virtual-machines-on-Hyper-V.md#memory)**||||||
|Поддержка PAE ядра|2019, 2016, 2012 R2, 2012, 2008 R2|&#10004;|&#10004;|&#10004;|&#10004;|&#10004;|
|Конфигурация MMIO разрыв|2019, 2016, 2012 R2|&#10004;|&#10004;|&#10004;|&#10004;|&#10004;|
|Динамическая память — «горячей» заменой|2019, 2016, 2012 R2, 2012|&#10004;Обратите внимание, 7, 8, 9|&#10004;Обратите внимание, 7, 8, 9|&#10004;Обратите внимание, 7, 8, 9|&#10004;Обратите внимание, 7, 8, 9||
|Динамическая память — воздушного шага|2019, 2016, 2012 R2, 2012|&#10004;Обратите внимание, 7, 8, 9|&#10004;Обратите внимание, 7, 8, 9|&#10004;Обратите внимание, 7, 8, 9|&#10004;Обратите внимание, 7, 8, 9||
|Изменение размера памяти среды выполнения|2019, 2016|&#10004;|&#10004;|&#10004;|&#10004;||
|**[Видео](Feature-Descriptions-for-Linux-and-FreeBSD-virtual-machines-on-Hyper-V.md#video)**|||||||
|Конкретное устройство видео Hyper-V|2019, 2016, 2012 R2, 2012, 2008 R2|&#10004;|&#10004;|&#10004;|&#10004;||
|**[Прочие](Feature-Descriptions-for-Linux-and-FreeBSD-virtual-machines-on-Hyper-V.md#miscellaneous)**||||||
|Пара "ключ/значение"|2019, 2016, 2012 R2, 2012, 2008 R2|&#10004;Примечание 6, 10|&#10004;Примечание 5, 10|&#10004;Примечание 5, 10|&#10004;Примечание 5, 10|&#10004;Примечание 5, 10|
|Немаскируемое прерывание|2019, 2016, 2012 R2|&#10004;|&#10004;|&#10004;|&#10004;|&#10004;|
|Копирование файлов с носителя на гостевой|2019, 2016, 2012 R2|&#10004;|&#10004;|&#10004;|&#10004;||
|Команда lsvmbus|2019, 2016, 2012 R2, 2012, 2008 R2|&#10004;|&#10004;|&#10004;|&#10004;||
|Сокеты Hyper-V|2019, 2016||||||
|Сквозной режим PCI/DDA|2019, 2016|&#10004;|&#10004;|&#10004;|&#10004;||
|**[Виртуальные машины поколения 2](Feature-Descriptions-for-Linux-and-FreeBSD-virtual-machines-on-Hyper-V.md#generation-2-virtual-machines)**||||||
|Загрузки, с помощью UEFI|2019, 2016, 2012 R2|&#10004;Примечание 11, 12|&#10004;Примечание 11, 12|&#10004;Примечание 11, 12|&#10004;Примечание 11, 12||
|Безопасная загрузка|2019, 2016|&#10004;|&#10004;|&#10004;|&#10004;||

## <a name="notes"></a>Примечания

1. Статический IP-адрес внедрения может не работать, если **диспетчера сети** был настроен для заданного сетевого адаптера Hyper v, появляющихся на виртуальной машине. Для обеспечения правильной работы статические IP-адреса внедрения убедитесь, что диспетчер сети полностью выключен, или отключены для конкретного сетевого адаптера, через его **ifcfg-ethX** файл.

2. При использовании устройства виртуальных fiber channel, убедитесь, что логический номер (устройства LUN 0) 0 был заполнен. Если LUN 0 не заполнена, виртуальной машины Linux может не удается подключить устройства fiber channel в собственном коде.

3. Если открытых дескрипторов файлов во время операции резервного копирования виртуальной машины, то в некоторых случаях углу резервные копии виртуальных жестких дисков может потребоваться пройти проверку подлинности, проверке согласованности файловой системы (`fsck`) для восстановления.

4. Активных операций резервного копирования может завершиться ошибкой без уведомления, если виртуальная машина имеет вложенные iSCSI-устройству или непосредственно подключенное хранилище (также известный как транзитный диск).

5. На длительный срок поддержки выпусков (LTS) использовать последние виртуального ядра Включение оборудования (HWE) в актуальном состоянии служб интеграции Linux.

   Чтобы установить ядро Azure настроены на 14.04, 16.04 и 18.04, выполните следующие команды правами привилегированного пользователя (или sudo):

   ```bash
   # apt-get update
   # apt-get install linux-azure

   ```

   12.04 имеет отдельный виртуального ядра. Чтобы установить универсальный HWE ядра на 12.04, выполните следующие команды правами привилегированного пользователя (или sudo):

   ```bash
   # apt-get update
   # apt-get install linux-generic-lts-trusty

   ```

   В Ubuntu 12.04 следующие управляющие программы Hyper-V находятся в отдельно устанавливаемый пакет:

   * **Управляющая программа моментального снимка VSS** — Эта управляющая программа необходима для создания динамической резервных копий виртуальных машин Linux.
   * **Управляющую программу KVP** — Эта управляющая программа позволяет задавать и запрашивать пары внутренние и внешние значения ключа.
   * **управляющая программа fcopy** — Эта управляющая программа внедряет службу копирования файлов между узлом и гостевой.

   Чтобы установить управляющую программу KVP на 12.04, выполните следующие команды правами привилегированного пользователя (или sudo).

   ```bash
   # apt-get install hv-kvp-daemon-init linux-tools-lts-trusty linux-cloud-tools-generic-lts-trusty

   ```

   При обновлении ядра виртуальной машины необходимо перезагрузить его использования.

6. На Ubuntu 18.10 используйте последние виртуального ядра актуальные возможности Hyper-V на.

   Чтобы установить виртуального ядра на 18.10, выполните следующие команды правами привилегированного пользователя (или sudo):

   ```bash
   # apt-get update
   # apt-get install linux-azure

   ```

   При обновлении ядра виртуальной машины необходимо перезагрузить его использования.

7. Поддержка динамической памяти доступна только на 64-разрядные виртуальные машины.

8. Динамических операций в памяти может завершиться ошибкой, если гостевая операционная система работает под управлением слишком мало памяти. Ниже приведены некоторые рекомендации.

   * Равно или больше, чем объем памяти, рекомендует поставщика распространения следует память при запуске и минимальный объем памяти.

   * Приложения, которые стремятся использовать всю доступную память в системе ограничиваются использование до 80 процентов доступной оперативной памяти.

9. Если вы используете динамическую память на Windows Server 2019, Windows Server 2016 или операционных систем Windows Server 2012 и 2012 R2, укажите **память при запуске**, **минимальный объем памяти**, и **максимальное память** параметры кратно 128 мегабайт (МБ). Невыполнение этого требования может привести к сбоям, горячей и увеличить в гостевой операционной системе памяти могут не отображаться.

10. Windows Server 2019, Windows Server 2016 или Windows Server 2012 R2 инфраструктуры пары ключ/значение может работать правильно без обновления программного обеспечения Linux. Обратитесь к поставщику распространения для получения обновления программного обеспечения, в случае, если вы видите возникшие проблемы.

11. В Windows Server 2012 R2 виртуальные машины поколения 2 имеют безопасная загрузка включена по умолчанию и некоторых Linux, виртуальные машины не будут загружаться, если отключен параметр безопасной загрузки. Вы можете отключить безопасную загрузку в **встроенного по** разделе параметров для виртуальной машины в **диспетчера Hyper-V** или отключить с помощью Windows Powershell:

   ```Powershell
   Set-VMFirmware -VMName "VMname" -EnableSecureBoot Off

   ```

12. Прежде чем скопировать виртуальный жесткий ДИСК существующей виртуальной машины поколения 2 VHD, для создания новых виртуальных машин поколения 2, выполните следующие действия.

   1. Войдите на существующей виртуальной машины поколения 2.

   2. Перейдите в каталог EFI boot:

      ```bash
      # cd /boot/efi/EFI

      ```

   3. Скопируйте каталог ubuntu в новый каталог с именем boot:

      ```bash
      # sudo cp -r ubuntu/ boot

      ```

   4. Перейдите в каталог только что созданный загрузочный каталог:

      ```bash
      # cd boot

      ```

   5. Переименуйте файл shimx64.efi:

      ```bash
      # sudo mv shimx64.efi bootx64.efi

      ```

## <a name="see-also"></a>См. также

* [Поддерживается CentOS и Red Hat Enterprise Linux виртуальных машин в Hyper-V](Supported-CentOS-and-Red-Hat-Enterprise-Linux-virtual-machines-on-Hyper-V.md)

* [Поддерживаемые виртуальные машины Debian в Hyper-V](Supported-Debian-virtual-machines-on-Hyper-V.md)

* [Поддерживаемые виртуальные машины Oracle Linux в Hyper-V](Supported-Oracle-Linux-virtual-machines-on-Hyper-V.md)

* [Поддерживаемые виртуальные машины SUSE в Hyper-V](Supported-SUSE-virtual-machines-on-Hyper-V.md)

* [Описаниями для виртуальных машин Linux и FreeBSD на Hyper-V](Feature-Descriptions-for-Linux-and-FreeBSD-virtual-machines-on-Hyper-V.md)

* [Рекомендации по использованию Linux на Hyper-V](Best-Practices-for-running-Linux-on-Hyper-V.md)

* [SET-VMFirmware](https://technet.microsoft.com/library/dn464287.aspx)

* [Ubuntu 14.04 в поколении 2 виртуальной Машины — блог виртуализации Бена Армстронга](https://blogs.msdn.com/b/virtual_pc_guy/archive/2014/06/09/ubuntu-14-04-in-a-generation-2-vm.aspx)
