---
title: Поддерживаемые виртуальные машины Ubuntu в Hyper-V
description: Список служб и компонентов интеграции Ubuntu/Linux, входящих в каждую версию
ms.topic: article
ms.assetid: 95ea5f7c-25c6-494b-8ffd-2a77f631ee94
ms.author: benarm
author: BenjaminArmstrong
ms.date: 01/08/2021
ms.openlocfilehash: 1e05555a21aa656f5b1c90a56cbb244687b81ea3
ms.sourcegitcommit: 209b0995a11c89bb9ece3db0d48a35d7ba5bbd9d
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/09/2021
ms.locfileid: "98053547"
---
# <a name="supported-ubuntu-virtual-machines-on-hyper-v"></a>Поддерживаемые виртуальные машины Ubuntu в Hyper-V

>Применимо к: Azure Stack ХЦИ, версия 20H2; Windows Server 2019, Hyper-V Server 2019, Windows Server 2016, Hyper-V Server 2016, Windows Server 2012 R2, Hyper-V Server 2012 R2, Windows 10, Windows 8.1

Следующая схема распределения признаков показывает функции в каждой версии. Известные проблемы и способы их решения для каждого распространения перечислены после таблицы.

## <a name="table-legend"></a>Условные обозначения таблицы

* **Встроенные в** систему LIS включены в состав этого дистрибутива Linux. Пакет скачивания LIS, предоставленный корпорацией Майкрософт, не подходит для этого распространения, поэтому не устанавливайте его. Номера версий модулей ядра для встроенных LIS (например, как показано в **лсмод**) отличаются от номера версии в пакете скачанных пакетов LIS, предоставленных корпорацией Майкрософт. Несоответствие не означает, что встроенное в LIS Обновление устарело.

* &#10004;-доступный компонент

* (*пусто*) — функция недоступна

|**Возможность**|**Версия операционной системы Windows Server**|**20,04 LTS**|**18.04 LTS**|**16.04 LTS**|**14.04 LTS**|
|-|-|-|-|-|-|
|**Доступность**||Встроено|Встроено|Встроено|Встроено|
|**[Основные сведения](Feature-Descriptions-for-Linux-and-FreeBSD-virtual-machines-on-Hyper-V.md#core)**|2019, 2016, 2012 R2|&#10004;|&#10004;|&#10004;|&#10004;|
|Точное время Windows Server 2016|2019, 2016|&#10004;|&#10004;|&#10004;||
|**[Сеть](Feature-Descriptions-for-Linux-and-FreeBSD-virtual-machines-on-Hyper-V.md#networking)**||||||
|Кадры крупного размера|2019, 2016, 2012 R2|&#10004;|&#10004;|&#10004;|&#10004;|
|Добавление тегов и магистрали виртуальной ЛС|2019, 2016, 2012 R2|&#10004;|&#10004;|&#10004;|&#10004;|
|Динамическая миграция|2019, 2016, 2012 R2|&#10004;|&#10004;|&#10004;|&#10004;|
|Статическая Вставка IP-адресов|2019, 2016, 2012 R2|&#10004; Примечание 1|&#10004; Примечание 1|&#10004; Примечание 1|&#10004; Примечание 1|
|vRSS|2019, 2016, 2012 R2|&#10004;|&#10004;|&#10004;|&#10004;|
|Сегментация TCP и разгрузка контрольной суммы|2019, 2016, 2012 R2|&#10004;|&#10004;|&#10004;|&#10004;|
|SR-IOV;|2019, 2016|&#10004;|&#10004;|&#10004;||
|**[Память](Feature-Descriptions-for-Linux-and-FreeBSD-virtual-machines-on-Hyper-V.md#storage)**|||||
|Изменение размера VHDX|2019, 2016, 2012 R2|&#10004;|&#10004;|&#10004;|&#10004;|
|Виртуальное подключение Fibre Channel|2019, 2016, 2012 R2|&#10004; Примечание 2|&#10004; Примечание 2|&#10004; Примечание 2|&#10004; Примечание 2|
|Динамическая Архивация виртуальных машин|2019, 2016, 2012 R2|&#10004; Примечание 3, 4, 5|&#10004; Примечание 3, 4, 5|&#10004; Примечание 3, 4, 5|&#10004; Примечание 3, 4, 5|
|Поддержка TRIM|2019, 2016, 2012 R2|&#10004;|&#10004;|&#10004;|&#10004;|
|WWN ДЛЯ SCSI|2019, 2016, 2012 R2|&#10004;|&#10004;|&#10004;|&#10004;|
|**[Свободной](Feature-Descriptions-for-Linux-and-FreeBSD-virtual-machines-on-Hyper-V.md#memory)**|||||
|Поддержка ядра PAE|2019, 2016, 2012 R2|&#10004;|&#10004;|&#10004;|&#10004;|
|Настройка зазора MMIO|2019, 2016, 2012 R2|&#10004;|&#10004;|&#10004;|&#10004;|
|Динамическая память Hot-Add|2019, 2016, 2012 R2|&#10004; Примечание 6, 7, 8|&#10004; Примечание 6, 7, 8|&#10004; Примечание 6, 7, 8|&#10004; Примечание 6, 7, 8|
|Всплывающие подсказки динамическая память|2019, 2016, 2012 R2|&#10004; Примечание 6, 7, 8|&#10004; Примечание 6, 7, 8|&#10004; Примечание 6, 7, 8|&#10004; Примечание 6, 7, 8|
|Изменение размера памяти среды выполнения|2019, 2016|&#10004;|&#10004;|&#10004;|&#10004;|
|**[Роли](Feature-Descriptions-for-Linux-and-FreeBSD-virtual-machines-on-Hyper-V.md#video)**||||||
|Устройство, относящееся к Hyper-V|2019, 2016, 2012 R2|&#10004;|&#10004;|&#10004;|&#10004;|
|**[Прочее](Feature-Descriptions-for-Linux-and-FreeBSD-virtual-machines-on-Hyper-V.md#miscellaneous)**|||||
|Пара "ключ — значение"|2019, 2016, 2012 R2|&#10004; Примечание 5, 9|&#10004; Примечание 5, 9|&#10004; Примечание 5, 9|&#10004; Примечание 5, 9|
|Немаскируемое прерывание|2019, 2016, 2012 R2|&#10004;|&#10004;|&#10004;|&#10004;|
|Копирование файлов с узла на гость|2019, 2016, 2012 R2|&#10004;|&#10004;|&#10004;|&#10004;|
|Команда лсвмбус|2019, 2016, 2012 R2|&#10004;|&#10004;|&#10004;|&#10004;|
|Сокеты Hyper-V|2019, 2016|&#10004;|&#10004;|&#10004;|&#10004;|
|Транзитный/ДДА PCI|2019, 2016|&#10004;|&#10004;|&#10004;|&#10004;|
|**[Виртуальные машины 2-го поколения](Feature-Descriptions-for-Linux-and-FreeBSD-virtual-machines-on-Hyper-V.md#generation-2-virtual-machines)**|||||
|Загрузка с помощью UEFI|2019, 2016, 2012 R2|&#10004; Примечание 10, 11|&#10004; Примечание 10, 11|&#10004; Примечание 10, 11|&#10004; Примечание 10, 11|
|Безопасная загрузка|2019, 2016|&#10004;|&#10004;|&#10004;|&#10004;|

## <a name="notes"></a>Примечания

1. Статическая Вставка IP-адресов может не работать, если **Диспетчер сети** настроен для конкретного сетевого адаптера Hyper-V на виртуальной машине. Чтобы обеспечить гладкую работу статического внедрения IP-адресов, убедитесь, что диспетчер сети полностью отключен или отключен для определенного сетевого адаптера через его файл **ifcfg-ЕСКС** .

2. При использовании виртуальных устройств оптоволоконного канала убедитесь, что логический номер устройства 0 (LUN 0) заполнен. Если LUN 0 не заполнен, виртуальная машина Linux может не иметь возможности подключать устройства оптоволоконного канала в собственном режиме.

3. Если во время динамической операции резервного копирования виртуальных машин имеются открытые дескрипторы файлов, то в некоторых уголках резервных виртуальных жестких дисков может потребоваться проверка согласованности файловой системы () при `fsck` восстановлении.

4. Операции динамической архивации могут автоматически завершаться сбоем, если виртуальная машина имеет подключенное устройство iSCSI или прямое подключенное хранилище (также называемое транзитным диском).

5. В выпусках долгосрочной поддержки (LTS) используйте последнюю версию ядра для обновления виртуальных аппаратных средств (HWE) для Integration Services Linux.

   Чтобы установить ядро, настроенное для Azure, на 16,04, 18,04 и 20,04, выполните следующие команды в качестве корневого (или sudo):

   ```bash
   # apt-get update
   # apt-get install linux-azure
   ```
6. Поддержка динамической памяти доступна только на 64-разрядных виртуальных машинах.

7. Динамическая память операции могут завершиться ошибкой, если в операционной системе на виртуальной машине слишком мало памяти. Ниже приведены некоторые рекомендации.

   * Объем памяти при запуске и минимальный объем памяти должны быть больше или равны объему памяти, рекомендуемому для поставщика распространения.

   * Приложения, которые обычно потребляют всю доступную память в системе, могут потреблять до 80 процентов доступной памяти.

8. При использовании динамическая память в операционных системах Windows Server 2019, Windows Server 2016 или Windows Server 2012/2012 R2 укажите **объем памяти при запуске**, **Минимальный объем памяти** и параметры **максимального объема памяти** , кратные 128 мегабайтам (МБ). Несоблюдение этого действия может привести к Hot-Addм сбоям, и в операционной системе на виртуальной машине может не отобразиться увеличение объема памяти.

9. В Windows Server 2019, Windows Server 2016 или Windows Server 2012 R2 инфраструктура пар "ключ — значение" может работать неправильно без обновления программного обеспечения Linux. Обратитесь к поставщику распространения, чтобы получить обновление программного обеспечения на случай возникновения проблем с этой функцией.

10. На виртуальных машинах Windows Server 2012 R2 с версии 2 по умолчанию включена безопасная загрузка, и некоторые виртуальные машины Linux не будут загружаться, если только не будет отключен параметр безопасной загрузки. Вы можете отключить безопасную загрузку в разделе **встроенное по** в параметрах виртуальной машины в **диспетчере Hyper-V** или отключить ее с помощью PowerShell:

    ```Powershell
    Set-VMFirmware -VMName "VMname" -EnableSecureBoot Off
    ```

11. Прежде чем пытаться скопировать виртуальный жесткий диск существующей виртуальной машины виртуального жесткого диска поколения 2 для создания новых виртуальных машин поколения 2, выполните следующие действия.

    1. Войдите в существующую виртуальную машину версии 2.

    2. Перейдите в каталог boot EFI.

       ```bash
       # cd /boot/efi/EFI
       ```

    3. Скопируйте каталог Ubuntu в новый каталог с именем Boot:

       ```bash
       # sudo cp -r ubuntu/ boot
       ```

    4. Перейдите в каталог только что созданный каталог загрузки:

       ```bash
       # cd boot
       ```

    5. Переименуйте файл shimx64. EFI:

       ```bash
       # sudo mv shimx64.efi bootx64.efi
       ```

## <a name="see-also"></a>См. также:

* [Поддерживаемые CentOS и Red Hat Enterprise Linux виртуальные машины в Hyper-V](Supported-CentOS-and-Red-Hat-Enterprise-Linux-virtual-machines-on-Hyper-V.md)

* [Поддерживаемые виртуальные машины Debian в Hyper-V](Supported-Debian-virtual-machines-on-Hyper-V.md)

* [Поддерживаемые виртуальные машины Oracle Linux в Hyper-V](Supported-Oracle-Linux-virtual-machines-on-Hyper-V.md)

* [Поддерживаемые виртуальные машины SUSE в Hyper-V](Supported-SUSE-virtual-machines-on-Hyper-V.md)

* [Описания функций для виртуальных машин Linux и FreeBSD в Hyper-V](Feature-Descriptions-for-Linux-and-FreeBSD-virtual-machines-on-Hyper-V.md)

* [Рекомендации по запуску Linux в Hyper-V](Best-Practices-for-running-Linux-on-Hyper-V.md)

* [Set-Вмфирмваре](/powershell/module/hyper-v/set-vmfirmware)

* [Ubuntu 14,04 в блоге поколения 2 VM-Бен Армстронга](/archive/blogs/virtual_pc_guy/ubuntu-14-04-in-a-generation-2-vm)
