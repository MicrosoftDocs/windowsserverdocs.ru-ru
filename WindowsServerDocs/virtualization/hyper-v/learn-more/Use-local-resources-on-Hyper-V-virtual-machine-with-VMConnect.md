---
title: Use local resources on Hyper-V virtual machine with VMConnect
description: Требования к использованию локальных ресурсов с VMConnect
ms.prod: windows-server
ms.service: na
manager: dongill
ms.technology: compute-hyper-v
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: 18eface5-7518-4c6b-9282-93e2e3e87492
author: KBDAzure
ms.author: kathyDav
ms.date: 12/06/2016
ms.openlocfilehash: 70bf72ec2277679820d985c9f78f10a4ea6e04df
ms.sourcegitcommit: 6aff3d88ff22ea141a6ea6572a5ad8dd6321f199
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/27/2019
ms.locfileid: "71392896"
---
# <a name="use-local-resources-on-hyper-v-virtual-machine-with-vmconnect"></a>Use local resources on Hyper-V virtual machine with VMConnect

>Область применения. Windows 10, Windows 8.1, Windows Server 2016, Windows Server 2012 R2

Подключение к виртуальной машине (VMConnect) позволяет использовать локальные ресурсы компьютера в виртуальной машине, такие как съемные USB-устройства Flash или принтеры. Режим расширенного сеанса также позволяет изменить размер окна VMConnect. В этой статье показано, как настроить узел, а затем предоставить виртуальной машине доступ к локальному ресурсу.

Режим расширенного сеанса и текст буфера обмена доступны только для виртуальных машин под управлением последних версий операционной системы Windows. \(See [требования к использованию локальных ресурсов](#requirements-for-using-local-resources)ниже. \) 

Сведения о виртуальных машинах под управлением Ubuntu см. [в разделе Изменение разрешения экрана Ubuntu в виртуальной машине Hyper-V](https://blogs.msdn.microsoft.com/virtual_pc_guy/2014/09/19/changing-ubuntu-screen-resolution-in-a-hyper-v-vm/). 
  
## <a name="turn-on-enhanced-session-mode-on-a-hyper-v-host"></a>Включение режима расширенного сеанса на узле Hyper-V  
Если узел Hyper-V работает под управлением Windows 10 или Windows 8.1, режим расширенного сеанса включен по умолчанию, поэтому его можно пропустить и перейти к следующему разделу. Но если ваш узел работает под управлением Windows Server 2016 или Windows Server 2012 R2, сначала сделайте это. 
  
Включить режим расширенного сеанса:

1.  Подключитесь к компьютеру, на котором размещена виртуальная машина.  
  
2.  В диспетчере Hyper-V выберите имя компьютера узла.  
  
    ![Снимок экрана, на котором показано имя главного компьютера, указанное в разделе Диспетчер Hyper-V в левой области.](media/Hyper-V-HyperVManager-HostNameSelected.png)  
  
3.  Выберите **Параметры Hyper-V**.  
  
    ![Снимок экрана, на котором показаны параметры Hyper-V в разделе "действия" в правой области.](media/HyperV-ActionsHyperVSettings.png)  
  
4.  В разделе **Сервер** выберите **Политика режима расширенного сеанса**.  
  
    ![Снимок экрана, показывающий параметр политики расширенного режима сеанса в разделе "безопасность".](media/Hyper-V-Settings-ServerEnhancedSessionModePolicy.png)  
  
5.  Установите флажок **Разрешить режим расширенного сеанса** .  
  
    ![Снимок экрана, показывающий флажок "Разрешить режим расширенного сеанса" для политики расширенного режима сеанса.](media/Hyper-V-Settings-EnhancedSessionModePolicyCheckBox.png)  
  
6.  В разделе **Пользователь**выберите **Режим расширенного сеанса**.  
  
    ![Снимок экрана, показывающий параметр режима расширенного сеанса в разделе "пользователь". ](media/Hyper-V-Settings-UserEnhancedSessionMode.png)  
  
7.  Установите флажок **Разрешить режим расширенного сеанса** .  
  
8.  Нажмите кнопку **ОК**.  
  
## <a name="choose-a-local-resource"></a>Выбор локального ресурса

К локальным ресурсам относятся принтеры, буфер обмена и локальный диск на компьютере, на котором вы используете VMConnect. Дополнительные сведения см. в разделе [требования к использованию локальных ресурсов](#requirements-for-using-local-resources)ниже.  
  
Чтобы выбрать локальный ресурс, выполните следующие действия.
  
1.  Откройте VMConnect.  
  
2.  Выберите виртуальную машину, к которой нужно подключиться.  
  
3.  Нажмите кнопку **Показать параметры**.  
  
    ![Снимок экрана, вызывающий команду "отобразить параметры" в нижнем левом углу диалогового окна.](media/HyperV-VMConnect-DisplayConfig.png)  
  
4.  Выберите **Локальные ресурсы**.  
  
    ![Снимок экрана, который вызывает вкладку "Локальные ресурсы".](media/HyperV-VMConnect-DisplayConfig-LocalResources.png)  
  
5.  Нажмите кнопку **Дополнительно**.  
  
    ![Снимок экрана, который вызывает кнопку "Дополнительно".](media/HyperV-VMConnect-DisplayConfig-LocalResourcesMore.png)  
  
6.  Выберите диск, который нужно использовать на виртуальной машине, и нажмите кнопку **ОК**.  
  
    ![Снимок экрана, на котором показаны локальные ресурсы и диски, которые можно выбрать.](media/HyperV-VMConnect-Settings-LocalResourcesDrives.png)  
  
7.  Выберите **Сохранить мои параметры для подключения к этой виртуальной машине**.  
  
    ![Снимок экрана, который вызывает флажок для выбора этого параметра.](media/HyperV-VMConnect-SaveSettings.png)  
  
8.  Нажмите кнопку **Подключить**.  
  
## <a name="edit-vmconnect-settings"></a>Изменение параметров VMConnect

Для изменения параметров подключения VMConnect выполните следующую команду в командной строке или в Windows PowerShell:  
  
`VMConnect.exe <ServerName> <VMName> /edit`  
  
## <a name="requirements-for-using-local-resources"></a>Требования к использованию локальных ресурсов

Чтобы иметь возможность использовать локальные ресурсы компьютера на виртуальной машине, сделайте следующее:  
  
-   На узле Hyper-V должна быть включена **Политика режима расширенного сеанса** и включены параметры **расширенного режима сеанса** .  
  
-   Компьютер, на котором используется VMConnect, должен работать под управлением Windows 10, Windows 8.1, Windows Server 2016 или Windows Server 2012 R2.  
  
-   На виртуальной машине должны быть включены службы удаленных рабочих столов и запускать Windows 10, Windows 8.1, Windows Server 2016 или Windows Server 2012 R2 в качестве гостевой операционной системы.  
  
Если компьютер, на котором работает VMConnect, и виртуальная машина соответствуют требованиям, можно использовать любой из следующих локальных ресурсов, если они доступны:  
  
-   Конфигурация экрана  
  
-   Звук
  
-   Принтеры  
  
-   буферы обмена для копирования и вставки;  
  
-   Смарт-карты  
  
-   USB-устройства  
  
-   Накопители  
  
-   поддерживаемые самонастраивающиеся устройства;  
  
## <a name="why-use-a-computers-local-resources"></a>Зачем использовать локальные ресурсы компьютера?
Вам может потребоваться использовать локальные ресурсы компьютера для:  
  
-   устранение неполадок виртуальной машины без сетевого подключения к виртуальной машине;  
  
-   копирование файлов в виртуальную машину и из нее аналогично копированию с помощью подключения удаленного рабочего стола (RDP).  
  
-   вход в систему виртуальной машины с использованием смарт-карты;  
  
-   печать с виртуальной машины на локальном принтере;  
  
-   тестирование и устранение неполадок приложений разработчиков, требующих USB или перенаправление звука без использования RDP.  
  
## <a name="see-also"></a>См. также  
[Подключение к виртуальной машине](https://technet.microsoft.com/library/cc742407.aspx)  
[Следует ли создать виртуальную машину поколения 1 или 2 в Hyper-V?](../plan/Should-I-create-a-generation-1-or-2-virtual-machine-in-Hyper-V.md)



