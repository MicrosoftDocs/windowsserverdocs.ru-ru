---
title: Создайте виртуальный коммутатор для виртуальных машин Hyper-V
description: Инструкции по созданию виртуального коммутатора с помощью диспетчера Hyper-V или Windows PowerShell
ms.prod: windows-server-threshold
ms.service: na
manager: dongill
ms.technology: compute-hyper-v
ms.tgt_pltfrm: na
ms.topic: get-started-article
ms.assetid: fdc8063c-47ce-4448-b445-d7ff9894dc17
author: KBDAzure
ms.author: kathydav
ms.date: 10/04/2016
ms.openlocfilehash: e7c43a1b9173d347a3b6d6e1f8bd9127c62bd081
ms.sourcegitcommit: 0d0b32c8986ba7db9536e0b8648d4ddf9b03e452
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/17/2019
ms.locfileid: "59880225"
---
# <a name="create-a-virtual-switch-for-hyper-v-virtual-machines"></a>Создайте виртуальный коммутатор для виртуальных машин Hyper-V

>Область применения. Windows 10, Windows Server 2016, Microsoft Hyper-V Server 2016, Windows Server 2019 г., Microsoft Hyper-V Server 2019 г.
  
Виртуальный коммутатор позволяет виртуальным машинам, созданным на узлах Hyper-V для взаимодействия с другими компьютерами. Можно создать виртуальный коммутатор при установке роли Hyper-V в Windows Server. Чтобы создать дополнительные виртуальные коммутаторы, используйте диспетчер Hyper-V или Windows PowerShell. Дополнительные сведения о виртуальных коммутаторов, см. в разделе [виртуального коммутатора Hyper-V](../../hyper-v-virtual-switch/Hyper-V-Virtual-Switch.md).  
  
Виртуальной машины в сети может быть это сложная задача. И несколько новых компонентов виртуального коммутатора, которые можно использовать как [внедренных коммутаторов (SET)](../../hyper-v-virtual-switch/RDMA-and-Switch-Embedded-Teaming.md#bkmk_sswitchembedded). Но совсем не сложно сделать Базовая работа с сетью. В этом разделе, вполне достаточно, позволяют создавать сети виртуальных машин в Hyper-V. Дополнительные сведения о том, как можно настроить сетевую инфраструктуру, просмотрите [сети](../../../networking/Networking.md) документации.   
  
## <a name="BKMK_HyperVMan"></a>Создание виртуального коммутатора с помощью диспетчера Hyper-V  
  
1.  Откройте диспетчер Hyper-V, выберите имя компьютера узла Hyper-V.  
  
2.  Выберите **действие** > **диспетчер виртуальных коммутаторов**.  
  
    ![Снимок экрана, показывающий команды меню действия > Диспетчер виртуальных коммутаторов](../media/Hyper-V-Action-VSwitchManager.png)  
  
3.  Выберите тип виртуальный коммутатор.  
  
    |Тип подключения.|Описание|  
    |-------------------|---------------|  
    |Внешняя|Предоставляет доступ виртуальных машин к физической сети для взаимодействия с серверами и клиентами во внешней сети. Позволяет виртуальным машинам на одном сервере Hyper-V для взаимодействия друг с другом.|  
    |Внутренний|Обеспечивает связь между виртуальными машинами на одном сервере Hyper-V, а также между виртуальными машинами и операционной системы управления.|  
    |Private (Частное)|Разрешает только связь между виртуальными машинами на одном сервере Hyper-V. Частная сеть изолирована от всего внешнего сетевого трафика на сервере Hyper-V. Этот тип сети полезно в тех случаях, когда необходимо создать изолированную сетевую среду, например изолированный тестовый домен.|  
  
4.  Выберите **создать виртуальный коммутатор**.  
  
5.  Добавьте имя для виртуального коммутатора.  
  
6.  Если выбрать внешний, выберите сетевой адаптер (NIC), который вы хотите использовать и другие параметры, описанные в следующей таблице.  
  
    ![Снимок экрана: Параметры внешней сети](../media/Hyper-V-NewVSwitch-ExternalOptions.png)  
  
    |Имя параметра|Описание|  
    |----------------|---------------|  
    |Разрешить управляющей операционной системе предоставлять общий доступ к этому сетевому адаптеру|Выберите этот параметр, если вы хотите разрешить узел Hyper-V для совместного использования использование виртуального коммутатора, и сетевой Адаптер или ГРУППУ группы с виртуальной машиной. Эта функция включена узел может использовать какие-либо параметры, которые можно настроить для виртуального коммутатора, таких как параметры качества обслуживания (QoS), параметры безопасности или другие компоненты виртуального коммутатора Hyper-V.|  
    |Включение единой корневой виртуализации ввода-вывода (SR-IOV)|Выберите этот параметр только в том случае, если вы хотите разрешить трафик виртуальных машин обходить коммутатор виртуальной машины и перейти непосредственно к физического сетевого адаптера. Дополнительные сведения см. в разделе [единой корневой виртуализации ввода-вывода](https://technet.microsoft.com/library/dn641211.aspx#Sec4) справочника по поиску плакат: Сеть Hyper-V.|  
  
7.  Если вы хотите позволяет изолировать сетевой трафик из операционной системы управления Hyper-V или другими виртуальными машинами, которые совместно используют тому же виртуальному коммутатору, выберите **Разрешить идентификацию виртуальной локальной сети для управляющей операционной системе**. Можно изменить идентификатор виртуальной локальной сети ко множеству или оставить значение по умолчанию. Это виртуальный идентификационный номер локальной сети, которую Управляющая операционная система будет использовать для все сетевые подключения через этот виртуальный коммутатор.  
  
    ![Снимок экрана: параметры ИД виртуальной ЛС](../media/Hyper-V-NewSwitch-VLAN.png)  
  
8.  Нажмите кнопку **ОК**.  
  
9. нажмите кнопку **Да**.  
  
    ![Снимок экрана, показывающий сообщение «Ожидающие изменения могут нарушить сетевое подключение»](../media/Hyper-V-NewVSwitch-DisruptNetwork.png)  
  
## <a name="BKMK_WPS"></a>Создание виртуального коммутатора с помощью Windows PowerShell  
  
1.  На рабочем столе Windows нажмите кнопку "Пуск" и введите любую часть имени **Windows PowerShell**.  
  
2.  Щелкните правой кнопкой мыши Windows PowerShell и выберите **Запуск от имени администратора**.  
  
3.  Найти существующие сетевые адаптеры, выполнив [Get-NetAdapter](https://technet.microsoft.com/library/jj130867.aspx) командлета. Запомните или запишите имя сетевого адаптера, который вы хотите использовать для виртуального коммутатора.  
  
    ```  
    Get-NetAdapter  
    ```  
  
4.  Создание виртуального коммутатора с помощью [New-VMSwitch](https://technet.microsoft.com/library/hh848455.aspx) командлета. Например, чтобы создать внешний виртуальный коммутатор с именем ExternalSwitch, с помощью сетевого адаптера ethernet и с **разрешить управляющей операционной системе предоставлять общий доступ к этому сетевому адаптеру** включено, выполните следующую команду.  
  
    ```  
    New-VMSwitch -name ExternalSwitch  -NetAdapterName Ethernet -AllowManagementOS $true  
    ```  
  
    Чтобы создать внутренний коммутатор, выполните следующую команду.  
  
    ```  
    New-VMSwitch -name InternalSwitch -SwitchType Internal  
    ```  
  
    Чтобы создать закрытый ключ, выполните следующую команду.  
  
    ```  
    New-VMSwitch -name PrivateSwitch -SwitchType Private  
    ```  
  
Для более сложных сценариев Windows PowerShell, которые покрывают виртуального коммутатора, улучшенные или новые возможности в Windows Server 2016, см. в разделе [удаленный доступ к памяти и переключение Embedded Teaming](../../hyper-v-virtual-switch/RDMA-and-Switch-Embedded-Teaming.md).  

  
## <a name="next-step"></a>Дальнейшие действия  
[Создание виртуальной машины в Hyper-V](Create-a-virtual-machine-in-Hyper-V.md)  
  


