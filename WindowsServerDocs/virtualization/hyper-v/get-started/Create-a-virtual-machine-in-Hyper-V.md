---
title: Создание виртуальной машины в Hyper-V
description: Содержит инструкции по созданию виртуальной машины с помощью диспетчера Hyper-V или Windows PowerShell.
manager: dongill
ms.topic: get-started-article
ms.assetid: 59297022-a898-456c-b299-d79cd5860238
author: kbdazure
ms.author: kathydav
ms.date: 10/04/2016
ms.openlocfilehash: 22dc2e83f1c7370bfd6f97d821a83041a9c528fe
ms.sourcegitcommit: 68444968565667f86ee0586ed4c43da4ab24aaed
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/07/2020
ms.locfileid: "87996603"
---
# <a name="create-a-virtual-machine-in-hyper-v"></a>Создание виртуальной машины в Hyper-V

>Область применения: Windows 10, Windows Server 2016, Microsoft Hyper-V Server 2016, Windows Server 2019, Microsoft Hyper-V Server 2019

Узнайте, как создать виртуальную машину с помощью диспетчера Hyper-V и Windows PowerShell, а также какие параметры при создании виртуальной машины в диспетчере Hyper-V.

## <a name="create-a-virtual-machine-by-using-hyper-v-manager"></a>Создание виртуальной машины с помощью диспетчера Hyper-V

1.  Откройте **Диспетчер Hyper-V**.

2.  В области **действие** щелкните **создать**, а затем — **Виртуальная машина**.

3.  В **мастере создания виртуальной машины**нажмите кнопку **Далее**.

4.  Сделайте соответствующий выбор для виртуальной машины на каждой из страниц. Дополнительные сведения см. в подразделе [новые параметры и настройки виртуальной машины в диспетчере Hyper-V](#options-in-hyper-v-manager-new-virtual-machine-wizard) далее в этой статье.

5.  Проверив выбранные параметры на странице **Сводка** , нажмите кнопку **Готово**.

6.  В диспетчере Hyper-V щелкните правой кнопкой мыши виртуальную машину и выберите **подключить**.

7.  В окне Подключение к виртуальной машине выберите **действие**  >  **Запуск**.

## <a name="create-a-virtual-machine-by-using-windows-powershell"></a>Создание виртуальной машины с помощью Windows PowerShell

1. На рабочем столе Windows нажмите кнопку "Пуск" и введите любую часть имени **Windows PowerShell**.

2. Щелкните правой кнопкой мыши элемент **Windows PowerShell** и выберите пункт **Запуск от имени администратора**.

3. Получите имя виртуального коммутатора, который виртуальная машина должна использовать с помощью [Get-VMSwitch](/powershell/module/hyper-v/get-vmswitch?view=win10-ps).  например следующие.

   ```
   Get-VMSwitch  * | Format-Table Name
   ```

4. Создайте виртуальную машину с помощью командлета [New-VM](/powershell/module/hyper-v/new-vm?view=win10-ps) .  См. следующие примеры.

   > [!NOTE]
   > Если вы можете переместить эту виртуальную машину на узел Hyper-V под управлением Windows Server 2012 R2, используйте параметр-Version с командлетом [New-VM](/powershell/module/hyper-v/new-vm?view=win10-ps) , чтобы установить версию конфигурации виртуальной машины равным 5. Версия конфигурации виртуальной машины по умолчанию для Windows Server 2016 не поддерживается Windows Server 2012 R2 или более ранних версий. Невозможно изменить версию конфигурации виртуальной машины после создания виртуальной машины. Дополнительные сведения см. в статье [Поддерживаемые версии конфигурации виртуальных машин](../deploy/Upgrade-virtual-machine-version-in-Hyper-V-on-Windows-or-Windows-Server.md#supported-virtual-machine-configuration-versions).

   - **Существующий виртуальный жесткий диск** . чтобы создать виртуальную машину с существующим виртуальным жестким диском, можно использовать следующую команду, где
     - **-Name** — имя, которое вы задаете для создаваемой виртуальной машины.
     - **-MemoryStartupBytes** — объем памяти, доступной виртуальной машине при запуске.
     - **-Bootdevice** — это устройство, на которое загружается виртуальная машина, когда она запускается как сетевой адаптер (сетевого адаптера) или виртуальный жесткий диск (VHD).
     - **-VHDPath** — путь к диску виртуальной машины, который вы хотите использовать.
     - **-Path** — путь для хранения файлов конфигурации виртуальной машины.
     - **-Generation** поколение виртуальной машины. Используйте поколение 1 для VHD и поколение 2 для VHDX. Сведения о том [, как создать виртуальную машину поколения 1 или 2 в Hyper-V?.](../plan/Should-I-create-a-generation-1-or-2-virtual-machine-in-Hyper-V.md)
     - **-Switch** — имя виртуального коммутатора, который виртуальная машина должна использовать для подключения к другим виртуальным машинам или сети. См. раздел [Создание виртуального коммутатора для виртуальных машин Hyper-V](Create-a-virtual-switch-for-Hyper-V-virtual-machines.md).

       ```
       New-VM -Name <Name> -MemoryStartupBytes <Memory> -BootDevice <BootDevice> -VHDPath <VHDPath> -Path <Path> -Generation <Generation> -Switch <SwitchName>
       ```

       Например:

       ```
       New-VM -Name Win10VM -MemoryStartupBytes 4GB -BootDevice VHD -VHDPath .\VMs\Win10.vhdx -Path .\VMData -Generation 2 -Switch ExternalSwitch
       ```

       При этом создается виртуальная машина поколения 2 с именем Win10VM с 4 ГБ памяти. Она загружается из папки VMs\Win10.vhdx в текущий каталог и использует виртуальный коммутатор с именем ExternalSwitch. Файлы конфигурации виртуальной машины хранятся в папке VMData.

   - **Новый виртуальный жесткий диск** — чтобы создать виртуальную машину с новым виртуальным жестким диском, замените параметр **-VHDPath** из приведенного выше примера на **-неввхдпас** и добавьте параметр **-неввхдсизебитес** . например следующие.

     ```
     New-VM -Name Win10VM -MemoryStartupBytes 4GB -BootDevice VHD -NewVHDPath .\VMs\Win10.vhdx -Path .\VMData -NewVHDSizeBytes 20GB -Generation 2 -Switch ExternalSwitch
     ```

   - **Новый виртуальный жесткий диск, который загружается в образ операционной системы** . чтобы создать виртуальную машину с новым виртуальным диском, который загружается в образ операционной системы, см. пример PowerShell в разделе [Создание виртуальной машины для Hyper-V в Windows 10](/virtualization/hyper-v-on-windows/quick-start/create-virtual-machine).

5. Запустите виртуальную машину с помощью командлета [Start-VM](/powershell/module/hyper-v/start-vm?view=win10-ps) . Выполните следующий командлет, где name — имя созданной виртуальной машины.

   ```
   Start-VM -Name <Name>
   ```

   Например:

   ```
   Start-VM -Name Win10VM
   ```

6. Подключитесь к виртуальной машине с помощью подключения к виртуальной машине (VMConnect).

   ```
   VMConnect.exe
   ```

## <a name="options-in-hyper-v-manager-new-virtual-machine-wizard"></a>Параметры в мастере создания виртуальных машин диспетчера Hyper-V
В следующей таблице перечислены параметры, которые можно выбрать при создании виртуальной машины в диспетчере Hyper-V, и значения по умолчанию для каждого из них.

|Страница|По умолчанию для Windows Server 2016 и Windows 10|Другие варианты|
|--------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------|
|**Укажите имя и расположение**|Имя: Новая виртуальная машина.<p>Расположение: **к:\програмдата\микрософт\виндовс\хипер-в \\ **.|Можно также ввести собственное имя и выбрать другое расположение для виртуальной машины.<p>Здесь будут храниться файлы конфигурации виртуальной машины.|
|**Укажите поколение**|Поколение 1|Вы также можете создать виртуальную машину версии 2. Дополнительные сведения см [. в статье Создание виртуальной машины поколения 1 или 2 в Hyper-V.](../plan/Should-I-create-a-generation-1-or-2-virtual-machine-in-Hyper-V.md)|
|**Выделить память**|Память при запуске: 1024 МБ<p>Динамическая память: **не выбрано**|Можно настроить объем памяти при запуске с 32 МБ на 5902MB.<p>Можно также выбрать использование динамическая память. Дополнительные сведения см. в статье [обзор Динамическая память Hyper-V](/previous-versions/windows/it-pro/windows-server-2012-R2-and-2012/hh831766(v=ws.11)).|
|**Настройка сетевых подключений**|Не подключено|Вы можете выбрать сетевое подключение, чтобы виртуальная машина могла использовать ее из списка существующих виртуальных коммутаторов. См. раздел [Создание виртуального коммутатора для виртуальных машин Hyper-V](Create-a-virtual-switch-for-Hyper-V-virtual-machines.md).|
|**Подключить виртуальный жесткий диск**|Создать виртуальный жесткий диск<p>Имя: <*vmname*>. VHDX.<p>**Расположение**: **к:\усерс\публик\документс\хипер-в\виртуал жесткие диски \\ **<p>**Размер**: 127 Гб|Можно также выбрать использование существующего виртуального жесткого диска или подождать и подключить виртуальный жесткий диск позже.|
|**Параметры установки**|Установить операционную систему позже|Эти параметры изменяют порядок загрузки виртуальной машины, чтобы можно было выполнить установку из ISO-файла, загрузочного гибкого диска или службы сетевой установки, например служб развертывания Windows (WDS).|
|**Сводка**|Отображает выбранные параметры, чтобы вы могли проверить их правильность.<p>Name<br />Создание<br />— Память<br />— Сеть<br />— Жесткий диск<br />— Операционная система|**Совет.** Вы можете скопировать сводку со страницы и вставить ее в электронную почту или в другое место, чтобы помочь вам отследить виртуальные машины.|

## <a name="additional-references"></a>Дополнительные ссылки

- [New-VM](/powershell/module/hyper-v/new-vm?view=win10-ps)

- [Поддерживаемые версии конфигурации виртуальной машины](../deploy/Upgrade-virtual-machine-version-in-Hyper-V-on-Windows-or-Windows-Server.md#supported-virtual-machine-configuration-versions)

-   [Should I create a generation 1 or 2 virtual machine in Hyper-V?](../plan/Should-I-create-a-generation-1-or-2-virtual-machine-in-Hyper-V.md) (Следует ли создавать виртуальные машины 1-го и 2-го поколения в Hyper-V?).

-   [Создание виртуального коммутатора для виртуальных машин Hyper-V](Create-a-virtual-switch-for-Hyper-V-virtual-machines.md)