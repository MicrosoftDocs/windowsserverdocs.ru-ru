---
title: Создание виртуальной машины в Hyper-V
description: Предоставляет инструкции по созданию виртуальной машины с помощью диспетчера Hyper-V или Windows PowerShell
ms.prod: windows-server-threshold
ms.service: na
manager: dongill
ms.technology: compute-hyper-v
ms.tgt_pltfrm: na
ms.topic: get-started-article
ms.assetid: 59297022-a898-456c-b299-d79cd5860238
author: KBDAzure
ms.author: kathydav
ms.date: 10/04/2016
ms.openlocfilehash: 3b850d19663115b72d809af1ae92a444f5491496
ms.sourcegitcommit: 6ef4986391607bb28593852d06cc6645e548a4b3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/07/2019
ms.locfileid: "66810424"
---
# <a name="create-a-virtual-machine-in-hyper-v"></a>Создание виртуальной машины в Hyper-V

>Область применения. Windows 10, Windows Server 2016, Microsoft Hyper-V Server 2016, Windows Server 2019 г., Microsoft Hyper-V Server 2019 г.

Узнайте, как создать виртуальную машину с помощью диспетчера Hyper-V и при создании виртуальной машины в диспетчере Hyper-V у Windows PowerShell и доступные параметры.  

## <a name="create-a-virtual-machine-by-using-hyper-v-manager"></a>Создание виртуальной машины с помощью диспетчера Hyper-V  

1.  Откройте **диспетчера Hyper-V**.  

2.  Из **действие** панели щелкните **New**, а затем нажмите кнопку **виртуальной машины**.  

3.  Из **мастера создания виртуальной машины**, нажмите кнопку **Далее**.  

4.  Выбрать подходящие параметры для виртуальной машины на всех страницах. Дополнительные сведения см. в разделе [новые параметры виртуальной машины и значения по умолчанию в диспетчере Hyper-V](#options-in-hyper-v-manager-new-virtual-machine-wizard) далее в этом разделе.  

5.  После проверки выбора значений в **Сводка** щелкните **Готово**.  

6.  В диспетчере Hyper-V, щелкните правой кнопкой мыши виртуальную машину и выберите **подключения**.  

7.  В окне подключения к виртуальной машине выберите **действие** > **запустить**.  

## <a name="create-a-virtual-machine-by-using-windows-powershell"></a>Создание виртуальной машины с помощью Windows PowerShell  

1. На рабочем столе Windows нажмите кнопку "Пуск" и введите любую часть имени **Windows PowerShell**.  

2. Щелкните правой кнопкой мыши **Windows PowerShell** и выберите **Запуск от имени администратора**.  

3. Получите имя виртуального коммутатора, виртуальной машины для использования с помощью [Get-VMSwitch](https://technet.microsoft.com/library/hh848499.aspx).  Например:  

   ```  
   Get-VMSwitch  * | Format-Table Name  
   ```  

4. Используйте [New-VM](https://technet.microsoft.com/library/hh848537.aspx) командлет, чтобы создать виртуальную машину.  См. следующие примеры.  

   > [!NOTE]  
   > Если эта виртуальная машина может переместить на узел Hyper-V под управлением Windows Server 2012 R2, используйте параметр - версии с [New-VM](https://technet.microsoft.com/library/hh848537.aspx) задать версию конфигурации виртуальной машины равным 5. Версия конфигурации виртуальной машины по умолчанию для Windows Server 2016 не поддерживается в Windows Server 2012 R2 или более ранних версий. Версия конфигурации виртуальной машины невозможно изменить после создания виртуальной машины. Дополнительные сведения см. в разделе [поддерживаемые версии конфигурации виртуальной машины](../deploy/Upgrade-virtual-machine-version-in-Hyper-V-on-Windows-or-Windows-Server.md#supported-virtual-machine-configuration-versions).  

   - **Существующий виртуальный жесткий диск** - о создании виртуальной машины с существующего виртуального жесткого диска, можно использовать следующую команду where,  
     - **-Name** — это имя, указываемое для виртуальной машины, который вы создаете.  
     - **-MemoryStartupBytes** — это объем памяти, доступной для виртуальной машины во время запуска.  
     - **-BootDevice** — устройство, которое виртуальная машина загружается при запуске как сетевой адаптер (сетевого адаптера), или виртуального жесткого диска (VHD).  
     - **-VHDPath** — это путь к диску виртуальной машины, который вы хотите использовать.  
     - **-Path** — это путь для хранения файлов конфигурации виртуальной машины.  
     - **— Это** — это поколение виртуальной машины. Используйте создание 1 для виртуального жесткого диска и поколения 2 для vhdx-файлов. См. в разделе [следует ли создавать виртуальные машины поколения 1 или 2 в Hyper-V?.](../plan/Should-I-create-a-generation-1-or-2-virtual-machine-in-Hyper-V.md)  
     - **-Переключение** имя виртуального коммутатора, который вы хотите использовать для подключения к другим виртуальным машинам или сети виртуальной машины. См. в разделе [создать виртуальный коммутатор для виртуальных машин Hyper-V](Create-a-virtual-switch-for-Hyper-V-virtual-machines.md).  

       ```  
       New-VM -Name <Name> -MemoryStartupBytes <Memory> -BootDevice <BootDevice> -VHDPath <VHDPath> -Path <Path> -Generation <Generation> -Switch <SwitchName>  
       ```  

       Пример:  

       ```  
       New-VM -Name Win10VM -MemoryStartupBytes 4GB -BootDevice VHD -VHDPath .\VMs\Win10.vhdx -Path .\VMData -Generation 2 -Switch ExternalSwitch  
       ```  

       При этом создается с именем Win10VM с 4 ГБ памяти виртуальной машины поколения 2. Он загружается из папки VMs\Win10.vhdx в текущем каталоге и использует виртуальный коммутатор с именем ExternalSwitch. Файлы конфигурации виртуальной машины хранятся в папке VMData.  

   - **Новый виртуальный жесткий диск** - Чтобы создать виртуальную машину с помощью нового виртуального жесткого диска, замените **- VHDPath** параметром в предыдущем примере с **- NewVHDPath** и добавьте **- NewVHDSizeBytes** параметра. Например:  

     ```  
     New-VM -Name Win10VM -MemoryStartupBytes 4GB -BootDevice VHD -NewVHDPath .\VMs\Win10.vhdx -Path .\VMData -NewVHDSizeBytes 20GB -Generation 2 -Switch ExternalSwitch  
     ```  

   - **Новый виртуальный жесткий диск, который загружается образ операционной системы** - о создании виртуальной машины с помощью нового виртуального диска, который загружается в образ операционной системы, см. пример PowerShell в [Создание виртуальной машины Пошаговое руководство по Hyper-V на Windows 10](https://msdn.microsoft.com/virtualization/hyperv_on_windows/quick_start/walkthrough_create_vm).  

5. Запустите виртуальную машину с помощью [Start-VM](https://technet.microsoft.com/library/hh848589.aspx) командлета. Выполните следующий командлет, где имя — имя виртуальной машины, которую вы создали.  

   ```  
   Start-VM -Name <Name>  
   ```  

   Пример:  

   ```  
   Start-VM -Name Win10VM  
   ```  

6. Подключитесь к виртуальной машине с помощью подключения к виртуальной машине (VMConnect).  

   ```  
   VMConnect.exe  
   ```  

## <a name="options-in-hyper-v-manager-new-virtual-machine-wizard"></a>Параметры в мастере создания виртуальной машины в диспетчере Hyper-V  
Ниже перечислены параметры, которые можно выбрать при создании виртуальной машины в диспетчере Hyper-V и значения по умолчанию для каждого.  

|Page|Значение по умолчанию для Windows Server 2016 и Windows 10|Другие параметры|  
|--------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------|  
|**Укажите имя и расположение**|Имя:  Новую виртуальную машину.<br /><br />Расположение:  **C:\ProgramData\Microsoft\Windows\Hyper-V\\** .|Кроме того, можно также введите собственное имя и выбрать другое расположение для виртуальной машины.<br /><br />Это будут храниться файлы конфигурации виртуальной машины.|  
|**Укажите поколение**|Поколение 1|Также можно создать виртуальную машину поколения 2. Дополнительные сведения см. в разделе [следует ли создавать виртуальные машины поколения 1 или 2 в Hyper-V?.](../plan/Should-I-create-a-generation-1-or-2-virtual-machine-in-Hyper-V.md)|  
|**Выделить память**|Память при запуске: 1024 МБ<br /><br />Динамическая память: **не выбран**|Память при запуске можно задать от 32 МБ до 5902 МБ.<br /><br />Кроме того, можно также выбрать для использования динамической памяти. Дополнительные сведения см. в разделе [Hyper-V Dynamic Memory Overview](https://technet.microsoft.com/library/hh831766.aspx).|  
|**Настройка сетевых подключений**|Не подключен|Можно выбрать сетевое подключение для виртуальной машины из списка существующих виртуальных коммутаторов. См. в разделе [создать виртуальный коммутатор для виртуальных машин Hyper-V](Create-a-virtual-switch-for-Hyper-V-virtual-machines.md).|  
|**Подключить виртуальный жесткий диск**|Создать виртуальный жесткий диск<br /><br />Имя: <*vmname*> .vhdx<br /><br />**Расположение**. **C:\Users\Public\Documents\Hyper-V\Virtual жестких дисков\\**<br /><br />**Размер**: 127 ГБ|Также можно использовать существующий виртуальный жесткий диск или подождите и подключить виртуальный жесткий диск позднее.|  
|**Параметры установки**|Установить операционную систему более поздней версии|Эти параметры изменить порядок загрузки виртуальной машины, на котором можно установить из ISO-файл, загрузочную дискету или сетевой службой установки, таких как службы развертывания Windows (WDS).|  
|**Сводка**|Отображает параметры, которые вы выбрали, таким образом, чтобы узнать, что они верны.<br /><br />-Имя<br />-Создание<br />-Памяти<br />-Сети<br />-Жесткого диска<br />-Операционной системы|**Совет.** Можно скопировать на странице сводки и вставьте его в сообщение электронной почты или где-то еще, помогающие отслеживать виртуальные машины.|  

## <a name="see-also"></a>См. также  

- [New-VM](https://technet.microsoft.com/library/hh848537.aspx)  

- [Поддерживаемые версии виртуальных машин конфигурации](../deploy/Upgrade-virtual-machine-version-in-Hyper-V-on-Windows-or-Windows-Server.md#supported-virtual-machine-configuration-versions)  

-   [Следует ли создавать виртуальные машины поколения 1 или 2 в Hyper-V?](../plan/Should-I-create-a-generation-1-or-2-virtual-machine-in-Hyper-V.md)  

-   [Создание виртуального коммутатора для виртуальных машин Hyper-V](Create-a-virtual-switch-for-Hyper-V-virtual-machines.md)  
