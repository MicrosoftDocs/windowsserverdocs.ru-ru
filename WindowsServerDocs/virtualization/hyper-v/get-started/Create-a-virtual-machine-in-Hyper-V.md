---
title: Создание виртуальной машины в Hyper-V
description: Содержит инструкции по созданию виртуальной машины с помощью диспетчера Hyper-V или Windows PowerShell.
ms.prod: windows-server
manager: dongill
ms.technology: compute-hyper-v
ms.topic: get-started-article
ms.assetid: 59297022-a898-456c-b299-d79cd5860238
author: kbdazure
ms.author: kathydav
ms.date: 10/04/2016
ms.openlocfilehash: fa8d23a184f7be4c55b4a694b38501edb43d661c
ms.sourcegitcommit: b00d7c8968c4adc8f699dbee694afe6ed36bc9de
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/08/2020
ms.locfileid: "80860857"
---
# <a name="create-a-virtual-machine-in-hyper-v"></a>Создание виртуальной машины в Hyper-V

>Область применения: Windows 10, Windows Server 2016, Microsoft Hyper-V Server 2016, Windows Server 2019, Microsoft Hyper-V Server 2019

Узнайте, как создать виртуальную машину с помощью диспетчера Hyper-V и Windows PowerShell, а также какие параметры при создании виртуальной машины в диспетчере Hyper-V.  

## <a name="create-a-virtual-machine-by-using-hyper-v-manager"></a>Создание виртуальной машины с помощью диспетчера Hyper-V  

1.  Откройте **Диспетчер Hyper-V**.  

2.  В области **действие** щелкните **создать**, а затем — **Виртуальная машина**.  

3.  В **мастере создания виртуальной машины**нажмите кнопку **Далее**.  

4.  Сделайте соответствующий выбор для виртуальной машины на каждой из страниц. Дополнительные сведения см. в подразделе [новые параметры и настройки виртуальной машины в диспетчере Hyper-V](#options-in-hyper-v-manager-new-virtual-machine-wizard) далее в этой статье.  

5.  Проверив выбранные параметры на странице **Сводка** , нажмите кнопку **Готово**.  

6.  В диспетчере Hyper-V щелкните правой кнопкой мыши виртуальную машину и выберите **подключить**.  

7.  В окне Подключение к виртуальной машине выберите **действие** > **запустить**.  

## <a name="create-a-virtual-machine-by-using-windows-powershell"></a>Создание виртуальной машины с помощью Windows PowerShell  

1. На рабочем столе Windows нажмите кнопку "Пуск" и введите любую часть имени **Windows PowerShell**.  

2. Щелкните правой кнопкой мыши **Windows PowerShell** и выберите команду **Запуск от имени администратора**.  

3. Получите имя виртуального коммутатора, который виртуальная машина должна использовать с помощью [Get-VMSwitch](https://technet.microsoft.com/library/hh848499.aspx).  Пример:  

   ```  
   Get-VMSwitch  * | Format-Table Name  
   ```  

4. Создайте виртуальную машину с помощью командлета [New-VM](https://technet.microsoft.com/library/hh848537.aspx) .  См. следующие примеры.  

   > [!NOTE]  
   > Если вы можете переместить эту виртуальную машину на узел Hyper-V под управлением Windows Server 2012 R2, используйте параметр-Version с командлетом [New-VM](https://technet.microsoft.com/library/hh848537.aspx) , чтобы установить версию конфигурации виртуальной машины равным 5. Версия конфигурации виртуальной машины по умолчанию для Windows Server 2016 не поддерживается Windows Server 2012 R2 или более ранних версий. Невозможно изменить версию конфигурации виртуальной машины после создания виртуальной машины. Дополнительные сведения см. в статье [Поддерживаемые версии конфигурации виртуальных машин](../deploy/Upgrade-virtual-machine-version-in-Hyper-V-on-Windows-or-Windows-Server.md#supported-virtual-machine-configuration-versions).  

   - **Существующий виртуальный жесткий диск** . чтобы создать виртуальную машину с существующим виртуальным жестким диском, можно использовать следующую команду, где  
     - **-Name** — это имя, которое вы задаете для создаваемой виртуальной машины.  
     - **-Мемористартупбитес** — объем памяти, доступной виртуальной машине при запуске.  
     - **-Bootdevice** — это устройство, на которое загружается виртуальная машина, когда она запускается как сетевой адаптер (сетевого адаптера) или виртуальный жесткий диск (VHD).  
     - **-VHDPath** — это путь к диску виртуальной машины, который вы хотите использовать.  
     - **-Path** — путь для хранения файлов конфигурации виртуальной машины.  
     - **— Поколение** — это создание виртуальной машины. Используйте поколение 1 для VHD и поколение 2 для VHDX. Сведения о том [, как создать виртуальную машину поколения 1 или 2 в Hyper-V?.](../plan/Should-I-create-a-generation-1-or-2-virtual-machine-in-Hyper-V.md)  
     - **-Switch** — это имя виртуального коммутатора, который виртуальная машина будет использовать для подключения к другим виртуальным машинам или сети. См. раздел [Создание виртуального коммутатора для виртуальных машин Hyper-V](Create-a-virtual-switch-for-Hyper-V-virtual-machines.md).  

       ```  
       New-VM -Name <Name> -MemoryStartupBytes <Memory> -BootDevice <BootDevice> -VHDPath <VHDPath> -Path <Path> -Generation <Generation> -Switch <SwitchName>  
       ```  

       Например:  

       ```  
       New-VM -Name Win10VM -MemoryStartupBytes 4GB -BootDevice VHD -VHDPath .\VMs\Win10.vhdx -Path .\VMData -Generation 2 -Switch ExternalSwitch  
       ```  

       При этом создается виртуальная машина поколения 2 с именем Win10VM с 4 ГБ памяти. Он загружается из папки VMs\Win10.vhdx в текущем каталоге и использует виртуальный коммутатор с именем Екстерналсвитч. Файлы конфигурации виртуальной машины хранятся в папке Вмдата.  

   - **Новый виртуальный жесткий диск** — чтобы создать виртуальную машину с новым виртуальным жестким диском, замените параметр **-VHDPath** из приведенного выше примера на **-неввхдпас** и добавьте параметр **-неввхдсизебитес** . Пример:  

     ```  
     New-VM -Name Win10VM -MemoryStartupBytes 4GB -BootDevice VHD -NewVHDPath .\VMs\Win10.vhdx -Path .\VMData -NewVHDSizeBytes 20GB -Generation 2 -Switch ExternalSwitch  
     ```  

   - **Новый виртуальный жесткий диск, который загружается в образ операционной системы** . чтобы создать виртуальную машину с новым виртуальным диском, который загружается в образ операционной системы, см. пример PowerShell в разделе [Создание виртуальной машины для Hyper-V в Windows 10](https://msdn.microsoft.com/virtualization/hyperv_on_windows/quick_start/walkthrough_create_vm).  

5. Запустите виртуальную машину с помощью командлета [Start-VM](https://technet.microsoft.com/library/hh848589.aspx) . Выполните следующий командлет, где name — имя созданной виртуальной машины.  

   ```  
   Start-VM -Name <Name>  
   ```  

   Например:  

   ```  
   Start-VM -Name Win10VM  
   ```  

6. Подключитесь к виртуальной машине с помощью подключения к виртуальной машине (VMConnect).  

   ```  
   VMConnect.exe  
   ```  

## <a name="options-in-hyper-v-manager-new-virtual-machine-wizard"></a>Параметры в мастере создания виртуальных машин диспетчера Hyper-V  
В следующей таблице перечислены параметры, которые можно выбрать при создании виртуальной машины в диспетчере Hyper-V, и значения по умолчанию для каждого из них.  

|Страница|По умолчанию для Windows Server 2016 и Windows 10|Другие параметры|  
|--------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------|  
|**Укажите имя и расположение**|Имя: Новая виртуальная машина.<p>Расположение: **к:\програмдата\микрософт\виндовс\хипер-в\\** .|Можно также ввести собственное имя и выбрать другое расположение для виртуальной машины.<p>Здесь будут храниться файлы конфигурации виртуальной машины.|  
|**Укажите поколение**|Поколение 1|Вы также можете создать виртуальную машину версии 2. Дополнительные сведения см [. в статье Создание виртуальной машины поколения 1 или 2 в Hyper-V.](../plan/Should-I-create-a-generation-1-or-2-virtual-machine-in-Hyper-V.md)|  
|**Выделить память**|Память при запуске: 1024 МБ<p>Динамическая память: **не выбрано**|Можно настроить объем памяти при запуске с 32 МБ на 5902MB.<p>Можно также выбрать использование динамическая память. Дополнительные сведения см. в статье [обзор Динамическая память Hyper-V](https://technet.microsoft.com/library/hh831766.aspx).|  
|**Настройка сетевых подключений**|Не подключено|Вы можете выбрать сетевое подключение, чтобы виртуальная машина могла использовать ее из списка существующих виртуальных коммутаторов. См. раздел [Создание виртуального коммутатора для виртуальных машин Hyper-V](Create-a-virtual-switch-for-Hyper-V-virtual-machines.md).|  
|**Подключить виртуальный жесткий диск**|Создать виртуальный жесткий диск<p>Имя: <*vmname*>. VHDX.<p>**Расположение**: **к:\усерс\публик\документс\хипер-в\виртуал жесткие диски\\**<p>**Размер**: 127 Гб|Можно также выбрать использование существующего виртуального жесткого диска или подождать и подключить виртуальный жесткий диск позже.|  
|**Параметры установки**|Установить операционную систему позже|Эти параметры изменяют порядок загрузки виртуальной машины, чтобы можно было выполнить установку из ISO-файла, загрузочного гибкого диска или службы сетевой установки, например служб развертывания Windows (WDS).|  
|**Сводка**|Отображает выбранные параметры, чтобы вы могли проверить их правильность.<p>-Имя<br />Создание<br />— Память<br />— Сеть<br />— Жесткий диск<br />— Операционная система|**Совет.** Вы можете скопировать сводку со страницы и вставить ее в электронную почту или в другое место, чтобы помочь вам отследить виртуальные машины.|  

## <a name="see-also"></a>См. также:  

- [Создание виртуальной машины](https://technet.microsoft.com/library/hh848537.aspx)  

- [Поддерживаемые версии конфигурации виртуальной машины](../deploy/Upgrade-virtual-machine-version-in-Hyper-V-on-Windows-or-Windows-Server.md#supported-virtual-machine-configuration-versions)  

-   [Should I create a generation 1 or 2 virtual machine in Hyper-V?](../plan/Should-I-create-a-generation-1-or-2-virtual-machine-in-Hyper-V.md) (Следует ли создавать виртуальные машины 1-го и 2-го поколения в Hyper-V?).  

-   [Создание виртуального коммутатора для виртуальных машин Hyper-V](Create-a-virtual-switch-for-Hyper-V-virtual-machines.md)  
