---
title: Настройка и просмотр параметров виртуальной локальной сети на портах виртуального коммутатора Hyper-V
description: В этом разделе можно использовать дополнительные рекомендации по настройке и просмотр параметров виртуальной локальной сети (VLAN) через порт виртуального коммутатора Hyper-V в Windows Server 2016.
manager: brianlic
ms.prod: windows-server-threshold
ms.technology: networking-hv-switch
ms.topic: article
ms.assetid: 69e0e28a-98ae-4ade-bd27-ce2ad7eb310f
ms.author: pashort
author: shortpatti
ms.openlocfilehash: 1e4843b0ffee86d728736ae212b953bb7c8552c0
ms.sourcegitcommit: 0d0b32c8986ba7db9536e0b8648d4ddf9b03e452
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/17/2019
ms.locfileid: "59820555"
---
# <a name="configure-and-view-vlan-settings-on-hyper-v-virtual-switch-ports"></a>Настройка и просмотр параметров виртуальной локальной сети на портах виртуального коммутатора Hyper-V

>Область применения. Windows Server (полугодовой канал), Windows Server 2016

В этом разделе можно использовать дополнительные рекомендации по настройке и просмотр параметров виртуальной локальной сети (VLAN) через порт виртуального коммутатора Hyper-V.

Если вы хотите настроить параметры виртуальной локальной сети к портам виртуального коммутатора Hyper-V, можно использовать либо Windows&reg; Server 2016 Hyper-V Manager или System Center Virtual Machine Manager (VMM).

Если вы используете VMM, VMM использует следующую команду Windows PowerShell для настройки порта коммутатора.

```
Set-VMNetworkAdapterIsolation <VM-name|-managementOS> -IsolationMode VLAN -DefaultIsolationID <vlan-value> -AllowUntaggedTraffic $True
```
Если вы не используете VMM и при настройке порта коммутатора в Windows Server, можно использовать консоль диспетчера Hyper-V или следующую команду Windows PowerShell.
```
Set-VMNetworkAdapterVlan <VM-name|-managementOS> -Access -VlanID <vlan-value>
```

Из-за этих двух методов для настройки параметров виртуальной локальной сети на портах виртуального коммутатора Hyper-V вполне возможно, что при попытке просмотра параметров порта коммутатора, он отображается вам что параметры виртуальной локальной сети не настроены - даже в том случае, если они настроены.

## <a name="use-the-same-method-to-configure-and-view-switch-port-vlan-settings"></a>Используйте тот же метод для настройки и просмотра параметров виртуальной локальной сети порт коммутатора

Чтобы убедиться, что эти проблемы не возникает, необходимо использовать тот же метод для просмотра параметров виртуальной локальной сети порт коммутатора, которая использовалась для настройки параметров коммутатора портов виртуальной локальной сети.

Чтобы настроить и просмотреть параметры порта коммутатора виртуальной локальной сети, выполните следующие действия.

- Если вы используете VMM или сетевого контроллера для настройки и управления сетью и вы развернули программно определяемой сети (SDN), необходимо использовать **VMNetworkAdapterIsolation** командлетов. 
- Если вы используете Windows Server 2016 Hyper-V Manager или Windows PowerShell командлеты, и вы не развернули программно определяемой сети (SDN), необходимо использовать **VMNetworkAdapterVlan** командлетов.

### <a name="possible-issues"></a>Возможные проблемы

Если не следовать рекомендациям, могут возникнуть следующие проблемы.

- В случаях, когда вы развернули SDN и с помощью VMM, сетевой контроллер, или **VMNetworkAdapterIsolation** командлеты для настройки параметров виртуальной локальной сети через порт виртуального коммутатора Hyper-V: Если вы используете Диспетчер Hyper-V или **получить VMNetworkAdapterVlan** Чтобы просмотреть параметры конфигурации, выходные данные команды не отобразит параметры виртуальной локальной сети. Вместо этого необходимо использовать **Get VMNetworkIsolation** командлет, чтобы просмотреть параметры виртуальной локальной сети.
- В случаях, где вы не развернули SDN и вместо этого используйте диспетчер Hyper-V или **VMNetworkAdapterVlan** командлеты для настройки параметров виртуальной локальной сети через порт виртуального коммутатора Hyper-V: Если вы используете **Get VMNetworkIsolation** командлет, чтобы просмотреть параметры конфигурации, выходные данные команды не отобразит параметры виртуальной локальной сети. Вместо этого необходимо использовать **получить VMNetworkAdapterVlan** командлет, чтобы просмотреть параметры виртуальной локальной сети.

Важно также не пытайтесь настроить те же параметры виртуальной локальной сети для порта коммутатора с помощью обоих методов конфигурации. После этого он неправильно настроен порт коммутатора, и результатом может быть сбой сетевого подключения.

### <a name="resources"></a>Ресурсы

Дополнительные сведения о командах Windows PowerShell, описанные в этом разделе см. в следующих:

- [SET-VmNetworkAdapterIsolation](https://technet.microsoft.com/library/dn464283.aspx)
- [Get-VmNetworkAdapterIsolation](https://technet.microsoft.com/library/dn464277.aspx)
- [Set-VMNetworkAdapterVlan](https://technet.microsoft.com/library/hh848475.aspx)
- [Get-VMNetworkAdapterVlan](https://technet.microsoft.com/library/hh848516.aspx)





