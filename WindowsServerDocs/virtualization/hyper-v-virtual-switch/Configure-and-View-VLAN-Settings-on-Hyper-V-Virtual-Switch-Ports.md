---
title: Настройка и просмотр параметров виртуальной локальной сети на портах виртуального коммутатора Hyper-V
description: С помощью этого раздела вы узнаете о рекомендациях по настройке и просмотру параметров виртуальной локальной сети (VLAN) на порте виртуального коммутатора Hyper-V в Windows Server 2016.
manager: brianlic
ms.topic: article
ms.assetid: 69e0e28a-98ae-4ade-bd27-ce2ad7eb310f
ms.author: lizross
author: eross-msft
ms.openlocfilehash: 3f359656a42100e79c475a0ca3f55251731f8222
ms.sourcegitcommit: d08965d64f4a40ac20bc81b14f2d2ea89c48c5c8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/08/2020
ms.locfileid: "96865104"
---
# <a name="configure-and-view-vlan-settings-on-hyper-v-virtual-switch-ports"></a>Настройка и просмотр параметров виртуальной локальной сети на портах виртуального коммутатора Hyper-V

>Область применения. Windows Server (Semi-Annual Channel), Windows Server 2016

С помощью этого раздела вы узнаете о рекомендациях по настройке и просмотру параметров виртуальной локальной сети (VLAN) на порте виртуального коммутатора Hyper-V.

Если вы хотите настроить параметры виртуальной ЛС на портах виртуального коммутатора Hyper-V, можно использовать &reg; Диспетчер Hyper-v или System Center Virtual Machine Manager (VMM) Windows Server 2016.

Если вы используете VMM, VMM использует следующую команду Windows PowerShell для настройки порта коммутатора.

```powershell
Set-VMNetworkAdapterIsolation <VM-name|-ManagementOS -IsolationMode VLAN -DefaultIsolationID <vlan-value> -AllowUntaggedTraffic $True
```
Если вы не используете VMM и настраиваете порт коммутатора в Windows Server, можно использовать консоль диспетчера Hyper-V или следующую команду Windows PowerShell.
```powershell
Set-VMNetworkAdapterVlan <VM-name|-managementOS> -Access -VlanID <vlan-value>
```

Из-за этих двух методов настройки параметров виртуальной ЛС на портах виртуального коммутатора Hyper-V возможно, что при попытке просмотреть параметры порта коммутатора не настроены параметры виртуальной ЛС, даже если они настроены.

## <a name="use-the-same-method-to-configure-and-view-switch-port-vlan-settings"></a>Используйте тот же метод для настройки и просмотра параметров виртуальной ЛС для порта коммутатора.

Чтобы убедиться, что эти проблемы не возникают, необходимо использовать тот же метод для просмотра параметров виртуальной ЛС порта коммутатора, которые использовались для настройки параметров VLAN для порта коммутатора.

Чтобы настроить и просмотреть параметры порта коммутатора виртуальной ЛС, необходимо выполнить следующие действия.

- Если вы используете VMM или сетевой контроллер для настройки и управления сетью и развернули программно-определяемую сеть (SDN), необходимо использовать командлеты **вмнетворкадаптерисолатион** .
- Если вы используете диспетчер Hyper-V для Windows Server 2016 или командлеты Windows PowerShell и не развернули программно-определяемую сеть (SDN), необходимо использовать командлеты **вмнетворкадаптервлан** .

### <a name="possible-issues"></a>Возможные проблемы

Если не следовать этим рекомендациям, могут возникнуть следующие проблемы.

- В случаях, когда вы развернули SDN и используете VMM, сетевой контроллер или командлеты **вмнетворкадаптерисолатион** для настройки параметров виртуальной ЛС на порте виртуального коммутатора Hyper-V: Если вы используете диспетчер Hyper-v или **получите вмнетворкадаптервлан** для просмотра параметров конфигурации, в выходных данных команды не отображаются параметры виртуальной ЛС. Вместо этого для просмотра параметров виртуальной ЛС необходимо использовать командлет **Get-вмнетворкисолатион** .
- В случаях, когда вы не развернули SDN, вместо этого используйте диспетчер Hyper-V или командлеты **вмнетворкадаптервлан** для настройки параметров виртуальной ЛС на порте виртуального коммутатора Hyper-V. Если вы используете командлет **Get-вмнетворкисолатион** для просмотра параметров конфигурации, в выходных данных команды не отображаются параметры виртуальной ЛС. Вместо этого для просмотра параметров виртуальной ЛС необходимо использовать командлет **Get вмнетворкадаптервлан** .

Также важно не пытаться настроить те же параметры виртуальной ЛС для порта коммутатора с помощью обоих методов настройки. В этом случае порт коммутатора будет неправильно настроен, а результат может быть неудачным при сетевом взаимодействии.

### <a name="resources"></a>Ресурсы

Дополнительные сведения о командах Windows PowerShell, указанных в этом разделе, см. в следующих разделах:

- [Set-Вмнетворкадаптерисолатион](/powershell/module/hyper-v/set-vmnetworkadapterisolation)
- [Get-Вмнетворкадаптерисолатион](/powershell/module/hyper-v/get-vmnetworkadapterisolation)
- [Set-Вмнетворкадаптервлан](/powershell/module/hyper-v/set-vmnetworkadaptervlan)
- [Get-Вмнетворкадаптервлан](/powershell/module/hyper-v/get-vmnetworkadaptervlan)
