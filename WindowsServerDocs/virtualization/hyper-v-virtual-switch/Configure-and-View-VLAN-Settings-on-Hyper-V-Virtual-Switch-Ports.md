---
title: Настройка и просмотр параметров виртуальной локальной сети на портах виртуального коммутатора Hyper-V
description: С помощью этого раздела вы узнаете о рекомендациях по настройке и просмотру параметров виртуальной локальной сети (VLAN) на порте виртуального коммутатора Hyper-V в Windows Server 2016.
manager: brianlic
ms.prod: windows-server
ms.technology: networking-hv-switch
ms.topic: article
ms.assetid: 69e0e28a-98ae-4ade-bd27-ce2ad7eb310f
ms.author: pashort
author: shortpatti
ms.openlocfilehash: 28abdfe8295ad3f9fac29b8cc80aeebe2992392c
ms.sourcegitcommit: 6aff3d88ff22ea141a6ea6572a5ad8dd6321f199
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/27/2019
ms.locfileid: "71366873"
---
# <a name="configure-and-view-vlan-settings-on-hyper-v-virtual-switch-ports"></a>Настройка и просмотр параметров виртуальной локальной сети на портах виртуального коммутатора Hyper-V

>Область применения. Windows Server (Semi-Annual Channel), Windows Server 2016

С помощью этого раздела вы узнаете о рекомендациях по настройке и просмотру параметров виртуальной локальной сети (VLAN) на порте виртуального коммутатора Hyper-V.

Если вы хотите настроить параметры виртуальной ЛС на портах виртуального коммутатора Hyper-V, можно использовать либо Windows @ no__t-0 Server 2016, либо диспетчер Hyper-V, либо System Center Virtual Machine Manager (VMM).

Если вы используете VMM, VMM использует следующую команду Windows PowerShell для настройки порта коммутатора.

```
Set-VMNetworkAdapterIsolation <VM-name|-managementOS> -IsolationMode VLAN -DefaultIsolationID <vlan-value> -AllowUntaggedTraffic $True
```
Если вы не используете VMM и настраиваете порт коммутатора в Windows Server, можно использовать консоль диспетчера Hyper-V или следующую команду Windows PowerShell.
```
Set-VMNetworkAdapterVlan <VM-name|-managementOS> -Access -VlanID <vlan-value>
```

Из-за этих двух методов настройки параметров виртуальной ЛС на портах виртуального коммутатора Hyper-V возможно, что при попытке просмотреть параметры порта коммутатора не настроены параметры виртуальной ЛС, даже если они настроены.

## <a name="use-the-same-method-to-configure-and-view-switch-port-vlan-settings"></a>Используйте тот же метод для настройки и просмотра параметров виртуальной ЛС для порта коммутатора.

Чтобы убедиться, что эти проблемы не возникают, необходимо использовать тот же метод для просмотра параметров виртуальной ЛС порта коммутатора, которые использовались для настройки параметров VLAN для порта коммутатора.

Чтобы настроить и просмотреть параметры порта коммутатора виртуальной ЛС, необходимо выполнить следующие действия.

- Если вы используете VMM или сетевой контроллер для настройки и управления сетью и развернули программно-определяемую сеть (SDN), необходимо использовать командлеты **вмнетворкадаптерисолатион** . 
- Если вы используете диспетчер Hyper-V для Windows Server 2016 или командлеты Windows PowerShell и не развернули программно-определяемую сеть (SDN), необходимо использовать командлеты **вмнетворкадаптервлан** .

### <a name="possible-issues"></a>Возможные проблемы

Если не следовать этим рекомендациям, могут возникнуть следующие проблемы.

- В случаях, когда вы развернули SDN и используете VMM, сетевой контроллер или командлеты **вмнетворкадаптерисолатион** для настройки параметров виртуальной ЛС в порте виртуального коммутатора Hyper-V: Если вы используете диспетчер Hyper-V или **получите вмнетворкадаптервлан** для просмотра параметров конфигурации, выходные данные команды не будут отображать параметры виртуальной ЛС. Вместо этого для просмотра параметров виртуальной ЛС необходимо использовать командлет **Get-вмнетворкисолатион** .
- В случаях, когда вы не развернули SDN, вместо этого используйте диспетчер Hyper-V или командлеты **вмнетворкадаптервлан** для настройки параметров виртуальной ЛС в порте виртуального коммутатора Hyper-V: При использовании командлета **Get-вмнетворкисолатион** для просмотра параметров конфигурации выходные данные команды не будут отображать параметры виртуальной ЛС. Вместо этого для просмотра параметров виртуальной ЛС необходимо использовать командлет **Get вмнетворкадаптервлан** .

Также важно не пытаться настроить те же параметры виртуальной ЛС для порта коммутатора с помощью обоих методов настройки. В этом случае порт коммутатора будет неправильно настроен, а результат может быть неудачным при сетевом взаимодействии.

### <a name="resources"></a>Ресурсы

Дополнительные сведения о командах Windows PowerShell, указанных в этом разделе, см. в следующих разделах:

- [Set-Вмнетворкадаптерисолатион](https://technet.microsoft.com/library/dn464283.aspx)
- [Get-Вмнетворкадаптерисолатион](https://technet.microsoft.com/library/dn464277.aspx)
- [Set-Вмнетворкадаптервлан](https://technet.microsoft.com/library/hh848475.aspx)
- [Get-Вмнетворкадаптервлан](https://technet.microsoft.com/library/hh848516.aspx)





