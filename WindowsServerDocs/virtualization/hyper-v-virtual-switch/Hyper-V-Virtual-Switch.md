---
title: Виртуальный коммутатор Hyper-V
description: В этом разделе приводятся общие сведения о виртуальном коммутаторе Hyper-V в Windows Server 2016.
manager: brianlic
ms.topic: article
ms.assetid: 398440ac-5988-41ce-b91e-eab343a255d3
ms.author: lizross
author: eross-msft
ms.openlocfilehash: 1e2db53f28ff5262778b36b8a5cb91e6062ca9c0
ms.sourcegitcommit: 68444968565667f86ee0586ed4c43da4ab24aaed
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/07/2020
ms.locfileid: "87995711"
---
# <a name="hyper-v-virtual-switch"></a>Виртуальный коммутатор Hyper-V

>Область применения. Windows Server (Semi-Annual Channel), Windows Server 2016

В этом разделе представлен обзор виртуального коммутатора Hyper-V, который предоставляет возможность подключать виртуальные машины виртуальных машин \( \) к сетям, внешним по отношению к \- узлу Hyper V, включая интрасеть Организации и Интернет.

\-При развертывании программно-определяемой сети Sdn можно также подключаться к виртуальным сетям на сервере с Hyper V \( \) .

> [!NOTE]
> Помимо этого раздела, доступна следующая документация по виртуальному коммутатору Hyper-V.
>
> - [Управление виртуальным коммутатором Hyper-V](Manage-Hyper-V-Virtual-Switch.md)
> - [Удаленный доступ к памяти (RDMA) и объединение внедренных коммутаторов](RDMA-and-Switch-Embedded-Teaming.md)
> - [Командлеты группы сетевых коммутаторов в Windows PowerShell](/powershell/module/netswitchteam/new-netswitchteam?view=win10-ps)
> - [Новые возможности VMM 2016](/system-center/vmm/whats-new#networking)
> - [Настройка структуры сети VMM](/system-center/vmm/manage-networks)
> - [Форум по Hyper-V](/answers/topics/windows-server-hyper-v.html)
> - [Hyper-V: следует включить расширение виртуального переключения WFP, если оно требуется для сторонних расширений](/answers/topics/windows-server-hyper-v.html)
>
> Дополнительные сведения о других сетевых технологиях см. [в статье сетевые подключения в Windows Server 2016](../../networking/index.yml).

\-Виртуальный коммутатор Hyper v — это программный коммутатор уровня 2 Ethernet, доступный в диспетчере Hyper-v \- при установке роли Hyper- \- сервера.

Виртуальный коммутатор Hyper-V включает программно управляемые и расширяемые возможности для подключения виртуальных машин к виртуальным сетям и физической сети. Виртуальный коммутатор Hyper-V также обеспечивает применение политик в области безопасности, изоляции и уровней обслуживания.

> [!NOTE]
> Виртуальный коммутатор Hyper-V поддерживает только Ethernet и не поддерживает другие технологии проводной сети, такие как Infiniband и Fibre Channel.

Виртуальный коммутатор Hyper-V включает возможности изоляции клиентов, формирования трафика, защиты от вредоносных виртуальных машин и упрощение устранения неполадок.

Благодаря встроенной поддержке спецификации интерфейса сетевых устройств NDIS- \( \) драйверы фильтров и \( \) вызываемые драйверы платформы фильтрации Windows, виртуальный коммутатор Hyper-V позволяет независимым поставщикам программного обеспечения \( \) создавать расширяемые подключаемые модули, называемые расширениями виртуальных коммутаторов, которые могут предоставлять расширенные возможности работы в сети и безопасности. Добавленные расширения виртуального коммутатора отображаются в компоненте "Диспетчер виртуальных коммутаторов" в составе диспетчера Hyper-V.

На следующем рисунке у виртуальной машины есть виртуальный сетевой адаптер, подключенный к виртуальному коммутатору Hyper-V через порт коммутатора.

![Подключения виртуального коммутатора](../media/Hyper-V-Virtual-Switch/Vswitch_01.jpg)

Возможности виртуального коммутатора Hyper-V предоставляют дополнительные возможности для обеспечения изоляции клиентов, формирования и управления сетевым трафиком, а также применения защитных мер к вредоносным виртуальным машинам.

>[!NOTE]
> В Windows Server 2016 виртуальная машина с виртуальным сетевым адаптером точно отображает максимальную пропускную способность для виртуального сетевого адаптера. Чтобы просмотреть скорость виртуального сетевого адаптера в окне " **Сетевые подключения**", щелкните правой кнопкой мыши значок нужного виртуального сетевого адаптера и выберите пункт **состояние**. Откроется диалоговое окно **состояние** виртуального сетевого адаптера. В поле « **соединение**» значение параметра **Speed** соответствует скорости физического сетевого адаптера, установленного на сервере.

## <a name="uses-for-hyper-v-virtual-switch"></a><a name="bkmk_apps"></a>Использование виртуального коммутатора Hyper-V

Ниже приведены некоторые сценарии вариантов использования для виртуального коммутатора Hyper-V.

**Отображение статистики**. разработчик в размещенном поставщике облачных служб реализует пакет управления, который отображает текущее состояние виртуального коммутатора Hyper-V. Пакет управления может запрашивать текущие возможности коммутатора, параметры конфигурации и сетевую статистику по отдельным портам при помощи инструментария WMI. После этого для администраторов отображается состояние коммутатора.

**Отслеживание ресурсов**. Компания размещения продает услуги по размещению цен в соответствии с уровнем принадлежности. Каждый уровень участия имеет свои характеристики сети. Администратор выделяет ресурсы таким образом, чтобы одновременно обеспечивать соответствие соглашениям об уровне обслуживания и доступность сети. Администратор программно отслеживает такие сведения, как текущее использование пропускной способности и число назначенных виртуальных машин (VMQ) очереди виртуальных машин или каналов IOV. Та же программа периодически записывает в журнал используемые ресурсы, а также ресурсы, выделенные для отслеживания двойных записей или ресурсов на каждой виртуальной машине.

**Управление порядком расширений коммутатора**. предприятие установило расширения на своем узле Hyper-V для отслеживания трафика и обнаружения вторжений в отчетах. Во время технического обслуживания некоторые расширения могут быть обновлены, что приведет к изменению их порядка. Выполняется простой сценарий для переупорядочения расширений после обновления.

**Расширение переадресации управляет идентификатором виртуальной ЛС**. Компания крупного коммутатора создает расширение переадресации, которое применяет все политики для работы в сети. Один из управляемых элементов — идентификаторы виртуальной локальной сети (VLAN). Виртуальный коммутатор передает управление виртуальной локальной сетью расширению переадресации. Установка компании коммутатора программным способом вызывает интерфейс прикладного программирования (API) инструментарий управления Windows (WMI) (WMI), который включает прозрачность, указывая, что виртуальный коммутатор Hyper-V передается и не принимает никаких действий с тегами VLAN.

## <a name="hyper-v-virtual-switch-functionality"></a><a name="bkmk_func"></a>Функции виртуального коммутатора Hyper-V

Виртуальный коммутатор Hyper-V включает следующие важные компоненты.

-   **Защита ARP/ND (подмена)**. обеспечивает защиту от ВРЕДОНОСНОЙ виртуальной машины с помощью подмены протокола адресов (ARP) для кражи IP-адресов с других виртуальных машин. Защищает от атак узлов IPv6 путем спуфинга протокола обнаружения соседей (ND).

-   **Защита DHCP-** сервера. обеспечивает защиту от ВРЕДОНОСНОЙ виртуальной машины, представляющей себя как DHCP-сервер для атак типа "злоумышленник в середине".

-   **Списки ACL портов**. обеспечивает фильтрацию трафика на основе IP-адресов и диапазонов, позволяющих настроить изоляцию виртуальной сети.

-   **Режим магистрали для виртуальной машины**. позволяет администраторам настроить определенную виртуальную машину в качестве виртуального устройства, а затем направить трафик из различных виртуальных ЛС в эту виртуальную машину.

-   **Мониторинг сетевого трафика**: позволяет администраторам просматривать трафик, проходящий через сетевой коммутатор.

-   **Изолированная (частная) виртуальная ЛС**. позволяет администраторам разделять трафик по нескольким виртуальным ЛС, чтобы упростить установку изолированных сообществ клиентов.

Ниже приведен перечень возможностей, которые улучшают использование виртуального коммутатора Hyper-V.

-   **Предел пропускной способности и поддержка пакетов**: минимальное значение пропускной способности гарантирует зарезервированную пропускную способность Максимум полосы пропускания — это объем полосы пропускания, который может использовать виртуальная машина.

-   **Поддержка явных уведомлений о перегрузке (ECN)**. Маркировка ECN, также известная как центерткп данных (дкткп), позволяет физическому коммутатору и операционной системе регулировать поток трафика таким образом, чтобы буферные ресурсы коммутатора не перенаправлялись, что приводит к повышению пропускной способности трафика.

-   **Диагностика**. Диагностика позволяют легко отслеживать и отслеживать события и пакеты с помощью виртуального коммутатора.