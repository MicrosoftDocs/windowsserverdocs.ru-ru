---
title: Удаленный доступ к памяти (RDMA) и объединение внедренных коммутаторов
description: В этом разделе приводятся сведения о настройке интерфейсов удаленного доступа к памяти (RDMA) с Hyper-V в Windows Server 2016, а также сведения о включенном в объединение коммутаторах (SET).
manager: brianlic
ms.prod: windows-server
ms.technology: networking-hv-switch
ms.topic: get-started-article
ms.assetid: 68c35b64-4d24-42be-90c9-184f2b5f19be
ms.author: lizross
author: eross-msft
ms.openlocfilehash: cfa8076b84a2fc62cec2a709fc15d3dc5be8eb77
ms.sourcegitcommit: da7b9bce1eba369bcd156639276f6899714e279f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/26/2020
ms.locfileid: "80307997"
---
# <a name="remote-direct-memory-access-rdma-and-switch-embedded-teaming-set"></a>Удаленный прямой доступ к памяти \(RDMA\) и коммутаторы внедренных команд \(SET\)

>Область применения: Windows Server (Semi-Annual Channel), Windows Server 2016

В этом разделе приводятся сведения о настройке удаленного доступа к памяти \(RDMA\) интерфейсах с Hyper-V в Windows Server 2016, а также сведения об объединении внедренных команд \(установки\).  

> [!NOTE]
> В дополнение к этому разделу доступны следующие сведения о включенном объединении для объединения коммутаторов. 
> - Загрузка из коллекции TechNet: [Руководство пользователя по сетевым картам Windows Server 2016 и коммутаторам встраиваемых систем](https://gallery.technet.microsoft.com/Windows-Server-2016-839cb607?redir=0)

## <a name="configuring-rdma-interfaces-with-hyper-v"></a><a name="bkmk_rdma"></a>Настройка интерфейсов RDMA с помощью Hyper-V  

В Windows Server 2012 R2 использование RDMA и Hyper-V на одном компьютере с сетевыми адаптерами, которые предоставляют службы RDMA, не могут быть привязаны к виртуальному коммутатору Hyper-V. Это увеличивает число физических сетевых адаптеров, необходимых для установки на узле Hyper-V.

>[!TIP]
>В выпусках Windows Server, предшествующих Windows Server 2016, невозможно настроить RDMA на сетевых адаптерах, привязанных к команде сетевой карты или к виртуальному коммутатору Hyper-V. В Windows Server 2016 можно включить RDMA на сетевых адаптерах, привязанных к виртуальному коммутатору Hyper-V, с УСТАНОВЛЕНным или без него.

В Windows Server 2016 можно использовать меньше сетевых адаптеров при использовании RDMA с параметром или без него.

На рисунке ниже показаны изменения архитектуры программного обеспечения между Windows Server 2012 R2 и Windows Server 2016.

![Изменения архитектуры](../media/RDMA-and-SET/rdma_over.jpg)

В следующих разделах приведены инструкции по использованию команд Windows PowerShell для включения моста центров обработки данных (DCB), создания виртуального коммутатора Hyper-V с виртуальным сетевым адаптером RDMA \(vNIC\)и создания виртуального коммутатора Hyper-V с помощью SET и RDMA vNIC.

### <a name="enable-data-center-bridging-dcb"></a>Включение моста центра обработки данных \(DCB\)

Перед использованием любого RDMA для \(с согласованной Ethernet\) версии RDMA необходимо включить DCB.  Хотя это и не требуется для протокола RDMA в Интернете \(iWARP\) сетей, тестирование определило, что все технологии RDMA на основе Ethernet работают лучше с DCB. По этой причине следует использовать DCB даже для развертываний RDMA iWARP.

В следующих примерах команд Windows PowerShell показано, как включить и настроить DCB для SMB Direct.

Включение DCB

    Install-WindowsFeature Data-Center-Bridging

Задайте политику для протокола SMB Direct:

    New-NetQosPolicy "SMB" -NetDirectPortMatchCondition 445 -PriorityValue8021Action 3

Включите управление потоком для SMB:

    Enable-NetQosFlowControl  -Priority 3

Убедитесь, что управление потоком отключено для другого трафика:

    Disable-NetQosFlowControl  -Priority 0,1,2,4,5,6,7

Примените политику к целевым адаптерам:

    Enable-NetAdapterQos  -Name "SLOT 2"

Предоставьте SMB Direct 30% от минимума пропускной способности:

`New-NetQosTrafficClass "SMB"  -Priority 3  -BandwidthPercentage 30  -Algorithm ETS`  

Если в системе установлен отладчик ядра, необходимо настроить отладчик, чтобы разрешить установку QoS, выполнив следующую команду.

Переопределить отладчик — по умолчанию отладчик блокирует NetQos:
 
    Set-ItemProperty HKLM:"\SYSTEM\CurrentControlSet\Services\NDIS\Parameters" AllowFlowControlUnderDebugger -type DWORD -Value 1 -Force

### <a name="create-a-hyper-v-virtual-switch-with-an-rdma-vnic"></a>Создание виртуального коммутатора Hyper-V с помощью RDMA vNIC

Если этот параметр не требуется для развертывания, можно использовать следующие команды Windows PowerShell для создания виртуального коммутатора Hyper-V с vNIC RDMA.

> [!NOTE]
> Использование наборов команд SET с физическими сетевыми адаптерами с поддержкой RDMA предоставляет больше ресурсов RDMA для использования vNIC.

    New-VMSwitch -Name RDMAswitch -NetAdapterName "SLOT 2"

Добавьте узел vNIC и сделайте его поддерживающим RDMA:

    Add-VMNetworkAdapter -SwitchName RDMAswitch -Name SMB_1
    Enable-NetAdapterRDMA "vEthernet (SMB_1)" "SLOT 2"

Проверьте возможности RDMA:

    Get-NetAdapterRdma

###  <a name="create-a-hyper-v-virtual-switch-with-set-and-rdma-vnics"></a><a name="bkmk_set-rdma"></a>Создание виртуального коммутатора Hyper-V с помощью SET и RDMA vNIC

Чтобы использовать RDMA модуля на виртуальных сетевых адаптерах узла Hyper-V \(vNIC\) на виртуальном коммутаторе Hyper-V, поддерживающем объединение RDMA, можно использовать приведенные ниже примеры команд Windows PowerShell.

    New-VMSwitch -Name SETswitch -NetAdapterName "SLOT 2","SLOT 3" -EnableEmbeddedTeaming $true

Добавить vNIC узла:

    Add-VMNetworkAdapter -SwitchName SETswitch -Name SMB_1 -managementOS
    Add-VMNetworkAdapter -SwitchName SETswitch -Name SMB_2 -managementOS

Многие коммутаторы не передают сведения о классе трафика на трафик виртуальной ЛС без тегов, поэтому убедитесь, что адаптеры узлов для RDMA находятся в виртуальных ЛС. В этом примере два виртуальных адаптера узла SMB_ * назначаются виртуальной ЛС 42.
    
    Set-VMNetworkAdapterIsolation -ManagementOS -VMNetworkAdapterName SMB_1  -IsolationMode VLAN -DefaultIsolationID 42
    Set-VMNetworkAdapterIsolation -ManagementOS -VMNetworkAdapterName SMB_2  -IsolationMode VLAN -DefaultIsolationID 42
    

Включите RDMA на узле vNIC:

    Enable-NetAdapterRDMA "vEthernet (SMB_1)","vEthernet (SMB_2)" "SLOT 2", "SLOT 3"

Проверьте возможности RDMA. Убедитесь, что возможности не равны нулю:

    Get-NetAdapterRdma | fl *


## <a name="switch-embedded-teaming-set"></a>Переключение объединения внедренных платформ (SET)  

В этом разделе приводятся общие сведения о параметрах объединения внедренных элементов (SET) в Windows Server 2016 и содержатся следующие разделы.

- [Настройка обзора](#bkmk_over)

- [ЗАДАТЬ доступность](#bkmk_avail)

- [Поддерживаемые и неподдерживаемые сетевые карты для SET](#bkmk_nics)

- [Настройка совместимости с сетевыми технологиями Windows Server](#bkmk_compat)

- [Установка режимов и параметров](#bkmk_modes)

- [НАБОРЫ и очереди виртуальных машин (ВМКС)](#bkmk_vmq)

- [Установка и виртуализация сети Hyper-V (HNV)](#bkmk_hnv)

- [Установка и динамическая миграция](#bkmk_live)

- [Использование MAC-адреса в передаваемых пакетах](#bkmk_mac)

- [Управление группой набора](#bkmk_manage)

## <a name="set-overview"></a><a name="bkmk_over"></a>Настройка обзора

— Это альтернативное решение для объединения сетевых карт, которое можно использовать в средах, включающих Hyper-V и программно-определяемые сетевые \(SDN\) Stack в Windows Server 2016. Установите некоторые функции объединения сетевых карт в виртуальный коммутатор Hyper-V.

НАБОР позволяет группировать один и восемь физических сетевых адаптеров Ethernet в один или несколько программных виртуальных сетевых адаптеров. Эти виртуальные сетевые адаптеры обеспечивают высокую производительность и отказоустойчивость в случае сбоя сетевого адаптера.

Установка сетевых адаптеров должна быть выполнена на одном физическом узле Hyper-V, который будет размещен в команде.

> [!NOTE]
> Использование SET поддерживается только в виртуальном коммутаторе Hyper-V в Windows Server 2016. Вы не можете развернуть набор в Windows Server 2012 R2.

Вы можете подключить объединенные сетевые карты к одному физическому коммутатору или разным физическим коммутаторам. При подключении сетевых карт к различным коммутаторам оба параметра должны находиться в одной подсети.

На следующем рисунке показана настройка архитектуры.

![ЗАДАТЬ архитектуру](../media/RDMA-and-SET/set_architecture.jpg)

Так как набор встроен в виртуальный коммутатор Hyper-V, нельзя использовать SET внутри виртуальной машины. Однако вы можете использовать объединение сетевых карт в виртуальных машинах.

Дополнительные сведения см. [в статье объединение сетевых карт в виртуальные машины (VM)](https://docs.microsoft.com/windows-server/networking/technologies/nic-teaming/nict-vms).

Кроме того, SET Architecture не предоставляет интерфейсы команды. Вместо этого необходимо настроить порты виртуального коммутатора Hyper-V.

## <a name="set-availability"></a><a name="bkmk_avail"></a>ЗАДАТЬ доступность

НАБОР доступен во всех версиях Windows Server 2016, в том числе Hyper-V и SDN Stack. Кроме того, можно использовать команды Windows PowerShell и удаленный рабочий стол подключения для управления НАБОРом с удаленных компьютеров, на которых работает клиентская операционная система, на которой поддерживаются эти средства.

## <a name="supported-nics-for-set"></a><a name="bkmk_nics"></a>Поддерживаемые сетевые адаптеры для SET

Вы можете использовать любой сетевой адаптер Ethernet, которому передана квалификация оборудования Windows и логотип \(\) тестирования WHQL в команде SET в Windows Server 2016. Для параметра требуется, чтобы все сетевые адаптеры, входящие в состав команды SET, совпадали \(т. е. один и тот же производитель, одна и та же модель, встроенное по и\)драйверов. Параметр SET поддерживает от одного до восьми сетевых адаптеров в команде.
  
## <a name="set-compatibility-with-windows-server-networking-technologies"></a><a name="bkmk_compat"></a>Настройка совместимости с сетевыми технологиями Windows Server

НАБОР совместим со следующими сетевыми технологиями в Windows Server 2016.

- Мост центра обработки данных \(DCB\)
  
- Виртуализация сети Hyper-V-NV-GRE и Вкслан поддерживаются в Windows Server 2016.  
- Разгрузка контрольной суммы на стороне приема \(IPv4, IPv6, TCP\). они поддерживаются, если какой-либо из членов команды SET их поддерживает.

- Удаленный прямой доступ к памяти \(RDMA\)

- Виртуализация единственного корня ввода-вывода \(SR-IOV\)

- Разгрузка контрольной суммы на стороне передачи \(IPv4, IPv6, TCP\). они поддерживаются, если все члены команды SET поддерживают их.

- Очереди виртуальной машины \(\) VMQ

- Виртуальное масштабирование на стороне приема \(\) RSS

НАБОР несовместим со следующими сетевыми технологиями в Windows Server 2016.

- Проверка подлинности 802.1 x. Расширенный протокол проверки подлинности 802.1 x \(EAP\) пакеты автоматически удаляются с помощью виртуального коммутатора Hyper\-V в НАБОРе сценариев.
 
- Разгрузка задач IPsec \(Ипсекто\). Это устаревшая технология, которая не поддерживается большинством сетевых адаптеров и где она существует, по умолчанию отключена.

- Использование QoS \(Pacer. exe\) в узле или в собственных операционных системах. Эти сценарии качества обслуживания не являются сценариями Hyper\-V, поэтому технологии не пересекаются. Кроме того, Служба QoS доступна, но не включена по умолчанию. необходимо намеренно включить QoS.

- Объединение \(RSC\). Параметр RSC автоматически отключается с помощью виртуального коммутатора Hyper\-V.

- Масштабирование на стороне приема \(\)RSS. Так как Hyper-V использует очереди для VMQ и ВММК, RSS всегда отключается при создании виртуального коммутатора.

- Разгрузка TCP Chimney. Эта технология отключена по умолчанию.

- Качество обслуживания виртуальных машин \(ВИРТУАЛЬная машина —\)качества обслуживания. Служба QoS на виртуальной машине доступна, но отключена по умолчанию. Если вы настроили службу QoS для виртуальной машины в НАБОРе, параметры качества обслуживания приведут к непредсказуемым результатам.

## <a name="set-modes-and-settings"></a><a name="bkmk_modes"></a>Установка режимов и параметров

В отличие от объединения сетевых карт при создании команды SET вы не можете настроить имя команды. Кроме того, использование резервного адаптера поддерживается при объединении сетевых карт, но не поддерживается в НАБОРе. При развертывании набора все сетевые адаптеры являются активными и ни один из них не находится в режиме ожидания.

Еще одно ключевое различие между объединением сетевых карт и настройкой состоит в том, что объединение сетевых карт обеспечивает выбор трех различных режимов объединения, а SET поддерживает только **независимый режим переключения** . В режиме независимого переключения коммутатор или коммутаторы, к которым подключены члены команды SET, не знают о наличии команды SET и не определяют, как распределять сетевой трафик для установки членов группы. вместо этого Группа настройки распространяет входящую сеть. трафик между членами команды SET.

При создании новой команды SET необходимо настроить следующие свойства команды.

- Адаптеры членов

- Режим балансировки нагрузки

### <a name="member-adapters"></a>Адаптеры членов

При создании команды SET необходимо указать до восьми идентичных сетевых адаптеров, привязанных к виртуальному коммутатору Hyper-V, в качестве адаптеров участников команды.

### <a name="load-balancing-mode"></a>Режим балансировки нагрузки

Параметры для параметра режим распределения балансировки нагрузки группы — **порт Hyper-V** и **динамический**.

**Порт Hyper-V**

Виртуальные машины подключены к порту на виртуальном коммутаторе Hyper-V. При использовании режима порта Hyper-V для групп установки порт виртуального коммутатора Hyper-V и соответствующий MAC-адрес используются для разделения сетевого трафика между членами группы установки.

> [!NOTE]
> Если используется параметр SET в сочетании с пакетом Direct, то режим объединения **переключается независимо от** **порта Hyper-V** в режиме балансировки нагрузки.

Так как смежный коммутатор всегда видит конкретный MAC-адрес на заданном порте, коммутатор распространяет нагрузку входящего трафика (трафик от коммутатора на узел) на порт, где находится MAC-адрес. Это особенно удобно при использовании очередей виртуальных машин (ВМКС), так как очередь может быть размещена на конкретном сетевом адаптере, где ожидается поступление трафика.

Однако если узел содержит только несколько виртуальных машин, этот режим может оказаться недостаточно детализированным, чтобы обеспечить сбалансированное распределение. Этот режим также всегда ограничивает одну виртуальную машину (т. е. трафик с одного порта коммутатора) на пропускную способность, доступную в одном интерфейсе.

**Платформе**

Этот режим балансировки нагрузки обеспечивает следующие преимущества.

- Исходящие нагрузки распределяются на основе хэша портов TCP и IP-адресов.  Динамический режим также выполняет повторную балансировку нагрузки в режиме реального времени, чтобы заданный исходящий поток можно было перемещать назад и вперед между участниками команды.

- Входящие нагрузки распределяются так же, как и в режиме порта Hyper-V.

Исходящие нагрузки в этом режиме динамически сбалансированы в зависимости от концепции фловлетс. Так же, как человеческий голос имеет естественные перерывы в конце слов и предложений, TCP-потоки (коммуникационные TCP-потоки) также естественным образом нарушают работу. Часть TCP-потока между двумя такими разрывами называется фловлет.

Когда алгоритм динамического режима обнаруживает, что фловлет граница была обнаружена, например, если в потоке TCP произошла недостаточная длина, алгоритм автоматически перераспределяет поток в другой член команды, если это уместно.  В некоторых редких обстоятельствах алгоритм также может периодически перераспределять потоки, которые не содержат фловлетс. По этой причине сходство между потоком TCP и участником команды может измениться в любое время, так как алгоритм динамической балансировки работает для балансировки рабочей нагрузки членов группы.

## <a name="set-and-virtual-machine-queues-vmqs"></a><a name="bkmk_vmq"></a>НАБОРЫ и очереди виртуальных машин (ВМКС)

VMQ и SET работают вместе, и следует включать VMQ при каждом использовании Hyper-V и ЗАДАНии.

> [!NOTE]
> ПАРАМЕТР всегда представляет общее число очередей, доступных для всех членов команды SET. При объединении сетевых карт это называется режимом суммирования очередей.

Большинство сетевых адаптеров имеют очереди, которые можно использовать для масштабирования на стороне приема \(RSS\) или VMQ, но не оба одновременно.
  
Некоторые параметры VMQ выглядят как параметры для очередей RSS, но на самом деле являются параметрами универсальных очередей, используемых как RSS, так и VMQ в зависимости от того, какая функция используется в настоящее время. Каждая сетевая карта имеет в своих дополнительных свойствах значения для `*RssBaseProcNumber` и `*MaxRssProcessors`.

Ниже приведены несколько параметров VMQ, обеспечивающих лучшую производительность системы.

- В идеале для каждой сетевой карты необходимо, чтобы в качестве `*RssBaseProcNumber` было установлено четное число, большее или равное двум (2). Это связано с тем, что первый физический процессор, ядро 0 \(логические процессоры 0 и 1\), обычно выполняет большую часть системной обработки, поэтому сетевая обработка должна быть направлена от этого физического процессора. 

>[!NOTE]
>Некоторые архитектуры компьютеров не имеют двух логических процессоров на один физический процессор, поэтому для таких компьютеров базовый процессор должен быть больше или равен 1. Если вы сомневаетесь, предположим, что ваш узел использует 2 логических процессора на архитектуру физического процессора.

- Все процессоры, работающие с членами группы, должны быть в той степени, в которой они практически не перекрываются. Например, в 4-ядерном хосте \(8 логических процессоров\) с группой из 2 сетевых интерфейсов 10 Гбит/можно установить первый из них, чтобы использовать базовый процессор 2 и использовать 4 ядра; второй будет установлен для использования базового процессора 6 и 2 ядер.

## <a name="set-and-hyper-v-network-virtualization-hnv"></a><a name="bkmk_hnv"></a>Установка и виртуализация сети Hyper-V \(HNV\)

НАБОР полностью совместим с виртуализацией сети Hyper-V в Windows Server 2016. Система управления HNV предоставляет сведения о драйвере SET, который позволяет настроить распределение загрузки сетевого трафика способом, оптимизированным для трафика HNV.
  
## <a name="set-and-live-migration"></a><a name="bkmk_live"></a>Установка и динамическая миграция

Динамическая миграция поддерживается в Windows Server 2016.

## <a name="mac-address-use-on-transmitted-packets"></a><a name="bkmk_mac"></a>Использование MAC-адреса в передаваемых пакетах

При настройке команды SET с динамическим распределением нагрузки пакеты из одного источника \(, такие как одна виртуальная машина\), одновременно распределяются между несколькими членами группы. 

Чтобы избежать перепутать параметры и предотвратить появление оповещений неустойчивый MAC, установите параметр заменяет исходный MAC-адрес на другой MAC-адрес в кадрах, передаваемых членам группы, отличным от члена группы привязаны. В связи с этим каждый член команды использует другой MAC-адрес, и конфликты MAC-адресов предотвращаются, пока не произойдет сбой.

При обнаружении сбоя на основном сетевом адаптере программа установки программного обеспечения начинает использовать MAC-адрес виртуальной машины в члене группы, который выбран для использования в качестве временного члена группы привязаны \(т. е., который теперь будет отображаться в коммутаторе в качестве\)интерфейса виртуальной машины.

Это изменение применяется только к трафику, который будет отправлен участнику команды привязаны ВИРТУАЛЬНОЙ машины в качестве своего исходного MAC-адреса. Другой трафик по-другому будет отправляться с использованием любого исходного MAC адреса, который использовался до сбоя.

Ниже приведены списки, описывающие поведение замены для установки MAC-адресов в зависимости от настройки группы.

- Переключение независимого режима с распределением портов Hyper-V

    - Каждый порт vmSwitch привязаны участнику команды.
  
    - Каждый пакет отправляется участнику команды, к которому относится порт привязаны  
  
    - Замена исходного MAC-адреса не выполнена  
  
- Переключение независимого режима с динамическим распределением
  
    - Каждый порт vmSwitch привязаны участнику команды.  
  
    - Все пакеты ARP/NS отправляются участнику команды, к которому относится порт привязаны  
  
    - Пакеты, отправленные членом команды, который является участником команды привязаны, не заменяют исходный MAC-адрес  
  
    - Пакеты, отправляемые участнику команды, отличному от члена команды привязаны, будут иметь замену исходного MAC-адреса.  
  
## <a name="managing-a-set-team"></a><a name="bkmk_manage"></a>Управление группой набора

Для управления группами рекомендуется использовать System Center Virtual Machine Manager \(VMM\), однако для управления НАБОРами можно также использовать Windows PowerShell. В следующих разделах приведены команды Windows PowerShell, которые можно использовать для управления НАБОРом.

Сведения о создании команды SET с помощью VMM см. в подразделе "Настройка логического коммутатора" раздела библиотека VMM System Center [Создание логических коммутаторов](https://docs.microsoft.com/system-center/vmm/network-switch).
  
### <a name="create-a-set-team"></a>Создание команды набора

Вы должны создать группу установки одновременно с созданием виртуального коммутатора Hyper-V с помощью команды Windows PowerShell **New-VMSwitch** .

При создании виртуального коммутатора Hyper-V необходимо включить новый параметр **енаблимбеддедтеаминг** в синтаксис команды. В следующем примере создается коммутатор Hyper-V с именем **теамедвсвитч** с объединением внедрений и двумя членами начальной команды.
  
```  
New-VMSwitch -Name TeamedvSwitch -NetAdapterName "NIC 1","NIC 2" -EnableEmbeddedTeaming $true  
```  
  
Параметр **енаблимбеддедтеаминг** принимается Windows PowerShell, когда аргумент для **нетадаптернаме** является массивом сетевых адаптеров, а не одним сетевым интерфейсом. В результате можно изменить предыдущую команду следующим образом.

```  
New-VMSwitch -Name TeamedvSwitch -NetAdapterName "NIC 1","NIC 2"  
```  

Если вы хотите создать параметр с поддержкой SET с одним членом команды, чтобы вы могли добавить участника команды позднее, необходимо использовать параметр Енаблимбеддедтеаминг.

```  
New-VMSwitch -Name TeamedvSwitch -NetAdapterName "NIC 1" -EnableEmbeddedTeaming $true  
```  

### <a name="adding-or-removing-a-set-team-member"></a>Добавление или удаление члена команды SET

Команда **Set-вмсвитчтеам** включает параметр **нетадаптернаме** . Чтобы изменить членов группы в команде SET, введите нужный список членов команды после параметра **нетадаптернаме** . Если изначально **теамедвсвитч** был создан с помощью NIC 1 и NIC 2, то в следующем примере команда УДАЛЯЕТ команду Set Team NIC 2 и добавляет новый член команды Set "NIC 3".
  
```  
Set-VMSwitchTeam -Name TeamedvSwitch -NetAdapterName "NIC 1","NIC 3"  
```  

### <a name="removing-a-set-team"></a>Удаление команды SET

Группу набора можно удалить только путем удаления виртуального коммутатора Hyper-V, содержащего команду SET.  Сведения о том, как удалить виртуальный коммутатор Hyper-V, см. в разделе [Remove-VMSwitch](https://technet.microsoft.com/itpro/powershell/windows/hyper-v/remove-vmswitch) . В следующем примере удаляется виртуальный коммутатор с именем **сетвсвитч**.

```  
Remove-VMSwitch "SETvSwitch"  
```  

### <a name="changing-the-load-distribution-algorithm-for-a-set-team"></a>Изменение алгоритма распределения нагрузки для команды SET

Командлет **Set-вмсвитчтеам** имеет параметр **лоадбаланЦингалгорисм** . Этот параметр принимает одно из двух возможных значений: **хипервпорт** или **dynamic**. Чтобы задать или изменить алгоритм распределения нагрузки для команды, внедренной в коммутатор, используйте этот параметр. 

В следующем примере Вмсвитчтеам с именем **теамедвсвитч** использует алгоритм **динамической** балансировки нагрузки.  
```  
Set-VMSwitchTeam -Name TeamedvSwitch -LoadBalancingAlgorithm Dynamic  
```  
### <a name="affinitizing-virtual-interfaces-to-physical-team-members"></a>Установка соответствия виртуальных интерфейсов к физическим членам команды

SET позволяет создать сходство между виртуальным интерфейсом \(т. е., порт виртуального коммутатора Hyper-V\) и один из физических сетевых адаптеров в группе. 

Например, если вы создадите два узла vNIC для SMB\-Direct, как описано в разделе [Создание виртуального коммутатора Hyper-V с помощью Set и RDMA vNIC](#bkmk_set-rdma), можно убедиться, что эти два vNIC используют разные члены группы. 

При добавлении в скрипт в этом разделе можно использовать следующие команды Windows PowerShell.

    Set-VMNetworkAdapterTeamMapping -VMNetworkAdapterName SMB_1 –ManagementOS –PhysicalNetAdapterName “SLOT 2”
    Set-VMNetworkAdapterTeamMapping -VMNetworkAdapterName SMB_2 –ManagementOS –PhysicalNetAdapterName “SLOT 3”

Эта статья более подробно описана в разделе 4.2.5 [сетевого адаптера Windows Server 2016 и руководстве пользователя по объединению внедренных](https://gallery.technet.microsoft.com/Windows-Server-2016-839cb607?redir=0)элементов.
