---
title: средстве инвентаризации программного обеспечения
description: Описывает установку и управление агрегатором ведения журнала инвентаризации программного обеспечения
ms.custom: na
ms.prod: windows-server-threshold
ms.technology: manage-software-inventory-logging
ms.reviewer: na
ms.suite: na
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: e4230a75-6bcd-47d9-ba92-a052a90a6abc
author: brentfor
ms.author: coreyp
manager: dongill
ms.date: 10/16/2017
ms.openlocfilehash: 0edecb86c7d5afa7d267c75ec858ded9af36e4c0
ms.sourcegitcommit: f6490192d686f0a1e0c2ebe471f98e30105c0844
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/10/2019
ms.locfileid: "70866323"
---
# <a name="software-inventory-logging-aggregator"></a>средстве инвентаризации программного обеспечения

>Область применения. Windows Server 2012 R2

## <a name="what-is-software-inventory-logging-aggregator"></a>Что такое агрегатор журнала инвентаризации программного обеспечения?
Средство инвентаризации программного обеспечения получает, сводит и создает базовые отчеты о количестве и типах корпоративного программного обеспечения Майкрософт, установленного на Windows Server в центре обработки данных.

Средство инвентаризации программного обеспечения устанавливается на Windows Server, но не включено в комплект установки Windows Server. Чтобы установить программное обеспечение, скачайте его бесплатно в центре загрузки Windows: [Агрегатор 1,0 для ведения журнала инвентаризации программного обеспечения для Windows Server](https://www.microsoft.com/en-us/download/details.aspx?id=49046)

Платформа ведения журналов инвентаризации программного обеспечения предназначена для снижения операционных расходов на инвентаризацию программного обеспечения Майкрософт, развернутого на разных серверах в ИТ-среде организации. Эта платформа состоит из двух компонентов: этого агрегатора SIL и функции Windows Server, представленной в Windows Server 2012 R2, ведения журнала инвентаризации программного обеспечения (SIL). Средство инвентаризации программного обеспечения версии 1.0 устанавливается на один сервер и получает данные инвентаризации с любого сервера Windows Server, настроенного для отправки данных посредством инвентаризации программного обеспечения. Такая схема позволяет администраторам центров обработки данных включать инвентаризацию программного обеспечения в основных образах Windows Server, которые предназначены для широкого распространения в среде.  Этот пакет программного обеспечения является целевой точкой и предназначен для того, чтобы клиенты устанавливали его на локальном оборудовании для более простого выполнения регулярной инвентаризации данных. Это программное обеспечение также позволяет периодически создавать базовые отчеты инвентаризации в Microsoft Excel. Отчеты средства инвентаризации программного обеспечения версии 1.0 включают счетчики установок Windows Server, System Center и SQL Server.

> [!IMPORTANT]
> Программное обеспечение не отправляет каких-либо данных в Майкрософт.

### <a name="data-sil-collects-over-time"></a>Средство инвентаризации программного обеспечения собирает данные в течение определенного времени
После правильной установки средство инвентаризации программного обеспечения позволяет просматривать следующие данные:

-   Уникальные установки Windows Server в вашем центре обработки данных

-   FQDN

-   Идентификаторы GUID

-   Число физических процессоров и ядер

-   Число виртуальных процессоров (для виртуальной машины)

-   Модель и тип физических процессоров

-   Включена технология Hyper-Threading на физических процессорах или нет

-   Серийный номер корпуса

-   Счетчик наибольшей активности и идентификаторы одновременно работающих виртуальных машин Windows Server (если на узле установлена низкоуровневая оболочка) для каждого узла за период времени

-   Число пометок с высоким преводами и имя узла, одновременно выполняющие управляемые \(агентом System Center, представляют\) собой виртуальные машины Windows Server на каждом узле со временем.

-   Имя агентов System Center, установленных на виртуальных машинах, подсчитанных в управляемой метке высокой\-наводы

-   Количество и расположение SQL Server установок по истечении \(только номеров SKU и выпусков, для которых требуется лицензия\)

-   Списки программного обеспечения, установленного в окне "Установка\/и удаление программ"

### <a name="who-will-use-sil"></a>Кто будет использовать инвентаризацию программного обеспечения?

-   **Специалисты ИТ или администраторы центров обработки данных**, которым нужен низкозатратный метод сбора ценных данных инвентаризации на автоматической основе и в динамике.

-   **Руководители руководителей и финансов**, которым требуется сообщать об использовании программного обеспечения корпорации Майкрософт в ИТ и развертываниях своих организаций.

## <a name="getting-started"></a>Начало работы
**Предварительные условия**

Средство инвентаризации программного обеспечения, установленное по крайней мере на одном сервере для сбора данных и создания отчетов либо на виртуальной машине, либо на физическом оборудовании:

-   **Windows Server 2012 R2** (выпуски Standard или Datacenter)

-   **Роль сервера IIS** с .NET Framework 4.5, службами WCF Services и HTTP Activation — все в одном дереве выбора в **мастере добавления ролей и компонентов**.

-   **SQL Server** 2012 Standard Edition с пакетом обновления 2 (SP2) или SQL Server 2014 Standard Edition

-   **64-разрядная версия Microsoft Excel** 2013 (необязательно, но необходимо для создания отчетов)

-   Дополнительно **VMware PowerCLI 5.5.0.5836** (требуется в средах VMware)

>[!Note]
>При использовании Windows Management Framework существует известная ошибка совместимости с WMF Release 5,1, только для агрегатора SIL.  Не требуется превышать версию WMF версии 4,0 на серверах с установленным агрегатором SIL.

Инвентаризация программного обеспечения имеется в версиях Windows Server со следующими установленными обновлениями:

-   **Windows Server 2016**или более поздней версии

-   **Windows Server 2012 R2** (выпуски Standard или Datacenter)

    -   Обновление Windows Server 2012 R2 **KB3000850** (ноябрь 2014 г.)

    -   Обновление Windows Server 2012 R2 **KB3060681** (июнь 2015 г.) (может отображаться как необязательное обновление в Центре обновления Windows)

### <a name="security-and-account-types"></a>Безопасность и типы учетных записей
**Требование к сертификату**

Инвентаризация программного обеспечения и средство инвентаризации программного обеспечения используют SSL-сертификаты для связи с проверкой подлинности. Стандартная реализация предполагает установку средства инвентаризации программного обеспечения с одним сертификатом (имя сервера и имя сертификата совпадают) для размещения веб-службы, которая получает данные инвентаризации. Затем серверы Windows, подлежащие инвентаризации с помощью функции SIL, будут использовать другой сертификат клиента для отправки данных в агрегатор SIL. Для добавления отпечатков сертификатов в список утвержденных сертификатов агрегатора SIL, из которых агрегатор будет принимать связанные данные, необходимо использовать командлет PowerShell (Set-Силаггрегатор, дополнительные сведения ниже). Средство инвентаризации программного обеспечения выполняет обработку полезных данных с сертификатом и вставляет их в свою базу данных после проверки подлинности. Дополнительные сведения о том, как это работает, см. в разделе **Сведения о командлетах средства инвентаризации программного обеспечения** .

### <a name="polling-account-setup"></a>Настройка учетной записи опроса
При добавлении учетных данных в средство инвентаризации программного обеспечения для выполнения опросов необходимо использовать учетную запись с минимальными разрешениями. Кроме того, в качестве рекомендации по безопасности не следует использовать одни и те же учетные данные для всех или многих узлов в центре обработки данных или в другом ИТ-развертывании.

На узле Windows Server, который необходимо настроить для опроса с помощью средства инвентаризации программного обеспечения, при этом не использовать пользователя из группы администраторов, выполните следующие шаги, чтобы предоставить достаточные права для доступа к учетной записи пользователя.

##### <a name="to-setup-a-polling-account"></a>Настройка учетной записи опроса

1.  На узле Hyper-V Windows Server, который необходимо опрашивать с помощью средства инвентаризации программного обеспечения, создайте локальную учетную запись пользователя при помощи средства **управления компьютерами** в Windows (обязательно снимите флажок напротив параметра, который предусматривает смену пароля при первом входе).

2.  Добавьте этого пользователя в группу **Пользователи удаленного управления**.

3.  Добавьте этого пользователя в группу **Администраторы Hyper-V**.

4.  Откройте **WMIMgmt.msc** через меню **Пуск**->**Выполнить**.

5.  Щелкните **Дополнительные действия** в разделе **Действия** и выберите **Свойства**.

6.  Щелкните **Безопасность**.

7.  Выберите **пространство имен cimv2** в дереве просмотра **Пространство имен**.

8.  Щелкните **Безопасность** (кнопка).

9. Добавьте группу **пользователя удаленного управления** в формате **имя_компьютера\имя группы**.

10. Нажмите кнопку **ОК**.

11. Вернитесь на вкладку "Безопасность" и в окне **root\cimv2** выберите **Пользователи удаленного управления**.

12. В нижней части раздела разрешения убедитесь, что установлен флажок **Remote Enable** .

13. Щелкните **Применить** и затем **ОК**.

14. Нажмите кнопку **ОК** , чтобы закрыть окно **Свойства** .

### <a name="installing-sil-aggregator"></a>Установка средства инвентаризации программного обеспечения
Перед установкой средства инвентаризации программного обеспечения на Windows Server необходимо проверить следующее.

-   **У вас есть допустимый сертификат SSL** , который будет использоваться для размещения веб-службы этого программного обеспечения.

    -   Сертификат должен быть в формате **PFX** .

    -   Имя Windows Server и имя сертификата должны совпадать.

-   **Установлен выпуск SQL Server Standard Edition**, либо он установлен на удаленном сервере, который будет использоваться с этим программным обеспечением.

    -   Средство инвентаризации программного обеспечения работает как с SQL Server 2012 с пакетом обновления 2 (SP2), так и с SQL Server 2014. Все это соответствует обычным параметрам установки SQL Server.

    -   Учетная запись, которая используется для установки средства инвентаризации программного обеспечения, должна быть ролью sysadmin на сервере SQL, чтобы иметь возможность создать базу данных во время установки.

    -   Учетная запись, которая используется для установки средства инвентаризации программного обеспечения, должна быть добавлена как администратор в службы SQL Analysis Services до установки средства инвентаризации программного обеспечения.

    -   После установки агент SQL Server должен быть настроен для автоматического запуска.

-   **Роль сервера IIS добавлена** вместе с .Net Framework 4.5, WCF Services и HTTP Activation в дереве выбора **мастера добавления ролей и компонентов**.

-   Вы **вошли на сервер с учетной записью, которая обладает правами администратора** на этом сервере.

-   Вы **вошли на сервер с учетной записью, которая обладает правами sysadmin на используемом сервере SQL Server**, если требуется проверка подлинности Windows.

    ИЛИ

    Если требуется проверка подлинности SQL, **у вас есть пароль для учетной записи, которая обладает правами администратора**.

##### <a name="to-install-software-inventory-logging-aggregator"></a>Установка средства инвентаризации программного обеспечения

1.  Дважды щелкните **Setup.exe** , чтобы начать установку.

2.  Нажмите кнопку **Далее** на экране приветствия.

3.  Если вы принимаете условия лицензионного соглашения, установите флажок принятия соглашения и нажмите кнопку **Далее**.

4.  На вкладке **Выбор компонентов** выберите **Установить средство инвентаризации программного обеспечения и модуль создания отчетов** и нажмите кнопку **Далее**.

    Дополнительные сведения об установке модуля создания отчетов см. в подразделе `Publish-SilReport` в разделе **Сведения о командлетах средства инвентаризации программного обеспечения**.

5.  После проверки всех предварительных требований нажмите кнопку **Далее**.

6.  На вкладке **Выбор тип учетной записи**выберите **локальный пользователь** или **gMSA**.

    При выборе учетной записи локального пользователя будет создан пользователь с надежным паролем, который формируется автоматически. Эта учетная запись будет использоваться для всех служб средства инвентаризации программного обеспечения и операций с задачами на локальном сервере.  Если средство инвентаризации программного обеспечения является частью домена Active Directory (Windows Server 2012 и выше), рекомендуется использование групповых управляемых учетных записей служб (gMSA). Дополнительные сведения о gMSA см. в следующих статьях: [Общие сведения о групповой управляемых учетных записях служб](https://technet.microsoft.com/library/hh831782.aspx)

    -   Учетную запись gMSA следует использовать, если планируется запускать базу данных SQL Server на сервере, отличном от сервера со средством инвентаризации программного обеспечения.

    -   Не забудьте перезагрузить сервер после добавления учетной записи компьютера в группу безопасности gMSA Enabled в Active Directory.

7.  На вкладке **Выбор SQL Server**введите SQL Server, на котором установлен экземпляр SQL, или **localhost**, если он установлен на локальном сервере.

    Поддерживается только одно средство инвентаризации программного обеспечения на экземпляр SQL.

8.  Выберите тип проверки подлинности и нажмите кнопку **Проверка SQL**.

9. Щелкните **Далее**, а затем на вкладке **Сведения о сервере IIS**выберите номер порта или оставьте значение по умолчанию.

10. Укажите расположение файла **PFX** , введите пароль для PFX-файла и нажмите кнопку **Далее**.

11. На последнем экране будет отображаться ход выполнения установки. После успешного завершения щелкните **Готово**.

### <a name="uninstalling-sil-aggregator"></a>Удаление средства инвентаризации программного обеспечения

##### <a name="to-uninstall-software-inventory-logging-aggregator"></a>Удаление средства инвентаризации программного обеспечения

1.  Откройте **PowerShell** от имени администратора и введите `Stop-SilAggregator`. Средство инвентаризации программного обеспечения будет остановлено, когда в командной строке появится результат.

    Средство инвентаризации программного обеспечения настроено на обработку файлов через 20 минут или после получения 100 файлов.  В небольших системах некоторые файлы могут все еще проходить обработку, прежде чем средство инвентаризации программного обеспечения можно будет остановить. В больших средах такой сценарий маловероятен. Воспользуйтесь параметром `–Force` , если хранение этих файлов и данных не требуется.

2.  Перейдите на **панель управления**, щелкните **Программы и компоненты**, затем **Удаление программ**, затем **Средство инвентаризации программного обеспечения** и нажмите кнопку **Удалить**.

    Средство инвентаризации программного обеспечения откроет окно, в котором необходимо будет выбрать между удалением или сохранением всех данных в базе данных. По умолчанию данные будут сохранены. Если необходима повторная установка, можно присоединить существующую базу данных и продолжить работу с последней точки средства инвентаризации программного обеспечения.

3.  Выберите **Сохранить** или **Удалить** и нажмите кнопку **Далее**.

4.  После завершения операции (см. индикатор выполнения) нажмите кнопку **Готово**.

### <a name="start-using-sil-and-the-sil-aggregator"></a>Начало работы с инвентаризацией программного обеспечения и средством инвентаризации программного обеспечения

#### <a name="introduction-to-sil-aggregator-powershell-cmdlets"></a>Общие сведения о командлетах PowerShell для средства инвентаризации программного обеспечения
Следующие команды можно запустить из консоли Windows PowerShell с правами администратора.

|Командлет Windows PowerShell|Функция|
|-----------------------------|------------|
|`Start-SilAggregator`|Запускает все службы и задачи средства инвентаризации программного обеспечения. Это необходимо для того, чтобы средство инвентаризации программного обеспечения получало данные по HTTPS с серверов, где запущена инвентаризация программного обеспечения.|
|`Stop-SilAggregator`|Останавливает все службы и задачи средства инвентаризации программного обеспечения. Если какая-либо задача или служба выполняется в данный момент, для завершения этой команды может потребоваться некоторое время.|
|`Set-SilAggregator`|Позволяет администратору вносить изменения в конфигурацию средства инвентаризации программного обеспечения.|
|`Add-SilVmHost`|Для добавления конкретных имен узлов или массивов имен узлов, которые должны быть опрошены по обычному интервалу \(, по умолчанию используются интервалы\)в один час.|
|`Remove-SilVmHost`|Используется для удаления имен определенного узла или массива имен узлов, которые опрашиваются с регулярным интервалом.|
|`Get-SilVMHost`|Используется для получения списка физических узлов, которые опрашивает средство инвентаризации программного обеспечения с целью получения текущих данных состояния виртуальных машин.|
|`Get-SILAggregatorData`|Используется для получения данных из базы данных в консоли PowerShell.|
|`Publish-SilReport`|Используется для создания отчетов из базы данных инвентаризации программного обеспечения. **Примечание.** Обработка кубов в средстве инвентаризации программного обеспечения происходит один раз в день. Поэтому данные, полученные средством инвентаризации программного обеспечения, появятся в отчетах только на следующий день.|

#### <a name="suggested-order-to-start"></a>Предлагаемый порядок пуска
После установки средства инвентаризации программного обеспечения на сервере откройте PowerShell с правами администратора.

-   В средстве инвентаризации программного обеспечения:

    -   Выполнить `Start-SilAggregator`

        Это необходимо для того, чтобы средство инвентаризации программного обеспечения активно получало данные, пересылаемые по HTTPS с серверов, которые настроены для инвентаризации. Обратите внимание, что, даже если вы сначала разрешили серверам отправлять данные средству инвентаризации программного обеспечения, так тоже можно делать, потому что они будут кэшировать свои полезные данные в течение 30 дней. После того как агрегатор будет работать и работает, все кэшированные данные будут перенаправляться сразу в агрегатор, и все данные будут обработаны.

    -   Выполнить `Add-SilVMHost`

        Пример: `add-silvmhost –vmhostname contoso1 –hostcredential get-credential`

        -   В этом примере **contoso1** — это сетевое имя (или IP-адрес) сервера физического узла, который средство инвентаризации программного обеспечения будет регулярно опрашивать с целью установить, какие виртуальные машины запущены на нем, и получать их данные в динамике. Командлет Get-Credential просит пользователя, вошедшего в систему, указать учетную запись, с которой будет выполняться опрос этого узла. Выполнение этой команды на этом же сервере еще раз позволяет в любое время указать другую учетную запись. Учтите, что пароль учетной записи может поменяться и его срок действия может закончиться. Если учетные данные изменились или закончился срок действия, опрос этого узла завершится ошибкой.

        -   По умолчанию опрос начинается ежечасно через один час после выполнения `Start-SilAggregator` или через один час после добавления нового узла в список опроса.  Интервал опроса можно изменить с помощью `Set-SilAggregator cmdlet`.

        -   Этот командлет автоматически определяет из списка вариантов (см. раздел **Сведения о командлетах средства инвентаризации программного обеспечения**), какой тип HostType и HyperVisorType подходит для добавляемого узла. Если учетные данные распознать не удается либо они неверные, появится запрос. Если вы выбираете вариант **Y**, узел будет добавлен и появится в списке **Неизвестные**, но этот узел не будет опрашиваться.

    -   Выполните `Set-SilAggregator –AddCertificateThumbprint` команду "отпечаток сертификата клиента".

        Это необходимо для получения данных по HTTPS с серверов Windows Server, где запущена инвентаризация программного обеспечения. Отпечаток будет добавлен в список отпечатков, по которым средство инвентаризации программного обеспечения будет получать данные. Средство инвентаризации программного обеспечения может принимать действительные корпоративные сертификаты проверки подлинности клиента. Используемый сертификат должен быть установлен в  **\\хранилище localmachine\MY (локальный компьютер-> Personal**) на сервере, пересылая данные.

-   На серверах Windows Server, которые будут участвовать в инвентаризации, запустите PowerShell с правами администратора и выполните следующие команды:

    -   Выполнить `Set-SilLogging –TargetUri "https://contososilaggregator" –CertificateThumbprint "your client certificate's thumbprint"`

        -   Команда указывает компоненту инвентаризации программного обеспечения на Windows Server, куда отправлять данные и какой использовать сертификат для проверки подлинности.

            > [!IMPORTANT]
            > Убедитесь, что параметр "https://" находится в значении Таржетури.

        -   Корпоративный сертификат клиента с этим отпечатком должен быть установлен по адресу **\localmachine\MY**; либо воспользуйтесь средством **certmgr.msc**, чтобы установить сертификат в хранилище **локальный компьютер -> личные**.

            > [!IMPORTANT]
            > Если эти значения неправильные или если сертификат не установлен в нужном хранилище (или сертификат недействительный), отправка данных по целевому адресу завершится ошибкой при запуске инвентаризации программного обеспечения. Данные будут сохранены в локальном кэше в течение 30 дней.

    -   Выполнить `Start-SilLogging`

        Команда запускает инвентаризацию программного обеспечения. Каждый час с произвольными интервалами в течение часа компонент инвентаризации программного обеспечения будет отправлять данные средству инвентаризации программного обеспечения, которое указано с помощью параметра `–targeturi` . Первая отправка будет включать полный набор данных. Каждый последующий накат будет больше "пульса", просто идентифицируя данные, которые ничего не изменили. Если в наборе данных произошли какие-либо изменения, будет отправлен другой полный набор данных.

    -   Выполнить `Publish-SilData`

        -   При первом запуске инвентаризации программного обеспечения этот шаг является необязательным.

        -   Это ручная единовременная отправка полного набора данных.

        -   Если инвентаризация программного обеспечения была запущена и затем было указано другое средство инвентаризации программного обеспечения с помощью параметра `Set-SilLogging`, потребуется выполнить этот командлет один раз, чтобы отправить полный набор данных новому средству.

После выполнения этих действий по добавлению физических узлов с виртуальными машинами Windows Server и включения инвентаризации программного обеспечения на них вы можете выполнить `Publish-SilReport –OpenReport` в любое время в средстве инвентаризации программного обеспечения (требуется Excel 2013). Обратите внимание, что куб служб SQL Server Analysis Services обрабатывается один раз в день, поэтому данные могут быть недоступны в отчетах в тот же день.

## <a name="architectural-overview"></a>Обзор архитектуры
SIL работает в режимах push и Pull и состоит из двух компонентов, работающих параллельно: Функция ведения журнала инвентаризации программного обеспечения (SIL) в Windows Server и загружаемый MSI-файл средства агрегации журнала инвентаризации программного обеспечения (сила). Серверы, участвующие в инвентаризации, отправляют данные (выполняют действие push) о программном обеспечении по HTTPS с помощью компонента инвентаризации программного обеспечения средству инвентаризации программного обеспечения (ежечасно через произвольные интервалы в течение часа). Средство инвентаризации программного обеспечения, в свою очередь, ежечасно опрашивает физические узлы низкоуровневой оболочки, чтобы получить данные (выполнить действие pull) инвентаризации оборудования. Оба действия, push и pull, необходимо правильно настроить, чтобы обеспечить работу инвентаризации программного обеспечения. Настраивать эти действия можно в любом порядке. Однако обработка куба в средстве инвентаризации программного обеспечения происходит один раз в день, поэтому данные, полученные средством с помощью действия push или pull, не появятся в отчетах до следующего дня.

![](../media/software-inventory-logging/SILA_Architecture.png)

> [!IMPORTANT]
> Программное обеспечение не отправляет каких-либо данных в Майкрософт.

## <a name="enable-sil-on-multiple-servers"></a>Включение инвентаризации программного обеспечения на нескольких серверах
Есть несколько способов включить инвентаризацию программного обеспечения в распределенной серверной инфраструктуре, например в частном облаке виртуальных машин.  Ниже приводится пример настройки образов Windows Server для автоматической отправки данных инвентаризации средству инвентаризации программного обеспечения, когда они запускаются в сети первый раз.

Для каждой запущенной виртуальной машины, физического компьютера или другого устройства с установленным экземпляром Windows Server (см. раздел **Предварительные требования** ) выполните следующие командлеты в консоли PowerShell с правами администратора:

Для выполнения этих шагов потребуется действительный клиентский SSL-сертификат в формате PFX.  Отпечаток сертификата необходимо добавить в средство инвентаризации программного обеспечения с помощью командлета `Set-SILAggregator –AddCertificateThumbprint`. Сертификат клиента не обязательно должен совпадать с именем средства инвентаризации программного обеспечения.

-   `$secpasswd = ConvertTo-SecureString "`**<password for the account with permissions to the network location holding your client pfx file>**`" -AsPlainText –Force`

-   `$mycreds = New-Object System.Management.Automation.PSCredential ("`**<user account with permissions to the network location holding your client  pfx file>**`", $secpasswd)`

-   `$driveLetters = ([int][char]'C')..([int][char]'Z') | % {[char]$_}`

-   `$occupiedDriveLetters = Get-Volume | % DriveLetter`

-   `$availableDriveLetters = $driveLetters | ? {$occupiedDriveLetters -notcontains $_}`

-   `$firstAvailableDriveLetter = $availableDriveLetters[0]`

-   `New-PSDrive -Name $firstAvailableDriveLetter -PSProvider filesystem -root`**сервер\пас к общему ресурсу, содержащему файл сертификата pfx > < \\** `-credential $mycreds`

-   `Copy-Item ${firstAvailableDriveLetter}:\` **< файл CertificateName. pfx в каталоге нового диска > c:\<расположение по своему усмотрению >**

-   `Remove-PSDrive –Name $firstAvailableDriveLetter`

-   `$mypwd = ConvertTo-SecureString -String "`**<password for the certificate pfx file>**`" -Force –AsPlainText`

-   `Import-PfxCertificate -FilePath c:\` **< расположение\\CertificateName. pfx >** `cert:\localMachine\my -Password $mypwd`

-   `Set-sillogging –targeturi "https://` **<machinename of your SIL Aggregator>** `–certificatethumbprint`

> [!NOTE] 
> Используйте отпечаток сертификата из PFX-файла клиента и добавьте в агрегатор SIL с помощью командлета **Set-силаггрегатор ' – аддцертификатесумбпринт** .

-   `Start-sillogging`

Всегда, когда средство инвентаризации программного обеспечения недоступно, данные инвентаризации кэшируются локально на серверах Windows Server на срок до 30 дней. Все кэшированные данные будут отправлены средству инвентаризации программного обеспечения при первой успешной отправке.

Добавьте `Publish-SilData` в список, приведенный выше, если необходимо отправить данные инвентаризации новому средству инвентаризации программного обеспечения после успешных отправлений предыдущему средству. В результате будет отправлен полный набор данных инвентаризации, который потребуется новому средству инвентаризации программного обеспечения для данного компьютера.

## <a name="software-inventory-logging-aggregator-reports"></a>Отчеты средства инвентаризации программного обеспечения
![](../media/software-inventory-logging/SILA_Report.png)

### <a name="cube-processing"></a>Обработка куба
В средстве инвентаризации программного обеспечения куб служб Analysis Services SQL Server обрабатывается один раз в день в 03:00:00 по локальному системному времени. Отчеты отражают все данные до этого времени и не включают данные после этого времени в течение этого дня.

### <a name="high-water-mark"></a>Отметка пиковой активности
Фундаментальным аспектом отчетов агрегатора ведения журнала инвентаризации программного обеспечения является захват того, что часто называют "высокой нагрузкой" одновременно работающих серверов Windows. Речь идет о счетчиках Windows Server и System Center в отчетах. Для Windows Server у каждого физического узла есть временная точка (независимо от типа операционной системы узла) в течение месяца, когда большинство виртуальных машин работают одновременно. Это пиковая активность за месяц. Кроме того, для System Center существует временная точка в течение месяца, когда большинство управляемых серверов Windows Server одновременно работают на каждом физическом узле (управляемый сервер идентифицируется, когда присутствует один или несколько агентов System Center). В отчет попадает только самая последняя отметка пиковой активности для каждого физического узла. Данные после отметки пиковой активности не отражаются. Можно предположить, что количество виртуальных машин Windows Server (вкладок WS) или управляемых виртуальных машин Windows Server (вкладок SC) стало ниже отметки пиковой активности после временной точки. Такой способ отслеживания и представления использования должен позволить лучше планировать загрузку и выбирать лицензионные модели соответствующих продуктов.

На вкладках, связанных с SQL, в отчете SQL Server установки подсчитываются совокупно; не по целях — маркировка воды. Итоговые количества — это текущие счетчики установок SQL Server.

> [!NOTE]
> Инвентаризация программного обеспечения не заменяет обязательства своевременно сообщать об использовании программного обеспечения Майкрософт в соответствии с применимыми условиями лицензионного соглашения.

### <a name="poll-date-time"></a>Дата и время опросов
При использовании средства инвентаризации программного обеспечения важно понимать, что сбор данных о счетчиках пиковой активности зависит от опросов. Другими словами, отметка пиковой активности может быть зарегистрирована только опросом базового физического узла. Таким образом, счетчики с высокой наводами напрямую связаны с соответствующим "временем даты опроса". Интервал опроса можно настроить. Однако, если использовать большое значение интервала, это может повлиять на точность отметок пиковой активности. Чем больше интервал, тем менее показательными будут данные о фактическом использовании ресурсов.

### <a name="reports-are-month-by-month"></a>Отчеты структурируются по месяцам
Все отчеты, включая годовые, представлены по месяцам. Отметки пиковой активности, итоги, а также данные о компьютерах сбрасываются в начале каждого календарного месяца.

Данные отчета после перехода в новый месяц включают следующее:

-   Все отметки пиковой активности для всех узлов сбрасываются в начале нового месяца.

-   Если средство инвентаризации программного обеспечения получает по крайней мере один полный набор полезных данных от виртуальной машины по HTTPS, но не получает последующих пакетов пульса, для всех опросов базового узла в течение этого месяца будет предполагаться связь между узлом, виртуальной машиной и данными виртуальной машины, так как эта виртуальная машина работает или остановлена в течение месяца. В начале нового месяца эта связь отменяется, пока от этой виртуальной машины не будет получен полный набор данных или пакет пульса.

### <a name="additional-notes-on-report-behavior"></a>Дополнительные замечания о создании отчета

-   Вкладки со сводными данными выполняют роль справочных списков с данными инвентаризации. Узлы и их виртуальные машины перечисляются в одном столбце.

-   Пропускайте все значения, которые отмечены серым цветом или затенены. Это артефакты создания отчета из куба служб SSAS.

-   Если виртуальная машина указана как "Неизвестная ОС", это означает, что агрегатор не получил полные полезные данные из этой виртуальной машины через SIL по протоколу HTTPS.

-   Виртуальные машины, перечисленные в разделе "неизвестный узел", являются виртуальными машинами Windows Server, которые успешно передают данные инвентаризации по протоколу HTTPS в агрегатор, но агрегатор не выполняет активное или не опрашивает базовый узел для этой виртуальной машины. Для таких операций счетчики всегда будут равны нулю, поскольку базовый узел неизвестен. Воспользуйтесь командлетом `Add-SilVMHost` с правильными учетными данными, чтобы добавить узел (или все узлы) в средство инвентаризации программного обеспечения для опроса. После успешного опроса данные виртуальных машин и узлов будут связаны в последующих отчетах.

-   Все даты и время отражают локальные дату, время и языковой стандарт средства инвентаризации программного обеспечения. Сюда относятся данные инвентаризации, переданные по HTTPS системами с включенной инвентаризацией программного обеспечения. При обработке этих файлов (не более чем через 20 минут после получения) данные вставляются в базу данных с локальным системным временем.

-   "SIL агрегатор" будет отмечен на любом компьютере сервера, на котором установлен агрегатор ведения журнала инвентаризации программного обеспечения.

-   Если на физическом узле изменится количество процессоров или объем физической памяти, в отчете рядом с прежней строкой появится новая. Опросы перестанут обновлять прежнюю строку и продолжат работу с новой строкой, как будто это новый добавленный узел.

-   На вкладках **Сводка** и **Сведения** итоговые значения в столбцах одновременно работающих или управляемых серверов Windows Server указывают общее количество всех отметок пиковой активности для всех узлов, приведенных ниже. К ним относятся серверы Windows, которые не являются узлами низкоуровневой оболочки и не работают с виртуальными машинами, а также серверы, на которых могут быть запущены виртуальные машины, но они являются неизвестными, так как данные из виртуальной машины не получают из SIL через HTTPS. Для удобства эти данные суммируются.

-   В разделе **SQL Server** на вкладке **Панель мониторинга** общее количество установок SQL Server объединяет все установленные выпуски.  В результате может возникнуть расхождение с итоговым значением на вкладке **Сведения о SQL**, если на одном сервере установлено несколько выпусков SQL.  На панели мониторинга разные выпуски могут быть подсчитаны отдельно на каждом сервере, а на вкладке **Сведения** — нет.  Несколько выпусков SQL, установленных на одном сервере Windows Server, всегда учитываются в счетчике как один в соответствии с условиями лицензионного соглашения.

-   В разделе **Windows Server** на вкладке **Панель мониторинга** строки **Другие узлы низкоуровневой оболочки** и **Общее количество узлов низкоуровневой оболочки** включают физические узлы Windows Server, на которых может быть запущен или НЕ запущен компонент Hyper-V.

### <a name="column-descriptions"></a>Описание столбцов
Ниже приводятся описания каждого столбца на вкладке **Сведения о Windows Server** в отчете, который создает средство инвентаризации программного обеспечения. Другие вкладки данных не отличаются либо являются подмножеством этих столбцов. Единственным исключением будет «число installs» на вкладках «SQL Server» (см. раздел « **большая черта воды** »).

|Заголовок столбца|Описание|
|-----------------|---------------|
|Календарный месяц|Данные в отчетах группируются по месяцам, начиная с самого последнего месяца. Данные в течение месяца не имеют какого-либо порядка перечисления.|
|Имя узла|Сетевое имя или полное доменное имя для физического узла, который успешно опрашивается средством инвентаризации программного обеспечения.<br /><br />Воспользуйтесь командлетом Get-SilVMHost, чтобы найти узлы, которые были добавлены, но не опрашиваются или больше не опрашиваются. Отображается последний успешный опрос.|
|Тип узла|Изготовитель ОС на физическом узле.|
|Тип низкоуровневой оболочки|Изготовитель низкоуровневой оболочки на физическом узле.|
|Изготовитель процессора|Изготовитель процессора для процессоров на физическом узле.|
|Модель процессора|Модель процессора для процессоров на физическом узле.|
|Технология Hyper-Threading включена?|Отображает значение True или False в зависимости от состояния включения технологии Hyper-Threading для процессоров физического узла.|
|Имя виртуальной машины|Сетевое имя или полное доменное имя виртуальной машины Windows Server. Если средство инвентаризации программного обеспечения не получило данные от этой машины по HTTPS, в списке указывается понятное имя виртуальной машины в низкоуровневой оболочке.|
|Одновременно работающие виртуальные машины Windows Server по узлам|Счетчик одновременно работающих виртуальных машин Windows Server на узле. Наибольшее количество в течение месяца для этого узла является отметкой пиковой активности, полученной на этот момент времени.<br /><br />См. раздел **Отметка пиковой активности** в этой документации.<br /><br />Физические узлы с установленным сервером Windows Server или с установленным сервером и неизвестными работающими виртуальными машинами всегда имеют значение один в счетчике. Если по крайней мере одна известная виртуальная машина Windows Server работает на узле и Windows Server работает на самом узле, то операционная система узла не входит в счетчик.|
|Число физических процессоров|Число физических процессоров, установленных на физическом узле.|
|Число физических ядер|Число физических ядер процессора, установленных на физическом узле.|
|Число виртуальных процессоров|Число виртуальных процессоров, которые Windows определяет внутри виртуальной машины. Это значение может быть получено только из данных, отправляемых по HTTPS с помощью компонента инвентаризации программного обеспечения на Windows Server.|
|Дата и время опросов|Дата и время последней отметки пиковой активности для одновременно работающих виртуальных машин Windows Server на этом физическом узле.<br /><br />См. раздел **Время и дата опросов** в этой документации.|
|Последние дата и время работы виртуальной машины|Дата и время, когда средство инвентаризации программного обеспечения последний раз получило данные по HTTPS от виртуальной машины Windows Server.|
|Последние дата и время работы узла|Дата и время, когда средство инвентаризации программного обеспечения последний раз получило данные по HTTPS от физического узла Windows Server.<br /><br />Поддерживается возможность того, чтобы физические узлы, на которых работают Windows Server и Hyper-V, могли включать инвентаризацию программного обеспечения и отправлять данные по HTTPS средству инвентаризации программного обеспечения.|

## <a name="sil-aggregator-cmdlets-detail"></a>Сведения о командлетах средства инвентаризации программного обеспечения
Ниже приводятся сведения о командлетах для средства инвентаризации программного обеспечения. Полный комплект документации по командлетам см. в следующих статьях: [Командлеты PowerShell для агрегатора SIL](https://technet.microsoft.com/library/mt548455.aspx)

### <a name="publish-silreport"></a>Publish-SilReport

-   Этот командлет, используемый как есть, создаст отчет о регистрации инвентаризации программного обеспечения и поместит его в каталог документов пользователя, вошедшего в систему (Excel 2013 является обязательным на компьютере, где выполняется командлет).

-   Вместе с параметром `–OpenReport` командлет создает отчет и открывает его в Excel для просмотра.

-   Во время установки средства инвентаризации программного обеспечения вы обратите внимание, что есть параметр для установки только модуля создания отчетов. Можно установить модуль создания отчетов в клиентской операционной системе Windows, например Windows 8.1 или Windows 10. Это позволит клиенту, такому как ноутбук или планшет, подключаться к серверу базы данных средства инвентаризации программного обеспечения и публиковать отчеты инвентаризации программного обеспечения напрямую.

    -   В следующем примере выводится запрос учетных данных для подключения к серверу SILContoso базы данных средства инвентаризации программного обеспечения, создания и открытия отчета инвентаризации программного обеспечения на локальном компьютере.

        `Publish-SilReport -DBServerName "SILContoso" -DBServerCredential Get-Credential –OpenReport`

    -   Прежде чем подключаться в первый раз, в большинстве случаев потребуется открыть порт в брандмауэре на сервере базы данных средства инвентаризации программного обеспечения, чтобы разрешить подключения. Специалисты ИТ обычно настраивают порт заранее, чтобы их руководители отдела финансового контроля или других отделов имели возможность создания собственных отчетов. См. по ссылке ниже, как это сделать. Обычно порт по умолчанию для служб SQL Server Analysis Services — 2383.

### <a name="add-silvmhost"></a>Add-SilVMHost
Следующие типы узлов и версии низкоуровневой оболочки поддерживаются при использовании командлета `Add-SilVMHost` . Обратите внимание, что их не требуется указывать. Командлет `Add-SilVMHost` автоматически обнаруживает поддерживаемое сочетание. Если обнаружить сочетание не удается или предоставлены неверные учетные данные, появится запрос подтверждения. Если пользователь принимает значение "Y", узел будет добавлен, но не будет опрашиваться. Он будет добавлен как "Неизвестный".

|Версия низкоуровневой оболочки|Значение HostType для средства инвентаризации программного обеспечения|Значение HypervisorType для средства инвентаризации программного обеспечения|
|----------------------|-----------------------------------------|---------------------------------------|
|Windows Server 2012 R2|Windows|HyperV|
|VMware 5.5|VMware|Esxi|
|Xen 4.x|Ubuntu, OpenSuse или CentOS|Xen|
|XenServer 6.2|Citrix|XenServer|
|KVM|Ubuntu, OpenSuse или CentOS|KVM|

Другие версии этих платформ низкоуровневой оболочки и типы также могут работать.  Средство инвентаризации программного обеспечения поставляется с версией sshnet, указанной ниже.  Средство sshnet используется для обмена данными с платформами виртуализации на основе Linux.

<pre>sshnet 2014.4.6-beta1
https://sshnet.codeplex.com/releases/view/120504
Copyright (c) 2010, RENCI</pre>

### <a name="get-silaggregator"></a>Get-SilAggregator
`Get-SilAggregator` предоставляет сведения о конфигурации для приложения средства инвентаризации программного обеспечения. В следующем примере вывод содержит следующие сведения:

-   Приложение выполняется

-   Интервал опроса — каждый час (можно изменить с шагом в один час)

-   Время начала опроса

-   Целевой универсальный код ресурса (URI), который должен быть задан для других компьютеров, чтобы отправлять данные этому средству инвентаризации программного обеспечения

-   Отпечатки сертификатов, для которых средство инвентаризации программного обеспечения принимает данные

-   Тип учетной записи, указанный при установке

    `PS C:\Windows\system32> Get-SilAggregator`

    ``

    `State          : Running HostPollIntervalInHours : Every 1 Hour(s)`

    `PollStartTime      : 8/24/2015 5:07:33 AM`

    `TargetURI        : https://SilContoso`

    `CertificateThumbprint  : 3efc6b8ce7d5eefba5107ede9d1caca550417452, 2dc4ea8bfb64b1246a8c1ffa1b701cd1042a3412`

    `UserProfile       : Local`

### <a name="set-silaggregator"></a>Set-SilAggregator
Командлет `Set-SilAggregator` позволяет:

-   изменить часовой интервал, когда выполняется опрос;

-   изменить дату и время, когда начинается опрос с указанным интервалом;

-   добавить или удалить отпечатки сертификатов, для которых средство инвентаризации программного обеспечения будет принимать данные или которые должны быть связаны с данными.

### <a name="get-aggregatordata"></a>Get-AggregatorData

-   В таком виде командлет выводит содержимое вкладки "Сведения о Windows Server" в отчете Excel, который создает средство инвентаризации программного обеспечения.

-   При использовании параметров командлет получает данные напрямую из базы данных, которая предназначена для настраиваемого использования общего решения инвентаризации программного обеспечения.

-   Обратите внимание, что параметры `–StartTime` и `–Endtime` выводят данные отчета за первый месяц даты начала и последний месяц даты окончания.

![](../media/software-inventory-logging/SILA_Get-SILAggregator.png)

### <a name="get-silvmhost"></a>Get-SilVMHost

-   Командлет выводит список физических узлов, которые опрашивает средство инвентаризации программного обеспечения, дату и время последнего успешного опроса, HostType (или изготовителя ОС) и HypervisorType (изготовителя низкоуровневой оболочки). Дополнительные сведения о HostType и HypervisorType см. в разделе о командлете Add-SilVMHost.

    Если у узла нет даты и времени опроса, но есть поддерживаемые значения HostType и HypervisorType, это означает, что опрос еще не начался или не был успешным.

-   Этот командлет выводит также список имен узлов, которые были добавлены из данных с самих виртуальных машин, если это применимо. Такие данные отображаются в списке без значений HostType или HypervisorType. Данные позволяют сопоставить виртуальные машины и узлы, которые не удалось настроить для опроса.

-   Воспользуйтесь параметрами `–StartTime` и`–EndTime` , чтобы выяснить, когда узлы были впервые добавлены или в последний раз опрошены.

### <a name="remove-silvmhost"></a>Remove-SilVMHost

-   Этот командлет удаляет узел из списка опрашиваемых узлов. При удалении узла может быть так, что виртуальная машина на узле снова добавит его в список, однако узел не будет опрашиваться с учетными данными, указанными с помощью командлета `Add-SilVMHost` .

-   При удалении узла он не будет опрашиваться, но не будет удален из отчетов. Поскольку опрос прекращен, узел не будет присутствовать в отчетах со следующего месяца.

-   Воспользуйтесь параметрами `–StartTime` и`–EndTime` отдельно, чтобы удалить группы узлов, успешно опрошенные до определенной даты или успешно опрашиваемые с определенной даты.

## <a name="avoid-these-errors-and-issues-with-sil-and-sil-aggregator-troubleshooting-guide"></a>Избегайте следующих ошибок при работе с инвентаризацией программного обеспечения и средством инвентаризации программного обеспечения (руководство по устранению неполадок)

-   Если командлеты `SilLogging` или `Publish-Sildata` завершаются ошибкой, необходимо проверить следующее.

    -   Убедитесь, что параметр **targeturi** имеет префикс **https://** .

    -   Убедитесь, что все необходимые обновления для Windows Server установлены (см. предварительные требования для инвентаризации программного обеспечения).  Быстрый способ проверки заключается в поиске этих данных с помощью следующего командлета:`Get-SilWindowsUpdate *3060*, *3000*`

    -   Убедитесь, что сертификат для проверки подлинности в средстве инвентаризации программного обеспечения установлен в правильном хранилище на локальном сервере, который участвует в инвентаризации (см. раздел "Начало работы").

    -   В средстве инвентаризации программного обеспечения убедитесь, что отпечаток сертификата, который используется для проверки подлинности в средстве, добавлен в список с помощью командлета `Set-SilAggregator –AddCertificateThumbprint` (см. раздел "Начало работы").

    -   При использовании корпоративных сертификатов убедитесь, что сервер с включенной инвентаризацией программного обеспечения входит в домен, для которого сертификат был создан, либо его можно проверить другим способом в корневом центре. Если сертификат не является доверенным на локальном компьютере, который пытается отправить данные средству инвентаризации программного обеспечения, действие завершится ошибкой.

    -   Если все вышеперечисленное проверено, убедитесь, что сертификат, с которым было установлено средство инвентаризации программного обеспечения, действительный и его имя совпадает с именем сервера средства (это действие не требуется, если другие компьютеры успешно отправляют данные одному средству).

    -   Вы можете проверить следующее расположение кэшированных файлов SIL на сервере, пытающемся переслать/отправить, \Windows\System32.\\\\файл_журнала SIL. Если команда `SilLogging` запущена и работает более часа или команда `Publish-SilData` была недавно выполнена и в этом каталоге нет файлов, значит, отправка данных по инвентаризации прошла успешно.

-   Убедитесь, что вошедший в систему пользователь имеет доступ к базе данных SQL и службам Analysis Services.

    -   Это необходимо для установки средства инвентаризации программного обеспечения.

    -   Это необходимо при удаленном использовании PowerShell для управления агрегатором SIL.

-   Публикация отчетов средства инвентаризации программного обеспечения из операционной системы клиентского ПК

    -   Воспользуйтесь этим параметром, чтобы установить модуль создания отчетов только на клиенте Windows (8.1 или 10).

    -   Если во время удаленного создания отчета с помощью PowerShell возникают ошибки, скорее всего, для средства инвентаризации программного обеспечения, к которому выполняется подключение, необходимо открыть порт брандмауэра (см. командлет `Publish-SilReport` в разделе "Сведения о командлетах для средства инвентаризации программного обеспечения").

-   При использовании варианта учетной записи gMSA:

    -   Не забудьте перезагрузить сервер после его присоединения к группе компьютеров с включенной gMSA в Active Directory.

    -   В процессе установки не используйте полный домен при входе в домен \ пользователь. Например, используйте **мидомаин\гмсааккаунт**. Не вводите **mydomain.<i> </i> ком\гмсааккаунт**.

-   При использовании Windows Management Framework в своей среде:

    -   Убедитесь, что на серверах с установленным сила не установлен WMF 5,1.  В журнале событий можно получить ошибку, относящуюся к библиотеке DLL **' мпунитс. dll '** .  Это предотвратит правильную работу.  Для сила требуется только WMF 4,0.

## <a name="managing-sil-over-time"></a>Управление инвентаризацией программного обеспечения в динамике

### <a name="uninstallreinstall-sil-aggregator"></a>Удаление и повторная установка средства инвентаризации программного обеспечения
Если необходимо удалить и снова установить средство инвентаризации программного обеспечения, это можно сделать без потери существующих данных инвентаризации и их истории. Просто во время удаления (см. шаги в этой документации) выберите сохранение базы данных инвентаризации программного обеспечения. Затем переустановите средство инвентаризации программного обеспечения (см. шаги в этой документации) и выберите присоединение существующей базы данных.

После выполнения этого действия необходимо обновить учетные данные с помощью командлета `Add-SilVMHost` на тех узлах, которые ранее опрашивались с помощью средства инвентаризации программного обеспечения (если сбор данных для них по-прежнему необходим). Кроме того, чтобы избежать повторяющихся записей для одного узла в отчетах, необходимо снова добавить узлы для опроса и указать тот же сетевой адрес, который был указан изначально. Ниже приводятся три поддерживаемых типа vmhostname, которые можно использовать для добавления узла с помощью командлета `Add-SilVMHost`:

-   IP-адрес

-   Полное доменное имя (FQDN)

-   Имя NetBIOS

### <a name="changing-sil-aggregators"></a>Изменение средства инвентаризации программного обеспечения
Когда необходимо начать инвентаризацию серверов в среде с другим средством инвентаризации программного обеспечения, воспользуйтесь командлетом `Set-SilLogging –TargetUri` на этих серверах, чтобы изменить значение targeturi (и отпечаток сертификата, если применимо). Обратите внимание, что после этого необходимо выполнить командлет `Publish-SilData` хотя бы один раз, чтобы отправить полный набор данных новому средству инвентаризации программного обеспечения.

### <a name="changing-or-updating-certificates"></a>Изменение или обновление сертификатов
**ВАЖНЫЕ ШАГИ, ПОЗВОЛЯЮЩИЕ ИЗБЕЖАТЬ ПОТЕРИ ДАННЫХ:** Если необходимо изменить сертификат, используемый серверами для пересылки данных в агрегатор SIL, но целевой агрегатор останется прежним, выполните следующие действия, чтобы избежать возможной потери данных при передаче в агрегатор.

-   В средстве инвентаризации программного обеспечения воспользуйтесь командлетом `Set-SilAggregator –AddCertificateThumbprint` , чтобы добавить новый отпечаток сертификата.

-   На всех серверах, которые отправляют данные, установите новый сертификат в хранилище **\LOCALMACHINE\MY** удобным вам способом.

-   На всех серверах, которые отправляют данные, с помощью командлета `Set-SilLogging –CertificateThumbprint` обновите отпечаток нового сертификата.

-   **КРИТИЧЕСКОЕ Удалите старый отпечаток** из агрегатора SIL с помощью `Set-SilAggregator –RemoveCertificateThumbprint` командлета, только после обновления всех серверов, пересылаемых данными. Если сервер, отправляющий данные, продолжает отправлять данные со старым сертификатом, который уже удален из средства инвентаризации программного обеспечения, **данные будут потеряны** и не будут вставлены в базу данных средства. Это относится только к сценариям, в которых сервер ранее успешно перенаправлял данные в агрегатор SIL, а затем удаляет из списка отпечатков SIL для приема данных.

## <a name="release-notes"></a>Заметки о выпуске

-   Существует известная проблема, которая заключается в том, что средство инвентаризации программного обеспечения не обрабатывает установки SQL Server Standard Edition и не сообщает о них.  Ниже приведены шаги, позволяющие устранить эту проблему.

    1.  Откройте SQL Server Management Studio в средстве инвентаризации программного обеспечения.

    2.  Подключитесь к ядру СУБД.

    3.  Разверните в дереве выбора базу данных SoftwareInventoryLogging, а затем узел Tables.

    4.  Щелкните правой кнопкой мыши **dbo. Склсервередитион**, а затем выберите "**изменить первые 200 строк**".

    5.  Измените PropertyNumValue рядом с "Standard Edition" на **2760240536** (от-1534726760).

    6.  Закройте запрос, чтобы сохранить изменения.

    7.  Для сервера с запущенной инвентаризацией программного обеспечения, который уже передавал данные в средство инвентаризации программного обеспечения, может потребоваться один раз выполнить командлет `Publish-SilData`, чтобы средство правильно обработало установки SQL Server Standard Edition.

-   В отчетах, создаваемых во время инвентаризации программного обеспечения, все счетчики ядер процессоров включают количество потоков, если технология Hyper-Threading включена на физическом сервере.  Чтобы получить фактическое количество физических ядер на серверах с включенной технологией Hyper-Threading, необходимо уменьшить это количество вдвое.

-   Итоги в строках (на вкладках **панели мониторинга** ) и в столбцах (на вкладках **Сводка и подробные сведения** ), помеченных как "**одновременно выполняющиеся**...", для Windows Server и System Center не должны точно совпадать между двумя расположениями. На вкладке **панель мониторинга** необходимо добавить значение "**устройства Windows Server (без известных виртуальных машин**)" во**временный запуск**... значение равно этому числу на вкладках " **Сводка" и "подробности** ".

-   См. раздел **Важные шаги, чтобы избежать потери данных** при изменении или обновлении сертификатов в разделе **Управление инвентаризацией программного обеспечения в динамике** этой документации.

-   Можно добавить узлы Windows Server 2008 R2 и Windows Server 2012 в список опроса, однако эта версия средства инвентаризации программного обеспечения (1.0) поддерживает только опрос Windows Server 2012 R2 для узлов на базе Windows или Hyper-V для обеспечения всех функций.  В частности, известно, что при опросе узлов Windows Server 2008 R2 виртуальные машины и узлы могут не совпадать в отчетах средства инвентаризации программного обеспечения.

## <a name="see-also"></a>См. также
[Агрегатор 1,0 для ведения журнала инвентаризации программного обеспечения для Windows Server](https://www.microsoft.com/en-us/download/details.aspx?id=49046)<br>
[Командлеты PowerShell для агрегатора SIL](https://technet.microsoft.com/library/mt548455.aspx)<br>
[Командлеты PowerShell для SIL](https://technet.microsoft.com/library/dn283390.aspx)<br>
[Обзор SIL](https://technet.microsoft.com/library/dn268301.aspx)<br>
[Управление SIL](https://technet.microsoft.com/library/dn383584.aspx)

