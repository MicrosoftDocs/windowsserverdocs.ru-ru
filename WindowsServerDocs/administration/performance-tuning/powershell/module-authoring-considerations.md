---
title: Рекомендации по разработке модуля PowerShell
description: Рекомендации по разработке модуля PowerShell
ms.prod: windows-server-threshold
ms.technology: performance-tuning-guide
ms.topic: article
ms.author: JasonSh
author: lzybkr
ms.date: 10/16/2017
ms.openlocfilehash: 37dd860019b91daf70947dba93d20274048487a0
ms.sourcegitcommit: 0d0b32c8986ba7db9536e0b8648d4ddf9b03e452
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/17/2019
ms.locfileid: "59818725"
---
# <a name="powershell-module-authoring-considerations"></a>Рекомендации по разработке модуля PowerShell

В этом документе содержатся некоторые рекомендации, относящиеся к как модуль создается для достижения оптимальной производительности.

## <a name="module-manifest-authoring"></a>Модуль манифеста разработки

Манифеста модуля, не используйте следующие рекомендации могут иметь значительное влияние на общую производительность PowerShell, даже если модуль не используется в сеансе.

Автоматическое обнаружение команда анализирует каждый модуль, чтобы определить, какие команды, экспортируемые модулем и этот анализ может потреблять много ресурсов.
Результаты модуля анализа кэшируются на пользователя, однако кэша недоступна при первом запуске, это типичный сценарий с контейнерами.
Во время анализа модуля Если экспортируемые команды можно полностью определить из манифеста, дороже анализа модуля можно избежать.

### <a name="guidelines"></a>Руководство

* В манифесте модуля, не используйте подстановочные знаки в `AliasesToExport`, `CmdletsToExport`, и `FunctionsToExport` записей.

* Если модуль не экспортирует команды определенного типа, это явно указать в манифесте, указав `@()`.
Отсутствует или `$null` запись — эквивалентен предложению подстановочный знак `*`.

Ниже следует избегать, где это возможно:

```PowerShell
@{
    FunctionsToExport = '*'

    # Also avoid omitting an entry, it is equivalent to using a wildcard
    # CmdletsToExport = '*'
    # AliasesToExport = '*'
}
```

Вместо этого используйте:

```PowerShell
@{
    FunctionsToExport = 'Format-Hex', 'Format-Octal'
    CmdletsToExport = @()  # Specify an empty array, not $null
    AliasesToExport = @()  # Also ensure all three entries are present
}
```

## <a name="avoid-cdxml"></a>Избегайте CDXML

При принятии решения о реализации вашего модуля, вариантов три основной:

* Двоичный (обычно C#)
* Скрипт (PowerShell)
* CDXML (упаковки CIM файл XML)

Если важна скорость загрузки модуля, CDXML составляет приблизительно на порядок медленнее, чем двоичный модуль.

Двоичный модуль загружает максимально быстро, так как оно компилируется заранее и можно использовать NGen для JIT-компиляцию один раз в компьютере.

Модуль сценария обычно загружает немного медленнее, чем двоичный модуль так, как PowerShell необходимо проанализировать сценарий перед компиляцией и выполнением.

Модуль CDXML — обычно гораздо медленнее, чем модуль сценария, так как он должен сначала проанализировать XML-файл, который затем формирует совсем немного сценарий PowerShell, который затем анализируется и компилируется.

