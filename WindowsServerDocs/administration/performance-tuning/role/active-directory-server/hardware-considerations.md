---
title: Рекомендации по оборудованию в настройке производительности AD
description: Рекомендации по оборудованию в настройке производительности AD
ms.prod: windows-server-threshold
ms.technology: performance-tuning-guide
ms.topic: article
ms.author: TimWi; ChrisRob; HerbertM; KenBrumf;  MLeary; ShawnRab
author: phstee
ms.date: 10/16/2017
ms.openlocfilehash: 0f1aa1e3c07c5cb9238a332156abfec248e74176
ms.sourcegitcommit: af80963a1d16c0b836da31efd9c5caaaf6708133
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/31/2019
ms.locfileid: "63721164"
---
# <a name="hardware-considerations-in-adds-performance-tuning"></a>Рекомендации по оборудованию в добавляет настройку производительности 

>[!Important]
> Ниже приведена сводка основных рекомендаций и рекомендации по оптимизации серверного оборудования для Active Directory рабочих нагрузок, более подробно описанных в статье [планирование ресурсов для домен Active Directory служб](https://go.microsoft.com/fwlink/?LinkId=324566) . Читатели настоятельно рекомендуем ознакомиться с [планированием ресурсов для домен Active Directory служб](https://go.microsoft.com/fwlink/?LinkId=324566) , чтобы получить более подробное техническое описание и последствия этих рекомендаций.

## <a name="avoid-going-to-disk"></a>Избегайте перехода на диск

Active Directory кэширует столько базы данных, сколько позволяет память. Выборка страниц из памяти выполняется быстрее, чем при переходе на физический носитель, на базе носителя или на основе SSD. Добавьте дополнительную память для сворачивания дискового ввода-вывода.

-   Active Directory рекомендации рекомендуется разместить достаточно памяти для загрузки всего дерева в память, а также для операционной системы и других установленных приложений, таких как антивирусы, программное обеспечение для резервного копирования, мониторинг и т. д.

    -   Ограничения устаревших платформ см. в разделе [использование памяти процессом LSASS. exe на контроллерах домена под управлением Windows server 2003 или windows 2000 Server](https://support.microsoft.com/kb/308356).

    -   Используйте счетчик производительности\\"среднее время существования &gt; резервного кэша памяти в течение 30 минут".

-   Размещение операционной системы, журналов и базы данных на разных томах. Если все или большая часть DIT может быть кэширована, после того, как кэш загревается и находится в стабильном состоянии, это становится менее релевантным и предлагает еще большую гибкость в структуре хранилища. В сценариях, в которых не удается кэшировать весь DIT, важность разделения операционной системы, журналов и базы данных на отдельных томах станет более важной.

-   Как правило, соотношение операций ввода-вывода с деревом каталогов — примерно 90% чтения и 10% записи. Сценарии, в которых объем записи ввода-вывода значительно превышает 10%-20%, считаются слишком большими. Сценарии с интенсивной записью не имеют существенного выигрыша в использовании кэша Active Directory. Чтобы гарантировать устойчивость транзакций к данным, записываемым в каталог, Active Directory не выполняет кэширование записи на диск. Вместо этого он фиксирует все операции записи на диск, прежде чем возвращает состояние успешного завершения для операции, если нет явного запроса, который не выполняет. Таким образом, быстрый ввод-вывод на диск важен для повышения производительности операций записи в Active Directory. Ниже приведены рекомендации по оборудованию, которые могут повысить производительность в следующих сценариях.

    -   Аппаратные RAID-контроллеры

    -   Увеличьте число дисков с низкой задержкой и высокой степенью RPM, на которых размещены файлы DIT и log.

    -   Кэширование записи на контроллере

-   Изучите производительность дисковой подсистемы отдельно для каждого тома. Большинство сценариев Active Directory преимущественно основаны на чтении, поэтому важно проверить статистику тома, в котором размещается DIT. Однако не следует запускать наблюдение за остальными дисками, включая операционные системы и файлы журналов. Чтобы определить, правильно ли настроен контроллер домена, чтобы избежать снижения производительности хранилища, сослаться на раздел о подсистемах хранения для рекомендаций по хранению стандартов. Во многих средах философией является обеспечение достаточного количества головных помещений для размещения скачков или пиков нагрузки. Эти пороговые значения представляют собой пороговые значения предупреждений, в которых головное место для размещения всплесков или пиковых нагрузок перестает быть ограниченным и снижает скорость реагирования клиента. Коротко говоря, превышение этих пороговых значений не является допустимым в течение короткого срока (от 5 до 15 минут в несколько раз в день), однако система, работающая с этими рода статистикой, не полностью кэширует базу данных, и ее следует исследовать.

    -   База данных =&gt; = экземпляры (LSASS/Ntdsa)\\база данных ввода-вывода считывает среднюю задержку &lt; 15ms

    -   База данных =&gt; = экземпляры (LSASS/Ntdsa)\\операций чтения базы данных ввода-вывода &lt; в секунду 10

    -   База данных =&gt; = экземпляры (LSASS/Ntdsa)\\в журнале ввода-вывода записывают среднюю &lt; задержку 10 мс

    -   База данных =&gt; = экземпляров (LSASS/Ntdsa)\\операций записи в журнал ввода-вывода/с — только информационный.

        Чтобы обеспечить согласованность данных, все изменения должны быть записаны в журнал. Здесь нет хорошего или плохого числа, это лишь мера объема поддержки хранилища.

-   Спланируйте неядерные дисковые операции ввода-вывода, такие как сканирование резервных копий и антивирусные программы, для периодов непиковой нагрузки. Кроме того, используйте средства резервного копирования и защиты от вирусов, которые поддерживают функцию ввода-вывода с низким приоритетом, появившуюся в Windows Server 2008, чтобы сократить конкуренцию с потребностями ввода-вывода в Active Directory.

## <a name="dont-over-tax-the-processors"></a>Не переносите налоги на процессоры

Процессоры, у которых недостаточно свободных циклов, могут вызвать длительное время ожидания при получении потоков на процессор для выполнения. Во многих средах философией является обеспечение достаточного количества головных помещений для размещения скачков или пиков нагрузки, чтобы снизить влияние на скорость реагирования клиента в этих сценариях. Коротко говоря, превышение приведенных ниже пороговых значений не является допустимым в течение короткого срока (от 5 до 15 минут в несколько раз в день), однако система, работающая с этими категориями статистических данных, не предоставляет головное пространство для ненормальных нагрузок и может быть легко помещено в подлежащие налогообложению ценарио. Системы, на которые налагаются длительные периоды выше пороговых значений, следует исследовать, чтобы уменьшить нагрузку на процессор.

-   Дополнительные сведения о том, как выбрать процессор, см. в разделе [Настройка производительности для оборудования сервера](../../hardware/index.md).

-   Добавьте оборудование, Оптимизируйте загрузку, прямые клиенты в любое место или удалите нагрузку из среды, чтобы снизить нагрузку на ЦП.

-   Используйте счетчик производительности "сведения\_о процессоре (всего &lt; )"\\% загруженности процессора 60%.

## <a name="avoid-overloading-the-network-adapter"></a>Избегайте перегрузки сетевого адаптера

Как и в случае с процессорами, чрезмерное использование сетевого адаптера приведет к длительному времени ожидания для передачи исходящего трафика в сеть. Active Directory, как правило, имеют небольшие входящие запросы и относительно значительно большие объемы данных, возвращаемых в клиентские системы. Объем отправленных данных намного превышает принятые данные. Во многих средах философией является обеспечение достаточного количества головных помещений для размещения скачков или пиков нагрузки. Это пороговое значение представляет собой порог предупреждения, при котором головное место для размещения всплесков или пиковых нагрузок становится ограниченным и снижает скорость реагирования клиента. Коротко говоря, превышение этих пороговых значений не является допустимым в течение короткого срока (от 5 до 15 минут в несколько раз в день), однако система, работающая с этими сортами статистических данных, находится над обработкой и должна быть исследована.

-   Дополнительные сведения о настройке сетевой подсистемы см. в разделе [Настройка производительности для сетевых подсистем](../../../../networking/technologies/network-subsystem/net-sub-performance-top.md).

-   Используйте счетчик производительности "сравнить\*NetworkInterface\\() Отправлено байт/с\*)\\с NetworkInterface () текущей пропускной способностью. Коэффициент должен быть менее 60% использования.

## <a name="see-also"></a>См. также
- [Настройка производительности Active Directory серверов](index.md)
- [Рекомендации по протоколу LDAP](ldap-considerations.md)
- [Правильное размещение контроллеров домена и рекомендации по сайту](site-definition-considerations.md)
- [Устранение проблем с производительностью доменных служб Active Directory](troubleshoot.md) 
- [Планирование ресурсов для доменных служб Active Directory](https://go.microsoft.com/fwlink/?LinkId=324566)