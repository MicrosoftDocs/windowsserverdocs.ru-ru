---
title: Улучшения кэша и диспетчера памяти
description: Улучшения кэша и диспетчера памяти в Windows Server 2016
ms.prod: windows-server
ms.technology: performance-tuning-guide
ms.topic: article
ms.author: Pavel; ATales
author: phstee
ms.date: 10/16/2017
ms.openlocfilehash: 5f66f43a0d1b003ab833c91538594510b44027d6
ms.sourcegitcommit: 6aff3d88ff22ea141a6ea6572a5ad8dd6321f199
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/27/2019
ms.locfileid: "71384932"
---
# <a name="cache-and-memory-manager-improvements"></a>Улучшения кэша и диспетчера памяти

В этом разделе описаны улучшения диспетчера кэша и диспетчера памяти в Windows Server 2012 и 2016.

## <a name="cache-manager-improvements-in-windows-server-2016"></a>Улучшения диспетчера кэша в Windows Server 2016
Кроме того, диспетчер кэша добавил поддержку для истинных асинхронных операций чтения с кэшированием.
Это потенциально может повысить производительность приложения, если оно сильно зависит от асинхронных операций чтения с кэшированием.  Хотя большинство встроенных файловых систем поддерживали асинхронные операции чтения в течение определенного времени, часто возникали ограничения производительности из-за различных вариантов проектирования, связанных с обработкой внутренних рабочих очередей пулов потоков и FileSystem.  Благодаря поддержке от ядра диспетчер кэша теперь скрывает все сложности управления пулом потоков и рабочих очередей из файловой системы, что делает его более эффективным при обработке асинхронных операций чтения с кэшированием. Диспетчер кэша имеет один набор структур данных управления для каждого из уровней вложенности виртуального жесткого диска (поддерживаемый системой) для максимального параллелизма.


## <a name="cache-manager-improvements-in-windows-server-2012"></a>Улучшения диспетчера кэша в Windows Server 2012
В дополнение к усовершенствованиям диспетчера кэша для последовательной работы для последовательных рабочих нагрузок был добавлен новый API [кксетреадахеадгрануларитекс](https://msdn.microsoft.com/library/windows/hardware/hh406341.aspx) , позволяющий драйверам файловой системы, таким как SMB, изменять параметры упреждающего чтения. Это позволяет повысить пропускную способность для сценариев с удаленными файлами, отправляя несколько небольших запросов чтения с небольшим размером вместо отправки одного большого запроса на чтение вперед. Программно настраивать эти значения для каждого файла могут только компоненты ядра, такие как драйверы файловой системы.

## <a name="memory-manager-improvements-in-windows-server-2012"></a>Улучшения диспетчера памяти в Windows Server 2012
Включение объединения страниц может сократить использование памяти на серверах, имеющих большое количество частных страниц с одинаковым содержимым. Например, серверы, на которых работает несколько экземпляров одного приложения, интенсивно использующего память, или одно приложение, которое работает с очень повторяющимися данными, могут быть хорошим кандидатом на попытку объединения страниц. Недостаток функции объединения страниц повышает загрузку ЦП.

Ниже приведены некоторые примеры ролей сервера, в которых объединение страниц вряд ли дает много преимуществ:

-   Файловые серверы (большая часть памяти потребляется страницами файлов, которые не являются частными и, следовательно, некомбинированными)

-   Серверы Microsoft SQL Server, настроенные для использования AWE или больших страниц (большая часть памяти является закрытой, но не подстраничной).

Объединение страниц отключено по умолчанию, но его можно включить с помощью командлета Windows PowerShell [Enable-сценарии mmagent](https://technet.microsoft.com/library/jj658954.aspx) . Объединение страниц было добавлено в Windows Server 2012.
