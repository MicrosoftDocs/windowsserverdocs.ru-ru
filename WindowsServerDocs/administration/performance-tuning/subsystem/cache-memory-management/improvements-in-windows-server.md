---
title: Улучшения кэша и диспетчера памяти
description: Улучшения диспетчера кэша и памяти в Windows Server 2016
ms.topic: article
ms.author: pavel
author: phstee
ms.date: 10/16/2017
ms.openlocfilehash: 31cc9f964ac7ea2d95d5240376ea2ce7fb46fcee
ms.sourcegitcommit: d08965d64f4a40ac20bc81b14f2d2ea89c48c5c8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/08/2020
ms.locfileid: "96864333"
---
# <a name="cache-and-memory-manager-improvements"></a>Улучшения кэша и диспетчера памяти

В этом разделе описаны улучшения диспетчера кэша и диспетчера памяти в Windows Server 2012 и 2016.

## <a name="cache-manager-improvements-in-windows-server-2016"></a>Улучшения диспетчера кэша в Windows Server 2016
Кроме того, диспетчер кэша добавил поддержку для истинных асинхронных операций чтения с кэшированием.
Это потенциально может повысить производительность приложения, если оно сильно зависит от асинхронных операций чтения с кэшированием.  Хотя большинство встроенных файловых систем поддерживали асинхронные операции чтения в течение определенного времени, часто возникали ограничения производительности из-за различных вариантов проектирования, связанных с обработкой внутренних рабочих очередей пулов потоков и FileSystem.  Благодаря поддержке от ядра диспетчер кэша теперь скрывает все сложности управления пулом потоков и рабочих очередей из файловой системы, что делает его более эффективным при обработке асинхронных операций чтения с кэшированием. Диспетчер кэша имеет один набор структур данных управления для каждого из уровней вложенности виртуального жесткого диска (поддерживаемый системой) для максимального параллелизма.


## <a name="cache-manager-improvements-in-windows-server-2012"></a>Улучшения диспетчера кэша в Windows Server 2012
В дополнение к усовершенствованиям диспетчера кэша для последовательной работы для последовательных рабочих нагрузок был добавлен новый API [кксетреадахеадгрануларитекс](/windows-hardware/drivers/ifs/ccsetreadaheadgranularityex) , позволяющий драйверам файловой системы, таким как SMB, изменять параметры упреждающего чтения. Это позволяет повысить пропускную способность для сценариев с удаленными файлами, отправляя несколько небольших запросов чтения с небольшим размером вместо отправки одного большого запроса на чтение вперед. Программно настраивать эти значения для каждого файла могут только компоненты ядра, такие как драйверы файловой системы.

## <a name="memory-manager-improvements-in-windows-server-2012"></a>Улучшения диспетчера памяти в Windows Server 2012
Включение объединения страниц может сократить использование памяти на серверах, имеющих большое количество частных страниц с одинаковым содержимым. Например, серверы, на которых работает несколько экземпляров одного приложения, интенсивно использующего память, или одно приложение, которое работает с очень повторяющимися данными, могут быть хорошим кандидатом на попытку объединения страниц. Недостаток функции объединения страниц повышает загрузку ЦП.

Ниже приведены некоторые примеры ролей сервера, в которых объединение страниц вряд ли дает много преимуществ:

-   Файловые серверы (большая часть памяти потребляется страницами файлов, которые не являются частными и, следовательно, некомбинированными)

-   Серверы Microsoft SQL Server, настроенные для использования AWE или больших страниц (большая часть памяти является закрытой, но не подстраничной).

Объединение страниц отключено по умолчанию, но его можно включить с помощью командлета Windows PowerShell [Enable-сценарии mmagent](/powershell/module/mmagent/enable-mmagent) . Объединение страниц было добавлено в Windows Server 2012.
