---
title: Обеспечение высокой производительности Локальных дисковых пространств
description: Локальные дисковые пространства автоматически оптимизируют производительность на основе конфигурации кэша оборудования, которое вы используете, как описано в этом разделе.
ms.prod: windows-server
ms.technology: performance-tuning-guide
ms.topic: article
ms.assetid: 15a519fa-37cc-4d84-a9fe-097d33bb71ea
author: phstee
ms.author: vshankar; danlo; clausjor; stevenek
ms.date: 4/14/2017
ms.openlocfilehash: 42d05529aed6f1c5f9c5247a143e256fd52d056a
ms.sourcegitcommit: 771db070a3a924c8265944e21bf9bd85350dd93c
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/27/2020
ms.locfileid: "85471199"
---
# <a name="performance-tuning-for-storage-spaces-direct"></a>Обеспечение высокой производительности Локальных дисковых пространств

Локальные дисковые пространства — это программно-определяемое хранилище на основе Windows Server. Оно автоматически оптимизирует свою производительность, избавляя от необходимости вручную указывать число столбцов, конфигурацию кэша оборудования, которое используется, и другие факторы, которые приходится настраивать вручную для общих хранилищ SAS. Справочные сведения см. в разделе [Локальные дисковые пространства в Windows Server 2016](../../../../storage/storage-spaces/storage-spaces-direct-overview.md).

Кэш шины программного хранилища Локальных дисковых пространств настраивается автоматически в зависимости от типа хранилищ в системе. Распознаются три типа: **жесткий диск**, **SSD** и **NVMe**. Кэш использует самое быстрое хранилище для кэширования чтения и (или) записи соответственно, а более медленное хранилище используется для постоянного хранения данных.

Ниже представлена сводная таблица конфигураций по умолчанию.

| Типы хранилищ | Конфигурация кэша |
| --- | --- |
| Любой отдельный тип | Если имеется хранилище только одного типа, то кэш шины программного хранилища не настраивается. |
| SSD и жесткие диски HDD или NVMe и жесткие диски | Самое быстрое хранилище настраивается в качестве уровня кэша и кэширует операции чтения и записи. |
| SSD и SSD или NVMe и NVMe | Комбинации быстрых носителей нацелены на сочетание хранилищ с низкой и высокой износостойкостью. Например, для кэша могут использоваться SSD-устройства флэш-памяти NAND, выдерживающие 10 перезаписей накопителя в день (DWPD), а для хранения данных — SSD-устройства флэш-памяти NAND с ресурсом в 1,5 DWPD. Для реализации подобных систем Локальным дисковым пространствам предоставляется набор строк модели для определения устройств кэша. Дополнительные сведения см. справочнике по командлету [Enable-StorageSpacesDirect](https://technet.microsoft.com/library/mt589697.aspx) (`CacheDeviceModel`). <br><br>В системе, сочетающей только быстрые накопители, кэшируются только операции записи. Операции чтения не кэшируются. |

Обратите внимание на то, что кэширование устройств SSD и NVMe по умолчанию относится только к операциям записи. Это делается намеренно: так как накопитель работает быстро, то скорость перемещения считанного содержимого на устройства кэша ограничена его производительностью. Это не всегда так, однако следует соблюдать осторожность, так как включение кэша чтения может напрасно тратить ресурсы устройства кэша без видимого прироста производительности. Ниже приведены возможные примеры.

* **NVme и SSD** Включение кэша чтения позволит ускорить операции ввода-вывода при чтении за счет преимуществ подключения PCIe и (или) более высокой производительности операций ввода-вывода устройств NVMe по сравнению с объединенными устройствами SSD. <br>Это _может_ иметь место в сценариях, ориентированных на пропускную способность, ввиду разницы в пропускной способности устройств NVMe и адаптера шины, подключающегося к устройствам SSD. Это _может не_ иметь место в ситуациях, когда стоимость операций ввода-вывода в секунду для ЦП может ограничивать системы, не позволяя увеличить производительность.
* **NVMe и NVMe** Аналогично, если скорость чтения кэша NVMe выше, чем скорость совокупного хранилища NVMe, то включение кэша чтения может иметь смысл. <br>Удачные случаи применения кэша чтения в таких конфигурациях, скорее всего, будут нетипичными.

Чтобы просмотреть и изменить конфигурацию кэша, используйте командлеты [Get-ClusterStorageSpacesDirect](https://technet.microsoft.com/library/mt634616.aspx) и [Set-ClusterStorageSpacesDirect](https://technet.microsoft.com/library/mt763265.aspx). Свойства `CacheModeHDD` и `CacheModeSSD` определяют, как кэш функционирует на носителе указанного типа.

## <a name="additional-references"></a>Дополнительные ссылки

- [Основные сведения о Локальных дисковых пространствах](../../../../storage/storage-spaces/understand-storage-spaces-direct.md)
- [Планирование Локальных дисковых пространств](../../../../storage/storage-spaces/plan-storage-spaces-direct.md)
- [Обеспечение высокой производительности файловых серверов](../../role/file-server/index.md)
- [Рекомендации по проектированию программно-определяемого хранилища](https://technet.microsoft.com/library/mt243829.aspx) (для Windows Server 2012 R2 и общего хранилища SAS)
