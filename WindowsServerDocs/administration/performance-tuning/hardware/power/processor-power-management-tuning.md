---
title: Управление питанием процессора (PPM), помощник по настройке для плана сбалансированного электропитания Windows Server
description: Управление питанием процессора (PPM), помощник по настройке для плана сбалансированного электропитания Windows Server
ms.prod: windows-server-threshold
ms.technology: performance-tuning-guide
ms.topic: article
ms.author: Qizha;TristanB
author: phstee
ms.date: 10/16/2017
ms.openlocfilehash: 9b8af89992f01712e16d0ef503c8cbbac915df1d
ms.sourcegitcommit: 6ef4986391607bb28593852d06cc6645e548a4b3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/07/2019
ms.locfileid: "66811590"
---
# <a name="processor-power-management-ppm-tuning-for-the-windows-server-balanced-power-plan"></a>Управление питанием процессора (PPM), помощник по настройке для плана сбалансированного электропитания Windows Server

Начиная с Windows Server 2008, Windows Server предоставляет три схем управления питанием: **С балансировкой**, **высокопроизводительных**, и **Power Saver**. **Сбалансированный** схемы управления питанием выбирается по умолчанию, нацелилась обеспечить лучшие энергетической эффективности набор типичных серверных рабочих нагрузок. В этом разделе описываются рабочие нагрузки, которые были использованы для определения настроек по умолчанию для **Сбалансированный** схему для нескольких последних версий Windows.

При запуске серверной системе, имеющий характеристики значительно отличается от рабочей нагрузки или производительности и требования к питанию, чем эти рабочие нагрузки, может потребоваться рекомендуется настроить параметры питания по умолчанию (т. е. создать собственную схему управления питанием). Один источник полезные сведения о настройки — [рекомендации Power оборудования сервера](../power.md). Кроме того, вы можете решить, **высокопроизводительных** схемы управления питанием является правильным выбором для вашей среды, распознавая, что скорее всего будет занимать значительный объем электроэнергии, попадания в обмен на некоторый уровень скорости реагирования.

> [!IMPORTANT]
> Следует использовать политики питания, которые входят в состав Windows Server, если у вас нет конкретной необходимости создать новый и очень хорошо понимать, что результаты будут различаться в зависимости от характеристик рабочей нагрузки.

## <a name="windows-processor-power-tuning-methodology"></a>Методология помощник по настройке Windows Процессор Power


### <a name="tested-workloads"></a>Протестированных рабочих нагрузок

Рабочие нагрузки выбраны для охвата усилия набор «типичных» рабочих нагрузок Windows Server. Очевидно, что этот набор не является представлять весь спектр реальных серверных средах.

Помощник по настройке каждой политики питания — это данные, обусловленных следующих пяти рабочих нагрузок:

-   **Рабочая нагрузка веб-сервера IIS**

    Вызывается Web основы внутреннего теста производительности Microsoft используется для оптимизации эффективности энергопотребления платформы веб-сервера IIS. В настройке веб-сервера и нескольких клиентов, которые имитируют доступ веб-трафик. Распределение динамической, "Горячий" static (выполняющаяся в памяти) и статические "холодное" (доступ к диску требуется) веб-страниц основан на статистических примеры рабочих серверов. Чтобы отправить ядер ЦП сервера полной загрузки (одного конца спектра протестированных), установки должна недостаточно быстро сети и дисковые ресурсы.

-   **Рабочая нагрузка базы данных SQL Server**

    [TPC-E](http://www.tpc.org/tpce/default.asp) тестирования является популярным измерения производительности для анализа производительности базы данных. Он используется для создания рабочей нагрузки OLTP для оптимизации настройки в МИНУТУ. Эта рабочая нагрузка имеет значительные дискового ввода-вывода и поэтому имеет требование высокой производительности для хранения размера системы и памяти.

-   **Рабочая нагрузка файлового сервера**

    Корпорация Майкрософт разработала тест производительности называется [FSCT](http://www.snia.org/sites/default/files2/sdc_archives/2009_presentations/tuesday/BartoszNyczkowski-JianYan_FileServerCapacityTool.pdf) используется для создания рабочая нагрузка SMB файлового сервера. Он создает большого файла на сервере и использует множество клиентских систем (фактические или виртуализированных) для создания файла открытие, закрытие, операции чтения и записи. Mix операции основан на статистических примеры рабочих серверов. Он повышается нагрузка ЦП, диска и сетевых ресурсов.

-   **SPECpower — JAVA рабочей нагрузки**

    [SPECpower\_ssj2008](http://spec.org/power_ssj2008/) является первой стандартных спецификаций теста производительности, совместно оценивает характеристики мощности и производительности. Это рабочая нагрузка Java на стороне сервера с разными уровнями нагрузки ЦП. Он не требует много ресурсов или сетевом диске, но он имеет определенные требования к пропускной способности памяти. Почти все действия ЦП выполняется в пользовательском режиме; действие в режиме ядра не имеет влияния на тесты питания и характеристики производительности, за исключением решений по управлению питанием.

-   **Рабочую нагрузку сервера приложений**

    [SAP SD](http://global.sap.com/campaigns/benchmark/index.epx) теста производительности используется для создания рабочую нагрузку сервера приложений. Настройка двухуровневая используется с базой данных и сервера приложений в один и тот же узел сервера. Эта рабочая нагрузка также использует время ответа, как метрики производительности, который отличается от других проверенные рабочих нагрузок. Таким образом он используется для проверки влияния параметров PPM на скорость реагирования. Тем не менее он не предназначен для отражать все чувствительных к задержке рабочих нагрузок.

Все тесты производительности, за исключением SPECpower изначально были разработаны для анализа производительности и поэтому были созданы для выполнения на уровнях пиковой нагрузки. Тем не менее, средних и небольших нагрузок уровни являются наиболее характерна для реальных рабочих серверов и больший интерес для **Сбалансированный** планирование оптимизации. Мы намеренно запустить тесты производительности на различных уровнях нагрузки из 100% до 10% (в шагах 10%) с помощью различных методов регулирования (например, путем уменьшения числа активных пользователей и клиентов).

### <a name="hardware-configurations"></a>Конфигурации оборудования

Для каждого выпуска Windows самые последние рабочие серверы используются в процессе анализа и оптимизации план питания. В некоторых случаях тесты были выполнены в системах подготовительной, расписание которого выпуска сопоставления, которые следующего выпуска Windows.

Учитывая, что большинство серверов продаются с помощью сокетов процессоров от 1 до 4, а поскольку вертикального масштабирования серверов обычно не имеют энергетической эффективности как одним из главных вопросов, power плана оптимизации в первую очередь тесты в системах гнезда 2 и 4 разъемами. Чтобы разрешить каждую систему для запуска вплоть до его полностью, при учете затрат ограничения, которые обычно на месте для реальных серверных сред, таких как хранение выбираются объем оперативной памяти, диска и сетевых ресурсов для каждого теста конфигурации разумным.

> [!IMPORTANT]
> Несмотря на то, что система может работать в пиковой нагрузки, мы обычно оптимизировать для более низкие уровни нагрузки, так как серверы, постоянно работающие на уровни пиковой нагрузки было бы хорошо, желательно использовать **высокопроизводительных** план электропитания, если не энергии эффективность имеет высокий приоритет.

### <a name="metrics"></a>metrics

Все проверенные тесты используют пропускную способность как метрики производительности. Время ответа считается как требование соглашение об уровне ОБСЛУЖИВАНИЯ для этих рабочих нагрузок (за исключением SAP, где он представляет собой основной показатель). Например время тестирования считается «допустимое», если среднее или максимальное время отклика меньше определенного значения.

Таким образом PPM, анализа настройки также использует пропускную способность, в качестве метрики производительности.  На высоком уровне загрузки (100% загрузки ЦП) нашей целью является пропускная способность не должно снижать более чем на несколько процентов из-за оптимизации управления питанием. Но первоочередным соображением для обеспечения максимальной эффективности power (как определено ниже) на уровнях средним и низким нагрузки.

![Формула энергоэффективности](../../media/serverperf-ppm-formula.jpg)

Под управлением ядер ЦП на нижнем частотах снижает расход энергии. Однако уровень низких частот обычно уменьшить пропускную способность и увеличить время отклика. Для **Сбалансированный** схемы управления питанием, имеется намеренно компромисс скорость реагирования и мощность. Тестирование рабочей нагрузки SAP, а также время ответа соглашения об уровне обслуживания для других рабочих нагрузок, убедитесь, что увеличение времени отклика не превышает определенное пороговое значение (% 5 в качестве примера) для этих конкретных рабочих нагрузок.

> [!NOTE]
> Если рабочая нагрузка использует время ответа в качестве показателя производительности, системы следует или переключиться на **высокопроизводительных** схему управления питанием или изменение **Сбалансированный** управления питанием, как указано в [ Рекомендуется использовать параметры плана сбалансированного электропитания для быстрого ответа](recommended-balanced-plan-parameters.md).

### <a name="tuning-results"></a>Результаты настройки

Начиная с Windows Server 2008, корпорация Microsoft работала с Intel и AMD оптимизации параметров PPM для последних процессоров сервера для каждого выпуска Windows. Огромное количество сочетаний параметров PPM, были протестированы на каждом рабочих нагрузок описанные выше, чтобы найти наиболее эффективное энергопотребление на уровнях нагрузки. Как программное обеспечение алгоритмы были уточненные и архитектуру оборудования power evolved, каждая новая Windows Server всегда больше или равно расхода электроэнергии, чем его более ранних версий по всему спектру протестированных рабочих нагрузок.

Ниже приведен пример расхода электроэнергии при различных уровнях нагрузки TPC-E на 4 гнезда рабочем сервере под управлением Windows Server 2008 R2. Он показывает улучшение 8% на уровнях средней нагрузки по сравнению с Windows Server 2008.

![Сравнение энергоэффективности](../../media/serverperf-ppm-figure1.jpg)

## <a name="customized-tuning-suggestions"></a>Настроить предложения по настройке

Если характеристик рабочей нагрузки первичной значительно отличаются от пяти рабочих нагрузок, используемый по умолчанию **Сбалансированный** схемы управления питанием PPM настройки, вы можете поэкспериментировать путем изменения одного или нескольких параметров PPM найти лучше всего подходит для вашей Среда.

Из-за количество и сложность параметров это может быть сложной задачей, но если вы ищете рекомендации компромисс между энергии эффективность потребления и рабочую нагрузку для конкретной среды, возможно, стоит затраченных усилий.

 Полный набор PPM параметрам можно найти в [настройки управления питанием процессора](https://msdn.microsoft.com/windows/hardware/gg566941.aspx). Некоторые параметры питания простейший со может быть:

-   **Порог повышения производительности процессора и увеличить производительность загруженности** — большие значения медленный ответ perf увеличение числа операций

-   **Пороговое значение уменьшение производительности процессора** — большие значения quicken ответа power периоды простоя

-   **Уменьшение производительности загруженности** — большие значения более постепенно уменьшить perf периоды простоя

-   **Политики повышения производительности процессора** — «Single» политики замедляет ответ perf устойчивый увеличение активности; политики «Rocket» реагирует, чтобы быстро повысить действия

-   **Политика уменьшения производительности процессора** — «Single» политики более постепенно снижается производительность больше простоя периодов; политики «Rocket» удаляет power очень быстро при вводе периода простоя

>[!Important]
> Прежде чем все эксперименты, необходимо сначала понять рабочих нагрузок, которые помогут вам правильно выбрать параметр в МИНУТУ и снизить затраты настройки.

### <a name="understand-high-level-performance-and-power-requirements"></a>Сведения о высокого уровня производительности и требования к мощности

Если рабочая нагрузка «в режиме реального времени» (например, подвержены количество сбоев или других видимых конечным пользователем влияет на) или имеет очень узкий скорость реагирования требования (например, брокерских), и если расход энергии не является основным критерием для вашей среды, необходимо переключиться на **высокопроизводительных** схемы управления питанием. В противном случае следует понять требования ко времени ответа для рабочих нагрузок, а затем настроить параметры PPM для повышения эффективности работы возможного питания, по-прежнему соответствует этим требованиям.

### <a name="understand-underlying-workload-characteristics"></a>Понять базовых характеристик рабочей нагрузки

Необходимо знать рабочие нагрузки и спроектировать эксперимента наборы параметров для настройки. Например если нужно быть очень этот частоты ядер ЦП fast (возможно, что у вас есть множественными рабочей нагрузки при помощи значимых периодов простоя, но потребуется очень быстрого отклика при поступлении новой транзакции), то производительность процессора увеличить политики может потребоваться установить значение «rocket» (который, как и предполагает название, прокрутить частотой ядра ЦП, его максимальное значение, а не усиливает за период времени).

Если рабочая нагрузка очень множественными, интервал проверки PPM может быть сокращен до сделать начать пошаговую отладку раньше после поступления в случае большого количества частота ЦП. Если рабочая нагрузка не имеет высокие показатели потоков параллелизм, то технология core parking можно включить для принудительного рабочей нагрузки для выполнения на меньшее число ядер, которые потенциально могут повысить процессора попаданий в кэшированный коэффициенты.

Если требуется увеличить тактовая частота ЦП на уровнях среднего использования (т. е. не небольшой рабочей нагрузкой уровней), пороговые значения увеличивать или уменьшать производительность процессора может быть настроено в реагирует пока соблюдаются определенные уровни действия.

### <a name="understand-periodic-behaviors"></a>Понять периодические поведения

Возможны требования к производительности для дневного и ночного времени или на выходные дни, или могут быть разных рабочих нагрузок, работающих в разное время. В этом случае один набор параметров PPM может не подходить для все периоды времени. Так как несколько пользовательских схем управления питанием можно продумать, это возможно даже настройки для различных периодов времени и переключаться между схемами управления питанием посредством сценариев и других средств настройки динамической системы.

Опять же это добавляет сложность процесса оптимизации, так что это вопрос, насколько значение удастся добиться от этого типа настройки, скорее всего, потребуется повторить при наличии значительных аппаратных обновления или изменения рабочей нагрузки.

Именно по этой причине Windows предоставляет **Сбалансированный** схема управления питанием в первую очередь, так как во многих случаях это возможно, не стоит наличии настройки для конкретных рабочих нагрузок на конкретном сервере.

## <a name="see-also"></a>См. также
- [Вопросы производительности оборудования сервера](../index.md)
- [Рекомендации по питанию серверного оборудования](../power.md)
- [Питание и настройка производительности](power-performance-tuning.md)
- [Настройка управления питанием процессора](processor-power-management-tuning.md)
- [Рекомендуемые параметры сбалансированного режима энергоснабжения](recommended-balanced-plan-parameters.md)
