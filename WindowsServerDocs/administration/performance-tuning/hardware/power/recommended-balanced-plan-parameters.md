---
title: Рекомендуемые параметры сбалансированного плана электропитания для быстрого времени ответа
description: Рекомендуемые параметры сбалансированного плана электропитания для быстрого времени ответа
ms.prod: windows-server
ms.technology: performance-tuning-guide
ms.topic: article
ms.author: Qizha;TristanB
author: phstee
ms.date: 10/16/2017
ms.openlocfilehash: 96037a577c9f2a835e9c49bf9339ed8dc6da1a6b
ms.sourcegitcommit: 6aff3d88ff22ea141a6ea6572a5ad8dd6321f199
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/27/2019
ms.locfileid: "71383510"
---
# <a name="recommended-balanced-power-plan-parameters-for-workloads-requiring-quick-response-times"></a>Рекомендуемые параметры сбалансированного плана управления питанием для рабочих нагрузок, для которых требуется быстрое время ответа

**Сбалансированная** схема управления питанием по умолчанию использует **пропускную способность** в качестве показателя производительности для настройки. Во время стабильного состояния **пропускная способность** не изменяется с учетом того, что система полностью перегружена (~ 100% использования).  В результате **сбалансированная** схема управления питанием имеет большое значение, благодаря минимизации частоты процессора и максимальному использованию.

Однако **время ответа** может экспоненциально увеличиваться при увеличении использования. Настоящее время, потребность в быстром времени ответа значительно увеличилась. Хотя корпорация Майкрософт предпредложила пользователям переключаться на **высокопроизводительную** схему управления питанием, когда им требуется быстрое время ответа, некоторые пользователи не хотят терять преимущество при низкой нагрузке на средний уровень нагрузки. Таким образом, корпорация Майкрософт предоставляет следующий набор предлагаемых изменений параметров для рабочих нагрузок, для которых нужно быстрое время ответа.


| Параметр | Описание | Значение по умолчанию | Предложенное значение |
|------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------|
| Порог увеличения производительности процессора | Пороговое значение использования, превышающее частоту увеличения | 90 | 60 |
| Порог уменьшения производительности процессора | Порог использования, ниже которого частота должна уменьшиться | 80 | 40 |
| Время увеличения производительности процессора | Число промиллных окон проверки до увеличения частоты | 3 | 1 |
| Политика увеличения производительности процессора | Скорость увеличения частоты | Single | Идеальное |

Чтобы задать предложенные значения, пользователи могут выполнять следующие команды в окне с администратором:

``` syntax
Powercfg -setacvalueindex scheme_balanced sub_processor PERFINCTHRESHOLD 60
Powercfg -setacvalueindex scheme_balanced sub_processor PERFDECTHRESHOLD 40
Powercfg -setacvalueindex scheme_balanced sub_processor PERFINCTIME 1
Powercfg -setacvalueindex scheme_balanced sub_processor PERFINCPOL 0
Powercfg -setactive scheme_balanced
```

Это изменение основано на анализе производительности и степени компромисса с помощью следующих рабочих нагрузок. Для пользователей, которые хотят более точно настроить эффективность работы с определенными требованиями соглашения об уровне обслуживания, ознакомьтесь с [вопросами производительности серверного оборудования](../power.md).

>[!Note]
> Дополнительные рекомендации и анализ использования схем управления питанием для настройки виртуализированных рабочих нагрузок см. в статье [Конфигурация Hyper-v](../../role/hyper-v-server/configuration.md) .

## <a name="specpower--java-workload"></a>Спекповер — Рабочая нагрузка JAVA

[Спекповер\_ssj2008](http://spec.org/power_ssj2008/), самым популярным отраслевым показателем производительности для характеристик сервера и производительности, используются для проверки влияния на электроэнергию. Так как он использует только **пропускную способность** в качестве метрики производительности, **сбалансированная** схема управления питанием по умолчанию обеспечивает лучшую эффективность работы.

Предлагаемое изменение параметра потребляет немного больше энергии на свете (т. е. < = 20%) уровни нагрузки. Но с более высоким уровнем нагрузки разница возрастает, и она начинает использовать ту же мощность, что и **высокопроизводительная** схема управления питанием после уровня загрузки 60%. Чтобы использовать предложенные параметры изменения, пользователи должны знать стоимость электропитания со средним и высоким уровнем загрузки во время планирования емкости стойки.

## <a name="geekbench-3"></a>Жеекбенч 3

[Жеекбенч 3](http://www.geekbench.com/geekbench3/) — это межплатформенный тест производительности, который разделяет баллы на производительность с одним ядром и несколькими ядрами. Он имитирует набор рабочих нагрузок, включая целочисленные рабочие нагрузки (шифрование, сжатие, обработка изображений и т. д.), рабочие нагрузки с плавающей запятой (моделирование, фрактал, резкость изображения, размытие изображения и т. д.) и рабочие нагрузки памяти (потоковая передача).

**Время отклика** — это основная мера в расчете оценки. В нашей протестированной системе схема управления питанием **по умолчанию** имеет ~ 18% регрессии в одноядерных испытаниях и ~ 40% регрессия в многоядерных испытаниях по сравнению с **высокопроизводительной** схемой управления питанием. Предлагаемое изменение удаляет эти регрессии.

## <a name="diskspd"></a>DiskSpd

[Diskspd](https://en.wikipedia.org/wiki/Diskspd) — это программа командной строки для тестирования производительности хранилища, разработанная корпорацией Майкрософт. Он широко используется для создания различных запросов к системам хранения данных для анализа производительности хранилища.

Мы настроили [отказоустойчивый кластер] и используем Diskspd для создания случайных и последовательных операций, а также для чтения и записи IOs в локальных и удаленных системах хранения с различными размерами ввода-вывода. Наши тесты показывают, что время ответа ввода-вывода очень чувствительно к частоте процессора в разных схемах управления питанием. **Сбалансированная** схема управления питанием может удвоить время отклика из **высокопроизводительной** схемы управления питанием при определенных рабочих нагрузках. Предлагаемое изменение удаляет большую часть регрессий.

>[!Important]
>Начиная с процессоров Intel [Broadwell], работающих под управлением Windows Server 2016, большинство решений по управлению питанием процессоров выполняются на процессоре, а не на уровне ОС, чтобы быстрее адаптироваться к изменениям рабочей нагрузки. Устаревшие параметры, используемые операционной системой, имеют минимальное влияние на реальные решения по частоте, за исключением того, что процессор должен относиться к питанию или повышению производительности или ограничению минимальной и максимальной частот. Таким образом, предлагаемое изменение параметра PPM предназначено только для предварительных Broadwell систем.

## <a name="see-also"></a>См. также
- [Рекомендации по производительности оборудования для сервера](../index.md)
- [Рекомендации по питанию серверного оборудования](../power.md)
- [Питание и настройка производительности](power-performance-tuning.md)
- [Настройка управления питанием процессора](processor-power-management-tuning.md)
- [Отказоустойчивый кластер](https://technet.microsoft.com/library/cc725923.aspx)
