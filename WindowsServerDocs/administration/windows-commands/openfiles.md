---
title: openfiles
description: Справочный раздел по * * * *-
ms.prod: windows-server
ms.technology: manage-windows-commands
ms.topic: article
ms.assetid: c3be561d-a11f-4bf1-9835-8e4e96fe98ec
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 10/16/2017
ms.openlocfilehash: 050e3f31435949ecce2a9a06a70d86eacd745687
ms.sourcegitcommit: ab64dc83fca28039416c26226815502d0193500c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/01/2020
ms.locfileid: "82723390"
---
# <a name="openfiles"></a>openfiles



Позволяет администратору запрашивать, отображать или отключать файлы и каталоги, открытые в системе. Также включает или отключает глобальный флаг System обслуживании списка объектов.

Этот раздел содержит сведения о следующих командах:
-   [Openfiles/Disconnect](#BKMK_disconnect)
-   [Openfiles/Query](#BKMK_query)
-   [Openfiles/Local](#BKMK_local)

## <a name="openfiles-disconnect"></a><a name=BKMK_disconnect></a>Openfiles/Disconnect

Позволяет администратору отключить файлы и папки, открытые удаленно через общую папку.

### <a name="syntax"></a>Синтаксис

```
openfiles /disconnect [/s <System> [/u [<Domain>\]<UserName> [/p [<Password>]]]] {[/id <OpenFileID>] | [/a <AccessedBy>] | [/o {read | write | read/write}]} [/op <OpenFile>]
```

#### <a name="parameters"></a>Параметры

|            Параметр             |                                                                                                                                 Описание                                                                                                                                  |
|----------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|           /s \<системные>           | Указывает удаленную систему для подключения (по имени или IP-адресу). Не используйте обратные косые черты. Если параметр **/s** не используется, команда выполняется на локальном компьютере по умолчанию. Этот параметр применяется ко всем файлам и папкам, указанным в команде. |
|    /u [\<домен>\]<UserName>     |                                                          Выполняет команду, используя разрешения указанной учетной записи пользователя. Если параметр **/u** не используется, по умолчанию используются разрешения системы.                                                           |
|         /p [\<пароль>]         |                                               Указывает пароль учетной записи пользователя, указанной в параметре **/u** . Если не использовать параметр **/p** , при выполнении команды появится запрос на ввод пароля.                                                |
|        /ID \<опенфилеид>         |                                       Отключает открытые файлы по указанному ИДЕНТИФИКАТОРу файла. С этим параметром можно использовать подстановочный знак (**&#42;**).</br>Примечание. для поиска идентификатора файла можно использовать команду **openfiles/Query** .                                       |
|         /a \<акцесседби>         |                                                Отключает все открытые файлы, связанные с именем пользователя, указанным в параметре *акцесседби* . С этим параметром можно использовать подстановочный знак (**&#42;**).                                                 |
| /o {чтение \| \| и запись для чтения и записи} |                                               Отключает все открытые файлы с указанным значением в открытом режиме. Допустимые значения: чтение, запись, чтение и запись. С этим параметром можно использовать подстановочный знак (**&#42;**).                                                |
|         /Op \<OpenFile>          |                                                           Отключает все соединения открытых файлов, созданные с помощью определенного имени открытого файла. С этим параметром можно использовать подстановочный знак (**&#42;**).                                                           |
|                /?                |                                                                                                                     Отображение справки в командной строке.                                                                                                                     |

### <a name="examples"></a>Примеры

Чтобы отключить все открытые файлы с помощью идентификатора файла 26843578, введите:
```
openfiles /disconnect /id 26843578
```
Чтобы отключить все открытые файлы и каталоги, к которым обращается пользователь хироплн, введите:
```
openfiles /disconnect /a hiropln
```
Чтобы отключить все открытые файлы и каталоги с режимом чтения и записи, введите:
```
openfiles /disconnect /o read/write
```
Чтобы отключить каталог с открытым именем файла К:\тестшаре\, независимо от того, кто обращается к нему, введите:
```
openfiles /disconnect /a * /op c:\testshare\
```
Чтобы отключить все открытые файлы на удаленном компьютере срвмаин, к которым обращается пользовательская хироплн, независимо от их идентификатора, введите:
```
openfiles /disconnect /s srvmain /u maindom\hiropln /id *
```

## <a name="openfiles-query"></a><a name=BKMK_query></a>Openfiles/Query

Запрашивает и отображает все открытые файлы.

### <a name="syntax"></a>Синтаксис

```
openfiles /query [/s <System> [/u [<Domain>\]<UserName> [/p [<Password>]]]] [/fo {TABLE | LIST | CSV}] [/nh] [/v]
```

#### <a name="parameters"></a>Параметры

|          Параметр           |                                                                                                                                 Описание                                                                                                                                  |
|------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|         /s \<системные>         | Указывает удаленную систему для подключения (по имени или IP-адресу). Не используйте обратные косые черты. Если параметр **/s** не используется, команда выполняется на локальном компьютере по умолчанию. Этот параметр применяется ко всем файлам и папкам, указанным в команде. |
|  /u [\<домен>\]<UserName>   |                                                          Выполняет команду, используя разрешения указанной учетной записи пользователя. Если параметр **/u** не используется, по умолчанию используются разрешения системы.                                                           |
|       /p [\<пароль>]       |                                               Указывает пароль учетной записи пользователя, указанной в параметре **/u** . Если не использовать параметр **/p** , при выполнении команды появится запрос на ввод пароля.                                                |
| [/FO {CSV \| - \| файл списка таблиц}] |                             Отображает выходные данные в указанном формате. Допустимые значения для *Format* :</br>Таблица: Отображает выходные данные в таблице.</br>LIST: Отображает выходные данные в списке.</br>CSV: выходные данные отображаются в формате значений с разделителями-запятыми.                              |
|             использован              |                                                                                Подавляет вывод заголовка столбца в выходных данных. Допустим, только если параметр **/FO** имеет значение **Table** или **CSV**.                                                                                 |
|              /v              |                                                                                                       Указывает, что подробные сведения должны отображаться в выходных данных.                                                                                                        |
|              /?              |                                                                                                                     Отображение справки в командной строке.                                                                                                                     |

### <a name="examples"></a>Примеры

Чтобы запросить и отобразить все открытые файлы, введите:
```
openfiles /query
```
Чтобы запросить и отобразить все открытые файлы в формате таблицы без заголовков, введите:
```
openfiles /query /fo table /nh
```
Чтобы запросить и отобразить все открытые файлы в формате списка с подробными сведениями, введите:
```
openfiles /query /fo list /v
```
Чтобы запросить и отобразить все открытые файлы в удаленной системе срвмаин, используя учетные данные пользователя хироплн в домене маиндом, введите:
```
openfiles /query /s srvmain /u maindom\hiropln /p p@ssW23
```

> [!NOTE]
> В этом примере пароль указан в командной строке. Чтобы запретить отображение пароля, оставьте параметр **/p** . Вам будет предложено ввести пароль, который не будет отображаться на экране.

## <a name="openfiles-local"></a><a name=BKMK_local></a>Openfiles/Local

Включает или отключает глобальный флаг System обслуживании списка объектов. Если используется без параметров, то **openfiles/Local** отображает текущее состояние флага "сохранить глобальный список объектов".

### <a name="syntax"></a>Синтаксис

```
openfiles /local [on | off]
```

#### <a name="parameters"></a>Параметры

|Параметр|Описание|
|---------|-----------|
|[вкл \| . откл.]|Включает или отключает глобальный флаг System обслуживание списка объектов, который отслеживает дескрипторы локальных файлов.|
|/?|Отображение справки в командной строке.|

### <a name="remarks"></a>Примечания

-   Включение глобального флага "ведение списка объектов" может замедлить работу системы.
-   Изменения, внесенные с помощью параметра **On** или **Off** , вступают в силу только после перезагрузки системы.

### <a name="examples"></a>Примеры

Чтобы проверить текущее состояние глобального флага "сохранить список объектов", введите:
```
openfiles /local
```
По умолчанию глобальный флаг "ведение списка объектов" отключен, и отображаются следующие выходные данные:
```
INFO: The system global flag 'maintain objects list' is currently disabled.
```
Чтобы включить глобальный флаг "ведение списка объектов", введите:
```
openfiles /local on
```
Если включен глобальный флаг, отображается следующее сообщение:
```
SUCCESS: The system global flag 'maintain objects list' is enabled.
         This will take effect after the system is restarted.
```
Чтобы отключить глобальный флаг "ведение списка объектов", введите:
```
openfiles /local off
```

## <a name="additional-references"></a>Дополнительные ссылки

- [Условные обозначения синтаксиса команд командной строки](command-line-syntax-key.md)