---
title: schtasks
description: 'Раздел Windows команды для ***- '
ms.custom: na
ms.prod: windows-server-threshold
ms.reviewer: na
ms.suite: na
ms.technology: manage-windows-commands
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: 2e713203-3dd8-491b-b9e1-9423618dc7e8
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 10/16/2017
ms.openlocfilehash: 7aed2b88823c117a7424a4d90edd86829a53f786
ms.sourcegitcommit: 0d0b32c8986ba7db9536e0b8648d4ddf9b03e452
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/17/2019
ms.locfileid: "59822885"
---
# <a name="schtasks"></a>schtasks



Команды и программы для выполнения периодически или в определенное время. Добавляет и удаляет задачи из расписания, запускает и останавливает задания по требованию и отображает и изменяет назначенные задания.

Чтобы просмотреть синтаксис команды, щелкните одну из следующих команд:
-   [Создание задания](#BKMK_create)
-   [Изменение задания](#BKMK_change)
-   [SCHTASKS запуска](#BKMK_run)
-   [SCHTASKS end](#BKMK_end)
-   [Удаление задания](#BKMK_delete)
-   [SCHTASKS запроса](#BKMK_query)

## <a name="remarks"></a>Примечания

-   **SchTasks.exe** выполняет те же операции **назначенные задания** в **панели управления**. Эти средства можно использовать совместно и поочередно.
-   **SCHTASKS** заменяет **At.exe**, средство, включенное в предыдущих версиях Windows. Несмотря на то что **At.exe** по-прежнему включается в семействе Windows Server 2003, **schtasks** — рекомендуемый задача командной строки, средство планирования.
-   Параметры в **schtasks** команда может встречаться в любом порядке. Введя **schtasks** без параметров выполняется запрос.
-   Разрешения для **schtasks**  
    -   Необходимо иметь разрешение для выполнения команды. Любой пользователь может назначить задание на локальном компьютере, и их можно просматривать и изменять задачи, которые они запланированы. Члены группы "Администраторы" можно запланировать, просматривать и изменять любые задания на локальном компьютере.
    -   Чтобы запланировать, просмотреть или изменить задачу на удаленном компьютере, необходимо быть членом группы администраторов на удаленном компьютере, или необходимо использовать **/u** параметр, чтобы предоставить учетные данные администратора удаленного компьютера.
    -   Можно использовать **/u** параметр в **/ create** или **/изменить** операции только в том случае, когда локальный и удаленный компьютеры находятся в одном домене или локальный компьютер находится в домене, доверительных отношений доменов удаленного компьютера. В противном случае удаленного компьютера не может проверить подлинность учетной записи пользователя, указанной и его не удается проверить, что учетная запись является членом группы "Администраторы".
    -   Задача должна иметь разрешение на запуск. Необходимые разрешения зависят от задачи. По умолчанию задачи выполняются с разрешениями текущего пользователя на локальном компьютере или с разрешениями пользователя, указанного по **/u** параметра, если параметр присутствует. Чтобы выполнить задачу с разрешениями учетной записи другого пользователя или с разрешения системы, используйте **/ru** параметра.
-   Чтобы убедиться, что выполнена запланированная задача, или чтобы узнать, почему не запускали запланированную задачу, см. в разделе журнала транзакций службы планировщика, *SystemRoot*\SchedLgU.txt. Журнал транзакций попытка запуски, инициированные с все средства, которые используют службу, включая **назначенные задания** и **SchTasks.exe**.
-   В редких случаях задача повреждены. Поврежденный задачи не выполняются. При попытке выполнить операцию поврежденное задание **SchTasks.exe** отображает следующее сообщение об ошибке:  
    ```
    ERROR: The data is invalid.
    ```  
    Невозможно восстановить поврежденные задания. Чтобы восстановить средства системы, используйте **SchTasks.exe** или **назначенные задания** удалять задачи из системы и перенесите их устранение.

## <a name="BKMK_create"></a>Создание задания

Планирует задачу.

**SCHTASKS** использует различные сочетания параметров для каждого типа расписания. Для просмотра объединенного синтаксиса для создания задач или синтаксис для создания задачи с типом определенное расписание, выберите один из следующих вариантов.
-   [Объединенный синтаксис и описание параметров](#BKMK_syntax)
-   [Чтобы запланировать задачу, которая запускается каждые N минут](#BKMK_minutes)
-   [Чтобы назначить задание, которое будет выполняться каждые N часов](#BKMK_hours)
-   [Чтобы назначить задание, которое будет выполняться каждые N дней](#BKMK_days)
-   [Чтобы назначить задание, которое будет выполняться каждые N недели](#BKMK_weeks)
-   [Чтобы назначить задание, которое будет выполняться каждые N месяцев](#BKMK_months)
-   [Чтобы запланировать задачу, которая выполняется в определенный день недели](#BKMK_spec_day)
-   [Чтобы запланировать задачу, которая выполняется в выбранную неделю месяца](#BKMK_spec_week)
-   [Чтобы запланировать задачу, которая выполняется в определенный день каждого месяца](#BKMK_spec_date)
-   [Чтобы запланировать задачу, которая выполняется в последний день месяца](#BKMK_last_day)
-   [Чтобы назначить задание, выполняемое один раз](#BKMK_once)
-   [Чтобы запланировать задачу, которая выполняется при каждом запуске системы](#BKMK_startup)
-   [Чтобы запланировать задачу, которая выполняется, когда пользователь входе в систему](#BKMK_logon)
-   [Чтобы запланировать задачу, которая выполняется, когда система бездействует](#BKMK_idle)
-   [Чтобы запланировать задачу, которая теперь выполняется](#BKMK_now)
-   [Чтобы запланировать задачу, которая работает с другими разрешениями](#BKMK_diff_perms)
-   [Чтобы запланировать задачу, которая выполняется с разрешениями системы](#BKMK_sys_perms)
-   [Чтобы назначить задание, которое будет выполняться более чем одной программы](#BKMK_multi_progs)
-   [Чтобы запланировать задачу, которая выполняется на удаленном компьютере](#BKMK_remote)

### <a name="BKMK_syntax"></a>Объединенный синтаксис и описание параметров

#### <a name="syntax"></a>Синтаксис

```
schtasks /create /sc <ScheduleType> /tn <TaskName> /tr <TaskRun> [/s <Computer> [/u [<Domain>\]<User> [/p <Password>]]] [/ru {[<Domain>\]<User> | System}] [/rp <Password>] [/mo <Modifier>] [/d <Day>[,<Day>...] | *] [/m <Month>[,<Month>...]] [/i <IdleTime>] [/st <StartTime>] [/ri <Interval>] [{/et <EndTime> | /du <Duration>} [/k]] [/sd <StartDate>] [/ed <EndDate>] [/it] [/z] [/f]
```

#### <a name="parameters"></a>Параметры

##### <a name="sc-scheduletype"></a>/SC \<ScheduleType >

Указывает тип расписания. Допустимые значения: МИНУТУ, ежечасно, ЕЖЕДНЕВНО, ЕЖЕНЕДЕЛЬНО, ЕЖЕМЕСЯЧНО, один раз, метод ONSTART, ИНИЦИИРУЕТ, ONIDLE.

|Тип расписания|Описание|
|-------------|-----------|
|МИНУТУ, ЕЖЕЧАСНО, ЕЖЕДНЕВНО, ЕЖЕНЕДЕЛЬНО, ЕЖЕМЕСЯЧНО|Указывает единицу времени для расписания.|
|ОДИН РАЗ|Задание выполняется один раз в указанную дату и время.|
|ONSTART|Задание выполняется каждый раз при запуске системы. Можно указать начальную дату, или запустить задачу при очередном запуске системы.|
|ИНИЦИИРУЕТ|Задача выполняется при каждом входе пользователя (любого). Можно указать дату, или запустить задачу при очередном входе пользователя в систему.|
|ONIDLE|Задание выполняется каждый раз, когда система бездействует в течение указанного периода времени. Можно указать дату, или запустить задачу в следующий раз при простое компьютера.|

##### <a name="tn-taskname"></a>/TN \<имя_задания >

Указывает имя для задачи. Каждая задача в системе должен иметь уникальное имя. Имя должно соответствовать правилам для имен файлов и не должно превышать 238 символов. Используйте кавычки для заключения в них имена, содержащие пробелы.

##### <a name="tr-taskrun"></a>/TR \<программа >

Указывает программу или команду, которую запускает задача. Введите полный путь и имя исполняемого файла, файла сценария или пакетного файла. Имя пути не должна превышать 262 символов. Если не указан путь, **schtasks** предполагается, что файл находится в *SystemRoot*каталоге \System32.

##### <a name="s-computer"></a>/s \<компьютер >

Планирует задачу на удаленный компьютер. Введите имя или IP-адрес удаленного компьютера (с или без символов обратной косой черты). По умолчанию используется локальный компьютер. **/U** и **/p** параметры допустимы только при использовании **/s**.

##### <a name="u-domainuser"></a>/u [\<домена >\]<User>

Выполняет эту команду с разрешениями указанной учетной записи. По умолчанию используется разрешения текущего пользователя на локальном компьютере. **/U** и **/p** параметры допустимы только для планирования задач на удаленном компьютере (**/s**).

Разрешения указанной учетной записи используются для планирования задачи, так и для выполнения задачи. Чтобы запустить задачу с правами другого пользователя, используйте **/ru** параметра.

Учетная запись пользователя должна быть членом группы администраторов на удаленном компьютере. Кроме того локальный компьютер должен быть в том же домене, что и удаленный компьютер или должны находиться в домене, который является доверенным для домена удаленного компьютера.

##### <a name="p-password"></a>/p \<пароль >

Предоставляет пароль для учетной записи пользователя, указанной в **/u** параметра. При использовании **/u** параметра, но не указывается **/p** параметр или аргумент пароля, **schtasks** запрашивает пароль и скрывает введенный текст.

**/U** и **/p** параметры допустимы только для планирования задач на удаленном компьютере (**/s**).

##### <a name="ru-domainuser--system"></a>/RU {[\<домена >\] <User> | Система}

Выполняет задачу с разрешениями указанной учетной записи. По умолчанию задача выполняется с разрешениями текущего пользователя на локальном компьютере или с разрешения пользователя, указанного по **/u** параметра, если параметр присутствует. **/Ru** параметр допустим, при планировании задач на локальных или удаленных компьютерах.

|Значение|Описание|
|-----|-----------|
|[\<Домена >\]<User>|Указывает альтернативную учетную запись пользователя.|
|Системы или «»|Учетная запись локальной системы, высоким уровнем привилегий учетной записи, используемой операционной системы и системных служб.|

##### <a name="rp-password"></a>/RP \<пароль >

Задает пароль для учетной записи пользователя, который указан в **/ru** параметра. Если опустить этот параметр, при указании учетной записи пользователя, **SchTasks.exe** запросит пароль и скрывает введенный текст.

Не используйте **/rp** параметр для задач запущена с учетными данными учетной записи System (**/ru System**). Системная учетная запись не имеет пароля и **SchTasks.exe** не запрашивает один.

##### <a name="mo-modifier"></a>/ мес \<модификатор >

Указывает, как часто задача выполняется в пределах его тип расписания. Этот параметр допустим, но необязательно, в течение минуты, ежечасно, ЕЖЕДНЕВНО, ЕЖЕНЕДЕЛЬНО и ЕЖЕМЕСЯЧНО запланировать. Значение по умолчанию — 1.

|Тип расписания|Модификатор значения|Описание|
|-------------|---------------|-----------|
|МИНУТУ|1 - 1439|Задание выполняется каждые \<N > минут.|
|ПОЧАСОВЫЕ|1 - 23|Задание выполняется каждые \<N > часов.|
|ЕЖЕДНЕВНО|1 - 365|Задание выполняется каждые \<N > дн.|
|ЕЖЕНЕДЕЛЬНО|1 - 52|Задание выполняется каждые \<N > недель.|
|ОДИН РАЗ|Модификаторы.|Задание выполняется один раз.|
|ONSTART|Модификаторы.|Задача выполняется во время запуска.|
|ИНИЦИИРУЕТ|Модификаторы.|Задание выполняется, когда пользователь, указанного свойством **/u** параметр входит в систему.|
|ONIDLE|Модификаторы.|Задача выполнялась после система находится в состоянии бездействия количество минут, определенных в **/i** параметр, который необходим для использования с ONIDLE.|
|ЕЖЕМЕСЯЧНО|1 - 12|Задание выполняется каждые \<N > месяцев.|
|ЕЖЕМЕСЯЧНО|LASTDAY|Задание выполняется в последний день месяца.|
|ЕЖЕМЕСЯЧНО|ВО-ПЕРВЫХ ВО-ВТОРЫХ, В-ТРЕТЬИХ, ЧЕТВЕРТАЯ, ПОСЛЕДНЯЯ|Использование с **/d**\<день > для выполнения задачи на неделю и день. Например в третью среду месяца.|

##### <a name="d-dayday--"></a>/d [,... дня] | *

Указывает день или дни недели или дня или дней месяца. Допустимо только с расписанием ЕЖЕНЕДЕЛЬНО или ЕЖЕМЕСЯЧНО.

|Тип расписания|Модификатор|Значения дня (/ d)|Описание|
|-------------|--------|---------------|-----------|
|ЕЖЕНЕДЕЛЬНО|1 - 52|ПН – SUN [, ПН – SUN...] | *|Необязательно. ПОНЕДЕЛЬНИК используется по умолчанию. Использование подстановочного знака (*) означает, что каждый день.|
|ЕЖЕМЕСЯЧНО|ВО-ПЕРВЫХ ВО-ВТОРЫХ, В-ТРЕТЬИХ, ЧЕТВЕРТАЯ, ПОСЛЕДНЯЯ|ПН – SUN|Требуется для расписания конкретной недели.|
|ЕЖЕМЕСЯЧНО|None или {1-12}|1 - 31|Необязательный и может использоваться только с никакой модификатор (**/мес**) параметра (расписание определенную дату) или когда **/мес** 1-12 («каждые \<N > месяцев» расписание). По умолчанию установлено значение 1 (первый день месяца).|

##### <a name="m-monthmonth"></a>месяц /m [, … месяца]

Указывает месяц или месяцы года, в течение которого следует запускать запланированные задачи. Допустимые значения: янв - ДЕК и * (каждый месяц). **/M** параметр допустим только с расписанию ЕЖЕМЕСЯЧНО. Он необходим в том случае, когда используется модификатор LASTDAY. В противном случае он является необязательным и значение по умолчанию — * (ежемесячно).

##### <a name="i-idletime"></a>/i \<IdleTime>

Указывает, сколько минут компьютер бездействует перед запуском задания. Допустимое значение — это целое число от 1 до 999. Этот параметр допустим только с расписанием ONIDLE, и затем она необходима.

##### <a name="st-starttime"></a>/ST \<StartTime >

Указывает время запуска задания (при каждом запуске) в \<чч: мм > 24 - часовом формате. Значение по умолчанию — текущее время на локальном компьютере. **/St** параметр действителен в МИНУТУ, ежечасно, ЕЖЕДНЕВНО, ЕЖЕНЕДЕЛЬНО, ЕЖЕМЕСЯЧНО и планирует один раз. Он необходим для расписания один раз.

##### <a name="ri-interval"></a>/RI \<интервал >

Указывает интервал повторения в минутах. Это не применимо для типов расписания: МИНУТУ, ежечасно, ONSTART, ИНИЦИИРУЕТ и ONIDLE. Допустимый диапазон: 1 для 599940 минут (599940 минут = 9999 часов). Если указан параметр /ET или /DU, затем интервал повторения по умолчанию 10 минут.

##### <a name="et-endtime"></a>/et \<EndTime>

Указывает время окончания расписания заданий минуту или каждый час в \<чч: мм > 24 - часовом формате. После указанного времени окончания **schtasks** начнет задачи до времени начала повторения. По умолчанию у назначенных заданий нет времени окончания. Этот параметр является необязательный и может использоваться только с расписанием МИНУТУ или каждый час.

Например см. в разделе:
-   «Для планирования задач, будет выполняться каждые 100 минут в течение нерабочего времени» в **запланировать задачу, которая выполняется каждые** \<N > **минут** раздел.

##### <a name="du-duration"></a>/du \<Duration>

Задает максимальную продолжительность времени, минуту или почасовое расписание в \<чччч: мм > 24 - часовом формате. После истечения указанного времени **schtasks** начнет задачи до времени начала повторения. По умолчанию у назначенных заданий нет максимальной продолжительности. Этот параметр является необязательный и может использоваться только с расписанием МИНУТУ или каждый час.

Например см. в разделе:
-   «Для планирования задач, которое будет выполняться каждые 3 часа 10 часов» **запланировать задачу, которая выполняется каждые** \<N > **часов** раздел.

##### <a name="k"></a>/k

Останавливает программу, которую запускает задача во времени, заданного параметром **/et** или **/du**. Без **/k**, **schtasks** не запустить программу еще раз после достижения времени, заданного параметром **/et** или **/du**, но не останавливает программы, если он по-прежнему работает. Этот параметр является необязательный и может использоваться только с расписанием МИНУТУ или каждый час.

Например см. в разделе:
-   «Для планирования задач, будет выполняться каждые 100 минут в течение нерабочего времени» в **запланировать задачу, которая выполняется каждые** \<N > **минут** раздел.

##### <a name="sd-startdate"></a>/sd \<StartDate>

Указывает дату, с которой начинается расписании задач. Значение по умолчанию — текущая дата на локальном компьютере. **/Sd** параметр и является необязательным для всех запланировать типов.

Формат *StartDate* зависит от языкового стандарта, выбранного для локального компьютера в **язык и региональные стандарты** в **панели управления**. Только один формат является допустимым для каждого языкового стандарта.

В следующей таблице перечислены форматы даты. Используйте формат, наиболее близкие к формата, выбранного для **краткий формат даты** в **язык и региональные стандарты** в **панели управления** на локальном компьютере.

|Значение|Описание|
|-----|-----------|
|\<ММ &GT; /<DD>/<YYYY>|Использовать для первого месяца форматы, такие как **русский (Россия)** и **испанский (Панама)**.|
|\<ДД &GT; /<MM>/<YYYY>|Используйте для форматов первый день, такой как **болгарский** и **Голландский (Нидерланды)**.|
|\<ГГГГ &GT; /<MM>/<DD>|Использовать для первого года форматы, такие как **шведский** и **французский (Канада)**.|

/ed \<EndDate>

Указывает дату, на котором заканчивается расписания. Это необязательный параметр. Не допускается в один раз, метод ONSTART, ИНИЦИИРУЕТ или ONIDLE расписание. По умолчанию расписания имеют нет даты окончания.

Формат *EndDate* зависит от языкового стандарта, выбранного для локального компьютера в **язык и региональные стандарты** в **панели управления**. Только один формат является допустимым для каждого языкового стандарта.

В следующей таблице перечислены форматы даты. Используйте формат, наиболее близкие к формата, выбранного для **краткий формат даты** в **язык и региональные стандарты** в **панели управления** на локальном компьютере.

|Значение|Описание|
|-----|-----------|
|\<ММ &GT; /<DD>/<YYYY>|Использовать для первого месяца форматы, такие как **русский (Россия)** и **испанский (Панама)**.|
|\<ДД &GT; /<MM>/<YYYY>|Используйте для форматов первый день, такой как **болгарский** и **Голландский (Нидерланды)**.|
|\<ГГГГ &GT; /<MM>/<DD>|Использовать для первого года форматы, такие как **шведский** и **французский (Канада)**.|

##### <a name="it"></a>/IT

Для запуска задачи только тогда, когда пользователь «Запуск от имени» (учетная запись пользователя, под которой выполняется задача) вошел в систему на компьютере. Этот параметр не влияет на задачи, которые выполняются с разрешениями системы.

По умолчанию является «запуск от имени» пользователь текущего пользователя на локальном компьютере, когда задача или учетной записи, **/u** параметр, если он используется. Тем не менее если команда содержит **/ru** параметр, выберите «Запуск от имени» пользователя является учетная запись, указанная с **/ru** параметра.

Примеры см. в разделе:
-   «Чтобы запланировать задачу, которая выполняется каждые 70 дней, если я войду в систему» в **запланировать задачу, которая выполняется каждые** *N* **дней** раздел.
-   «Выполнение задачи только когда конкретный пользователь вошел в систему» **запланировать задачу, которая работает с другими разрешениями** раздел.

##### <a name="z"></a>/ z

Задает удаление задачи после завершения его расписание.

##### <a name="f"></a>/f

Указывает, для создания задачи и отключить предупреждения, если указанная задача уже существует.

##### <a name=""></a>/?

Отображение справки в командной строке.

### <a name="BKMK_minutes"></a>Чтобы запланировать задачу, которая запускается каждые N минут

#### <a name="minute-schedule-syntax"></a>Синтаксис расписание в минутах

```
schtasks /create /tn <TaskName> /tr <TaskRun> /sc minute [/mo {1 - 1439}] [/st <HH:MM>] [/sd <StartDate>] [/ed <EndDate>] [{/et <HH:MM> | /du <HHHH:MM>} [/k]] [/it] [/ru {[<Domain>\]<User> [/rp <Password>] | System}] [/s <Computer> [/u [<Domain>\]<User> [/p <Password>]]]
```

#### <a name="remarks"></a>Примечания

В расписание в минутах **минуту /sc** параметр является обязательным. **/Мес** (модификатор) параметр является необязательным и указывает число минут между запусками задания. Значение по умолчанию для **/мес** -1 (каждую минуту). **/Et** (время окончания) и **/du** (длительность) параметры являются необязательными и может использоваться с или без **/k** параметра (завершить задачу).

#### <a name="examples"></a>Примеры

#### <a name="to-schedule-a-task-that-runs-every-20-minutes"></a>Чтобы назначить задание, которое будет выполняться каждые 20 минут

Следующая команда назначает сценария безопасности Sec.vbs каждые 20 минут. Команда использует **/sc** параметр, чтобы указать расписание в минутах и **/мес** параметр, чтобы указать интервал 20 минут.

Поскольку команда не включает начальную дату и время, задача запускает через 20 минут после завершения команды и выполняется каждые 20 минут при работе системы. Обратите внимание на то, что исходный файл сценария безопасности находится на удаленном компьютере, но кроме того, что задача запланирована и выполняет на локальном компьютере.
```
schtasks /create /sc minute /mo 20 /tn "Security Script" /tr \\central\data\scripts\sec.vbs
```

#### <a name="to-schedule-a-task-that-runs-every-100-minutes-during-non-business-hours"></a>Чтобы назначить задание, которое будет выполняться каждые 100 минут в течение нерабочего времени

Следующая команда назначает сценария безопасности Sec.vbs для запуска на локальном компьютере, на каждые 100 минут между 17:00. и 7:59:00. Каждый день. Команда использует **/sc** параметр, чтобы указать расписание в минутах и **/мес** параметр для указания интервала времени в течение 100 минут. Она использует **/st** и **/et** параметры, указывающие время начала и время окончания каждого дня. Он также использует **/k** параметр для остановки сценария, если он по-прежнему выполняется на 7:59:00. Без **/k**, **schtasks** не начиналась скрипт после 7:59 по, но экземпляр запущен в 6:20:00 была все еще выполняется, он не будет завершен.
```
schtasks /create /tn "Security Script" /tr sec.vbs /sc minute /mo 100 /st 17:00 /et 08:00 /k
```

### <a name="BKMK_hours"></a>Чтобы назначить задание, которое будет выполняться каждые N часов

#### <a name="hourly-schedule-syntax"></a>Синтаксис ежечасного расписания

```
schtasks /create /tn <TaskName> /tr <TaskRun> /sc hourly [/mo {1 - 23}] [/st <HH:MM>] [/sd <StartDate>] [/ed <EndDate>] [{/et <HH:MM> | /du <HHHH:MM>} [/k]] [/it] [/ru {[<Domain>\]<User> [/rp <Password>] | System}] [/s <Computer> [/u [<Domain>\]<User> [/p <Password>]]]
```

#### <a name="remarks"></a>Примечания

В ежечасного расписания **/sc каждый час** параметр является обязательным. **/Мес** (модификатор) параметр является необязательным и указывает число часов между запусками задания. Значение по умолчанию для **/мес** -1 (каждый час). **/K** (завершить задачу) параметр является необязательным и может использоваться с любым **/et** (конец в указанное время) или **/du** (конец через заданный интервал).

#### <a name="examples"></a>Примеры

#### <a name="to-schedule-a-task-that-runs-every-five-hours"></a>Чтобы назначить задание, которое будет выполняться каждые пять часов

Следующая команда назначает программы MyApp каждые пять часов, начиная с первого дня марта 2002 г. Она использует **/мес** параметр для указания интервала и **/sd** параметр, чтобы указать дату начала. Так как в команде не указано время начала, текущего времени используется в качестве времени начала.

Так как локальный компьютер настроен на использование **английский (Зимбабве)** в диалоговом окне **язык и региональные стандарты** в **панели управления**, мм/дд/гггг — формат даты начала (03/01/2002).
```
schtasks /create /sc hourly /mo 5 /sd 03/01/2002 /tn "My App" /tr c:\apps\myapp.exe
```

#### <a name="to-schedule-a-task-that-runs-every-hour-at-five-minutes-past-the-hour"></a>Чтобы запланировать задачу, которая выполняется в пять минут после наступления каждого часа

Следующая команда назначает программы MyApp каждый час, начиная с пяти минут после полуночи. Так как **/мес** параметр опущен, используется значение по умолчанию для ежечасного расписания — каждый час (1). Если команда выполняется после 12:05 по, программа не выполняется до следующего дня.
```
schtasks /create /sc hourly /st 00:05 /tn "My App" /tr c:\apps\myapp.exe
```

#### <a name="to-schedule-a-task-that-runs-every-3-hours-for-10-hours"></a>Чтобы назначить задание, которое будет выполняться каждые 3 часа 10 часов

Следующая команда назначает программы MyApp каждые 3 часа 10 часов.

Команда использует **/sc** параметр для указания ежечасное расписание и **/мес** параметр для указания интервала 3 часа. Она использует **/st** параметр запуска расписания в полночь и **/du** параметра, по истечении 10 часов повторов. Так как программа выполняется в течение нескольких минут **/k** параметр, который останавливает программу, если по-прежнему выполняется после истечения, нет необходимости.
```
schtasks /create /tn "My App" /tr myapp.exe /sc hourly /mo 3 /st 00:00 /du 0010:00
```
В этом примере задача запускается в 12:00, 3:00 утра, 6:00:00, а 9:00:00 Так как длительность составляет 10 часов, задание не запускается еще раз в 12:00 Вместо этого он начинает еще раз в 12:00 на следующий день.

### <a name="BKMK_days"></a>Чтобы назначить задание, которое будет выполняться каждые N дней

#### <a name="daily-schedule-syntax"></a>Синтаксис ежедневного расписания

```
schtasks /create /tn <TaskName> /tr <TaskRun> /sc daily [/mo {1 - 365}] [/st <HH:MM>] [/sd <StartDate>] [/ed <EndDate>] [/it] [/ru {[<Domain>\]<User> [/rp <Password>] | System}] [/s <Computer> [/u [<Domain>\]<User> [/p <Password>]]]
```

#### <a name="remarks"></a>Примечания

В ежедневного расписания **/sc ежедневно** параметр является обязательным. **/Мес** (модификатор) параметр является необязательным и указывает число дней между запусками задания. Значение по умолчанию для **/мес** -1 (каждый день).

#### <a name="examples"></a>Примеры

#### <a name="to-schedule-a-task-that-runs-every-day"></a>Чтобы запланировать задачу, которая запускается каждый день

Следующий пример назначает программы MyApp один раз в день, но каждый день в 8:00. до 31 декабря 2002 г. Так как он пропускает **/мес** параметра, интервал по умолчанию 1 используется для выполнения команды каждый день.

В этом примере так как задано локальной системы компьютера **английский (Соединенное Королевство)** в диалоговом окне **язык и региональные стандарты** в **панели управления**, формат Конечная дата является дд/мм/гггг (31/12/2002 г.)
```
schtasks /create /tn "My App" /tr c:\apps\myapp.exe /sc daily /st 08:00 /ed 31/12/2002
```

#### <a name="to-schedule-a-task-that-runs-every-12-days"></a>Чтобы запланировать задачу, которая запускается каждые 12 дней

Следующий пример назначает программы MyApp каждые 12 дней в 13:00 (13:00) начиная с 31 декабря 2002 г. Команда использует **/мес** параметр для указания интервала два (2) дней и **/sd** и **/st** параметры, указывающие дату и время.

В этом примере так, как система **английский (Зимбабве)** в диалоговом окне **язык и региональные стандарты** в **панели управления**, формат даты окончания — мм/дд / ГГГГ (12/31/2002 Г.)
```
schtasks /create /tn "My App" /tr c:\apps\myapp.exe /sc daily /mo 12 /sd 12/31/2002 /st 13:00
```

#### <a name="to-schedule-a-task-that-runs-every-70-days-if-i-am-logged-on"></a>Чтобы запланировать задачу, которая выполняется каждые 70 дней, если я войду в систему

Следующая команда назначает сценария безопасности Sec.vbs каждые 70 дней. Команда использует **/мес** параметр для указания интервала времени в 70 дней. Он также использует **/it** параметр, чтобы указать, что задача выполняется только в том случае, если учетной записи которого задача выполняется вход на компьютер. Так как задача будет выполняться с разрешениями учетной записи, задача будет выполняться только в том случае, если я вошел в систему.
```
schtasks /create /tn "Security Script" /tr sec.vbs /sc daily /mo 70 /it
```

> [!NOTE]
> Для указания задач с интерактивности (**/it**) свойство, используйте подробный запрос **(/ запроса /v**). В подробном запросе показано задание с **/it**, **режим входа** поле имеет значение **только интерактивный**.

### <a name="BKMK_weeks"></a>Чтобы назначить задание, которое будет выполняться каждые N недели

#### <a name="weekly-schedule-syntax"></a>Синтаксис еженедельного расписания

```
schtasks /create /tn <TaskName> /tr <TaskRun> /sc weekly [/mo {1 - 52}] [/d {<MON - SUN>[,MON - SUN...] | *}] [/st <HH:MM>] [/sd <StartDate>] [/ed <EndDate>] [/it] [/ru {[<Domain>\]<User> [/rp <Password>] | System}] [/s <Computer> [/u [<Domain>\]<User> [/p <Password>]]]
```

#### <a name="remarks"></a>Примечания

В Еженедельное расписание **/sc еженедельно** параметр является обязательным. **/Мес** (модификатор) параметр является необязательным и указывает число недель между запусками задания. Значение по умолчанию для **/мес** -1 (каждую неделю).

Еженедельное расписание также имеет необязательный **/d** параметр для планирования задачи для запуска в указанные дни недели или на все дни (*). Значение по умолчанию — ПН (понедельник). Каждый день (*) параметр равнозначен параметру планирование ежедневного задания.

#### <a name="examples"></a>Примеры

#### <a name="to-schedule-a-task-that-runs-every-six-weeks"></a>Чтобы назначить задание, которое будет выполняться каждые шесть недель

Следующая команда назначает запуск программы MyApp на удаленном компьютере каждые шесть недель. Команда использует **/мес** параметр для указания интервала. Так как **/d** , задача выполняется по понедельникам.

Эта команда также использует **/s** параметр, чтобы указать удаленный компьютер и **/u** параметра для выполнения команды с разрешениями учетной записи администратора. Так как **/p** параметр опущен, **SchTasks.exe** запрашивает у пользователя пароль учетной записи администратора.

Кроме того поскольку команда выполняется удаленно, все пути в команде, включая путь к MyApp.exe, см. в пути на удаленном компьютере.
```
schtasks /create /tn "My App" /tr c:\apps\myapp.exe /sc weekly /mo 6 /s Server16 /u Admin01
```

#### <a name="to-schedule-a-task-that-runs-every-other-week-on-friday"></a>Чтобы запланировать задачу, которая запускается каждые две недели в пятницу

Следующая команда планирует задачу для выполнения каждую пятницу других. Она использует **/мес** параметр для указания интервала двух недель и **/d** параметр, чтобы задать день недели. Чтобы запланировать задачу, которая выполняется каждую пятницу опустить **/мес** параметр или присвойте ей значение 1.
```
schtasks /create /tn "My App" /tr c:\apps\myapp.exe /sc weekly /mo 2 /d FRI
```

### <a name="BKMK_months"></a>Чтобы назначить задание, которое будет выполняться каждые N месяцев

#### <a name="syntax"></a>Синтаксис

```
schtasks /create /tn <TaskName> /tr <TaskRun> /sc monthly [/mo {1 - 12}] [/d {1 - 31}] [/st <HH:MM>] [/sd <StartDate>] [/ed <EndDate>] [/it] [/ru {[<Domain>\]<User> [/rp <Password>] | System}] [/s <Computer> [/u [<Domain>\]<User> [/p <Password>]]]
```

#### <a name="remarks"></a>Примечания

В этот тип расписания **/sc ежемесячно** параметр является обязательным. **/Мес** параметр (модификатор), задающее число месяцев между запусками задачи, является необязательным и по умолчанию равно 1 (каждый месяц). Этот тип расписания также имеет дополнительный **/d** параметр для планирования задачи для запуска в указанный день месяца. Значение по умолчанию равно 1 (первый день месяца).

#### <a name="examples"></a>Примеры

#### <a name="to-schedule-a-task-that-runs-on-the-first-day-of-every-month"></a>Чтобы запланировать задачу, которая выполняется в первый день каждого месяца

Следующая команда назначает программы MyApp в первый день каждого месяца. Так как значение 1 по умолчанию для обоих **/мес** параметра (модификатор) и **/d** параметра (день), эти параметры были пропущены из команды.
```
schtasks /create /tn "My App" /tr myapp.exe /sc monthly
```

#### <a name="to-schedule-a-task-that-runs-every-three-months"></a>Чтобы назначить задание, которое будет выполняться каждые три месяца

Следующая команда назначает программы MyApp каждые три месяца. Она использует **/мес** параметр для указания интервала.
```
schtasks /create /tn "My App" /tr c:\apps\myapp.exe /sc monthly /mo 3
```

#### <a name="to-schedule-a-task-that-runs-at-midnight-on-the-21st-day-of-every-other-month"></a>Чтобы запланировать задачу, которая выполняется в полночь в 21 день каждого месяца

Следующая команда назначает программы MyApp каждые два месяца на 21 день месяца в полночь. Команда указывает, что задание должно выполняться в течение одного года из 2 июля 2002 г. до 30 июня 2003.

Команда использует **/мес** параметр для указания ежемесячный интервал (каждые два месяца) **/d** параметр, чтобы указать дату и **/st** для указания времени. Он также использует **/sd** и **/ed** параметры, указывающие начало даты и даты окончания соответственно. Так как локальный компьютер настроен на **английский (Южная Африка)** в диалоговом окне **язык и региональные стандарты** в **панели управления**, даты указаны в формате , ГГГГ/ММ/ДД.
```
schtasks /create /tn "My App" /tr c:\apps\myapp.exe /sc monthly /mo 2 /d 21 /st 00:00 /sd 2002/07/01 /ed 2003/06/30 
```

### <a name="BKMK_spec_day"></a>Чтобы запланировать задачу, которая выполняется в определенный день недели

#### <a name="weekly-schedule-syntax"></a>Синтаксис еженедельного расписания

```
schtasks /create /tn <TaskName> /tr <TaskRun> /sc weekly [/d {<MON - SUN>[,MON - SUN...] | *}] [/mo {1 - 52}] [/st <HH:MM>] [/sd <StartDate>] [/ed <EndDate>] [/it] [/ru {[<Domain>\]<User> [/rp <Password>] | System}] [/s <Computer> [/u [<Domain>\]<User> [/p <Password>]]]
```

#### <a name="remarks"></a>Примечания

Расписание «день недели» является разновидностью Еженедельное расписание. В Еженедельное расписание **/sc еженедельно** параметр является обязательным. **/Мес** (модификатор) параметр является необязательным и указывает число недель между запусками задания. Значение по умолчанию для **/мес** -1 (каждую неделю). **/D** параметр, который не является обязательным, планирует задачу для запуска в указанные дни недели или на все дни (*). Значение по умолчанию — ПН (понедельник). Параметр каждый день (**/d \*** ) эквивалентно назначению ежедневного задания.

#### <a name="examples"></a>Примеры

#### <a name="to-schedule-a-task-that-runs-every-wednesday"></a>Чтобы запланировать задачу, которая выполняется каждую среду

Следующая команда назначает программы MyApp каждую неделю в среду. Команда использует **/d** параметр, чтобы задать день недели. Так как **/мес** , задача выполняется каждую неделю.
```
schtasks /create /tn "My App" /tr c:\apps\myapp.exe /sc weekly /d WED
```

#### <a name="to-schedule-a-task-that-runs-every-eight-weeks-on-monday-and-friday"></a>Чтобы запланировать задачу, которая будет выполняться каждые восемь недель по понедельникам и пятница

Следующая команда планирует задачу для запуска на датах понедельника и пятницы восьмой еженедельно. Она использует **/d** параметр, чтобы указать дни и **/мес** параметр для указания интервала восемь недель.
```
schtasks /create /tn "My App" /tr c:\apps\myapp.exe /sc weekly /mo 8 /d MON,FRI
```

### <a name="BKMK_spec_week"></a>Чтобы запланировать задачу, которая выполняется в выбранную неделю месяца

#### <a name="specific-week-syntax"></a>Синтаксис выбранную неделю

```
schtasks /create /tn <TaskName> /tr <TaskRun> /sc monthly /mo {FIRST | SECOND | THIRD | FOURTH | LAST} /d MON - SUN [/m {JAN - DEC[,JAN - DEC...] | *}] [/st <HH:MM>] [/sd <StartDate>] [/ed <EndDate>] [/it] [/ru {[<Domain>\]<User> [/rp <Password>] | System}] [/s <Computer> [/u [<Domain>\]<User> [/p <Password>]]]
```

#### <a name="remarks"></a>Примечания

В этот тип расписания **/sc ежемесячно** параметра **/мес** параметра (модификатор) и **/d** параметра (день) являются обязательными. **/Мес** параметр (модификатор) задает недели, на котором выполняется задача. **/D** параметр указывает день недели. (Можно указать только один день недели для этого типа расписания.) Это расписание также имеет дополнительный **/m** параметра (месяц), которая позволяет запланировать задачу на определенный месяц или каждый месяц (*). По умолчанию для **/m** параметр — каждый месяц (*).

#### <a name="examples"></a>Примеры

#### <a name="to-schedule-a-task-for-the-second-sunday-of-every-month"></a>Для планирования задач для второе воскресенье каждого месяца

Следующая команда назначает программы MyApp во второе воскресенье каждого месяца. Она использует **/мес** параметр для указания на второй неделе месяца и **/d** параметр для задания дня.
```
schtasks /create /tn "My App" /tr c:\apps\myapp.exe /sc monthly /mo SECOND /d SUN
```

#### <a name="to-schedule-a-task-for-the-first-monday-in-march-and-september"></a>Для планирования задач первый понедельник в марте и сентябре

Следующая команда назначает программы MyApp на первый понедельник в марте и сентябре. Она использует **/мес** параметр для указания первой недели месяца и **/d** параметр для задания дня. Она использует **/m** параметр для указания месяца, разделяя аргументы запятыми.
```
schtasks /create /tn "My App" /tr c:\apps\myapp.exe /sc monthly /mo FIRST /d MON /m MAR,SEP
```

### <a name="BKMK_spec_date"></a>Чтобы запланировать задачу, которая выполняется в определенный день каждого месяца

#### <a name="specific-date-syntax"></a>Синтаксис для определенной даты

```
schtasks /create /tn <TaskName> /tr <TaskRun> /sc monthly /d {1 - 31} [/m {JAN - DEC[,JAN - DEC...] | *}] [/st <HH:MM>] [/sd <StartDate>] [/ed <EndDate>] [/it] [/ru {[<Domain>\]<User> [/rp <Password>] | System}] [/s <Computer> [/u [<Domain>\]<User> [/p <Password>]]]
```

#### <a name="remarks"></a>Примечания

В типе расписание определенную дату **/sc ежемесячно** параметр и **/d** параметра (день) являются обязательными. **/D** параметр указывает день месяца (1-31), не день недели. В расписании можно указать только один раз. **/Мес** недопустимый параметр (модификатор) с этим типом расписания.

**/M** (месяц) параметр является необязательным для этого типа расписания по умолчанию — каждый месяц (*). **SCHTASKS** не позволяет назначить задание даты, которая выполняется в течение месяца, определяемое **/m** параметра. Тем не менее если опустить **/m** параметра и расписание задачи для даты, которое не встречается в каждом месяце, таких как 31 день, то задача не может выполняться в короткие месяцы. Для планирования задач за последний день месяца, используйте тип графика последний день.

#### <a name="examples"></a>Примеры

#### <a name="to-schedule-a-task-for-the-first-day-of-every-month"></a>Для планирования задач за первый день каждого месяца

Следующая команда назначает программы MyApp в первый день каждого месяца. Поскольку модификатором по умолчанию является none (никакой модификатор), день по умолчанию — 1 и является каждый месяц по умолчанию, команда не нужны дополнительные параметры.
```
schtasks /create /tn "My App" /tr c:\apps\myapp.exe /sc monthly
```

#### <a name="to-schedule-a-task-for-the-15th-days-of-may-and-june"></a>Для планирования задач для 15 дней май и июнь

Следующая команда назначает программы MyApp на 15 мая по 15 июня в 3:00 (15:00). Она использует **/m** параметр, чтобы указать дату и **/m** параметр для задания месяцев. Он также использует **/st** параметр, чтобы указать время начала.
```
schtasks /create /tn "My App" /tr c:\apps\myapp.exe /sc monthly /d 15 /m MAY,JUN /st 15:00
```

### <a name="BKMK_last_day"></a>Чтобы запланировать задачу, которая выполняется в последний день месяца

#### <a name="last-day-syntax"></a>Последний день пример синтаксиса

```
schtasks /create /tn <TaskName> /tr <TaskRun> /sc monthly /mo LASTDAY /m {JAN - DEC[,JAN - DEC...] | *} [/st <HH:MM>] [/sd <StartDate>] [/ed <EndDate>] [/it] [/ru {[<Domain>\]<User> [/rp <Password>] | System}] [/s <Computer> [/u [<Domain>\]<User> [/p <Password>]]]
```

#### <a name="remarks"></a>Примечания

В последний день тип расписания **/sc ежемесячно** параметра **/мес LASTDAY** параметра (модификатор) и **/m** параметра (месяц) являются обязательными. **/D** недопустимый параметр (день).

#### <a name="examples"></a>Примеры

#### <a name="to-schedule-a-task-for-the-last-day-of-every-month"></a>Для планирования задач за последний день каждого месяца

Следующая команда назначает программы MyApp в последний день каждого месяца. Она использует **/мес** параметр, чтобы задать последний день и **/m** параметр с символом-шаблоном (*) для указания, что программа запускается каждый месяц.
```
schtasks /create /tn "My App" /tr c:\apps\myapp.exe /sc monthly /mo lastday /m *
```

#### <a name="to-schedule-a-task-at-600-pm-on-the-last-days-of-february-and-march"></a>Для планирования задач в 18:00 последний день, февраль и март

Следующая команда назначает программы MyApp на последний день февраля и последний день марта в 18:00 Она использует **/мес** параметр, чтобы задать последний день, **/m** параметр, чтобы указать месяцы и **/st** параметр, чтобы указать время начала.
```
schtasks /create /tn "My App" /tr c:\apps\myapp.exe /sc monthly /mo lastday /m FEB,MAR /st 18:00
```

### <a name="BKMK_once"></a>Чтобы назначить задание, выполняемое один раз

#### <a name="syntax"></a>Синтаксис

```
schtasks /create /tn <TaskName> /tr <TaskRun> /sc once /st <HH:MM> [/sd <StartDate>] [/it] [/ru {[<Domain>\]<User> [/rp <Password>] | System}] [/s <Computer> [/u [<Domain>\]<User> [/p <Password>]]]
```

#### <a name="remarks"></a>Примечания

В типе расписании **/sc один раз** параметр является обязательным. **/St** параметр, который указывает время, которую запускает задача, является обязательным. **/Sd** параметр, который указывает дату, которую запускает задача, является необязательным. **/Мес** (модификатор) и **/ed** (Дата окончания) параметры недопустимы для этого типа расписания.

**SCHTASKS** позволяет запланировать задачу, чтобы запустить один раз, если значение даты и времени в прошлом, на основе времени на локальном компьютере. Чтобы запланировать задачу, которая выполняется один раз на удаленном компьютере в другом часовом поясе, нужно сделать это до этой даты и времени выполняется на локальном компьютере.

#### <a name="examples"></a>Примеры

#### <a name="to-schedule-a-task-that-runs-one-time"></a>Чтобы назначить задание, которое будет выполняться один раз

Следующая команда назначает программа MyApp на полночь 1 января 2003 г. Она использует **/sc** параметр, чтобы указать тип расписания и **/sd** и **st** для указания даты и времени.

Так как локальный компьютер использует **русский (Россия)** в диалоговом окне **язык и региональные стандарты** в **панели управления**, мм/дд/гггг — формат даты начала.
```
schtasks /create /tn "My App" /tr c:\apps\myapp.exe /sc once /sd 01/01/2003 /st 00:00
```

### <a name="BKMK_startup"></a>Чтобы запланировать задачу, которая выполняется при каждом запуске системы

#### <a name="syntax"></a>Синтаксис

```
schtasks /create /tn <TaskName> /tr <TaskRun> /sc onstart [/sd <StartDate>] [/it] [/ru {[<Domain>\]<User> [/rp <Password>] | System}] [/s <Computer> [/u [<Domain>\]<User> [/p <Password>]]]
```

#### <a name="remarks"></a>Примечания

В типе расписания при запуске **/sc onstart** параметр является обязательным. **/Sd** (Дата начала) параметр является необязательным и значение по умолчанию — текущая дата.

#### <a name="examples"></a>Примеры

#### <a name="to-schedule-a-task-that-runs-when-the-system-starts"></a>Чтобы запланировать задачу, которая выполняется при запуске системы

Следующая команда назначает программы MyApp запускаться при каждом запуске системы, начиная с 15 марта 2001 г.:

Так как локальный компьютер является использует **русский (Россия)** в диалоговом окне **язык и региональные стандарты** в **панели управления**, мм/дд/гггг — формат даты начала .
```
schtasks /create /tn "My App" /tr c:\apps\myapp.exe /sc onstart /sd 03/15/2001
```

### <a name="BKMK_logon"></a>Чтобы запланировать задачу, которая выполняется, когда пользователь входе в систему

#### <a name="syntax"></a>Синтаксис

```
schtasks /create /tn <TaskName> /tr <TaskRun> /sc onlogon [/sd <StartDate>] [/it] [/ru {[<Domain>\]<User> [/rp <Password>] | System}] [/s <Computer> [/u [<Domain>\]<User> [/p <Password>]]]
```

#### <a name="remarks"></a>Примечания

Тип расписания «при входе в систему» планирует задачу, которая выполняется каждый раз, когда любой пользователь входит на компьютер. В тип графика «при входе в систему» **инициирует /sc** параметр является обязательным. **/Sd** (Дата начала) параметр является необязательным и значение по умолчанию — текущая дата.

#### <a name="examples"></a>Примеры

#### <a name="to-schedule-a-task-that-runs-when-a-user-logs-on-to-a-remote-computer"></a>Чтобы запланировать задачу, которая выполняется, когда пользователь в систему удаленного компьютера

Следующая команда назначает пакетный файл, чтобы запускаться при каждом входе пользователя (любой пользователь) к удаленному компьютеру. Она использует **/s** параметр, чтобы указать удаленный компьютер. Поскольку команды являются удаленными, все пути в команде, включая путь к файлу пакета, см. по пути на удаленном компьютере.
```
schtasks /create /tn "Start Web Site" /tr c:\myiis\webstart.bat /sc onlogon /s Server23
```

### <a name="BKMK_idle"></a>Чтобы запланировать задачу, которая выполняется, когда система бездействует

#### <a name="syntax"></a>Синтаксис

```
schtasks /create /tn <TaskName> /tr <TaskRun> /sc onidle /i {1 - 999} [/sd <StartDate>] [/it] [/ru {[<Domain>\]<User> [/rp <Password>] | System}] [/s <Computer> [/u [<Domain>\]<User> [/p <Password>]]]
```

#### <a name="remarks"></a>Примечания

Расписание «в режиме бездействия» тип планирует задачу, которая выполняется при отсутствии активности пользователя за время, заданное по **/i** параметра. В расписании «в режиме бездействия» тип, **/sc onidle** параметр и **/i** параметра являются обязательными. **/Sd** (Дата начала) является необязательным и значение по умолчанию — текущая дата.

#### <a name="examples"></a>Примеры

#### <a name="to-schedule-a-task-that-runs-whenever-the-computer-is-idle"></a>Чтобы запланировать задачу, которая выполняется каждый раз, когда компьютер простаивает

Следующая команда назначает программы MyApp каждый раз, когда компьютер бездействует. Она использует обязательный **/i** параметр, чтобы указать, что компьютер должен простаивать в течение 10 минут перед запуском задания.
```
schtasks /create /tn "My App" /tr c:\apps\myapp.exe /sc onidle /i 10
```

### <a name="BKMK_now"></a>Чтобы запланировать задачу, которая теперь выполняется

**SCHTASKS** не существует «выполнения теперь» вариант, но вы можете смоделировать этот параметр, создании задачи, которая выполняется один раз и запускается в несколько минут.

#### <a name="syntax"></a>Синтаксис

```
schtasks /create /tn <TaskName> /tr <TaskRun> /sc once [/st <HH:MM>] /sd <MM/DD/YYYY> [/it] [/ru {[<Domain>\]<User> [/rp <Password>] | System}] [/s <Computer> [/u [<Domain>\]<User> [/p <Password>]]]
```

#### <a name="examples"></a>Примеры

#### <a name="to-schedule-a-task-that-runs-a-few-minutes-from-now"></a>Для планирования задач, выполняется через несколько минут.

Следующая команда планирует задачу для запуска, на 13 ноября 2002 г. в 14:18 по местное время.

Так как локальный компьютер является использует **русский (Россия)** в диалоговом окне **язык и региональные стандарты** в **панели управления**, мм/дд/гггг — формат даты начала .
```
schtasks /create /tn "My App" /tr c:\apps\myapp.exe /sc once /st 14:18 /sd 11/13/2002
```

### <a name="BKMK_diff_perms"></a>Чтобы запланировать задачу, которая работает с другими разрешениями

Вы можете запланировать задания всех типов на запуск с правами другой учетной записи в локальном и удаленном компьютере. Помимо параметров, необходимых для конкретного типа расписания **/ru** параметр является обязательным и **/rp** параметр является необязательным.

#### <a name="examples"></a>Примеры

#### <a name="to-run-a-task-with-administrator-permissions-on-the-local-computer"></a>Чтобы выполнить задачу с правами администратора на локальном компьютере

Следующая команда назначает запуск программы MyApp на локальном компьютере. Она использует **/ru** для указания, что задание должно выполняться с разрешениями учетной записи администратора (Admin06). В этом примере задача запланирована для запуска каждый вторник, но можно использовать любой тип расписания для запуска программы с другими разрешениями.
```
schtasks /create /tn "My App" /tr myapp.exe /sc weekly /d TUE /ru Admin06
```
В ответ **SchTasks.exe** запрашивает «запуск от имени» пароль для учетной записи Admin06 и выведет сообщение об успешном выполнении.
```
Please enter the run as password for Admin06: ********
SUCCESS: The scheduled task "My App" has successfully been created.
```

#### <a name="to-run-a-task-with-alternate-permissions-on-a-remote-computer"></a>Чтобы выполнить задачу с другими разрешениями на удаленном компьютере

Следующая команда назначает запуск программы MyApp на компьютере Marketing каждые четыре дня.

Команда использует **/sc** параметр, чтобы указать ежедневное расписание и **/мес** параметр, чтобы указать интервал четыре дня.

Команда использует **/s** параметр, чтобы указать имя удаленного компьютера и **/u** параметр, чтобы указать учетную запись с разрешением для планирования задач на удаленном компьютере (Admin01 по маркетингу компьютер). Он также использует **/ru** параметр, чтобы указать, что задание должно выполняться с разрешениями учетной записи без прав администратора (User01 в домене Reskits). Без **/ru** параметр, задание будет запущено с разрешениями учетной записи, **/u**.
```
schtasks /create /tn "My App" /tr myapp.exe /sc daily /mo 4 /s Marketing /u Marketing\Admin01 /ru Reskits\User01
```
**SCHTASKS** сначала запрашивает пароль пользователя с именем **/u** параметра (для выполнения команды), а затем запрашивает пароль пользователя с именем **/ru** (для выполнения задачи). После проверки подлинности паролей, **schtasks** появится сообщение о том, что задача запланирована.
```
Type the password for Marketing\Admin01:********

Please enter the run as password for Reskits\User01: ********

SUCCESS: The scheduled task "My App" has successfully been created.

```

#### <a name="to-run-a-task-only-when-a-particular-user-is-logged-on"></a>Выполнение задачи только когда конкретный пользователь вошел в систему

Следующая команда назначает AdminCheck.exe программы на компьютере Public каждую пятницу в 4:00, но только если администратор компьютера вошел в систему.

Команда использует **/sc** параметр, чтобы указать Еженедельное расписание, **/d** параметр для задания дня и **/st** параметр, чтобы указать время начала.

Команда использует **/s** параметр, чтобы указать имя удаленного компьютера и **/u** параметр, чтобы указать учетную запись с разрешением для планирования задач на удаленном компьютере. Он также использует **/ru** параметр, чтобы настроить запуск с правами администратора компьютера Public (Public\Admin01) и **/it** параметр, чтобы указать, что задача выполняется только После Public\Admin01 учетной записи входа.
```
schtasks /create /tn "Check Admin" /tr AdminCheck.exe /sc weekly /d FRI /st 04:00 /s Public /u Domain3\Admin06 /ru Public\Admin01 /it
```
**Примечание**
-   Для указания задач с интерактивности (**/it**) свойство, используйте подробный запрос **(/ запроса /v**). В подробном запросе показано задание с **/it**, **режим входа** поле имеет значение **только интерактивный**.

### <a name="BKMK_sys_perms"></a>Чтобы запланировать задачу, которая выполняется с разрешениями системы

Задачи для всех типов можно запустить с правами системной учетной записи на локальном и удаленном компьютере. Помимо параметров, необходимых для конкретного типа расписания **/ru system** (или **/ru «»**) параметр является обязательным и **/rp** недопустимый параметр.

**Внимание!**
-   Системная учетная запись имеет права на интерактивный вход в систему. Пользователи не могут см. в разделе или взаимодействовать с программами или задачи выполняются с разрешениями системного.
-   **/Ru** параметр определяет разрешения, при которых выполняется задача, не разрешения, используемые для планирования задачи. Только администраторы могут планировать задачи, независимо от значения **/ru** параметра.

**Примечание**

Чтобы определить задачи, которые выполняются с разрешениями системы, используйте подробный запрос (**/запроса** **/v**). В окне подробного запроса задачи запуска системы **Запуск от имени пользователя** поле имеет значение **NT AUTHORITY\SYSTEM** и **режим входа** поле имеет значение  **Фон только**.

#### <a name="examples"></a>Примеры

#### <a name="to-run-a-task-with-system-permissions"></a>Чтобы выполнить задачу с разрешениями системного

Следующая команда назначает запуск программы MyApp на локальном компьютере с правами системной учетной записи. В этом примере задача запланирована на пятнадцатый день каждого месяца, но можно использовать любой тип расписания для запуска с разрешениями системного.

Команда использует **/ru System** параметр для указания контекста безопасности системы. Так как системные задачи не используйте пароль, **/rp** параметр пропущен.
```
schtasks /create /tn "My App" /tr c:\apps\myapp.exe /sc monthly /d 15 /ru System
```
В ответ **SchTasks.exe** отображается информационное сообщение и сообщение об успешном выполнении. Он не запрашивает пароль.
```
INFO: The task will be created under user name ("NT AUTHORITY\SYSTEM").
SUCCESS: The Scheduled task "My App" has successfully been created.

```

#### <a name="to-run-a-task-with-system-permissions-on-a-remote-computer"></a>Чтобы выполнить задачу с разрешениями системы на удаленном компьютере

Следующая команда назначает запуск программы MyApp на компьютере Finance01 каждое утро в 4:00. с разрешения системы.

Команда использует **/tn** параметров задания и **/tr** параметр для указания удаленной копии программы MyApp. Она использует **/sc** параметр, чтобы указать ежедневное расписание, однако опускает **/мес** параметр так, как по умолчанию — 1 (каждый день). Она использует **/st** параметр для указания времени запуска, который также является время, задача будет выполняться каждый день.

Команда использует **/s** параметр, чтобы указать имя удаленного компьютера и **/u** параметр, чтобы указать учетную запись с разрешением для планирования задач на удаленном компьютере. Он также использует **/ru** параметр, чтобы указать, что задание должно выполняться с учетной записью System. Без **/ru** параметр, задание будет запущено с разрешениями учетной записи, **/u**.
```
schtasks /create /tn "My App" /tr myapp.exe /sc daily /st 04:00 /s Finance01 /u Admin01 /ru System
```
**SCHTASKS** запрашивает пароль пользователя с именем **/u** параметра и после проверки пароля, появится сообщение о том, что задача создана и что он будет выполняться с разрешениями системы Учетная запись.
```
Type the password for Admin01:**********

INFO: The Schedule Task "My App" will be created under user name ("NT AUTHORITY\
SYSTEM").
SUCCESS: The scheduled task "My App" has successfully been created.

```

### <a name="BKMK_multi_progs"></a>Чтобы назначить задание, которое будет выполняться более чем одной программы

Каждая задача выполнялась только одна из них. Тем не менее можно создать пакетный файл, который запускает несколько программ и запланировать задачу для запуска пакетного файла. Следующая процедура демонстрирует этот метод:
1.  Создайте пакетный файл, который запускает программы, которую вы хотите запустить.

    В этом примере создайте пакетный файл, который запускает средство просмотра событий (Eventvwr.exe) и системный монитор (Perfmon.exe).  
    -   Откройте текстовый редактор, например Блокнот.
    -   Введите имя и полный путь к исполняемому файлу для каждой программы. В этом случае файл включает следующие инструкции.  
        ```
        C:\Windows\System32\Eventvwr.exe 
        C:\Windows\System32\Perfmon.exe
        ```  
    -   Сохраните файл как файла MyApps.bat.
2.  Используйте **Schtasks.exe** создать задачу, которая запускает файла MyApps.bat.

    Следующая команда создает в монитор задачу, которая выполняется каждый раз, когда любой пользователь входит в систему. Она использует **/tn** параметр задания и **/tr** параметр для запуска файла MyApps.bat. Она использует **/sc** параметр, чтобы указать тип расписания инициирует и **/ru** для выполнения задачи с разрешениями учетной записи администратора.  
    ```
    schtasks /create /tn Monitor /tr C:\MyApps.bat /sc onlogon /ru Reskit\Administrator
    ```  
    В результате выполнения этой команды при каждом входе пользователя на компьютере, задача запускает средство просмотра событий и системный монитор.

### <a name="BKMK_remote"></a>Чтобы запланировать задачу, которая выполняется на удаленном компьютере

Чтобы запланировать задание для выполнения на удаленном компьютере, необходимо добавить задачу расписание удаленного компьютера. Задачи для всех типов можно планировать на удаленном компьютере, но должны быть выполнены следующие условия.
-   Необходимо иметь разрешение для планирования задачи. Таким образом, необходимо войти в систему на локальном компьютере с учетной записью, которая является членом группы администраторов на удаленном компьютере, или необходимо использовать **/u** параметр, чтобы предоставить учетные данные администратора удаленного компьютера .
-   Можно использовать **/u** параметр только в том случае, когда локальный и удаленный компьютеры находятся в одном домене или локальный компьютер находится в домене, которому доверяет домену удаленного компьютера. В противном случае удаленного компьютера не может проверить подлинность учетной записи пользователя, указанной и его не удается проверить, что учетная запись является членом группы "Администраторы".
-   Задача должна иметь достаточные разрешения для запуска на удаленном компьютере. Необходимые разрешения зависят от задачи. По умолчанию задача выполняется с разрешениями текущего пользователя на локальном компьютере или, если **/u** параметр используется, задание выполняется с разрешениями учетной записи, **/u** параметра. Тем не менее, можно использовать **/ru** для выполнения задачи с разрешениями учетной записи другого пользователя или с разрешения системы.

#### <a name="examples"></a>Примеры

#### <a name="an-administrator-schedules-a-task-on-a-remote-computer"></a>Администратор планирует задачу на удаленном компьютере

Следующая команда назначает запуск программы MyApp на удаленном компьютере SRV01 каждые 10 дней, немедленно. Команда использует **/s** параметр, чтобы указать имя удаленного компьютера. Так как текущий пользователь является администратором удаленного компьютера, **/u** параметр, который указывает дополнительные разрешения для планирования задачи, не является обязательным.

Обратите внимание на то, что при планировании задач на удаленном компьютере, все параметры относятся к удаленному компьютеру. Таким образом, исполняемый файл, указанный параметром **/tr** параметр ссылается на копию MyApp.exe на удаленном компьютере.
```
schtasks /create /s SRV01 /tn "My App" /tr "c:\program files\corpapps\myapp.exe" /sc daily /mo 10
```
В ответ **schtasks** отображает сообщение об успешном планирования задачи.

#### <a name="a-user-schedules-a-command-on-a-remote-computer-case-1"></a>Пользователь планирует команду на удаленном компьютере (вариант 1)

Следующая команда назначает запуск программы MyApp на удаленном компьютере SRV06 каждые три часа. Так как требуются права администратора для планирования задач, команда использует **/u** и **/p** параметры, чтобы указать учетные данные пользователя администратора учетной записи (Admin01 в Reskits домен). По умолчанию эти разрешения также используются для выполнения задачи. Тем не менее, так как задача не требует прав администратора для запуска, команда включает **/u** и **/rp** параметры, чтобы переопределить значение по умолчанию и запустить задачу с разрешения пользователя Учетная запись без прав администратора на удаленном компьютере.
```
schtasks /create /s SRV06 /tn "My App" /tr "c:\program files\corpapps\myapp.exe" /sc hourly /mo 3 /u reskits\admin01 /p R43253@4$ /ru SRV06\user03 /rp MyFav!!Pswd
```
В ответ **schtasks** отображает сообщение об успешном планирования задачи.

#### <a name="a-user-schedules-a-command-on-a-remote-computer-case-2"></a>Пользователь планирует команду на удаленном компьютере (вариант 2)

Следующая команда назначает программы MyApp на удаленном компьютере SRV02 в последний день каждого месяца. Так как текущий пользователь (user03) не является администратором удаленного компьютера, команда использует **/u** параметр для предоставления учетных данных пользователя администратора учетной записи (Admin01 в домене Reskits). Разрешения учетной записи администратора будет использоваться для планирования задачи, так и для выполнения задачи.
```
schtasks /create /s SRV02 /tn "My App" /tr "c:\program files\corpapps\myapp.exe" /sc monthly /mo LASTDAY /m * /u reskits\admin01
```
Так как команда не содержал **/p** параметра (пароль), **schtasks** запрашивает пароль. Затем оно отображает сообщение об успешном выполнении и, в данном случае предупреждение.
```
Type the password for reskits\admin01:********

SUCCESS: The scheduled task "My App" has successfully been created.

WARNING: The Scheduled task "My App" has been created, but may not run because
the account information could not be set.

```
Это предупреждение означает, что удаленный домен не удалось проверить подлинность учетной записи, **/u** параметра. В этом случае удаленный домен не удалось проверить подлинность учетной записи пользователя, так как локальный компьютер не является членом домена, которому доверяет домену удаленного компьютера. В этом случае задание появится в списке назначенных заданий, но задача фактически пуст и не запустится.

Следующий результат подробный запрос раскрывает проблемы с задачей. Обратите внимание, что отображается значение **время следующего запуска** — **никогда** и что значение **Запуск от имени пользователя** является **не удалось получить задание База данных**.

Был ли этот компьютер является членом том же домене или в доверенном домене, задача будет успешно запланированы и запущено как указано.
```
HostName: SRV44
TaskName: My App
Next Run Time: Never
Status:
Logon mode: Interactive/Background
Last Run Time: Never
Last Result: 0
Creator: user03
Schedule: At 3:52 PM on day 31 of every month, start
 starting 12/14/2001
Task To Run: c:\program files\corpapps\myapp.exe
Start In: myapp.exe
Comment: N/A
Scheduled Task State: Disabled
Scheduled Type: Monthly
Start Time: 3:52:00 PM
Start Date: 12/14/2001
End Date: N/A
Days: 31
Months: JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NO
V,DEC
Run As User: Could not be retrieved from the task sched
uler database
Delete Task If Not Rescheduled: Enabled
Stop Task If Runs X Hours and X Mins: 72:0
Repeat: Every: Disabled
Repeat: Until: Time: Disabled
Repeat: Until: Duration: Disabled
Repeat: Stop If Still Running: Disabled
Idle Time: Disabled
Power Management: Disabled

```

#### <a name="remarks"></a>Примечания

-   Для запуска **/ create** команду с правами другого пользователя, используйте **/u** параметра. **/U** параметр допустим только для планирования задач на удаленных компьютерах.
-   Для просмотра дополнительных **schtasks / create** примеры, тип **schtasks / create /?** в командной строке.
-   Чтобы запланировать задачу, которая выполняется с разрешениями другого пользователя, используйте **/ru** параметра. **/Ru** параметр является допустимым для задач на локальных и удаленных компьютерах.
-   Чтобы использовать **/u** параметр, локальный компьютер должен быть в том же домене, что и удаленный компьютер или должны находиться в домене, которому доверяет домену удаленного компьютера. В противном случае либо не создается задача или задание пуст и задача не выполняется.
-   **SCHTASKS** всегда запрашивает пароль, если его не указать, даже в том случае, если назначить задание на локальном компьютере, с помощью текущей учетной записи пользователя. Это нормальное поведение для **schtasks**.
-   **SCHTASKS** не проверяет расположения файлов программ или пароли учетных записей пользователей. Если вы не вводите правильное расположение файла или правильный пароль для учетной записи пользователя, создается задача, но она не может быть выполнена. Кроме того Если изменяется пароль для учетной записи, или истечения срока действия, а не изменять пароль, сохраненный при выполнении задачи, то задача не выполняется.
-   Системная учетная запись имеет права на интерактивный вход в систему. Пользователи не отображается и не может взаимодействовать с помощью программы, с разрешения системы.
-   Каждая задача выполнялась только одна из них. Тем не менее можно создать пакетный файл, который запускается несколько задач и затем запланировать задачу, которая запускает пакетный файл.
-   Вы можете протестировать задачи сразу же после его создания. Используйте **запуска** операции тестирования задания и затем проверьте файл SchedLgU.txt (*SystemRoot*\SchedLgU.txt) для ошибки.

## <a name="BKMK_change"></a>Изменение задания

Изменяет один или несколько из следующих свойств задачи.
-   Программа, которую запускает задача (**/tr**).
-   Учетная запись пользователя, под которой запускается задача (**/ru**).
-   Пароль для учетной записи пользователя (**/rp**).
-   Добавляет свойство интерактивности в задачу (**/it**).

### <a name="syntax"></a>Синтаксис

```
schtasks /change /tn <TaskName> [/s <Computer> [/u [<Domain>\]<User> [/p <Password>]]] [/ru {[<Domain>\]<User> | System}] [/rp <Password>] [/tr <TaskRun>] [/st <StartTime>] [/ri <Interval>] [{/et <EndTime> | /du <Duration>} [/k]] [/sd <StartDate>] [/ed <EndDate>] [/{ENABLE | DISABLE}] [/it] [/z]
```

### <a name="parameters"></a>Параметры

|Термин|Определение|
|----|----------|
|/TN \<имя_задания >|Определяет задачу должен быть изменен. Введите имя задачи.|
|/s \<компьютер >|Указывает имя или IP-адрес удаленного компьютера (с или без символов обратной косой черты). По умолчанию используется локальный компьютер.|
|/u [\<домена >\]<User>|Выполняет эту команду с разрешениями указанной учетной записи. По умолчанию используется разрешения текущего пользователя на локальном компьютере. Указанной учетной записи необходимо быть членом группы администраторов на удаленном компьютере. **/U** и **/p** параметры допустимы только для изменения задания на удаленном компьютере (**/s**).|
|/p \<пароль >|Указывает пароль для учетной записи пользователя, указанной в **/u** параметра. При использовании **/u** параметра, но не указывается **/p** параметр или аргумент пароля, **schtasks** запрашивает пароль.</br>**/U** и **/p** параметры допустимы только при использовании **/s**.|
|/ru {[\<Domain>\]<User> | Система}|Указывает, для изменения учетной записи, под которой выполняется задача. Для указания учетной записи local System, допустимыми значениями являются «», «NT AUTHORITY\SYSTEM» или «SYSTEM».</br>При изменении учетной записи пользователя, необходимо также изменить пароль пользователя. Если команда имеет **/ru** параметра, но не **/rp** параметра **schtasks** запрашивает новый пароль.</br>Задачи, выполняемые с разрешениями локальной системной учетной записи не требуется и не предлагается ввести пароль.|
|/RP \<пароль >|Указывает новый пароль для существующей учетной записи пользователя или учетной записи пользователя, **/ru** параметра. Этот параметр учитывается в использовании учетной записи local System.|
|/TR \<программа >|Изменяет программу, которую запускает задача. Введите полный путь и имя исполняемого файла, файла сценария или пакетного файла. Если не указан путь, **schtasks** предполагается, что файл находится в \<systemroot > каталоге \System32. Указанная программа заменяет исходную программу, запускаемую задачей.|
|/ST \<Starttime >|Указывает время начала для задачи, в 24-часовом формате, чч: мм. Например значение 14:30 соответствует 12-часовом время 14:30:00.|
|/RI \<интервал >|Указывает интервал повторения для запланированной задачи, в минутах. Допустимый диапазон — от 1 до 599940 (599940 минут = 9999 часов).|
|/et \<EndTime>|Указывает время окончания для задач, в 24-часовом формате, чч: мм. Например значение 14:30 соответствует 12-часовом время 14:30:00.|
|/du \<Duration>|Указывает, чтобы закрыть задачу в \<EndTime > или <Duration>, если он указан.|
|/k|Останавливает программу, которую запускает задача во времени, заданного параметром **/et** или **/du**. Без **/k**, **schtasks** не запустить программу еще раз после достижения времени, заданного параметром **/et** или **/du**, но не останавливает программы, если он по-прежнему работает. Этот параметр является необязательный и может использоваться только с расписанием МИНУТУ или каждый час.|
|/sd \<StartDate>|Задает первую дату, на котором должна выполняться задача. Формат даты — мм/дд/гггг.|
|/ed \<EndDate>|Указывает дату последнего, на котором должна выполняться задача. Формат — мм/дд/гггг.|
|/ ENABLE|Указывает, чтобы включить запланированное задание.|
|/ DISABLE|Указывает, чтобы отключить запланированную задачу.|
|/IT|Для запуска задания только тогда, когда пользователь «Запуск от имени» (учетная запись пользователя, под которой выполняется задача) вошел в систему на компьютере.</br>Этот параметр не влияет на задачи, которые выполняются с разрешениями системного или задачи, которые уже быть задано свойство интерактивности. Нельзя использовать команду изменения для удаления интерактивности свойства из задачи.</br>По умолчанию является «запуск от имени» пользователь текущего пользователя на локальном компьютере, когда задача или учетной записи, **/u** параметр, если он используется. Тем не менее если команда содержит **/ru** параметр, выберите «Запуск от имени» пользователя является учетная запись, указанная с **/ru** параметра.|
|/ z|Указывает удаление задачи после завершения его расписание.|
|/?|Отображение справки в командной строке.|

### <a name="remarks"></a>Примечания

-   **/Tn** и **/s** параметры определения задачи. **/Tr**, **/ru**, и **/rp** параметры определяют свойства задачи, которые можно изменить.
-   **/Ru**, и **/rp** параметры задают разрешения, при которых выполняется задача. **/U** и **/p** параметры задают разрешения, используемые для изменения задания.
-   Для изменения задания на удаленном компьютере, пользователь должен войти в систему на локальном компьютере с учетной записью, которая является членом группы администраторов на удаленном компьютере.
-   Для запуска **/изменить** команду с правами другого пользователя (**/u**, **/p**), локальный компьютер должен быть в том же домене, что и удаленный компьютер или должен быть в домене что доверяет домену удаленного компьютера.
-   Системная учетная запись имеет права на интерактивный вход в систему. Пользователи не отображается и не может взаимодействовать с помощью программы, с разрешения системы.
-   Для определения задач с помощью **/it** свойство, используйте подробный запрос (**/запроса /v**). В подробном запросе показано задание с **/it**, **режим входа** поле имеет значение **только интерактивный**.

### <a name="examples"></a>Примеры

### <a name="to-change-the-program-that-a-task-runs"></a>Чтобы изменить программу, запускаемую

Следующая команда изменяет программы, выполняемого данной задачей, проверьте вирусов из VirusCheck.exe для VirusCheck2.exe. Эта команда использует **/tn** параметр, чтобы идентифицировать задачу и **/tr** параметр, чтобы указать новую программу для задачи. (Не удается изменить имя задачи).
```
schtasks /change /tn "Virus Check" /tr C:\VirusCheck2.exe
```
В ответ **SchTasks.exe** отображает следующее сообщение:
```
SUCCESS: The parameters of the scheduled task "Virus Check" have been changed.
```
В результате выполнения этой команды задача будет проверять вирусов выполняться VirusCheck2.exe.

### <a name="to-change-the-password-for-a-remote-task"></a>Чтобы изменить пароль для удаленной задачи

Следующая команда изменяет пароль учетной записи пользователя для задачи RemindMe на удаленном компьютере Srv01. Команда использует **/tn** параметр, чтобы идентифицировать задачу и **/s** параметр, чтобы указать удаленный компьютер. Она использует **/rp** параметр, чтобы указать новый пароль, p@ssWord3.

Эта процедура является обязательным, каждый раз, когда пароль для учетной записи пользователя истечения срока действия или изменения. Если пароль, сохраненный при выполнении задачи больше не является допустимым, задача не выполняется.
```
schtasks /change /tn RemindMe /s Svr01 /rp p@ssWord3
```
В ответ **SchTasks.exe** отображает следующее сообщение:
```
SUCCESS: The parameters of the scheduled task "RemindMe" have been changed.
```
В результате выполнения этой команды задача RemindMe будет выполняться в его исходной учетной записью пользователя, но, используя новый пароль.

### <a name="to-change-the-program-and-user-account-for-a-task"></a>Чтобы изменить программу и учетную запись пользователя для задачи

Следующая команда изменяет программу, выполняемую задачу и изменения учетной записи, под которой запускается задача. По сути он использует старое расписание для новой задачи. Эта команда изменяет в ChkNews задачу, которая запускается каждый день в 9:00:00 утра Notepad.exe вместо запуска Internet Explorer.

Команда использует **/tn** параметр, чтобы идентифицировать задачу. Она использует **/tr** параметр, чтобы изменить программу, которую запускает задача и **/ru** параметр для изменения учетной записи, под которой выполняется задача.

**/Ru**, и **/rp** пропущен параметр, который содержит пароль для учетной записи пользователя,. Необходимо указать пароль для учетной записи, но можно использовать **/ru**, и **/rp** параметр и введите пароль в виде открытого текста или дождитесь **SchTasks.exe** приглашение на пароль, а затем введите пароль в скрытом тексте.
```
schtasks /change /tn ChkNews /tr "c:\program files\Internet Explorer\iexplore.exe" /ru DomainX\Admin01
```
В ответ **SchTasks.exe** запрашивает пароль для учетной записи пользователя. Закрывает вводимого текста, поэтому пароль не отображается.
```
Please enter the password for DomainX\Admin01: 
```
Обратите внимание, что **/tn** параметр определяет задачи и что **/tr** и **/ru** изменяются параметры свойств задачи. Еще один параметр нельзя использовать для идентификации задания и не может изменить имя задачи.

В ответ **SchTasks.exe** отображает следующее сообщение:
```
SUCCESS: The parameters of the scheduled task "ChkNews" have been changed.
```
В результате выполнения этой команды ChkNews задач теперь запускает Internet Explorer с разрешениями учетной записи администратора.

### <a name="to-change-a-program-to-the-system-account"></a>Чтобы изменить программу для системной учетной записи

Следующая команда изменяет SecurityScript задачи, так что он выполняется с правами системной учетной записи. Она использует **/ru «»** параметр, чтобы указать учетную запись System.
```
schtasks /change /tn SecurityScript /ru ""
```
В ответ **SchTasks.exe** отображает следующее сообщение:
```
INFO: The run as user name for the scheduled task "SecurityScript" will be changed to "NT AUTHORITY\SYSTEM".
SUCCESS: The parameters of the scheduled task "SecurityScript" have been changed.
```
Поскольку задачи, выполняемые с разрешениями системной учетной записи не требуется пароль, **SchTasks.exe** не запрашивает один.

### <a name="to-run-a-program-only-when-i-am-logged-on"></a>Запуск программы только в том случае, если я войду в систему

Следующая команда добавляет свойство интерактивности «MyApp» существующей задачи. Это свойство определяет, что задача выполняется только в том случае, когда пользователь «Запуск от имени», то есть учетная запись пользователя, под которой запускается задача, вошел в систему на компьютере.

Команда использует **/tn** параметр, чтобы идентифицировать задачу и **/it** параметр для добавления интерактивности свойства для задачи. Так как задача уже выполняется с разрешениями учетной записи, мне не нужно изменять **/ru** для задачи параметром.
```
schtasks /change /tn MyApp /it
```
В ответ **SchTasks.exe** отображает следующее сообщение.
```
SUCCESS: The parameters of the scheduled task "MyApp" have been changed.
```

## <a name="BKMK_run"></a>SCHTASKS запуска

Немедленно запускает запланированной задачи. **Запуска** операция игнорирует расписание, но использует путь к файлу программы, учетная запись пользователя и пароль, сохраненный при выполнении задачи, чтобы немедленно запустить задание.

### <a name="syntax"></a>Синтаксис

```
schtasks /run /tn <TaskName> [/s <Computer> [/u [<Domain>\]<User> [/p <Password>]]]
```

### <a name="parameters"></a>Параметры

|Термин|Определение|
|----|----------|
|/TN \<имя_задания >|Обязательный. Определяет задачу.|
|/s \<компьютер >|Указывает имя или IP-адрес удаленного компьютера (с или без символов обратной косой черты). По умолчанию используется локальный компьютер.|
|/u [\<домена >\]<User>|Выполняет эту команду с разрешениями указанной учетной записи. По умолчанию команда выполняется с разрешениями текущего пользователя на локальном компьютере.</br>Указанной учетной записи необходимо быть членом группы администраторов на удаленном компьютере. **/U** и **/p** параметры допустимы только при использовании **/s**.|
|/p \<пароль >|Указывает пароль для учетной записи пользователя, указанной в **/u** параметра. При использовании **/u** параметра, но не указывается **/p** параметр или аргумент пароля, **schtasks** запрашивает пароль.</br>**/U** и **/p** параметры допустимы только при использовании **/s**.|
|/?|Отображение справки в командной строке.|

### <a name="remarks"></a>Примечания

-   Эта операция используется для проверки ваших задач. Если задача не выполняется, проверьте журнал транзакций служба планировщика задач, \<Systemroot > \SchedLgU.txt наличие ошибок.
-   Выполнение задачи не влияет на расписании задач и не изменяет время следующего запуска запланированного задания.
-   Чтобы удаленно запустить задачу, необходимо запланировать задачу на удаленном компьютере. При запуске, задача выполняется только на удаленном компьютере. Чтобы убедиться, что задача выполняется на удаленном компьютере, используйте диспетчер задач или журнала транзакций планировщик задач, \<Systemroot > \SchedLgU.txt.

### <a name="examples"></a>Примеры

### <a name="to-run-a-task-on-the-local-computer"></a>Чтобы запустить задание на локальном компьютере

Следующая команда запускает задачу «Скрипт безопасности».
```
schtasks /run /tn "Security Script"
```
В ответ **SchTasks.exe** запускает сценарий, связанный с задачей и отображается следующее сообщение:
```
SUCCESS: Attempted to run the scheduled task "Security Script".
```
Как и подразумевает сообщение **schtasks** пытается запустить программы, но он может подтвердить, что фактически запустить программу.

### <a name="to-run-a-task-on-a-remote-computer"></a>Чтобы запустить задание на удаленном компьютере

Следующая команда запускает задачи «обновление» на удаленном компьютере Srv01:
```
schtasks /run /tn Update /s Svr01
```
В этом случае **SchTasks.exe** отображает следующее сообщение об ошибке:
```
ERROR: Unable to run the scheduled task "Update".
```
Чтобы найти причину ошибки, найдите в журнале транзакций назначенные задания, C:\Windows\SchedLgU.txt на Svr01. В этом случае в журнале появляется следующая запись:
```
"Update.job" (update.exe) 3/26/2001 1:15:46 PM ** ERROR **
The attempt to log on to the account associated with the task failed, therefore, the task did not run.
The specific error is:
0x8007052e: Logon failure: unknown user name or bad password.
Verify that the task's Run-as name and password are valid and try again.

```
Как видно имя пользователя или пароль не является допустимым в системе. Следующие **неправильный** команда обновляет имя пользователя и пароль для задачи «обновление» на Svr01:
```
schtasks /change /tn Update /s Svr01 /ru Administrator /rp PassW@rd3
```
После **изменить** выполнения команды **запуска** команда повторяется. На этот раз запускает программу Update.exe и **SchTasks.exe** отображается следующее сообщение:
```
SUCCESS: Attempted to run the scheduled task "Update".
```
Как и подразумевает сообщение **schtasks** пытается запустить программы, но он может подтвердить, что фактически запустить программу.

## <a name="BKMK_end"></a>SCHTASKS end

Останавливает программу, запущенную задачей.

### <a name="syntax"></a>Синтаксис

```
schtasks /end /tn <TaskName> [/s <Computer> [/u [<Domain>\]<User> [/p <Password>]]]
```

### <a name="parameters"></a>Параметры

|Термин|Определение|
|----|----------|
|/TN \<имя_задания >|Обязательный. Определяет задачу, которая запускает программу.|
|/s \<компьютер >|Указывает имя или IP-адрес удаленного компьютера. По умолчанию используется локальный компьютер.|
|/u [\<домена >\]<User>|Выполняет эту команду с разрешениями указанной учетной записи. По умолчанию команда выполняется с разрешениями текущего пользователя на локальном компьютере. Указанной учетной записи необходимо быть членом группы администраторов на удаленном компьютере. **/U** и **/p** параметры допустимы только при использовании **/s**.|
|/p \<пароль >|Указывает пароль для учетной записи пользователя, указанной в **/u** параметра. При использовании **/u** параметра, но не указывается **/p** параметр или аргумент пароля, **schtasks** запрашивает пароль.</br>**/U** и **/p** параметры допустимы только при использовании **/s**.|
|/?|Отображает справку.|

### <a name="remarks"></a>Примечания

**SchTasks.exe** завершает только экземпляры программы, запущенные с помощью назначенного задания. Чтобы остановить другими процессами, используйте TaskKill. Дополнительные сведения см. в разделе [Taskkill](taskkill.md).

### <a name="examples"></a>Примеры

### <a name="to-end-a-task-on-a-local-computer"></a>Чтобы завершить задание на локальном компьютере

Следующая команда останавливает экземпляр Notepad.exe, запущенную задачу Мой блокнот:
```
schtasks /end /tn "My Notepad"
```
В ответ **SchTasks.exe** останавливает экземпляр приложения Notepad.exe, что задача приступила и выводит следующее сообщение:
```
SUCCESS: The scheduled task "My Notepad" has been terminated successfully.
```

### <a name="to-end-a-task-on-a-remote-computer"></a>Чтобы завершить задание на удаленном компьютере

Следующая команда останавливает экземпляр Internet Explorer, которое было начато вызовом «InternetOn» на удаленном компьютере Srv01:
```
schtasks /end /tn InternetOn /s Svr01
```
В ответ **SchTasks.exe** останавливает экземпляр Internet Explorer, что задача приступила и выводит следующее сообщение:
```
SUCCESS: The scheduled task "InternetOn" has been terminated successfully.
```

## <a name="BKMK_delete"></a>Удаление задания

Удаляет запланированное задание.

### <a name="syntax"></a>Синтаксис

```
schtasks /delete /tn {<TaskName> | *} [/f] [/s <Computer> [/u [<Domain>\]<User> [/p <Password>]]]
```

### <a name="parameters"></a>Параметры

|Термин|Определение|
|----|----------|
|/tn {\<TaskName>| *}|Обязательный. Идентифицирует задание удаляется.</br>**\<Имя_задания >** — удаляет указанное задание.</br>**<\*>** — Удаляет все запланированные задачи на компьютере.|
|/f|Подавляет сообщение с подтверждением. Задача удаляется без предупреждения.|
|/s \<компьютер >|Указывает имя или IP-адрес удаленного компьютера (с или без символов обратной косой черты). По умолчанию используется локальный компьютер.|
|/u [\<домена >\]<User>|Выполняет эту команду с разрешениями указанной учетной записи. По умолчанию команда выполняется с разрешениями текущего пользователя на локальном компьютере.</br>Указанной учетной записи необходимо быть членом группы администраторов на удаленном компьютере. **/U** и **/p** параметры допустимы только при использовании **/s**.|
|/p \<пароль >|Указывает пароль для учетной записи пользователя, указанной в **/u** параметра. При использовании **/u** параметра, но не указывается **/p** параметр или аргумент пароля, **schtasks** запрашивает пароль.</br>**/U** и **/p** параметры допустимы только при использовании **/s**.|
|/?|Отображение справки в командной строке.|

### <a name="remarks"></a>Примечания

-   **Удалить** операция удаляет задачи из расписания. Не удалите программу, которую запускает задача и не прерывается.
-   **Удалить \***  команда удаляет все задачи, запланированные для компьютера, не только задачи, запланированные для текущего пользователя.

### <a name="examples"></a>Примеры

### <a name="to-delete-a-task-from-the-schedule-of-a-remote-computer"></a>Чтобы удалить задание из расписания удаленного компьютера

Следующая команда удаляет задачи «Запуск Mail» из расписания удаленного компьютера. Она использует **/s** параметр для указания удаленного компьютера.
```
schtasks /delete /tn "Start Mail" /s Svr16
```
В ответ **SchTasks.exe** отображает следующее сообщение с подтверждением. Чтобы удалить задание, нажмите клавишу Y **.** Для отмены команды, введите **n**:
```
WARNING: Are you sure you want to remove the task "Start Mail" (Y/N )? 
SUCCESS: The scheduled task "Start Mail" was successfully deleted.
```

### <a name="to-delete-all-tasks-scheduled-for-the-local-computer"></a>Чтобы удалить все задачи, запланированные для локального компьютера

Следующая команда удаляет все задачи из расписания локального компьютера, включая задания, назначенные другими пользователями. Она использует **/tn \***  параметр для представления всех задач на компьютере и **/f** параметр, чтобы отменить сообщение с подтверждением.
```
schtasks /delete /tn * /f
```
В ответ **SchTasks.exe** отображает следующие сообщения об успешном выполнении, указывающее, что только задачи запланировано, SecureScript, удаляется.

`SUCCESS: The scheduled task "SecureScript" was successfully deleted.`

## <a name="BKMK_query"></a>SCHTASKS запроса

Отображение задач, которые запланированы для запуска на компьютере.

### <a name="syntax"></a>Синтаксис

```
schtasks [/query] [/fo {TABLE | LIST | CSV}] [/nh] [/v] [/s <Computer> [/u [<Domain>\]<User> [/p <Password>]]]
```

### <a name="parameters"></a>Параметры

|Термин|Определение|
|----|----------|
|/ [Query]|Имя операции является необязательным. Введя **schtasks** без параметров выполняется запрос.|
|/FO {таблицы| СПИСОК| CSV}|Задает формат выходных данных. **Таблица** используется по умолчанию.|
|/NH|Опускает заголовки столбцов при отображении таблицы. Этот параметр действителен с **таблицы** и **CSV** форматы выходных данных.|
|/v|Добавляет дополнительные свойства задачи для отображения.</br>Запросы с помощью **/v** должен иметь формат **СПИСКА** или **CSV**.|
|/s \<компьютер >|Указывает имя или IP-адрес удаленного компьютера (с или без символов обратной косой черты). По умолчанию используется локальный компьютер.|
|/u [\<домена >\]<User>|Выполняет эту команду с разрешениями указанной учетной записи. По умолчанию команда выполняется с разрешениями текущего пользователя на локальном компьютере.</br>Указанной учетной записи необходимо быть членом группы администраторов на удаленном компьютере. **/U** и **/p** параметры допустимы только при использовании **/s**.|
|/p \<пароль >|Указывает пароль для учетной записи пользователя, указанной в **/u** параметра. При использовании **/u**, но не указывается **/p** или аргументе пароля **schtasks** запрашивает пароль.</br>**/U** и **/p** параметры допустимы только при использовании **/s**.|
|/?|Отображение справки в командной строке.|

### <a name="remarks"></a>Примечания

**SchTasks.exe** завершает только экземпляры программы, запущенные с помощью назначенного задания. Чтобы остановить другими процессами, используйте TaskKill. Дополнительные сведения см. в разделе [Taskkill](taskkill.md).

### <a name="examples"></a>Примеры

### <a name="to-display-the-scheduled-tasks-on-the-local-computer"></a>Для отображения запланированных заданий на локальном компьютере

Следующие команды выводят все задачи, запланированные для локального компьютера. Эти команды дают одинаковый результат и могут быть взаимозаменяемыми.
```
schtasks
schtasks /query
```
В ответ **SchTasks.exe** Отображение задач по умолчанию, в формате таблицы, как показано в следующей таблице:
```
TaskName Next Run Time Status
========================= ======================== ==============
Microsoft Outlook At logon time
SecureScript 14:42:00 PM , 2/4/2001

```

### <a name="to-display-advanced-properties-of-scheduled-tasks"></a>Чтобы отобразить дополнительные свойства запланированных задач

Следующая команда запрашивает вывод подробных сведений из задач на локальном компьютере. Она использует **/v** параметр, чтобы запросить подробные (детальные) отображения и **/fo СПИСКА** параметр, чтобы отформатировать отображение в виде списка для удобства чтения. Эта команда позволяет убедитесь, что для задачи, которую вы создали шаблон предполагаемого повторения.

**SCHTASKS/Query /fo СПИСКЕ /v**

В ответ **SchTasks.exe** отображает подробный список свойств для всех задач. Далее показан список задач для задания, для запуска в 4:00. в последнюю пятницу каждого месяца:
```
HostName: RESKIT01
TaskName: SecureScript
Next Run Time: 4:00:00 AM , 3/30/2001
Status: Not yet run
Logon mode: Interactive/Background
Last Run Time: Never
Last Result: 0
Creator: user01
Schedule: At 4:00 AM on the last Fri of every month, starting 3/24/2001
Task To Run: C:\WINDOWS\system32\notepad.exe
Start In: notepad.exe
Comment: N/A
Scheduled Task State: Enabled
Scheduled Type: Monthly
Modifier: Last FRIDAY
Start Time: 4:00:00 AM
Start Date: 3/24/2001
End Date: N/A
Days: FRIDAY
Months: JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
Run As User: RESKIT\user01
Delete Task If Not Rescheduled: Enabled
Stop Task If Runs X Hours and X Mins: 72:0
Repeat: Until Time: Disabled
Repeat: Duration: Disabled
Repeat: Stop If Still Running: Disabled
Idle: Start Time(For IDLE Scheduled Type): Disabled
Idle: Only Start If Idle for X Minutes: Disabled
Idle: If Not Idle Retry For X Minutes: Disabled
Idle: Stop Task If Idle State End: Disabled
Power Mgmt: No Start On Batteries: Disabled
Power Mgmt: Stop On Battery Mode: Disabled

```

### <a name="to-log-tasks-scheduled-for-a-remote-computer"></a>Для входа задачи, запланированные на удаленном компьютере

Следующая команда запрашивает список задач, запланированных на удаленном компьютере и добавляет задачи к CSV-файл журнала на локальном компьютере. Этот формат команды можно использовать для сбора и отслеживания задач, которые запланированы для нескольких компьютеров.

Команда использует **/s** параметр для указания удаленного компьютера, Reskit16, **/fo** параметр для указания формата и **/nh** параметр, чтобы отменить столбец заголовки. **>>** Добавлять символ перенаправляет выходные данные в журнал заданий p0102.csv на локальном компьютере Srv01. Поскольку команда выполняется на удаленном компьютере, путь к локальному компьютеру должно быть полным.
```
schtasks /query /s Reskit16 /fo csv /nh >> \\svr01\data\tasklogs\p0102.csv
```
В ответ **SchTasks.exe** добавляет задачи, запланированные для компьютера Reskit16 файл p0102.csv на локальном компьютере Srv01.

#### <a name="additional-references"></a>Дополнительная справка

[Ключ синтаксиса командной строки](command-line-syntax-key.md)
