---
title: forfiles
description: Справочный раздел по команде forfiles, который выбирает и выполняет команду для файла или набора файлов.
ms.prod: windows-server
ms.technology: manage-windows-commands
ms.topic: article
ms.assetid: 43f6b004-446d-4fdd-91c5-5653613524a4
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 05/20/2020
ms.openlocfilehash: 96ef7d016bd13961a4814ba4cd09095aed4f0e97
ms.sourcegitcommit: 29f7a4811b4d36d60b8b7c55ce57d4ee7d52e263
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/20/2020
ms.locfileid: "83716849"
---
# <a name="forfiles"></a>forfiles

Выбирает и выполняет команду для файла или набора файлов. Эта команда чаще всего используется в пакетных файлах.

## <a name="syntax"></a>Синтаксис

```
forfiles [/P pathname] [/M searchmask] [/S] [/C command] [/D [+ | -] [{<date> | <days>}]]
```

### <a name="parameters"></a>Параметры

| Параметр | Описание |
| --------- | ----------- |
| /P`<pathname>` | Указывает путь, с которого следует начать поиск. По умолчанию поиск начинается в текущем рабочем каталоге. |
| /M`<searchmask>` | Выполняет поиск в файлах в соответствии с заданной маской поиска. По умолчанию сеарчмаск имеет значение `*` . |
| /S | Указывает команде **forfiles** выполнить рекурсивный поиск в подкаталогах. |
| Ключей`<command>` | Выполняет указанную команду для каждого файла. Строки команд должны быть заключены в двойные кавычки. Команда по умолчанию — `"cmd /c echo @file"` . |
| /D`[{+\|-}][{<date> | <days>}]` | Выбирает файлы с датой последнего изменения в течение заданного промежутка времени:<ul><li>Выбирает файлы с датой последнего изменения позже или равным () **+** или ранее или равной ( **-** ) указанной даты, где *Дата* соответствует формату mm/дд/гггг.</li><li>Выбирает файлы с датой последнего изменения позже или равным ( **+** ) текущей датой плюс указанное число дней, а также до или менее ( **-** ) текущей датой минус указанное число дней.</li><li>Допустимые значения *дней* включают любое число в диапазоне от 0 до 32768. Если знак не указан, **+** по умолчанию используется.</li></ul> |
| /? | Отображает текст справки в окне cmd. |

#### <a name="remarks"></a>Комментарии

- `forfiles /S`Команда аналогична `dir /S` .

- В командной строке можно использовать следующие переменные, как указано в параметре командной строки **/c** :

    | Переменная | Описание |
    | -------- | ----------- |
    | @FILE | Имя файла. |
    | @FNAME | Имя файла без расширения. |
    | @EXT | Расширение имени файла. |
    | @PATH | Полный путь к файлу. |
    | @RELPATH | Относительный путь к файлу. |
    | @ISDIR | Возвращает значение TRUE, если тип файла является каталогом. В противном случае эта переменная принимает значение FALSE. |
    | @FSIZE | Размер файла в байтах. |
    | @FDATE | Метка даты последнего изменения файла. |
    | @FTIME | Отметка времени последнего изменения файла. |

- Команда **forfiles** позволяет выполнять команду или передавать аргументы в несколько файлов. Например, можно выполнить команду **Type** для всех файлов в дереве с расширением txt. Или можно выполнить каждый пакетный файл (*. bat) на диске C с именем файла MyInput. txt в качестве первого аргумента.

- Эта команда может:

    - Выберите файлы в абсолютную или относительную дату с помощью параметра **/d** .

    - Создайте архивное дерево файлов с помощью переменных, таких как @FSIZE и @FDATE .

    - С помощью переменной можно отличать файлы от каталогов @ISDIR .

    - Включите специальные символы в командную строку, используя шестнадцатеричный код для символа в формате 0x*чч* (например, 0x09 для вкладки).

- Эта команда работает путем применения `recurse subdirectories` флага к средствам, предназначенным для обработки только одного файла.

### <a name="examples"></a>Примеры

Чтобы вывести список всех пакетных файлов на диске C, введите:

```
forfiles /P c:\ /S /M *.bat /C "cmd /c echo @file is a batch file"
```

Чтобы вывести список всех каталогов на диске C, введите:

```
forfiles /P c:\ /S /M *.* /C "cmd /c if @isdir==TRUE echo @file is a directory"
```

Чтобы получить список всех файлов в текущем каталоге, которые устарели по крайней мере один год, введите:

```
forfiles /S /M *.* /D -365 /C "cmd /c echo @file is at least one year old."
```

Чтобы отобразить текстовый *файл* , устаревший для каждого из файлов в текущем каталоге, которые старше 1 января 2007, введите:

```
forfiles /S /M *.* /D -01/01/2007 /C "cmd /c echo @file is outdated."
```

Чтобы вывести список расширений имен файлов в текущем каталоге в формате столбца и добавить вкладку перед расширением, введите:

```
forfiles /S /M *.* /C "cmd /c echo The extension of @file is 0x09@ext"
```

## <a name="additional-references"></a>Дополнительные ссылки

- [Условные обозначения синтаксиса команд командной строки](command-line-syntax-key.md)
