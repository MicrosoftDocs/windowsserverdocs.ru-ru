---
title: relog
description: Узнайте, как извлечь данные счетчиков производительности из файлов журналов каутнер производительности.
ms.custom: na
ms.prod: windows-server
ms.reviewer: na
ms.suite: na
ms.technology: manage-windows-commands
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: 7480f6c0-9953-4d70-9b1c-b27e09d8db13
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 07/11/2018
ms.openlocfilehash: daedd85f1557c191a690e7eb750559cfd268d3a0
ms.sourcegitcommit: 6aff3d88ff22ea141a6ea6572a5ad8dd6321f199
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/27/2019
ms.locfileid: "71371622"
---
# <a name="relog"></a>relog

>Область применения. Windows Server (половина ежегодного канала), Windows Server 2016, Windows Server 2012 R2, Windows Server 2012

Извлекает счетчики производительности из журналов счетчиков производительности в другие форматы, такие как Text-TSV (для текста с разделителями-символами табуляции), Text-CSV (для текста с разделителями-запятыми), binary-BIN или SQL.   

## <a name="syntax"></a>Синтаксис  
```  
relog [<FileName> [<FileName> ...]] [/a] [/c <path> [<path> ...]] [/cf <FileName>] [/f  {bin|csv|tsv|SQL}] [/t <Value>] [/o {OutputFile|DSN!CounterLog}] [/b <M/D/YYYY> [[<HH>:] <MM>:] <SS>] [/e <M/D/YYYY> [[<HH>:] <MM>:] <SS>] [/config {<FileName>|i}] [/q]  
```  

### <a name="parameters"></a>Параметры  

|                                         Параметр                                          |                                                                                                                                                                  Описание                                                                                                                                                                   |
|--------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|                                *Имя_файла* [*имя_файла...* ]                                 |                                                                                                                      Указывает путь к существующему журналу счетчиков производительности. Можно указать несколько входных файлов.                                                                                                                      |
|                                             -a                                             |                                                                                                          Добавляет выходной файл вместо перезаписи. Этот параметр не применяется к формату SQL, где значение по умолчанию всегда добавляется.                                                                                                           |
|                                   -c *путь* [*путь...* ]                                   |                                                       Указывает путь к журналу счетчика производительности. Чтобы указать несколько путей к счетчику, разделите их пробелами и заключите пути к счетчику в кавычки (например, **"** <em>Counterpath1</em> <em>Counterpath2</em> **"** ).                                                       |
|                                       -CF *имя файла*                                       |                                            Задает путь к текстовому файлу, в котором перечислены счетчики производительности, включаемые в файл Relog. Используйте этот параметр, чтобы вывести список путей счетчиков во входном файле, по одному на строку. Значение по умолчанию — все счетчики в исходном файле журнала регистрируются снова.                                            |
|                                  -f {bin @ no__t-0 CSV @ no__t-1tsv @ no__t-2SQL}                                  |                                       Указывает путь к формату выходного файла. Форматом по умолчанию является **bin**. Для базы данных SQL выходной файл указывает *имя DSN! Каунтерлог*. Расположение базы данных можно указать с помощью диспетчера ODBC для настройки имени DSN (имя системы базы данных).                                        |
|                                         -t *значение*                                         |                                                                                                           Задает интервалы выборки в "*N*" записях. Включает каждые n точек данных в файле Relog. Значение по умолчанию — каждая точка данных.                                                                                                           |
| -o {*выходной_файл* \| *"SQL: DSN! Counter_Log*}, где DSN — это ОДМК DSN, определенный в системе. |                                                   Указывает путь к выходному файлу или базе данных SQL, в которую будут записаны счетчики. <br>Примечание. Для 64-разрядных и 32-разрядных версий программы Relog. exe необходимо определить имя DSN в источнике данных ODBC (64-bit и 32-bit соответственно).                                                   |
|                          -b \<*M*/*D*/*yyyy*> [[*чч*:]*мм*:]*СС*                           |                                                                          Указывает время начала копирования первой записи из входного файла. Дата и время должны относиться к определенному формату <em>M</em> **/** <em>D</em> **/** <em>иииихх</em> **:** <em>mm</em> **:** <em>SS</em>.                                                                          |
|                          -e \<*M*/*D*/*yyyy*> [[*чч*:]*мм*:]*СС*                           |                                                                           Задает время окончания копирования последней записи из входного файла. Дата и время должны относиться к определенному формату <em>M</em> **/** <em>D</em> **/** <em>иииихх</em> **:** <em>mm</em> **:** <em>SS</em>.                                                                            |
|                                -config {*имя_файла* \| *i*}                                 | Указывает путь к файлу параметров, содержащему параметры командной строки. Используйте параметр *-i* в файле конфигурации в качестве заполнителя для списка входных файлов, которые можно поместить в командную строку. Однако в командной строке не нужно использовать *i*. Можно также использовать подстановочные знаки, например @no__t -0. BLG, чтобы указать несколько имен входных файлов. |
|                                             -q                                             |                                                                                                                          Отображает счетчики производительности и временные диапазоны файлов журналов, указанных во входном файле.                                                                                                                           |
|                                             -y                                             |                                                                                                                                            Обходит запрос, отвечая на все вопросы, ответив на "Да".                                                                                                                                             |
|                                             /?                                             |                                                                                                                                                      Отображение справки в командной строке.                                                                                                                                                      |

## <a name="remarks"></a>Примечания  
Формат пути счетчика:  
- Общий формат для путей счетчиков выглядит следующим образом: [\\ @ no__t-1computer >] \\ @ no__t-3Object > [\<Parent > \\ < экземпляра # Index >] \\ @ no__t-7Counter >], где родительский объект, экземпляр, индекс и Счетчик компоненты формата могут содержать либо допустимое имя, либо подстановочный знак. Компоненты "компьютер", "родительский объект", "экземпляр" и "индекс" не нужны для всех счетчиков.  
- Вы определяете пути к счетчикам, которые будут использоваться на основе самого счетчика. Например, объект LogicalDisk имеет экземпляр <Index>, поэтому необходимо указать < #index > или подстановочный знак. Поэтому можно использовать следующий формат: **\ логический диск (\* @ no__t-2 @ no__t-3 @ no__t-4 @ no__t-5) \\ @ no__t-7***  
- В сравнении для объекта Process не требуется экземпляр \<Index >. Поэтому можно использовать следующий формат: **\Process (\*) процесс \ид**  
- Если в родительском имени указан подстановочный знак, будут возвращены все экземпляры указанного объекта, соответствующие заданным полям экземпляра и счетчика.  
- Если в имени экземпляра указан подстановочный знак, будут возвращаться все экземпляры указанного объекта и родительского объекта, если все имена экземпляров, соответствующие указанному индексу, соответствуют подстановочному знаку.  
- Если в имени счетчика указан символ-шаблон, возвращаются все счетчики указанного объекта.  
- Частичное совпадение пути счетчика (например, Pro *) не поддерживается.  

Файлы счетчиков:  
-   Файлы счетчиков представляют собой текстовые файлы, в которых перечислены один или несколько счетчиков производительности в существующем журнале. Скопируйте полное имя счетчика из журнала или файла **/q** в формат \<computer > \\ @ No__t-3Object > \\ @ No__t-5Instance > \\ @ No__t-7Counter >. Перечислите один путь счетчика в каждой строке.  

Копирование счетчиков:  
-   При выполнении **Relog** копирует указанные счетчики из каждой записи во входном файле, преобразуя формат при необходимости. В файле счетчика допускаются пути с подстановочными знаками.  
Сохранение подмножеств входных файлов:  
-   Используйте параметр **/t** , чтобы указать, что входные файлы вставляются в выходные файлы с интервалами каждой записи @no__t-го счетчика. По умолчанию данные переносятся из каждой записи в журнал.  
Использование параметров **/b** и **/e** с файлами журналов  
-   Можно указать, что выходные журналы содержат записи перед началом (то есть **/b**), чтобы предоставить данные для счетчиков, требующих вычислительных значений отформатированного значения. Выходной файл будет содержать последние записи из входных файлов с отметками времени, меньшими, чем параметр **/e** (т. е. время окончания).  
Использование параметра **/config** :  
-   Содержимое файла параметров, используемого с параметром **/config** , должно иметь следующий формат:  
    -   \<CommandOption > \\ @ no__t-2Value >, где \<CommandOption > является параметром командной строки, а \<Value > задает его значение.

Дополнительные сведения о включении программы **Relog** в скрипты инструментарий управления Windows (WMI) (WMI) см. в разделе «Создание сценариев инструментария WMI» на [веб-сайте Microsoft Windows Resource Kit](https://go.microsoft.com/fwlink/?LinkId=4665).  

## <a name="BKMK_Examples"></a>Примеров  
Для повторной выборки существующих журналов трассировки с фиксированными интервалами, равными 30, следует перечислить пути счетчиков, выходные файлы и форматы:  
```  
relog c:\perflogs\daily_trace_log.blg /cf counter_file.txt /o c:\perflogs\reduced_log.csv /t 30 /f csv  
```  
Чтобы повторно выполнить выборку существующих журналов трассировки с фиксированными интервалами, равными 30, перечислите пути счетчиков и выходной файл:  
```  
relog c:\perflogs\daily_trace_log.blg /cf counter_file.txt /o c:\perflogs\reduced_log.blg /t 30  
```
Чтобы выполнить повторную выборку существующих журналов трассировки в базе данных, выполните следующие действия.
```
relog "c:\perflogs\daily_trace_log.blg" -f sql -o "SQL:sql2016x64odbc!counter_log"
```

## <a name="additional-references"></a>Дополнительная справка  
-   [Условные обозначения синтаксиса команд командной строки](command-line-syntax-key.md)  
