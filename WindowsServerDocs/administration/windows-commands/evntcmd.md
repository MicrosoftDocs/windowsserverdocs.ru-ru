---
title: Evntcmd
description: Раздел Windows команды для ****-
ms.prod: windows-server
ms.technology: manage-windows-commands
ms.topic: article
ms.assetid: c1aabb74-76e7-4304-95a6-50ad87e92fd9
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 10/16/2017
ms.openlocfilehash: 86e4290543ffcc0da1c768a661fd88a7638b1146
ms.sourcegitcommit: b00d7c8968c4adc8f699dbee694afe6ed36bc9de
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/08/2020
ms.locfileid: "80845017"
---
# <a name="evntcmd"></a>Evntcmd

>Область применения: Windows Server (Semi-Annual Channel), Windows Server 2016, Windows Server 2012 R2, Windows Server 2012

Настраивает преобразование событий в ловушки, назначения ловушек или и то, и другое в зависимости от информации в файле конфигурации.   
## <a name="syntax"></a>Синтаксис  
```  
evntcmd [/s <computerName>] [/v <verbosityLevel>] [/n] <FileName>  
```  
#### <a name="parameters"></a>Параметры  

|      Параметр      |                                                                                                                                                            Описание                                                                                                                                                             |
|---------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|  /s <computerName>  |                                                         Указывает имя компьютера, на котором требуется настроить перевод событий в ловушки, назначения ловушек или и то, и другое. Если компьютер не указан, Конфигурация выполняется на локальном компьютере.                                                          |
| /v <verbosityLevel> | Указывает, какие типы сообщений о состоянии отображаются при настройке ловушек и назначений ловушек. Этот параметр должен быть целым числом от 0 до 10. При указании 10 отображаются все типы сообщений, включая сообщения трассировки и предупреждения о том, была ли конфигурация ловушки успешной. Если указано значение 0, сообщения не отображаются. |
|         /n          |                                                                                                           Указывает, что службу SNMP не следует перезапускать, если этот компьютер получает изменения конфигурации ловушек.                                                                                                            |
|     <FileName>      |                                                                                     Указывает имя файла конфигурации, который содержит сведения о переводе событий в ловушки и назначения ловушек, которые необходимо настроить.                                                                                     |
|         /?          |                                                                                                                                                Отображает справку в командной строке.                                                                                                                                                |

## <a name="remarks"></a>Примечания  
- Если вы хотите настроить ловушки, но не назначения ловушек, можно создать допустимый файл конфигурации, используя событие для перехвата ловушки, которое является графической программой. Если служба SNMP установлена, вы можете запустить событие в ловушке транслятора, введя **evntwin** в командной строке. Определив нужные ловушки, нажмите кнопку Экспорт, чтобы создать файл, подходящий для использования с **evntcmd**. Вы можете использовать событие для ловушки, чтобы легко создать файл конфигурации, а затем использовать файл конфигурации с командой **evntcmd** в командной строке для быстрой настройки ловушек на нескольких компьютерах.  
- Для настройки ловушки используется следующий синтаксис:  
  **#pragma add**<em><EventLogFile> <EventSource> <EventID> [<Count> [<Period>]]</em>  
  -   Текстовая **#pragma** должна находиться в начале каждой записи в файле.  
  -   Параметр **Add** указывает, что необходимо добавить событие в конфигурацию ловушки.  
  -   Параметры *евентлогфиле*, *EventSource*и *EventID* являются обязательными. Параметр *евентлогфиле* указывает файл, в который записывается событие. Параметр *EventSource* Указывает приложение, которое создает событие. Параметр *EventID* указывает уникальный номер, определяющий каждое событие. Чтобы узнать, какие значения соответствуют определенным событиям, запустите трансляцию событий в ловушки, введя **evntwin** в командной строке. Щелкните **Настраиваемый**и нажмите кнопку **изменить**. В разделе **источники событий**просмотрите папки, пока не обнаружите событие, которое нужно настроить, щелкните его и нажмите кнопку **Добавить**. Сведения об источнике события, файле журнала событий и ИДЕНТИФИКАТОРе события отображаются в разделе идентификатор **источника, журнала**и **ловушки**соответственно.  
  -   Параметр *Count* является необязательным и указывает, сколько раз должно произойти событие, прежде чем будет отправлено сообщение ловушки. Если параметр *Count* не используется, сообщение ловушки отправляется после наступления события.  
  -   Параметр *period* является необязательным, но он требует использования параметра *Count* . Параметр *period указывает период* времени (в секундах), в течение которого событие должно произойти указанное в параметре count число раз, прежде чем будет отправлено сообщение ловушки. Если параметр *period* не используется, сообщение ловушки отправляется после наступления события числом, указанным в параметре *Count* , независимо от того, сколько времени прошло между повторениями.  
- Для удаления ловушки используется следующий синтаксис:  
  **#pragma delete**<em><EventLogFile> <EventSource> <EventID></em>  
  -   Текстовая **#pragma** должна находиться в начале каждой записи в файле.  
  -   Параметр *Delete* указывает, что необходимо удалить событие в конфигурацию ловушек.  
  -   Параметры *евентлогфиле*, *EventSource*и *EventID* являются обязательными. Параметр *евентлогфиле* указывает журнал, в который записывается событие. Параметр *EventSource* Указывает приложение, которое создает событие. Параметр *EventID* указывает уникальный номер, определяющий каждое событие.  
- Для настройки назначения ловушки используется следующий синтаксис:  
  **#pragma add_TRAP_DEST**<em><CommunityName> <HostID></em>  
  -   Текстовая **#pragma** должна находиться в начале каждой записи в файле.  
  -   Параметр **add_TRAP_DEST** указывает, что необходимо отправлять сообщения ловушек на указанный узел в сообществе.  
  -   Параметр *коммунитинаме* указывает имя сообщества, в котором отправляются сообщения о ловушках.  
  -   Параметр *HostID* указывает имя или IP-адрес узла, на который должны отправляться сообщения ловушки.  
- Для удаления назначения ловушки используется следующий синтаксис:  
  **#pragma delete_TRAP_DEST**<em><CommunityName> <HostID></em>  
  - Текстовая **#pragma** должна находиться в начале каждой записи в файле.  
  - Параметр *delete_TRAP_DEST* указывает, что не нужно отправлять сообщения о ловушках на указанный узел в сообществе.  
  - Параметр *коммунитинаме* указывает имя сообщества, в котором отправляются сообщения о ловушках.  
  - Параметр *HostID* указывает имя или IP-адрес узла, на котором не нужно отправлять сообщения о ловушках.  
    ## <a name="examples"></a><a name=BKMK_Examples></a>Примеров  
    В следующих примерах показаны записи в файле конфигурации для команды **evntcmd** . Они не предназначены для ввода в командной строке.  
    Чтобы отправить сообщение ловушки при перезапуске службы журнала событий, введите:  
    ```  
    #pragma add System Eventlog 2147489653  
    ```  
    Чтобы отправить сообщение ловушки, если служба журнала событий перезапускается дважды в течение трех минут, введите:  
    ```  
    #pragma add System Eventlog 2147489653 2 180  
    ```  
    Чтобы отключить отправку сообщения о ловушке при перезапуске службы журнала событий, введите:  
    ```  
    #pragma delete System Eventlog 2147489653  
    ```  
    Чтобы отправить сообщения о ловушках из сообщества с именем Public на узел с IP-адресом 192.168.100.100, введите:  
    ```  
    #pragma add_TRAP_DEST public 192.168.100.100  
    ```  
    Чтобы отправить сообщения о ловушках в сообществе с именем Private на узел с именем host1, введите:  
    ```  
    #pragma add_TRAP_DEST private Host1  
    ```  
    Чтобы запретить отправку сообщений о ловушках в сообществе с именем Private на тот же компьютер, на котором настраивается назначение ловушек, введите:  
    ```  
    #pragma delete_TRAP_DEST private localhost  
    ```  
    ## <a name="additional-references"></a>Дополнительные материалы  
- - [Условные обозначения синтаксиса команд командной строки](command-line-syntax-key.md)  
