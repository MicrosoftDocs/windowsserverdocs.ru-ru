---
title: Набор подкоманд — сервер
description: Справочный раздел по набору подкоманд set-Server, в котором настроены параметры для сервера служб развертывания Windows.
ms.prod: windows-server
ms.technology: manage-windows-commands
ms.topic: article
ms.assetid: da55c29d-a94a-4d73-877b-af480f906ca0
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 10/16/2017
ms.openlocfilehash: db21415e5545cd8a501360ae6afde6d30f879dc0
ms.sourcegitcommit: ab64dc83fca28039416c26226815502d0193500c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/01/2020
ms.locfileid: "82721692"
---
# <a name="subcommand-set-server"></a>Подкоманда: Set-Server

> Область применения: Windows Server (половина ежегодного канала), Windows Server 2019, Windows Server 2016, Windows Server 2012 R2, Windows Server 2012

Настраивает параметры для сервера служб развертывания Windows.

## <a name="syntax"></a>Синтаксис
```
wdsutil [Options] /Set-Server [/Server:<Server name>]
    [/Authorize:{Yes | No}]
    [/RogueDetection:{Yes | No}]
    [/AnswerClients:{All | Known | None}]
    [/Responsedelay:<time in seconds>]
    [/AllowN12forNewClients:{Yes | No}]
    [/ArchitectureDiscovery:{Yes | No}]
    [/resetBootProgram:{Yes | No}]
    [/DefaultX86X64Imagetype:{x86 | x64 | Both}]
    [/UseDhcpPorts:{Yes | No}]
    [/DhcpOption60:{Yes | No}]
    [/RpcPort:<Port number>]
    [/PxepromptPolicy 
        [/Known:{OptIn | Noprompt | OptOut}]
        [/New:{OptIn | Noprompt | OptOut}] 
    [/BootProgram:<Relative path>]
         /Architecture:{x86 | ia64 | x64}
    [/N12BootProgram:<Relative path>]
         /Architecture:{x86 | ia64 | x64}
    [/BootImage:<Relative path>]
         /Architecture:{x86 | ia64 | x64}
    [/PreferredDC:<DC Name>]
    [/PreferredGC:<GC Name>]
    [/PrestageUsingMAC:{Yes | No}]
    [/NewMachineNamingPolicy:<Policy>]
    [/NewMachineOU]
         [/type:{Serverdomain | Userdomain | UserOU | Custom}]
         [/OU:<Domain name of OU>]
    [/DomainSearchOrder:{GCOnly | DCFirst}]
    [/NewMachineDomainJoin:{Yes | No}]
    [/OSCMenuName:<Name>]
    [/WdsClientLogging]
         [/Enabled:{Yes | No}]
         [/LoggingLevel:{None | Errors | Warnings | Info}]
    [/WdsUnattend]
         [/Policy:{Enabled | Disabled}]
         [/CommandlinePrecedence:{Yes | No}]
         [/File:<path>]
             /Architecture:{x86 | ia64 | x64}
    [/AutoaddPolicy]
         [/Policy:{AdminApproval | Disabled}]
         [/PollInterval:{time in seconds}]
         [/MaxRetry:{Retries}]
         [/Message:<Message>]
         [/RetentionPeriod]
             [/Approved:<time in days>]
             [/Others:<time in days>]
    [/AutoaddSettings]
         /Architecture:{x86 | ia64 | x64}
         [/BootProgram:<Relative path>]
         [/ReferralServer:<Server name>
         [/WdsClientUnattend:<Relative path>]
         [/BootImage:<Relative path>]
         [/User:<Owner>]
         [/JoinRights:{JoinOnly | Full}]
         [/JoinDomain:{Yes | No}]
    [/BindPolicy]
         [/Policy:{Include | Exclude}]
         [/add]
              /address:<IP or MAC address>
              /addresstype:{IP | MAC}
         [/remove]
              /address:<IP or MAC address>
              /addresstype:{IP | MAC}
    [/RefreshPeriod:<time in seconds>]
    [/BannedGuidPolicy]
         [/add]
              /Guid:<GUID>
         [/remove]
             /Guid:<GUID>
    [/BcdRefreshPolicy]
         [/Enabled:{Yes | No}]
         [/RefreshPeriod:<time in minutes>]
    [/Transport]
         [/ObtainIpv4From:{Dhcp | Range}]
             [/start:<start IP address>]
             [/End:<End IP address>]
         [/ObtainIpv6From:Range]
             [/start:<start IP address>]
             [/End:<End IP address>]
         [/startPort:<start Port>
             [/EndPort:<start Port>
        [/Profile:{10Mbps | 100Mbps | 1Gbps | Custom}]
        [/MulticastSessionPolicy]
             [/Policy:{None | AutoDisconnect | Multistream}]
                 [/Threshold:<Speed in KBps>]
                 [/StreamCount:{2 | 3}]
                 [/Fallback:{Yes | No}]    
        [/forceNative]
```
### <a name="parameters"></a>Параметры
|Параметр|Описание|
|-------|--------|
|[/Server:<Server name>]|Указывает имя сервера. Это может быть либо NetBIOS-имя, либо полное доменное имя (FQDN). Если имя сервера не указано, будет использоваться локальный сервер.|
|[/Authorize: {Yes &#124; No}]|Указывает, следует ли авторизовать этот сервер в протоколе DHCP.|
|[/Рогуедетектион: {Yes &#124; No}]|Включает или отключает обнаружение несанкционированных DHCP-серверов.|
|[/Ансверклиентс: {все &#124; известные &#124; нет}]|Указывает, какие клиенты будут отвечать на этот сервер. Если задать для этого параметра значение **известно**, компьютер должен быть предварительно подготовлен в доменных службах Active directory (AD DS), прежде чем будет дан ответ серверу служб развертывания Windows.|
|[/Респонседелай:<time in seconds>]|Количество времени, в течение которого сервер будет ожидать ответа от загружаемого клиента. Этот параметр не применяется к предварительно подготовленным компьютерам.|
|[/AllowN12forNewClients: {Yes &#124; No}]|для Windows Server 2008 указывает, что неизвестным клиентам не придется нажимать клавишу F12 для запуска сетевой загрузки. Известные клиенты получат программу загрузки, заданную для компьютера, или, если не указано, программу загрузки, заданную для архитектуры.<p>для Windows Server 2008 R2 этот параметр был заменен следующей командой: WDSUTIL/Сет-сервер/Пксепромптполици/New: Prompt|
|[/Арчитектуредисковери: {Yes &#124; No}]|Включает или отключает обнаружение архитектуры. Это упрощает обнаружение клиентов, основанных на процессорах x64 и не передающих их архитектуру правильно.|
|[/Ресетбутпрограм: {Yes &#124; No}]|Определяет, будет ли удаляться загрузочный путь для клиента, который только что загружался без нажатия клавиши F12.|
|[/DefaultX86X64Imagetype: {x86 &#124; x64 &#124; Both}]|Определяет, какие загрузочные образы будут показаны для клиентов на базе x64.|
|[/Уседхкппортс: {Yes &#124; No}]|Указывает, должен ли PXE-сервер пытаться выполнить привязку к порту DHCP TCP 67. Если служба DHCP и службы развертывания Windows работают на одном компьютере, следует установить для этого параметра значение **нет** , чтобы сервер DHCP использовал порт, и присвоить параметру **/DhcpOption60** значение **Yes**. Значение по умолчанию для этого параметра — **Да**.|
|[/DhcpOption60: {Yes &#124; No}]|Указывает, следует ли настроить параметр DHCP 60 для поддержки PXE. Если служба DHCP и службы развертывания Windows работают на одном сервере, установите для этого параметра значение **Да** и установите для параметра **/уседхкппортс** значение **нет**. Значением по умолчанию для этого параметра является **No**.|
|[/Рпкпорт:<Port number>]|Указывает номер TCP-порта, используемого для обслуживания запросов клиентов.|
|[/Пксепромптполици]|Настройка того, как известные (предварительно подготовленные) и новые клиенты инициируют загрузку PXE. Этот параметр применяется только к Windows Server 2008 R2. Параметры задаются с помощью следующих параметров.<p>-[/Кновн: {OptIn&#124;OptOut&#124;неprompt}] — задает политику для предварительно подготовленных клиентов.<br />-[/New: {OptIn&#124;OptOut&#124;Prompt}] — задает политику для новых клиентов.<p>**OptIn** означает, что клиенту нужно нажать клавишу, чтобы загрузить PXE, в противном случае будет возвращаться к следующему загрузочному устройству.<p>Параметр "не **запрашивать** " означает, что клиент всегда будет загружать PXE.<p>**OptOut** означает, что клиент будет загружать PXE, если не нажата клавиша ESC.|
|[/Бутпрограм:<Relative path>]/арчитектуре: {x86 &#124; ia64 &#124; x64}|Указывает относительный путь к программе загрузки в папке remoteInstall (например, **boot\x86\pxeboot.n12**) и задает архитектуру программы загрузки.|
|[/N12BootProgram:<Relative path>]/арчитектуре: {x86 &#124; ia64 &#124; x64}|Указывает относительный путь к программе загрузки, которая не требует нажатия клавиши F12 (например, **boot\x86\pxeboot.n12**), и определяет архитектуру программы загрузки.|
|[/Бутимаже:<Relative path>]/арчитектуре: {x86 &#124; ia64 &#124; x64}|Указывает относительный путь к загрузочному образу, который должны получить клиенты загрузки, и указывает архитектуру загрузочного образа. Это можно указать для каждой архитектуры.|
|[/Преферреддк:<DC Name>]|Указывает имя контроллера домена, который должны использовать службы развертывания Windows. Это может быть либо NetBIOS-имя, либо FQDN.|
|[/Преферредгк:<GC Name>]|Указывает имя сервера глобального каталога, который должны использовать службы развертывания Windows. Это может быть либо NetBIOS-имя, либо FQDN.|
|[/Престажеусингмак: {Yes &#124; No}]|Указывает, должны ли службы развертывания Windows при создании учетных записей компьютеров в AD DS использовать MAC-адрес вместо GUID/UUID для обнаружения компьютера.|
|[/Невмачиненамингполици:<Policy>]|Указывает формат, используемый при создании имен компьютеров для клиентов. Для получения сведений о формате, который будет <policy>использоваться для, щелкните правой кнопкой мыши сервер в оснастке MMC, выберите пункт **свойства**и перейдите на вкладку **службы каталогов** . Например, **/невмачиненамингполици:% 61Username% #**.|
|[/Невмачинеау]|Используется для указания расположения в AD DS, где будут создаваться учетные записи клиентских компьютеров. Расположение указывается с помощью следующих параметров.<p>-[/Type: Сервердомаин &#124; Доменпользователя &#124; Усерау &#124; Custom] указывает тип расположения. **Сервердомаин** создает учетные записи в том же домене, что и сервер служб развертывания Windows. **Доменпользователя** создает учетные записи в том же домене, что и пользователь, выполняющий установку. **Усерау** создает учетные записи в подразделении пользователя, выполняющего установку. **Пользовательская** позволяет указать пользовательское расположение (необходимо также указать значение для **/OU** с помощью этого параметра).<br />-[/OU:<Domain name of OU>] — Если для параметра **/Type** задано значение **Custom** , в этом параметре указывается подразделение, в котором должны быть созданы учетные записи компьютеров.|
|[/Домаинсеарчордер: {Гконли &#124; Дкфирст}]|Указывает политику поиска учетных записей компьютеров в AD DS (глобальный каталог или контроллер домена).|
|[/Невмачинедомаинжоин: {Yes &#124; No}]|Указывает, должен ли компьютер, не предварительно подготовленный в AD DS, быть присоединен к домену во время установки. Значение по умолчанию — **Да**.|
|[/Вдсклиентлоггинг]|Задает уровень ведения журнала для сервера.<p>-[/Enabled: {Yes &#124; No}] — включает или отключает ведение журнала действий клиента служб развертывания Windows.<br />-[/Логгинглевел: {None &#124; Errors &#124; Warnings &#124; info} — задает уровень ведения журнала. **Значение None** эквивалентно отключению ведения журнала. **Ошибки** — это самый низкий уровень ведения журнала, который указывает, что будут регистрироваться только ошибки. **Предупреждения** содержат предупреждения и ошибки. **Info** — это самый высокий уровень ведения журнала, включая ошибки, предупреждения и информационные события.|
|[/Вдсунаттенд]|Эти параметры управляют поведением автоматической установки клиента служб развертывания Windows. Параметры задаются с помощью следующих параметров.<p>-[/Полици: {Enabled &#124; Disabled}] — указывает, используется ли автоматическая установка.<br />-[/Коммандлинепрецеденце: {Да &#124; No}] — указывает, будет ли при установке клиента использоваться файл Autounattend. XML (если он имеется на клиенте) или файл автоматической установки, который был передан непосредственно клиенту служб развертывания Windows с параметром/unattend. Значение по умолчанию — **нет**.<br />-[/File:<Relative path> /арчитектуре: {x86 &#124; ia64 &#124; x64}] — указывает имя файла, путь и архитектуру файла автоматической установки.|
|[/Аутоаддполици]|Эти параметры управляют политикой автоматического добавления. Параметры определяются с помощью следующих параметров.<p>-[/Полици: {Админаппровал &#124; Disabled}]- **админаппрове** приводит к добавлению всех неизвестных компьютеров в очередь ожидания, где администратор может просмотреть список компьютеров и утвердить или отклонить каждый запрос по мере необходимости. **Отключено** указывает, что при попытке загрузки неизвестного компьютера на сервер никакие дополнительные действия не выполняются.<br />-[/Поллинтервал: {время в секундах}] — указывает интервал (в секундах), в течение которого программа сетевой загрузки должна опрашивать сервер служб развертывания Windows.<br />-[/Максретри: <Number>] — указывает, сколько раз программа сетевой загрузки должна опрашивать сервер служб развертывания Windows. Это значение вместе с **/поллинтервал**определяет, как долго программа сетевой загрузки будет ждать, пока администратор утвердит или отклонит этот компьютер, прежде чем истечет время ожидания. Например, значение **MaxRetry** , равное 10, а **поллинтервал** Влуе 60, указывает, что клиент должен опросить сервер 10 раз, ожидая 60 секунд между попытками. Поэтому время ожидания клиента истекает через 10 минут (10 x 60 секунд = 10 минут).<br />-[/Мессаже: <Message>] — указывает сообщение, отображаемое клиенту на странице диалогового окна программа сетевой загрузки.<br />-[/Ретентионпериод] — указывает число дней, в течение которых компьютер может находиться в состоянии ожидания, прежде чем будет автоматически очищен.<br />-[/Аппровед: <time in days>] — указывает срок хранения утвержденных компьютеров. Этот параметр необходимо использовать с параметром **/ретентионпериод** .<br />-[/Осерс: <time in days>] — указывает срок хранения неутвержденных компьютеров (отклоненных или ожидающих). Этот параметр необходимо использовать с параметром **/ретентионпериод** .|
|[/Аутоаддсеттингс]|Задает параметры по умолчанию, применяемые к каждому компьютеру. Параметры определяются с помощью следующих параметров.<p>-/Арчитектуре: {x86 &#124; ia64 &#124; x64} — указывает архитектуру.<br />-[/Бутпрограм: <Relative path>] — указывает программу загрузки, отправляемую на утвержденный компьютер. Если программа загрузки не указана, будет использоваться значение по умолчанию для архитектуры компьютера (как указано на сервере).<br />-[/Вдсклиентунаттенд: <Relative path>] — задает относительный путь к файлу автоматической установки, который должен получить одобренный клиент.<br />-[/Реферралсервер: <Server name>] — указывает сервер служб развертывания Windows, который клиент будет использовать для загрузки образов.<br />-[/Бутимаже: <Relative path>] — указывает загрузочный образ, который будет получен утвержденным клиентом.<br />-[/User: <Domain\User &#124; User@Domain>] — устанавливает разрешения для объекта учетной записи компьютера, чтобы предоставить указанному пользователю необходимые права на присоединение компьютера к домену.<br />-[Жоинригхтс: {Жоинонли &#124; Full}] — указывает тип прав, назначаемых пользователю. **Жоинонли** требует от администратора сброса учетной записи компьютера, прежде чем пользователь сможет присоединить компьютер к домену. **Full** предоставляет полный доступ пользователю, включая право присоединить компьютер к домену.<br />-[/Жоиндомаин: {Да &#124; No}] — указывает, должен ли компьютер быть присоединен к домену в качестве учетной записи компьютера во время установки служб развертывания Windows. Значение по умолчанию — **Да**.|
|[/Биндполици]|Настраивает сетевые интерфейсы для прослушивания PXE-поставщика. Политику можно определить с помощью следующих параметров:<p>-[/Полици: {include &#124; Exclude}] — задает политику привязки интерфейса для включения или исключения адресов из списка интерфейсов.<br />-[/Add] — добавляет интерфейс в список. Необходимо также указать/аддресстипе и/Аддресс.<br />-[/Remove] — удаляет интерфейс из списка. Необходимо также указать/аддресстипе и/Аддресс.<br />-/Аддресс:<IP or MAC address> — указывает IP-адрес или Mac для добавляемого или удаляемого интерфейса.<br />-/аддресстипе: {IP-&#124; MAC} — указывает тип адреса, указанного в параметре **/Аддресс** .|
|[/Рефрешпериод: <seconds>]|Указывает, как часто (в секундах) сервер обновляет свои параметры.|
|[/Баннедгуидполици]|Управляет списком запрещенных идентификаторов GUID с помощью следующих параметров:<p>-[/Add]/Гуид:<GUID> — добавляет указанный GUID в список ЗАПРЕЩЕНных идентификаторов GUID. Любой клиент с этим идентификатором GUID будет идентифицироваться по его MAC-адресу.<br />-[/Remove]/Гуид:<GUID> — УДАЛЯЕТ указанный GUID из списка ЗАПРЕЩЕНных идентификаторов GUID.|
|[/Бкдрефрешполици]|Настраивает параметры для обновления файлов BCD с помощью следующих параметров:<p>-[/Enabled: {Yes &#124; No}] — указывает политику обновления BCD. Если для **/Enabled** задано значение **Да**, то файлы BCD обновляются в указанный интервал времени.<br />-[/Рефрешпериод:<time in minutes>] — указывает интервал времени, в течение которого обновляются файлы BCD.|
|[/Транспорт]|Настраивает следующие параметры.<p><ul><li>[/ObtainIpv4From: {DHCP &#124; Range}] — указывает источник IPv4-адресов.<p><ul><li>[/Start: <starting Ipv4 address>] — указывает начало диапазона IP-адресов. Этот параметр является обязательным и допустимым, только если для **/ObtainIpv4From** задано значение **Range** .</li><li>[/Енд: <Ending Ipv4 address>] — указывает конец диапазона IP-адресов. Этот параметр является обязательным и допустимым, только если для **/ObtainIpv4From** задано значение **Range**.</li></ul></li><li>[/ObtainIpv6From: Range] [/Start:<start IP address>] [/енд:<End IP address>] указывает источник IPv6-адресов. Этот параметр применяется только к Windows Server 2008 R2, а единственное поддерживаемое значение — Range.</li><li>[/Стартпорт: <starting port>] — указывает начало диапазона портов.</li><li>[/Ендпорт: <Ending port>] — указывает конец диапазона портов.</li><li>[/Profile: {10 Мбит/с &#124; 100 Мбит &#124; 1Gbps &#124; Custom}] — указывает используемый сетевой профиль. Этот параметр поддерживается только форсерверс под Windows Server 2008.</li><li>[/Мултикастсессионполици]  Настраивает параметры передачи для многоадресных передач. Эта команда доступна только для Windows Server 2008 R2.<p><ul><li>[/Полици: {None &#124; Автоотключение &#124; несколькими потоками}] — определяет способ обработки замедляют клиентов. None означает, что все клиенты должны находиться в одном сеансе с одинаковой скоростью. Автоматическое отключение означает, что все клиенты, которые удаляются ниже указанного/Срешолд, будут отключены. Многопотоковая передача означает, что клиенты будут разделены на несколько сеансов, как указано в/Стреамкаунт.</li><li>[/Срешолд:<Speed in KBps>] — для/полици: Автоотключение. Этот параметр задает минимальную скорость передачи в кбит/с. Клиенты, которые отменяют эту частоту, будут отключены от многоадресных передач.</li><li>[/Стреамкаунт: {2 &#124; 3}] [/Фаллбакк: {Yes &#124; No}] — для/полици: многопотоковый, этот параметр определяет количество сеансов. 2 означает два сеанса (быстрый и медленный) 3 означает три сеанса (медленный, средний, быстрый).</li><li>[/Фаллбакк: {Yes&#124; No}] — определяет, будут ли Отключенные клиенты продолжать перенос с помощью другого метода (если он поддерживается клиентом). Если вы используете WDS-клиент, компьютер будет переходить на одноадресную рассылку. Wdsmcast. exe не поддерживает резервный механизм. Этот параметр также применяется к клиентам, которые не поддерживают многопотоковую передачу. В этом случае компьютер будет возвращаться к другому методу, а не к более медленному сеансу передачи.</li></ul></li></ul>|
## <a name="examples"></a>Примеры
Чтобы настроить сервер на ответ только известным клиентам с задержкой ответа в 4 минуты, введите:
```
wdsutil /Set-Server /AnswerClients:Known /Responsedelay:4
```
Чтобы задать программу загрузки и архитектуру для сервера, введите:
```
wdsutil /Set-Server /BootProgram:boot\x86\pxeboot.n12 /Architecture:x86
```
Чтобы включить ведение журнала на сервере, введите:
```
wdsutil /Set-Server /WdsClientLogging /Enabled:Yes /LoggingLevel:Warnings
```
Чтобы включить Unattend на сервере, а также архитектуру и файл автоматической установки клиента, введите:
```
wdsutil /Set-Server /WdsUnattend /Policy:Enabled /File:WDSClientUnattend \unattend.xml /Architecture:x86
```
Чтобы установить PXE-сервер для попыток привязки к TCP-портам 67 и 60, введите:
```
wdsutil /Set-server /UseDhcpPorts:No /DhcpOption60:Yes
```
## <a name="additional-references"></a>Дополнительные ссылки
- [Синтаксис](command-line-syntax-key.md)
командной строки[с помощью](using-the-disable-server-command.md)
команды "Disable-Server" с помощью команды "Enable-Server" с помощью команды "[включить](using-the-enable-server-command.md)
[Using the get-Server Command](using-the-get-server-command.md)
сервер" с командой "инициализировать-Server" с помощью[подкоманды "выполнить](subcommand-start-server.md)
[инициализацию](using-the-initialize-server-command.md)
сервера": "[-сервер](subcommand-stop-server.md)
["](the-uninitialize-server-option.md)
