---
title: chkdsk
description: 'Раздел Windows команды для ***- '
ms.custom: na
ms.prod: windows-server-threshold
ms.reviewer: na
ms.suite: na
ms.technology: manage-windows-commands
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: 62912a3c-d2cc-4ef6-9679-43709a286035
author: coreyp-at-msft
ms.author: coreyp
manager: lizapo
ms.date: 10/16/2017
ms.openlocfilehash: 9c5272ba0a5ff7c0a30f61631bb6c8dac6552ef0
ms.sourcegitcommit: 0b5fd4dc4148b92480db04e4dc22e139dcff8582
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/24/2019
ms.locfileid: "66192607"
---
# <a name="chkdsk"></a>chkdsk



Проверка файловой системы и метаданные файловой системы тома для логических и физических ошибок. При использовании без параметров, **chkdsk** отображает только состояние тома и не устранить все ошибки. При использовании **/f**, **/r**, **/x**, или **/b** параметров, она исправляет ошибки в томе.

> [!IMPORTANT]
> Членство в локальной **Администраторы** группы, либо эквивалентной, является минимальным требованием для выполнения **chkdsk**. Чтобы открыть окно командной строки с правами администратора, щелкните правой кнопкой мыши **командной** в меню "Пуск", а затем нажмите кнопку **Запуск от имени администратора**.

> [!IMPORTANT]
> Прерывание **chkdsk** не рекомендуется. Тем не менее, отмены или прерывания **chkdsk** не следует оставить том больше поврежден, чем ранее **chkdsk** была запущена. Повторный запуск **chkdsk** проверяет и исправляет любые оставшиеся повреждения в томе.

> [!IMPORTANT]
> **Примечание.** CHKDSK может использоваться только для локальных дисков. Команда не может использоваться с буква локального диска, который был перенаправлен по сети.

В разделе [Примеры](#examples) показан принцип использования этой команды.

##<a name="syntax"></a>Синтаксис

```
chkdsk [<Volume>[[<Path>]<FileName>]] [/f] [/v] [/r] [/x] [/i] [/c] [/l[:<Size>]] [/b]  

```

##<a name="parameters"></a>Параметры

|Параметр|Описание|
|---------|-----------|
|\<Тома >|Указывает букву диска (двоеточие), точку подключения или имя тома.|
|[\<Путь >]<FileName>|Используйте в таблице размещения файлов (FAT) и только FAT32. Указывает расположение и имя файла или набора файлов, которые должны **chkdsk** на наличие фрагментации. Можно использовать **?** и **&#42;** подстановочные знаки, чтобы указать несколько файлов.|
|/f|Исправления ошибок на диске. Диск должен быть заблокирован. Если **chkdsk** блокировки, появляется диск, сообщение с вопросом, нужно ли для проверки диска на следующий раз при невозможно перезагрузить компьютер.|
|/v|Отображает имя каждого файла в каждом каталоге, как проверяется диск.|
|/r|Поиск поврежденных секторов и восстановления читаемой информации. Диск должен быть заблокирован. **/r** включает функциональные возможности **/f**, с помощью дополнительного анализа ошибок физического диска.|
|/x|Во-первых, отключение тома принудительно, при необходимости. Делает недействительными все открытые дескрипторы на диск. **/x** также включает функциональные возможности **/f**.|
|/i|Только для использования в файловой системе NTFS. Выполняет менее строгая проверка записей индекса, что уменьшает количество времени, необходимого для запуска **chkdsk**.|
|/c|Только для использования в файловой системе NTFS. Не проверяет циклов в структуре папок, что уменьшает количество времени, необходимого для запуска **chkdsk**.|
|/l [:\<размер >]|Только для использования в файловой системе NTFS. Изменяет размер файла журнала к последнему размеру ввода. Если опустить параметр размера, **/l** Отображение текущего размера.|
|/b|Только для NTFS: Очищает список поврежденные кластеры на томе и повторно сканирует все выделенное и свободное кластеры для ошибки. **/b** включает функциональные возможности **/r**. Используйте этот параметр после установки образа тома на новый жесткий диск.|
|/?|Отображение справки в командной строке.|

## <a name="remarks"></a>Примечания

-   Пропуск проверки тома

    **/I** или **/c** коммутатора позволит уменьшить время, необходимое для запуска **chkdsk** , пропустив определенных корпоративном проверяет.
-   Проверка заблокированных дисков при перезагрузке

    Если вы хотите, чтобы **chkdsk** Чтобы исправить ошибки диска, не может иметь открытых файлов на диске. Если файлы открыты, появится следующее сообщение об ошибке:  
    ```
    Chkdsk cannot run because the volume is in use by another process. Would you like to schedule this volume to be checked the next time the system restarts? (Y/N)  
    
    ```  
    Если вы решили проверку диска при следующей перезагрузке компьютера, **chkdsk** проверяет диск и автоматически исправляет ошибки при перезагрузке компьютера. Если раздел диска является загрузочным, **chkdsk** автоматически перезагружает компьютер после проверки этого диска.

    Можно также использовать **chkntfs /c** команду, чтобы запланировать тома для проверки в следующий раз компьютер перезагружается. Используйте **набор "грязных" fsutil** команду, чтобы задать том является "грязным" бит (является признаком того, повреждение), поэтому выполняется, Windows **chkdsk** при перезапуске компьютера.
-   Отчет об ошибках

    Следует использовать **chkdsk** время от времени в файловых системах FAT и NTFS на наличие ошибок диска. **Chkdsk** проверяет места на диске и использования диска и предоставляет отчет о состоянии, относящиеся к каждой файловой системы. Отчет о состоянии показаны ошибки, обнаруженные в файловой системе. При запуске **chkdsk** без **/f** параметр в активный раздел, он может сообщить возникают ложные ошибки, так как он не может заблокировать диск.
-   Устранение ошибок логического диска

    **Chkdsk** исправляет логические ошибки только в том случае, если указать **/f** параметра. **Chkdsk** должен иметь возможность заблокировать диск, чтобы исправить ошибки.

    Так как действия по восстановлению для файловых систем FAT обычно изменяется таблица размещения файлов на диске и может привести к потере данных, **chkdsk** может отображать сообщение с подтверждением следующего вида:  
    ```
    10 lost allocation units found in 3 chains.  
    Convert lost chains to files?  
    
    ```  
    Если нажать клавишу **Y**, Windows сохраняет каждая цепочка потеряны в корневом каталоге в виде файла с именем в формате файла\<nnnn > CHK-файл. Когда **chkdsk** завершения, можно проверить эти файлы, чтобы увидеть, если они содержат любые данные, вам потребуется. Если нажать клавишу **N**, Windows, исправляет ошибки на диске, но не сохраняет содержимое потерянных блоков.

    Если вы не используете **/f** параметра **chkdsk** сообщает, что файл необходимо исправить, но не исправляет все ошибки.

    Если вы используете **chkdsk /f** на очень больших диск или диск с очень большим числом файлов (например, несколько миллионов), **chkdsk /f** может занять много времени для завершения.
-   Обнаружение физических ошибок диска

    Используйте **/r** параметр для поиска ошибок физический диск в файловой системе и попытаться восстановить данные из любого влияет секторов диска.
-   С помощью **chkdsk** с открытыми файлами

    Если указать **/f** параметра **chkdsk** отображает сообщение об ошибке, если есть открытые файлы на диске. Если вы не укажете **/f** параметр и открытых файлов существует, **chkdsk** может сообщить о потерянных кластеров на диске. Это может произойти, если открыть файлы еще не записаны в таблице размещения файлов. Если **chkdsk** сообщает из большого числа единиц распределения, рассмотрите возможность восстановления на диске.
-   С помощью **chkdsk** с теневыми копиями общих папок

    Поскольку теневые копии для общих папок исходного тома не может быть заблокирован при теневые копии для общих папок включен, под управлением **chkdsk** в источнике тома может сообщать об ошибках false или привести к **chkdsk** непредвиденное завершение работы. Тем не менее, можно проверьте теневые копии для ошибок, выполнив **chkdsk** в режиме только для чтения (без параметров) для проверки теневые копии для тома хранилища общих папок.
-   Основные сведения о коды выхода

    В следующей таблице перечислены коды выхода, который **chkdsk** сообщает после ее завершения.  
    |Код завершения|Описание|
    |---------|-----------|
    |0|Ошибки не были найдены.|
    |1|Были обнаружены и исправлены ошибки.|
    |2|Выполняется очистка диска (например, сборка мусора), или не удалось выполнить очистку, поскольку **/f** не указан.|
    |3|Не удалось проверить диск, ошибки не могут быть исправлены или не были исправлены ошибки, так как **/f** не указан.|
-   **Chkdsk** команда, с различными параметрами доступна в консоли восстановления.
-   На серверах, которые редко перезапускаются, вы можете использовать **chkntfs** или **запроса "грязных" fsutil** команды, чтобы определить, является ли том "грязный" бит уже установить до запуска chkdsk.

## <a name="examples"></a>Примеры

Если вы хотите проверить диск D и исправьте ошибки Windows, введите:
```
chkdsk d: /f  

```
В случае возникновения ошибки, **chkdsk** приостанавливает и отображает сообщения. **Chkdsk** завершения, отображая отчет, перечисляющий состояние диска. Не удается открыть все файлы на указанном диске до **chkdsk** завершения.

Чтобы проверить все файлы на диске файловой системой FAT в текущем каталоге фрагментацию, введите следующую команду:
```
chkdsk *.*  

```
**Chkdsk** появится отчет о состоянии и выводит список файлов, который соответствует спецификации файлов, которые фрагментированных.
#### <a name="additional-references"></a>Дополнительная справка

[Условные обозначения синтаксиса команд командной строки](command-line-syntax-key.md)
