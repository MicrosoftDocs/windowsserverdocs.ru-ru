---
title: setx
description: Справочная статья по команде Setx, которая создает или изменяет переменные среды в пользовательской или системной среде без необходимости программирования или написания сценариев.
ms.topic: reference
ms.assetid: ef37482f-f8a8-4765-951a-2518faac3f44
ms.author: lizross
author: eross-msft
manager: mtillman
ms.date: 10/16/2017
ms.openlocfilehash: 417a00dbb037c298784df81f9c5ed5e9c28485f8
ms.sourcegitcommit: 881a5bd40026288afbcee5fdbf602fd55f833d47
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/30/2020
ms.locfileid: "91586444"
---
# <a name="setx"></a>setx

Создает или изменяет переменные среды в пользовательской или системной среде без необходимости программирования или написания сценариев. Команда **Setx** также извлекает значения разделов реестра и записывает их в текстовые файлы.

> [!NOTE]
> Эта команда предоставляет единственную командную строку или программный способ для прямого и окончательного задания значений системной среды. Системные переменные среды можно настраивать вручную с помощью **панели управления** или редактора реестра. Команда **Set** , которая является внутренней для интерпретатора команд (Cmd.exe), устанавливает переменные среды пользователя только для текущего окна консоли.

## <a name="syntax"></a>Синтаксис

```
setx [/s <computer> [/u [<domain>\]<user name> [/p [<password>]]]] <variable> <value> [/m]
setx [/s <computer> [/u [<domain>\]<user name> [/p [<password>]]]] <variable>] /k <path> [/m]
setx [/s <computer> [/u [<domain>\]<user name> [/p [<password>]]]] /f <filename> {[<variable>] {/a <X>,<Y> | /r <X>,<Y> <String>} [/m] | /x} [/d <delimiters>]
```

### <a name="parameters"></a>Параметры

| Параметр | Описание |
|--|--|
| ключ `<computer>` | Указывает имя или IP-адрес удаленного компьютера. Не используйте обратные косые черты. Значение по умолчанию — имя локального компьютера. |
| /u `[<domain>\]<user name>` | Запускает скрипт с учетными данными указанной учетной записи пользователя. Значение по умолчанию — системные разрешения. |
| /p [ `<password>` ]| Указывает пароль учетной записи пользователя, указанной в параметре **/u** . |
| `<variable>` | Задает имя переменной среды, которую необходимо задать. |
| `<value>` | Задает значение, для которого необходимо задать переменную среды. |
| /k `<path>` | Указывает, что переменная задается на основе сведений из раздела реестра. *Путь* использует следующий синтаксис: `\\<HIVE>\<KEY>\...\<Value>` . Например, можно указать следующий путь: `HKEY_LOCAL_MACHINE\System\CurrentControlSet\Control\TimeZoneInformation\StandardName` |
| /f `<filename>` | Указывает файл, который вы хотите использовать. |
| / `<X>,<Y>` | Задает абсолютные координаты и смещение в качестве параметров поиска. |
| /r `<X>,<Y> <String>` | Задает относительные координаты и смещение от **строки** в качестве параметров поиска. |
| /m | Указывает, что переменная должна быть задана в системной среде. Значение по умолчанию — локальная среда. |
| /x | Отображает координаты файлов, игнорируя параметры командной строки **/a**, **/r**и **/d** . |
| /d `<delimiters>` | Указывает разделители, такие как **,** или, **\\** для использования в дополнение к четырем встроенным разделителям — пробел, табуляция, ввод и перевод строки. Допустимые разделители включают любой символ ASCII. Максимальное число разделителей равно 15, включая встроенные разделители. |
| /? | Отображение справки в командной строке. |

#### <a name="remarks"></a>Remarks

- Эта команда аналогична служебной программе UNIX SETENV.

- С помощью этой команды можно задать значения для переменных среды пользователя и системы в одном из трех источников (режимов): режим командной строки, режим реестра или файловый режим.

- Эта команда записывает переменные в главную среду в реестре. Переменные, заданные с помощью переменных **Setx** , доступны только в окнах командной строки в будущем, а не в текущем командном окне.

- Единственными поддерживаемыми Hive являются **HKEY_CURRENT_USER** и **HKEY_LOCAL_MACHINE** . REG_DWORD, REG_EXPAND_SZ, REG_SZ и REG_MULTI_SZ являются допустимыми типами данных **RegKey** .

- Если вы получаете доступ к **REG_MULTI_SZ** значениям в реестре, извлекается и используется только первый элемент.

- Эту команду нельзя использовать для удаления значений, добавленных в локальную или системную среду. Эту команду можно использовать с именем переменной и без значения, чтобы удалить соответствующее значение из локальной среды.

- REG_DWORD значения реестра извлекаются и используются в шестнадцатеричном режиме.

- Файловый режим поддерживает синтаксический анализ только текстовых файлов возврата каретки и перевода строки (CRLF).

- При выполнении этой команды на существующей переменной удаляются все ссылки на переменные и используются расширенные значения.

  Например, если переменная% PATH% имеет ссылку на% ЖАВАДИР%, а% PATH% обрабатывается с помощью **Setx**, то% жавадир% развернут и его значение присваивается непосредственно целевой переменной% PATH%. Это означает, что будущие обновления% ЖАВАДИР% **не будут** отражены в переменной% PATH%.

- Имейте в виду, что при назначении содержимого переменной с помощью **Setx**существует ограничение в 1024 символов.

  Это означает, что содержимое обрезается, если выйдет более 1024 символов, а обрезанный текст будет применен к целевой переменной. Если этот обрезанный текст применяется к существующей переменной, это может привести к утрате данных, ранее удерживаемых целевой переменной.

## <a name="examples"></a>Примеры

Чтобы задать для переменной среды *машины* в локальной среде значение *Brand1*, введите:

```
setx MACHINE Brand1
```

Чтобы задать переменную среды *компьютера* в системной среде на значение *Brand1 Computer*, введите:

```
setx MACHINE Brand1 Computer /m
```

Чтобы задать переменную среды *MYPATH* в локальной среде для использования пути поиска, определенного в переменной среды *path* , введите:

```
setx MYPATH %PATH%
```

Чтобы задать переменную среды *MYPATH* в локальной среде для использования пути поиска, определенного в переменной среды *path* после замены **~** на **%** , введите:

```
setx MYPATH ~PATH~
```

Чтобы задать переменную среды *компьютера* в локальной среде для *Brand1* на удаленном компьютере с именем *COMPUTER1*, введите:

```
setx /s computer1 /u maindom\hiropln /p p@ssW23 MACHINE Brand1
```

Чтобы задать переменную среды *MYPATH* в локальной среде для использования пути поиска, определенного в переменной среды *path* на удаленном компьютере с именем *COMPUTER1*, введите:

```
setx /s computer1 /u maindom\hiropln /p p@ssW23 MYPATH %PATH%
```

Чтобы задать переменную среды *тзоне* в локальной среде в качестве значения, находящихся в разделе реестра **HKEY_LOCAL_MACHINE \систем\куррентконтролсет\контрол\тимезонеинформатион\стандарднаме** , введите:

```
setx TZONE /k HKEY_LOCAL_MACHINE\System\CurrentControlSet\Control\TimeZoneInformation\StandardName
```

Чтобы задать переменную среды *тзоне* в локальной среде удаленного компьютера с именем *COMPUTER1* , в значение, найденное в разделе реестра **HKEY_LOCAL_MACHINE \систем\куррентконтролсет\контрол\тимезонеинформатион\стандарднаме** , введите:

```
setx /s computer1 /u maindom\hiropln /p p@ssW23 TZONE /k HKEY_LOCAL_MACHINE\System\CurrentControlSet\Control\TimeZoneInformation\StandardName
```

Чтобы задать переменную среды *сборки* в системной среде в качестве значения, находящихся в разделе реестра **HKEY_LOCAL_MACHINE \софтваре\микрософт\виндовснт\куррентверсион\куррентбуилднумбер** , введите:

```
setx BUILD /k HKEY_LOCAL_MACHINE\Software\Microsoft\WindowsNT\CurrentVersion\CurrentBuildNumber /m
```

Чтобы задать переменную среды сборки в системной среде удаленного компьютера с именем COMPUTER1, в качестве значения, находящихся в разделе реестра **HKEY_LOCAL_MACHINE \софтваре\микрософт\виндовснт\куррентверсион\куррентбуилднумбер** , введите:

```
setx /s computer1 /u maindom\hiropln /p p@ssW23  BUILD /k HKEY_LOCAL_MACHINE\Software\Microsoft\Windows NT\CurrentVersion\CurrentBuildNumber /m
```

Чтобы отобразить содержимое файла с именем *ipconfig. out*, а также соответствующие координаты содержимого, введите:

```
setx /f ipconfig.out /x
```

Чтобы задать переменную среды *reduce* в локальной среде до значения, находящейся в координате *5, 11* в файле *ipconfig. out* , введите:

```
setx IPADDR /f ipconfig.out /a 5,11
```

Чтобы задать переменную среды *OCTET1* в локальной среде до значения, находящейся в координате *5, 3* в файле *ipconfig. out* с разделителями **# $ *.**, введите:

```
setx OCTET1 /f ipconfig.out /a 5,3 /d #$*.
```

Чтобы задать переменную среды *ипгатевай* в локальной среде до значения, находящейся в координате *0, 7* по отношению к координатам *шлюза* в файле *ipconfig. out* , введите:

```
setx IPGATEWAY /f ipconfig.out /r 0,7 Gateway
```

Чтобы отобразить содержимое файла *ipconfig. out* , а также соответствующие координаты содержимого на компьютере с именем *COMPUTER1*, введите:

```
setx /s computer1 /u maindom\hiropln /p p@ssW23 /f ipconfig.out /x
```

## <a name="additional-references"></a>Дополнительные ссылки

- [Условные обозначения синтаксиса команд командной строки](command-line-syntax-key.md)
