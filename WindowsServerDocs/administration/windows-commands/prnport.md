---
title: prnport
description: Узнайте, как создавать, удалять и перечислять порты принтеров.
ms.prod: windows-server
ms.technology: manage-windows-commands
ms.topic: article
ms.assetid: 6a0ec638-a21e-4a34-be5c-bd0f7ca89ffe
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 10/16/2017
ms.openlocfilehash: c68b703fe7feef40e765af2a7863846401398107
ms.sourcegitcommit: ab64dc83fca28039416c26226815502d0193500c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/01/2020
ms.locfileid: "82722810"
---
# <a name="prnport"></a>prnport

> Область применения: Windows Server (половина ежегодного канала), Windows Server 2019, Windows Server 2016, Windows Server 2012 R2, Windows Server 2012

Создание, удаление и перечисление стандартных портов принтера TCP/IP, а также отображение и изменение конфигурации портов.

## <a name="syntax"></a>Синтаксис
```
cscript prnport {-a | -d | -l | -g | -t | -?} [-r <PortName>] 
[-s <ServerName>] [-u <UserName>] [-w <Password>] [-o {raw | lpr}] 
[-h <Hostaddress>] [-q <QueueName>] [-n <PortNumber>] -m{e | d} 
[-i <SNMPIndex>] [-y <CommunityName>] -2{e | -d}
```

### <a name="parameters"></a>Параметры

|          Параметр           |                                                                                                                                                                                                                                                                                                     Описание                                                                                                                                                                                                                                                                                                      |
|------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|              -a              |                                                                                                                                                                                                                                                                                       создает стандартный порт принтера TCP/IP.                                                                                                                                                                                                                                                                                        |
|              -d              |                                                                                                                                                                                                                                                                                       Удаляет стандартный порт принтера TCP/IP.                                                                                                                                                                                                                                                                                        |
|              -l              |                                                                                                                                                                                                                                                             Список всех стандартных портов принтера TCP/IP на компьютере, указанном параметром **-s** .                                                                                                                                                                                                                                                             |
|              -g              |                                                                                                                                                                                                                                                                            Отображает конфигурацию стандартного порта принтера TCP/IP.                                                                                                                                                                                                                                                                             |
|              -T              |                                                                                                                                                                                                                                                                           Настраивает параметры порта для стандартного порта принтера TCP/IP.                                                                                                                                                                                                                                                                           |
|        -r \<портнаме>        |                                                                                                                                                                                                                                                                                Указывает порт, к которому подключен принтер.                                                                                                                                                                                                                                                                                 |
|       -s \<имя_сервера>       |                                                                                                                                                                                                                               Указывает имя удаленного компьютера, на котором размещен принтер, которым требуется управлять. Если компьютер не указан, используется локальный компьютер.                                                                                                                                                                                                                                |
| -u \<имя_пользователя>-w<Password> |                                                                                                              Указывает учетную запись с разрешениями на подключение к компьютеру, на котором размещен принтер, которым требуется управлять. Все члены локальной группы администраторов целевого компьютера имеют эти разрешения, но разрешения также могут быть предоставлены другим пользователям. Если учетная запись не указана, необходимо войти в систему с учетной записью с этими разрешениями, чтобы команда работала.                                                                                                               |
|     -o {RAW &#124; LPR}      |                                                                                                                                                                                                              Указывает, какой протокол использует порт: TCP RAW или TCP LPR. При использовании протокола TCP RAW можно дополнительно указать номер порта с помощью параметра **-n** . Номер порта по умолчанию — 9100.                                                                                                                                                                                                              |
|      -h \<хостаддресс>       |                                                                                                                                                                                                                                                                   Указывает (по IP-адресу) принтер, для которого требуется настроить порт.                                                                                                                                                                                                                                                                    |
|       -q \<QueueName>        |                                                                                                                                                                                                                                                                                     Указывает имя очереди для порта TCP RAW.                                                                                                                                                                                                                                                                                     |
|       -n \<номер_порта>       |                                                                                                                                                                                                                                                                    Указывает номер порта для порта TCP RAW. Номер порта по умолчанию — 9100.                                                                                                                                                                                                                                                                    |
|        -m {e &#124; d}        |                                                                                                                                                                                                                                                       Указывает, включен ли протокол SNMP. Параметр **e** включает протокол SNMP. Параметр **d** отключает протокол SNMP.                                                                                                                                                                                                                                                        |
|        -i \<снмпиндекс        |                                                                                                                                                                                                                             Указывает SNMP-индекс, если включен протокол SNMP. Дополнительные сведения см. в документе RFC 1759 на [веб-сайте редактора RFC](https://go.microsoft.com/fwlink/?LinkId=569).                                                                                                                                                                                                                              |
|     -y \<коммунитинаме>      |                                                                                                                                                                                                                                                                                Указывает имя SNMP-сообщества, если включен протокол SNMP.                                                                                                                                                                                                                                                                                |
|       -2 {e &#124;-d}        | Указывает, включены ли двойные очереди (также называемые перекачкой) для портов TCP LPR. Двойная буферизация необходима, так как TCP LPR должен содержать точный счетчик байтов в управляющем файле, отправляемом на принтер, но протокол не может получить число от локального поставщика печати. Таким образом, если файл помещен в очередь печати TCP LPR, он также помещается в очередь как временный файл в каталог System32. TCP-порт LPR определяет размер временного файла и отправляет его на сервер, на котором работает LPD. Параметр **e** включает двойные очереди. Параметр **d** отключает двойные очереди. |
|              /?              |                                                                                                                                                                                                                                                                                         Отображение справки в командной строке.                                                                                                                                                                                                                                                                                         |

## <a name="remarks"></a>Примечания
-   Команда **прнпорт** является сценарием Visual Basic, расположенным в каталоге%WINDIR%\system32\\\ <language> printing_Admin_Scripts. Чтобы использовать эту команду, в командной строке введите **cscript** , а затем полный путь к файлу прнпорт или измените каталоги на соответствующую папку. Пример:
    ```
    cscript %WINdir%\System32\printing_Admin_Scripts\en-US\prnport
    ```
-   Если предоставленные сведения содержат пробелы, заключите текст в кавычки (например, `"computer Name"`).
-   Протокол TCP RAW является более высоким протоколом производительности Windows, чем протокол LPR.

## <a name="examples"></a><a name="BKMK_examples"></a>Примеры
Чтобы отобразить все стандартные порты печати TCP/IP на сервере \\\Server1, введите:
```
cscript prnport -l -s Server1
```
Чтобы удалить стандартный порт печати TCP/IP на сервере \\\Server1, который подключается к сетевому принтеру по адресу 10.2.3.4, введите:
```
cscript prnport -d -s Server1 -r IP_10.2.3.4
```
Чтобы добавить стандартный порт печати TCP/IP на сервере \\\Server1, который подключается к сетевому принтеру в 10.2.3.4 и использует протокол TCP RAW на порту 9100, введите:
```
cscript prnport -a -s Server1 -r IP_10.2.3.4 -h 10.2.3.4 -o raw -n 9100
```
Чтобы включить SNMP, укажите общедоступное имя сообщества и задайте для SNMP-индекса значение 1 на сетевом принтере в 10.2.3.4, совместно используемом сервером \\\Server1, введите:
```
cscript prnport -t -s Server1 -r IP_10.2.3.4 -me -y public -i 1 -n 9100
```
Чтобы добавить стандартный порт печати TCP/IP на локальном компьютере, который подключается к сетевому принтеру на сайте 10.2.3.4, и автоматически получить параметры устройства с принтера, введите:
```
cscript prnport -a -r IP_10.2.3.4 -h 10.2.3.4
```

## <a name="additional-references"></a>Дополнительные ссылки
- [Справочник по синтаксису](command-line-syntax-key.md)
[командной](print-command-reference.md) строки для команды Print
