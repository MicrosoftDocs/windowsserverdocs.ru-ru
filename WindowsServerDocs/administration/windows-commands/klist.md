---
title: klist
description: 'Раздел Windows команды для ***- '
ms.custom: na
ms.prod: windows-server-threshold
ms.reviewer: na
ms.suite: na
ms.technology: manage-windows-commands
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: 4689b4a9-1740-47dd-9240-02105efca428
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 10/16/2017
ms.openlocfilehash: 3b3d0591f9feb12782d0c77b6c786cfe17656ab2
ms.sourcegitcommit: 0d0b32c8986ba7db9536e0b8648d4ddf9b03e452
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/17/2019
ms.locfileid: "59831165"
---
# <a name="klist"></a>klist



Отображает список в настоящее время кэшированных билетов Kerberos. Эти сведения относятся к Windows Server 2012. Примеры использования этой команды см. в разделе [примеры](#BKMK_Examples).

## <a name="syntax"></a>Синтаксис

```
klist [-lh <LogonId.HighPart>] [-li <LogonId.LowPart>] tickets | tgt | purge | sessions | kcd_cache | get | add_bind | query_bind | purge_bind
```

### <a name="parameters"></a>Параметры

|Параметр|Описание|
|---------|-----------|
|-lh|Обозначает верхняя часть локальный уникальный идентификатор пользователя (LUID), выраженный в шестнадцатеричном формате. Если ни lh — или — li, по умолчанию используется LUID пользователя, который в данный момент выполнил вход.|
|-li|Обозначает Младшая часть локальный уникальный идентификатор пользователя (LUID), выраженный в шестнадцатеричном формате. Если ни lh — или — li, по умолчанию используется LUID пользователя, который в данный момент выполнил вход.|
|билеты|Список находящихся в данный момент--действия билетов предоставления билета (TGT) и билетов сеанса входа в систему. Это параметр по умолчанию.|
|TGT|Отображает начальное билет службы Kerberos|
|очистить|Позволяет удалить все билеты сеанса входа в систему.|
|Сеансы|Отображает список сеансов входа в систему на этом компьютере.|
|kcd_cache|Отображает Kerberos ограниченного делегирования кэширования данных.|
|get|Позволяет запросить билет для конечного компьютера, указывается по имени участника-службы (SPN).|
|add_bind|Позволяет указать предпочтительный контроллер домена для проверки подлинности Kerberos.|
|query_bind|Отображает список кэшированных предпочитаемые контроллеры домена для каждого домена, который подключался к Kerberos.|
|purge_bind|Удаляет кэшированные предпочитаемые контроллеры домена для заданных доменов.|
|kdcoptions|Отображает параметры центра распространения ключей (KDC), указанные в RFC 4120.|
|/?|Отображает справку для этой команды.|

## <a name="remarks"></a>Примечания

Членство в группе **"Администраторы домена"**, или эквивалентной является минимальным требованием для выполнения все параметры этой команды.

Если аргументы не указаны, Klist получит все билеты для текущего пользователя.

Параметры отображения следующих сведений:
-   **билеты**

    Список в настоящее время кэшированных билетов служб, которые вы прошли проверку подлинности с момента входа. Отображает все кэшированные билеты следующие атрибуты:  
    -   LogonID: LUID
    -   Клиент: Объединение имени клиента и имя домена клиента
    -   Сервер: Объединение имени службы и имя домена службы
    -   Тип шифрования KerbTicket: Тип шифрования, используемый для шифрования билета Kerberos
    -   Флаги билета: Флаги билета Kerberos
    -   Время начала: Время, из которого будет применяться билета
    -   Время окончания: Время, когда билет больше не действителен. Когда запрос в службу после этого времени, он больше не используется для проверки подлинности в службе или использоваться для обновления
    -   Продление времени: Время, необходим новый начальной проверки подлинности
    -   Тип ключа сеанса: Алгоритм шифрования, который используется для ключа сеанса
-   **tgt**

    Перечислены начальной предоставления Билетов Kerberos и находящихся в данный момент билета следующие атрибуты:  
    -   LogonID: В шестнадцатеричном формате
    -   ServiceName: krbtgt
    -   TargetName \<имени участника-службы >: krbtgt
    -   Имя домена: Имя домена, которая выдает билет TGT
    -   TargetDomainName: Домен, выданный билет TGT
    -   AltTargetDomainName: Домен, выданный билет TGT
    -   Флаги билета: Адрес и целевой объект действия и тип
    -   Сеансовый ключ: Алгоритм ключа длины и шифрования
    -   Время начала: Время локального компьютера, который был запрошен билет
    -   Время окончания: Время, когда билет больше не действителен. Если билет выходит за пределы этого времени, он может больше не используется для проверки подлинности в службе.
    -   RenewUntil: Крайний срок для возобновления билета
    -   TimeSkew: Разница во времени с помощью центра распространения ключей (KDC)
    -   EncodedTicket: Закодированное билета
-   **Очистка**

    Позволяет удалить определенные билет. Очистка кэша билетов уничтожает все билеты, которые они в кэше, поэтому этот атрибут следует использовать с осторожностью. Он может ограничивать возможность проверки подлинности в ресурсах. В этом случае необходимо выйти и снова войти в систему.  
    -   LogonID: В шестнадцатеричном формате
-   **Сеансы**

    Позволяет и отображаться данные для всех сеансов входа в систему на этом компьютере.  
    -   LogonID: Если указано, отображается сеанс входа в систему только с заданным значением. Если не указано, отображаются все сеансы входа в систему на этом компьютере.
-   **kcd_cache**

    Позволяет отображать сведения о кэше ограниченного делегирования.  
    -   LogonID: Если указано, сведения о кэше для сеанса входа с заданным значением. Если не указан, отображает сведения о кэше для сеанса входа текущего пользователя.
-   **Получить**

    Позволяет запросить билет в целевой объект, который задается параметром имя участника-службы.  
    -   LogonID: Если указано, запрашивает билет, используя сеанс входа в систему с заданным значением. Если не указан, запрашивает билет, используя сеанс входа в систему текущий пользователь.
    -   kdcoptions: Запрашивает билет с заданными параметрами KDC
-   **add_bind**

    Позволяет указать предпочтительный контроллер домена для проверки подлинности Kerberos.
-   **query_bind**

    Позволяет отображать кэшированных, предпочтительный контроллеры доменов.
-   **purge_bind**

    Позволяет удалить кэшированных, предпочтительный контроллеры доменов.
-   **kdcoptions**

    Текущий список параметров и их описания, см. в разделе [RFC 4120](http://www.ietf.org/rfc/rfc4120.txt).

**Дополнительные рекомендации**
-   Klist.exe доступна в Windows Server 2012 и Windows 8, и он не требуется специальных установка.

## <a name="BKMK_Examples"></a>Примеры

1.  При диагностике 27 идентификатор события во время обработки запроса службой предоставления билетов (TGS) для целевого сервера, учетная запись не имеет подходящего ключа для создания билета Kerberos. Klist можно использовать для запроса кэш билетов Kerberos, чтобы определить, если все билеты отсутствует, если учетная запись или целевой сервер имеет ошибки или если тип шифрования не поддерживается.  
    ```
    klist 
    ```  
    ```
    klist –li 0x3e7
    ```  
2.  При диагностировать ошибки, и вы хотите знать особенности каждого билет предоставление ticket, кэшируется на компьютере для сеанса входа в систему, можно использовать для отображения информации TGT Klist.  
    ```
    klist tgt
    ```  
3.  Если вы не сможете установить подключение и диагностики может занять слишком много, можно очистить кэш билетов Kerberos, выйдите из системы и снова войдите в систему.  
    ```
    klist purge
    ```  
    ```
    klist purge –li 0x3e7
    ```  
4.  Если вам нужно диагностировать сеанс входа в систему для пользователя или службы, можно использовать следующую команду для поиска данный идентификатор, который используется в других командах Klist.  
    ```
    klist sessions
    ```  
5.  Если вам нужно диагностировать сбой ограниченного делегирования, можно использовать следующую команду для поиска последнего происшедшей ошибки.  
    ```
    klist kcd_cache
    ```  
6.  Когда требуется выполнить диагностику, если пользователь или служба может получить билет на сервер, эта команда используется для запроса билета для определенного имени участника-службы.  
    ```
    klist get host/%computername%
    ```  
7.  При диагностике проблем с репликацией между контроллерами домена, обычно требуется клиентский компьютер для определенного контроллера домена. В таких случаях можно использовать следующую команду на клиентском компьютере, на этом контроллере домена.  
    ```
    klist add_bind CONTOSO KDC.CONTOSO.COM
    
    ```  
    ```
    klist add_bind CONTOSO.COM KDC.CONTOSO.COM
    ```  
8.  Чтобы запросить какие контроллеры домена этого компьютера, в последнее время, можно использовать следующую команду.  
    ```
    klist query_bind
    ```  
9.  Если требуется Kerberos по повторному контроллеров домена, можно использовать следующую команду. Эта команда также может использоваться для очистки кэша, прежде чем создавать новые привязки контроллера домена с klist add_bind.  
    ```
    klist purge_bind
    ```

#### <a name="additional-references"></a>Дополнительная справка

-   [Ключ синтаксиса командной строки](command-line-syntax-key.md)