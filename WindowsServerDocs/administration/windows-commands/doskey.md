---
title: doskey
description: 'Раздел Windows команды для ***- '
ms.custom: na
ms.prod: windows-server-threshold
ms.reviewer: na
ms.suite: na
ms.technology: manage-windows-commands
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: 4874fd43-d5ea-45f3-ae24-388ae925ed76
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 10/16/2017
ms.openlocfilehash: 3e7a2fd2aa6a608a8857b325d3d6b0608eb4e59e
ms.sourcegitcommit: eaf071249b6eb6b1a758b38579a2d87710abfb54
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/31/2019
ms.locfileid: "66439500"
---
# <a name="doskey"></a>doskey



Вызывает Doskey.exe (которая ранее введенных команд командной строки) и редактирование командных строк.

В разделе [Примеры](#BKMK_examples) показан принцип использования этой команды.

## <a name="syntax"></a>Синтаксис

```
doskey [/reinstall] [/listsize=<Size>] [/macros:[all | <ExeName>] [/history] [/insert | /overstrike] [/exename=<ExeName>] [/macrofile=<FileName>] [<MacroName>=[<Text>]]
```

## <a name="parameters"></a>Параметры

|       Параметр        |                                                                                                                          Описание                                                                                                                           |
|------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|       / reinstall       |                                                                                            Устанавливает новую копию Doskey.exe и очищает буфер команд.                                                                                            |
|   /LISTSIZE =\<размер >    |                                                                                                Указывает максимальное число команд в буфере.                                                                                                 |
|        / Macros         |                                        Отображает список всех **doskey** макросы. Можно использовать символ перенаправления ( **>** ) с **/Macros** для перенаправления списка в файл. Вы можете сократить **/Macros** для **/m**.                                         |
|      /Macros:all       |                                                                                                        Отображает **doskey** макросы для всех исполняемых файлов.                                                                                                         |
|   / Macros:\<ExeName >   |                                                                                             Отображает **doskey** макросы для исполняемого файла, указанного *ExeName*.                                                                                              |
|        / History        |                                    Отображает все команды, которые хранятся в памяти. Можно использовать символ перенаправления ( **>** ) с **/history** для перенаправления списка в файл. Вы можете сократить **/history** как **/h**.                                    |
|        [/ INSERT        |                                                                                                                          / overstrike]                                                                                                                          |
|  / EXENAME =\<ExeName >   |                                                                                        Задает программу, (то есть исполняемого файла) в котором **doskey** выполнение макросов.                                                                                         |
| /macrofile=\<FileName> |                                                                                              Указывает файл, содержащий макросы, которые вы хотите установить.                                                                                               |
| \<Имя макроса > = [<Text>]  | Создает макрос, который выполняет команды, заданные параметром *текст*. *Имя макроса* указывает имя, вы хотите назначить в макрос. *Текст* определяет команды, которые требуется записать. Если *текст* оставлено пустым, *имя макроса* очищается никаких команд. |
|           /?           |                                                                                                              Отображение справки в командной строке.                                                                                                              |

## <a name="remarks"></a>Примечания

- С помощью Doskey.exe

  Doskey.exe всегда будет доступен для всех символьных интерактивные программы (такие как отладчики или программы передачи файлов) и поддерживает буфер журнала команд и макросы для каждой программы, он запускается. Нельзя использовать **doskey** параметры командной строки из программы. Необходимо запустить **doskey** параметры командной строки, прежде чем запустить программу. Назначения клавиш программы переопределить **doskey** сочетания клавиш.
- Повторный вызов команд

  Для повторного вызова команд, можно использовать любой из следующих разделов после запуска Doskey.exe. Если вы используете Doskey.exe внутри программы, назначения клавиш программы имеют приоритет.  

  |    Ключ     |                              Описание                              |
  |------------|-----------------------------------------------------------------------|
  |  СТРЕЛКА ВВЕРХ  |  Повторный вызов команды, который использовался ранее, отображается.  |
  | СТРЕЛКА ВНИЗ |  Отзывает команду, которая используется после того, который отображается.   |
  |  PAGE UP   |    Отзывает первая команда, которая использовалась в текущем сеансе.    |
  | PAGE DOWN  | Отзывает последней команды, который использовался в текущем сеансе. |


- Редактирования командной строки

  С помощью Doskey.exe можно изменить текущую командную строку. Если Doskey.exe используется в рамках программы, программы будут иметь приоритет, и клавиши редактирования Doskey.exe может не работать.

  В следующей таблице перечислены **doskey** редактирования ключи и их функции.  

  | Клавиши или сочетания клавиш |                                                                                                                                                       Описание                                                                                                                                                       |
  |------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
  |       СТРЕЛКА ВЛЕВО       |                                                                                                                                      Перемещение курсора влево на одну знак.                                                                                                                                      |
  |      СТРЕЛКА ВПРАВО       |                                                                                                                                    Перемещение курсора на один символ вперед.                                                                                                                                     |
  |    CTRL + СТРЕЛКА ВЛЕВО     |                                                                                                                                        Перемещение курсора влево на одну слово.                                                                                                                                         |
  |    CTRL + СТРЕЛКА ВПРАВО    |                                                                                                                                       Перемещение курсора вперед на одно слово.                                                                                                                                       |
  |          ГЛАВНАЯ          |                                                                                                                                 Перемещение курсора в начало строки.                                                                                                                                 |
  |          END           |                                                                                                                                    Перемещает курсор в конец строки.                                                                                                                                    |
  |          ESC           |                                                                                                                                          Очищает командной строки.                                                                                                                                           |
  |           F1           |                                                                      Копирование одного символа из столбца в шаблоне в том же столбце, в окне командной строки. (Шаблон — буфера памяти, который содержит последние введенную команду).                                                                       |
  |           F2           |                                                                 Производит поиск вперед в шаблоне для следующего ключа, введенные после того как вы нажмите клавишу F2. Doskey.exe вставляет текст из шаблона — вплоть до, но не включая знак вами.                                                                  |
  |           F3           |                                                 Копирует в оставшейся части шаблона в командную строку. Doskey.exe начинает копирование с позиции в шаблон, соответствующий позиции курсора в командной строке.                                                 |
  |           F4           |                                                                            Удаляет все символы из текущего вставки место до, но не включая следующее вхождение символа, введенные после того как вы, нажмите клавишу F4.                                                                            |
  |           F5           |                                                                                                                                   Копирование шаблона в текущей командной строки.                                                                                                                                    |
  |           F6           |                                                                                                                    Размещает знак окончания файла (CTRL + Z) в текущей позиции курсора.                                                                                                                    |
  |           F7           | Отображает все команды для этой программы, которые хранятся в памяти (в диалоговом окне). Используйте клавишу Стрелка вверх и Стрелка вниз для выбора нужной команды и нажмите клавишу ВВОД, чтобы выполнить команду. Можно также Обратите внимание, номер команды и использовать это число в сочетании с клавишу F9. |
  |         ALT + F7         |                                                                                                                          Удаление всех команд, сохраненных в памяти в текущем буфере.                                                                                                                          |
  |           F8           |                                                                                                           Отображает все команды в буфере, которые начинаются с символов в текущей команды.                                                                                                            |
  |           F9           |                                             Запрашивает номером команда буфера журнала, а затем отображает команду, связанную с указанным номером. Нажмите клавишу ВВОД, чтобы выполнить команду. Чтобы отобразить все числа и соответствующих команд, нажмите клавишу F7.                                             |
  |        ALT + F10         |                                                                                                                                             Удаление всех макросов.                                                                                                                                              |


- С помощью **doskey** в рамках программы

  Определенные символьно ориентированную интерактивные программы, такие как отладчики или программы передачи файлов (FTP) автоматически Doskey.exe используется. Для использования Doskey.exe программы необходимо процесс консоли и использовать буферизованных входных данных. Назначения клавиш программы переопределить **doskey** сочетания клавиш. Например, если программа использует клавишу F7 для функции, не удается получить **doskey** журнала во всплывающем окне команд.

  С Doskey.exe могли вести журнал команду для каждой программы, запуск или повторение. Можно изменить предыдущей команды в командной строке программы, а также запустить **doskey** макросы, создаваемых для программы. Если закрыть и снова запустите программу в том же окне командной строки, введенным ранее командам из предыдущего сеанса программы доступна.

  Doskey.exe необходимо запустить перед запуском программы. Нельзя использовать **doskey** параметры командной строки программы командной строке, даже если программа содержит команду оболочки.

  Если вы хотите настроить, как Doskey.exe работает с программой и создать **doskey** макросы для данной программы, можно создать пакетная программа, которая изменяет Doskey.exe и запуск программы.
- Указание режима вставки по умолчанию

  Если нажать клавишу INSERT, можно ввести текст на **doskey** командной строки во время существующий текст без замены текста. Тем не менее после нажатия клавиши ВВОД, Doskey.exe возвращает клавиатуры в режиме замены. Необходимо нажать клавишу INSERT еще раз, чтобы вернуться в режим вставки.

  Используйте **или вставку** для переключения клавиатуры в режим вставки при каждом нажатии клавиши ВВОД. Сохраняется в режиме вставки пока не будет выбран **/overstrike**. Можно временно вернуться к режиме замены, нажав клавишу INSERT, но после нажатия клавиши ВВОД, Doskey.exe возвращает клавиатуры в режим вставки.

  Форма курсора изменяется при нажатии клавиши INSERT для изменения из одного режима в другой.
- Создание макроса

  Doskey.exe можно использовать для создания макросов, выполняющих одну или несколько команд. Ниже перечислены специальные символы, которые можно использовать для управления выполнением команд, при определении макроса.  

  |   Символ   |                                                                                                                                                                               Описание                                                                                                                                                                               |
  |---------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
  |   $G или $g    |                                                                                   Перенаправляет выходные данные. Используйте один из этих специальных символов для отправки выходных данных для устройства или файл, а не на экран. Это эквивалентно символу перенаправления выходных данных ( **>** ).                                                                                    |
  | $G$ G или $g$ g  |                                                         Выходные данные добавляются в конец файла. Используйте любой из этих символов двойных для добавления существующего файла вместо замены данных в файл выходных данных. Эти символы двойных эквивалентны добавочный символ перенаправления для выходных данных ( **>>** ).                                                         |
  |   $L или $l    |                                                                                  Перенаправление ввода. Используйте один из этих специальных символов для чтения входных данных с устройства или файл, а не с клавиатуры. Это эквивалентно символу перенаправления ввода ( **<** ).                                                                                  |
  |   $B или $b    |                                                                                                                                    Отправляет выходные данные макрос команды. Эти специальные знаки будет эквивалентно использованию вертикальной черты)\*\*                                                                                                                                     |
  |   $T или $t    |                                                            Разделители команд. Используйте один из этих специальных символов в отдельные команды, при создании макросов или введите команды на **doskey** командной строки. Эти специальные символы — это эквивалентно использованию амперсанда ( **&** ) в командной строке.                                                            |
  |      $$       |                                                                                                                                                              Определяет символ доллара ( **$** ).                                                                                                                                                               |
  | $1 – $9 |             Представляет параметры командной строки, которые вы хотите указать при запуске макроса. Специальные символы **$1** через **$9** пакета параметров, которые позволяют использовать разные данные в командной строке при каждом запуске макроса. **$1** знаку в **doskey** команда аналогична **%1** знаку в пакетном файле.             |
  |      $\*      | Представляет все параметры командной строки, чтобы указать, при вводе имени макроса. Специальный символ **$ \\** \* — это подставляемый, аналогичную параметры пакета **$1** через **$9**, с одним важным отличием: все, что введено в командной строке после имени макроса подставляется **$ \\** \* в макросе. |


- Под управлением **doskey** макрос

  Чтобы запустить макрос, введите имя макроса в командной строке, начиная с позиции первого. Если был определен макрос с **$ \\** * или любого из параметров **$1** через **$9**, используйте пробел для разделения параметров. Не удается запустить **doskey** макрос из пакетного файла.
- Создание макроса с тем же именем, что и команда семейства Windows Server 2003

  Если всегда использовать определенной команды с заданными параметрами командной строки, можно создать макрос, который имеет имя, совпадающее с именем команды. Чтобы указать, хотите ли вы запустить макрос или команду, следуйте приведенным ниже рекомендациям:  
  -   Чтобы запустить макрос, введите имя макроса в командной строке. Не добавляйте пробел перед именем макроса.
  -   Чтобы выполнить команду, вставьте один или несколько пробелов в командной строке и введите имя команды.
- Удаление макроса

  Чтобы удалить макрос, введите следующую команду:  
  ```
  doskey <MacroName> =
  ```

## <a name="BKMK_examples"></a>Примеры

**/Macros** и **/history** параметры командной строки можно использовать для создания пакетных программ для сохранения макросов и команд. Например, для хранения всех существующих **doskey** макросы, введите:
```
doskey /macros > macinit 
```
Чтобы использовать макросы, сохраненные в Macinit, введите следующую команду:
```
doskey /macrofile=macinit 
```
Чтобы создать раздел программы TMP.bat, которая содержит ранее использованные команды, введите:
```
doskey /history> tmp.bat 
```
Чтобы определить макрос с несколькими командами, используйте **$t** Чтобы разделить команды, как показано ниже:
```
doskey tx=cd temp$tdir/w $*
```
В приведенном выше примере макрос TX изменяет текущий каталог Temp, а затем отображает список каталогов в расширенном формате. Можно использовать **$ \\** * в конце макроса для задания дополнительных параметров команды, чтобы **dir** при выполнении Передачи.

Следующий макрос использует пакетный параметр для нового имени каталога:
```
doskey mc=md $1$tcd $1
```
Макрос создает новый каталог, а затем изменяет в новый каталог, из текущего каталога.

Чтобы использовать предыдущий макрос для создания и изменения в каталог с именем книги, введите следующую команду:
```
mc books
```
Чтобы создать **doskey** вызван макрос для программы Ftp.exe, включают **/exename** следующим образом:
```
doskey /exename=ftp.exe go=open 172.27.1.100$tmget *.TXT c:\reports$tbye 
```
Чтобы использовать предыдущий макрос, начните работу с FTP. В строке FTP введите следующую команду:
```
go
```
Запуски FTP **откройте**, **mget**, и **bye** команды.

Чтобы создать макрос, быстро и безусловно форматирует диск, введите:
```
doskey qf=format $1 /q /u
```
Чтобы быстро и безусловно отформатировать диск в дисководе A, введите следующую команду:
```
qf a:
```
Чтобы удалить макрос вызывается vlist, введите следующую команду:
```
doskey vlist =
```

#### <a name="additional-references"></a>Дополнительная справка

[Условные обозначения синтаксиса команд командной строки](command-line-syntax-key.md)