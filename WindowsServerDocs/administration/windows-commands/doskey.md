---
title: doskey
description: 'Раздел Windows команды для ****- '
ms.custom: na
ms.prod: windows-server-threshold
ms.reviewer: na
ms.suite: na
ms.technology: manage-windows-commands
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: 4874fd43-d5ea-45f3-ae24-388ae925ed76
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 10/16/2017
ms.openlocfilehash: 6179160b7195be6ddf32f9b77d5da0eed5df34d3
ms.sourcegitcommit: 6f968368c12b9dd699c197afb3a3d13c2211f85b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/26/2019
ms.locfileid: "68544466"
---
# <a name="doskey"></a>doskey



Вызывает Doskey. exe (который повторно вызывает ранее указанные команды командной строки), редактирует командные строки и создает макросы.

В разделе [Примеры](#BKMK_examples) показан принцип использования этой команды.

## <a name="syntax"></a>Синтаксис

```
doskey [/reinstall] [/listsize=<Size>] [/macros:[all | <ExeName>] [/history] [/insert | /overstrike] [/exename=<ExeName>] [/macrofile=<FileName>] [<MacroName>=[<Text>]]
```

## <a name="parameters"></a>Параметры

|       Параметр        |                                                                                                                          Описание                                                                                                                           |
|------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|       /REINSTALL       |                                                                                            Устанавливает новую копию программы Doskey. exe и очищает буфер журнала команд.                                                                                            |
|   /листсизе =\<размер >    |                                                                                                Указывает максимальное количество команд в буфере журнала.                                                                                                 |
|        /Macros         |                                        Отображает список всех макросов **Doskey** . Для перенаправления списка в файл можно использовать символ **>** перенаправления () с параметром **/macros** . Можно сократить значение **/macros** до **/m**.                                         |
|      /Macros: все       |                                                                                                        Отображает макросы **Doskey** для всех исполняемых файлов.                                                                                                         |
|   /Macros:\<ексенаме >   |                                                                                             Отображает макросы **Doskey** для исполняемого файла, указанного параметром *ексенаме*.                                                                                              |
|        /History        |                                    Отображает все команды, которые хранятся в памяти. С помощью символа перенаправления ( **>** ) в **/History** можно перенаправить список в файл. Можно сократить **/History** как **/h**.                                    |
| /инсерт | Указывает, что новый введенный текст вставляется в старый текст. |
| /оверстрике | Указывает, что новый текст перезаписывает старый текст. |
|  /ексенаме =\<ексенаме >   |                                                                                        Указывает программу (исполняемую), в которой выполняется макрос **Doskey** .                                                                                         |
| /макрофиле =\<filename > |                                                                                              Указывает файл, содержащий макросы, которые необходимо установить.                                                                                               |
| \<ИмяМакроса > = [\<текст >]  | Создает макрос, выполняющий команды, указанные в *тексте*. *ИмяМакроса* задает имя, которое необходимо назначить макросу. *Текст* указывает команды, которые необходимо записать. Если *текст* не указан, *макрос имяМакроса* удаляет все назначенные команды. |
|           /?           |                                                                                                              Отображение справки в командной строке.                                                                                                              |

## <a name="remarks"></a>Примечания

- Использование Doskey. exe

  Doskey. exe всегда доступен для всех интерактивных программ на основе символов (таких как отладчики программ или программы передачи файлов) и поддерживает буфер журнала команд и макросы для каждой запускаемой программы. В программе нельзя использовать параметры командной строки **Doskey** . Перед запуском программы необходимо запустить параметры командной строки **Doskey** . Назначения программных клавиш переопределяют назначения клавиш **Doskey** .
- Отзыв команды

  Чтобы отозвать команду, можно использовать любой из следующих разделов после запуска программы Doskey. exe. Если программа Doskey. exe используется в программе, ее сочетания клавиш имеют приоритет.  

  |    Ключ     |                              Описание                              |
  |------------|-----------------------------------------------------------------------|
  |  СТРЕЛКА ВВЕРХ  |  Повторно вызывает команду, которая использовалась до того, как она отображается.  |
  | СТРЕЛКА ВНИЗ |  Повторно вызывает команду, которая использовалась после того, как она отображается.   |
  |  СТРАНИЦА ВВЕРХ   |    Повторно вызывает первую команду, которая использовалась в текущем сеансе.    |
  | СТРАНИЦА ВНИЗ  | Повторно вызывает последнюю команду, которая использовалась в текущем сеансе. |


- Изменение командной строки

  С помощью программы Doskey. exe можно изменить текущую командную строку. Если программа Doskey. exe используется в программе, ее сочетания клавиш имеют приоритет и некоторые ключи редактирования doskey. exe могут не работать.

  В следующей таблице перечислены ключи редактирования **Doskey** и их функции.  

  | Сочетание клавиш или ключа |                                                                                                                                                       Описание                                                                                                                                                       |
  |------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
  |       СТРЕЛКА ВЛЕВО       |                                                                                                                                      Перемещает точку вставки на один символ назад.                                                                                                                                      |
  |      СТРЕЛКА ВПРАВО       |                                                                                                                                    Перемещает точку вставки на один символ вперед.                                                                                                                                     |
  |    CTRL + СТРЕЛКА ВЛЕВО     |                                                                                                                                        Перемещает курсор назад на одно слово.                                                                                                                                         |
  |    CTRL + СТРЕЛКА ВПРАВО    |                                                                                                                                       Перемещает курсор вперед на одно слово.                                                                                                                                       |
  |          ГЛАВНАЯ          |                                                                                                                                 Перемещает точку вставки в начало строки.                                                                                                                                 |
  |          КОНЦЕ           |                                                                                                                                    Перемещает точку вставки в конец строки.                                                                                                                                    |
  |          ESC           |                                                                                                                                          Удаляет команду из экрана.                                                                                                                                           |
  |           F1           |                                                                      Копирует один символ из столбца шаблона в тот же столбец в окне командной строки. (Шаблон — это буфер памяти, в котором содержится последняя введенная команда.)                                                                       |
  |           F2           |                                                                 Поиск в шаблоне для следующего ключа, введенного после нажатия клавиши F2. Doskey. exe вставляет текст из шаблона — вплоть до символа, который вы указали, но не включая.                                                                  |
  |           F3           |                                                 Копирует оставшуюся часть шаблона в командную строку. Программа Doskey. exe начинает копирование символов из позиции в шаблоне, которая соответствует положению, указанному точкой вставки в командной строке.                                                 |
  |           F4           |                                                                            Удаляет все символы из текущей позиции курсора до (но не включая) следующего вхождения символа, введенного после нажатия клавиши F4.                                                                            |
  |           F5           |                                                                                                                                   Копирует шаблон в текущую командную строку.                                                                                                                                    |
  |           F6           |                                                                                                                    Помещает символ конца файла (CTRL + Z) в текущую позицию точки вставки.                                                                                                                    |
  |           F7           | Отображает (в диалоговом окне) все команды для этой программы, которые хранятся в памяти. Используйте клавишу Стрелка вверх и клавишу Стрелка вниз, чтобы выбрать нужную команду, и нажмите клавишу ВВОД, чтобы выполнить команду. Кроме того, можно отметить порядковый номер перед командой и использовать его в сочетании с клавишей F9. |
  |         ALT + F7         |                                                                                                                          Удаляет все команды, хранящиеся в памяти, для текущего буфера журнала.                                                                                                                          |
  |           F8           |                                                                                                           Отображает все команды в буфере журнала, которые начинаются с символов в текущей команде.                                                                                                            |
  |           F9           |                                             Запрашивает номер команды буфера журнала, а затем отображает команду, связанную с указанным номером. Нажмите клавишу ВВОД, чтобы выполнить команду. Чтобы отобразить все числа и связанные с ними команды, нажмите клавишу F7.                                             |
  |        ALT + F10         |                                                                                                                                             Удаляет все определения макросов.                                                                                                                                              |


- Использование **Doskey** в программе

  Некоторые интерактивные программы на основе символов, такие как отладчики программ или программы передачи файлов (FTP), автоматически используют Doskey. exe. Чтобы использовать Doskey. exe, программа должна быть консольным процессом и использовать буферизованный ввод. Назначения программных клавиш переопределяют назначения клавиш **Doskey** . Например, если программа использует для функции клавишу F7, вы не сможете получить журнал команд **Doskey** во всплывающем окне.

  С помощью программы Doskey. exe можно вести журнал команд для каждой запускаемой или повторяемой программой. Вы можете изменить предыдущие команды в командной строке программы и запустить макросы **Doskey** , созданные для программы. Если выйти и перезапустить программу из окна командной строки, то доступен журнал команд из предыдущего сеанса программы.

  Перед запуском программы необходимо запустить программу Doskey. exe. Параметры командной строки **Doskey** нельзя использовать в командной строке программы, даже если программа имеет команду оболочки.

  Если вы хотите настроить работу программы Doskey. exe с программой и создать макросы **Doskey** для этой программы, можно создать пакетную программу, которая изменяет Doskey. exe и запускает программу.
- Указание режима вставки по умолчанию

  При нажатии клавиши INSERT можно ввести текст в командную строку **Doskey** в процессе существующего текста, не заменяя текст. Однако после нажатия клавиши ВВОД программа Doskey. exe вернет клавиатуру в режим замены. Необходимо нажать клавишу INSERT еще раз, чтобы вернуться в режим вставки.

  Используйте **/инсерт** для переключения клавиатуры в режим вставки при каждом нажатии клавиши ВВОД. Клавиатура по сути остается в режиме вставки, пока не будет использоваться **/оверстрике**. Вы можете временно вернуться в режим замены, нажав клавишу INSERT, но после нажатия клавиши Ввод Doskey. exe вернет клавиатуру в режим вставки.

  Форма курсора изменится при использовании клавиши INSERT для переключения из одного режима в другой.
- Создание макроса

  Doskey. exe можно использовать для создания макросов, выполняющих одну или несколько команд. В следующей таблице перечислены специальные символы, которые можно использовать для управления операциями команды при определении макроса.  

  |   Символов   |                                                                                                                                                                               Описание                                                                                                                                                                               |
  |---------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
  |   $G или $g    |                                                                                   Перенаправляет выходные данные. Используйте любой из этих специальных символов для отправки выходных данных на устройство или в файл, а не на экран. Этот символ эквивалентен символу перенаправления для Output ( **>** ).                                                                                    |
  | $G $ G или $g $ g  |                                                         Добавляет выходные данные в конец файла. Используйте любой из этих двух символов, чтобы добавить выходные данные в существующий файл вместо того, чтобы заменять данные в файле. Эти двойные символы эквивалентны символу перенаправления добавления для Output ( **>>** ).                                                         |
  |   $L или $l    |                                                                                  Перенаправляет входные данные. Используйте любой из этих специальных символов для чтения входных данных с устройства или файла, а не с клавиатуры. Этот символ эквивалентен символу перенаправления для ввода ( **<** ).                                                                                  |
  |   $B или $b    |                                                                                                                                    Отправляет выходные данные макроса в команду. Эти специальные символы эквивалентны использованию канала (\*\*                                                                                                                                     |
  |   $T или $t    |                                                            Разделяет команды. Используйте любой из этих специальных символов для разделения команд при создании макросов или команд ввода в командной строке **Doskey** . Эти специальные символы эквивалентны использованию амперсанда ( **&** ) в командной строке.                                                            |
  |      $$       |                                                                                                                                                              Задает символ знака доллара ( **$** ).                                                                                                                                                               |
  | от $1 до $9 |             Представляет все сведения о командной строке, которые необходимо указать при запуске макроса. Специальные символы от **$1** до **$9** — это параметры пакетной службы, позволяющие использовать в командной строке разные данные при каждом запуске макроса. Символ **$1** в команде **Doskey** аналогичен символу **% 1** в пакетной программе.             |
  |      $\*      | Представляет все сведения командной строки, которые необходимо указать при вводе имени макроса. Специальный **$ символ\\** **— это** заменяемый параметр, аналогичный пакетным параметрам $1 – $9, с одним важным различием: все, что вводится в командной строке после  \* Имя макроса заменяется **$ \\** \* на в макросе. |


- Запуск макроса **Doskey**

  Чтобы запустить макрос, введите имя макроса в командной строке, начиная с первой позиции. Если макрос был определен с помощью * или любого из параметров пакета **$ \\** с **$1** по **$9**, используйте пробел для разделения параметров. Макросы **Doskey** нельзя запускать из пакетной программы.
- Создание макроса с тем же именем, что и команда семейства Windows Server 2003

  Если вы всегда используете определенную команду с определенными параметрами командной строки, можно создать макрос, имя которого совпадает с именем команды. Чтобы указать, нужно ли выполнять макрос или команду, следуйте приведенным ниже рекомендациям.  
  -   Чтобы запустить макрос, введите имя макроса в командной строке. Не добавляйте пробел перед именем макроса.
  -   Чтобы выполнить команду, вставьте в командную строку один или несколько пробелов, а затем введите имя команды.
- Удаление макроса

  Чтобы удалить макрос, введите:  
  ```
  doskey <MacroName> =
  ```

## <a name="BKMK_examples"></a>Примеров

Параметры командной строки **/macros** и **/History** полезны при создании пакетных программ для сохранения макросов и команд. Например, чтобы сохранить все текущие макросы **Doskey** , введите:
```
doskey /macros > macinit 
```
Чтобы использовать макросы, хранящиеся в МаЦинит, введите:
```
doskey /macrofile=macinit 
```
Чтобы создать пакетную программу с именем tmp. bat, содержащую недавно использованные команды, введите:
```
doskey /history> tmp.bat 
```
Чтобы определить макрос с несколькими командами, используйте **$t** для разделения команд следующим образом:
```
doskey tx=cd temp$tdir/w $*
```
В предыдущем примере макрос TX изменяет текущий каталог на temp, а затем отображает список каталогов в расширенном формате отображения. В конце макроса можно использовать **$ \\** *, чтобы добавить другие параметры командной строки для **dir** при запуске TX.

Следующий макрос использует параметр Batch для нового имени каталога:
```
doskey mc=md $1$tcd $1
```
Макрос создает новый каталог, а затем переходит в новый каталог из текущего каталога.

Чтобы использовать предыдущий макрос для создания и изменения каталога с именем books, введите:
```
mc books
```
Чтобы создать макрос **Doskey** для программы с именем FTP. exe, включите **/ексенаме** , как показано ниже.
```
doskey /exename=ftp.exe go=open 172.27.1.100$tmget *.TXT c:\reports$tbye 
```
Чтобы использовать предыдущий макрос, запустите FTP. В командной строке FTP введите:
```
go
```
FTP выполняет команды **Open**, **mget**и **Bye** .

Чтобы создать макрос, который быстро и безусловно форматирует диск, введите:
```
doskey qf=format $1 /q /u
```
Чтобы быстро и безусловно форматировать диск в дисководе A, введите:
```
qf a:
```
Чтобы удалить макрос с именем Влист, введите:
```
doskey vlist =
```

#### <a name="additional-references"></a>Дополнительная справка

[Условные обозначения синтаксиса команд командной строки](command-line-syntax-key.md)
