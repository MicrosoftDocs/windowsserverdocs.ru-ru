---
title: nfsadmin
description: 'Раздел Windows команды для ****- '
ms.custom: na
ms.prod: windows-server
ms.reviewer: na
ms.suite: na
ms.technology: manage-windows-commands
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: 7375b2cf-c6b8-45b5-abf6-6c10e462defd
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 10/16/2017
ms.openlocfilehash: 2658cf610e4328d382b9224f4230d68a022d1cc3
ms.sourcegitcommit: 6aff3d88ff22ea141a6ea6572a5ad8dd6321f199
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/27/2019
ms.locfileid: "71373217"
---
# <a name="nfsadmin"></a>nfsadmin

>Область применения. Windows Server (половина ежегодного канала), Windows Server 2016, Windows Server 2012 R2, Windows Server 2012

С помощью **nfsadmin** можно управлять сервером для NFS и клиентом для NFS.  
  
## <a name="syntax"></a>Синтаксис  
**nfsadmin server** `[`*имя_компьютера*`] [` @ no__t-4U *имя_пользователя*`[` @ no__t-7p *пароль*`]]` 0l  
  
**nfsadmin server** `[`*имя_компьютера*`] [` @ no__t-4U *имя_пользователя* `[` @ no__t-7p *пароль*`]]` 0R 1*Client* 3 ALL @ no__t-14  
  
**nfsadmin server** `[`*имя_компьютера*`] [` @ no__t-4U *имя_пользователя* `[` @ no__t-7p *Password*`]] {`start 0 остановкой @ no__t-11  
  
**nfsadmin server** `[`*имя_компьютера*`] [` @ no__t-4U *имя_пользователя* `[` @ no__t-7p *Password*`]]` *параметр*конфигурации 1  
  
**nfsadmin server** `[`*имя_компьютера*`] [` @ no__t-4U *имя_пользователя* `[` @ no__t-7P *пароль*`]]` CreateGroup *имя*  
  
**nfsadmin server** `[`*имя_компьютера*`] [` @ no__t-4U *имя_пользователя* `[` @ no__t-7p *пароль*`]]` ListGroups  
  
**nfsadmin server** `[`*имя_компьютера*`] [` @ no__t-4U *имя_пользователя* `[` @ no__t-7P *пароль*`]]` делетеграуп *имя*  
  
**nfsadmin server** `[`*имя_компьютера*`] [` @ no__t-4U *имя_пользователя* `[` @ no__t-7P *Password*`]]` ренамеграуп *oldname newname*  
  
**nfsadmin server** `[`*имя_компьютера*`] [` @ no__t-4U *имя_пользователя* `[` @ no__t-7P *пароль*`]]` аддмемберс *узел имен*1  
  
**nfsadmin server** `[`*имя_компьютера*`] [` @ no__t-4U *имя_пользователя* `[` @ no__t-7p *пароль*`]]` листмемберс  
  
**nfsadmin server** `[`*имя_компьютера*`] [` @ no__t-4U *имя_пользователя* `[` @ no__t-7P *пароль*`]]` делетемемберс *узла группы*1  
  
**nfsadmin client** `[`*имя_компьютера*`] [` @ no__t-4U *имя_пользователя* `[` @ no__t-7p *Password*`]] {`start 0 остановкой @ no__t-11  
  
**nfsadmin client** `[`*имя_компьютера*`] [` @ no__t-4U *имя_пользователя* `[` @ no__t-7p *Password*`]]` *параметр*конфигурации 1  
  
## <a name="description"></a>Описание  
Служебная программа **nfsadmin** Command @ no__t-1line используется для администрирования сервера для NFS или клиента для NFS на локальном или удаленном компьютере, где работают службы Майкрософт для сетевой файловой системы \(NFS @ no__t-3. Если вы вошли в систему с учетной записью, не имеющей необходимых привилегий, можно указать имя пользователя и пароль учетной записи, которая имеет значение. Действие, выполняемое командой **nfsadmin** , зависит от предоставленных аргументов команды.  
  
В дополнение к аргументам и параметрам команды Service @ no__t-0specific команда **nfsadmin** принимает следующие значения:  
  
*computerName*  
Указывает удаленный компьютер, который требуется администрировать. Можно указать компьютер, используя службу Windows Internet Name Service \(WINS @ no__t-1 Name или доменное имя \(DNS @ no__t-3, или протокол Интернета \(IP @ no__t-5 Address.  
  
*имя пользователя* **\-U**  
Указывает имя пользователя, учетные данные которого будут использоваться. Может потребоваться добавить доменное имя в имя пользователя в формате <em>домен</em> **\\** <em>имя_пользователя</em> .  
  
**\-p** *пароль*  
Указывает пароль пользователя, указанного с помощью параметра **\-U** . Если указать параметр **\-U** , но опустить параметр **\-p** , будет предложено ввести пароль пользователя.  
  
#### <a name="administering-server-for-nfs"></a>Администрирование сервера для NFS  
Используйте команду **nfsadmin Server** для администрирования сервера для NFS. Конкретное действие, принимаемое **nfsadmin Server** , зависит от параметра команды или аргумента, которые вы указали:  
  
**@no__t 1L**  
Список всех блокировок, удерживаемых клиентами.  
  
**\-R** {*Client* | **ALL**}  
Освобождает блокировки, удерживаемые *клиентом* , или, если **все** они указаны, всеми клиентами.  
  
**start**  
запускает службу сервера для NFS.  
  
**позиции**  
Останавливает службу сервера для NFS.  
  
**файле**  
Задает общие параметры для сервера для NFS. Необходимо указать хотя бы один из следующих параметров с помощью аргумента команды **config** :  
  
**мапсвр @ no__t-1**<em>сервер</em>  
Задает *сервер* в качестве сервера сопоставление имен пользователей Server для NFS. Хотя этот параметр по прежнему поддерживается для совместимости с предыдущими версиями, вместо него следует использовать служебную программу **сфуадмин** .  
  
**аудитлокатион @ no__t-1**{**EventLog** | **file** | **оба** | **None**}  
Указывает, будут ли события проверяться и где будут записываться события. Требуется один из следующих аргументов.  
  
**дальнейшее**  
Указывает, что события аудита будут записываться только в журнал приложений Просмотр событий.  
  
**File**  
Указывает, что события аудита будут записываться только в файл, указанный в **конфигурации fname**.  
  
**как**  
Указывает, что события аудита будут записываться в журнал приложений Просмотр событий, а также в файл, указанный в **конфигурации fname**.  
  
**None**  
Указывает, что аудит событий не будет выполняться.  
  
**fname @ no__t-1**<em>файл</em>  
Задает файл, указанный параметром *File* , в качестве файла аудита. Значение по умолчанию —% сфудир% @no__t -0log\\nfssvr.log  
  
**fsize @ no__t-1**\=*Размер*  
Задает *максимальный размер файла* аудита в мегабайтах. По умолчанию максимальный размер равен 7 МБ.  
  
**Audit @ no__t-1**\[ **\+** | **\-** \]**mount** \=0**2**3**5**6**Read** 8**0**1 **@no__ t-23**4**Write** @no__t — 26**8**9**1**2**CREATE** 4**6**7**9**0**Delete** 2 **@no__ t-44**5**7**8**lock** 0 **@no__t-** 52 3**5**6**ALL**  
Указывает события, регистрируемые в журнале. Чтобы начать запись в журнал события, введите знак плюс \( **\+** \) перед именем события; Чтобы отключить запись событий в журнал, введите знак минус \( **\-** \) перед именем события. Если знак пропущен, предполагается знак плюс. Не используйте **ALL** с любым другим именем события.  
  
**локкпериод @ no__t-1**<em>секунда</em>  
Указывает время в секундах, в течение которого сервер для NFS будет ожидать освобождения блокировок после того, как подключение к серверу для NFS было потеряно, а затем повторно установлено или после перезапуска службы сервера для NFS.  
  
Портмаппротокол @ no__t-0 {TCP | UDP | TCP @ no__t-1UDP  
Указывает, какие транспортные протоколы поддерживает сопоставление портов. Значение по умолчанию — **TCP @ no__t-1UDP**.  
  
маунтпротокол @ no__t-0 {TCP | UDP | TCP @ no__t-1UDP}  
Указывает, какие транспортные протоколы поддерживают подключение. Значение по умолчанию — **TCP @ no__t-1UDP**.  
  
нфспротокол @ no__t-0 {TCP | UDP | TCP @ no__t-1UDP}  
Указывает, какие транспортные протоколы поддерживает сетевая файловая система \(NFS @ no__t-1. Значение по умолчанию — **TCP @ no__t-1UDP**  
  
нлмпротокол @ no__t-0 {TCP | UDP | TCP @ no__t-1UDP}  
Указывает, какие транспортные протоколы Диспетчер сетевых блокировок \(NLM @ no__t-1 поддерживает. Значение по умолчанию — **TCP @ no__t-1UDP**.  
  
нсмпротокол @ no__t-0 {TCP | UDP | TCP @ no__t-1UDP}  
Указывает, какие транспортные протоколы диспетчер состояния сети \(NSM @ no__t-1 поддерживает. Значение по умолчанию — **TCP @ no__t-1UDP**.  
  
**enableV3 @ no__t-1**{**Да** | **No**}  
Указывает, будут ли поддерживаться протоколы NFS версии 3. Значение по умолчанию — **Да**.  
  
**реневаус @ no__t-1**{**Да** | **No**}  
Указывает, требуется ли повторная проверка подлинности клиентских подключений после периода, указанного параметром **config реневаусинтервал**. Значение по умолчанию — **нет**.  
  
**реневаусинтервал @ no__t-1**<em>секунда</em>  
Указывает число секунд, которое должно пройти до принудительной повторной проверки подлинности клиента, если для **config реневаус** задано значение **Yes**. Значение по умолчанию — 600 секунд.  
  
**диркаче @ no__t-1**<em>Размер</em>  
Указывает размер кэша каталога в килобайтах. Число, указанное как *size* , должно быть кратно 4 в диапазоне от 4 до 128. Размер каталога по умолчанию @ no__t-0cache — 128 КБ.  
  
**транслатионфиле**\= @ no__t-2file @ no__t-3  
Указывает файл, содержащий сведения о сопоставлении для замены символов в именах файлов при их перемещении из Windows @ no__t-0based в файловые системы UNIX @ no__t-1based. Если *файл* не указан, то преобразование символов в имени файла отключено. Если значение **транслатионфиле** изменено, необходимо перезапустить сервер, чтобы изменения вступили в силу.  
  
**дотфилешидден**\= {**Да** | **No**}  
Указывает, создаются ли файлы с именами, начинающимися с точки \(. \) будет помечен как скрытый в файловой системе Windows и, соответственно, скрыты от клиентов NFS. Значение по умолчанию — **нет**.  
  
**касесенситивелукупс @ no__t-1**{**Да** | **No**}  
Указывает, будет ли поиск в каталоге учитываться с учетом регистра \(requiring точное совпадение символьного регистра @ no__t-1.  
  
Чтобы сервер для NFS поддерживал имена файлов Case @ no__t-1sensitive, необходимо отключить Windows kernel Case @ no__t-0insensitivity. Можно отключить Windows kernel Case @ no__t-0insensitivity, сняв следующий раздел реестра в 0:  
  
HKLM @ no__t-0SYSTEM @ no__t-1CurrentControlSet @ no__t-2Control @ no__t-3Session Manager @ no__t-4kernel  
  
DWOrd обкасеинсенситиве   
  
> [!IMPORTANT]  
> Этот раздел относится только к Windows Server 2008 R2, Windows Server 2008 и Windows Server 2003. Этот раздел не относится к Windows Server 2012 R2 или Windows Server 2012.  
  
**нтфскасе @ no__t-1**{**Lower** | **верхний** | **Preserve**}  
Указывает, будет ли регистр символов в именах файлов в файловой системе NTFS возвращаться в нижнем или верхнем регистре или в форме, хранящейся в каталоге. Значение по умолчанию — **Preserve**. Этот параметр нельзя изменить, если для **касесенситивелукупс** задано значение **Да**.  
  
*имя* CreateGroup  
создает новую группу клиентов, предоставляя ей указанное *имя*.  
  
**ListGroups**  
Отображает имена всех групп клиентов.  
  
*имя* делетеграуп  
Удаляет группу клиентов, указанную по *имени*.  
  
**ренамеграуп** *oldname newname*  
изменяет имя группы клиентов, заданной параметром *oldname* , на *новое_имя*  
  
**аддмемберс** *имя узла*\[... \]  
Добавляет *узел* в группу клиентов, указанную по *имени*.  
  
*имя* листмемберс  
список узлов в группе клиентов, заданной по *имени*.  
  
*узел группы*делетемемберс \[... \]  
удаляет клиент, указанный *узлом* , из группы клиентов, указанной в поле *Группа*.  
  
Если параметр или аргумент команды не задан, команда **nfsadmin Server** отображает текущие параметры конфигурации сервера для NFS.  
  
#### <a name="administering-client-for-nfs"></a>Администрирование клиента для NFS  
Используйте команду **nfsadmin Client** для администрирования клиента для NFS. Конкретное действие, принимаемое командой **nfsadmin Client** , зависит от указанного аргумента команды:  
  
**start**  
запускает службу клиента для NFS.  
  
**позиции**  
Останавливает службу клиента для NFS.  
  
**файле**  
Задает общие параметры для клиента для NFS. Необходимо указать хотя бы один из следующих параметров с помощью аргумента команды **config** :  
  
**FileAccess @ no__t-1**<em>mode</em>  
-   Указывает режим разрешений по умолчанию для файлов, созданных на серверах сетевой файловой системы \(NFS @ no__t-1. Аргумент *mode* состоит из трех цифр от 0 до 7 \(inclusive @ no__t-2, представляющих разрешения по умолчанию, предоставленные пользователю, группе и другим пользователям \(respectively @ no__t-4. Цифры преобразуются в разрешения UNIX @ no__t-0style следующим образом: 0 @ no__t-0none, 1 @ no__t-1x, 2 @ no__t-2W, 3 @ no__t-3WX, 4 @ no__t-4R, 5 @ no__t-5rx, 6 @ no__t-6rw и 7 @ no__t-7rwx. Например, **FileAccess @ no__t-1750** предоставляет rwx разрешение для владельца, разрешение Rx для группы и разрешение на доступ к другим пользователям.  
  
**мапсвр @ no__t-1**<em>сервер</em>  
Задает *сервер* в качестве сервера сопоставление имен пользователей для клиента для NFS. Хотя этот параметр по прежнему поддерживается для совместимости с предыдущими версиями, вместо него следует использовать служебную программу **сфуадмин** .  
  
**мтипе @ no__t-1**{**Hard**@no__t – 3**Soft**}  
Указывает тип подключения по умолчанию. Для подключения с жестким подключением клиент для NFS повторяет сбой RPC, пока он не завершится успешно. Для мягкого подключения клиент для NFS возвращает ошибку вызывающему приложению после повторного выполнения вызова, указанного в параметре **Retry** .  
  
**повторить @ no__t-1**<em>номер</em>  
Указывает количество попыток установить подключение для мягкого подключения. Это значение должно быть от 1 до 10 включительно. Значение по умолчанию — 1.  
  
**время ожидания @ no__t-1**<em>с</em>  
Указывает время ожидания (в секундах) для подключения \(remote вызов процедуры @ no__t-1. Это значение должно быть 0,8, 0,9 или целым числом от 1 до 60 включительно. Значение по умолчанию — 0,8.  
  
**Протокол @ no__t-1 {TCP | UDP | TCP @ no__t-2UDP}**  
Указывает, какие транспортные протоколы поддерживает клиент. Значение по умолчанию — **TCP @ no__t-1UDP**  
  
**rsize @ no__t-1**<em>Размер</em>  
Задает размер буфера чтения в килобайтах. Это значение может быть 0,5, 1, 2, 4, 8, 16 или 32. Значение по умолчанию — 32.  
  
**всизе @ no__t-1**<em>Размер</em>  
Задает размер буфера записи в килобайтах. Это значение может быть 0,5, 1, 2, 4, 8, 16 или 32. Значение по умолчанию — 32.  
  
**Perf @ no__t-1Default**  
Восстанавливает следующие параметры производительности в значения по умолчанию:  
  
-   **мтипе**  
  
-   **Повторите**  
  
-   **timeout**  
  
-   **rsize**  
  
-   **всизе**  
  
**FileAccess @ no__t-1**<em>mode</em>  
Указывает режим разрешений по умолчанию для файлов, созданных на серверах сетевой файловой системы \(NFS @ no__t-1. Аргумент *mode* состоит из трех цифр от 0 до 7 \(inclusive @ no__t-2, представляющих разрешения по умолчанию, предоставленные пользователю, группе и другим пользователям \(respectively @ no__t-4. Цифры преобразуются в разрешения UNIX @ no__t-0style следующим образом: 0 @ no__t-0none, 1 @ no__t-1x, 2 @ no__t-2W, 3 @ no__t-3WX, 4 @ no__t-4R, 5 @ no__t-5rx, 6 @ no__t-6rw и 7 @ no__t-7rwx. Например, **FileAccess @ no__t-1750** предоставляет rwx разрешение для владельца, разрешение Rx для группы и разрешение на доступ к другим пользователям.  
  
Если параметр или аргумент команды не задан, команда **nfsadmin Client** отображает текущие параметры конфигурации клиента для NFS.  
  

