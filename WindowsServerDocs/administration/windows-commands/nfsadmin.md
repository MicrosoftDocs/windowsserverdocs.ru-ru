---
title: nfsadmin
description: Справочный раздел по * * * *-
ms.prod: windows-server
ms.technology: manage-windows-commands
ms.topic: article
ms.assetid: 7375b2cf-c6b8-45b5-abf6-6c10e462defd
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 10/16/2017
ms.openlocfilehash: c8020b028a046ead36b5f95604cd81d679861746
ms.sourcegitcommit: ab64dc83fca28039416c26226815502d0193500c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/01/2020
ms.locfileid: "82723776"
---
# <a name="nfsadmin"></a>nfsadmin

> Область применения: Windows Server (половина ежегодного канала), Windows Server 2019, Windows Server 2016, Windows Server 2012 R2, Windows Server 2012

С помощью **nfsadmin** можно управлять сервером для NFS и клиентом для NFS.  
  
## <a name="syntax"></a>Синтаксис  
**nfsadmin Server** `[` *ComputerName*`] [``[``]]` *UserName* \-u имя_пользователя\-p *Password* l\-  
  
**nfsadmin Server** `[` *ComputerName*`] [` \- `{` *client* *Password* `|` *UserName* `]]` u username `[`p пароль \-r Client All\-`}`  
  
**nfsadmin Server** `[` *ComputerName*`] [` \- `|` *UserName* `]] {`u имя_пользователя `[`p *пароль*начало работы\-`}`  
  
**nfsadmin Server** `[` *ComputerName*`] [` `[``]]` *Option* *Password* *UserName* u имя_пользователя \-p Password параметр конфигурации\-`[...]`  
  
**nfsadmin Server** `[` *ComputerName*`] [` `[``]]` *Name* *Password* *UserName* u имя_пользователя \-p Password CreateGroup имя\-  
  
**nfsadmin Server** `[` *ComputerName*`] [` `[``]]` *UserName* u имя_пользователя \-p *Password* ListGroups\-  
  
**nfsadmin Server** `[` *ComputerName*`] [` `[``]]` *Name* *Password* *UserName* u имя_пользователя \-p Password делетеграуп имя\-  
  
**nfsadmin Server** `[` *ComputerName*`] [` `[` *Password* *UserName* `]]` *OldName NewName* u имя_пользователя \-p Password ренамеграуп oldname newname\-  
  
**nfsadmin Server** `[` *ComputerName*`] [` `[` *Password* *UserName* `]]` *Name Host* u имя_пользователя \-p пароль аддмемберс имя узла\-`[...]`  
  
**nfsadmin Server** `[` *ComputerName*`] [` `[``]]` *UserName* u имя_пользователя \-p *Password* листмемберс\-  
  
**nfsadmin Server** `[` *ComputerName*`] [` `[` *Password* *UserName* `]]` *Group Host* u имя_пользователя \-p Password делетемемберс Group узел\-`[...]`  
  
**nfsadmin Client** `[` *ComputerName*`] [` \- `|` *UserName* `]] {`u имя_пользователя `[`p *пароль*начало работы\-`}`  
  
**nfsadmin Client** `[` *ComputerName*`] [` `[``]]` *Option* *Password* *UserName* u имя_пользователя \-p Password параметр конфигурации\-`[...]`  
  
## <a name="description"></a>Описание  
Служебная программа\-командной строки nfsadmin используется для администрирования сервера для NFS или клиента для NFS на локальном или удаленном компьютере, на котором работают службы \(Microsoft\)для сетевой файловой системы NFS. **nfsadmin** Если вы вошли в систему с учетной записью, не имеющей необходимых привилегий, можно указать имя пользователя и пароль учетной записи, которая имеет значение. Действие, выполняемое командой **nfsadmin** , зависит от предоставленных аргументов команды.  
  
Помимо\-аргументов и параметров командной строки, команда **nfsadmin** принимает следующие значения:  
  
*computerName*  
Указывает удаленный компьютер, который требуется администрировать. Можно \(указать компьютер, используя имя WINS\) службы Windows Internet Name Service или DNS \(\) -имя системы доменных имен или IP- \(\) адрес протокола Интернета.  
  
*UserName* ** \-u** имя_пользователя  
Указывает имя пользователя, учетные данные которого будут использоваться. Может потребоваться добавить доменное имя в имя пользователя в формате <em>домен</em>**\\**<em>имя_пользователя</em> .  
  
*Password* ** \-p** пароль  
Указывает пароль пользователя, указанного с помощью параметра ** \-u** . Если указать параметр ** \-u** , но опустить параметр ** \-p** , будет предложено ввести пароль пользователя.  
  
#### <a name="administering-server-for-nfs"></a>Администрирование сервера для NFS  
Используйте команду **nfsadmin Server** для администрирования сервера для NFS. Конкретное действие, принимаемое **nfsadmin Server** , зависит от параметра команды или аргумента, которые вы указали:  
  
**\-н**  
Список всех блокировок, удерживаемых клиентами.  
  
r {*клиент* | **все**} ** \-**  
Освобождает блокировки, удерживаемые *клиентом* , или, если **все** они указаны, всеми клиентами.  
  
**start**  
запускает службу сервера для NFS.  
  
**stop**  
Останавливает службу сервера для NFS.  
  
**файле**  
Задает общие параметры для сервера для NFS. Необходимо указать хотя бы один из следующих параметров с помощью аргумента команды **config** :  
  
<em>сервер</em> **мапсвр\=**  
Задает *сервер* в качестве сервера сопоставление имен пользователей Server для NFS. Хотя этот параметр по прежнему поддерживается для совместимости с предыдущими версиями, вместо него следует использовать служебную программу **сфуадмин** .  
  
**аудитлокатион\=**{**eventlog** | **file**файл | **both**журнала {**None**} |   
Указывает, будут ли события проверяться и где будут записываться события. Требуется один из следующих аргументов.  
  
**дальнейшее**  
Указывает, что события аудита будут записываться только в журнал приложений Просмотр событий.  
  
**File**  
Указывает, что события аудита будут записываться только в файл, указанный в **конфигурации fname**.  
  
**как**  
Указывает, что события аудита будут записываться в журнал приложений Просмотр событий, а также в файл, указанный в **конфигурации fname**.  
  
**отсутствуют**  
Указывает, что аудит событий не будет выполняться.  
  
**fname\=**,<em>файл</em>  
Задает файл, указанный параметром *File* , в качестве файла аудита. Значение по умолчанию —%\\сфудир\\% log нфссвр. log  
  
**размер\=fsize**\=*size*  
Задает *максимальный размер файла* аудита в мегабайтах. По умолчанию максимальный размер равен 7 МБ.  
  
**Аудит\=** \] **all** **mount** | **read** **create** **delete** **locking** **write** подключения чтение и запись \[Create \]удалить блокировка \[ **\+** **\+** \[ | **\-** | **\-** \[ **\+** | \] \] **\+** | **\-** \[ **\-** \] \] \[ **\+** | **\-**|**\-**\[**\+**\] **\+** **\-**  
Указывает события, регистрируемые в журнале. Чтобы начать запись в журнал события, введите знак " \( **\+** \) плюс" перед именем события; Чтобы отключить запись событий в журнал, введите знак \( **\-** \) "минус" перед именем события. Если знак пропущен, предполагается знак плюс. Не используйте **ALL** с любым другим именем события.  
  
**локкпериод\=**<em>секунд</em>  
Указывает время в секундах, в течение которого сервер для NFS будет ожидать освобождения блокировок после того, как подключение к серверу для NFS было потеряно, а затем повторно установлено или после перезапуска службы сервера для NFS.  
  
Портмаппротокол\={TCP | UDP | TCP\+UDP  
Указывает, какие транспортные протоколы поддерживает сопоставление портов. Значение по умолчанию **—\+TCP UDP**.  
  
маунтпротокол\={TCP | UDP | TCP\+UDP}  
Указывает, какие транспортные протоколы поддерживают подключение. Значение по умолчанию **—\+TCP UDP**.  
  
нфспротокол\={TCP | UDP | TCP\+UDP}  
Указывает, какие транспортные протоколы поддерживает \(NFS\) в сетевой файловой системе. Значение по умолчанию **—\+TCP UDP** .  
  
нлмпротокол\={TCP | UDP | TCP\+UDP}  
Указывает, какие транспортные протоколы \(поддерживаются\) диспетчером сетевой блокировки NLM. Значение по умолчанию **—\+TCP UDP**.  
  
нсмпротокол\={TCP | UDP | TCP\+UDP}  
Указывает, какие транспортные протоколы \(поддерживаются\) диспетчером состояния сети NSM. Значение по умолчанию **—\+TCP UDP**.  
  
**enableV3\=**{**Да** | **нет**}  
Указывает, будут ли поддерживаться протоколы NFS версии 3. Значение по умолчанию — **Да**.  
  
**реневаус\=**{**Да** | **нет**}  
Указывает, требуется ли повторная проверка подлинности клиентских подключений после периода, указанного параметром **config реневаусинтервал**. Значение по умолчанию — **нет**.  
  
**реневаусинтервал\=**<em>секунд</em>  
Указывает число секунд, которое должно пройти до принудительной повторной проверки подлинности клиента, если для **config реневаус** задано значение **Yes**. Значение по умолчанию — 600 секунд.  
  
<em>Размер</em> **диркаче\=**  
Указывает размер кэша каталога в килобайтах. Число, указанное как *size* , должно быть кратно 4 в диапазоне от 4 до 128. Размер кэша каталога\-по умолчанию составляет 128 КБ.  
  
**файл транслатионфиле**\=\[\]  
Указывает файл, содержащий сведения о сопоставлении для замены символов в именах файлов при их перемещении из\-Windows\-в файловые системы на основе UNIX. Если *файл* не указан, то преобразование символов в имени файла отключено. Если значение **транслатионфиле** изменено, необходимо перезапустить сервер, чтобы изменения вступили в силу.  
  
**дотфилешидден**\={**Да** | **нет**}  
Указывает, создаются ли файлы с именами, начинающимися с точки \(. \) будет помечен как скрытый в файловой системе Windows и, следовательно, скрыт от клиентов NFS. Значение по умолчанию — **нет**.  
  
**касесенситивелукупс\=**{**Да** | **нет**}  
Указывает, будет ли поиск в каталоге учитываться с \(учетом регистра, обязательного\)для точного соответствия регистру символов.  
  
Также необходимо отключить чувствительность к регистру\-в ядре Windows, чтобы сервер для NFS поддерживал имена файлов с\-учетом регистра. Можно отключить чувствительность к регистру\-в ядре Windows, сняв следующий раздел реестра в 0:  
  
Ядро\\System\\CurrentControlSet\\управление\\сеансами\\диспетчер сеансов  
  
DWOrd обкасеинсенситиве   
  
> [!IMPORTANT]  
> Этот раздел относится только к Windows Server 2008 R2, Windows Server 2008 и Windows Server 2003. Этот раздел не относится к Windows Server 2012 R2 или Windows Server 2012.  
  
**нтфскасе\=**{**Нижняя** | **upper**верхняя | **сохраненная}**  
Указывает, будет ли регистр символов в именах файлов в файловой системе NTFS возвращаться в нижнем или верхнем регистре или в форме, хранящейся в каталоге. Значение по умолчанию — **Preserve**. Этот параметр нельзя изменить, если для **касесенситивелукупс** задано значение **Да**.  
  
**creategroup** *имя* CreateGroup  
создает новую группу клиентов, предоставляя ей указанное *имя*.  
  
**ListGroups**  
Отображает имена всех групп клиентов.  
  
**deletegroup** *имя* делетеграуп  
Удаляет группу клиентов, указанную по *имени*.  
  
**ренамеграуп** *oldname newname*  
изменяет имя группы клиентов, заданной параметром *oldname* , на *новое_имя*  
  
**аддмемберс** *имя узла*\[...\]  
Добавляет *узел* в группу клиентов, указанную по *имени*.  
  
**listmembers** *имя* листмемберс  
список узлов в группе клиентов, заданной по *имени*.  
  
\[ *узел группы* **делетемемберс** ...\]  
удаляет клиент, указанный *узлом* , из группы клиентов, указанной в поле *Группа*.  
  
Если параметр или аргумент команды не задан, команда **nfsadmin Server** отображает текущие параметры конфигурации сервера для NFS.  
  
#### <a name="administering-client-for-nfs"></a>Администрирование клиента для NFS  
Используйте команду **nfsadmin Client** для администрирования клиента для NFS. Конкретное действие, принимаемое командой **nfsadmin Client** , зависит от указанного аргумента команды:  
  
**start**  
запускает службу клиента для NFS.  
  
**stop**  
Останавливает службу клиента для NFS.  
  
**файле**  
Задает общие параметры для клиента для NFS. Необходимо указать хотя бы один из следующих параметров с помощью аргумента команды **config** :  
  
<em>режим</em> **FileAccess\=**  
-   Задает режим разрешений по умолчанию для файлов, созданных на NFS \(\) Server Network File System. Аргумент *mode* состоит из трех цифр от 0 до \(7 включительно\) , представляющих разрешения по умолчанию, предоставленные пользователю, группе \(и\)другим пользователям соответственно. Цифры преобразуются в\-разрешения в стиле UNIX следующим образом\=: 0 None\=, 1 x\=, 2 w\=, 3 WX\=, 4 r\=, 5 RX\=, 6 RW и\=7 rwx. Например, **fileaccess\=750** предоставляет разрешение rwx для владельца, разрешение Rx для группы и не имеет разрешения на доступ к другим пользователям.  
  
<em>сервер</em> **мапсвр\=**  
Задает *сервер* в качестве сервера сопоставление имен пользователей для клиента для NFS. Хотя этот параметр по прежнему поддерживается для совместимости с предыдущими версиями, вместо него следует использовать служебную программу **сфуадмин** .  
  
**мтипе\=**{**жесткое** | **мягкое**}  
Указывает тип подключения по умолчанию. Для подключения с жестким подключением клиент для NFS повторяет сбой RPC, пока он не завершится успешно. Для мягкого подключения клиент для NFS возвращает ошибку вызывающему приложению после повторного выполнения вызова, указанного в параметре **Retry** .  
  
<em>номер</em> повтора **\=**  
Указывает количество попыток установить подключение для мягкого подключения. Это значение должно быть от 1 до 10 включительно. Значение по умолчанию — 1.  
  
**время\=ожидания**в<em>секундах</em>  
Указывает количество секунд ожидания вызова \(\)удаленной процедуры подключения. Это значение должно быть 0,8, 0,9 или целым числом от 1 до 60 включительно. Значение по умолчанию — 0,8.  
  
**Протокол\={TCP | UDP | TCP\+UDP}**  
Указывает, какие транспортные протоколы поддерживает клиент. Значение по умолчанию **—\+TCP UDP** .  
  
<em>Размер</em> **rsize\=**  
Задает размер буфера чтения в килобайтах. Это значение может быть 0,5, 1, 2, 4, 8, 16 или 32. Значение по умолчанию — 32.  
  
<em>Размер</em> **всизе\=**  
Задает размер буфера записи в килобайтах. Это значение может быть 0,5, 1, 2, 4, 8, 16 или 32. Значение по умолчанию — 32.  
  
**по\=умолчанию для производительности**  
Восстанавливает следующие параметры производительности в значения по умолчанию:  
  
-   **мтипе**  
  
-   **Повторите**  
  
-   **timeout**  
  
-   **rsize**  
  
-   **всизе**  
  
<em>режим</em> **FileAccess\=**  
Задает режим разрешений по умолчанию для файлов, созданных на NFS \(\) Server Network File System. Аргумент *mode* состоит из трех цифр от 0 до \(7 включительно\) , представляющих разрешения по умолчанию, предоставленные пользователю, группе \(и\)другим пользователям соответственно. Цифры преобразуются в\-разрешения в стиле UNIX следующим образом\=: 0 None\=, 1 x\=, 2 w\=, 3 WX\=, 4 r\=, 5 RX\=, 6 RW и\=7 rwx. Например, **fileaccess\=750** предоставляет разрешение rwx для владельца, разрешение Rx для группы и не имеет разрешения на доступ к другим пользователям.  
  
Если параметр или аргумент команды не задан, команда **nfsadmin Client** отображает текущие параметры конфигурации клиента для NFS.  
  

