---
title: nfsadmin
description: 'Раздел Windows команды для ****- '
ms.custom: na
ms.prod: windows-server
ms.reviewer: na
ms.suite: na
ms.technology: manage-windows-commands
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: 7375b2cf-c6b8-45b5-abf6-6c10e462defd
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 10/16/2017
ms.openlocfilehash: 2658cf610e4328d382b9224f4230d68a022d1cc3
ms.sourcegitcommit: 6aff3d88ff22ea141a6ea6572a5ad8dd6321f199
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/27/2019
ms.locfileid: "71373217"
---
# <a name="nfsadmin"></a>nfsadmin

>Область применения: Windows Server (Semi-Annual Channel), Windows Server 2016, Windows Server 2012 R2, Windows Server 2012

С помощью **nfsadmin** можно управлять сервером для NFS и клиентом для NFS.  
  
## <a name="syntax"></a>Синтаксис  
**nfsadmin server** `[`*ComputerName*`] [`\-u *имя_пользователя*`[`\-p *Password*`]]` \-l  
  
**nfsadmin server** `[`*ComputerName*`] [`\-u *имя_пользователя* `[`\-p *Password*`]]` \-r `{`*Client* `|` все`}`  
  
**nfsadmin server** `[`*ComputerName*`] [`\-u *имя_пользователя* `[`\-p *пароль*`]] {`запустить `|` прерывать`}`  
  
**nfsadmin server** `[`*ComputerName*`] [`\-u *имя_пользователя* `[`\-p *Password*`]]` *параметр* config`[...]`  
  
**nfsadmin server** `[`*ComputerName*`] [`\-u *имя_пользователя* `[`\-p *Password*`]]` CreateGroup *имя*  
  
**nfsadmin server** `[`*ComputerName*`] [`\-u *имя_пользователя* `[`\-p *Password*`]]` ListGroups  
  
**nfsadmin server** `[`*ComputerName*`] [`\-u *имя_пользователя* `[`\-p *Password*`]]` делетеграуп *имя*  
  
**nfsadmin server** `[`*ComputerName*`] [`\-u *имя_пользователя* `[`\-p *Password*`]]` ренамеграуп *oldname newname*  
  
**nfsadmin server** `[`*ComputerName*`] [`\-u *имя_пользователя* `[`\-p *Password*`]]` аддмемберс *имя узла*`[...]`  
  
**nfsadmin server** `[`*ComputerName*`] [`\-u *имя_пользователя* `[`\-p *Password*`]]` листмемберс  
  
**nfsadmin server** `[`*ComputerName*`] [`\-u *имя_пользователя* `[`\-p *Password*`]]` *узел группы* делетемемберс`[...]`  
  
**nfsadmin client** `[`*ComputerName*`] [`\-u *имя_пользователя* `[`\-p *пароль*`]] {`запустить `|` прерывать`}`  
  
**nfsadmin client** `[`*ComputerName*`] [`\-u *имя_пользователя* `[`\-p *Password*`]]` *параметр* config`[...]`  
  
## <a name="description"></a>Описание  
Программа командной строки **nfsadmin**\-Line выполняет администрирование сервера для NFS или клиента для NFS на локальном или удаленном компьютере, где работают службы Майкрософт для сетевой файловой системы \(NFS\). Если вы вошли в систему с учетной записью, не имеющей необходимых привилегий, можно указать имя пользователя и пароль учетной записи, которая имеет значение. Действие, выполняемое командой **nfsadmin** , зависит от предоставленных аргументов команды.  
  
В дополнение к службе,\-конкретные аргументы и параметры команды, команда **nfsadmin** принимает следующие значения:  
  
*computerName*  
Указывает удаленный компьютер, который требуется администрировать. Вы можете указать компьютер, используя службу Windows Internet Name Service \(WINS\) имя или доменное имя \(DNS\)-адрес \(IP-адреса.\)  
  
*имя пользователя* **\-u**  
Указывает имя пользователя, учетные данные которого будут использоваться. Может потребоваться добавить доменное имя в имя пользователя в формате <em>домен</em> **\\** <em>имя</em> пользователя.  
  
**\-p** *Password*  
Указывает пароль пользователя, указанного с помощью параметра **\-u** . Если указать параметр **\-u** , но опустить параметр **\-p** , будет предложено ввести пароль пользователя.  
  
#### <a name="administering-server-for-nfs"></a>Администрирование сервера для NFS  
Используйте команду **nfsadmin Server** для администрирования сервера для NFS. Конкретное действие, принимаемое **nfsadmin Server** , зависит от параметра команды или аргумента, которые вы указали:  
  
**\-l**  
Список всех блокировок, удерживаемых клиентами.  
  
**\-r** {*Client* | **ALL**}  
Освобождает блокировки, удерживаемые *клиентом* , или, если **все** они указаны, всеми клиентами.  
  
**start**  
запускает службу сервера для NFS.  
  
**позиции**  
Останавливает службу сервера для NFS.  
  
**файле**  
Задает общие параметры для сервера для NFS. Необходимо указать хотя бы один из следующих параметров с помощью аргумента команды **config** :  
  
<em>сервер</em> **\=мапсвр**  
Задает *сервер* в качестве сервера сопоставление имен пользователей Server для NFS. Хотя этот параметр по прежнему поддерживается для совместимости с предыдущими версиями, вместо него следует использовать служебную программу **сфуадмин** .  
  
**аудитлокатион\=** {**eventlog** | **File** | **и** | **None**}  
Указывает, будут ли события проверяться и где будут записываться события. Требуется один из следующих аргументов.  
  
**дальнейшее**  
Указывает, что события аудита будут записываться только в журнал приложений Просмотр событий.  
  
**File**  
Указывает, что события аудита будут записываться только в файл, указанный в **конфигурации fname**.  
  
**как**  
Указывает, что события аудита будут записываться в журнал приложений Просмотр событий, а также в файл, указанный в **конфигурации fname**.  
  
**None**  
Указывает, что аудит событий не будет выполняться.  
  
**fname\=** , <em>файл</em>  
Задает файл, указанный параметром *File* , в качестве файла аудита. Значение по умолчанию —% сфудир%\\журнал\\нфссвр. log  
  
*размер*\= **\=fsize**  
Задает *максимальный размер файла* аудита в мегабайтах. По умолчанию максимальный размер равен 7 МБ.  
  
**аудит\=** \[ **\+** | **\-** \]**mount** \[ **\+** | **\-** \]**чтение** \[ **\+** | **\-** \]**запись** \[ **\+** | **\-** \]**Создание** \[ **\+** | **\-** \]**Delete** \[ **\+** | **\-** \]**Lock** \[ **\+** | **\-** \]  
Указывает события, регистрируемые в журнале. Чтобы начать запись в журнал события, введите знак плюс \( **\+** \) перед именем события; Чтобы отключить запись событий в журнал, введите знак "минус" \( **\-** \) перед именем события. Если знак пропущен, предполагается знак плюс. Не используйте **ALL** с любым другим именем события.  
  
**локкпериод\=** <em>секунд</em>  
Указывает время в секундах, в течение которого сервер для NFS будет ожидать освобождения блокировок после того, как подключение к серверу для NFS было потеряно, а затем повторно установлено или после перезапуска службы сервера для NFS.  
  
Портмаппротокол\={TCP | UDP | TCP\+UDP  
Указывает, какие транспортные протоколы поддерживает сопоставление портов. Значение по умолчанию — **TCP\+UDP**.  
  
маунтпротокол\={TCP | UDP | TCP\+UDP}  
Указывает, какие транспортные протоколы поддерживают подключение. Значение по умолчанию — **TCP\+UDP**.  
  
нфспротокол\={TCP | UDP | TCP\+UDP}  
Указывает, какие транспортные протоколы поддерживает сетевая файловая система \(NFS\). Значение по умолчанию — **TCP\+UDP** .  
  
нлмпротокол\={TCP | UDP | TCP\+UDP}  
Указывает, какие транспортные протоколы Диспетчер сетевых блокировок \(поддерживает\) NLM. Значение по умолчанию — **TCP\+UDP**.  
  
нсмпротокол\={TCP | UDP | TCP\+UDP}  
Указывает, какие транспортные протоколы диспетчер состояний сети \(NSM\) поддерживает. Значение по умолчанию — **TCP\+UDP**.  
  
**enableV3\=** {**Да** | **No**}  
Указывает, будут ли поддерживаться протоколы NFS версии 3. Значение по умолчанию — **Да**.  
  
**реневаус\=** {**Да** | **No**}  
Указывает, требуется ли повторная проверка подлинности клиентских подключений после периода, указанного параметром **config реневаусинтервал**. Значение по умолчанию — **нет**.  
  
**реневаусинтервал\=** <em>секунд</em>  
Указывает число секунд, которое должно пройти до принудительной повторной проверки подлинности клиента, если для **config реневаус** задано значение **Yes**. Значение по умолчанию — 600 секунд.  
  
<em>размер</em> **\=диркаче**  
Указывает размер кэша каталога в килобайтах. Число, указанное как *size* , должно быть кратно 4 в диапазоне от 4 до 128. Каталог по умолчанию\-размер кэша 128 КБ.  
  
файл\=**транслатионфиле** \[\]  
Указывает файл, содержащий сведения о сопоставлении для замены символов в именах файлов при их перемещении из Windows\-на основе файловых систем на основе UNIX\-. Если *файл* не указан, то преобразование символов в имени файла отключено. Если значение **транслатионфиле** изменено, необходимо перезапустить сервер, чтобы изменения вступили в силу.  
  
**дотфилешидден**\={**Да** | **No**}  
Указывает, создаются ли файлы с именами, начинающимися с точки \(.\) будут помечены как скрытые в файловой системе Windows и, следовательно, скрыты от клиентов NFS. Значение по умолчанию — **нет**.  
  
**касесенситивелукупс\=** {**Да** | **No**}  
Указывает, будет ли поиск в каталоге учитываться с учетом регистра \(требуется точное совпадение с регистром символов\).  
  
Также необходимо отключить регистр\-ядра Windows, чтобы сервер для NFS поддерживал\-имена файлов с учетом регистра. Можно отключить регистр\-ядра Windows, сняв следующий раздел реестра в 0:  
  
HKLM\\SYSTEM\\CurrentControlSet элемент управления\\\\диспетчер сеансов\\ядро  
  
DWOrd обкасеинсенситиве   
  
> [!IMPORTANT]  
> Этот раздел относится только к Windows Server 2008 R2, Windows Server 2008 и Windows Server 2003. Этот раздел не относится к Windows Server 2012 R2 или Windows Server 2012.  
  
**нтфскасе\=** {**нижняя** | **Upper** | **сохранить**}  
Указывает, будет ли регистр символов в именах файлов в файловой системе NTFS возвращаться в нижнем или верхнем регистре или в форме, хранящейся в каталоге. Значение по умолчанию — **Preserve**. Этот параметр нельзя изменить, если для **касесенситивелукупс** задано значение **Да**.  
  
*имя* CreateGroup  
создает новую группу клиентов, предоставляя ей указанное *имя*.  
  
**ListGroups**  
Отображает имена всех групп клиентов.  
  
*имя* делетеграуп  
Удаляет группу клиентов, указанную по *имени*.  
  
**ренамеграуп** *oldname newname*  
изменяет имя группы клиентов, заданной параметром *oldname* , на *новое_имя*  
  
**аддмемберс** *имя узла*\[...\]  
Добавляет *узел* в группу клиентов, указанную по *имени*.  
  
*имя* листмемберс  
список узлов в группе клиентов, заданной по *имени*.  
  
\[*узла группы* **делетемемберс** ...\]  
удаляет клиент, указанный *узлом* , из группы клиентов, указанной в поле *Группа*.  
  
Если параметр или аргумент команды не задан, команда **nfsadmin Server** отображает текущие параметры конфигурации сервера для NFS.  
  
#### <a name="administering-client-for-nfs"></a>Администрирование клиента для NFS  
Используйте команду **nfsadmin Client** для администрирования клиента для NFS. Конкретное действие, принимаемое командой **nfsadmin Client** , зависит от указанного аргумента команды:  
  
**start**  
запускает службу клиента для NFS.  
  
**позиции**  
Останавливает службу клиента для NFS.  
  
**файле**  
Задает общие параметры для клиента для NFS. Необходимо указать хотя бы один из следующих параметров с помощью аргумента команды **config** :  
  
**fileaccess\=** <em>mode</em>  
-   Указывает режим разрешений по умолчанию для файлов, созданных в сетевой файловой системе \(NFS\) Servers. Аргумент *mode* состоит из трех цифр от 0 до 7 \(включительно\) представляющих разрешения по умолчанию, предоставленные пользователю, группе и другим \(соответственно\). Эти цифры преобразуются в разрешения стиля UNIX\-следующим образом: 0\=None, 1\=x, 2\=w, 3\=WX, 4\=r, 5\=RX, 6\=RW и 7\=rwx. Например, **fileaccess\=750** предоставляет разрешение rwx для владельца, разрешения RX группе и не имеет разрешения на доступ к другим пользователям.  
  
<em>сервер</em> **\=мапсвр**  
Задает *сервер* в качестве сервера сопоставление имен пользователей для клиента для NFS. Хотя этот параметр по прежнему поддерживается для совместимости с предыдущими версиями, вместо него следует использовать служебную программу **сфуадмин** .  
  
**мтипе\=** {**жесткое** | **Soft**}  
Указывает тип подключения по умолчанию. Для подключения с жестким подключением клиент для NFS повторяет сбой RPC, пока он не завершится успешно. Для мягкого подключения клиент для NFS возвращает ошибку вызывающему приложению после повторного выполнения вызова, указанного в параметре **Retry** .  
  
<em>номер</em> **повтора\=**  
Указывает количество попыток установить подключение для мягкого подключения. Это значение должно быть от 1 до 10 включительно. Значение по умолчанию — 1.  
  
**время ожидания\=** <em>с</em>  
Указывает время ожидания (в секундах) подключения \(\)удаленного вызова процедуры. Это значение должно быть 0,8, 0,9 или целым числом от 1 до 60 включительно. Значение по умолчанию — 0,8.  
  
**Протокол\={TCP | UDP | TCP\+UDP}**  
Указывает, какие транспортные протоколы поддерживает клиент. Значение по умолчанию — **TCP\+UDP** .  
  
<em>размер</em> **\=rsize**  
Задает размер буфера чтения в килобайтах. Это значение может быть 0,5, 1, 2, 4, 8, 16 или 32. Значение по умолчанию — 32.  
  
<em>размер</em> **\=всизе**  
Задает размер буфера записи в килобайтах. Это значение может быть 0,5, 1, 2, 4, 8, 16 или 32. Значение по умолчанию — 32.  
  
**\=производительности по умолчанию**  
Восстанавливает следующие параметры производительности в значения по умолчанию:  
  
-   **мтипе**  
  
-   **Повторите**  
  
-   **timeout**  
  
-   **rsize**  
  
-   **всизе**  
  
**fileaccess\=** <em>mode</em>  
Указывает режим разрешений по умолчанию для файлов, созданных в сетевой файловой системе \(NFS\) Servers. Аргумент *mode* состоит из трех цифр от 0 до 7 \(включительно\) представляющих разрешения по умолчанию, предоставленные пользователю, группе и другим \(соответственно\). Эти цифры преобразуются в разрешения стиля UNIX\-следующим образом: 0\=None, 1\=x, 2\=w, 3\=WX, 4\=r, 5\=RX, 6\=RW и 7\=rwx. Например, **fileaccess\=750** предоставляет разрешение rwx для владельца, разрешения RX группе и не имеет разрешения на доступ к другим пользователям.  
  
Если параметр или аргумент команды не задан, команда **nfsadmin Client** отображает текущие параметры конфигурации клиента для NFS.  
  

