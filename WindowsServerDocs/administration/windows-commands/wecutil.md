---
title: wecutil
description: 'Раздел Windows команды для ***- '
ms.custom: na
ms.prod: windows-server-threshold
ms.reviewer: na
ms.suite: na
ms.technology: manage-windows-commands
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: 0c82a6cb-d652-429c-9c3d-0f568c78d54b
author: coreyp-at-msft
ms.author: coreyp
manager: dansimps
ms.openlocfilehash: 50151a322f1ccde2be927de31b0e5c30732b278e
ms.sourcegitcommit: 0d0b32c8986ba7db9536e0b8648d4ddf9b03e452
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/17/2019
ms.locfileid: "59813955"
---
# <a name="wecutil"></a>wecutil



Позволяет создавать и управлять подписками на события, которые пересылаются с удаленных компьютеров. Удаленный компьютер должен поддерживать протокол WS-Management. В разделе [Примеры](#BKMK_examples) показан принцип использования этой команды.


## <a name="syntax"></a>Синтаксис

```
wecutil  [{es | enum-subscription}] 
[{gs | get-subscription} <Subid> [/f:<Format>] [/uni:<Unicode>]] 
[{gr | get-subscriptionruntimestatus} <Subid> [<Eventsource> …]] 
[{ss | set-subscription} [<Subid> [/e:[<Subenabled>]] [/esa:<Address>] [/ese:[<Srcenabled>]] [/aes] [/res] [/un:<Username>] [/up:<Password>] [/d:<Desc>] [/uri:<Uri>] [/cm:<Configmode>] [/ex:<Expires>] [/q:<Query>] [/dia:<Dialect>] [/tn:<Transportname>] [/tp:<Transportport>] [/dm:<Deliverymode>] [/dmi:<Deliverymax>] [/dmlt:<Deliverytime>] [/hi:<Heartbeat>] [/cf:<Content>] [/l:<Locale>] [/ree:[<Readexist>]] [/lf:<Logfile>] [/pn:<Publishername>] [/essp:<Enableport>] [/hn:<Hostname>] [/ct:<Type>]] [/c:<Configfile> [/cun:<Username> /cup:<Password>]]] 
[{cs | create-subscription} <Configfile> [/cun:<Username> /cup:<Password>]] 
[{ds | delete-subscription} <Subid>] 
[{rs | retry-subscription} <Subid> [<Eventsource>…]] 
[{qc | quick-config} [/q:[<Quiet>]]].
```

## <a name="parameters"></a>Параметры

|Параметр|Описание|
|---------|-----------|
|{es \| enum-subscription}|Отображает имена всех подписок на удаленные события, которые существуют.|
|{gs \| get-subscription} \<Subid > [/ f:\<Формат >] [/ uni:\<Юникода >]|Отображает сведения о конфигурации удаленного подписки. \<Subid > — это строка, однозначно определяющее подписку. \<Subid > совпадает со значением строки, который был указан в \<SubscriptionId > тег XML-файла конфигурации, который использовался для создания подписки.|
|{gr \| get-subscriptionruntimestatus} \<Subid > [\<Eventsource >...]|Отображает состояние среды выполнения подписки. \<Subid > — это строка, однозначно определяющее подписку. \<Subid > совпадает со значением строки, который был указан в \<SubscriptionId > тег XML-файла конфигурации, который использовался для создания подписки. \<Eventsource > представляет собой строку, идентифицирующую компьютер, который служит источником событий. \<Eventsource > должно быть полное доменное имя, NetBIOS-имя или IP-адресом.|
|{ss \| set-subscription} \<Subid > [/ e: [\<Subenabled >]] [/ esa:\<адрес >] [/ ese: [\<Srcenabled >]] [/aes] [/ res] [/ отмены:\<имя пользователя >] [/ до:\< Пароль >] [/ d:\<Desc >] [/ uri:\<Uri >] [/ cm:\<Configmode >] [/ ex:\<Expires >] [/ вопрос\<запроса >] [/ dia:\<диалект >] [/ tn:\< Транспорта >] [/ tp:\<Transportport >] [/ dm:\<Deliverymode >] [/ dmi:\<Deliverymax >] [/ dmlt:\<Deliverytime >] [/ Здравствуйте:\<пульса >] [/ cf:\< Содержимого >] [/ l:\<локали >] [/ познакомила: [\<Readexist >]] [/ lf:\<файла журнала >] [/ pn:\<Publishername >] [/ essp:\<Enableport >] [/ hn:\< Имя узла >] [/ ct:\<тип >]</br>или диспетчер конфигурации служб</br>{ss \| /c: Выбор подписки\<Configfile > [/ cun:\<Comusername >/cup:\<Compassword >]|Изменяет конфигурацию подписки. Вы можете указать идентификатор подписки и соответствующие параметры для изменения параметров подписки, или можно указать XML-файл конфигурации для изменения параметров подписки.|
|{cs \| создания подписки} \<Configfile > [/ cun:\<имя пользователя >/cup:\<пароль >]|Создает подписку на удаленном. \<ConfigFile > указывает путь к XML-файле, который содержит настройки подписки. Путь может быть абсолютным или относительным для текущего каталога.|
|{доменных служб Active Directory \| delete-subscription} \<Subid >|Удаляется подписка и Отмена подписки из всех источников событий, которые передают события в журнале событий для подписки. Уже получили и в журнал событий не удаляются. \<Subid > — это строка, однозначно определяющее подписку. \<Subid > совпадает со значением строки, который был указан в \<SubscriptionId > тег XML-файла конфигурации, который использовался для создания подписки.|
|{rs \| повторных попыток subscription} \<Subid > [\<Eventsource >...]|Предпринимает попытку установить подключение и отправку запроса на удаленную подписку неактивная подписка. Пытается повторно активировать всех источников событий или указанных источников событий. Отключенные источники не производятся. \<Subid > — это строка, однозначно определяющее подписку. \<Subid > совпадает со значением строки, который был указан в \<SubscriptionId > тег XML-файла конфигурации, который использовался для создания подписки. \<Eventsource > представляет собой строку, идентифицирующую компьютер, который служит источником событий. \<Eventsource > должно быть полное доменное имя, NetBIOS-имя или IP-адресом.|
|{qc \| quick-config} [/q:[\<Quiet>]]|Настраивает службы сборщика событий Windows для обеспечения подписка, создаваемая и сохранение при перезагрузке. Сюда входят следующие действия:</br>1.  Включите канал пересылаемых событий, если она отключена.</br>2.  Укажите службу сборщика событий Windows, чтобы отложить запуск.</br>3.  Служба сборщика событий Windows, если он не запущен.|

## <a name="options"></a>Параметры

|Параметр|Описание|
|------|-----------|
|/ f:\<Формат >|Задает формат отображаемой информации. \<Формат > может быть XML-индекс или Terse. Если <Format> является XML, выходные данные отображаются в формате XML. Если \<Формат > является Terse, выходные данные отображаются в парах "имя значение". По умолчанию используется Terse.|
|/ c:\<Configfile >|Указывает путь к XML-файл, содержащий настройки подписки. Путь может быть абсолютным или относительным для текущего каталога. Этот параметр может использоваться только с **/cun** и **/cup** и параметры являются взаимоисключающими со всеми другими параметрами.|
|/e:[\<Subenabled>]|Включает или отключает подписку. \<Subenabled > может быть true или false. По умолчанию значение этого параметра равно true.|
|/ESA:\<адрес >|Указывает адрес источника событий. \<Адрес > является строка, содержащая полное доменное имя, NetBIOS-имя или IP-адрес, который идентифицирует компьютер, который служит источником событий. Этот параметр следует использовать с **/ese**, **/aes**, **/res**, или **/un** и **/up** параметры.|
|/ese:[\<Srcenabled>]|Включает или отключает источник события. \<Srcenabled > может быть true или false. Этот параметр допускается только в том случае, если **/esa** параметра. По умолчанию значение этого параметра равно true.|
|/AES|Добавляет источник события, который задается параметром **/esa** параметр, если он уже не является частью подписки. Если адрес, указанный **/esa** параметр уже входит в подписки, возвращается ошибка. Этот параметр допускается только в том случае, если **/esa** параметра.|
|/ RES|Удаляет источник событий, который задается параметром **/esa** параметр, если он уже входит в подписки. Если адрес, указанный **/esa** параметр не является частью подписки, возвращается ошибка. Этот параметр допускается только в том случае, если **/esa** параметра.|
|/un:\<имя пользователя >|Задает учетные данные пользователя для использования с источника событий, заданного параметром **/esa** параметр. Этот параметр допускается только в том случае, если **/esa** параметра.|
|вверх:\<пароль >|Указывает пароль, соответствующий по учетным данным пользователя. Этот параметр допускается только в том случае, если **/un** параметра.|
|/ d:\<Desc >|Описание для подписки.|
|/URI:\<Uri >|Указывает тип события, которые потребляются по подписке. \<URI > содержит строку URI, вместе с адресом компьютера источника событий для уникальной идентификации источник событий. Строка URI используется для всех адресов источника событий в подписке.|
|/ CM:\<Configmode >|Задает режим конфигурации. \<Configmode > может принимать одно из следующих строк: Обычный, Custom, MinLatency или MinBandwidth. Обычный, MinLatency и MinBandwidth режим установлен режим доставки, max элементы доставки, интервал подтверждения соединения и максимальная задержки время доставки. **/Dm**, **/dmi**, **/hi** или **/dmlt** параметры могут быть только указывать, если режим конфигурации задано значение значение Custom.|
|/ex:\<Expires>|Задает время истечения срока действия подписки. \<Срок действия истекает > должен быть определен в стандартном формате даты времени XML-индекс или ISO8601: гггг-мм-ДДТЧЧ [.sss] [Z], где T — разделитель компонентов времени, а Z означает время в формате UTC.|
|/ q:\<запроса >|Указывает строку запроса для подписки. Формат \<запроса > может быть разным для разных значений URI и применяется ко всем источникам в подписке.|
|/DIA:\<диалект >|Определяет диалект, используемый в строке запроса.|
|/TN:\<транспорта >|Задает имя используемого транспорта, который используется для подключения к источнику удаленное событие.|
|/TP:\<Transportport >|Задает номер порта, который используется транспортом, при подключении к источнику удаленное событие.|
|/DM:\<Deliverymode >|Режим доставки. \<Deliverymode > может быть извлечения или принудительной отправки. Этот параметр допустим только в том случае если **/CM** параметр имеет значение Custom.|
|/DMI:\<Deliverymax >|Задает максимальное количество элементов для пакетной поставки. Этот параметр допустим только в том случае если **/CM** присвоено значение Custom.|
|/dmlt:\<Deliverytime >|Задает максимальную задержку в разработке пакета событий. \<Deliverytime > — это время в миллисекундах. Этот параметр допустим только в том случае если **/CM** присвоено значение Custom.|
|/ Здравствуйте:\<пульса >|Определяет интервал подтверждения. \<Периодический сигнал > — это время в миллисекундах. Этот параметр допустим только в том случае если **/CM** присвоено значение Custom.|
|/CF:\<содержимого >|Задает формат событий, которые возвращаются. \<Содержимого > может быть события или RenderedText. Если значение равно RenderedText, события возвращаются вместе с локализованными строками (например, описание события), связанный с событием. Значение по умолчанию — RenderedText.|
|/ l:\<языкового стандарта >|Задает языковой стандарт для доставки локализованных строк в формате RenderedText. \<Языковой стандарт > — это идентификатор языка и страны или региона, например «EN-us». Этот параметр допустим только в том случае если **/cf** включен режим RenderedText.|
|/ree:[\<Readexist>]|Идентифицирует события, которые предоставляются для подписки. \<Readexist > может true или false. Когда <Readexist> имеет значение true, все зарегистрированные события буду считываться из источников событий для подписки. Когда <Readexist> является false, предоставляются только на будущие (прибывающих) события. Значение по умолчанию имеет значение true, если для **/ree** параметр без значения. Если не **/ree** параметр указан, значение по умолчанию — false.|
|/LF:\<файла журнала >|Указывает локальный журнал событий, который используется для хранения событий, полученных из источников событий.|
|/pn:\<Publishername >|Указывает имя издателя. Он должен быть издатель, владеющий или импортирует журнал **/lf** параметр.|
|/essp:\<Enableport>|Указывает, что номер порта должен быть добавлен к имя субъекта-службы удаленной службы. \<Enableport > может быть true или false. Номер порта добавляется при <Enableport> имеет значение true. Когда добавляется номер порта, некоторые конфигурации может потребоваться для предотвращения доступа к источникам событий из запрещается.|
|/hn:\<имя узла >|Указывает имя DNS локального компьютера. Это имя используется источником удаленное событие необходимо передать обратно события и должен использоваться только для принудительной подписки.|
|/CT:\<тип >|Задает тип учетных данных для доступа к удаленному источнику. \<Тип > должен быть одним из следующих значений: по умолчанию, согласования, дайджест, basic, либо localmachine. Значение по умолчанию — по умолчанию.|
|/cun:\<Comusername >|Задает учетные данные общего пользователя, используемые для источников событий, которые не имеют свои собственные учетные данные пользователя. Если этот параметр указан с **/c** параметр, имя пользователя и UserPassword параметры игнорируются источники отдельных событий из файла конфигурации. Если вы хотите использовать другие учетные данные для источника данных определенного события, следует переопределить это значение, указав **/un** и **/up** параметры для источника данных определенного события в командной строке другого **ss** команды.|
|/ cup:\<Compassword >|Задает пароль пользователя для учетных данных общего пользователя. Когда \<Compassword > имеет значение * (звездочка), пароль считывается из консоли. Этот параметр действителен только тогда, когда **/cun** параметра.|
|/q:[\<Quiet>]|Указывает, запрашивает ли процедуры настройки подтверждение. \<Quiet > может быть true или false. Если <Quiet> имеет значение true, процедуры настройки не запрашивается подтверждение. Значение по умолчанию этот параметр имеет значение false.|

## <a name="remarks"></a>Примечания

> [!IMPORTANT]
> Если появится сообщение «сервер RPC недоступен? При попытке запуска wecutil, необходимо запустить службу сбора событий Windows (wecsvc). Чтобы начать wecsvc, в командной строке с повышенными введите net запустите wecsvc.

-   В следующем примере показано содержимое файла конфигурации:  
    ```
    <Subscription xmlns="https://schemas.microsoft.com/2006/03/windows/events/subscription">
    <Uri>https://schemas.microsoft.com/wbem/wsman/1/windows/EventLog</Uri>
    <!-- Use Normal (default), Custom, MinLatency, MinBandwidth -->
    <ConfigurationMode>Normal</ConfigurationMode>
    <Description>Forward Sample Subscription</Description>
    <SubscriptionId>SampleSubscription</SubscriptionId>
    <Query><![CDATA[
    <QueryList>
    <Query Path="Application">
    <Select>*</Select>
    </Query>
    </QueryList>
    ]]></Query>
    <EventSources>
    <EventSource Enabled="true">
    <Address>mySource.myDomain.com</Address>
    <UserName>myUserName</UserName>
    <Password>*</Password>
    </EventSource>
    </EventSources>
    <CredentialsType>Default</CredentialsType>
    <Locale Language="EN-US"></Locale>
    </Subscription>
    ```

## <a name="BKMK_examples"></a>Примеры

Выходные данные конфигурации для подписки с именем sub1:
```
wecutil gs sub1
```
Пример вывода команды:
```
EventSource[0]:
Address: localhost
Enabled: true
Description: Subscription 1
Uri: wsman:microsoft/logrecord/sel
DeliveryMode: pull
DeliveryMaxSize: 16000
DeliveryMaxItems: 15
DeliveryMaxLatencyTime: 1000
HeartbeatInterval: 10000
Locale:
ContentFormat: renderedtext
LogFile: HardwareEvents
```
Отображение состояния среды выполнения с именем sub1 подписки:
```
wecutil gr sub1
```
Обновите конфигурацию подписки, с именем sub1 из нового файла XML с именем WsSelRg2.xml:
```
wecutil ss sub1 /c:%Windir%\system32\WsSelRg2.xml
```
Обновите конфигурацию подписки, с именем sub2 с несколькими параметрами:
```
wecutil ss sub2 /esa:myComputer /ese /un:uname /up:* /cm:Normal
```
Создание подписки для переадресации событий из журнала событий приложений Windows Vista удаленного компьютера в mySource.myDomain.com журнал ForwardedEvents (см. в разделе "Примечания" пример файла конфигурации):
```
wecutil cs subscription.xml
```
Удалите подписку с именем sub1:
```
wecutil ds sub1
```

#### <a name="additional-references"></a>Дополнительная справка

[Ключ синтаксиса командной строки](command-line-syntax-key.md)
