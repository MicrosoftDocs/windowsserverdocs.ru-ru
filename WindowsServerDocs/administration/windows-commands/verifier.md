---
title: verifier
description: Справочная статья по команде Verifier, которая запускает программу диспетчера проверки драйверов.
ms.topic: reference
ms.assetid: 782173d6-f196-4bc4-a547-76109829453c
ms.author: lizross
author: eross-msft
manager: mtillman
ms.date: 10/16/2017
ms.openlocfilehash: df3a9826463ea4062fb661e04e8fb774275c09d7
ms.sourcegitcommit: f45640cf4fda621b71593c63517cfdb983d1dc6a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/17/2020
ms.locfileid: "92156262"
---
# <a name="verifier"></a>verifier

> Область применения: Windows Server (половина ежегодного канала), Windows Server 2019, Windows Server 2016, Windows Server 2012 R2, Windows Server 2012

Средство проверки драйверов отслеживает драйверы Windows в режиме ядра и графические драйверы для обнаружения недопустимых вызовов функций или действий, которые могут повредить систему. Средство проверки драйверов может подвергнуть драйверам Windows различные нагрузки и тесты, чтобы обнаружить неправильное поведение. Можно настроить, какие тесты должны выполняться, что позволяет разместить драйвер при высокой нагрузке нагрузки или с помощью более рационального тестирования. Кроме того, средство проверки драйверов можно запускать одновременно на нескольких драйверах или по одному драйверу за раз.

> [!IMPORTANT]
> Для использования средства проверки драйверов необходимо входить в группу администраторов на компьютере.
> Выполнение средства проверки драйверов может привести к сбою компьютера, поэтому эту программу следует запускать только на компьютерах, используемых для тестирования и отладки.

## <a name="syntax"></a>Синтаксис

```
verifier /standard /all
verifier /standard /driver NAME [NAME ...]
verifier /flags <options> /all
verifier /flags <options> /driver NAME [NAME ...]
verifier /rules [OPTION ...]
verifier /query
verifier /querysettings
verifier /bootmode [persistent | disableafterfail | oneboot]
verifier /reset
verifier /faults [Probability] [PoolTags] [Applications] [DelayMins]
verifier /faultssystematic [OPTION ...]
verifier /log LOG_FILE_NAME [/interval SECONDS]
verifier /volatile /flags <options>
verifier /volatile /adddriver NAME [NAME ...]
verifier /volatile /removedriver NAME [NAME ...]
verifier /volatile /faults [Probability] [PoolTags] [Applications] [DelayMins]
verifier /domain <types> <options> /driver ... [/logging | /livedump]
verifier /logging
verifier /livedump
verifier /?
verifier /help
```

### <a name="parameters"></a>Параметры

| Параметр | Описание |
|--|--|
| /all | Указывает программе проверки драйверов проверять все установленные драйверы после следующей загрузки. |
| /бутмоде `[persistent | disableafterfail | oneboot | resetonunusualshutdown]` | Определяет, включены ли параметры служебной программы проверки драйверов после перезагрузки. Чтобы задать или изменить этот параметр, необходимо перезагрузить компьютер. Доступны следующие режимы.<ul><li>**persistent** — гарантирует, что параметры средства проверки драйверов сохраняются (остаются в силе) для нескольких перезагрузок. Это параметр по умолчанию.</li><li>**дисаблеафтерфаил** — если Windows не запускается, этот параметр отключает служебную программу проверки драйверов для последующих перезагрузок.</li><li>**онебут** — включает параметры средства проверки драйверов только при следующем запуске компьютера. Служебная программа проверки драйверов отключена для последующих перезагрузок.</li><li>**ресетонунусуалшутдовн** — служебная программа проверки драйверов будет сохраняться до тех пор, пока не произойдет необычное завершение работы. Можно использовать его аббреватион, "Раус".</li></ul> |
| /Driver `<driverlist>` | Указывает один или несколько драйверов, которые будут проверены. Параметр **дриверлист** представляет собой список драйверов по имени двоичного файла, например *driver.sys*. Используйте пробел для разделения имени каждого драйвера. Подстановочные значения, такие как `n*.sys` , не поддерживаются. |
| /дривер.ексклуде `<driverlist>` | Указывает один или несколько драйверов, которые будут исключены из проверки. Этот параметр применим только в том случае, если выбраны все драйверы для проверки. Параметр **дриверлист** представляет собой список драйверов по имени двоичного файла, например *driver.sys*. Используйте пробел для разделения имени каждого драйвера. Подстановочные значения, такие как `n*.sys` , не поддерживаются. |
| /фаултс | Включает функцию **имитации нехватки ресурсов** в служебной программе проверки драйверов. Вместо можно использовать **/фаултс** `/flags 0x4` . Однако нельзя использовать `/flags 0x4` с подпараметрами **/фаултс** . Для настройки эмуляции нехватки ресурсов можно использовать следующие подпараметры параметра/фаултс:<ul><li>**Вероятность** — указывает вероятность того, что программа проверки драйверов не сможет заданное выделение. Введите число (в десятичном или шестнадцатеричном формате), представляющее число появления в 10 000, которое программа проверки драйверов выдаст сбой при выделении. Значение по умолчанию 600 означает 600/10000 или 6%.</li><li>**Теги пула** — ограничивает выделение памяти, которые программа проверки драйверов может не выделять, с указанными тегами пула. Для представления нескольких тегов пулов можно использовать подстановочный знак (*). Чтобы вывести список тегов пула, разделяйте их пробелами. По умолчанию все операции выделения памяти могут завершиться ошибкой. </li> <li> * * Приложения** — ограничивает выделение памяти, которые программа проверки драйверов может не выделять для указанной программы. Введите имя исполняемого файла. Чтобы вывести список программ, разделяйте имена программ пробелами. По умолчанию все операции выделения памяти могут завершиться ошибкой.</li><li>**Делайминс** — указывает количество минут после загрузки, в течение которых служебная программа проверки драйверов не выдает непреднамеренного сбоя при выделении. Эта задержка позволяет загружать драйверы, а система будет стабилизироваться перед началом теста. Введите число (в десятичном или шестнадцатеричном формате). Значение по умолчанию — 7 (минуты).</li></ul> |
| /фаултссистематик | Указывает параметры для имитации **систематической нехватки ресурсов** . Используйте `0x40000` флаг, чтобы выбрать вариант имитации **систематической нехватки ресурсов** . Доступны следующие варианты:<ul><li>**енаблебуттиме** — включает внедрение ошибок при перезагрузке компьютера.</li><li>**дисаблебуттиме** — отключает внесение ошибок при перезагрузке компьютера (это значение по умолчанию).</li><li>**рекордбуттиме** — включает внедрение ошибок при перезагрузке компьютера в режиме "в случае".</li><li>**ресетбуттиме** — отключает внесение ошибок при перезагрузке компьютера и очищает список исключений стека.</li><li>**енаблерунтиме** — динамическое включение внедрения ошибок.</li><li>**дисаблерунтиме** — Динамическое отключение внедрения ошибок.</li><li>**рекордрунтиме** — динамическое включение внедрения ошибок в режиме if.</li><li>**ресетрунтиме** — динамически отключает внесение ошибок и очищает список стеков, в которых ранее произошел сбой.</li><li>**куеристатистикс** — показывает текущую статистику по внедрению ошибок.</li><li>**инкременткаунтер** — увеличивает счетчик тестовых проходов, используемый для обнаружения ошибок при ее внедрении.</li><li>**Счетчик жетстаккид** — извлекает указанный идентификатор внедренного стека.</li><li>**ЕКСКЛУДЕСТАКК стаккид** — исключает стек из внесения ошибок.</li></ul> |
| /Flags `<options>` | Активирует указанные параметры после следующей перезагрузки. Это число можно указать в десятичном или шестнадцатеричном формате (с префиксом 0x). Допускается любое сочетание следующих значений:<ul><li>**Значение: 1 или 0x1 (бит 0)**  -  [Специальная проверка пула](https://docs.microsoft.com/windows-hardware/drivers/devtest/special-pool)</li><li>**Значение: 2 или 0x2 (бит 1)**  -  [Принудительная проверка IRQL](https://docs.microsoft.com/windows-hardware/drivers/devtest/force-irql-checking)</li><li>**Значение: 4 или 0x4 (бит 2)**  -  [Имитация нехватки ресурсов](https://docs.microsoft.com/windows-hardware/drivers/devtest/low-resources-simulation)</li><li>**Значение: 8 или 0x8 (бит 3)**  -  [Отслеживание пула](https://docs.microsoft.com/windows-hardware/drivers/devtest/pool-tracking)</li><li>**Значение: 16 или 0x10 (бит 4)**  -  [Проверка ввода-вывода](https://docs.microsoft.com/windows-hardware/drivers/devtest/i-o-verification)</li><li>**Значение: 32 или 0x20 (бит 5)**  -  [Обнаружение взаимоблокировок](https://docs.microsoft.com/windows-hardware/drivers/devtest/deadlock-detection)</li><li>**Значение: 64 или 0x40 (бит 6)**  -  [Расширенная проверка ввода-вывода](https://docs.microsoft.com/windows-hardware/drivers/devtest/enhanced-i-o-verification). Этот параметр автоматически активируется при выборе **проверки ввода-вывода**.</li><li>**Значение: 128 или 0x80 (бит 7)**  -  [Проверка DMA](https://docs.microsoft.com/windows-hardware/drivers/devtest/dma-verification)</li><li>**Значение: 256 или 0x100 (бит 8)**  -  [Проверки безопасности](https://docs.microsoft.com/windows-hardware/drivers/devtest/security-checks)</li><li>**Значение: 512 или 0x200 (бит 9)**  -  [Принудительно ожидающие запросы ввода-вывода](https://docs.microsoft.com/windows-hardware/drivers/devtest/force-pending-i-o-requests)</li><li>**Значение: 1024 или 0x400 (бит 10)**  -  [Ведение журнала IRP](https://docs.microsoft.com/windows-hardware/drivers/devtest/irp-logging)</li><li>**Значение: 2048 или 0x800 (бит 11)**  -  [Прочие проверки](https://docs.microsoft.com/windows-hardware/drivers/devtest/miscellaneous-checks)</li><li>**Значение: 8192 или 0x2000 (бит 13)**  -  [Инвариантная проверка MDL для стека](https://docs.microsoft.com/windows-hardware/drivers/devtest/invariant-mdl-checking-for-stack)</li><li>**Значение: 16384 или 0x4000 (бит 14)**  -  [Инвариантная проверка MDL для драйвера](https://docs.microsoft.com/windows-hardware/drivers/devtest/invariant-mdl-checking-for-driver)</li><li>**Значение: 32768 или 0x8000 (бит 15)**  -  [Нечеткое тестирование задержки в Power Framework](https://docs.microsoft.com/windows-hardware/drivers/devtest/concurrency-stress-test)</li><li>**Значение: 65536 или 0x10000 (бит 16)** — проверка интерфейса порта/минипорта</li><li>**Значение: 131072 или 0x20000 (бит 17)**  -  [Проверка соответствия требованиям DDI](https://docs.microsoft.com/windows-hardware/drivers/devtest/ddi-compliance-checking)</li><li>**Значение: 262144 или 0x40000 (бит 18)**  -  [Имитация систематической нехватки ресурсов](https://docs.microsoft.com/windows-hardware/drivers/devtest/systematic-low-resource-simulation)</li><li>**Значение: 524288 или 0x80000 (бит 19)**  -  [Проверка соответствия требованиям ddI (дополнительно)](https://docs.microsoft.com/windows-hardware/drivers/devtest/ddi-compliance-checking)</li><li>**Значение: 2097152 или 0x200000 (бит 21)**  -  [Проверка NDIS/WiFi](https://docs.microsoft.com/windows-hardware/drivers/devtest/ndis-wifi-verification)</li><li>**Значение: 8388608 или 0x800000 (бит 23)**  -  [Нечеткое тестирование задержки синхронизации ядра](https://docs.microsoft.com/windows-hardware/drivers/devtest/kernel-synchronization-delay-fuzzing)</li><li>**Значение: 16777216 или 0x1000000 (бит 24)**  -  [Проверка коммутатора виртуальной машины](https://docs.microsoft.com/windows-hardware/drivers/devtest/vm-switch-verification)</li><li>**Значение: 33554432 или 0x2000000 (бит 25)** — проверки целостности кода. Этот метод нельзя использовать для активации параметров проверки SCSI или Storport. Дополнительные сведения см. в статье [Проверка SCSI](https://docs.microsoft.com/windows-hardware/drivers/devtest/scsi-verification) и [Storport](https://docs.microsoft.com/windows-hardware/drivers/devtest/dv-storport-verification).</li></ul> |
| /Flags `<volatileoptions>` | Указывает параметры служебной программы проверки драйверов, которые изменяются сразу же без перезагрузки. Это число можно указать в десятичном или шестнадцатеричном формате (с префиксом 0x). Допускается любое сочетание следующих значений:<ul><li>**Значение: 1 или 0x1 (бит 0)** — особый пул</li><li>**Значение: 2 или 0x2 (бит 1)** — принудительная проверка IRQL</li><li>**Значение: 4 или 0x4 (бит 2)** — имитация нехватки ресурсов</li></ul> |
| `<probability>` | Число от 1 до 10 000, указывающее вероятность внедрения сбоя. Например, указание 100 означает вероятность внедрения сбоя 1% (100/10000).<p>Если этот параметр не указан, используется вероятность по умолчанию, равная 6%. |
| `<tags>` | Указывает Теги пула, которые будут добавлены с ошибками, разделяя их пробелами. Если этот параметр не указан, можно внедрить любое выделение пула с ошибками. |
| `<apps>` | Указывает имя файла образа приложений, которые будут добавлены с ошибками, разделенными символами пробела. Если этот параметр не указан, имитация нехватки ресурсов может выполняться в любом приложении. |
| `<minutes>` | Положительное число, указывающее продолжительность периода после перезагрузки (в минутах), в течение которого не будет производиться внесение ошибок. Если этот параметр не указан, используется длина по умолчанию ( *8 минут* ). |
| /иолевел `<level>` | Задает уровень проверки ввода-вывода. Значение [Level] может быть равно **1** . включает проверку ввода-вывода уровня 1 (по умолчанию) или **2** — включает проверку ввода-вывода уровня 1 и проверку ввода-вывода уровня 2. Если проверка ввода-вывода не включена (с помощью `/flags 0x10` ), **/иолевел** игнорируется. |
| /log `<logfilename> [/intervalseconds]` | Создает файл журнала, используя указанное имя. Служебная программа проверки драйверов периодически записывает статистику в этот файл на основе заданного интервала. Интервал по умолчанию составляет *30 секунд*.<p> Если команда Verifier **/log** введена в командной строке, то Командная строка не возвращает значение. Чтобы закрыть файл журнала и вернуть запрос, используйте клавишу **CTRL + C** . После перезагрузки для создания журнала необходимо снова отправить команду Verifier **/log** . |
| /Rules `<option>` | Параметры для правил, которые могут быть отключены, включая:<ul><li>**запрос** — показывает текущее состояние настраиваемых правил.</li><li>**Сброс** — сбрасывает все правила в состояние по умолчанию.</li><li>**идентификатор по умолчанию** — ЗАДАЕТ для идентификатора правила состояние по умолчанию. Для поддерживаемых правил ИДЕНТИФИКАТОРом правила является проверка ошибок 0xC4 (DRIVER_VERIFIER_DETECTED_VIOLATION) значение 1.</li><li>**Disable ID (отключить идентификатор** ) — отключает указанный идентификатор правила. Для поддерживаемых правил ИДЕНТИФИКАТОРом правила является проверка ошибок 0xC4 (DRIVER_VERIFIER_DETECTED_VIOLATION) значение 1.</li></ul> |
| /Standard | Активирует стандартные параметры или средства проверки драйверов по умолчанию после следующей перезагрузки. Стандартные параметры — особый пул, принудительная проверка IRQL, отслеживание пула, проверка операций ввода-вывода, обнаружение взаимоблокировок, проверка DMA, проверки безопасности, прочие проверки и проверка соответствия требованиям DDI. Это равносильно `/flags 0x209BB`.<p>[!NOTE] Начиная с версии Windows 10 после 1803, использование `/flags 0x209BB` больше не включит автоматическую проверку ВДФ. Используйте синтаксис **/Standard** , чтобы включить стандартные параметры с включенной проверкой ВДФ. |
| /volatile | Изменяет параметры без перезагрузки компьютера. Временные параметры вступают в силу немедленно.<p>Параметр **/volatile** можно использовать с параметром **/flags** для включения и отключения некоторых параметров без перезагрузки. Можно также использовать **/volatile** с параметрами **/адддривер** и **/ремоведривер** для запуска или завершения проверки драйвера без перезагрузки, даже если служебная программа проверки драйверов не запущена. Дополнительные сведения см. [в разделе Использование временных параметров](https://docs.microsoft.com/windows-hardware/drivers/devtest/using-volatile-settings). |
| /адддривер `<volatiledriverlist>` | Удаляет указанные драйверы из временных параметров. Чтобы указать несколько драйверов, перечислите их имена, разделяя их пробелами. Подстановочные значения, такие как *n.sys*, не поддерживаются. |
| /ремоведривер `<volatiledriverlist>` |
| /reset | Удаляет все параметры служебной программы проверки драйверов. После следующей перезагрузки драйверы не будут проверены. |
| /куерисеттингс | Отображает сводку параметров, которые будут активированы, и драйверов, которые будут проверены после следующей загрузки. Отображение не включает драйверы и параметры, добавленные с помощью параметра **/volatile** . Другие способы просмотра этих параметров см. в разделе [Просмотр параметров средства проверки драйверов](https://docs.microsoft.com/windows-hardware/drivers/devtest/viewing-driver-verifier-settings). |
| /Query | Отображает сводку текущей активности программы проверки драйверов. Поле **Level (уровень** ) отображается как шестнадцатеричное значение параметров, заданных параметром **/volatile** . Объяснение каждой статистики см. в разделе [мониторинг глобальных счетчиков](https://docs.microsoft.com/windows-hardware/drivers/devtest/monitoring-global-counters) и [мониторинг отдельных счетчиков](https://docs.microsoft.com/windows-hardware/drivers/devtest/monitoring-individual-counters). |
| /Domain `<types> <options>` | Управляет параметрами расширения средства проверки. Поддерживаются следующие типы расширений средства проверки:<ul><li>**WDM** — включает расширение средства проверки для драйверов WDM.</li><li>**NDIS** — включает расширение модуля проверки для сетевых драйверов.</li><li>**KS** — включает расширение Verifier для драйверов потоковой передачи в режиме ядра.</li><li>**аудио** — включает расширение средства проверки для аудио драйверов.</li></ul>. Поддерживаются следующие параметры расширения:<ul><li>**Rules. Default** — включает правила проверки по умолчанию для выбранного расширения средства проверки.</li><li>**Rules. ALL** — включает все правила проверки для выбранного расширения средства проверки.</li></ul> |
| /логгинг | Включает ведение журнала для нарушений правил, обнаруженных выбранными расширениями модуля проверки. |
| /ливедумп | Включает сбор дампов памяти в режиме реального времени для нарушений правил, обнаруженных выбранными расширениями модуля проверки. |
| /? | Отображает справку по командной строке. |

### <a name="return-codes"></a>Коды возврата

После запуска средства проверки драйверов возвращаются следующие значения:

- 0: EXIT_CODE_SUCCESS

- 1: EXIT_CODE_ERROR

- 2: EXIT_CODE_REBOOT_NEEDED

#### <a name="remarks"></a>Комментарии

- Параметр **/volatile** можно использовать с некоторыми параметрами служебной программы проверки драйверов **/flags** и с **/Standard**. Вы не можете **использовать/volatile** с **параметрами/flags** для [проверки соответствия требованиям DDI](https://docs.microsoft.com/windows-hardware/drivers/devtest/ddi-compliance-checking), [нечеткой](https://docs.microsoft.com/windows-hardware/drivers/devtest/concurrency-stress-test) [проверки подлинности](https://docs.microsoft.com/windows-hardware/drivers/devtest/dv-storport-verification)в Power Framework, проверке Storport или [SCSI](https://docs.microsoft.com/windows-hardware/drivers/devtest/scsi-verification). Дополнительные сведения см. [в разделе Использование временных параметров](https://docs.microsoft.com/windows-hardware/drivers/devtest/using-volatile-settings).

## <a name="additional-references"></a>Дополнительные ссылки

- [Условные обозначения синтаксиса команд командной строки](command-line-syntax-key.md)

- [Средство проверки драйверов](https://docs.microsoft.com/windows-hardware/drivers/devtest/driver-verifier)

- [Управление средством проверки драйверов](https://docs.microsoft.com/windows-hardware/drivers/devtest/controlling-driver-verifier)

- [Мониторинг средства проверки драйверов](https://docs.microsoft.com/windows-hardware/drivers/devtest/monitoring-driver-verifier)

- [Использование временных параметров](https://docs.microsoft.com/windows-hardware/drivers/devtest/using-volatile-settings)
