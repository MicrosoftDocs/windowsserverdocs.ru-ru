---
title: diskshadow
description: 'Раздел Windows команды для ***- '
ms.custom: na
ms.prod: windows-server-threshold
ms.reviewer: na
ms.suite: na
ms.technology: manage-windows-commands
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: e962537d-b759-4368-b6f1-e8391cf7b221
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 10/16/2017
ms.openlocfilehash: b2c5648235a1c856c6aef09621e2381e74d08d70
ms.sourcegitcommit: 0d0b32c8986ba7db9536e0b8648d4ddf9b03e452
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/17/2019
ms.locfileid: "59869185"
---
# <a name="diskshadow"></a>diskshadow

>Область применения. Windows Server (полугодовой канал), Windows Server 2016, Windows Server 2012 R2, Windows Server 2012

DiskShadow.exe — это средство, предоставляет функциональные возможности, предлагаемые теневого копирования томов службы \(VSS\). По умолчанию diskshadow использует интерактивный интерпретатор команд аналогичны интерпретатором diskraid и DiskPart. DiskShadow также допускающий применение сценариев режим.  
  
> [!NOTE]  
> Минимальным требованием для выполнения diskshadow, является членство в локальной группе администраторов или аналогичной.  
  
Примеры использования команд diskshadow, см. в разделе [примеры](#BKMK_examples).  
  
## <a name="syntax"></a>Синтаксис  
в интерактивном режиме введите следующее в командной строке, чтобы запустить интерпретатор команд diskshadow:  
  
```  
diskshadow  
```  
  
для режима скриптов, введите следующую команду, где *script.txt* представляет собой файл сценария, содержащий diskshadow команды:  
  
```  
diskshadow -s script.txt  
```  
  
## <a name="diskshadow-commands"></a>DiskShadow команды  
В интерпретатор команд diskshadow или с помощью файла сценария, можно выполните следующие команды:  
  
|Параметр|Описание|  
|-------|--------|  
|[set_2](set_2.md)|Задает контекст, параметры, режим подробного протоколирования и файл метаданных для создания теневых копий.|  
|[Имитация восстановления](simulate-restore.md)|Проверяет модуль записи участие в сеансах восстановления на компьютере без выдачи **PreRestore** или **PostRestore** события для записи.|  
|[Загрузить метаданные](load-metadata.md)|Загружает метаданные CAB-файл перед импортом переносимой теневой копии или загружает метаданные модуля записи в случае восстановления.|  
|[модуль записи](writer.md)|Проверяет, модуль записи или компонент включается или исключает записи или компонент из процедуры резервного копирования или восстановления.|  
|[add_1](add_1.md)|Добавляет тома в набор томов, которые подлежат теневому копированию или псевдонимы в среду псевдоним.|  
|[create_1](create_1.md)|Запускает процесс создания теневой копии, с использованием текущих параметров контекста и параметр.|  
|[EXEC](exec.md)|выполняет файл на локальном компьютере.|  
|[Начать резервное копирование](begin-backup.md)|Запускает сеанс полной архивации.|  
|[Резервного копирования](end-backup.md)|Завершает сеанс полного резервного копирования и проблемы **Backupcomplete** событий с состоянием соответствующего модуля, при необходимости.|  
|[Начать восстановление](begin-restore.md)|Запускает восстановление сеанса и проблемы **PreRestore** событий для участвующих модулей записи.|  
|[Окончания восстановления](end-restore.md)|Завершает восстановление сеанса и проблемы **PostRestore** событий для участвующих модулей записи.|  
|[Сброс](reset.md)|Сбрасывает diskshadow до значений по умолчанию.|  
|[Список](list.md)|Список модулей записи, теневые копии или поставщиков зарегистрированные на данный момент теневых копий, которые находятся в системе.|  
|[удалить shadows](delete-shadows.md)|операции удаления теневых копий.|  
|[Импорт](import.md)|Импортирует переносимой теневой копии из загруженных метаданных файла в систему.|  
|[Маска](mask.md)|Удаляет аппаратных теневых копий, которые были импортированы с помощью **импорта** команды.|  
|[предоставлять](expose.md)|Предоставляет постоянное теневого копирования как букву диска, общей папки или точки подключения.|  
|[Отмена доступа](unexpose.md)|unexposes теневого копирования, который предоставляется с помощью **предоставлять** команды.|  
|[break_2](break_2.md)|Отсоединяет том теневых копий из VSS.|  
|[вернуть](revert.md)|Возвращается к указанным теневого копирования тома.|  
|[exit_1](exit_1.md)|diskshadow завершает работу.|  
  
## <a name="remarks"></a>Примечания  
  
-   как минимум, только **добавить** и **создать** необходимы для создания теневой копии. Тем не менее она лишатся настройки контекста и параметр, копирование также будет только будет выполнено создание теневой копии без сценариев выполнения резервного копирования.  
  
## <a name="BKMK_examples"></a>Примеры  
Это пример последовательность команд, которые будет выполнено создание теневой копии для резервного копирования. Его можно сохранить файл в качестве script.dsh и выполнить с помощью diskshadow \/s script.dsh  
  
Предполагается следующее.  
  
-   У вас есть существующий каталог с именем c:\\diskshadowdata.  
  
-   Системный том — C: и объем собираемых данных D:.  
  
-   Имеется файл backupscript.cmd в c:\\diskshadowdata.  
  
-   Файл backupscript.cmd выполнит копию данных p: тени и вопрос на диск и резервного копирования.  
  
Вручную введите следующие команды также можно создать для них скрипты:  
  
```  
#diskshadow script file  
set context persistent nowriters  
set metadata c:\diskshadowdata\example.cab  
set verbose on  
begin backup  
add volume c: alias Systemvolumeshadow  
add volume d: alias Datavolumeshadow  
  
create  
  
expose %Systemvolumeshadow% p:  
expose %Datavolumeshadow% q:  
exec c:\diskshadowdata\backupscript.cmd  
end backup  
#End of script  
```  
  
#### <a name="additional-references"></a>Дополнительные ссылки  
[Ключ синтаксиса командной строки](command-line-syntax-key.md)  
  

