---
title: wevtutil
description: Справочный раздел по команде wevtutil, который позволяет получать сведения о журналах событий и издателях.
ms.prod: windows-server
ms.technology: manage-windows-commands
ms.topic: article
ms.assetid: d4c791e0-7e59-45c5-aa55-0223b77a4822 vhorne
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 10/16/2017
ms.openlocfilehash: af38d4eb1aed778574fdbba00851d9ed2b98ec6f
ms.sourcegitcommit: ab64dc83fca28039416c26226815502d0193500c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/01/2020
ms.locfileid: "82725826"
---
# <a name="wevtutil"></a>wevtutil



Позволяет получать сведения о журналах событий и издателях. Эту команду также можно использовать для установки и удаления манифестов событий, выполнения запросов, экспорта, архивирования и очистки журналов. 

## <a name="syntax"></a>Синтаксис

```
wevtutil [{el | enum-logs}] [{gl | get-log} <Logname> [/f:<Format>]]
[{sl | set-log} <Logname> [/e:<Enabled>] [/i:<Isolation>] [/lfn:<Logpath>] [/rt:<Retention>] [/ab:<Auto>] [/ms:<MaxSize>] [/l:<Level>] [/k:<Keywords>] [/ca:<Channel>] [/c:<Config>]] 
[{ep | enum-publishers}] 
[{gp | get-publisher} <Publishername> [/ge:<Metadata>] [/gm:<Message>] [/f:<Format>]] [{im | install-manifest} <Manifest>] 
[{um | uninstall-manifest} <Manifest>] [{qe | query-events} <Path> [/lf:<Logfile>] [/sq:<Structquery>] [/q:<Query>] [/bm:<Bookmark>] [/sbm:<Savebm>] [/rd:<Direction>] [/f:<Format>] [/l:<Locale>] [/c:<Count>] [/e:<Element>]] 
[{gli | get-loginfo} <Logname> [/lf:<Logfile>]] 
[{epl | export-log} <Path> <Exportfile> [/lf:<Logfile>] [/sq:<Structquery>] [/q:<Query>] [/ow:<Overwrite>]] 
[{al | archive-log} <Logpath> [/l:<Locale>]] 
[{cl | clear-log} <Logname> [/bu:<Backup>]] [/r:<Remote>] [/u:<Username>] [/p:<Password>] [/a:<Auth>] [/uni:<Unicode>]
```

### <a name="parameters"></a>Параметры

|Параметр|Описание:|
|---------|-----------|
|{El \| enum-Logs}|Отображает имена всех журналов.|
|{GL \| Get-log} \<Параметр> [/F:\<Format>]|Отображает сведения о конфигурации для указанного журнала, которые включают в себя, включен ли журнал, текущий максимальный размер журнала и путь к файлу, в котором хранится журнал.|
|{SL \| set-log} \</L> [/E:\<Enabled>] [/i:\<изоляция>] [/лфн:\<logPath>] [/РТ:\<retention>] [:\<Auto>] [/мс:\<MaxSize>] [/l:\<Level>] [/k:\<keywords>] [/CA\<: Channel>] [/c\<: config>]|Изменяет конфигурацию указанного журнала.|
|{EP \| перечисление-издатели}|Отображает издатели событий на локальном компьютере.|
|{GP \| Get-Publisher} \<PublisherName> [/GE:\<Metadata>] [/GM:\<сообщение>] [/f:\<Format>]]|Отображает сведения о конфигурации для указанного издателя события.|
|{Im \| Install-manifest} \<> манифеста|Устанавливает издатели событий и журналы из манифеста. Дополнительные сведения о манифестах событий и использовании этого параметра см. в разделе пакет SDK для журнала событий Windows на веб-сайте Microsoft Developers Network ([https://msdn.microsoft.com](https://msdn.microsoft.com)MSDN) ().|
|{Удаление \| UM-манифест} \<> манифеста|Удаляет все издатели и журналы из манифеста. Дополнительные сведения о манифестах событий и использовании этого параметра см. в разделе пакет SDK для журнала событий Windows на веб-сайте Microsoft Developers Network ([https://msdn.microsoft.com](https://msdn.microsoft.com)MSDN) ().|
|{QE \| Query-Events} \<Путь> [/ЛФ:\<файл_журнала>] [/sq:\<структкуери>] [/q:\<запрос>] [/БМ:\<Bookmark>] [/СБМ:\<савебм>] [/RD:\<направление>] [/f:\<Format>] [/l:\<языковой стандарт] [/c\<: count>] [/e\<: элемент>]|Считывает события из журнала событий, из файла журнала или с помощью структурированного запроса. По умолчанию для \<пути> указать имя журнала. Однако если используется параметр **/ЛФ** , то \<путь> должен быть путем к файлу журнала. При использовании параметра **/sq** \<путь> должен быть путем к файлу, содержащему структурированный запрос.|
|{Гли \| Get-loginfo} \<> журнала [/ЛФ:\<файл_журнала>]|Отображает сведения о состоянии журнала событий или файла журнала. Если используется параметр **/ЛФ** , \<то> — это путь к файлу журнала. Чтобы получить список имен журналов, можно запустить программу **wevtutil El** .|
|{EPL \| экспорт-журнал} \<Путь> \<експортфиле> [/ЛФ:\<файл_журнала>] [/sq:\<структкуери>] [/q:\<Query>] [/ов:\<overwrite>]|Экспортирует события из журнала событий, из файла журнала или с помощью структурированного запроса к указанному файлу. По умолчанию для \<пути> указать имя журнала. Однако если используется параметр **/ЛФ** , то \<путь> должен быть путем к файлу журнала. При использовании параметра **/sq** \<путь> должен быть путем к файлу, содержащему структурированный запрос. \<Експортфиле> — это путь к файлу, в котором будут храниться экспортированные события.|
|{Al \| Archive-log} \<LogPath> [/L:\<locale>]|Архивирует указанный файл журнала в автономном формате. Будет создан подкаталог с именем локали, и все сведения, относящиеся к языку, сохраняются в этом подкаталоге. После создания каталога и файла журнала с помощью команды **wevtutil Al**события в файле можно считать, установлен ли издатель.|
|{CL \| Clear-Log} \<Backup> [/бу:\<> резервного копирования]|Удаляет события из указанного журнала событий. Параметр **/Бу** можно использовать для резервного копирования очищенных событий.|

## <a name="options"></a>Параметры

|       Параметр       |                                                                                                                                                                                                                                                                 Описание                                                                                                                                                                                                                                                                  |
|--------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|    /f:\<форматирование>    |                                                                                                                                                               Указывает, что выходные данные должны быть в формате XML или текстовый формат. Если \<форматом> является XML, выходные данные отображаются в формате XML. Если \<формат> является текстом, выходные данные отображаются без XML-тегов. Значение по умолчанию - Text.                                                                                                                                                                |
|   /e:\<включенный>    |                                                                                                                                                                                                                                         Включает или отключает журнал. \<Enabled> могут иметь значение true или false.                                                                                                                                                                                                                                          |
|  /i:\<> изоляции   | Задает режим изоляции журнала. \<Изоляция> может быть системой, приложением или настраиваемой. Режим изоляции журнала определяет, использует ли журнал сеанс совместно с другими журналами в том же классе изоляции. При указании изоляции системы целевой журнал будет совместно использовать по крайней мере разрешения на запись в системном журнале. При указании изоляции приложения целевой журнал будет совместно использовать по крайней мере разрешения на запись в журнале приложений. При указании пользовательской изоляции необходимо также предоставить дескриптор безопасности с помощью параметра **/CA** . |
|  /лфн:\<logPath>   |                                                                                                                                                                                                           Определяет имя файла журнала. \<LogPath> — это полный путь к файлу, в котором служба журнала событий хранит события для этого журнала.                                                                                                                                                                                                           |
|  /РТ:\<> хранения  |                                                            Задает режим хранения журнала. \<> хранения может иметь значение true или false. Режим хранения журнала определяет поведение службы журнала событий при достижении максимального размера журнала. Если журнал событий достигает максимального размера, а режим хранения журнала имеет значение true, существующие события сохраняются, а входящие события отбрасываются. Если режим хранения журнала имеет значение false, входящие события перезапишут самые старые события в журнале.                                                             |
|    /АБ:\<Auto>     |                                                                                                                                   Задает политику автоматической архивации журналов. \<Auto> может иметь значение true или false. Если это значение равно true, резервное копирование журнала выполняется автоматически при достижении максимального размера. Если это значение равно true, то параметр хранения (заданный параметром **/РТ** ) также должен иметь значение true.                                                                                                                                    |
|   /МС:\<MAXSIZE>   |                                                                                                                                                                        Задает максимальный размер журнала в байтах. Минимальный размер журнала 1048576 байт (1024 КБ) и файлы журнала всегда кратны 64 КБ, поэтому введенное значение будет округляться соответствующим образом.                                                                                                                                                                         |
|    /l:\<> уровня     |                                                                                                                                                                     Определяет фильтр уровня журнала. \<> уровня может быть любым допустимым значением уровня. Этот параметр применим только к журналам с выделенным сеансом. Фильтр уровня можно удалить, задав значение <Level> 0.                                                                                                                                                                      |
|   /k:\<ключевые слова>   |                                                                                                                                                                                         Задает фильтр ключевых слов журнала. \<Ключевые слова> могут быть любой допустимой маской ключевых слов 64 разрядов. Этот параметр применим только к журналам с выделенным сеансом.                                                                                                                                                                                         |
|   /CA:\<канал>   |                                                                                                                   Задает разрешение на доступ к журналу событий. \<> канала — это дескриптор безопасности, использующий язык определения дескрипторов безопасности (SDDL). Дополнительные сведения о формате SDDL см. на веб-сайте[https://msdn.microsoft.com](https://msdn.microsoft.com)Microsoft Developers Network (MSDN).                                                                                                                    |
|    /c:\<config>    |                                                                                                                                  Указывает путь к файлу конфигурации. Этот параметр приведет к считыванию свойств журнала из файла конфигурации, определенного в \<конфигурации>. При использовании этого параметра не следует указывать <Logname> параметр. Имя журнала будет считано из файла конфигурации.                                                                                                                                   |
|  /GE:\<метаданные>   |                                                                                                                                                                                                                 Возвращает сведения о метаданных для событий, которые могут быть вызваны этим издателем. \<Метаданные> могут иметь значение true или false.                                                                                                                                                                                                                 |
|   /GM:\<> сообщения   |                                                                                                                                                                                                                       Отображает реальное сообщение вместо числового идентификатора сообщения. \<Сообщение> может иметь значение true или false.                                                                                                                                                                                                                        |
|   /ЛФ:\<файл журнала>   |                                                                                                                                                                                  Указывает, что события должны считываться из журнала или из файла журнала. \<Файл журнала> может иметь значение true или false. Если значение равно true, параметр команды является путем к файлу журнала.                                                                                                                                                                                   |
| /sq:\<структкуери> |                                                                                                                                                                                Указывает, что события должны быть получены с помощью структурированного запроса. \<Структкуери> может иметь значение true или false. Если значение равно <Path> true, то — это путь к файлу, содержащему структурированный запрос.                                                                                                                                                                                |
|    /q:\<> запроса     |                                                                                                                                                                     Определяет запрос XPath для фильтрации событий, которые считываются или экспортируются. Если этот параметр не указан, будут возвращены или экспортированы все события. Этот параметр недоступен, если **/sq** имеет значение true.                                                                                                                                                                     |
|  /БМ:\<закладка>   |                                                                                                                                                                                                                                 Указывает путь к файлу, содержащему закладку из предыдущего запроса.                                                                                                                                                                                                                                 |
|   /СБМ:\<савебм>   |                                                                                                                                                                                                             Указывает путь к файлу, используемому для сохранения закладки этого запроса. Расширение имени файла должно быть XML.                                                                                                                                                                                                              |
|  /RD:\<направление>  |                                                                                                                                                                                                   Указывает направление чтения событий. \<Направление> может иметь значение true или false. Если значение равно true, то первыми возвращаются самые последние события.                                                                                                                                                                                                   |
|    /l:\<> языкового стандарта    |                                                                                                                                                                                          Определяет строку языкового стандарта, используемую для печати текста событий в определенном языковом стандарте. Доступно только при печати событий в текстовом формате с помощью параметра **/f** .                                                                                                                                                                                          |
|    /c:\<число>     |                                                                                                                                                                                                                                                  Задает максимальное число событий для чтения.                                                                                                                                                                                                                                                  |
|   /e:\<> элемента    |                                                                                                                                                           Включает корневой элемент при отображении событий в формате XML. \<Element> — это строка, которая должна находиться в корневом элементе. Например, параметр **/e: root** приведет к созданию XML, который содержит корневую>\< </root>пары корневых элементов.                                                                                                                                                            |
|  /ов:\<перезаписать>  |                                                                                                                                                                 Указывает, что файл экспорта должен быть перезаписан. \<Перезапись> может иметь значение true или false. Если значение равно true, а файл экспорта, <Exportfile> указанный в, уже существует, он будет перезаписан без подтверждения.                                                                                                                                                                 |
|   /Бу:\<резервное копирование>    |                                                                                                                                                                                                      Указывает путь к файлу, в котором будут храниться удаленные события. Добавьте расширение. evtx в имя файла резервной копии.                                                                                                                                                                                                       |
|    /r:\<удаленный>    |                                                                                                                                                                                            Выполняет команду на удаленном компьютере. \<Remote> — это имя удаленного компьютера. Параметры **IM** и **UM** не поддерживают удаленную операцию.                                                                                                                                                                                            |
|   /u:\<имя_пользователя>   |                                                                                                                                                                          Указывает другого пользователя для входа на удаленный компьютер. \<Username> — это имя пользователя в формате Domain\User или User. Этот параметр применим только в том случае, если указан параметр **/r** .                                                                                                                                                                          |
|   /p:\<> пароля   |                                                                                                                                               Указывает пароль для пользователя. Если используется параметр **/u** и этот параметр не указан или \<пароль> имеет значение *, пользователю будет предложено ввести пароль. Этот параметр применим только в том случае \* \*, если* указан параметр/u.\*                                                                                                                                                |
|     /a:\<проверка подлинности>     |                                                                                                                                                                                             Определяет тип проверки подлинности для подключения к удаленному компьютеру. \<> проверки подлинности могут быть по умолчанию, Negotiate, Kerberos или NTLM. Значение по умолчанию — Negotiate.                                                                                                                                                                                              |
|  /уни:\<Юникод>   |                                                                                                                                                                                                             Отображает выходные данные в Юникоде. \<> Юникода может иметь значение true или false. Если <Unicode> имеет значение true, выходные данные заменяются в Юникоде.                                                                                                                                                                                                             |

## <a name="remarks"></a>Примечания

-   Использование файла конфигурации с параметром SL

    Файл конфигурации представляет собой XML-файл того же формата, что и выходные данные wevtutil GL \<>/f: XML. Чтобы показать формат файла конфигурации, который включает сохранение, включает авторезервное копирование и задает максимальный размер журнала в журнале приложений:  
    ```
    <?xml version=1.0 encoding=UTF-8?>
    <channel name=Application isolation=Application
    xmlns=https://schemas.microsoft.com/win/2004/08/events>
    <logging>
    <retention>true</retention>
    <autoBackup>true</autoBackup>
    <maxSize>9000000</maxSize>
    </logging>
    <publishing>
    </publishing>
    </channel>
    ```

## <a name="examples"></a>Примеры

Список имен всех журналов:
```
wevtutil el
```
Отображение сведений о конфигурации системного журнала на локальном компьютере в формате XML:
```
wevtutil gl System /f:xml
```
Используйте файл конфигурации для задания атрибутов журнала событий (см. раздел Примечания для примера файла конфигурации):
```
wevtutil sl /c:config.xml
```
Отображение сведений о издателе событий Microsoft-Windows-EventLog, включая метаданные о событиях, которые может вызывать Издатель:
```
wevtutil gp Microsoft-Windows-Eventlog /ge:true
```
Установите издателей и журналы из файла манифеста Миманифест. XML:
```
wevtutil im myManifest.xml
```
Удалите издатели и журналы из файла манифеста Миманифест. XML:
```
wevtutil um myManifest.xml
```
Отображать три последних события из журнала приложений в текстовом формате:
```
wevtutil qe Application /c:3 /rd:true /f:text
```
Отображение состояния журнала приложений:
```
wevtutil gli Application 
```
Экспортировать события из системного журнала в C:\backup\system0506.evtx:
```
wevtutil epl System C:\backup\system0506.evtx
```
Удалить все события из журнала приложений после их сохранения в C:\admin\backups\a10306.evtx:
```
wevtutil cl Application /bu:C:\admin\backups\a10306.evtx
```

#### <a name="additional-references"></a>Дополнительные ссылки

- [Условные обозначения синтаксиса команд командной строки](command-line-syntax-key.md)
