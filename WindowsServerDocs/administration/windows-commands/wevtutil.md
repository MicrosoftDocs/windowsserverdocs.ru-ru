---
title: wevtutil
description: 'Раздел Windows команды для ***- '
ms.custom: na
ms.prod: windows-server-threshold
ms.reviewer: na
ms.suite: na
ms.technology: manage-windows-commands
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: d4c791e0-7e59-45c5-aa55-0223b77a4822 vhorne
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 10/16/2017
ms.openlocfilehash: e6d57f95379fce80bec9cb5e8445b28f887123c8
ms.sourcegitcommit: 0d0b32c8986ba7db9536e0b8648d4ddf9b03e452
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/17/2019
ms.locfileid: "59826735"
---
# <a name="wevtutil"></a>wevtutil



Позволяет получить сведения о журналах событий и издателях. Можно также использовать эту команду для установки и удаления манифесты событий, выполнять запросы и экспорт, архивирование и очистки журналов. В разделе [Примеры](#BKMK_examples) показан принцип использования этой команды.

## <a name="syntax"></a>Синтаксис

```
wevtutil [{el | enum-logs}] [{gl | get-log} <Logname> [/f:<Format>]]
[{sl | set-log} <Logname> [/e:<Enabled>] [/i:<Isolation>] [/lfn:<Logpath>] [/rt:<Retention>] [/ab:<Auto>] [/ms:<MaxSize>] [/l:<Level>] [/k:<Keywords>] [/ca:<Channel>] [/c:<Config>]] 
[{ep | enum-publishers}] 
[{gp | get-publisher} <Publishername> [/ge:<Metadata>] [/gm:<Message>] [/f:<Format>]] [{im | install-manifest} <Manifest>] 
[{um | uninstall-manifest} <Manifest>] [{qe | query-events} <Path> [/lf:<Logfile>] [/sq:<Structquery>] [/q:<Query>] [/bm:<Bookmark>] [/sbm:<Savebm>] [/rd:<Direction>] [/f:<Format>] [/l:<Locale>] [/c:<Count>] [/e:<Element>]] 
[{gli | get-loginfo} <Logname> [/lf:<Logfile>]] 
[{epl | export-log} <Path> <Exportfile> [/lf:<Logfile>] [/sq:<Structquery>] [/q:<Query>] [/ow:<Overwrite>]] 
[{al | archive-log} <Logpath> [/l:<Locale>]] 
[{cl | clear-log} <Logname> [/bu:<Backup>]] [/r:<Remote>] [/u:<Username>] [/p:<Password>] [/a:<Auth>] [/uni:<Unicode>]
```

## <a name="parameters"></a>Параметры

|Параметр|Описание|
|---------|-----------|
|{el \| enum-logs}|Отображает имена всех журналов.|
|{gl \| get-log} \<Logname > [/ f:\<Формат >]|Отображает сведения о конфигурации для указанного журнала, включает ли журнал включен или нет, текущего ограничения на максимальный размер журнала и путь к файлу, где хранится журнал.|
|{sl \| журнал набора} \<Logname > [/ e:\<включено >] [/ i:\<изоляции >] [/ программа:\<Logpath >] [/ rt:\<хранения >] [/ ab:\<автоматически >] [/ ms:\< MaxSize >] [/ l:\<уровень >] [/ k:\<ключевые слова >] [/ ЦС:\<канала >] [/ c:\<Config >]|Изменяет конфигурацию указанного журнала.|
|{ep \| enum-publishers}|Отображает издатели событий на локальном компьютере.|
|{gp \| get-publisher} \<Publishername > [/ ge:\<метаданных >] [/ gm:\<сообщения >] [/ f:\<Формат >]]|Отображает сведения о конфигурации для указанного события издателя.|
|{обмена мгновенными сообщениями \| install-manifest} \<манифест >|Устанавливает издателей событий и журналов из манифеста. Дополнительные сведения о манифестах событий и с помощью этого параметра см. в разделе журнала событий Windows SDK на веб-узле Microsoft Developer Network (MSDN) (https://msdn.microsoft.com).|
|{единой системы обмена сообщениями \| удалить манифест} \<манифест >|Удаление всех издателей и журналы из манифеста. Дополнительные сведения о манифестах событий и с помощью этого параметра см. в разделе журнала событий Windows SDK на веб-узле Microsoft Developer Network (MSDN) (https://msdn.microsoft.com).|
|{qe \| события запросов} \<путь > [/ lf:\<файла журнала >] [/ sq:\<Structquery >] [/ вопрос\<запроса >] [/ bm:\<закладки >] [/ sbm:\<Savebm >] [/ удаленных рабочих столов:\< Направление >] [/ f:\<Формат >] [/ l:\<локали >] [/ c:\<Count >] [/ e:\<элемент >]|Считывает события из журнала событий, из файла журнала, или с помощью структурированных запросов. По умолчанию, укажите имя журнала для \<путь >. Тем не менее если вы используете **/lf** параметр, затем \<путь > должен быть путем к файлу журнала. Если вы используете **/sq** параметра \<путь > должен быть путем к файлу, содержащему структурированных запросов.|
|{gli \| get-loginfo} \<Logname > [/ lf:\<файла журнала >]|Сведения о состоянии журнала событий или файла журнала. Если **/lf** используется параметр, \<Logname > — это путь к файлу журнала. Можно запустить **wevtutil el** для получения списка имен журналов.|
|{epl \| журнал экспорта} \<путь > \<файл экспорта > [/ lf:\<файла журнала >] [/ sq:\<Structquery >] [/ вопрос\<запроса >] [/ ак:\<перезаписать >]|Экспортирует события из журнала событий, из файла журнала, или с помощью структурированных запросов в указанный файл. По умолчанию, укажите имя журнала для \<путь >. Тем не менее если вы используете **/lf** параметр, затем \<путь > должен быть путем к файлу журнала. Если вы используете **/sq** параметр, \<путь > должен быть путем к файлу, содержащему структурированных запросов. \<Файл экспорта > — это путь к файлу, где будут храниться экспортированные события.|
|{al \| журнала архивирования} \<Logpath > [/ l:\<локали >]|Архивирует указанный файл журнала в виде автономного. Создается подкаталог с именем языкового стандарта и все зависящие от языкового стандарта сохраняется в этом подкаталоге. После создания каталога и файла журнала, выполнив **wevtutil al**, можно производить чтение событий в файле установлен ли издатель.|
|{cl \| clear-log} \<Logname > [/ bu:\<резервного копирования >]|Удаляет события из указанного журнала событий. **/Bu** параметр может использоваться для резервного копирования удаленные события.|

## <a name="options"></a>Параметры

|Параметр|Описание|
|------|-----------|
|/ f:\<Формат >|Указывает, что выходные данные XML или текстовом формате. Если \<Формат > является XML, выходные данные отображаются в формате XML. Если \<Формат > — это текст, выходные данные будут отображаться без XML-теги. Значение по умолчанию — текст.|
|/ e:\<включено >|Включает или отключает журнал. \<Включить > может быть true или false.|
|/ i:\<изоляции >|Задает режим изоляции журнала. \<Изоляция > может быть системы, приложения или пользовательских. Режим изоляции журнала, определяет ли журнал совместно использует сеанс с другими журналами, в том же классе изоляции. При указании изоляция системы целевого журнала будут совместно использовать по крайней мере записи разрешений в системном журнале. Если указать изоляции приложений, будут совместно использовать в целевой журнал на запись разрешения для журнала приложений. Если указать пользовательские изоляции, необходимо также указать дескриптор безопасности с помощью **/ca** параметр.|
|/LFN:\<Logpath >|Определяет имя файла журнала. \<Logpath > — полный путь к файлу, где служба журнала событий сохраняет события для этого журнала.|
|/RT:\<хранения >|Задает режим хранения журнала. \<Хранение > может быть true или false. Режим хранения журнала определяет поведение службы журнала событий, при достижении максимального размера журнала. Если журнал событий достигает максимального размера и режим хранения журнала имеет значение true, существующие события будут сохранены, и входящие события отбрасываются. Если режим хранения журнала имеет значение false, входящие события перезаписывать старые события в журнале.|
|/AB:\<автоматически >|Указывает политику автоматического резервного копирования журнала. \<Автоматическое > может быть true или false. Если это значение равно true, будет резервное копирование журнала автоматически при достижении максимального размера. Если это значение равно true, срок хранения (указывается с помощью **/rt** параметр) также должно быть задано значение true.|
|/ ms:\<MaxSize >|Задает максимальный размер журнала в байтах. Минимальный размер журнала — 1 048 576 байт (1024 КБ) и файлы журналов всегда, кратные 64 КБ, поэтому вводить значение будет округлено соответствующим образом.|
|/l:\<Level>|Определяет фильтр уровня журнала. \<Уровень > может быть любым допустимым значением уровня. Этот параметр применяется только к журналам с сеансом выделенный. Фильтр уровня можно удалить, установив <Level> 0.|
|/k:\<Keywords>|Фильтр ключевых слов журнала. \<Ключевые слова > может быть какой-либо маски допустимым 64-разрядным ключевое слово. Этот параметр применяется только к журналам с сеансом выделенный.|
|/CA:\<канала >|Задает разрешение на доступ для журнала событий. \<Канал > задает дескриптор безопасности, который использует язык определения дескрипторов безопасности (SDDL). Дополнительные сведения о формате SDDL см. в разделе веб-узла Microsoft Developer Network (MSDN) (https://msdn.microsoft.com).|
|/ c:\<Config >|Указывает путь к файлу конфигурации. Этот параметр предписывает свойства журнала для чтения из файла конфигурации, определенные в \<Config >. Если вы используете этот параметр, поэтому нельзя указывать <Logname> параметра. Имя журнала будут считываться из файла конфигурации.|
|/GE:\<метаданных >|Получает сведения о метаданных для события, вызываемые этим издателем. \<Метаданные > может быть true или false.|
|/GM:\<сообщение >|Отображает фактическое сообщение вместо идентификатор числовых сообщения. \<Сообщение > может быть true или false.|
|/LF:\<файла журнала >|Указывает, что события должны считываться из журналов или из файла журнала. \<Файл журнала > может быть true или false. Значение true, если параметр команды, путь к файлу журнала.|
|/ sq:\<Structquery >|Указывает, что события должны быть получены с помощью структурированных запросов. \<Structquery > может быть true или false. Если значение равно true, <Path> — это путь к файлу, содержащему структурированных запросов.|
|/ q:\<запроса >|Определяет запрос XPath для фильтрации событий, которые будут считаны или экспортировать. Если этот параметр не указан, все события будут возвращается или экспортировать. Этот параметр недоступен при **/sq** имеет значение true.|
|/bm:\<Bookmark>|Указывает путь к файлу, содержащему закладку из предыдущего запроса.|
|/sbm:\<Savebm>|Указывает путь к файлу, который используется для сохранения закладки этого запроса. Расширение имени файла должно быть XML.|
|законченных:\<направление >|Указывает направление, в котором считываются события. \<Направление > может быть true или false. Значение true, если сначала возвращаются самые последние события.|
|/ l:\<языкового стандарта >|Определяет языковой стандарт строку, которая используется для печати текст события для определенного языкового стандарта. Доступно только при печати события в текстовом формате, используя **/f** параметр.|
|/c:\<Count>|Задает максимальное количество событий для чтения.|
|/ e:\<элемент >|При отображении события в формате XML включает в себя корневой элемент. \<Элемент > — Строка, которая требуется в корневом элементе. Например **/e:root** приведет к XML, который содержит пары корневого элемента \<корневой ></root>.|
|/ ак:\<перезаписать >|Указывает, что файл экспорта следует перезаписывать. \<Перезаписать > может быть true или false. Если значение true и файла экспорта, заданный в <Exportfile> уже существует, он будет перезаписан без подтверждения.|
|/BU:\<резервного копирования >|Указывает путь к файлу, где будет храниться удаленные события. Расширение .evtx имя файла резервной копии.|
|/ r:\<удаленного >|Выполняет команду на удаленном компьютере. \<Удаленный > — имя удаленного компьютера. **Обмена мгновенными сообщениями** и **единой системы обмена сообщениями** параметры не поддерживают удаленная операция.|
|/ u:\<имя пользователя >|Указывает другого пользователя для входа на удаленном компьютере. \<Имя пользователя > является именем пользователя в формат "домен\пользователь" или пользователь. Данный параметр применяется только тогда, когда **/r** параметра.|
|/ p:\<пароль >|Указывает пароль для пользователя. Если **/u** параметр используется, и этот параметр не указан или \<пароль > — «*», пользователю будет предложено ввести пароль. Данный параметр применяется только тогда, когда **/u** параметра.|
|/ a:\<Auth >|Определяет тип проверки подлинности для подключения к удаленному компьютеру. \<Проверка подлинности > может быть, по умолчанию, Negotiate, Kerberos или NTLM. Значение по умолчанию — Negotiate.|
|/UNI:\<Юникода >|Отображает выходные данные в формате Юникод. \<Юникод > может быть true или false. Если <Unicode> имеет значение true, то выходные данные в Юникоде.|

## <a name="remarks"></a>Примечания

-   С помощью файла конфигурации с помощью параметра sl

    Файл конфигурации является XML-файл с совпадает с форматом выходных данных wevtutil gl \<Logname > /f:xml. В примере показан формат файла конфигурации, хранение, позволяет автоматической архивации и задает максимальный размер журнала в журнале приложений:  
    ```
    <?xml version="1.0" encoding="UTF-8"?>
    <channel name="Application" isolation="Application"
    xmlns="https://schemas.microsoft.com/win/2004/08/events">
    <logging>
    <retention>true</retention>
    <autoBackup>true</autoBackup>
    <maxSize>9000000</maxSize>
    </logging>
    <publishing>
    </publishing>
    </channel>
    ```

## <a name="BKMK_examples"></a>Примеры

Список имен всех журналов:
```
wevtutil el
```
Для отображения сведений о журнале системы конфигурации локального компьютера в формате XML:
```
wevtutil gl System /f:xml
```
Использование файла конфигурации для задать атрибуты журнал событий (см. в разделе "Примечания" пример файла конфигурации):
```
wevtutil sl /c:config.xml
```
Для отображения сведений об издателе событий Microsoft-Windows-Eventlog, включая метаданные о событиях, которые он может вызывать:
```
wevtutil gp Microsoft-Windows-Eventlog /ge:true
```
Установите издателей и журналы из файла манифеста myManifest.xml:
```
wevtutil im myManifest.xml
```
Удалите из файла манифеста myManifest.xml издателей и журналы:
```
wevtutil um myManifest.xml
```
В текстовом формате для отображения три самые последние события из журнала приложений:
```
wevtutil qe Application /c:3 /rd:true /f:text
```
Отображение состояния в журнал приложений:
```
wevtutil gli Application 
```
Экспортируйте события из журнала системы C:\backup\system0506.evtx:
```
wevtutil epl System C:\backup\system0506.evtx
```
Очистите все события из журнала приложений после их сохранения C:\admin\backups\a10306.evtx:
```
wevtutil cl Application /bu:C:\admin\backups\a10306.evtx
```

#### <a name="additional-references"></a>Дополнительные ссылки

[Ключ синтаксиса командной строки](command-line-syntax-key.md)
