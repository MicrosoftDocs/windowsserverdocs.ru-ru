---
title: cipher
description: 'Раздел Windows команды для ***- '
ms.custom: na
ms.prod: windows-server-threshold
ms.reviewer: na
ms.suite: na
ms.technology: manage-windows-commands
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: 78ef795e-0f87-4acd-8d15-192c972c0f41
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 10/16/2017
ms.openlocfilehash: baf527d3590a4ec52a51260d3083419ab27d548d
ms.sourcegitcommit: 0d0b32c8986ba7db9536e0b8648d4ddf9b03e452
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/17/2019
ms.locfileid: "59887185"
---
# <a name="cipher"></a>cipher



Отображает или изменяет шифрования каталогов и файлов на томах NTFS. При использовании без параметров, **шифра** отображает состояние шифрования в текущем каталоге и всех файлов, он содержит.

В разделе [Примеры](#BKMK_examples) показан принцип использования этой команды.

## <a name="syntax"></a>Синтаксис

```
cipher [/e | /d | /c] [/s:<Directory>] [/b] [/h] [PathName [...]]
cipher /k
cipher /r:<FileName> [/smartcard]
cipher /u [/n]
cipher /w:<Directory>
cipher /x[:efsfile] [FileName]
cipher /y
cipher /adduser [/certhash:<Hash> | /certfile:<FileName>] [/s:Directory] [/b] [/h] [PathName [...]]
cipher /removeuser /certhash:<Hash> [/s:<Directory>] [/b] [/h] [<PathName> [...]]
cipher /rekey [PathName [...]]
```

## <a name="parameters"></a>Параметры

|Параметры|Описание|
|----------|-----------|
|/b|Прерывает выполнение, если возникает ошибка. По умолчанию **шифра** продолжает работать даже при возникновении ошибок.|
|/c|Отображает сведения о зашифрованный файл.|
|/d|Расшифровывает указанные файлы или каталоги.|
|/e|Шифрует указанные файлы или каталоги. Каталоги, помечаются таким образом, файлы, добавленные после этого будут зашифрованы.|
|/h|Отображает файлы скрытые или системные атрибуты. По умолчанию эти файлы не шифровании или расшифровке.|
|/k|Создает новый сертификат и ключ для использования с шифрованной файловой системы (EFS). Если **/k** параметр указан, все остальные параметры игнорируются.|
|/ r:\<имя файла > [/ Smartcard]|Формирует ключ агента восстановления файловой системы EFS и сертификат, а затем записывает их в PFX-файл (сертификат и закрытый ключ) и CER-файл (содержащий только сертификат). Если **/Smartcard** указан, он записывает ключ восстановления и сертификат смарт-карты и файл PFX-файл не создается.|
|/ s:\<directory >|Выполняет указанную операцию для всех подкаталогов в указанном *Directory*.|
|/u [/ n]|Находит все зашифрованные файлы на локальные диски. При использовании **/n** параметр, не производятся. При использовании без **/n**, **/u** сравнивает ключ шифрования файла пользователя или ключ агента восстановления текущими и обновляет их, если они были изменены. Этот параметр работает только с **/n**.|
|/w:\<directory >|Удаляет данные из доступных неиспользуемое дисковое пространство на диске. Если вы используете **/w** параметр, все остальные параметры игнорируются. Каталог, указанный могут располагаться в любом месте на локальном томе. Если это монтирования точки или точек в каталог на другом томе данных, находящихся в удаления тома.|
|/x[:efsfile] [\<FileName>]|Создает резервную копию сертификата файловой системы EFS и ключей для указанного имени файла. При использовании **: efsfile**, **/x** создает резервные копии сертификатов из пользователя, которые использовались для шифрования файла. В противном случае текущий сертификат EFS и ключей пользователя архивируются.|
|/y|Отображает ваш текущий эскиз сертификата файловой системы EFS на локальном компьютере.|
|/AddUser [/ certhash:\<хэш > | /certfile:<FileName>]|Добавляет пользователя в указанных зашифрованных файлов. При использовании **/certhash**, **шифра** выполняет поиск сертификата с помощью указанного хэш-значение SHA1. При использовании **/certfile**, **шифра** извлекает сертификат из указанное имя файла.|
|/rekey|Обновляет указанный зашифрованные файлы использовать текущий установленный ключ файловой системы EFS.|
|/removeuser /certhash:\<хэш >|Удаляет пользователя из указанных файлов. *Хэш* для **/certhash** должно быть хэш SHA1 сертификата для удаления.|
|/?|Отображение справки в командной строке.|

## <a name="remarks"></a>Примечания

-   Если родительский каталог не зашифрован, зашифрованный файл может стать расшифровать при его изменении. Таким образом при шифровании файла также шифруйте родительского каталога.
-   Администратор можно добавить содержимое в CER-файл политики восстановления файловой системы EFS, чтобы создать агент восстановления для пользователей, а затем импортировать pfx-файл, чтобы восстановить отдельные файлы.
-   Можно использовать несколько имен каталогов, а подстановочные знаки.
-   Необходимо поместить пробелы между несколькими параметрами.

## <a name="BKMK_examples"></a>Примеры

Чтобы отобразить состояние шифрования для всех файлов и подкаталогов в текущем каталоге, введите следующую команду:
```
cipher
```
Зашифрованные файлы и каталоги будут отмечены **E**. Незашифрованные файлы и каталоги будут отмечены **U**. К примеру следующий результат указывает, что текущий каталог и все его содержимое зашифрованы в настоящее время:
```
Listing C:\Users\MainUser\Documents\
New files added to this directory will not be encrypted.
U Private
U hello.doc
U hello.txt
```
Чтобы включить шифрование на закрытый каталог, используемый в предыдущем примере, введите:
```
cipher /e private
```
Отображает следующие выходные данные:
```
Encrypting files in C:\Users\MainUser\Documents\
Private             [OK]
1 file(s) [or directorie(s)] within 1 directorie(s) were encrypted.
```
**Шифра** команда отображает следующие выходные данные:
```
Listing C:\Users\MainUser\Documents\
New files added to this directory will not be encrypted.
E Private
U hello.doc
U hello.txt
```
Обратите внимание, что каталог Private помечен как зашифрованные.

#### <a name="additional-references"></a>Дополнительные ссылки

[Ключ синтаксиса командной строки](command-line-syntax-key.md)