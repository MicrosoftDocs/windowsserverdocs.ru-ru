---
title: cipher
description: Раздел команд Windows для шифрования, который отображает или изменяет шифрование каталогов и файлов на томах NTFS.
ms.prod: windows-server
ms.technology: manage-windows-commands
ms.topic: article
ms.assetid: 78ef795e-0f87-4acd-8d15-192c972c0f41
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 10/16/2017
ms.openlocfilehash: 40e969735e6280fb10084440f34cae7753962f66
ms.sourcegitcommit: b00d7c8968c4adc8f699dbee694afe6ed36bc9de
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/08/2020
ms.locfileid: "80847767"
---
# <a name="cipher"></a>cipher

Отображает или изменяет шифрование каталогов и файлов на томах NTFS. Если используется без параметров, **шифр** отображает состояние шифрования текущего каталога и всех содержащихся в нем файлов.

В разделе [Примеры](#BKMK_examples) показан принцип использования этой команды.

## <a name="syntax"></a>Синтаксис

```
cipher [/e | /d | /c] [/s:<Directory>] [/b] [/h] [PathName [...]]
cipher /k
cipher /r:<FileName> [/smartcard]
cipher /u [/n]
cipher /w:<Directory>
cipher /x[:efsfile] [FileName]
cipher /y
cipher /adduser [/certhash:<Hash> | /certfile:<FileName>] [/s:Directory] [/b] [/h] [PathName [...]]
cipher /removeuser /certhash:<Hash> [/s:<Directory>] [/b] [/h] [<PathName> [...]]
cipher /rekey [PathName [...]]
```

### <a name="parameters"></a>Параметры

|          Параметры           |                                                                                                                                                   Описание                                                                                                                                                    |
|-------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|              /b               |                                                                                                    Прерывает работу в случае возникновения ошибки. По умолчанию **шифр** продолжит выполняться, даже если обнаружены ошибки.                                                                                                    |
|              /c               |                                                                                                                                   Отображает сведения о зашифрованном файле.                                                                                                                                    |
|              /d               |                                                                                                                                   Расшифровывает указанные файлы или каталоги.                                                                                                                                   |
|              /e               |                                                                                          Шифрует указанные файлы или каталоги. Каталоги помечены таким образом, чтобы файлы, добавляемые позже, были зашифрованы.                                                                                           |
|              /h               |                                                                                                     Отображает файлы со скрытыми или системными атрибутами. По умолчанию эти файлы не шифруются и не расшифровываются.                                                                                                     |
|              /k               |                                                                            Создает новый сертификат и ключ для использования с файлами шифрованная файловая система (EFS) (EFS). Если указан параметр **/k** , все остальные параметры игнорируются.                                                                            |
|  /r:\<имя_файла > [/Смарткард]  |   Создает ключ и сертификат агента восстановления EFS, а затем записывает их в PFX-файл (содержащий сертификат и закрытый ключ) и CER-файл (содержащий только сертификат). Если указан параметр **/Смарткард** , он записывает ключ восстановления и сертификат на смарт-карту и не создает PFX-файл.   |
|        /s:\<Directory >        |                                                                                                               Выполняет указанную операцию для всех подкаталогов в указанном *каталоге*.                                                                                                               |
|            /u [/n]            |  Поиск всех зашифрованных файлов на локальных дисках. Если используется с параметром **/n** , обновления не выполняются. Если используется без **параметра/n**, **/u** сравнивает ключ шифрования файла пользователя или ключ агента восстановления с текущим, а затем обновляет их, если они были изменены. Этот параметр работает только с **/n**.  |
|        /w:\<Directory >        | Удаляет данные из доступного неиспользуемого дискового пространства на всем томе. При использовании параметра **/w** все остальные параметры игнорируются. Указанный каталог может находиться в любом месте на локальном томе. Если это точка подключения или указывает на каталог в другом томе, данные на этом томе удаляются. |
|  /x [: ефсфиле] [\<имя файла >]   |                                 Создает резервную копию сертификата EFS и ключей по указанному имени файла. Если используется с **: ефсфиле**, **/x** создает резервную копию сертификатов пользователя, которые использовались для шифрования файла. В противном случае выполняется резервное копирование текущего сертификата и ключей EFS пользователя.                                 |
|              /y               |                                                                                                                      Отображает текущий эскиз сертификата EFS на локальном компьютере.                                                                                                                      |
|  /аддусер [/церсаш:\<> хэша  |                                                                                                                                              /цертфиле:<FileName>]                                                                                                                                               |
|            /рекэй             |                                                                                                                 Обновляет указанные зашифрованные файлы для использования текущего настроенного ключа EFS.                                                                                                                 |
| /ремовеусер/церсаш:\<> хэша |                                                                                       Удаляет пользователя из указанных файлов. *Хэш* , предоставленный для **/церсаш** , должен быть хэшем SHA1 удаляемого сертификата.                                                                                       |
|              /?               |                                                                                                                                       Отображает справку в командной строке.                                                                                                                                       |

## <a name="remarks"></a>Примечания

-   Если родительский каталог не зашифрован, зашифрованный файл может быть расшифрован при его изменении. Поэтому при шифровании файла также следует зашифровать родительский каталог.
-   Администратор может добавить содержимое CER-файла в политику восстановления EFS, чтобы создать агент восстановления для пользователей, а затем импортировать PFX-файл для восстановления отдельных файлов.
-   Можно использовать несколько имен каталогов и подстановочных знаков.
-   Необходимо добавить пробелы между несколькими параметрами.

## <a name="examples"></a><a name=BKMK_examples></a>Примеров

Чтобы отобразить состояние шифрования каждого из файлов и подкаталогов в текущем каталоге, введите:
```
cipher
```
Зашифрованные файлы и каталоги помечаются значком **E**. Незашифрованные файлы и каталоги помечаются с помощью **U**. Например, следующие выходные данные показывают, что текущий каталог и все его содержимое в настоящее время не зашифрованы:
```
Listing C:\Users\MainUser\Documents\
New files added to this directory will not be encrypted.
U Private
U hello.doc
U hello.txt
```
Чтобы включить шифрование в частном каталоге, используемом в предыдущем примере, введите:
```
cipher /e private
```
Ниже приведены выходные данные.
```
Encrypting files in C:\Users\MainUser\Documents\
Private             [OK]
1 file(s) [or directorie(s)] within 1 directorie(s) were encrypted.
```
Команда **шифр** отображает следующие выходные данные:
```
Listing C:\Users\MainUser\Documents\
New files added to this directory will not be encrypted.
E Private
U hello.doc
U hello.txt
```
Обратите внимание, что закрытый каталог помечен как зашифрованный.

#### <a name="additional-references"></a>Дополнительные материалы

- [Условные обозначения синтаксиса команд командной строки](command-line-syntax-key.md)