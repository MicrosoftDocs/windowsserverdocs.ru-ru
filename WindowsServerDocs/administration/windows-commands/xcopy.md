---
title: xcopy
description: 'Раздел Windows команды для ***- '
ms.custom: na
ms.prod: windows-server-threshold
ms.reviewer: na
ms.suite: na
ms.technology: manage-windows-commands
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: 76a310d7-9925-4571-a252-0e28960d5f89
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 01/05/2019
ms.openlocfilehash: 54697b1c967d3e21583977418383d5a372e6f5d4
ms.sourcegitcommit: 0d0b32c8986ba7db9536e0b8648d4ddf9b03e452
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/17/2019
ms.locfileid: "59859405"
---
# <a name="xcopy"></a>xcopy



Копирование файлов и каталогов, включая подкаталоги

Примеры для использования этой команды, см. в разделе [примеры](xcopy.md#BKMK_examples)

## <a name="syntax"></a>Синтаксис

```
Xcopy <Source> [<Destination>] [/w] [/p] [/c] [/v] [/q] [/f] [/l] [/g] [/d [:MM-DD-YYYY]] [/u] [/i] [/s [/e]] [/t] [/k] [/r] [/h] [{/a | /m}] [/n] [/o] [/x] [/exclude:FileName1[+[FileName2]][+[FileName3]] [{/y | /-y}] [/z] [/b] [/j]
```

## <a name="parameters"></a>Параметры

|Параметр|Описание|
|---------|-----------|
|\<Источник >|Обязательный. Указывает расположение и имена файлов, которые требуется скопировать. Этот параметр должен содержать диск или путь.|
|[\<Назначения >]|Указывает цель-файлы, которые требуется скопировать. Этот параметр может включать букву диска и двоеточие, имя каталога, имя файла или их сочетание.|
|/w|Отображается следующее сообщение и ожидает ответа, прежде чем начать копирование файлов:</br>**Нажмите любую клавишу, чтобы начать копирование файлов**|
|/p|Появится запрос на подтверждение для каждого файла назначения.|
|/c|Игнорирует ошибки.|
|/v|Проверяет каждый файл, как написано в конечный файл, чтобы убедиться в том, что конечные файлы идентичны к исходным файлам.|
|/q|Отключает отображение **xcopy** сообщений.|
|/f|Отображает имена исходного и целевого файла при копировании.|
|/l|Отображает список файлов, которые должны быть скопированы.|
|/g|Создается, расшифрованные *назначения* файлы при назначения не поддерживает шифрование.|
|/d [: мм дд гггг]|Копирует исходные файлы, измененные не после указанной даты только. Если не включать *мм-дд-гггг* значение, **xcopy** копирует все *источника* файлы, которые являются более новыми, чем существующие *назначения* файлов. Этот параметр позволяет обновить файлы, которые были изменены.|
|/u|Копирует файлы из *источника* , существующих в *назначения* только.|
|/i|Если *источника* является каталогом или содержит подстановочный знак и *назначения* не существует, **xcopy** предполагается *назначения* указывает Имя каталога и создает новый каталог. Затем **xcopy** все указанные файлы копируются в новый каталог. По умолчанию **xcopy** предлагается указать ли *назначения* — файл или каталог.|
|/s|Копирует каталогов и подкаталогов, если они пусты. Если опустить **/s**, **xcopy** работает с одним каталогом.|
|/e|Копирует все подкаталоги, даже если они пусты. Используйте **/e** с **/s** и **/t** параметры командной строки.|
|/t|Копирует структуру каталогов (дерево), не файлов. Чтобы скопировать пустых каталогов, необходимо включить **/e** параметр командной строки.|
|/k|Копирует файлы и сохраняет атрибут только для чтения на *назначения* файлы, если они присутствуют в *источника* файлов. По умолчанию **xcopy** удаляет атрибут только для чтения.|
|/r|Копирование только для чтения файлов.|
|/h|Копирует файлы со скрытыми и атрибуты файлов системы. По умолчанию **xcopy** не копирует скрытых и системных файлов|
|/a|Копирует только *источника* файлы, имеющие их архивировать набор атрибутов файлов. **/a** не изменяет атрибутов исходного файла. Сведения о настройке атрибутов с помощью **attrib**, см. в разделе [Дополнительные ссылки](xcopy.md#BKMK_addref).|
|/m|Копирует *источника* файлы, имеющие их архивировать набор атрибутов файлов. В отличие от **/a**, **/m** приводит к отключению атрибуты файла архива в файлах, указанных в источнике. Сведения о настройке атрибутов с помощью **attrib**, см. в разделе [Дополнительные ссылки](xcopy.md#BKMK_addref).|
|/n|Создает копии с помощью NTFS короткие или имен каталогов. **/n** является обязательным, если скопировать файлы или каталоги из тома NTFS в томе FAT или при FAT файла соглашение об именовании системы (то есть 8.3 символов) необходим для *назначения* файловой системы. *Назначения* может быть файловой системы FAT или NTFS.|
|/o|Копирует файл владения и сведения о списке (DACL) управления доступом на уровне пользователей.|
|/x|Копирует файл параметров аудита и сведения о списке (SACL) для управления доступом системы (подразумевает **/o**).|
|/Exclude:FileName1 [+ [Имя_файла2] [+ [Имя_файла3] ( \)]|Указывает список файлов. Необходимо указать по крайней мере один файл. Каждый файл будет содержать строки поиска с каждой строкой в отдельной строке в файле.</br>Если любой из строк совпадает с любой частью абсолютный путь к файлу для копирования, этот файл будет excuded от копирования. Например, если указать строку **obj** исключит все файлы в каталоге **obj** или все файлы с **.obj** расширения.|
|/y|Запрет на выдачу запроса, чтобы убедиться, что вы хотите перезаписать существующий целевой файл.|
|/-y|Вам будет предложено подтвердить, что вы хотите перезаписать существующий целевой файл.|
|/ z|Копирует по сети в режиме перезапуска.|
|/b|Копирует символьную ссылку, а не файлы. Этот параметр впервые появился в Windows Vista®.|
|/j|Копирование файлов без буферизации. Рекомендуется для очень больших файлов. Этот параметр был добавлен в Windows Server 2008 R2.|
|/?|Отображение справки в командной строке.|

## <a name="remarks"></a>Примечания

-   С помощью   **/z**

    При потере подключения во время фазы копирования (например, если сервер переходит в автономный режим обрывает соединение), он возобновляет работу после восстановления подключения. **/ z** также отображает процент завершения для каждого файла операции копирования.
-   С помощью **/y** в перекрываться.

    Можно использовать **/y** в перекрываться. Эта команда можно переопределить с помощью **/-y** в командной строке. По умолчанию будет предложено перезаписать.
-   При копировании файлов

    Копирование зашифрованных файлов с томом, который не поддерживает шифрованную ошибкой. Сначала расшифровать файлы или копировать файлы на том, поддерживает ли система EFS.
-   Добавление файлов

    Чтобы объединить файлы, укажите один файл для назначения, но несколько исходных файлов (то есть с помощью подстановочных знаков или "файл1" + "файл2" + "файл3").
-   Значение по умолчанию для *назначения*

    Если опустить *назначения*, **xcopy** команда копирует файлы в текущем каталоге.
-   Указание ли *назначения* — это файл или каталог

    Если *назначения* не содержит существующий каталог и не заканчивается обратной косой черты (\), появится следующее сообщение:  
    ```
    Does <Destination> specify a file name or directory name on the target(F = file, D = directory)?
    ```  
    Если требуется файл или файлы для копирования в файл, нажмите клавишу "F". Нажмите клавишу D, если файл или файлы копируются в каталог.

    Это сообщение можно отключить с помощью **/i** параметр командной строки, что приводит к **xcopy** предположить, что назначение является каталог, если источником является более одного файла или каталога.
-   С помощью **xcopy** команду, чтобы установить атрибут для *назначения* файлов

    **Xcopy** команда создает файлы с набором атрибутов архива, независимо от того, имеется ли этот атрибут имел значение в исходном файле. Дополнительные сведения об атрибутах файла и **attrib**, см. в разделе [Дополнительные ссылки](xcopy.md#BKMK_addref).
-   Сравнение **xcopy** и **diskcopy**

    Если у вас есть диск, содержащий файлы в подкаталоги, и вы хотите скопировать его на диск, имеющего другой формат, используйте **xcopy** вместо команды **diskcopy**. Так как **diskcopy** команда копирует диски по дорожкам, ваш исходный и конечный диски должны иметь тот же формат. **Xcopy** команда не имеет этого требования. Используйте **xcopy** Если вам не требуются копии образ всего диска.
-   Коды выхода для **xcopy**

    Для обработки кодов выхода, возвращаемый **xcopy**, использовать **ErrorLevel** параметр на **Если** командной строки в пакетном файле. Пример пакетного файла, обрабатывающей завершения кодов с помощью **Если**, см. в разделе [Дополнительные ссылки](xcopy.md#BKMK_addref). Ниже перечислены коды завершения и описание.  
    |Код завершения|Описание|
    |---------|-----------|
    |0|Файлы были скопированы без ошибок.|
    |1|Не найдены файлы для копирования.|
    |2|Пользователь нажал CTRL + C для прерывания **xcopy**.|
    |4|Произошла ошибка при инициализации. Не хватает памяти или места на диске, или вы ввели неверное имя диска или недопустимый синтаксис в командной строке.|
    |5|Произошла ошибка записи на диск.|

## <a name="BKMK_examples"></a>Примеры

**1.** Для копирования всех файлов и подкаталогов (включая пустые подкаталоги) с диска A на диск B, введите следующую команду:
```
xcopy a: b: /s /e 
```
**2.** Чтобы включить любой системе или скрытые файлы в предыдущем примере, добавьте **/h** параметр командной строки следующим образом:
```
xcopy a: b: /s /e /h
```
**3.** Чтобы обновить файлы в каталоге \Reports файлы \Rawdata каталога, которые изменились по сравнению с 29 декабря 1993 г., введите:
```
xcopy \rawdata \reports /d:12-29-1993
```
**4.** Чтобы обновить все файлы, которые существуют в \Reports в предыдущем примере, независимо от даты, введите:
```
xcopy \rawdata \reports /u
```
**5.** Для получения списка файлов для копирования предыдущей командой (то есть без явного копирования файлов), тип:
```
xcopy \rawdata \reports /d:12-29-1993 /l > xcopy.out
```
Файл xcopy.out перечисляет каждый файл, который требуется скопировать.

**6.** Копировать в каталог \Customer каталоге и всех подкаталогах \\ \\Public\Address сети диска H: сохраняют атрибут только для чтения и появится запрос, когда новый файл создается следующая команда:
```
xcopy \customer h:\public\address /s /e /k /p
```
**7.** Чтобы выполнить предыдущую команду, убедитесь, что **xcopy** создает каталог \Address, если он не существует и отключить сообщение, которое отображается при создании нового каталога, добавьте **/i** командной строки параметр следующим образом:
```
xcopy \customer h:\public\address /s /e /k /p /i
```
**8.** Можно создать пакетный файл для выполнения **xcopy** операций и использование пакета **Если** команду, чтобы обработать код выхода, если произошла ошибка. Например, следующая пакетная программа использует подстановочных параметров для **xcopy** параметры источника и назначения:
```
@echo off
rem COPYIT.BAT transfers all files in all subdirectories of
rem the source drive or directory (%1) to the destination
rem drive or directory (%2)
xcopy %1 %2 /s /e
if errorlevel 4 goto lowmemory
if errorlevel 2 goto abort
if errorlevel 0 goto exit
:lowmemory
echo Insufficient memory to copy files or
echo invalid drive or command-line syntax.
goto exit
:abort
echo You pressed CTRL+C to end the copy operation.
goto exit
:exit 
```
Чтобы использовать предыдущий пакетная программа для копирования всех файлов в каталоге C:\Prgmcode и его подкаталогов на диск B, введите следующую команду:
```
copyit c:\prgmcode b:
```
Замещает интерпретатор команд **C:\Prgmcode** для *%1* и **B:** для *%2*, затем использует **xcopy**с **/e** и **/s** параметры командной строки. Если **xcopy** возникает ошибка, пакетная программа считывает код завершения и переходит на соответствующую метку в соответствующий **IF ERRORLEVEL** инструкции, затем отображается соответствующее сообщение и выполняет выход из пакетная программа.

**9.** В этом примере все непустой каталоги, а также файлы, имя которого соответствует шаблону, заданному с символом звездочки.
```
xcopy .\toc*.yml ..\..\Copy-To\ /S /Y

rem Output example.
rem  .\d1\toc.yml
rem  .\d1\d12\toc.yml
rem  .\d2\toc.yml
rem  3 File(s) copied
```
В предыдущем примере, значение этого параметра определенного источника **.\\ Оглавление\*.yml** Скопируйте три файла даже при его два пути символов **.\\**  были удалены. Тем не менее, файлы не будут копироваться, если шаблон «звездочка» был удален из источника параметра, делая просто **.\\ TOC.yml**.

#### <a name="BKMK_addref"></a>Дополнительные ссылки

-   [Копирование](copy.md)
-   [Переместить](move.md)
-   [dir](dir.md)
-   [Attrib](attrib.md)
-   [diskcopy](diskcopy.md)
-   [If](if.md)
-   [Ключ синтаксиса командной строки](command-line-syntax-key.md)
