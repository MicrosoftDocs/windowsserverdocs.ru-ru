---
title: servermanagercmd
description: Справочная статья по команде ServerManagerCmd, которая устанавливает и удаляет роли, службы ролей и компоненты.
ms.topic: reference
ms.assetid: 507c4b87-8e13-4872-8b34-0c7508eecbc1
ms.author: jgerend
author: JasonGerend
manager: mtillman
ms.date: 07/11/2018
ms.openlocfilehash: 21bdb054de4d3f64843f6cf4761d6ab1c60ee461
ms.sourcegitcommit: db4c35ebe56d561768d2a657da9e6d6a791457bd
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/04/2021
ms.locfileid: "101805977"
---
# <a name="servermanagercmd"></a>servermanagercmd

> Область применения: Windows Server (половина ежегодного канала), Windows Server 2019, Windows Server 2016, Windows Server 2012 R2, Windows Server 2012

Устанавливает и удаляет роли, службы ролей и компоненты. Также отображается список всех доступных ролей, служб ролей и компонентов и показывает, какие компоненты установлены на этом компьютере.

> [!IMPORTANT]
> Эта команда ServerManagerCmd является устаревшей и не гарантируется, что она будет поддерживаться в будущих выпусках Windows. Вместо этого рекомендуется использовать командлеты Windows PowerShell, доступные для диспетчер сервера. Подробнее см. в разделе [Установка и удаление ролей, служб ролей и компонентов](/administration/server-manager/install-or-uninstall-roles-role-services-or-features).

## <a name="syntax"></a>Синтаксис

```
servermanagercmd -query [[[<drive>:]<path>]<query.xml>] [-logpath [[<drive>:]<path>]<log.txt>]
servermanagercmd -inputpath  [[[<drive>:]<path>]<answer.xml>] [-resultpath <result.xml> [-restart] | -whatif] [-logpath [[<drive>:]<path>]<log.txt>]
servermanagercmd -install <id> [-allSubFeatures] [-resultpath [[<drive>:]<path>]<result.xml> [-restart] | -whatif] [-logpath [[<Drive>:]<path>]<log.txt>]
servermanagercmd -remove <id> [-resultpath <result.xml> [-restart] | -whatif] [-logpath  [[<drive>:]<path>]<log.txt>]
servermanagercmd [-help | -?]
servermanagercmd -version
```

### <a name="parameters"></a>Параметры

| Параметр | Описание |
|--|--|
| запрос `[[[<drive>:]<path>]<query.xml>]` | Отображает список всех ролей, служб ролей и компонентов, установленных и доступных для установки на сервере. Можно также использовать краткую форму этого параметра **-q**. Если необходимо сохранить результаты запроса в XML-файл, укажите XML-файл для замены `<query.xml>` . |
| -inputPath  `[[[<drive>:]<path>]<answer.xml>]` | Устанавливает или удаляет роли, службы ролей и компоненты, указанные в файле ответов XML, представленном `<answer.xml>` . Можно также использовать краткую форму этого параметра **-p.** |
| -Install `<id>` | Устанавливает роль, службу роли или компонент, заданные в `<id>` . В идентификаторах регистр не учитывается. Несколько ролей, служб ролей и компонентов должны быть разделены пробелами. С параметром **-Install** используются следующие необязательные параметры:<ul><li>**— параметр** `<SettingName>=<SettingValue>` — Указывает обязательные параметры для установки.</li><li>**-аллсубфеатурес** — указывает установку всех подчиненных служб и компонентов вместе с родительской ролью, службой роли или компонентом, указанным в `<id>` значении.<p>**ПРИМЕЧАНИЕ.**<br>Некоторые контейнеры ролей не имеют идентификатора командной строки, разрешающего установку всех служб ролей. Это происходит, если службы ролей не могут быть установлены в одном экземпляре команды диспетчер сервера. Например, служба роли служба федерации служб федерации Active Directory и служба роли прокси-агент службы федерации не могут быть установлены с помощью одного экземпляра команды диспетчер сервера.</li><li>**-ресултпас** `<result.xml>` — Сохраняет результаты установки в XML-файл, представленный `<result.xml>` . Можно также использовать краткую форму этого параметра **-r**.<p>**ПРИМЕЧАНИЕ.**<br>Программу ServerManagerCmd нельзя запустить с параметром **-ресултпас** и указанным параметром **-WhatIf** .</li><li>**-restart** — перезагружает компьютер автоматически после завершения установки (если требуется перезагрузка для установленных ролей или компонентов).</li><li>**-WhatIf** — отображает все операции, указанные для параметра **-Install** . Можно также использовать краткую форму параметра **-WhatIf** , **-w**. Программу **ServerManagerCmd** нельзя запустить с параметром **-ресултпас** и указанным параметром **-WhatIf** .</li><li>**-logPath** `<[[<drive>:]<path>]<log.txt>>` — Указывает имя и расположение файла журнала, кроме значения по умолчанию, `%windir%\temp\servermanager.log` .</li></ul> |
| -удалить `<id>` | Удаляет роль, службу роли или компонент, указанные в `<id>` . В идентификаторах регистр не учитывается. Несколько ролей, служб ролей и компонентов должны быть разделены пробелами. С параметром **-Remove** используются следующие необязательные параметры:<ul><li>**-ресултпас** `<[[<drive>:]<path>]result.xml>` — Сохраняет результаты удаления в XML-файл, представленный `<result.xml>` . Можно также использовать краткую форму этого параметра **-r**.<p>**ПРИМЕЧАНИЕ.**<br>Невозможно запустить программу ServerManagerCmd с указанными параметрами **-ресултпас** и **-WhatIf** .</li><li>**-restart** — перезагружает компьютер автоматически после завершения удаления (если перезапуск требуется для остальных ролей или компонентов).</li><li>**-WhatIf** — отображает все операции, указанные для параметра-Remove. Можно также использовать краткую форму параметра-WhatIf, **-w**. Невозможно запустить программу ServerManagerCmd с указанными параметрами **-ресултпас** и **-WhatIf** .</li><li>**-logPath** `<[[<Drive>:]<path>]<log.txt>>` — Указывает имя и расположение файла журнала, кроме значения по умолчанию, `%windir%\temp\servermanager.log` .</li></ul> |
| -version | Отображает номер версии диспетчер сервера. Можно также использовать краткую форму **-v**. |
| -help | Отображает справку в окне командной строки. Можно также использовать краткую форму **-?**. |

## <a name="examples"></a>Примеры

Чтобы отобразить список всех доступных ролей, служб ролей и компонентов, а также какие роли, службы ролей и компоненты установлены на компьютере, введите:

```
servermanagercmd -query
```

Чтобы установить роль веб-сервера (IIS) и сохранить результаты установки в XML-файл, представленный *installResult.xml*, введите:

```
servermanagercmd -install Web-Server -resultpath installResult.xml
```

Чтобы отобразить подробные сведения о ролях, службах ролей и компонентах, которые будут установлены или удалены, на основе инструкций, указанных в файле ответов XML, представленном *install.xml*, введите:

```
servermanagercmd -inputpath install.xml -whatif
```

## <a name="additional-references"></a>Дополнительные ссылки

- [Условные обозначения синтаксиса команд командной строки](command-line-syntax-key.md)

- [Обзор диспетчер сервера](/administration/server-manager/server-manager)
