---
title: команда Schtasks CREATE
description: Справочная статья по команде Schtasks Create, которая
ms.topic: reference
ms.author: lizross
author: eross-msft
manager: mtillman
ms.date: 09/16/2020
ms.openlocfilehash: 4a7c3eb621f4c3d640fcb1f057b9d3cd00834e31
ms.sourcegitcommit: e164aeffc01069b8f1f3248bf106fcdb7f64f894
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/26/2020
ms.locfileid: "91390820"
---
# <a name="schtasks-create"></a>команда Schtasks CREATE

Планирует задачу.

## <a name="syntax"></a>Синтаксис

```
schtasks /create /sc <scheduletype> /tn <taskname> /tr <taskrun> [/s <computer> [/u [<domain>\]<user> [/p <password>]]] [/ru {[<domain>\]<user> | system}] [/rp <password>] [/mo <modifier>] [/d <day>[,<day>...] | *] [/m <month>[,<month>...]] [/i <idletime>] [/st <starttime>] [/ri <interval>] [{/et <endtime> | /du <duration>} [/k]] [/sd <startdate>] [/ed <enddate>] [/it] [/z] [/f]
```

### <a name="parameters"></a>Параметры

| Параметр | Описание |
|--|--|
| Once `<scheduletype>` | Указывает тип расписания. Допустимые значения:<ul><li>**Minute** — указывает количество минут до выполнения задачи.</li><li>**Ежечасно** — указывает количество часов до выполнения задачи.</li><li>**Ежедневно** — указывает число дней до выполнения задачи.</li><li>**Еженедельно** Указывает число недель до выполнения задачи.</li><li>**Ежемесячно** — указывает число месяцев до выполнения задачи.</li><li>**Один раз** указывает, что задача выполняется один раз в указанные дату и время.</li><li>**OnStart** — указывает, что задача выполняется при каждом запуске системы. Можно указать дату начала или выполнить задачу при следующем запуске системы.</li><li>**OnLogon** — указывает, что задача выполняется при каждом входе пользователя (любого пользователя). Можно указать дату или выполнить задачу при следующем входе пользователя в систему.</li><li>**OnIdle** — указывает, что задача выполняется каждый раз, когда система бездействует в течение указанного периода времени. Можно указать дату или выполнить задачу в следующий раз, когда система бездействует.</li></ul> |
| /TN `<taskname>` | Задает имя для задачи. Каждая задача в системе должна иметь уникальное имя и должна соответствовать правилам для имен файлов, но не превышать 238 символов. Заключите имена, содержащие пробелы, с помощью кавычек. |
| /TR `<Taskrun>` | Указывает программу или команду, выполняемую задачей. Введите полный путь и имя файла исполняемого файла, файла скрипта или пакетного файла. Длина имени пути не должна превышать 262 символов. Если путь не добавлен, **команда Schtasks** предполагает, что файл находится в `<systemroot>\System32` каталоге. |
| ключ `<computer>` | Указывает имя или IP-адрес удаленного компьютера (с обратными косыми чертами или без них). По умолчанию это локальный компьютер. |
| /u `[<domain>]` | Выполняет эту команду с разрешениями указанной учетной записи пользователя. По умолчанию заданы разрешения текущего пользователя локального компьютера. Параметры **/u** и **/p** допустимы только при использовании параметра **/s**. Разрешения указанной учетной записи используются для планирования задачи и выполнения задачи. Чтобы выполнить задачу с разрешениями другого пользователя, используйте параметр **/ru** . Учетная запись пользователя должна быть членом группы администраторов на удаленном компьютере. Кроме того, локальный компьютер должен находиться в том же домене, что и удаленный компьютер, или в домене, который является доверенным для домена удаленного компьютера. |
| /p `<password>` | Указывает пароль учетной записи пользователя, указанной в параметре **/u** . Если параметр **/u** используется без параметра **/p** или аргумента Password, команда Schtasks предложит ввести пароль. Параметры **/u** и **/p** допустимы только при использовании параметра **/s**. |
| выполнил `{[<domain>\]<user> | system}` | Выполняет задачу с разрешениями указанной учетной записи пользователя. По умолчанию задача выполняется с разрешениями текущего пользователя локального компьютера или с разрешением пользователя, указанного параметром **/u** , если он включен. Параметр **/ru** допустим при планировании задач на локальных или удаленных компьютерах. К допустимым параметрам относятся:<ul><li>**Домен** — указывает альтернативную учетную запись пользователя.</li><li>**Система** — указывает учетную запись локальной системы — учетную запись с высоким уровнем привилегий, используемую операционной системой и системными службами.</li></ul> |
| /RP `<password>` | Указывает пароль для существующей учетной записи пользователя или учетную запись пользователя, указанную параметром **/ru** . Если вы не используете этот параметр при указании учетной записи пользователя, SchTasks.exe предложит ввести пароль при следующем входе в систему. Не используйте параметр **/RP** для задач, выполняемых с учетными данными системной учетной записи (**система/ru**). Учетная запись System не имеет пароля, и SchTasks.exe не запрашивает его. |
| месяц `<modifiers>` | Указывает, как часто задача выполняется в рамках своего типа расписания. К допустимым параметрам относятся:<ul><li>**Минута** — указывает, что задача выполняется раз в минуту <n> . Можно использовать любое значение в диапазоне от 1-1439 минут. По умолчанию это 1 минута.</li><li>Каждый **час** — указывает, что задача выполняется каждый <n> час. Можно использовать любое значение от 1-23 часов. По умолчанию это 1 час.</li><li>**Ежедневно** — указывает, что задача выполняется каждый <n> день. Можно использовать любое значение от 1-365 дней. По умолчанию это 1 день.</li><li>**Еженедельно** — указывает, что задача выполняется каждую <n> неделю. Можно использовать любое значение в диапазоне от 1-52 недель. По умолчанию это 1 неделя.</li><li>**Ежемесячно** — указывает, что задача выполняется каждый <n> месяц. Можно использовать любое из следующих значений:<ul><li>Число от 1-12 месяцев</li><li>**Ластдай** — запуск задачи в последний день месяца.</li><li>**Первый, второй, третий или четвертый вместе с `/d <day>` параметром** — указывает конкретную неделю и день для выполнения задачи. Например, в третью среду месяца.</li></ul></li><li>**Один раз** указывает, что задача выполняется один раз.</li><li>**OnStart** — указывает, что задача выполняется при запуске.</li><li>**OnLogon** — указывает, что задача выполняется, когда пользователь, заданный параметром **/u** , входит в систему.</li><li>**OnIdle** — указывает, что задача выполняется после бездействия системы в течение числа минут, указанных параметром **/i** .</li></ul> |
| /d день [, день...] | Указывает, как часто задача выполняется в рамках своего типа расписания. К допустимым параметрам относятся:<ul><li>**Еженедельно** — указывает, что задача выполняется еженедельно, предоставляя значение в диапазоне от 1-52 недель. При необходимости можно также добавить конкретный день недели, добавив значение Пн-SUN или диапазон [Пн-SUN...]).</li><li>**Ежемесячно** — указывает, что задача выполняется еженедельно каждый месяц, предоставляя значение First, Second, третье, четвертое и Последнее. При необходимости можно также добавить конкретный день недели, добавив значение Пн – SUN или указав число от 1-12 месяцев. При использовании этого параметра можно также добавить конкретный день месяца, указав число от 1-31.<p>**Примечание.** Значение даты 1-31 допустимо только без параметра **/mo** или если параметр **/mo** имеет значение Monthly (1-12). Значение по умолчанию — день 1 (первый день месяца).</li></ul> |
| /m месяц [, месяц...] | Указывает месяц или месяцы года, в течение которых должно выполняться запланированное задание. Допустимые значения: JAN-дек и `*` (каждый месяц). Параметр **/m** допустим только для ежемесячного расписания. Он необходим при использовании модификатора ЛАСТДАЙ. В противном случае это необязательно, а значение по умолчанию — `*` (каждый месяц). |
| /i <Idletime> | Указывает, сколько минут компьютер находится в режиме простоя перед запуском задачи. Допустимое значение — целое число от 1 до 999. Этот параметр допустим только с расписанием ONIDLE, а затем является обязательным. |
| /ST `<Starttime>` | Указывает время начала задачи с использованием 24-часового формата времени, чч: мм. Значение по умолчанию — текущее время на локальном компьютере. Параметр **/St** действителен с почасовой, ежечасной, ежедневной, еженедельно, ежемесячно и раз в расписаниях. Оно требуется для ОДНОКРАТНОго расписания. |
| /RI `<interval>` | Указывает интервал повторения для запланированной задачи в минутах. Это неприменимо для типов расписания: минуты, ЕЖЕЧАСно, OnStart, OnStart и OnStart. Допустимый диапазон — 1-599940 (599940 минут = 9999 часов). Если указаны параметры **/et** или **/du** , значение по умолчанию — **10 минут**. |
| /ET `<Endtime>` | Указывает время суток, в течение которого расписание почасового или ежечасного задания заканчивается в <формате чч: мм> 24-часового формата. После указанного времени окончания программа SchTasks не запускает задачу повторно, пока не будет повторяться время запуска. По умолчанию расписания задач не имеют времени окончания. Этот параметр является необязательным и действителен только с поминутным или ЕЖЕЧАСным расписанием. |
| #b3 `<duration>` | Задает максимальный интервал времени в минутах или ежечасном расписании в <HHHH: MM> 24-часовом формате. По истечении указанного времени команда Schtasks не запускает задачу повторно, пока не будет повторяться время запуска. По умолчанию расписания задач не имеют максимальной длительности. Этот параметр является необязательным и действителен только с поминутным или ЕЖЕЧАСным расписанием. |
| /k | Останавливает программу, выполняемую задачей в момент, заданный параметром **/et** или **/du**. Без **/k**программа SchTasks не запускает программу снова после того, как она достигнет времени, заданного параметром **/et** или **/du** , и не останавливает программу, если она все еще запущена. Этот параметр является необязательным и действителен только с поминутным или ЕЖЕЧАСным расписанием. |
| /SD <Startdate> | Указывает дату запуска расписания задачи. Значение по умолчанию — текущая дата на локальном компьютере. Формат **StartDate** зависит от языкового стандарта, выбранного для локального компьютера в **параметрах язык и региональные стандарты**. Для каждого языкового стандарта допустимы только один формат. Допустимые форматы даты (обязательно выберите формат, наиболее похожий на формат, выбранный для параметра **Краткая дата** в поле Язык **и региональные стандарты** на локальном компьютере):<ul><li>`<MM>//` — Задает использование форматов с первого месяца, например английского (США) и испанского (Панама).</li><li>`<DD>//` — Задает использование форматов, использующих день, например болгарского и нидерландского (Нидерланды).</li><li>`<YYYY>//` — Указывает на использование в форматах первого года, таких как шведский и французский (Канада).</li></ul> |
| #a1 `<Enddate>` | Указывает дату окончания срока действия расписания. Это необязательный параметр. Оно недопустимо в расписании ОДНОКРАТНОго входа, запуска, OnStart или OnStart. По умолчанию расписания не имеют даты окончания. Значение по умолчанию — текущая дата на локальном компьютере. Формат **EndDate** зависит от языкового стандарта, выбранного для локального компьютера в **параметрах язык и региональные стандарты**. Для каждого языкового стандарта допустимы только один формат. Допустимые форматы даты (обязательно выберите формат, наиболее похожий на формат, выбранный для параметра **Краткая дата** в поле Язык **и региональные стандарты** на локальном компьютере):<ul><li>`<MM>//` — Задает использование форматов с первого месяца, например английского (США) и испанского (Панама).</li><li>`<DD>//` — Задает использование форматов, использующих день, например болгарского и нидерландского (Нидерланды).</li><li>`<YYYY>//` — Указывает на использование в форматах первого года, таких как шведский и французский (Канада).</li></ul> |
| разрешает | Задает запуск запланированной задачи только в том случае, если пользователь с правами пользователя (учетная запись пользователя, под которой выполняется задача) входит в систему на компьютере. Этот параметр не влияет на задачи, выполняемые с системными разрешениями или задачами, для которых уже задан интерактивный набор свойств. Нельзя использовать команду Change для удаления интерактивного свойства из задачи. По умолчанию запуск от имени пользователя является текущим пользователем локального компьютера при планировании задачи или учетной записью, указанной параметром **/u** , если она используется. Однако если команда включает параметр **/ru** , то пользователь, выполняющий команду, является учетной записью, указанной параметром **/ru** . |
| /z | Указывает, что задача должна быть удалена после завершения ее расписания. |
| /f | Указывает, что необходимо создать задачу и отключить предупреждения, если указанная задача уже существует. |
| /? | Отображение справки в командной строке. |

## <a name="to-schedule-a-task-to-run-every-n-minutes"></a>Планирование выполнения задачи каждый `<n>` минута

В расписании минут требуется параметр **/SC Minute** . Параметр **/mo** (модификатор) является необязательным и указывает количество минут между выполнением задачи. Значение по умолчанию для параметра **/mo** равно *1* (каждую минуту). Параметры **/et** (время окончания) и **/du** (продолжительность) являются необязательными и могут использоваться с параметром **/k** (End Task) или без него.

### <a name="examples"></a>Примеры

- Чтобы запланировать запуск сценария безопасности *sec. vbs*каждые 20 минут, введите:

    ```
    schtasks /create /sc minute /mo 20 /tn Security Script /tr \\central\data\scripts\sec.vbs
    ```

    Так как этот пример не включает дату и время запуска, задача запускается через 20 минут после завершения команды и запускается каждые 20 минут при каждом запуске системы. Обратите внимание, что исходный файл сценария безопасности находится на удаленном компьютере, но задача запланирована и выполняется на локальном компьютере.

- Чтобы запланировать сценарий безопасности *sec. vbs*для запуска на локальном компьютере каждые 100 минут между 5:00 P.M. и 7:59 утра Каждый день введите:

    ```
    schtasks /create /tn Security Script /tr sec.vbs /sc minute /mo 100 /st 17:00 /et 08:00 /k
    ```

    В этом примере параметр **/SC** используется для задания расписания минут, а параметр **/mo** — для указания интервала в 100 минут. Параметры **/St** и **/et** используются для указания времени начала и окончания расписания каждого дня. Он также использует параметр **/k** для завершения сценария, если он еще выполняется в 7:59 утра. Если параметр **/k**не задан, команда Schtasks не запускает сценарий после 7:59 утра, но если экземпляр запущен в 6:20 утра все еще запущено, оно не будет останавливаться.

## <a name="to-schedule-a-task-to-run-every-n-hours"></a>Планирование выполнения задачи каждый `<n>` час

В почасовом расписании требуется параметр **/SC Hour** . Параметр **/mo** (модификатор) является необязательным и указывает количество часов между выполнением задачи. Значение по умолчанию для параметра **/mo** равно *1* (каждый час). Параметр **/k** (End Task) является необязательным и может использоваться с параметром **/et** (окончание в указанное время) или **/du** (заканчивается после указанного интервала).

### <a name="examples"></a>Примеры

- Чтобы запланировать запуск программы MyApp каждые пять часов, начиная с первого дня марта 2002, введите:

    ```
    schtasks /create /sc hourly /mo 5 /sd 03/01/2002 /tn My App /tr c:\apps\myapp.exe
    ```

    В этом примере на локальном компьютере используется параметр « **Английский (Зимбабве)** » в параметрах «язык **и региональные стандарты**», поэтому формат начальной даты — мм/дд/гггг (03/01/2002).

- Чтобы запланировать выполнение программы MyApp ежечасно, начиная с пяти минут после полуночи, введите:

    ```
    schtasks /create /sc hourly /st 00:05 /tn My App /tr c:\apps\myapp.exe
    ```

- Чтобы запланировать запуск программы MyApp каждые 3 часа, в течение 10 часов введите:

    ```
    schtasks /create /tn My App /tr myapp.exe /sc hourly /mo 3 /st 00:00 /du 0010:00
    ```

    В этом примере задача выполняется в 12:00 утра, 3:00 утра, 6:00 утра и 9:00 утра. Так как длительность составляет 10 часов, задача не запускается снова в 12:00 часов. Вместо этого он запускается снова в 12:00 утра. следующий день. Кроме того, поскольку программа выполняется всего несколько минут, параметр **/k** , который останавливает программу, если она все еще выполняется по истечении срока действия, не требуется.

## <a name="to-schedule-a-task-to-run-every-n-days"></a>Планирование выполнения задачи каждый `<n>` день

В ежедневном расписании требуется параметр **/SC Daily** . Параметр **/mo** (модификатор) является необязательным и указывает количество дней между выполнением задачи. Значение по умолчанию для параметра **/mo** равно *1* (каждый день).

### <a name="examples"></a>Примеры

- Чтобы запланировать выполнение программы MyApp раз в день, каждый день, в 8:00 утра. до 31 декабря 2021 введите:

    ```
    schtasks /create /tn My App /tr c:\apps\myapp.exe /sc daily /st 08:00 /ed 31/12/2021
    ```

     В этом примере для локальной системы компьютера установлено значение **Английский (Великобритания)** в параметрах язык **и региональные стандарты**, поэтому формат конечной даты — дд/мм/гггг (31/12/2021). Кроме того, поскольку этот пример не включает параметр **/mo** , интервал по умолчанию, равный *1* , используется для ежедневного выполнения команды.

- Чтобы запланировать запуск программы MyApp каждые 12 дней в 1:00 вечера. (13:00) начиная с 31 декабря 2021, введите:

    ```
    schtasks /create /tn My App /tr c:\apps\myapp.exe /sc daily /mo 12 /sd 12/31/2002 /st 13:00
    ```

    В этом примере для параметра « **Английский (Зимбабве)** » в параметрах « **язык и региональные стандарты**» задано значение «английская версия», поэтому формат даты окончания — мм/дд/гггг (12/31/2021).

- Чтобы запланировать запуск сценария безопасности *sec. vbs*каждые 70 дней, введите:

    ```
    schtasks /create /tn Security Script /tr sec.vbs /sc daily /mo 70 /it
    ```

    В этом примере параметр **/IT** используется, чтобы указать, что задача выполняется только в том случае, если пользователь, от имени которого выполняется задача, вошел в систему на компьютере. Так как задача выполняется с разрешениями конкретной учетной записи пользователя, эта задача выполняется только при входе пользователя в систему.

    > [!NOTE]
    > Чтобы указать задачи с помощью интерактивного свойства (**/IT**), используйте подробный запрос (**/query/v**). В подробном запросе на отображение задачи с параметром/IT поле **режим входа** имеет значение только Interactive.

## <a name="to-schedule-a-task-to-run-every-n-weeks"></a>Планирование выполнения задачи каждую `<n>` неделю

В еженедельном расписании требуется параметр **/SC Weekly** . Параметр **/mo** (модификатор) является необязательным и указывает количество недель между выполнением задачи. Значение по умолчанию для параметра **/mo** равно *1* (каждую неделю).

Еженедельные расписания также имеют необязательный параметр **/d** , чтобы запланировать выполнение задачи в указанные дни недели или на все дни (). Значение по умолчанию — *Пн (понедельник)*. Параметр "каждый день ()" эквивалентен планированию ежедневной задачи.

### <a name="examples"></a>Примеры

- Чтобы запланировать запуск программы MyApp на удаленном компьютере каждые шесть недель, введите:

    ```
    schtasks /create /tn My App /tr c:\apps\myapp.exe /sc weekly /mo 6 /s Server16 /u Admin01
    ```

    Поскольку этот пример оставляет параметр **/d** , задача выполняется в понедельниках. В этом примере также используется параметр **/s** для указания удаленного компьютера и параметр **/u** для выполнения команды с разрешениями учетной записи администратора пользователя. Кроме того, поскольку параметр **/p** отключен, SchTasks.exe запрашивает у пользователя пароль учетной записи администратора, и, поскольку команда выполняется удаленно, все пути в команде, включая путь к MyApp.exe, ссылаются на пути на удаленном компьютере.

- Чтобы запланировать выполнение задачи каждую пятницу, введите:

    ```
    schtasks /create /tn My App /tr c:\apps\myapp.exe /sc weekly /mo 2 /d FRI
    ```

    В этом примере используется параметр **/mo** для указания интервала в две недели, а параметр **/d** — для указания дня недели. Чтобы запланировать выполнение задачи каждую пятницу, оставьте параметр **/mo** или задайте для него значение *1*.

## <a name="to-schedule-a-task-to-run-every-n-months"></a>Планирование выполнения задачи каждый `<n>` месяц

В этом типе расписания требуется параметр **/SC Monthly** . Параметр **/mo** (модификатор), указывающий количество месяцев между выполнением задачи, является необязательным, а значение по умолчанию — *1* (каждый месяц). Этот тип расписания также имеет необязательный параметр **/d** , чтобы запланировать выполнение задачи в указанную дату месяца. Значение по умолчанию — *1* (первый день месяца).

### <a name="examples"></a>Примеры

- Чтобы запланировать запуск программы MyApp в первый день каждого месяца, введите:

    ```
    schtasks /create /tn My App /tr myapp.exe /sc monthly
    ```

    Значение по умолчанию для параметра **/mo** (модификатор) и параметра **/d** (день) равно *1*, поэтому для этого примера не нужно использовать ни один из этих параметров.

- Чтобы запланировать запуск программы MyApp каждые три месяца, введите:

    ```
    schtasks /create /tn My App /tr c:\apps\myapp.exe /sc monthly /mo 3
    ```

    В этом примере параметр **/mo** используется для задания интервала в 3 месяца.

- Чтобы запланировать выполнение программы MyApp каждый второй месяц на 21-й день месяца в полночь года, с 2 июля 2002 до 30 июня 2003, введите:

    ```
    schtasks /create /tn My App /tr c:\apps\myapp.exe /sc monthly /mo 2 /d 21 /st 00:00 /sd 2002/07/01 /ed 2003/06/30
    ```

    В этом примере используется параметр **/mo** для задания ежемесячного интервала (каждые два месяца), параметр **/d** для указания даты, параметр **/St** — для указания времени, а параметры **/SD** и **/ED** — для указания начальной и конечной дат соответственно. Кроме того, в этом примере для локального компьютера установлено значение **Английский (Южная Африка)** в параметрах язык **и региональные стандарты**, поэтому даты указаны в локальном формате, гггг/мм/дд.

## <a name="to-schedule-a-task-to-run-on-a-specific-day-of-the-week"></a>Планирование выполнения задачи в конкретный день недели

День расписания недели является разновидностью еженедельного расписания. В еженедельном расписании требуется параметр **/SC Weekly** . Параметр **/mo** (модификатор) является необязательным и указывает количество недель между выполнением задачи. Значение по умолчанию для параметра **/mo** равно *1* (каждую неделю). Параметр **/d** , который является необязательным, планирует выполнение задачи в указанные дни недели или за все дни (**&#42;**). Значение по умолчанию — *Пн (понедельник)*. Параметр каждый день `(/d *)` аналогичен планированию ежедневной задачи.

### <a name="examples"></a>Примеры

- Чтобы запланировать запуск программы MyApp каждую неделю в среду, введите:

    ```
    schtasks /create /tn My App /tr c:\apps\myapp.exe /sc weekly /d WED
    ```

    В этом примере используется параметр **/d** для указания дня недели. Так как команда выходит за пределы параметра **/mo** , задача выполняется каждую неделю.

- Чтобы запланировать выполнение задачи в понедельник и пятницу каждой восьмой недели, введите:

    ```
    schtasks /create /tn My App /tr c:\apps\myapp.exe /sc weekly /mo 8 /d MON,FRI
    ```

    В этом примере параметр **/d** используется для указания дней, а параметр **/mo** — для указания 8-недельного интервала.

## <a name="to-schedule-a-task-to-run-on-a-specific-week-of-the-month"></a>Планирование выполнения задачи в течение определенной недели месяца

В этом типе расписания требуется параметр **/SC Monthly** , параметр **/mo** (модификатор) и параметр **/d** (день). Параметр **/mo** (модификатор) указывает неделю, в которой выполняется задача. Параметр **/d** указывает день недели. Для этого типа расписания можно указать только один день недели. Это расписание также имеет необязательный параметр **/m** (month), позволяющий запланировать выполнение задачи в определенные месяцы или каждый месяц (**&#42;**). Значение по умолчанию параметра **/m** — каждый месяц (**&#42;**).

### <a name="examples"></a>Примеры

- Чтобы запланировать запуск программы MyApp на второе воскресенье каждого месяца, введите:

    ```
    schtasks /create /tn My App /tr c:\apps\myapp.exe /sc monthly /mo SECOND /d SUN
    ```

    В этом примере параметр **/mo** используется для указания второй недели месяца, а параметр **/d** — для указания дня.

- Чтобы запланировать запуск программы MyApp на первом понедельник в марте и Сентябрь, введите:

    ```
    schtasks /create /tn My App /tr c:\apps\myapp.exe /sc monthly /mo FIRST /d MON /m MAR,SEP
    ```

    В этом примере параметр **/mo** используется для указания первой недели месяца, а параметр **/d** — для указания дня. Он использует параметр **/m** для указания месяца, разделяя аргументы месяца запятой.

## <a name="to-schedule-a-task-to-run-on-a-specific-day-each-month"></a>Планирование выполнения задачи в конкретный день каждый месяц

В этом типе расписания обязательный параметр **/SC Monthly** и параметр **/d** (Day) являются обязательными. Параметр **/d** задает дату месяца (1-31), а не день недели, и в расписании можно указать только один день. Параметр **/m** (month) является необязательным, и по умолчанию используется каждый месяц *()*, а параметр **/mo** (модификатор) не является допустимым для этого типа расписания.

Schtasks.exe не позволяет запланировать задачу на дату, которая не находится в месяце, указанном параметром **/m** . Например, попытка запланировать 31 день февраля. Однако если вы не используете параметр **/m** и запланируете задачу для даты, которая не отображается каждый месяц, задача не будет выполняться в течение более короткого месяца. Чтобы запланировать задачу за последний день месяца, используйте тип расписания последний день.

### <a name="examples"></a>Примеры

- Чтобы запланировать запуск программы MyApp в первый день каждого месяца, введите:

    ```
    schtasks /create /tn My App /tr c:\apps\myapp.exe /sc monthly
    ```

    Поскольку модификатором по умолчанию является *None* (без модификатора), эта команда использует день по умолчанию *1*и месяц *каждого месяца*по умолчанию, не требуя дополнительных параметров.

- Планирование запуска программы MyApp на 15 мая и 15 июня в 3:00 часов (15:00) введите:

    ```
    schtasks /create /tn My App /tr c:\apps\myapp.exe /sc monthly /d 15 /m MAY,JUN /st 15:00
    ```

    В этом примере используется параметр **/d** для указания даты, а параметр **/m** — для указания месяцев. Он также использует параметр **/St** для указания времени начала.

## <a name="to-schedule-a-task-to-run-on-the-last-day-of-a-month"></a>Планирование выполнения задачи в последний день месяца

В расписании за последний день параметр **/SC Monthly** , параметр **/mo ластдай** (модификатор) и параметр **/m** (month) являются обязательными. Параметр **/d** (день) недопустим.

### <a name="examples"></a>Примеры

- Чтобы запланировать запуск программы MyApp в последний день каждого месяца, введите:

    ```
    schtasks /create /tn My App /tr c:\apps\myapp.exe /sc monthly /mo lastday /m *
    ```

    В этом примере используется параметр **/mo** для указания последнего дня и параметра **/m** с подстановочным знаком (**&#42;**), чтобы указать, что программа выполняется каждый месяц.

- Чтобы запланировать запуск программы MyApp в последний день февраля и последний день марта в 6:00 P.M., введите:

    ```
    schtasks /create /tn My App /tr c:\apps\myapp.exe /sc monthly /mo lastday /m FEB,MAR /st 18:00
    ```

    В этом примере параметр **/mo** используется для указания последнего дня, параметра **/m** для указания месяцев, а параметр **/St** — для указания времени начала.

## <a name="to-schedule-to-run-once"></a>Чтобы запланировать однократное выполнение

В расписании однократного выполнения параметр **/SC Once** является обязательным. Параметр **/St** , указывающий время запуска задачи, является обязательным. Параметр **/SD** , указывающий дату запуска задачи, является необязательным, а параметры **/mo** (модификатор) и **/ED** (Дата окончания) являются недопустимыми.

Команда Schtasks не позволяет запланировать выполнение задачи, если указанная дата и время находятся в прошлом, в зависимости от времени локального компьютера. Чтобы запланировать задание, которое выполняется один раз на удаленном компьютере в другом часовом поясе, необходимо запланировать его до наступления этой даты и времени на локальном компьютере.

### <a name="example"></a>Пример

- Чтобы запланировать запуск программы MyApp в полночь 1 января 2003, введите:

    ```
    schtasks /create /tn My App /tr c:\apps\myapp.exe /sc once /sd 01/01/2003 /st 00:00
    ```

    В этом примере параметр **/SC** используется для указания типа расписания, а параметры **/SD** и **/St** — для указания даты и времени. Кроме того, в этом примере локальный компьютер использует **Английский (США)** в параметрах язык **и региональные стандарты**, формат начальной даты — мм/дд/гггг.

## <a name="to-schedule-a-task-to-run-every-time-the-system-starts"></a>Планирование выполнения задачи при каждом запуске системы

Для типа расписания "по запуску" требуется параметр **/SC OnStart** . Параметр **/SD** (Дата начала) является необязательным, и по умолчанию используется текущая дата.

### <a name="example"></a>Пример

- Чтобы запланировать запуск программы MyApp при каждом запуске системы, начиная с 15 марта 2001, введите:

    ```
    schtasks /create /tn My App /tr c:\apps\myapp.exe /sc onstart /sd 03/15/2001
    ```

    В этом примере на локальном компьютере используется **Английский (США)** в параметрах язык **и региональные стандарты**, формат начальной даты — мм/дд/гггг.

## <a name="to-schedule-a-task-to-run-when-a-user-logs-on"></a>Планирование выполнения задачи при входе пользователя в систему

Тип расписания входа в систему планирует задание, которое выполняется при каждом входе пользователя на компьютер. В поле Расписание входа в систему введите параметр **/sc onlogon** . Параметр **/SD** (Дата начала) является необязательным, и по умолчанию используется текущая дата.

### <a name="example"></a>Пример

- Чтобы запланировать задание, выполняемое при входе пользователя на удаленный компьютер, введите:

    ```
    schtasks /create /tn Start Web Site /tr c:\myiis\webstart.bat /sc onlogon /s Server23
    ```

    Этот пример планирует выполнение пакетного файла при каждом входе пользователя на удаленный компьютер (любого пользователя). Для указания удаленного компьютера используется параметр **/s** . Так как команда является удаленной, все пути в команде, включая путь к пакетному файлу, указывают на путь на удаленном компьютере.

## <a name="to-schedule-a-task-to-run-when-the-system-is-idle"></a>Планирование выполнения задачи при простое системы

Тип расписания бездействия (on Idle) планирует задачу, которая выполняется при отсутствии активности пользователя в течение времени, указанного параметром **/i** . В расписании неактивных заданий по типу требуется параметр **/SC OnIdle** и параметр **/i** . Параметр **/SD** (Дата начала) является необязательным, и по умолчанию используется текущая дата.

### <a name="example"></a>Пример

- Чтобы запланировать запуск программы MyApp при простое компьютера, введите:

    ```
    schtasks /create /tn My App /tr c:\apps\myapp.exe /sc onidle /i 10
    ```

    В этом примере используется обязательный параметр **/i** , чтобы указать, что компьютер должен оставаться бездействующим в течение десяти минут перед запуском задачи.

## <a name="to-schedule-a-task-to-run-now"></a>Чтобы запланировать выполнение задачи сейчас

Команда Schtasks не имеет параметра "запустить сейчас", но ее можно смоделировать, создав задачу, которая выполняется один раз и начнется через несколько минут.

### <a name="example"></a>Пример

- Чтобы запланировать однократное выполнение задачи, 13 ноября 2020 в 2:18 P.M. Местное время, введите:

    ```
    schtasks /create /tn My App /tr c:\apps\myapp.exe /sc once /st 14:18 /sd 11/13/2002
    ```

    В этом примере локальный компьютер использует **Английский (США)** в параметрах «язык **и региональные стандарты**», поэтому формат начальной даты — мм/дд/гггг.

## <a name="to-schedule-a-task-that-runs-with-different-permissions"></a>Планирование задачи, выполняемой с разными разрешениями

Можно запланировать выполнение задач всех типов с разрешениями альтернативной учетной записи как на локальном, так и на удаленном компьютере. В дополнение к параметрам, необходимым для конкретного типа расписания, параметр **/ru** является обязательным, а параметр **/RP** является необязательным.

### <a name="examples"></a>Примеры

- Чтобы запустить программу MyApp на локальном компьютере, введите:

    ```
    schtasks /create /tn My App /tr myapp.exe /sc weekly /d TUE /ru Admin06
    ```

    В этом примере параметр **/ru** используется для указания того, что задача должна выполняться с разрешениями учетной записи администратора пользователя (*Admin06*). Кроме того, в этом примере задача запланирована на выполнение каждый вторник, но можно использовать любой тип расписания для выполнения задачи с другими разрешениями.

    В ответ SchTasks.exe запрашивает пароль запуска от имени для учетной записи *Admin06* , а затем отображает сообщение об успешном выполнении:

    ```
    Please enter the run as password for Admin06: ********
    SUCCESS: The scheduled task My App has successfully been created.
    ```

- Для запуска программы MyApp на компьютере *Marketing* каждые четыре дня введите:

    ```
    schtasks /create /tn My App /tr myapp.exe /sc daily /mo 4 /s Marketing /u Marketing\Admin01 /ru Reskits\User01
    ```

    В этом примере параметр **/SC** используется для задания ежедневного расписания, а параметр **/mo** — для указания интервала в четыре дня. Кроме того, в этом примере используется параметр **/s** для указания имени удаленного компьютера и параметра **/u** , чтобы указать учетную запись с разрешением на выполнение задачи на удаленном компьютере (*Admin01 на компьютере Marketing*). Наконец, в этом примере используется параметр **/ru** , чтобы указать, что задача должна выполняться с разрешениями учетной записи пользователя, не имеющей прав администратора (*User01* в домене *рескитс* ). Без параметра **/ru** задача будет выполняться с разрешениями учетной записи, указанной параметром **/u**.

    При выполнении этого примера команда Schtasks First запрашивает пароль пользователя с именем, указанным параметром **/u** (для выполнения команды), а затем запрашивает пароль пользователя с именем, указанным параметром **/ru** (для запуска задачи). После проверки подлинности паролей команда Schtasks выводит сообщение о том, что задача запланирована:

    ```
    Type the password for Marketing\Admin01:********
    Please enter the run as password for Reskits\User01: ********
    SUCCESS: The scheduled task My App has successfully been created.
    ```

- Чтобы запустить расписание запуска программы *AdminCheck.exe* на *общедоступном* компьютере каждую пятницу в 4:00 утра, но только в том случае, если администратор компьютера вошел в систему, введите:

    ```
    schtasks /create /tn Check Admin /tr AdminCheck.exe /sc weekly /d FRI /st 04:00 /s Public /u Domain3\Admin06 /ru Public\Admin01 /it
    ```

    В этом примере параметр **/SC** используется для задания еженедельного расписания, параметр **/d** — для указания дня, а параметр **/St** — для указания времени начала. Он также использует параметр **/s** для указания имени удаленного компьютера, параметр **/u** , чтобы указать учетную запись с разрешением на запуск задачи на удаленном компьютере, параметр **/ru** , чтобы настроить выполнение задачи с разрешениями администратора общедоступного компьютера (*Public\Admin01*), и параметр **/IT** , чтобы указать, что задача выполняется только при входе в систему учетной записи *Public\Admin01* .

    > [!NOTE]
    > Чтобы указать задачи с помощью интерактивного свойства (**/IT**), используйте подробный запрос ( `/query /v` ). В подробном запросе на отображение задачи с параметром **/IT**поле **режим входа** имеет значение **только Interactive**.

## <a name="to-schedule-a-task-that-runs-with-system-permissions"></a>Планирование задачи, выполняемой с разрешениями системы

Задачи всех типов могут выполняться с разрешениями **системной** учетной записи как на локальном, так и на удаленном компьютере. В дополнение к параметрам, необходимым для конкретного типа расписания, параметр **системы/ru** (или **/ru**) является обязательным, а параметр **/RP** является недопустимым.

> [!IMPORTANT]
> **Системная** учетная запись не имеет прав интерактивного входа. Пользователи не могут видеть программы или задачи, выполняемые с системными разрешениями, или взаимодействовать с ними. Параметр **/ru** определяет разрешения, с которыми запускается задача, а не разрешения, используемые для планирования задачи. Только администраторы могут планировать задачи, независимо от значения параметра **/ru** .
>
> Для задания задач, выполняемых с разрешениями системы, используйте подробный запрос ( `/query /v` ). В подробном запросе, отображающем задачу системного выполнения, поле « **Запуск от имени пользователя** » имеет значение **NT AUTHORITY\SYSTEM** , а поле « **режим входа** » имеет значение « **только фон**».

### <a name="examples"></a>Примеры

- Чтобы запланировать запуск программы MyApp на локальном компьютере с разрешениями **системной** учетной записи, введите:

    ```
    schtasks /create /tn My App /tr c:\apps\myapp.exe /sc monthly /d 15 /ru System
    ```

    В этом примере задача запланирована на пятнадцатый день каждого месяца, но для выполнения задачи с разрешениями системы можно использовать любой тип расписания. Кроме того, в этом примере используется **системный параметр/ru** для указания контекста безопасности системы. Так как системные задачи не используют пароль, параметр **/RP** остается недоступным.

    В ответ SchTasks.exe отображает информационное сообщение и сообщение об успешном выполнении без запроса пароля:

    ```
    INFO: The task will be created under user name (NT AUTHORITY\SYSTEM).
    SUCCESS: The Scheduled task My App has successfully been created.
    ```

- Чтобы запланировать запуск программы MyApp на компьютере *Finance01* каждый утро в 4:00 утра, используя разрешения системы, введите:

    ```
    schtasks /create /tn My App /tr myapp.exe /sc daily /st 04:00 /s Finance01 /u Admin01 /ru System
    ```

    В этом примере используется параметр **/TN** для задания имени задачи, а параметр **/tr** — для указания удаленной копии программы MyApp, параметр **/SC** — для задания ежедневного расписания, но остается параметром **/mo** , так как по умолчанию используется значение *1* (каждый день). В этом примере также используется параметр **/St** для указания времени начала, которое также является временем запуска задачи каждый день, параметр **/s** для указания имени удаленного компьютера, параметр **/u** , указывающий учетную запись с разрешением на выполнение задачи на удаленном компьютере, а параметр **/ru** указывает, что задача должна выполняться под системной учетной записью. Без параметра **/ru** задача будет выполняться с использованием разрешений учетной записи, заданной параметром **/u** .

    Schtasks.exe запрашивает пароль пользователя с именем, указанным параметром **/u** , и после проверки подлинности пароля выводит сообщение о том, что задача создана и выполняется с разрешениями **системной** учетной записи:

    ```
    Type the password for Admin01:**********

    INFO: The Schedule Task My App will be created under user name (NT AUTHORITY\
    SYSTEM).
    SUCCESS: The scheduled task My App has successfully been created.
    ```

## <a name="to-schedule-a-task-that-runs-more-than-one-program"></a>Планирование задачи, запускающей более одной программы

Каждая задача запускает только одну программу. Тем не менее можно создать пакетный файл, запускающий несколько программ, а затем запланировать задачу запуска пакетного файла.

1. С помощью текстового редактора, например Блокнота, создайте пакетный файл, содержащий имя и полный путь к EXE-файлу, который требуется для запуска программ Просмотр событий (Eventvwr.exe) и системного монитора (Perfmon.exe).

    ```
    C:\Windows\System32\Eventvwr.exe
    C:\Windows\System32\Perfmon.exe
    ```

2. Сохраните файл как *MyApps.bat*, откройте schtasks.exe, а затем создайте задачу для запуска *MyApps.bat* , введя:

    ```
    schtasks /create /tn Monitor /tr C:\MyApps.bat /sc onlogon /ru Reskit\Administrator
    ```

    Эта команда создает задачу Monitor, которая запускается каждый раз, когда пользователь входит в систему. Он использует параметр **/TN** для задания имени задачи, параметра **/tr** для выполнения MyApps.bat, параметр **/SC** , указывающий тип расписания OnLogon, и параметр **/ru** для выполнения задачи с разрешениями учетной записи администратора пользователя.

    В результате выполнения этой команды при каждом входе пользователя в систему задача запускается как Просмотр событий, так и системного монитора.

## <a name="to-schedule-a-task-that-runs-on-a-remote-computer"></a>Планирование задачи, выполняемой на удаленном компьютере

Чтобы запланировать выполнение задачи на удаленном компьютере, необходимо добавить ее в расписание удаленного компьютера. Задачи всех типов могут быть запланированы на удаленном компьютере, но должны выполняться следующие условия.

- Необходимо иметь разрешение на планирование задачи. Таким образом, необходимо войти на локальный компьютер с учетной записью, которая является членом группы "Администраторы" на удаленном компьютере, или использовать параметр **/u** для предоставления учетных данных администратора удаленного компьютера.

- Параметр **/u** можно использовать только в том случае, если локальный и удаленный компьютеры находятся в одном домене или если локальный компьютер находится в домене, которому доверяет домен удаленного компьютера. В противном случае удаленный компьютер не может проверить подлинность указанной учетной записи пользователя и не сможет проверить, является ли эта учетная запись членом группы "Администраторы".

- Задача должна иметь достаточные разрешения для запуска на удаленном компьютере. Необходимые разрешения зависят от задачи. По умолчанию задача выполняется с разрешением текущего пользователя локального компьютера или, если используется параметр **/u** , задача выполняется с разрешением учетной записи, указанной параметром **/u** . Однако можно использовать параметр **/ru** для выполнения задачи с разрешениями для другой учетной записи пользователя или с системными разрешениями.

### <a name="examples"></a>Примеры

- Чтобы запланировать запуск программы MyApp (с правами администратора) на удаленном компьютере *SRV01* каждые десять дней, запустите команду:

    ```
    schtasks /create /s SRV01 /tn My App /tr c:\program files\corpapps\myapp.exe /sc daily /mo 10
    ```

    В этом примере параметр **/s** используется для предоставления имени удаленного компьютера. Поскольку локальный текущий пользователь является администратором удаленного компьютера, параметр **/u** , предоставляющий альтернативные разрешения на планирование задачи, не требуется.

    > [!NOTE]
    > При планировании задач на удаленном компьютере все параметры ссылаются на удаленный компьютер. Таким образом, файл, указанный параметром **/tr** , ссылается на копию MyApp.exe на удаленном компьютере.

- Чтобы запланировать запуск программы MyApp (как пользователя) на удаленном компьютере *SRV06* каждые три часа, введите:

    ```
    schtasks /create /s SRV06 /tn My App /tr c:\program files\corpapps\myapp.exe /sc hourly /mo 3 /u reskits\admin01 /p R43253@4$ /ru SRV06\user03 /rp MyFav!!Pswd
    ```

    Поскольку для планирования задачи требуются разрешения администратора, команда использует параметры **/u** и **/p** для предоставления учетных данных учетной записи администратора пользователя (*Admin01* в домене *рескитс* ). По умолчанию эти разрешения также используются для выполнения задачи. Однако поскольку для выполнения задачи не требуются права администратора, команда включает параметры **/u** и **/RP** для переопределения значения по умолчанию и выполнения задачи с разрешением на удаленном компьютере пользователя, не являющегося администратором учетной записи.

- Чтобы запланировать запуск программы MyApp (как пользователя) на удаленном компьютере *SRV02* в последний день каждого месяца.

    ```
    schtasks /create /s SRV02 /tn My App /tr c:\program files\corpapps\myapp.exe /sc monthly /mo LASTDAY /m * /u reskits\admin01
    ```

    Так как локальный текущий пользователь (*user03*) не является администратором удаленного компьютера, команда использует параметр **/u** для предоставления учетных данных учетной записи администратора пользователя (*Admin01* в домене *рескитс* ). Разрешения учетной записи администратора будут использоваться для планирования задачи и выполнения задачи.

    Так как команда не включала параметр **/p** (Password), команда Schtasks запрашивает пароль. Затем он отображает сообщение об успешном выполнении и, в данном случае, предупреждение:

    ```
    Type the password for reskits\admin01:********

    SUCCESS: The scheduled task My App has successfully been created.
    WARNING: The scheduled task My App has been created, but may not run because the account information could not be set.
    ```

    Это предупреждение означает, что удаленному домену не удалось проверить подлинность учетной записи, указанной параметром **/u** . В этом случае удаленный домен не может проверить подлинность учетной записи пользователя, так как локальный компьютер не является членом домена, которому доверяет домен удаленного компьютера. В этом случае задание задачи отображается в списке запланированных задач, но задача фактически пуста и не будет запущена.

    Следующее отображение из подробного запроса представляет проблему с задачей. Обратите внимание, что значение параметра **время следующего выполнения** **никогда** **не должно** **быть получено из базы данных планировщика заданий**.

    Если этот компьютер был членом того же домена или доверенного домена, задача была успешно запланирована и была выполнена как указанная.

    ```
    HostName: SRV44
    TaskName: My App
    Next Run Time: Never
    Status:
    Logon mode: Interactive/Background
    Last Run Time: Never
    Last Result: 0
    Creator: user03
    Schedule: At 3:52 PM on day 31 of every month, start
    starting 12/14/2001
    Task To Run: c:\program files\corpapps\myapp.exe
    Start In: myapp.exe
    Comment: N/A
    Scheduled Task State: Disabled
    Scheduled Type: Monthly
    Start Time: 3:52:00 PM
    Start Date: 12/14/2001
    End Date: N/A
    Days: 31
    Months: JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NO
    V,DEC
    Run As User: Could not be retrieved from the task sched
    uler database
    Delete Task If Not Rescheduled: Enabled
    Stop Task If Runs X Hours and X Mins: 72:0
    Repeat: Every: Disabled
    Repeat: Until: Time: Disabled
    Repeat: Until: Duration: Disabled
    Repeat: Stop If Still Running: Disabled
    Idle Time: Disabled
    Power Management: Disabled
    ```

#### <a name="remarks"></a>Комментарии

- Чтобы выполнить команду **/CREATE** с разрешениями другого пользователя, используйте параметр **/u** . Параметр **/u** допустим только для планирования задач на удаленных компьютерах.

- Чтобы просмотреть другие `schtasks /create` примеры, введите `schtasks /create /?` в командной строке.

- Чтобы запланировать задачу, которая выполняется с разрешениями другого пользователя, используйте параметр **/ru** . Параметр **/ru** допустим для задач на локальных и удаленных компьютерах.

- Чтобы использовать параметр **/u** , локальный компьютер должен находиться в том же домене, что и удаленный компьютер, или в домене, которому доверяет домен удаленного компьютера. В противном случае либо задача не создается, либо задание задачи пусто и задача не выполняется.

- Команда Schtasks всегда запрашивает пароль, если вы не предложит его, даже если вы запланируете задание на локальном компьютере с использованием текущей учетной записи пользователя. Это нормальное поведение для SchTasks.

- Команда Schtasks не проверяет расположение файлов программы или пароли учетных записей пользователей. Если не ввести правильное расположение файла или правильный пароль для учетной записи пользователя, задача будет создана, но не будет запущена. Кроме того, если пароль для учетной записи изменяется или истекает, и пароль, сохраненный в задаче, не изменяется, задача не будет запущена.

- **Системная** учетная запись не имеет прав интерактивного входа. Пользователи не видят и не могут взаимодействовать с программами, запущенными с разрешениями системы.

- Каждая задача запускает только одну программу. Однако можно создать пакетный файл, который запускает несколько задач, а затем запланировать задачу, запускающую пакетный файл.

- Вы можете протестировать задачу сразу после ее создания. Используйте операцию запуска для проверки задачи, а затем проверьте файл SchedLgU.txt (SystemRoot\SchedLgU.txt) на наличие ошибок.

## <a name="additional-references"></a>Дополнительные ссылки

- [Условные обозначения синтаксиса команд командной строки](command-line-syntax-key.md)

- [команда Schtasks Change](schtasks-change.md)

- [команда Schtasks Delete](schtasks-delete.md)

- [команда Schtasks End](schtasks-end.md)

- [команда запроса SchTasks](schtasks-query.md)

- [команда Schtasks Run](schtasks-run.md)