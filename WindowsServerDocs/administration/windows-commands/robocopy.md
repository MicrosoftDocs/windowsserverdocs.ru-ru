---
title: robocopy
description: Узнайте, как использовать команду Robocopy в Windows и Windows Server для копирования файлов
ms.prod: windows-server
ms.technology: manage-windows-commands
ms.topic: article
ms.assetid: d4c6e8e9-fcb3-4a4a-9d04-2d8c367b6354
author: jasongerend
ms.author: jgerend
manager: lizapo
ms.date: 06/07/2020
ms.openlocfilehash: 3ce409d0995449a4f5da98b69df6f436d75e04b7
ms.sourcegitcommit: a538474d2c0a9520567f4e6ad0933f8660273098
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/08/2020
ms.locfileid: "84505796"
---
# <a name="robocopy"></a>robocopy

Копирует данные файла.

## <a name="syntax"></a>Синтаксис

```
robocopy <Source> <Destination> [<File>[ ...]] [<Options>]
```

Например, чтобы скопировать файл с именем *еарли-репорт. mov* из к:\репортс в общую папку (* \\ маркетинг\видеос*) и включить многопоточность для более высокой производительности (с параметром/MT) и возможность перезапуска перемещения в случае его прерывания (с параметром/z), используйте следующий синтаксис:

```dos
robocopy C:\reports '\\marketing\videos' yearly-report.mov /mt /z
```

### <a name="parameters"></a>Параметры

|   Параметр    |                                                                                            Описание:                                                                                           |
|----------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|   \<Source>    |                                                                            Указание пути к исходному каталогу.                                                                           |
| \<Destination> |                                                                          Указание пути к целевому каталогу.                                                                        |
|    \<File>     | Указывает копируемый файл или файлы. При необходимости можно использовать подстановочные знаки (**&#42;** или **?**). Если параметр **файла** не указан, в качестве значения по умолчанию используется ** \* . \* ** |
|   \<Options>   |                                                                    Указывает параметры для использования с командой **Robocopy** .                                                                   |

### <a name="copy-options"></a>Параметры копирования

|Параметр|Описание|
|------|-----------|
|/s|Копирует подкаталоги. Обратите внимание, что этот параметр исключает пустые каталоги.|
|/e|Копирует подкаталоги. Обратите внимание, что этот параметр включает пустые каталоги. Дополнительные сведения см. в разделе [Примечания](#remarks).|
|Лев\<N>|Копирует только *N* верхних уровней исходного дерева каталогов.|
|/z|Копирование файлов в перезапускаемом режиме.|
|/b|Копирует файлы в режиме резервного копирования.|
|/zb|Использует перезапускаемый режим. Если доступ запрещен, то для этого параметра используется режим резервного копирования.|
|/efsraw|Копирует все зашифрованные файлы в режиме файловой системы EFS RAW.|
|/Copy\<CopyFlags>|Задает свойства файла для копирования. Ниже приведены допустимые значения для этого параметра.</br>**D** данных</br>**Атрибуты**</br>Метки времени **T**</br>Список управления доступом (ACL) **для NTFS**</br>**O** сведения о владельце</br>**U** . сведения аудита</br>Значение по умолчанию для **копифлагс** — **dat** (данные, атрибуты и метки времени).|
|/дкопи:\<copyflags\>|Определяет, какие объекты нужно копировать для каталогов. Значение по умолчанию — DA. Возможные варианты: D = Data, A = Attributes и T = timestamps.|
|/сек|Копирует файлы с безопасностью (эквивалентно **/Copy: DATS**).|
|/copyall|Копирует все сведения о файле (эквивалентно **/Copy: датсау**).|
|/нокопи|Не копирует сведения о файле (полезное с **/пурже**).|
|/секфикс|Исправляет безопасность файлов для всех файлов, даже пропущенных.|
|/тимфикс|Исправляет время файла для всех файлов, даже пропущенных.|
|/пурже|Удаляет целевые файлы и каталоги, которые больше не существуют в источнике. Дополнительные сведения см. в разделе [Примечания](#remarks).|
|/мир|Зеркальное отражение дерева каталогов (эквивалентно **/e** плюс **/пурже**). Дополнительные сведения см. в разделе [Примечания](#remarks).|
|/мов|Перемещает файлы и удаляет их из источника после копирования.|
|/Move|Перемещает файлы и каталоги и удаляет их из источника после копирования.|
|/a +: [РАШКНЕТ]|Добавляет указанные атрибуты в скопированные файлы.|
|/а-: [РАШКНЕТ]|Удаляет указанные атрибуты из скопированных файлов.|
|/CREATE|Создает дерево каталогов и только файлы нулевой длины.|
|/фат|Создает файлы назначения, используя только имена файлов FAT длиной 8,3 символов.|
|/256|Отключает поддержку слишком длинных путей (более 256 символов).|
|Понедельник\<N>|Отслеживает источник и выполняется снова при обнаружении более *N* изменений.|
|/МОТ:\<M>|Отслеживание источника и повторный запуск через *M* минут при обнаружении изменений.|
|/MT [: N]|Создает многопоточные копии с *N* потоками. Значение *N* должно быть целым числом от 1 до 128. Значение по умолчанию для *N* равно 8.</br>Параметр **/MT** не может использоваться с параметрами **/ИПГ** и **/ефсрав** .</br>Перенаправление вывода с помощью параметра **/log** для повышения производительности.</br>Примечание. параметр/MT применяется к Windows Server 2008 R2 и Windows 7.|
|/РХ: ЧЧММ — ЧЧММ|Указывает время выполнения, когда могут быть запущены новые копии.|
|/PF|Проверяет время выполнения для каждого файла (не для каждого прохода).|
|/ИПГ: n|Указывает зазор между пакетами для освобождения пропускной способности в медленной линии.|
|/сл|Не используйте символьные ссылки, а вместо этого создайте копию ссылки.|

> [!IMPORTANT]
> При использовании параметра копирования **/секфикс** укажите тип сведений, которые необходимо скопировать, с помощью одного из следующих дополнительных параметров копирования:
>- **/копялл**
>- **/COPY: O**
>- **/COPY: S**
>- **/COPY: U**
>- **Контекст**

### <a name="file-selection-options"></a>Параметры выбора файлов

|Параметр|Описание|
|------|-----------|
|/a|Копирует только те файлы, для которых задан атрибут **Archive** .|
|/m|Копирует только те файлы, для которых задан атрибут **Archive** , и сбрасывает атрибут **архива** .|
|/ИА: [РАШКНЕТО]|Включает только те файлы, для которых задан любой из указанных атрибутов.|
|/КСА: [РАШКНЕТО]|Исключает файлы, для которых задан любой из указанных атрибутов.|
|/КСФ \<FileName> [...]|Исключает файлы, соответствующие указанным именам или путям. Обратите внимание, что *имя файла* может содержать подстановочные знаки (**&#42;** и **?**).|
|/КСД \<Directory> [...]|Исключает каталоги, соответствующие указанным именам и путям.|
|/кск|Исключает измененные файлы.|
|/ксн|Исключает новые файлы.|
|/ксо|Исключает старые файлы.|
|/кскс|Исключает лишние файлы и каталоги.|
|/ксл|Исключает файлы и каталоги "ничего".|
|/is|Включает одни и те же файлы.|
|разрешает|Включает "оптимизированные" файлы.|
|максимальной\<N>|Указывает максимальный размер файла (для исключения файлов размером более *N* байт).|
|/min\<N>|Указывает минимальный размер файла (для исключения файлов размером менее *N* байт).|
|maxAge\<N>|Указывает максимальный возраст файла (для исключения файлов старше *N* дней или дат).|
|/минаже:\<N>|Указывает минимальный возраст файла (исключая файлы более чем *N* дней или даты).|
|/макслад:\<N>|Задает максимальную дату последнего доступа (исключает файлы, не используемые с момента *N*).|
|/минлад:\<N>|Задает минимальную дату последнего доступа (исключает файлы, используемые после *n*), если *n* меньше 1900, *N* указывает количество дней. В противном случае *N* указывает дату в формате ГГГГММДД.|
|/ксж|Исключает точки соединения, которые обычно включаются по умолчанию.|
|/fft|Предположение времени файла FAT (двухсекундная точность).|
|/дст|Компенсирует разницу в течение одного часа.|
|/ксжд|Исключает точки соединения для каталогов.|
|/ксжф|Исключает точки соединения для файлов.|

### <a name="retry-options"></a>Параметры повтора

|Параметр|Описание|
|------|-----------|
|/r\<N>|Указание количества повторных попыток для неудавшихся копий. Значение *N* по умолчанию равно 1 000 000 (1 000 000 повторных попыток).|
|/w\<N>|Указание времени ожидания между повторными попытками в секундах. Значение *N* по умолчанию равно 30 (время ожидания 30 секунд).|
|/рег|Сохраняет значения, указанные в параметрах **/r** и **/w** , в качестве параметров по умолчанию в реестре.|
|/тбд|Указывает, что система будет ожидать определения имен общих ресурсов (ошибка повтора 67).|

### <a name="logging-options"></a>Параметры ведения журнала

|Параметр|Описание|
|------|-----------|
|/l|Указывает, что файлы должны быть перечислены только в списке (а не копировать, удалять или отмечать время).|
|/x|Сообщает все дополнительные файлы, а не только выбранные.|
|/v|Создает подробный вывод и отображает все пропущенные файлы.|
|/тс|Включает в выходные данные метки времени исходных файлов.|
|/fp|Содержит полные имена путей к файлам в выходных данных.|
|/bytes|Выводит размеры в байтах.|
|/нс|Указывает, что размеры файлов не должны записываться в журнал.|
|/nc|Указывает, что классы файлов не должны регистрироваться.|
|/nfl|Указание, что имена файлов не должны регистрироваться.|
|/ndl|Указание, что имена каталогов не должны регистрироваться.|
|/np|Указывает, что не нужно отображать ход выполнения операции копирования (количество копируемых файлов или каталогов).|
|/ета|Показывает предполагаемое время прибытия (в единицах) копируемых файлов.|
|/log\<LogFile>|Запись выходных данных о состоянии в файл журнала (перезапись существующего файла журнала).|
|/log +:\<LogFile>|Записывает выходные данные состояния в файл журнала (Добавляет выходные данные в существующий файл журнала).|
|/unicode|Отображает вывод состояния в виде текста в Юникоде.|
|/унилог:\<LogFile>|Записывает выходные данные состояния в файл журнала в виде текста в Юникоде (перезаписывает существующий файл журнала).|
|/унилог +:\<LogFile>|Записывает выходные данные состояния в файл журнала в виде текста в Юникоде (Добавляет выходные данные в существующий файл журнала).|
|/tee|Записывает выходные данные состояния в окно консоли, а также в файл журнала.|
|/нжх|Указывает, что заголовок задания отсутствует.|
|/нжс|Указывает, что сводка по заданию отсутствует.|

### <a name="job-options"></a>Параметры задания

|Параметр|Описание|
|------|-----------|
|/Задание\<JobName>|Указывает, что параметры должны быть производными от файла именованного задания.|
|/Save\<JobName>|Указывает, что параметры должны быть сохранены в файле именованного задания.|
|/куит|Завершает работу после обработки командной строки (для просмотра параметров).|
|/носд|Указывает, что исходный каталог не указан.|
|/нодд|Указывает, что конечный каталог не указан.|
|/If|Включает указанные файлы.|

### <a name="exit-return-codes"></a>Коды выхода (Return)

Значение | Описание:
-- | --
0 | Файлы не были скопированы. Сбой не обнаружен.  Нет несовпадающих файлов. Файлы уже существуют в целевом каталоге; Поэтому операция копирования была пропущена.
1 | Все файлы успешно скопированы.
2 | В целевом каталоге имеются дополнительные файлы, отсутствующие в исходном каталоге. Файлы не были скопированы.
3 | Некоторые файлы были скопированы. Имеются дополнительные файлы. Сбой не обнаружен.
5 | Некоторые файлы были скопированы. Некоторые файлы не совпали. Сбой не обнаружен.
6 | Существуют дополнительные файлы и несоответствующие файлы. Файлы не были скопированы, ошибок не обнаружено. Это означает, что файлы уже существуют в целевом каталоге.
7 | Файлы были скопированы, обнаружено несоответствие файлов, и имеются дополнительные файлы.
8 | Не удалось скопировать несколько файлов.

> [!NOTE]
> Любое значение больше 8 указывает, что во время операции копирования существовала хотя бы одна ошибка.

### <a name="remarks"></a>Примечания

-   Параметр **/мир** равнозначен параметру **/e** Plus **/пурже** с одним небольшим различием в поведении:  
    -   Если задан параметр **/e** плюс **/пурже** , то при наличии конечного каталога параметры безопасности каталога назначения не перезаписываются.
    -   При использовании параметра **/мир** , если каталог назначения существует, параметры безопасности каталога назначения перезаписываются.

## <a name="additional-references"></a>Дополнительные ссылки

- [Условные обозначения синтаксиса команд командной строки](command-line-syntax-key.md)
