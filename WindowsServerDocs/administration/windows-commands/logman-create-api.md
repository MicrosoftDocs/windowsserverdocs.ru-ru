---
title: Создание API Logman
description: 'Раздел Windows команды для ****- '
ms.custom: na
ms.prod: windows-server
ms.reviewer: na
ms.suite: na
ms.technology: manage-windows-commands
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: 2ecc0a75-2613-464a-8616-c5dc404bb736
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 10/16/2017
ms.openlocfilehash: 512602213fcfd95770af0e27b721a589ed489771
ms.sourcegitcommit: 6aff3d88ff22ea141a6ea6572a5ad8dd6321f199
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/27/2019
ms.locfileid: "71374597"
---
# <a name="logman-create-api"></a>Создание API Logman

>Область применения. Windows Server (половина ежегодного канала), Windows Server 2016, Windows Server 2012 R2, Windows Server 2012

Создание сборщика данных трассировки API.  

## <a name="syntax"></a>Синтаксис  
```  
logman create api <[-n] <name>> [options]  
```  
## <a name="parameters"></a>Параметры  

|                    Параметр                     |                                                                               Описание                                                                               |
|--------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|                        /?                        |                                                                    Отображает контекстную справку.                                                                     |
|                -s <computer name>                |                                                          Выполните команду на указанном удаленном компьютере.                                                          |
|                 -config <value>                  |                                                         Указывает файл параметров, содержащий параметры команды.                                                         |
|                   [-n] <name>                    |                                                                       Имя целевого объекта.                                                                        |
| -f < bin&#124;бинЦирк&#124;CSV&#124;&#124;SQL > |                                                            Указывает формат журнала для сборщика данных.                                                             |
|             -[-] u < пользователь [пароль] >              | Указывает пользователя для запуска от имени. При вводе \* для пароля выводится запрос на ввод пароля. Пароль не отображается при вводе пароля в командной строке. |
|    -m < [начало] [завершение] [[начало] [завершение] [...]] >    |                                                Вместо запланированного времени начала или окончания измените значение на запуск или завершение вручную.                                                 |
|                -RF < [[чч:] мм:] SS >                |                                                        Запуск сборщика данных в течение указанного периода времени.                                                         |
|        -b < M/d/гггг ч: СС [AM&#124;] >         |                                                              Начать сбор данных в указанное время.                                                               |
|        -e < M/d/гггг ч: СС [AM&#124;] >         |                                                               Конец сбора данных в указанное время.                                                                |
|                -Si < [[чч:] мм:] SS >                |                                                 Указывает интервал выборки для собираются данных счетчиков производительности.                                                  |
|              -o < путь&#124;dsn. > журнала              |                                              Указывает выходной файл журнала или имя DSN и набора журналов в базе данных SQL.                                               |
|                      -[-] r                       |                                                  Повторять сборщик данных ежедневно по указанному времени начала и окончания.                                                  |
|                      -[-] a                       |                                                                     Добавление к существующему файлу журнала.                                                                     |
|                      -[-]                      |                                                                     Перезаписать существующий файл журнала.                                                                     |
|           -[-] v < нннннн&#124;ммддххмм >           |                                                   присоединить сведения о управлении версиями файлов к концу имени файла журнала.                                                   |
|                  -[-] RC <task>                   |                                                         Выполните команду, указанную при каждом закрытии журнала.                                                          |
|                 -[-] максимум <value>                  |                                                 Максимальный размер файла журнала (в МБ или в максимальном количестве записей для журналов SQL).                                                  |
|              -[-] cnf < [[чч:] мм:] SS >              |     Если указано время, создайте новый файл по истечении указанного времени. Если параметр time не указан, создайте новый файл при превышении максимального размера.     |
|                        -y                        |                                                             Ответьте Да на все вопросы без запроса.                                                              |
|            -МОДС < путь [путь [...]] >             |                                                          Указывает список модулей для ведения журнала вызовов API.                                                           |
|     -API < модуля! API [Module! API [...]] >      |                                                         Указывает список вызовов API, включаемых в ведение журнала.                                                          |
|     -ексапис < Module! API [модуль! API [...]] >      |                                                        Указывает список вызовов API, исключаемых из ведения журнала.                                                         |
|                     -[-] Ano                      |                                                     Log (-Ano) только имена API или не заносить в журнал имена API (-Ano).                                                     |
|                  -[-] рекурсивно                   |                                          Log (-recursive) или не заносить в журнал (рекурсивно) API-интерфейсы рекурсивно за пределами первого слоя.                                           |
|                   -exe <value>                   |                                                        Указывает полный путь к исполняемому файлу для трассировки API.                                                        |

## <a name="remarks"></a>Примечания  
Где [-] присутствует, дополнительный — инвертирует параметр.  
## <a name="BKMK_examples"></a>Примеров  
Следующая команда создает счетчик трассировки API с именем trace_notepad для исполняемого файла к:\виндовс\нотепад.ЕКСЕ и выводит результаты в файл к:\нотепад.ЕТЛ.  
```  
logman create api trace_notepad -exe c:\windows\notepad.exe -o c:\notepad.etl  
```  
Следующая команда создает счетчик трассировки API с именем trace_notepad для исполняемого файла к:\виндовс\нотепад.ЕКСЕ, собирающий значения, созданные модулем c:\windows\system32\advapi32.dll.  
```  
logman create api trace_notepad -exe c:\windows\notepad.exe -mods c:\windows\system32\advapi32.dll  
```  
Следующая команда создает счетчик трассировки API с именем trace_notepad для исполняемого файла к:\виндовс\нотепад.ЕКСЕ, исключая вызов API Тлсжетвалуе, созданный модулем kernel32. dll.  
```  
logman create api trace_notepad -exe c:\windows\notepad.exe -exapis kernel32.dll!TlsGetValue  
```  
#### <a name="additional-references"></a>Дополнительные ссылки  
[logman](logman.md)  
