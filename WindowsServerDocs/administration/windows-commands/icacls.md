---
title: icacls
description: Справочная статья по команде icacls, которая отображает или изменяет избирательные списки управления доступом (DACL) для указанных файлов и применяет сохраненные списки DACL к файлам в указанных каталогах.
ms.topic: reference
ms.assetid: 403edfcc-328a-479d-b641-80c290ccf73e
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 08/21/2018
ms.openlocfilehash: 7b6d045b26adcbee31447e950533b1013288a910
ms.sourcegitcommit: 96d46c702e7a9c3a321bbbb5284f73911c7baa3c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/27/2020
ms.locfileid: "89038022"
---
# <a name="icacls"></a>icacls

Отображает или изменяет избирательные списки управления доступом (DACL) для указанных файлов и применяет сохраненные списки DACL к файлам в указанных каталогах.

> [!NOTE]
> Эта команда заменяет устаревшую [команду cacls](cacls.md).

## <a name="syntax"></a>Синтаксис

```
icacls <filename> [/grant[:r] <sid>:<perm>[...]] [/deny <sid>:<perm>[...]] [/remove[:g|:d]] <sid>[...]] [/t] [/c] [/l] [/q] [/setintegritylevel <Level>:<policy>[...]]
icacls <directory> [/substitute <sidold> <sidnew> [...]] [/restore <aclfile> [/c] [/l] [/q]]
```

### <a name="parameters"></a>Параметры

| Параметр | Описание |
| --------- | ----------- |
| `<filename>` | Указывает файл, для которого должны отображаться списки DACL. |
| `<directory>` | Указывает каталог, в котором должны отображаться списки DACL. |
| /t | Выполняет операцию для всех указанных файлов в текущем каталоге и его подкаталогах. |
| /C | Возобновляет операцию, несмотря на любые ошибки в файлах. Сообщения об ошибках по-прежнему будут отображаться. |
| /l | Выполняет операцию с символической ссылкой вместо ее назначения. |
| /q | Подавляет сообщения об успешном выполнении. |
| [/Save `<ACLfile>` /t ключей /l [/q]] | Сохраняет списки DACL для всех соответствующих файлов в *аклфиле* для последующего использования с параметром **/RESTORE**. |
| [/сетовнер `<username>` /t ключей /l [/q]] | Изменяет владельца всех соответствующих файлов на указанного пользователя. |
| [/финдсид `<sid>` /t ключей /l [/q]] | Находит все совпадающие файлы, содержащие DACL, явно упомянутый с указанным идентификатором безопасности (SID). |
| [/Verify [/t] [/c] [/l] [/q]] | Находит все файлы со списками управления доступом, которые не являются каноническими или имеют длину, несовместимую с счетчиками ACE (запись контроля доступа). |
| [/Reset [/t] [/c] [/l] [/q]] | Заменяет списки ACL на унаследованные списки ACL по умолчанию для всех соответствующих файлов. |
| [/Грант [: r] \<sid> : <perm> [...]] | Предоставляет указанные права доступа пользователя. Разрешения заменяют ранее предоставленные явные разрешения.<p>Отсутствие добавления **: r**означает, что разрешения добавляются к любым ранее предоставленным явным разрешениям. |
| [/Дени \<sid> : <perm> [...]] | Явно запрещает указанные права доступа пользователя. Для указанных разрешений добавляется явный ACE Deny, а те же разрешения в любом явном предоставлении удаляются. |
| [/Remove `[:g | :d]]` `<sid>` ; [...] /t ключей /l /q | Удаляет все вхождения указанного идентификатора безопасности из списка DACL. Эта команда также может использовать:<ul><li>**: g** — удаляет все вхождения предоставленных прав на указанный идентификатор безопасности.</li><li>**:d** — удаляет все вхождения отклоненных прав на указанный идентификатор безопасности. |
| [/сетинтегритилевел [(CI)] `<Level>:<Policy>` [...]] | Явно добавляет ACE целостности для всех соответствующих файлов. Уровень можно указать следующим образом:<ul><li>**l** — низкий</li><li>**m**— средний</li><li>**h** — высокий</li></ul>Параметры наследования для ACE целостности могут предшествовать уровню и применены только к каталогам. |
| [/субституте `<sidold> <sidnew>` [...]] | Заменяет существующий SID (*сидолд*) новым идентификатором безопасности (*Сиднев*). Требует использования с `<directory>` параметром. |
| /Restore `<ACLfile>` [/c] [/l] [/q] | Применяет сохраненные списки DACL из `<ACLfile>` к файлам в указанном каталоге. Требует использования с `<directory>` параметром. |
| /инхеританцелевел:`[e | d | r]` | Задает уровень наследования, который может принимать следующие значение:<ul><li>**e** — включение наследования</li><li>**d** — отключение наследования и копирование записей ACE</li><li>**r** — удаляет все унаследованные ACE</li></ul> |

## <a name="remarks"></a>Remarks

- Идентификаторы SID могут быть в виде числовых или понятных имен. Если используется числовая форма, прикреплять символ-шаблон **&#42;** к началу идентификатора SID.

- Эта команда сохраняет канонический порядок записей ACE следующим образом:

    - Явные отказы

    -  Явные гранты

    - Унаследованные отказы

    - Унаследованные гранты

- `<perm>`Параметр — это маска разрешений, которая может быть указана в одной из следующих форм:

    - Последовательность простых прав:

      - **F** — полный доступ

      - **M**— изменение доступа

      - **RX** — доступ для чтения и выполнения

      - **R** — доступ только для чтения

      - **W** — доступ только на запись

    - Список с разделителями-запятыми в скобках для конкретных прав:

      - **D** — удаление

      - **RC** — контроль чтения

      - **WDAC** — запись DAC

      - **WO** — владелец записи

      - **S** — синхронизация

      - Безопасность системы **как** доступа

      - **MA** — максимально допустимый

      - **GR** — универсальное чтение

      - **GW** — универсальная запись

      - **GE** — универсальное выполнение

      - Общедоступная **версия-общий**

      - **RD** -чтение данных или каталога списка

      - **WD** : запись данных и добавление файла

      - **AD** — Добавление данных и Добавление вложенного каталога

      - **Реа** — чтение расширенных атрибутов

      - **ВЕА** — запись расширенных атрибутов

      - **X** -выполнение и обход

      - **Контроллер домена** -Удаление дочернего элемента

      - **RA** -чтение атрибутов

      - Атрибуты записи **WA**

  - Права на наследование могут предшествовать любой `<perm>` форме, и они применяются только к каталогам:

      - **(OI)** — наследование объектов

      - **(CI)** — наследование контейнера

      - **(IO)** — только наследование

      - **(NP)** — не распространять наследование

## <a name="examples"></a>Примеры

Чтобы сохранить списки DACL для всех файлов в каталоге C:\Windows и его подкаталогах в файле Аклфиле, введите:

```
icacls c:\windows\* /save aclfile /t
```

Чтобы восстановить списки DACL для каждого файла в Аклфиле, который существует в каталоге C:\Windows и его подкаталогах, введите:

```
icacls c:\windows\ /restore aclfile
```

Чтобы предоставить пользователю User1 разрешения на удаление и запись DAC в файл с именем Test1, введите:

```
icacls test1 /grant User1:(d,wdac)
```

Чтобы предоставить пользователю, заданному с помощью SID S-1-1-0, разрешения DAC и Write в файл с именем test2, введите:

```
icacls test2 /grant *S-1-1-0:(d,wdac)
```

## <a name="additional-references"></a>Дополнительные ссылки

- [Условные обозначения синтаксиса команд командной строки](command-line-syntax-key.md)
