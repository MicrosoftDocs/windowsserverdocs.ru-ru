---
title: icacls
description: 'Раздел Windows команды для ***- '
ms.custom: na
ms.prod: windows-server-threshold
ms.reviewer: na
ms.suite: na
ms.technology: manage-windows-commands
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: 403edfcc-328a-479d-b641-80c290ccf73e
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 08/21/2018
ms.openlocfilehash: 20b2150b1135467cce43ae23bfdc275a5da22141
ms.sourcegitcommit: 0d0b32c8986ba7db9536e0b8648d4ddf9b03e452
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/17/2019
ms.locfileid: "59852645"
---
# <a name="icacls"></a>icacls



Отображает или изменяет списки управления доступом на уровне пользователей (DACL) на указанных файлов и применяет хранимых DACL к файлам в указанных каталогах.

В разделе [Примеры](#BKMK_examples) показан принцип использования этой команды.

## <a name="syntax"></a>Синтаксис

```
icacls <FileName> [/grant[:r] <Sid>:<Perm>[...]] [/deny <Sid>:<Perm>[...]] [/remove[:g|:d]] <Sid>[...]] [/t] [/c] [/l] [/q] [/setintegritylevel <Level>:<Policy>[...]]
icacls <Directory> [/substitute <SidOld> <SidNew> [...]] [/restore <ACLfile> [/c] [/l] [/q]]
```

## <a name="parameters"></a>Параметры

|Параметр|Описание|
|---------|-----------|
|\<Имя файла >|Указывает файл, для которого необходимо отобразить DACL.|
|\<каталог >|Указывает каталог для которого необходимо отобразить DACL.|
|/t|Выполняет операцию логического сложения всех указанных файлов в текущем каталоге и его подкаталогах.|
|/c|Продолжает выполнять операцию несмотря на любые ошибки файл. По-прежнему будут отображаться сообщения об ошибках.|
|/l|Выполняет операцию логического сложения символьную ссылку, и его назначения.|
|/q|Подавляет сообщения об успешном выполнении.|
|[/ Сохранение \<ACLfile > [/ t] [/ c] [/ l] [/ q]]|Сохраняет списки DACL для всех файлов в *ACLfile* для последующего использования с **или восстановить их**.|
|[/ setowner \<имя пользователя > / / [c] [/ l] [/ q] [t]]|Изменяет владельца все соответствующие файлы для указанного пользователя.|
|[/ findSID \<Sid > [/ t] [/ c] [/ l] [/ q]]|Находит все соответствующие файлы, которые содержат список DACL, явно отметить идентификатор безопасности (SID).|
|[/ проверки / [t] [/ c] [/ l] [/ q]]|Находит все файлы со списками управления доступом, которые не каноническую или иметь длину согласована с учетом количества ACE (записи управления доступом).|
|[/ сброса / [t] [/ c] [/ l] [/ q]]|Заменяет списки управления доступом имеет значения по умолчанию наследуется списки управления доступом для всех файлов.|
|[/ предоставить [: r] \<Sid >:<Perm>[...]]|Предоставляет указанные права доступа пользователя. Разрешения заменить ранее предоставил явные разрешения.</br>Без **: r**, будут добавлены к любому явные разрешения, предоставленные ранее разрешения.|
|[/ deny \<Sid >:<Perm>[...]]|Явно запрещает указанному пользователю права доступа. Явно запретить ACE добавляется для указанных выше разрешений и удаляются те же разрешения, в любой предоставления явного разрешения.|
|[/ remove [: g\|: d]] \<Sid > [...]] / [t] [/ c] / [l] [/ q]|Удаляет все вхождения указанного идентификатора безопасности из списка DACL.</br>**: g** удаляет все вхождения права для указанного идентификатора безопасности.</br>**: d** удаляет все вхождения запрещенные права на указанный идентификатор SID.|
|[/ setintegritylevel [(CI)(OI)]\<уровень >:<Policy>[...]]|Явно добавляет все соответствующие файлы целостности ACE. *Уровень* указываются в виде:</br>-   **L**[как]</br>-   **M**[edium]</br>-   **H**[наи]</br>Параметры наследования для обеспечения целостности ACE может предшествовать уровень и применяются только к каталогам.|
|[/ заменить \<SidOld > <SidNew> [...]]|Заменяет существующий идентификатор SID (*SidOld*) с новый идентификатор SID (*SidNew*). Требуется *Directory* параметра.|
|/ восстановление \<ACLfile > / / [l] [/ q] [c]|Применяет хранимых DACL из *ACLfile* в файлы в указанном каталоге. Требуется *Directory* параметра.|
|/inheritancelevel: [e\|d\|r]|Задает уровень наследования: <br>  **e** -позволяет enheritance <br>**d** — отключает наследование и копирует записи ACE <br>**r** — удаляет все наследуемые элементы ACE

## <a name="remarks"></a>Примечания

-   Идентификаторы безопасности может быть в любой форме числовых, так и понятное имя. Если вы используете числовой форме, прикреплять подстановочный знак **&#42;** в начале SID.
-   **icacls** сохраняет Канонический порядок записей ACE как:  
    -   Явные отказов
    -   Явно предоставленных разрешений
    -   Унаследованные отказов
    -   Унаследованные предоставляет
-   *Разрешение* является маску разрешений, который может быть указан в одном из следующих форм:  
    -   Последовательность простые права:

        **F** (полный доступ)

        **M** (изменить доступ)

        **RX** (чтение и выполнение)

        **R** (доступ только для чтения)

        **W** (доступ только для записи)
    -   Список с разделителями запятыми в круглых скобках особых прав:

        **D** (Удалить)

        **Версия-Кандидат** (Контроль чтения)

        **Компоненты WDAC** (запись приложения уровня данных)

        **WO** (Смена владельца)

        **S** (синхронизации)

        **AS** (доступ к системе безопасности)

        **MA** (максимум)

        **GR** (универсальная чтение)

        **GW** (запись)

        **GE** (выполнение)

        **Общедоступная версия** (универсальная все)

        **К удаленному рабочему Столу** (чтение данных и получения списка каталогов)

        **WD** (запись данных или добавить файл)

        **AD** (append подкаталог/Добавление данных)

        **Доступные** (чтение дополнительных атрибутов)

        **WEA** (запись дополнительных атрибутов)

        **X** (выполнение/перекрестной)

        **Контроллер домена** (удалить дочерний)

        **RA** (чтение атрибутов)

        **WA** (запись атрибутов)
-   Наследование прав могут либо предшествовать *Perm* формы и они применяются только к каталогам:

    **(OI)** : объект наследует

    **(CI)** : наследовать контейнера

    **(ОПЕРАЦИИ ВВОДА-ВЫВОДА)** : только наследование

    **(ИМЕНОВАННЫЕ КАНАЛЫ)** : распространение наследования

## <a name="BKMK_examples"></a>Примеры

Чтобы сохранить список DACL для всех файлов в каталоге C:\Windows и его подкаталогах, в файл ACLFile, введите следующую команду:
```
icacls c:\windows\* /save aclfile /t
```
Чтобы восстановить список DACL для каждого файла в ACLFile, который существует в каталоге C:\Windows и его подкаталогах, введите следующую команду:
```
icacls c:\windows\ /restore aclfile
```
Чтобы предоставить пользователю разрешения на удаление User1 и писать приложения уровня данных в файл с именем «Test1», введите:
```
icacls test1 /grant User1:(d,wdac)
```
Чтобы предоставить пользователю, определяются разрешения Delete идентификаторы SID S-1-1-0 и писать приложения уровня данных в файл с именем «Test2», введите следующую команду:
```
icacls test2 /grant *S-1-1-0:(d,wdac)
```

#### <a name="additional-references"></a>Дополнительная справка

[Ключ синтаксиса командной строки](command-line-syntax-key.md)
