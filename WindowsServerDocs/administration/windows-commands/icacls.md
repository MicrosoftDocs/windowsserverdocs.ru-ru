---
title: icacls
description: Раздел Windows команды для ****-
ms.prod: windows-server
ms.technology: manage-windows-commands
ms.topic: article
ms.assetid: 403edfcc-328a-479d-b641-80c290ccf73e
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 08/21/2018
ms.openlocfilehash: 59d10b9ed681b7e0af120798dde9f200182d67d3
ms.sourcegitcommit: b00d7c8968c4adc8f699dbee694afe6ed36bc9de
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/08/2020
ms.locfileid: "80842267"
---
# <a name="icacls"></a>icacls

Отображает или изменяет избирательные списки управления доступом (DACL) для указанных файлов и применяет сохраненные списки DACL к файлам в указанных каталогах.

В разделе [Примеры](#examples) показан принцип использования этой команды.

## <a name="syntax"></a>Синтаксис

```
icacls <FileName> [/grant[:r] <Sid>:<Perm>[...]] [/deny <Sid>:<Perm>[...]] [/remove[:g|:d]] <Sid>[...]] [/t] [/c] [/l] [/q] [/setintegritylevel <Level>:<Policy>[...]]
icacls <Directory> [/substitute <SidOld> <SidNew> [...]] [/restore <ACLfile> [/c] [/l] [/q]]
```

### <a name="parameters"></a>Параметры

|Параметр|Описание|
|---------|-----------|
|\<имя файла >|Указывает файл, для которого должны отображаться списки DACL.|
|> \<Directory|Указывает каталог, в котором должны отображаться списки DACL.|
|/t|Выполняет операцию для всех указанных файлов в текущем каталоге и его подкаталогах.|
|/c|Возобновляет операцию, несмотря на любые ошибки в файлах. Сообщения об ошибках по-прежнему будут отображаться.|
|/l|Выполняет операцию над символической ссылкой и ее назначением.|
|/q|Подавляет сообщения об успешном выполнении.|
|[/Save \<Аклфиле > [/t] [/c] [/l] [/q]]|Сохраняет списки DACL для всех соответствующих файлов в *аклфиле* для последующего использования с параметром **/RESTORE**.|
|[/сетовнер \<имя_пользователя > [/t] [/c] [/l] [/q]]|Изменяет владельца всех соответствующих файлов на указанного пользователя.|
|[/Финдсид \<SID > [/t] [/c] [/l] [/q]]|Находит все совпадающие файлы, содержащие DACL, явно упомянутый с указанным идентификатором безопасности (SID).|
|[/Verify [/t] [/c] [/l] [/q]]|Находит все файлы со списками управления доступом, которые не являются каноническими или имеют длину, несовместимую с счетчиками ACE (запись контроля доступа).|
|[/Reset [/t] [/c] [/l] [/q]]|Заменяет списки ACL на унаследованные списки ACL по умолчанию для всех соответствующих файлов.|
|[/Грант [: r] \<идентификатор безопасности >:<Perm>[...]]|Предоставляет указанные права доступа пользователя. Разрешения заменяют ранее предоставленные явные разрешения.</br>Без **: r**разрешения добавляются к любым ранее предоставленным явным разрешениям.|
|[/Дени \<SID >:<Perm>[...]]|Явно запрещает указанные права доступа пользователя. Для указанных разрешений добавляется явный ACE Deny, а те же разрешения в любом явном предоставлении удаляются.|
|[/Remove [: g\|:d]] \<SID > [...]] /t ключей /l /q|Удаляет все вхождения указанного идентификатора безопасности из списка DACL.</br>**: g** удаляет все вхождения предоставленных прав на указанный идентификатор безопасности.</br>**:d** удаляет все вхождения отклоненных прав на указанный идентификатор безопасности.|
|[/сетинтегритилевел [(CI)]\<уровня >:<Policy>[...]]|Явно добавляет ACE целостности для всех соответствующих файлов. *Уровень* указан как:</br>-   **L**[что?]</br>-   **M**[едиум]</br>-   **H**[ИГХ]</br>Параметры наследования для ACE целостности могут предшествовать уровню и применены только к каталогам.|
|[/субституте \<Сидолд > <SidNew> [...]]|Заменяет существующий SID (*сидолд*) новым идентификатором безопасности (*Сиднев*). Требуется параметр *каталога* .|
|/Restore \<Аклфиле > [/c] [/l] [/q]|Применяет сохраненные списки DACL из *аклфиле* к файлам в указанном каталоге. Требуется параметр *каталога* .|
|/инхеританцелевел: [e\|d\|r]|Задает уровень наследования: <br>  **e** — включает енхеританце <br>**d** — отключение наследования и копирование записей ACE <br>**r** — удаляет все унаследованные ACE

## <a name="remarks"></a>Примечания

-   Идентификаторы SID могут быть в виде числовых или понятных имен. Если используется числовая форма, прикреплять символ **&#42;** -шаблон к началу идентификатора SID.
-   **icacls** сохраняет канонический порядок записей ACE следующим образом:  
    -   Явные отказы
    -   Явные гранты
    -   Унаследованные отказы
    -   Унаследованные гранты
-   *Разрешение — это* Маска разрешений, которая может быть указана в одной из следующих форм:  
    -   Последовательность простых прав:

        **F** (полный доступ)

        **M** (изменение доступа)

        **RX** (доступ для чтения и выполнения)

        **R** (доступ только для чтения)

        **W** (доступ только на запись)
    -   Список с разделителями-запятыми в скобках для конкретных прав:

        **D** (удаление)

        **RC** (Управление чтением)

        **WDAC** (запись DAC)

        **WO** (запись владельца)

        **S** (синхронизация)

        **Как** (доступ к безопасности системы)

        **MA** (максимально допустимое значение)

        **GR** (общее чтение)

        **GW** (универсальная запись)

        **GE** (универсальное выполнение)

        Общедоступный **(общий** )

        **RD** (чтение данных и каталог списков)

        **WD** (запись данных и добавление файла)

        **AD** (Добавление данных и Добавление вложенного каталога)

        **Реа** (чтение расширенных атрибутов)

        **ВЕА** (запись расширенных атрибутов)

        **X** (выполнение/обход)

        **Контроллер домена** (Удаление дочернего элемента)

        **RA** (чтение атрибутов)

        **WA** (запись атрибутов)
-   Права на наследование могут предшествовать любой форме *разрешений* , и они применяются только к каталогам:

    **(OI)** : наследование объекта

    **(CI)** : наследование контейнера

    **(Операции ввода-вывода)** : только наследование

    **(NP)** : не распространять наследование

## <a name="examples"></a>Примеры

Чтобы сохранить списки DACL для всех файлов в каталоге C:\Windows и его подкаталогах в файле Аклфиле, введите:

```
icacls c:\windows\* /save aclfile /t
```

Чтобы восстановить списки DACL для каждого файла в Аклфиле, который существует в каталоге C:\Windows и его подкаталогах, введите:

```
icacls c:\windows\ /restore aclfile
```

Чтобы предоставить пользователю User1 разрешения на удаление и запись DAC в файл с именем Test1, введите:

```
icacls test1 /grant User1:(d,wdac)
```

Чтобы предоставить пользователю, заданному с помощью SID S-1-1-0, разрешения DAC и Write в файл с именем test2, введите:

```
icacls test2 /grant *S-1-1-0:(d,wdac)
```

## <a name="additional-references"></a>Дополнительные материалы

- [Условные обозначения синтаксиса команд командной строки](command-line-syntax-key.md)
