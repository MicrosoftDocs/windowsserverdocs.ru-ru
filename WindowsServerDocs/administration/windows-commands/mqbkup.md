---
title: mqbkup
description: Раздел Windows команды для ****-
ms.prod: windows-server
ms.technology: manage-windows-commands
ms.topic: article
ms.assetid: 7bdd41c4-75ef-455f-b241-1d64a4c7acf5
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 10/16/2017
ms.openlocfilehash: 5ff6fc2f483bceb99b970cd0c48f56985ecd485b
ms.sourcegitcommit: b00d7c8968c4adc8f699dbee694afe6ed36bc9de
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/08/2020
ms.locfileid: "80839357"
---
# <a name="mqbkup"></a>mqbkup

>Область применения: Windows Server (Semi-Annual Channel), Windows Server 2016, Windows Server 2012 R2, Windows Server 2012

Резервное копирование файлов сообщений MSMQ и параметров реестра на запоминающее устройство и восстановление ранее сохраненных сообщений и параметров.   
Операция резервного копирования и восстановления приведет к прерыванию локальной службы MSMQ. Если служба MSMQ была запущена заранее, она попытается перезапустить службу MSMQ по завершении операции резервного копирования или восстановления. Если служба уже была остановлена перед запуском программы, то перезагрузка службы не выполняется.  
Перед использованием программы архивации и восстановления MSMQ Message необходимо закрыть все локальные приложения, использующие MSMQ.  
## <a name="syntax"></a>Синтаксис  
```  
mqbkup {/b | /r} <folder path_to_storage_device>  
```  
#### <a name="parameters"></a>Параметры  
|Параметр|Описание|  
|-------|--------|  
|/b|Указывает операцию резервного копирования|  
|/r|Указывает операцию восстановления|  
|Папка < path_to_storage\_устройства >|Указывает путь, по которому хранятся файлы сообщений MSMQ и параметры реестра|  
|/?|Отображает справку в командной строке.|  
## <a name="examples"></a><a name=BKMK_Examples></a>Примеров  
Чтобы создать резервную копию всех файлов сообщений MSMQ и параметров реестра и сохранить их в папке *мсмкбкуп* на диске C:.  
```  
mqbkup /b c:\msmqbkup  
```  
Если указанная папка не существует, программа автоматически создаст ее. Если вы решили указать существующую папку, эта папка должна быть пустой. Если указать непустую папку, программа удалит каждый файл и вложенную папку, содержащиеся в ней. В этом случае вам будет предложено предоставить разрешение на удаление существующих файлов и вложенных папок. Параметр **/y** можно использовать, чтобы указать, что вы соглашаетесь с удалением всех существующих файлов и вложенных папок в указанной папке.  
Чтобы удалить все файлы и вложенные папки в папке *олдбкуп* на диске C: и сохранить файлы сообщений MSMQ и параметры реестра в этой папке.  
```  
mqbkup /b /y c:\oldbkup  
```  
Чтобы восстановить сообщения и параметры реестра MSMQ, выполните следующие действия.  
```  
mqbkup /r c:\msmqbkup  
```  
Расположение папок, используемых для хранения файлов сообщений MSMQ, хранится в реестре. Таким же программа будет восстанавливать файлы сообщений MSMQ в папки, указанные в реестре, а не в папки хранилища, используемые перед операцией восстановления. Если папки, указанные в реестре, не существуют, операция восстановления автоматически создаст их. Если каталоги папок существуют и не пусты, программа предложит вам разрешение на удаление текущего содержимого этих папок.  
## <a name="additional-references"></a>Дополнительные материалы  
-   - [Условные обозначения синтаксиса команд командной строки](command-line-syntax-key.md)  
