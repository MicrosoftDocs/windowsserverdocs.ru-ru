---
title: mqbkup
description: 'Раздел Windows команды для ***- '
ms.custom: na
ms.prod: windows-server-threshold
ms.reviewer: na
ms.suite: na
ms.technology: manage-windows-commands
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: 7bdd41c4-75ef-455f-b241-1d64a4c7acf5
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 10/16/2017
ms.openlocfilehash: a809bfc788ba25afab280e80e5c6f0dc9c70dc86
ms.sourcegitcommit: 0d0b32c8986ba7db9536e0b8648d4ddf9b03e452
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/17/2019
ms.locfileid: "59842905"
---
# <a name="mqbkup"></a>mqbkup

>Область применения. Windows Server (полугодовой канал), Windows Server 2016, Windows Server 2012 R2, Windows Server 2012

Создает резервные копии файлов сообщений MSMQ и реестра параметры на запоминающее устройство и восстанавливает ранее сохраненным сообщения и параметры.   
Резервное копирование и восстановление будет остановка локальной службы MSMQ. Если заранее запуска службы MSMQ, программа попытается перезапустить службу MSMQ в конце резервного копирования или восстановления. Если служба уже остановлена перед ее запуском, чтобы перезапустить службу попыток.  
Перед использованием программы сообщения MSMQ резервного копирования и восстановления необходимо закрыть все локальные приложения, которые используют MSMQ.  
## <a name="syntax"></a>Синтаксис  
```  
mqbkup {/b | /r} <folder path_to_storage_device>  
```  
### <a name="parameters"></a>Параметры  
|Параметр|Описание|  
|-------|--------|  
|/b|Указывает операции резервного копирования|  
|/r|Указывает операции восстановления|  
|<folder path_to_storage\_device>|Указывает путь, где хранятся файлы сообщений MSMQ и параметры реестра|  
|/?|Отображение справки в командной строке.|  
## <a name="BKMK_Examples"></a>Примеры  
Резервное копирование всех файлов сообщений MSMQ и параметры реестра и их хранения *Msmqbkup* папку на диске C:.  
```  
mqbkup /b c:\msmqbkup  
```  
Если указанная папка не существует, программа автоматически создаст. Если вы решили указать существующую папку, эту папку должен быть пустым. При указании папки пустым, программа удалит каждого файла и вложенной папки, содержащиеся в нем. В этом случае вам будет предложено предоставить разрешение, чтобы удалить существующие файлы и вложенные папки. Можно использовать **/y** параметр, чтобы указать, что вы соглашаетесь заранее с удалением всех существующих файлов и вложенных папок в указанной папке.  
Чтобы удалить все файлы и вложенные папки в *Oldbkup* папку на диске C: и хранилище MSMQ сообщение файлы и параметры реестра в этой папке.  
```  
mqbkup /b /y c:\oldbkup  
```  
Чтобы восстановить сообщения MSMQ и параметры реестра:  
```  
mqbkup /r c:\msmqbkup  
```  
Расположение папки для хранения файлов сообщений MSMQ, хранятся в реестре. Таким образом программа восстановит файлы сообщений MSMQ для папки, указанные в реестре, а не папки хранилища, используемые перед операцией восстановления. Если папки, указанные в реестре не существует, операция восстановления автоматически создаст их. Если каталоги папки существует и не пусты, программа предложит для разрешения на удаление текущее содержимое этих папок.  
## <a name="additional-references"></a>Дополнительные ссылки  
-   [Ключ синтаксиса командной строки](command-line-syntax-key.md)  
