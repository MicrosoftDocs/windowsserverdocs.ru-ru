---
title: mqbkup
description: 'Раздел Windows команды для ****- '
ms.custom: na
ms.prod: windows-server
ms.reviewer: na
ms.suite: na
ms.technology: manage-windows-commands
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: 7bdd41c4-75ef-455f-b241-1d64a4c7acf5
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 10/16/2017
ms.openlocfilehash: 66783e0bbfe5c82971e14fd05e913d485485dc6f
ms.sourcegitcommit: 6aff3d88ff22ea141a6ea6572a5ad8dd6321f199
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/27/2019
ms.locfileid: "71373513"
---
# <a name="mqbkup"></a>mqbkup

>Область применения. Windows Server (половина ежегодного канала), Windows Server 2016, Windows Server 2012 R2, Windows Server 2012

Резервное копирование файлов сообщений MSMQ и параметров реестра на запоминающее устройство и восстановление ранее сохраненных сообщений и параметров.   
Операция резервного копирования и восстановления приведет к прерыванию локальной службы MSMQ. Если служба MSMQ была запущена заранее, она попытается перезапустить службу MSMQ по завершении операции резервного копирования или восстановления. Если служба уже была остановлена перед запуском программы, то перезагрузка службы не выполняется.  
Перед использованием программы архивации и восстановления MSMQ Message необходимо закрыть все локальные приложения, использующие MSMQ.  
## <a name="syntax"></a>Синтаксис  
```  
mqbkup {/b | /r} <folder path_to_storage_device>  
```  
### <a name="parameters"></a>Параметры  
|Параметр|Описание|  
|-------|--------|  
|b|Указывает операцию резервного копирования|  
|/r|Указывает операцию восстановления|  
|< папка path_to_storage @ no__t-0device >|Указывает путь, по которому хранятся файлы сообщений MSMQ и параметры реестра|  
|/?|Отображение справки в командной строке.|  
## <a name="BKMK_Examples"></a>Примеров  
Чтобы создать резервную копию всех файлов сообщений MSMQ и параметров реестра и сохранить их в папке *мсмкбкуп* на диске C:.  
```  
mqbkup /b c:\msmqbkup  
```  
Если указанная папка не существует, программа автоматически создаст ее. Если вы решили указать существующую папку, эта папка должна быть пустой. Если указать непустую папку, программа удалит каждый файл и вложенную папку, содержащиеся в ней. В этом случае вам будет предложено предоставить разрешение на удаление существующих файлов и вложенных папок. Параметр **/y** можно использовать, чтобы указать, что вы соглашаетесь с удалением всех существующих файлов и вложенных папок в указанной папке.  
Чтобы удалить все файлы и вложенные папки в папке *олдбкуп* на диске C: и сохранить файлы сообщений MSMQ и параметры реестра в этой папке.  
```  
mqbkup /b /y c:\oldbkup  
```  
Чтобы восстановить сообщения и параметры реестра MSMQ, выполните следующие действия.  
```  
mqbkup /r c:\msmqbkup  
```  
Расположение папок, используемых для хранения файлов сообщений MSMQ, хранится в реестре. Таким же программа будет восстанавливать файлы сообщений MSMQ в папки, указанные в реестре, а не в папки хранилища, используемые перед операцией восстановления. Если папки, указанные в реестре, не существуют, операция восстановления автоматически создаст их. Если каталоги папок существуют и не пусты, программа предложит вам разрешение на удаление текущего содержимого этих папок.  
## <a name="additional-references"></a>Дополнительные ссылки  
-   [Условные обозначения синтаксиса команд командной строки](command-line-syntax-key.md)  
