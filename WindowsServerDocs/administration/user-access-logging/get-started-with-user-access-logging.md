---
title: Приступая к работе с журналом доступа пользователей
desctription: Describes the User Access Logging feature and how to start using it.
ms.topic: article
ms.assetid: 5c395b8b-3b35-4042-b9cc-07e438f86d50
author: brentfor
ms.author: brentf
manager: mtillman
ms.date: 10/16/2017
ms.openlocfilehash: 24471aca151a59306e8bf51119232f08dacdc606
ms.sourcegitcommit: db2d46842c68813d043738d6523f13d8454fc972
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/10/2020
ms.locfileid: "89628151"
---
# <a name="get-started-with-user-access-logging"></a>Приступая к работе с журналом доступа пользователей

>Область применения. Windows Server (Semi-Annual Channel), Windows Server 2016, Windows Server 2012 R2, Windows Server 2012

Ведение журнала доступа пользователей (UAL) — это функция в Windows Server, которая собирает данные об использовании клиентов по ролям и продуктам на локальном сервере. Он помогает администраторам Windows Server количественно определить запросы от клиентских компьютеров для ролей и служб на локальном сервере.

UAL устанавливается и включается по умолчанию и собирает данные практически в реальном времени. Выполнение настройки администратором не требуется (хотя UAL можно отключать и включать). Дополнительные сведения см. в разделе [Управление ведением журнала доступа пользователей](Manage-User-Access-Logging.md). Служба ведения журнала доступа пользователей объединяет данные об использовании клиентов по ролям и продуктам в файлы локальной базы данных.  ИТ-администраторы могут затем использовать инструментарий управления Windows (WMI) или командлеты Windows PowerShell для получения данных о количестве и экземплярах по роли сервера (или по программному продукту), по пользователю, устройству, локальному серверу и дате.

> [!NOTE]
> Служба UAL поддерживает [набор средств оценки и планирования Майкрософт](https://go.microsoft.com/fwlink/?LinkID=111000).

## <a name="practical-applications"></a><a name="BKMK_APP"></a>Практическое применение
UAL выполняет статистическое вычисление уникальных событий клиентского устройства и запросов пользователей, вошедших в локальную базу данных. Доступ к этим записям (с помощью запроса администратора сервера) позволяет получать сведения о количестве и экземплярах по роли сервера, пользователю, устройству, локальному серверу и дате.  Кроме того, UAL был расширен, чтобы позволить разработчикам программного обеспечения сторонних разработчиков выполнять инструментирование событий UAL, которые должны быть объединены в Windows Server.

UAL может выполнять следующие задачи:

-   Определение количества клиентских запросов пользователя для локальных физических или виртуальных серверов.

-   Определение количества клиентских запросов пользователя для установленных программных продуктов на локальном физическом или виртуальном сервере.

-   Получение данных о локальном сервере под управлением Hyper-V для определения периодов высокой и низкой частоты обращений к виртуальному компьютеру Hyper-V.

-   Получение данных UAL с нескольких удаленных серверов.

Кроме того, разработчики программного обеспечения могут выполнять инструментирование событий UAL, которые затем могут быть объединены и извлечены с помощью WMI и интерфейсов Windows PowerShell.

UAL поддерживает следующие службы и роли сервера:

-   Службы сертификатов Active Directory (AD CS)

-   Службы управления правами Active Directory (AD RMS)

-   BranchCache

-   Служба доменных имен (DNS)

    > [!NOTE]
    > Служба UAL собирает данные DNS каждые 24 часа. Для этого сценария предусмотрен отдельный командлет UAL.

-   Протокол DHCP

-   Факс-сервер

-   Файловые службы

-   FTP-сервер

-   Hyper-V

    > [!NOTE]
    > Служба UAL собирает данные Hyper-V каждые 24 часа. Для этого сценария предусмотрен отдельный командлет UAL.

-   Веб-сервер (IIS)

    > [!WARNING]
    > Для использования UAL со службами IIS необходимо использовать iisual.exe. Дополнительные сведения см. в разделе [Анализ данных о клиентском использовании с помощью ведения журнала доступа пользователей служб IIS](https://www.iis.net/learn/manage/configuring-security/analyzing-client-usage-data-with-iis-user-access-logging).

-   Службы очереди сообщений Майкрософт (MSMQ)

-   Network Policy and Access Services

-   Службы печати и документов

-   Служба маршрутизации и удаленного доступа (RRAS)

-   Службы развертывания Windows (WDS)

-   Службы Windows Server Update Services (WSUS)

> [!IMPORTANT]
> Службу UAL не рекомендуется использовать на серверах, которые подключены непосредственно к Интернету, таких как веб-серверы в адресном пространстве, доступном из Интернета, или в тех случаях, когда предельно высокая производительность является основной функцией сервера (например, в средах с рабочими нагрузками высокопроизводительных вычислений). В основном это решение предназначено для малых, средних и корпоративных интрасетей, в которых предполагается наличие большого объема данных, но не так интенсивно, как развертывания, обслуживающие объем трафика в Интернете на регулярной основе.

## <a name="important-functionality"></a><a name="BKMK_NEW"></a>Важные функции
Ниже перечислены основные функции ведения журнала доступа пользователей и указано их потенциальное применение.

|Функциональность|Значение|
|-----------------|---------|
|Сбор и статистическая обработка данных событий запросов клиента в режиме, близком к реальному времени.|Можно сохранить данные за период до трех лет. **Важно.** Администраторам необходимо обеспечить соответствие собираемых данных и сроку хранения данных согласно политике конфиденциальности Организации и местным нормативным требованиям.|
|Запрос UAL с помощью интерфейсов WMI или Windows PowerShell для получения данных клиентских запросов на локальном или удаленном сервере.|Служба UAL обеспечивает единое представление текущих данных об использовании. Администраторы серверов и предприятий могут получать эти данные и оптимизировать использование корпоративных лицензий на программное обеспечение, сотрудничая с администрацией.|
|Включен по умолчанию.|Администраторам серверов не требуется каким-либо образом настраивать этот компонент для получения доступа ко всем основным функциональным возможностям и обеспечения их правильной работы.|

## <a name="data-logged-with-ual"></a>Данные, заносимые в журнал с помощью UAL
Приведенные ниже данные о пользователях записаны с помощью UAL.

|Данные|Описание|
|--------|---------------|
|**UserName**|Имя пользователя на стороне клиента, сопровождающее записи UAL, полученные из установленных ролей и продуктов, если это применимо.|
|**Число действий**|Количество обращений отдельного пользователя к роли или службе.|
|**FirstSeen**|Дата и время первого доступа пользователя к роли или службе.|
|**LastSeen**|Дата и время последнего доступа пользователя к роли или службе.|
|**ProductName**|Имя родительского программного продукта (например, Windows), предоставляющего данные UAL.|
|**RoleGUID**|Идентификатор GUID, назначенный или зарегистрированный UAL, представляющий роль сервера или установленный продукт.|
|**RoleName**|Имя роли, компонента или подпродукта, предоставляющего данные UAL. Оно также связано с компонентами ProductName и RoleGUID.|
|**TenantIdentifier**|Уникальный код GUID для клиента установленной роли или продукта, сопровождающий данные UAL, если применимо.|

Приведенные ниже данные об устройствах записаны с помощью UAL.

|Данные|Описание|
|--------|---------------|
|**IPAddress**|IP-адрес клиентского устройства, использующегося для доступа к роли или службе.|
|**Число действий**|Количество обращений отдельного устройства к роли или службе.|
|**FirstSeen**|Дата и время, когда IP-адрес первый раз использовался для доступа к роли или службе.|
|**LastSeen**|Дата и время, когда IP-адрес последний раз использовался для доступа к роли или службе.|
|**ProductName**|Имя родительского программного продукта (например, Windows), предоставляющего данные UAL.|
|**RoleGUID**|Идентификатор GUID, назначенный или зарегистрированный UAL, представляющий роль сервера или установленный продукт.|
|**RoleName**|Имя роли, компонента или подпродукта, предоставляющего данные UAL. Оно также связано с компонентами ProductName и RoleGUID.|
|**TenantIdentifier**|Уникальный код GUID для клиента установленной роли или продукта, сопровождающий данные UAL, если применимо.|

## <a name="software-requirements"></a><a name="BKMK_SOFT"></a>Требования к программному обеспечению
UAL можно использовать на любом компьютере под управлением версий Windows Server после Windows Server 2012.

## <a name="additional-references"></a>Дополнительные ссылки
[Ведение журнала доступа пользователей](/previous-versions/windows/desktop/ual/user-access-logging) в сети MSDN.
[Управление ведением журнала доступа пользователей](Manage-User-Access-Logging.md)