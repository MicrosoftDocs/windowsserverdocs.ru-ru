---
title: Поддержка экспресс-доставки обновлений (независимые поставщики программного обеспечения)
description: Раздел службы Windows Server Update Service (WSUS) — как независимым поставщикам по (ISV) можно настроить доставку обновления Express, с помощью WSUS
ms.prod: windows-server-threshold
ms.reviewer: na
ms.suite: na
ms.technology: manage-wsus
ms.tgt_pltfrm: na
ms.topic: get-started article
author: sakitong
ms.author: coreyp
manager: lizapo
ms.date: 10/16/2017
ms.openlocfilehash: 5f2a99bb69fd41c05013788187838f8fceb5f69a
ms.sourcegitcommit: afb0602767de64a76aaf9ce6a60d2f0e78efb78b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/20/2019
ms.locfileid: "67280452"
---
# <a name="express-update-delivery-isv-support"></a>Поддержка экспресс-доставки обновлений (независимые поставщики программного обеспечения)

>Область применения. Windows 10, Windows Server 2016

Загружаемые обновления Windows 10 могут быть большими, так как каждый пакет содержит все ранее выпущенные исправления, чтобы обеспечить согласованность и простота.  

Начиная с версии 7, Windows не сможет уменьшить размер загрузки обновлений Windows с помощью функции [Express](https://technet.microsoft.com/library/cc708456(v=ws.10).aspx#Anchor_2), и несмотря на то, что по умолчанию потребительских устройств поддерживает его, устройствах Windows 10 enterprise требуется Windows Server Update Services (WSUS), чтобы воспользоваться преимуществами Express.

## <a name="how-microsoft-supports-express"></a>Как корпорация Майкрософт поддерживает функцию "Экспресс"

- **Express на автономных служб WSUS**

    Express update доставки уже [доступны на всех поддерживаемых версий WSUS](https://technet.microsoft.com/library/cc708456(v=ws.10).aspx).

- **Express на устройствах, подключенных непосредственно к центру обновления Windows** 

    Потребительские устройства поддерживает скачивание Express: использовании клиента Windows Update (WU) для сканирования, загрузки и установки обновлений. Во время фазы загрузки клиент Центра обновления Windows запрашивает пакетов Express и загружает соответствующие байтовых диапазонов.

-  **Корпоративные устройства, управляемые с помощью [Центра обновления Windows Update для бизнеса](https://technet.microsoft.com/itpro/windows/manage/waas-manage-updates-wufb)** также поддерживают доставку обновлений с помощью функции Express без изменения конфигурации.

## <a name="how-isvs-can-take-advantage-of-express"></a>Как независимые поставщики программного обеспечения могут воспользоваться преимуществами Express

Независимые поставщики программного обеспечения можно использовать службы WSUS и клиент Центра обновления Windows для поддержки доставки обновления Express. Корпорация Майкрософт рекомендует следующие три шага, каждое из которых рассматривается более подробно в следующих разделах:

1.  [**Настройка служб WSUS**](#BKMK_1)

    Необходим сервер WSUS для сканирования & синхронизацию обновлений (Дополнительные сведения можно найти [здесь](https://technet.microsoft.com/library/dn800972(v=ws.11).aspx))

2.  [**Укажите и заполнения кэша файла независимых поставщиков программного обеспечения**](#BKMK_2)

    Кэш файлов независимых поставщиков программного обеспечения рекомендуется использовать для размещения содержимого обновления, которое включает обновления CAB-файлов (CAB-файлы) и быстрой пакеты (файлы .psf).

3.  [**Настройка агента клиента независимого поставщика программного обеспечения для направления операций клиента Центра обновления Windows**](#BKMK_3)

>[!NOTE]
>Требуется выпуск накопительного пакета обновления для Windows 10 версии 1607 в (или после) января 2017 г. ([KB3213986 (ОС сборки 14393.693)](https://support.microsoft.com/en-us/help/4009938/january-10-2017-kb3213986-os-build-14393-693) должны быть установлены.
    
   - Независимых поставщиков программного обеспечения агент клиента определяет, какие обновления для утверждения и после загрузки и установки обновлений
   - Клиент центра обновления Windows определяет диапазонов байтов для загрузки и инициирует запрос на загрузку

### <a name="BKMK_1"></a>Шаг 1. Настройка служб WSUS

WSUS служит интерфейсом к центру обновления Windows и управляет ими все метаданные, описывающие Express пакеты, которые необходимо загрузить. Если необходимо развернуть, см. в разделе [ **Обзор из Windows Server Update Services 3.0 SP2**](https://technet.microsoft.com/library/dd939931(v=ws.10).aspx). После развертывания WSUS первоочередным соображением является ли хранить содержимое обновления локально на сервере WSUS. При настройке служб WSUS, мы рекомендуем не хранить обновления локально. Предполагается, что вы уже установлено программное обеспечение, направляя развертывания этих пакетов в среде. Дополнительные сведения о настройке WSUS локального хранилища, см. в разделе [ **Determine Where to Store обновлений**](https://technet.microsoft.com/library/cc720494(v=ws.10).aspx).

### <a name="BKMK_2"></a>Шаг 2. Укажите и заполнения кэша файла независимых поставщиков программного обеспечения 

#### <a name="specify-the-isv-file-cache"></a>Указать кэш файловой независимых поставщиков программного обеспечения

Новые параметры групповой политики и управления мобильными устройствами (MDM) на стороне клиента, описанную в [ **справочнике поставщиков служб конфигурации** ](https://msdn.microsoft.com/windows/hardware/commercialize/customize/mdm/configuration-service-provider-reference) определяют расположение кэша файлов для независимых поставщиков программного обеспечения.

| **Name**                                              | **Описание**                                                                                                                                                      |
|-------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Настройка альтернативного расположения загрузки обновлений. | Указывает альтернативный интрасети сервер для обновления узлов из центра обновления Майкрософт. Затем можно использовать эту службу обновления для автоматического обновления компьютеров в сети |

При настройке альтернативного скачивания расположение кэша файлов независимых поставщиков программного обеспечения можно двумя способами:

1. **Укажите имя узла сервера независимого поставщика программного обеспечения HTTP**, это файловый кэш независимых поставщиков программного обеспечения
    
    Этот подход настраивает клиента Центра обновления Windows, выполняющего запросы на загрузку HTTP-сервер, указанный в политике

2. **Укажите localhost**
 
    Этот подход настраивает клиента Центра обновления Windows, выполняющего запросы на загрузку для localhost. Это позволит агенту клиента независимого поставщика программного обеспечения для обработки этих запросов и маршрут, чтобы выполнить запрос загрузки соответствующим образом.

> [!IMPORTANT]
> Кэш файлов независимых поставщиков программного обеспечения требуется следующее:                                                          
> - Сервер должен быть совместимым в соответствии с требованиями RFC HTTP 1.1: <http://www.w3.org/Protocols/rfc2616/rfc2616.html>                                                                                                                                                                
> В частности веб-сервер должен поддерживать                                                                                                                                                                                                                                       [ **HEAD** ](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html) и [ **получить** ](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.htm) запросов<br>                                                                                                                                                                                                                                                                                                  -Запросы partial диапазонов<br>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   Keep-alive<br>                                                                                                                                                                                                                                                                                                                                                                                                                            — Не используйте «Transfer-Encoding: chunked»                                                                                                 

#### <a name="populate-the-isv-file-cache"></a>Заполнение кэша файла независимых поставщиков программного обеспечения

Файлы, связанные с обновлениями, должны быть установлены на управляемых клиентов нужно заполнить кэш файлов независимых поставщиков программного обеспечения. 

**Для заполнения кэша файла независимых поставщиков программного обеспечения:**

1. Используйте [API-интерфейсы служб WSUS](https://msdn.microsoft.com/library/windows/desktop/microsoft.updateservices.administration.updatefile(v=vs.85).aspx) для доступа к пути к файлу и имя файла для службы Центра обновления Майкрософт обновления.

    Метаданные каждого обновления на сервере WSUS содержит путь к файлу и имя файла в центре обновления Майкрософт обновления следующим образом (имя узла центра обновления Майкрософт в полужирным шрифтом, за которым следует путь к файлу и имя файла): **<http://download.windowsupdate.com>** /c/msdownload/обновления / Software/updt/2016/09/windows10.0-kb3195781-x64_0c06079bccc35cba35a48bd2b1ec46f818bd2e74.MSU

2. Загрузить файлы из центра обновления Майкрософт и сохраните их в кэш файлов независимых поставщиков программного обеспечения, с помощью одного из этих двух методов: 

   - Файлы Store, с помощью **же папку, в службе Центра обновления Майкрософт**

   - Файлы Store, с помощью **путь к папке, определяемые независимых поставщиков программного обеспечения**

     У HTTP-сервер (или localhost) перенаправление **HTTP GET** запросы, которые ссылаются на Центр обновления Майкрософт путь и имя папки, в расположение файла независимых поставщиков программного обеспечения.

### <a name="BKMK_3"></a>Шаг 3. Настройка агента клиента независимого поставщика программного обеспечения для направления операций клиента Центра обновления Windows

Агент клиента независимых поставщиков программного обеспечения управляет загрузки и установки утвержденных обновлений, используя следующий рекомендуемый рабочий процесс:

1.  Агент клиента независимых поставщиков программного обеспечения вызывает клиент Центра обновления Windows для проверки на сервере WSUS

2.  Сканирование возвращает набор применимых обновлений для клиента Центра обновления Windows

3.  Независимых поставщиков программного обеспечения клиент определяет, какие обновления требуется утвердить, загрузки и установки

4.  Независимых поставщиков программного обеспечения клиента агента вызовы WU клиенту загружать утвержденные обновления

5.  После скачивания обновлений агента клиента независимых поставщиков программного обеспечения вызывает клиент Центра обновления Windows для установки утвержденных обновлений

См. в разделе [поиск, загрузка и установка обновлений](https://msdn.microsoft.com/library/windows/desktop/aa387102(v=vs.85).aspx) Дополнительные сведения об использовании клиента Центра обновления Windows для сканирования, загрузки и установки обновлений.

### <a name="download-workflow-options"></a>Параметры рабочего процесса загрузки

Ниже приведены два иллюстрации варианты загрузки рабочего процесса из файла кэша независимых поставщиков программного обеспечения.

![Рабочий процесс 1](../../media/express-update-delivery-isv-support/image1.png)

![Рабочий процесс 2](../../media/express-update-delivery-isv-support/image2.png)
### <a name="how-express-download-works"></a>Как работает загрузка Express

- Для обновления операционной системы, которая поддерживает функцию Express, существуют две версии файла полезных данных, хранящихся в службе:

  - **Полную версию** — по существу заменяя локальные версии двоичных файлов обновления

  - **Экспресс-версии** --содержащий изменения, необходимые для исправления существующие двоичные файлы на устройстве. 

    В метаданных обновления, загруженной в клиент как часть этапа проверки указаны ссылки на полную версию и версию Express. 

    **Быстрая загрузка работает следующим образом:**

    Клиент центра обновления Windows будет пытаться загрузить Express во-первых, а в некоторых ситуациях fall обратно в полной версии при необходимости (например, если использования прокси-сервера, который не поддерживает запросы диапазонов байтов).

  1. Когда клиент Центра обновления Windows инициирует скачивание Express **клиент Центра обновления Windows сначала загружает заглушку**, который является частью пакета Express.

  2. **Клиент центра обновления Windows передает заглушка в установщик Windows**, который использует заглушки для локальных данных инвентаризации, сравнение дельт файла на устройстве с необходимые для получения до последней версии файла предлагается.

  3. **Установщика Windows, затем запрашивает клиент Центра обновления Windows для загрузки диапазоны** которого были определены как требуется.

  4. **Клиент центра обновления Windows загружает эти диапазоны и передает их в установщик Windows**, который применяется диапазоны, а затем определяет, требуются ли дополнительные диапазоны адресов. Это повторяется, пока установщик Windows сообщает клиенту центра обновления Windows, что были загружены все необходимые диапазоны.

  На этом этапе скачивание завершено, и обновления готовы к установке.

### <a name="how-delivery-optimization-reduces-bandwidth-consumption"></a>Способ оптимизации доставки снижает потребление пропускной способности

Оптимизация доставки (DO) — это самоорганизующаяся решение распределенного кэша, для предприятий, которым требуется сократить использование пропускной способности для обновления операционной системы, обновления операционной системы и приложений. Позволяет клиентам загружать эти элементы из альтернативных источников (например, другие одноранговые узлы в сети) в сочетании с указанным загрузок (независимых поставщиков программного обеспечения кэша файлов в этом сценарии).

По умолчанию в Windows 10 Корпоративная и для образовательных учреждений позволяющую peer-to-peer передавать данные только в сети организации, но можно настроить по-разному с помощью групповой политики и параметры в системе управления мобильными устройствами.

Ссылаться на [Настройка доставки оптимизации для обновлений Windows 10](https://technet.microsoft.com/itpro/windows/manage/waas-delivery-optimization) Дополнительные сведения о.
