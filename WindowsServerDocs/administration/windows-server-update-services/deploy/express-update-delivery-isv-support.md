---
title: Поддержка экспресс-доставки обновлений (независимые поставщики программного обеспечения)
description: Раздел "Служба обновления Windows Server (WSUS)". как независимые поставщики программного обеспечения могут настраивать выпуск Express Update с помощью WSUS
ms.prod: windows-server
ms.reviewer: na
ms.suite: na
ms.technology: manage-wsus
ms.tgt_pltfrm: na
ms.topic: get-started article
author: sakitong
ms.author: coreyp
manager: lizapo
ms.date: 10/16/2017
ms.openlocfilehash: a4880a1a66d9c722cfda9e194c4eff38c5058674
ms.sourcegitcommit: 6aff3d88ff22ea141a6ea6572a5ad8dd6321f199
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/27/2019
ms.locfileid: "71361720"
---
# <a name="express-update-delivery-isv-support"></a>Поддержка экспресс-доставки обновлений (независимые поставщики программного обеспечения)

>Область применения. Windows 10, Windows Server 2016

Загрузка обновлений Windows 10 может быть большой, поскольку каждый пакет содержит все ранее выпущенные исправления для обеспечения согласованности и простоты.  

Начиная с версии 7, Windows может уменьшить размер загружаемых файлов Центр обновления Windows с помощью функции [Express](https://technet.microsoft.com/library/cc708456(v=ws.10).aspx#Anchor_2), и хотя потребительские устройства поддерживают его по умолчанию, устройствам Windows 10 enterprise требуется Windows Server Update Services (WSUS) Преимущества Express.

## <a name="how-microsoft-supports-express"></a>Как корпорация Майкрософт поддерживает функцию "Экспресс"

- **Автономная версия Express на WSUS**

    Доставка Express Update уже [доступна во всех поддерживаемых версиях WSUS](https://technet.microsoft.com/library/cc708456(v=ws.10).aspx).

- **Express на устройствах, подключенных непосредственно к Центр обновления Windows** 

    Потребительские устройства поддерживают Экспресс-загрузку: они используют клиент Центр обновления Windows (WU) для сканирования, загрузки и установки обновлений. На этапе загрузки клиент WU запрашивает Экспресс пакеты и скачивает соответствующие диапазоны байтов.

-  **Корпоративные устройства, управляемые с помощью [Центра обновления Windows Update для бизнеса](https://technet.microsoft.com/itpro/windows/manage/waas-manage-updates-wufb)** также поддерживают доставку обновлений с помощью функции Express без изменения конфигурации.

## <a name="how-isvs-can-take-advantage-of-express"></a>Как независимые поставщики программного обеспечения могут воспользоваться преимуществами Express

Независимые поставщики программного обеспечения могут использовать WSUS и клиент WU для поддержки доставки Express Update. Корпорация Майкрософт рекомендует следующие три шага, которые подробно обсуждаются в следующих разделах:

1.  [**Настройка WSUS**](#BKMK_1)

    Сервер WSUS необходим для сканирования & синхронизации обновлений (Дополнительные сведения можно найти [здесь](https://technet.microsoft.com/library/dn800972(v=ws.11).aspx)).

2.  [**Указание и заполнение файлового кэша ISV**](#BKMK_2)

    Для размещения содержимого обновления рекомендуется использовать кэш файлов ISV, включающий CAB-файлы обновлений (CAB-файлы) и экспресс-пакеты (ПСФ-файлы).

3.  [**Настройка агента клиента ISV для направления операций клиента WU**](#BKMK_3)

>[!NOTE]
>Требуется накопительный пакет обновления для выпуска Windows 10 версии 1607 (или после) с января 2017 ([KB3213986 (сборка ОС версии 14393,693)](https://support.microsoft.com/en-us/help/4009938/january-10-2017-kb3213986-os-build-14393-693) для установки.
    
   - Агент клиента ISV определяет, какие обновления следует утверждать, а когда — скачивание и установка обновлений.
   - Клиент WU определяет диапазоны байтов для скачивания и инициирует запрос на скачивание.

### <a name="BKMK_1"></a>Шаг 1. Настройка WSUS

WSUS выступает в качестве интерфейса для Центр обновления Windows и управляет всеми метаданными, описывающими Экспресс пакеты, которые необходимо скачать. Если необходимо выполнить развертывание, см. статью [**обзор Windows Server Update Services 3,0 с пакетом обновления 2 (SP2)** ](https://technet.microsoft.com/library/dd939931(v=ws.10).aspx). После развертывания служб WSUS основным вопросом является необходимость сохранения содержимого обновления локально на сервере WSUS. При настройке служб WSUS рекомендуется не хранить обновления локально. Предполагается, что у вас уже есть программное обеспечение, направляющее развертывание этих пакетов в вашей среде. Дополнительные сведения о настройке локального хранилища WSUS см. в разделе [**Определение места хранения обновлений**](https://technet.microsoft.com/library/cc720494(v=ws.10).aspx).

### <a name="BKMK_2"></a>Шаг 2. Укажите и заполните файловый кэш ISV 

#### <a name="specify-the-isv-file-cache"></a>Укажите файловый кэш ISV

Новые параметры групповая политика на стороне клиента и управления мобильными устройствами (MDM), описанные в [**справочнике поставщика службы конфигурации**](https://msdn.microsoft.com/windows/hardware/commercialize/customize/mdm/configuration-service-provider-reference) , определяют расположение файлового кэша ISV.

| **Name**                                              | **Описание**                                                                                                                                                      |
|-------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Настройте альтернативное расположение для скачивания обновлений. | Указывает альтернативный сервер интрасети для размещения обновлений из Центр обновления Майкрософт. Затем эту службу обновления можно использовать для автоматического обновления компьютеров в сети. |

Существует два варианта настройки альтернативного расположения для скачивания файлового кэша ISV:

1. **Укажите имя узла HTTP-сервера ISV**, которое является файловым кэшем ISV
    
    Этот подход настраивает клиент WU для выполнения запросов на загрузку к HTTP-серверу, указанному в политике.

2. **Указание localhost**
 
    Этот подход настраивает клиент WU для выполнения запросов на скачивание к localhost. Это позволяет агенту клиента ISV обойти эти запросы и направить его соответствующим образом для выполнения запроса на скачивание.

> [!IMPORTANT]
> Для файлового кэша ISV необходимо следующее:                                                          
> - Сервер должен соответствовать стандарту HTTP 1,1 для RFC:<http://www.w3.org/Protocols/rfc2616/rfc2616.html>                                                                                                                                                                
> В частности, веб-сервер должен поддерживать                                                                                                                                                                                                                                       Запросы [**head**](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html) и [**Get**](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.htm)<br>                                                                                                                                                                                                                                                                                                  — Частичные запросы к диапазону<br>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   -Срок поддержания активности<br>                                                                                                                                                                                                                                                                                                                                                                                                                            -Не использовать "транспортное кодирование: фрагментировано"                                                                                                 

#### <a name="populate-the-isv-file-cache"></a>Заполнение файлового кэша ISV

Файловый кэш ISV должен быть заполнен файлами, связанными с обновлениями, которые должны быть установлены на управляемых клиентах. 

**Для заполнения файлового кэша ISV:**

1. Используйте [API-интерфейсы WSUS](https://msdn.microsoft.com/library/windows/desktop/microsoft.updateservices.administration.updatefile(v=vs.85).aspx) для доступа к пути к файлу обновления и имени файла для службы MU.

    Метаданные каждого обновления на сервере WSUS содержат путь к файлу обновления и имя файла на Центр обновления Майкрософт следующим образом (Центр обновления Майкрософт имя узла полужирным шрифтом, за которым следует путь к файлу и имя файла): **<http://download.windowsupdate.com>** /c/msdownload/Update/Software/updt/2016/09/ Windows 10.0-kb3195781-x64_0c06079bccc35cba35a48bd2b1ec46f818bd2e74. msu

2. Скачайте файлы из Центр обновления Майкрософт и храните их в кэше файлов ISV с помощью одного из следующих двух методов: 

   - Хранить файлы, используя тот **же путь к папке, что и в службе MU**

   - Хранение файлов с помощью **определенного поставщиком программного обеспечения пути к папке**

     Использовать HTTP-сервер (или localhost) для перенаправления HTTP-запросов **Get** , которые ссылаются на путь к папке MU и имя файла, в расположение файлов ISV.

### <a name="BKMK_3"></a>Шаг 3. Настройка агента клиента ISV для направления операций клиента WU

Агент клиента ISV управляет скачиванием и установкой утвержденных обновлений с помощью следующего рекомендуемого рабочего процесса:

1.  Клиентский агент ISV вызывает клиент WU для проверки сервера WSUS

2.  Сканирование возвращает набор применимых обновлений для клиента WU.

3.  Клиент ISV определяет, какие обновления следует утвердить, скачать и установить.

4.  Клиентский агент ISV вызывает клиент WU для скачивания утвержденных обновлений

5.  После загрузки обновлений агент клиента для независимых поставщиков программного обеспечения вызывает клиент WU для установки утвержденных обновлений.

Дополнительные сведения об использовании клиента WU для проверки, загрузки и установки обновлений см. в разделе [Поиск, скачивание и установка обновлений](https://msdn.microsoft.com/library/windows/desktop/aa387102(v=vs.85).aspx) .

### <a name="download-workflow-options"></a>Параметры рабочего процесса скачивания

Ниже приведены два рисунка параметров рабочего процесса загрузки из кэша файлов ISV.

![Рабочий процесс 1](../../media/express-update-delivery-isv-support/image1.png)

![Рабочий процесс 2](../../media/express-update-delivery-isv-support/image2.png)
### <a name="how-express-download-works"></a>Как работает загрузка Express

- Для обновления операционной системы, которая поддерживает функцию Express, существуют две версии файла полезных данных, хранящихся в службе:

  - **Полная версия файла** — замена локальных версий двоичных файлов обновления

  - **Экспресс-версия** — содержит разности, необходимые для исправления существующих двоичных файлов на устройстве. 

    В метаданных обновления содержатся ссылки на полную версию и версию Express, которые были загружены на клиент в ходе этапа сканирования. 

    **Быстрая загрузка работает следующим образом.**

    Клиент WU сначала попытается загрузить экспресс-выпуск, и в некоторых случаях при необходимости будет возвращаться к полному файлу (например, если пройдет прокси-сервер, который не поддерживает запросы диапазона байтов).

  1. Когда клиент WU инициирует быструю загрузку, **клиент Wu сначала скачивает заглушку**, которая является частью пакета Express.

  2. **Клиент Wu передает эту заглушку установщику Windows**, который использует заглушку для выполнения локального инвентаризации, сравнивая разности файла на устройстве с тем, что необходимо для получения последней версии предлагаемого файла.

  3. **Затем установщик Windows запрашивает у клиента Wu загрузку диапазонов** , которые были определены как обязательные.

  4. **Клиент Wu скачивает эти диапазоны и передает их в установщик Windows**, который применяет диапазоны, а затем определяет необходимость дополнительных диапазонов. Это повторяется до тех пор, пока установщик Windows не сообщит клиенту WU о том, что все необходимые диапазоны скачаны.

  На этом этапе скачивание завершено, и обновления готовы к установке.

### <a name="how-delivery-optimization-reduces-bandwidth-consumption"></a>Как оптимизация доставки сокращает потребление пропускной способности

Оптимизация доставки (DO) — это самостоятельно упорядоченное решение распределенного кэша для предприятий, которым требуется сократить потребление пропускной способности для обновлений операционной системы, обновления операционной системы и приложений. Позволяет клиентам скачивать эти элементы из альтернативных источников (например, других узлов в сети) в сочетании с указанным расположением загрузки (кэш файлов ISV в этом сценарии).

По умолчанию в Windows 10 Enterprise и образовательных учреждений разрешает одноранговый общий доступ только в собственной сети организации, но его можно настроить иначе с помощью параметров групповая политика и управления мобильными устройствами (MDM).

Дополнительные сведения о выполнении см. в статье [Настройка оптимизации доставки для обновлений Windows 10](https://technet.microsoft.com/itpro/windows/manage/waas-delivery-optimization) .
