---
title: Операции обновления
description: Раздел, посвященный управлению обновлениями, включая процесс утверждения, см. в статье Windows Server Update Service (WSUS).
ms.prod: windows-server-threshold
ms.reviewer: na
ms.suite: na
ms.technology: manage-wsus
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: 4cb7ff54-3014-4e91-842a-a7b831ea59ff
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 10/16/2017
ms.openlocfilehash: 2618586fdc38588bb58e122116345eb88a680a3f
ms.sourcegitcommit: 6423dfa9cecb3b06bdd563cae113c3e80a4ec330
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/18/2019
ms.locfileid: "71105065"
---
# <a name="updates-operations"></a>Операции обновления

>Область применения. Windows Server (половина ежегодного канала), Windows Server 2016, Windows Server 2012 R2, Windows Server 2012

После синхронизации обновлений на сервере WSUS они будут автоматически проверяться на соответствие клиентским компьютерам сервера. Однако необходимо утвердить обновления перед развертыванием на компьютерах в сети. При утверждении обновления вы, по сути, сообщаете WSUS, что делать с ним (выбранные варианты — **Установка** или **отклонение** нового обновления). Можно утверждать обновления для группы " **все компьютеры** " или "подгруппы". Если не утвердить обновление, его состояние утверждения **не будет утверждено**, и сервер WSUS позволит клиентам оценивать, требуется ли обновление.

Если сервер WSUS работает в режиме реплики, вы не сможете утверждать обновления на сервере WSUS. Дополнительные сведения о режиме реплики см. в разделе [Запуск режима реплики WSUS](running-wsus-replica-mode.md).

## <a name="approving-updates"></a>Утверждение обновлений
Можно утвердить установку обновлений для всех компьютеров в сети WSUS или для различных групп компьютеров. После утверждения обновления можно выполнить одно (или несколько) из следующих действий.

-   Применить это утверждение к дочерним группам, если таковые имеются.

-   Установите крайний срок для автоматической установки. При выборе этого параметра задаются определенные сроки и даты для установки обновлений, переопределяющие все параметры на клиентских компьютерах. Кроме того, можно указать дату окончания крайнего срока, если необходимо немедленно утвердить обновление (для установки при следующем подключении клиентских компьютеров к серверу WSUS).

-   Удалить установленное обновление, если оно поддерживает удаление.

Следует помнить о двух важных вопросах:

-   Во-первых, нельзя задать крайний срок для автоматической установки обновления, если требуются входные данные пользователя (например, указание параметра, относящегося к обновлению). Чтобы определить, требуется ли для обновления ввод данных пользователем, просмотрите поле **может запросить ввод пользователя** в свойствах обновления для обновления, отображаемого на странице **обновления** . Также проверьте наличие сообщения в поле **утвержденные обновления** , которое говорит: "**выбранное обновление требует ввода данных пользователем и не поддерживает крайний срок установки**".

-   При наличии обновлений для компонента сервера WSUS нельзя утверждать другие обновления для клиентских систем до тех пор, пока обновление WSUS не будет утверждено. Это предупреждение появится в диалоговом окне Утверждение обновлений: "Имеются обновления WSUS, которые не были утверждены. Необходимо утвердить обновления WSUS перед утверждением этого обновления ". В этом случае следует щелкнуть узел обновления WSUS и убедиться, что все обновления в этом представлении утверждены, прежде чем возвращать общие обновления.

#### <a name="to-approve-updates"></a>Утверждение обновлений

1.  В консоли администрирования WSUS щелкните **обновления** , а затем — **все обновления**.

2.  В списке обновлений выберите обновление, которое требуется утвердить, и щелкните его правой кнопкой мыши (или перейдите в область действий) и в диалоговом окне Утверждение обновлений выберите группу компьютеров, для которой необходимо утвердить обновление, и щелкните стрелку рядом с ней.

3.  Выберите **утверждено для установки**, а затем нажмите кнопку **утвердить**.

4.  В окне **ход утверждения** отобразится ход выполнения утверждения. После завершения процесса появится кнопка **Закрыть** . Нажмите кнопку **Закрыть**.

5.  Чтобы выбрать крайний срок, щелкните правой кнопкой мыши обновление, выберите соответствующую группу компьютеров, щелкните стрелку рядом с ней, а затем выберите **крайний срок**.

    -   Можно выбрать один из стандартных крайних сроков (одна неделя, две недели, один месяц), или можно щелкнуть Custom ( **Настраиваемый** ), чтобы указать дату и время.

    -   Если требуется установить обновление, как только клиентские компьютеры будут обращаться к серверу, нажмите кнопку **Настраиваемый**, а затем установите дату и время в поле текущая дата и время или в прошлом.

#### <a name="to-approve-multiple-updates"></a>Утверждение нескольких обновлений

1.  В консоли администрирования WSUS щелкните **обновления** , а затем — **все обновления**.

2.  Чтобы выбрать несколько смежных обновлений, нажмите клавиши **SHIFT** при выборе обновлений. Чтобы выбрать несколько несмежных обновлений, нажмите и удерживайте клавишу **CTRL** при выборе обновлений.

3.  Щелкните выделенный фрагмент правой кнопкой мыши и выберите пункт **утвердить**. Откроется диалоговое окно **Утверждение обновлений** с **состоянием утверждения** , установленным для **сохранения существующих утверждений** и отключенной кнопкой **ОК** .

4.  Вы можете изменить утверждения для отдельных групп, но это не повлияет на дочерние утверждения. Выберите группу, для которой необходимо изменить утверждение, и щелкните стрелку слева. В контекстном меню выберите пункт **утверждено для установки**.

5.  Утверждение для выбранной группы изменится на " **Установка**". Если есть дочерние группы, их утверждение остается в **курсе существующих утверждений**. Чтобы изменить утверждение для дочерних групп, щелкните группу и щелкните стрелку слева. В контекстном меню выберите пункт **Применить к дочерним элементам**.

6.  Чтобы задать для конкретного дочернего объекта наследование всех его утверждений от родительского элемента, щелкните дочерний элемент и щелкните стрелку слева. В контекстном меню выберите **то же, что и родитель**. Если задать для дочернего класса наследование утверждений, но не изменять родительские утверждения, дочерний объект будет наследовать существующие утверждения родительского элемента.

7.  Если необходимо изменить поведение утверждения для всех дочерних элементов, утвердите **все компьютеры**, а затем выберите **Применить к дочерним элементам**.

8.  После установки всех утверждений нажмите кнопку **ОК** . В окне **ход утверждения** отобразится ход выполнения утверждения. По завершении процесса будет доступна кнопка **Закрыть** . Нажмите кнопку **Закрыть**.

## <a name="declining-updates"></a>Отклонение обновлений
При выборе этого параметра обновление удаляется из списка доступных обновлений по умолчанию, а сервер WSUS не будет предлагать обновление клиентам для оценки или установки. Этот вариант можно получить, выбрав обновление или группу обновлений, щелкнув правой кнопкой мыши или перейдя на панель действий. Отклоненные обновления будут отображаться в списке обновлений только в том случае, если при указании фильтра для списка обновлений в разделе " **вид**" выбрано значение **отклонено** в списке утверждений.

#### <a name="to-decline-updates"></a>Отклонение обновлений

1.  В консоли администрирования WSUS щелкните **обновления**, а затем — **все обновления**.

2.  В списке обновлений выберите одно или несколько обновлений, которые необходимо отклонить.

3.  Выберите **отклонить**, а затем нажмите кнопку **Да** в сообщении с подтверждением.

## <a name="cleaning-up-declined-updates"></a>Очистка отклоненных обновлений
Отклоненные обновления продолжают потреблять некоторые ресурсы сервера WSUS. Необходимо запустить мастер очистки сервера, чтобы удалить отклоненные обновления из базы данных WSUS. Пример [Мастер очистки сервера](the-server-cleanup-wizard.md)для получения дополнительных сведений.

## <a name="reinstating-declined-updates"></a>Возвращая отклоненные обновления
После того как обновление будет отклонено, его можно восстановить.

#### <a name="to-reinstate-declined-updates"></a>Восстановление отклоненных обновлений

1.  В консоли администрирования WSUS щелкните **обновления** , а затем — **все обновления**.

2.  Измените **утверждение** на **отклоненное** и нажмите кнопку **Обновить**. Список отклоненных обновлений загружается.

3.  В списке обновлений выберите одно или несколько отклоненных обновлений, которые необходимо восстановить.

4.  Чтобы восстановить конкретное обновление, щелкните обновление правой кнопкой мыши и выберите пункт **утвердить**. В диалоговом окне **Утверждение обновлений** нажмите кнопку **ОК** , чтобы повторно применить состояние утверждения "не утверждено" по умолчанию. Обновление будет отображаться в списке как **не утверждено** , а не отклонено.

После того как отклоненное обновление было очищено с помощью мастера очистки сервера WSUS, оно будет удалено с сервера WSUS и больше не будет отображаться в представлении все обновления. Вы можете повторно импортировать отклоненные, очищенные обновления из каталога Центр обновления Майкрософт. Дополнительные сведения см. [в разделе WSUS и сайт каталога](wsus-and-the-catalog-site.md).

## <a name="change-an-approved-update-to-not-approved"></a>Изменение утвержденного обновления на "не утверждено"
Если обновление было утверждено и вы решили не устанавливать его в данный момент, а хотите сохранить его в будущем, вы можете изменить состояние обновления на "не утверждено". Это означает, что обновление будет оставаться в списке доступных обновлений по умолчанию и будет сообщать о соответствии клиента, но не будет установлено на клиентах.

#### <a name="to-change-an-update-from-approved-to-not-approved"></a>Изменение обновления с утвержденного на неодобренное

1.  В консоли администрирования WSUS щелкните **обновления**, а затем — **все обновления**.

2.  В списке обновлений выберите одно или несколько утвержденных обновлений, которые вы хотите изменить на "не утверждено".

3.  В контекстном меню или на панели **действия** выберите **не утверждено**, а затем нажмите кнопку **Да** в сообщении с подтверждением.

## <a name="approving-updates-for-removal"></a>Утверждение обновлений для удаления
Можно утвердить обновление для удаления (то есть, чтобы удалить уже установленное обновление). Этот параметр доступен, только если обновление уже установлено и поддерживает удаление. Можно указать крайний срок удаления обновления или указать дату окончания крайнего срока, если необходимо немедленно удалить обновление (при следующем обращении клиентских компьютеров к серверу WSUS).

Важно отметить, что не все обновления поддерживают удаление. Вы можете узнать, поддерживает ли обновление удаление, выбрав отдельное обновление и просмотрев область **сведений** . В разделе **Дополнительные сведения**вы увидите категорию **съемные** . Если обновление невозможно удалить с помощью служб WSUS, в некоторых случаях его можно удалить с помощью **панели управления**" **Установка и удаление программ** ".

#### <a name="to-approve-updates-for-removal"></a>Утверждение обновлений для удаления

1.  В консоли администрирования WSUS щелкните **обновления** , а затем — **все обновления**.

2.  В списке обновлений выберите одно или несколько обновлений, которые необходимо утвердить для удаления, и щелкните их правой кнопкой мыши (или перейдите на панель **действий** ).

3.  В диалоговом окне **Утверждение обновлений** выберите группу компьютеров, из которой необходимо удалить обновление, и щелкните стрелку рядом с ней.

4.  Выберите **утверждено для удаления**, а затем нажмите кнопку **Удалить** .

5.  После завершения удаления утверждения можно выбрать крайний срок, щелкнув его правой кнопкой мыши еще раз, выбрав соответствующую группу компьютеров, а затем щелкнув стрелку рядом с ней. Затем выберите **крайний срок**. Вы можете выбрать один из стандартных крайних сроков (одна неделя, две недели, один месяц) или щелкнуть **Настраиваемый** , чтобы выбрать конкретную дату и время.

6.  Если требуется удалить обновление, как только клиентские компьютеры будут обращаться к серверу, щелкните **Настраиваемый**и установите дату в прошлом.

## <a name="approving-updates-automatically"></a>Утверждение обновлений автоматически
Вы можете настроить сервер WSUS для автоматического утверждения определенных обновлений. Можно также указать автоматическое утверждение редакций для существующих обновлений по мере их появления. Этот параметр выбран по умолчанию. Редакция — это версия обновления, в которой были внесены изменения (например, истек срок действия или изменились правила применимости). Если вы не решите автоматически утверждать измененную версию обновления, WSUS будет использовать старую версию, и вы должны вручную утвердить версию обновления.

Вы можете создать правила, которые сервер WSUS будет автоматически применять во время синхронизации. Вы указываете, какие обновления необходимо автоматически утверждать для установки, по классификации обновлений, по продуктам и по группам компьютеров. Это относится только к новым обновлениям, а не к исправленным обновлениям. Можно также указать крайний срок утверждения обновления, который задает число дней и определенное время предложения до установки срока действия утвержденного обновления. Эти параметры доступны в области **Параметры** в разделе **Автоматические утверждения**.

#### <a name="to-automatically-approve-updates"></a>Автоматическое одобрение обновлений

1.  В консоли администрирования WSUS щелкните **Параметры**, а затем — **Автоматические утверждения**.

2.  В разделе **Правила обновления** нажмите кнопку **Создать правило**.

3.  В диалоговом окне **Добавление правила** в разделе **Шаг 1. Выбор свойств**выберите, следует ли использовать, **когда обновление относится к определенной классификации** или **Если обновление относится к конкретному продукту** (или к обоим) в качестве условия. При необходимости укажите, следует ли **задать крайний срок** для утверждения.

4.  На **шаге 2. изменение свойств** щелкните подчеркнутые свойства, чтобы выбрать классификации, продукты и группы компьютеров, для которых требуется автоматическое утверждение. При необходимости выберите дату и время крайнего срока утверждения обновлений.

5.  На **шаге 3. Укажите поле**имя введите уникальное имя для правила.

6.  Нажмите кнопку **ОК**.

Правила автоматического утверждения не применяются к обновлениям, для которых требуется лицензионное соглашение (EULA), которое еще не было принято на сервере. Если применение правила автоматического утверждения не приводит к утверждению всех соответствующих обновлений, следует утверждать эти обновления вручную.

## <a name="automatically-approving-revisions-to-updates-and-declining-expired-updates"></a>Автоматическое утверждение редакций на обновления и отклонение обновлений с истекшим сроком действия
Раздел автоматические утверждения панели Параметры содержит параметр по умолчанию, позволяющий автоматически утверждать редакции для утвержденных обновлений. Можно также настроить сервер WSUS на автоматическое отклонение обновлений с истекшим сроком действия. Если вы решили не утверждать измененную версию обновления автоматически, сервер WSUS будет использовать старую редакцию, и вы должны вручную утвердить версию обновления.

> [!NOTE]
> Редакция — это версия обновления, которая была изменена (например, истек срок действия или были обновлены правила применимости).

#### <a name="to-automatically-approve-revisions-to-updates-and-decline-expired-updates"></a>Автоматическое утверждение редакций на обновления и отклонение просроченных обновлений

1.  В консоли администрирования WSUS щелкните **Параметры**, а затем — **Автоматические утверждения**.

2.  На вкладке **Дополнительно** убедитесь, что оба флажка **автоматически утверждают новые редакции утвержденных обновлений** и **автоматически отклоняют обновления при истечении срока действия новой редакции** .

3.  Нажмите кнопку "ОК".

    > [!NOTE]
    > Сохранение значений по умолчанию для этих параметров позволяет обеспечить хорошую производительность сети WSUS. Если вы не хотите, чтобы обновления с истекшим сроком действия были отклонены автоматически, следует отклонить их вручную на периодической основе.

## <a name="automatically-declining-superseded-updates"></a>Автоматическое отклонение заменяемых обновлений
При утверждении нового обновления, заменяющего существующее обновление, которое автоматически утверждается, заменяемое обновление становится "неприменимым" к компьютеру или устройству после установки нового обновления. В консоли WSUS можно проверить, что обновление неприменимо для всех компьютеров. В этом случае обновление может быть безопасно отклонено. Кроме того, обновление может быть автоматически отклонено при запуске мастера очистки сервера WSUS.

Чтобы найти заменяемые обновления, можно выбрать столбец флаги "заменено" в представлении все обновления и выполнить сортировку по этому столбцу. Будет четыре группы:

-   Обновления, которые никогда не были заменены (пустой значок).

-   Обновления, которые были заменены, но не заменяют другое обновление (значок с синим квадратом внизу).

-   Обновления, которые были заменены и заменяют другое обновление (значок с синим квадратом в середине).

-   Обновления, которые заменяют другое обновление (значок с синим квадратом вверху).

В Windows Server Update Services нет функции, которая автоматически отклоняет заменяемые обновления после утверждения нового обновления. Рекомендуется сначала задать для утверждения значение "не утверждено", а затем использовать мастер очистки сервера, чтобы автоматически отклонить обновление при удовлетворении всех соответствующих условий. Дополнительные сведения можно найти в разделе  [Мастер очистки сервера](the-server-cleanup-wizard.md).

## <a name="approving-superseding-or-superseded-updates"></a>Утверждение заменяемых или заменяемых обновлений
Как правило, обновление, заменяющее другие обновления, выполняет одно или несколько из следующих действий.

-   Улучшает, расширяет или дополняет возможности исправления, реализованного в одном или нескольких выпущенных ранее обновлениях.

-   Повышает эффективность пакета обновления, который устанавливается на клиентские компьютеры, если установка обновления одобрена. Например, заменяемое обновление может содержать файлы, которые больше не нужны для исправления или для операционных систем, поддерживаемых новым обновлением, поэтому такие файлы не будут включены в пакет заменяющего обновления.

-   Обновляет более новые версии операционных систем. Также важно отметить, что заменяющее обновление может не поддерживать более ранние версии операционных систем.

И наоборот, обновление, заменяемое другим обновлением, выполняет следующие действия.

-   Устраняет проблему, похожую на ту, которая была заменена обновлением. Однако обновление, заменяющее его, может улучшить исправление, предоставляемое замененным обновлением.

-   Обновляет более ранние версии операционных систем. В некоторых случаях эти версии операционных систем больше не обновляются с помощью заменяющего обновления.

В области подробных сведений об отдельном обновлении значок информационного сообщения и сообщение в верхней части указывают на то, что он либо заменяет, либо заменяется другим обновлением. Кроме того, можно определить, какие обновления заменяются или заменены обновлением, просмотрев обновления, **заменяющие это обновление** , и **обновления, заменяемые этими** обновлениями, в разделе **Дополнительные сведения Свойства**. Под списком обновлений отображается область сведений об обновлении.

WSUS не отклоняет заменяемые обновления автоматически, поэтому рекомендуется не рассчитывать, что заменяемые обновления следует отклонять в пользу нового заменяющего обновления. Прежде чем отклонить заменяемое обновление, убедитесь, что он больше не нужен ни одному из клиентских компьютеров. Ниже приведены примеры сценариев, в которых может потребоваться установить заменяемое обновление.

-   Если заменяющее обновление поддерживает только более новые версии операционной системы, а некоторые клиентские компьютеры работают под управлением более ранних версий операционной системы.

-   Если заменяющее обновление имеет более ограниченную применимость, чем заменяемое обновлением, что сделает его неприемлемым для некоторых клиентских компьютеров.

-   Если обновление больше не заменяет ранее выпущенное обновление из-за новых изменений. При изменениях в каждом выпуске обновление больше не заменяет обновление, которое ранее было заменено в более ранней версии. В этом сценарии будет по-прежнему отображаться сообщение о заменяемом обновлении, даже если обновление, заменяющее его, было заменено обновлением, которое не имеет.


