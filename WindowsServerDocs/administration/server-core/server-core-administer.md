---
title: Администрирование основных серверных компонентов
description: Узнайте, как Администрирование установки Server Core из Windows Server
ms.prod: windows-server-threshold
ms.mktglfcycl: manage
ms.sitesec: library
author: lizap
ms.author: elizapo
ms.localizationpriority: medium
ms.date: 12/18/2018
ms.openlocfilehash: 39fbb92645d39a46613f2142d0258c78a6ba425b
ms.sourcegitcommit: 0d0b32c8986ba7db9536e0b8648d4ddf9b03e452
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/17/2019
ms.locfileid: "59842665"
---
# <a name="administer-a-server-core-server"></a>Администрирование сервера Server Core

>Область применения. Windows Server (полугодовой канал) и Windows Server 2016

Поскольку Server Core не имеет пользовательского интерфейса, необходимо использовать командлеты Windows PowerShell, средства командной строки или инструменты удаленной отладки для выполнения основных административных задач. В следующих разделах описаны командлеты PowerShell и команды, используемые для основных задач. Можно также использовать [Windows Admin Center](../../manage/windows-admin-center/overview.md), портал объединенное управление в настоящее время в общедоступной предварительной версии, для администрирования установки. 

## <a name="administrative-tasks-using-powershell-cmdlets"></a>Административные задачи, с помощью командлетов PowerShell
Используйте следующие сведения для выполнения основных административных задач с помощью командлетов Windows PowerShell.

### <a name="set-a-static-ip-address"></a>Настройка статического IP-адреса
При установке основных серверных компонентов сервера по умолчанию он имеет адреса DHCP. Если вам требуется статический IP-адрес, можно разместить его, выполнив следующие действия.

Чтобы просмотреть текущую конфигурацию сети, используйте **Get-NetIPConfiguration**.

Чтобы просмотреть IP-адреса, вы уже используете, используйте **Get-NetIPAddress**.

Чтобы задать статический IP-адрес, выполните следующие действия. 

1. Запустите **Get-NetIPInterface**. 
2. Запишите номер в **IfIndex** столбца для интерфейса IP-адрес или **InterfaceDescription** строка. При наличии более чем одного сетевого адаптера, обратите внимание на число или строку, соответствующий интерфейсу, нужно задать статический IP-адрес.
3. Выполните следующий командлет, чтобы задать статический IP-адрес:

   ```powershell
   New-NetIPaddress -InterfaceIndex 12 -IPAddress 192.0.2.2 -PrefixLength 24 -DefaultGateway 192.0.2.1
   ```

   Где:
   - **InterfaceIndex** значение **IfIndex** на шаге 2. (В нашем примере — 12)
   - **IP-адрес** статический IP-адрес, который вы хотите установить. (В нашем примере — 191.0.2.2)
   - **PrefixLength** — длина префикса (другой вид маски подсети) для IP-адреса, вы изменяете. (Например, 24)
   - **Шлюз по умолчанию** является IP-адрес шлюза по умолчанию. (В нашем примере 192.0.2.1)
4. Чтобы задать адрес сервера DNS-клиент, выполните следующий командлет: 

   ```powershell
   Set-DNSClientServerAddress –InterfaceIndex 12 -ServerAddresses 192.0.2.4
   ```
   
   Где:
   - **InterfaceIndex** значение IfIndex из шага 2.
   - **ServerAddresses** IP-адрес вашего DNS-сервера.
5. Чтобы добавить несколько DNS-серверов, выполните следующий командлет: 

   ```powershell
   Set-DNSClientServerAddress –InterfaceIndex 12 -ServerAddresses 192.0.2.4,192.0.2.5
   ```

   WHERE, в этом примере **192.0.2.4** и **192.0.2.5** являются оба IP-адреса DNS-серверов.

Если необходимо перейти на использование DHCP, выполните **DnsClientServerAddress набора – InterfaceIndex 12 – ResetServerAddresses**.

### <a name="join-a-domain"></a>Присоединение к домену
Используйте следующие командлеты, чтобы присоединить компьютер к домену.

1. Запустите **Add-Computer**. Вам предложат для учетных данных для присоединения к домену и имени домена.
2. Если необходимо добавить учетную запись пользователя домена в локальную группу администраторов, выполните следующую команду в командной строке (не в окне PowerShell):

   ```
   net localgroup administrators /add <DomainName>\<UserName>
   ```
3. Перезагрузите компьютер. Это можно сделать, выполнив **Restart-Computer**.

### <a name="rename-the-server"></a>Изменение имени сервера
Чтобы переименовать сервер, выполните следующие действия.

1. Определите имя текущего сервера можно с помощью **hostname** или **ipconfig** команды.
2. Запустите **Rename-Computer - ComputerName \<новое_имя\>**.
3. Перезагрузите компьютер.

### <a name="activate-the-server"></a>Активация сервера

Запустите **slmgr.vbs – ipk\<productkey\>**. Затем запустите **slmgr.vbs – ato**. При успешной активации вы не получите сообщение.

> [!NOTE]
> Также можно активировать на сервер с телефона, с помощью [сервера службы управления ключами (KMS)](../../get-started/server-2016-activation.md), или удаленно. Для удаленной активации, выполните следующий командлет с удаленного компьютера: 

>```powershell
>**cscript windows\system32\slmgr.vbs <ServerName> <UserName> <password>:-ato**
>```
 
### <a name="configure-windows-firewall"></a>Настройка брандмауэра Windows

Брандмауэр Windows на компьютере с основными серверными компонентами можно настроить локально, используя командлеты и сценарии Windows PowerShell. См. в разделе [NetSecurity](/powershell/module/netsecurity/?view=win10-ps) для командлетов, можно использовать для настройки брандмауэра Windows.

### <a name="enable-windows-powershell-remoting"></a>Разрешение удаленного взаимодействия с Windows PowerShell

Можно разрешить удаленное взаимодействие с Windows PowerShell, при котором команды Windows PowerShell, введенные на одном компьютере, выполняются на другом компьютере. Включить удаленное взаимодействие Windows PowerShell с **Enable-PSRemoting**.

Дополнительные сведения см. в разделе [об удаленном часто задаваемые вопросы](/powershell/module/microsoft.powershell.core/about/about_remote_faq?view=powershell-5.1)
</br>

## <a name="administrative-tasks-from-the-command-line"></a>Административные задачи из командной строки
Ниже приведены ссылки для выполнения административных задач из командной строки.

### <a name="configuration-and-installation"></a>Настройка и установка
|Задача | Command |
|-----|-------|
|Установка локального пароля администратора| **Администратор пользователей NET** \* |
|Присоединение компьютера к домену| **Netdom join % computername %** **/domain:\<домена\> /userd:\<домена\\username \> /passwordd:**\* <br> Перезагрузите компьютер.|
|Подтверждение изменения домена| **Набор** |
|Удаление компьютера из домена|**Netdom remove \<computername\>**| 
|Добавление пользователя в локальную группу администраторов|**net localgroup Administrators / add \<домена\\имя пользователя\>** |
|Удаление пользователя из локальной группы администраторов|**net localgroup/DELETE Администраторы \<домена\\имя пользователя\>** |
|Добавление пользователя на локальный компьютер|**NET пользователя \<"Домен\имя_пользователя"\> * / add** |
|Добавление группы на локальный компьютер|**net localgroup \<имя группы\> / add**|
|Изменение имени компьютера в домене|**Netdom renamecomputer % computername % / newname:\<новое имя компьютера\> /userd:\<домена\\username \> /passwordd:** * |
|Подтверждение нового имени компьютера|**Набор**| 
|Изменение имени компьютера в рабочей группе|**Netdom renamecomputer \<текущего_имени_компьютера\> /newname:\<новое_имя_компьютера\>** <br>Перезагрузите компьютер.|
|Запрет управления файлом подкачки|**WMIC computersystem где name =»\<computername\>"задать AutomaticManagedPagefile = False**| 
|Конфигурация файла подкачки|**WMIC pagefileset где name =»\<path/filename\>"задать InitialSize =\<initialsize\>, MaximumSize =\<maxsize\>** <br>Где *path/filename* — это путь и имя файла подкачки, *initialsize* — начальный размер файла подкачки в байтах и *maxsize* — это максимальный размер файл подкачки, в байтах.|
|Изменение статического IP-адреса|**ipconfig/all** <br>Запишите необходимые сведения или перенаправить его в текстовый файл (**ipconfig/all > ipconfig.txt**).<br>**интерфейсы show ipv4 интерфейса Netsh**<br>Убедитесь, что список интерфейс.<br>**Имя адреса набора netsh interface ipv4 \<идентификатор из списка интерфейс\> источника = статический адрес =\<Предпочитаемый IP-адрес\> шлюза =\<адрес шлюза\>**<br>Запустите **ipconfig/all** для vierfy, которой присваивается DHCP включен **нет**.|
|Настройка статического адреса DNS.|**netsh interface ipv4 добавьте имя dnsserver =\<имя или идентификатор сетевой карты\> адрес =\<IP-адрес основного DNS-сервера\> индекса = 1 <br>** добавьте netsh interface ipv4 Имя dnsserver =\<имя дополнительного DNS-сервера\> адрес =\<IP-адрес дополнительного DNS-сервера\> индекс = 2 ** <br> Повторите соответствующим образом добавить дополнительные серверы.<br>Запустите **ipconfig/all** для проверки правильности адресов.|
|Изменение статического IP-адреса на IP-адрес, получаемый по протоколу DHCP|**Имя адреса набора netsh interface ipv4 =\<IP-адрес локальной системы\> источника = DHCP** <br>Запустите **Ipconfig/all** для убедитесь, что DCHP включена **Да**.|
|Ввод ключа продукта|**slmgr.vbs – ipk \<ключ продукта\>**| 
|Локальная активация сервера|**slmgr.vbs -ato**| 
|Удаленная активация сервера|**Cscript slmgr.vbs – ipk \<ключ продукта\>\<имя_сервера\>\<username\>\<пароль\>** <br>**Cscript slmgr.vbs - ato \<servername\> \<username\> \<пароль\>** <br>Получение GUID компьютера, выполнив **команды cscript slmgr.vbs-был** <br> Запустите **cscript slmgr.vbs - dli \<GUID\>** <br>Убедитесь, что состояние лицензии **Licensed (активирован)**.


### <a name="networking-and-firewall"></a>Сеть и брандмауэр

|Задача|Command| 
|----|-------|
|Настройка сервера для использования прокси-сервер|**Netsh Winhttp задать прокси-сервер \<servername\>:\<номер порта\>** <br>**Примечание.** Установка основных серверных нет доступа к Интернету через прокси-сервер, требующий пароль для подключений.|
|Настройте сервер на обход прокси-сервер для адресов Интернета|**Netsh winttp задать прокси-сервер \<servername\>:\<номер порта\> список вариантов обхода =»\<локального\>"**| 
|Отображение или изменение конфигурации IPSEC|**Netsh ipsec**| 
|Отображение или изменение конфигурации NAP|**netsh nap**| 
|Отображение или изменение IP-адрес и физического адресов|**ARP**| 
|Отображение или изменение локальной таблицы маршрутизации|**Маршрут**| 
|Просмотр или Настройка параметров DNS-сервера|**Nslookup**| 
|Отображение статистики протокола и текущих TCP/IP-подключений|**netstat**| 
|Отображение статистики протокола и текущих подключений TCP/IP, с помощью NetBIOS через TCP/IP (NBT)|**nbtstat**| 
|Отображение прыжков для сетевых подключений|**Pathping**| 
|Трассировка прыжков для сетевых подключений|**Tracert**| 
|Отображение конфигурации маршрутизатора с поддержкой многоадресной рассылки|**mrinfo**| 
|Разрешение удаленного администрирования брандмауэра|**netsh advfirewall брандмауэра задать группу правил = «Windows удаленное управление брандмауэром» новый enable = yes**| 
 

### <a name="updates-error-reporting-and-feedback"></a>Обновления, отчеты об ошибках и отзывы

|Задача|Command| 
|----|-------|
|Установка обновления|**WUSA \<обновление \> /quiet расширениями MSU**| 
|Вывод списка установленных обновлений|**SYSTEMINFO**| 
|Удаление обновления|**Разверните/f:\* \<обновление\>c:\test расширениями MSU** <br>Перейдите к c:\test\ и откройте \<обновление\>.xml в текстовом редакторе.<br>Замените **установить** с **удалить** и сохраните файл.<br>**/ n: Pkgmgr\<обновление\>.xml**|
|Настройка автоматических обновлений|Для проверки текущих параметров: ** cscript %systemroot%\system32\scregedit.wsf /AU /v **<br>Чтобы включить автоматическое обновление: **cscript scregedit.wsf /AU 4** <br>Чтобы отключить автоматическое обновление: **cscript %systemroot%\system32\scregedit.wsf /AU 1**| 
|Включение отчетов об ошибках|Чтобы проверить текущее значение параметра: **serverWerOptin/Query** <br>Для автоматической отправки подробных отчетов: **serverWerOptin / подробные** <br>Для автоматической отправки сводных отчетов: **serverWerOptin параметра/Summary** <br>Отключение отчетов об ошибках: **serverWerOptin/Disable**|
|Участие в Программе улучшения качества программного обеспечения (CEIP)|Чтобы проверить текущее значение параметра: **serverCEIPOptin/Query** <br>Для включения CEIP: **serverCEIPOptin/Enable** <br>Для отключения CEIP: **serverCEIPOptin/Disable**|

### <a name="services-processes-and-performance"></a>Службы, процессы и производительность

|Задача|Command| 
|----|-------|
|Список запущенных служб|**Запросы sc** или **net start**| 
|Запуск службы|**SC start \<имя службы\>**  или **net start \<имя службы\>**| 
|Остановка службы|**sc stop \<имя службы\>**  или **net stop \<имя службы\>**| 
|Получение списка запущенных приложений и связанных процессов|**Список задач**||Принудительное завершение процесса|Запустите **tasklist** получить идентификатор процесса (PID), а затем запустите **taskkill/PID \<идентификатор процесса\>**|
|Запустите диспетчер задач|**Taskmgr**| 
|Создание и управление журналами событий трассировки сеанса и производительности|Для создания счетчика, трассировки, сбор данных о конфигурации или API: **logman создайте** <br>Для запроса свойств сборщика данных: **logman запроса** <br>Чтобы запустить или остановить сбор данных: **logman start\|остановить** <br>Чтобы удалить сборщик: **удалить logman** <br> Для обновления свойств сборщика: **logman update** <br>Для импорта набора сборщиков данных из XML-файла или экспортировать его в XML-файл: **logman import\|экспорта**|

### <a name="event-logs"></a>Журналы событий

|Задача|Command| 
|----|-------|
|Список журналов событий|**wevtutil el**| 
|События запросов в указанном журнале|**wevtutil qe /f:text \<имя журнала\>**| 
|Экспорт журнала событий|**wevtutil epl \<имя журнала\>**| 
|Очистка журнала событий|**wevtutil cl \<имя журнала\>**| 


### <a name="disk-and-file-system"></a>Диск и файловая система

|Задача|Command|
|----|-------|
|Управление разделами диска|Полный список команд, запуска **diskpart /?**|  
|Управление программным RAID|Полный список команд, запуска **diskraid /?**|  
|Управление точками подключения томов|Полный список команд, запуска **mountvol /?**| 
|Дефрагментация тома|Полный список команд, запуска **defrag /?**|  
|Преобразование тома в файловую систему NTFS|**преобразовать \<букву тома \> /FS: NTFS**| 
|Сжатие файла|Полный список команд, запуска **compact /?**|  
|Управление открытыми файлами|Полный список команд, запуска **openfiles /?**|  
|Управление папками VSS|Полный список команд, запуска **vssadmin /?**| 
|Управление файловой системой|Полный список команд, запуска **fsutil /?**||Проверка подписи файла|**Sigverif /?**| 
|Смена владельца файла или папки|Полный список команд, запуска **icacls /?**| 
 
### <a name="hardware"></a>Оборудование

|Задача|Command| 
|----|-------|
|Добавление драйвера нового устройства|Скопируйте драйвер в папку в папке % homedrive %\\\<папка_драйвера\>. Запустите **pnputil -i - % homedrive %\\\<папка_драйвера\>\\\<драйвер\>.inf**|
|Удаление драйвера устройства|Список загруженных драйверов, выполните **тип запроса sc = драйвер**. Затем запустите **sc delete \<service_name\>**|
