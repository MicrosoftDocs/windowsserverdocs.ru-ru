---
title: Администрирование Server Core
description: Сведения об администрировании установки основных серверных компонентов Windows Server
ms.prod: windows-server
ms.mktglfcycl: manage
ms.sitesec: library
author: lizap
ms.author: elizapo
ms.localizationpriority: medium
ms.date: 12/18/2018
ms.openlocfilehash: bcc4bf7b3fbdbff1aed2c8dd07b90346fe9eebab
ms.sourcegitcommit: 6aff3d88ff22ea141a6ea6572a5ad8dd6321f199
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/27/2019
ms.locfileid: "71383432"
---
# <a name="administer-a-server-core-server"></a>Администрирование сервера Server Core

>Относится к: Windows Server 2019, Windows Server 2016 и Windows Server (половина ежегодного канала)

Поскольку серверное ядро не имеет пользовательского интерфейса, для выполнения основных задач администрирования необходимо использовать командлеты Windows PowerShell, средства командной строки или средства удаленного управления. В следующих разделах описаны командлеты и команды PowerShell, используемые для основных задач. Для администрирования установки можно также использовать [центр администрирования Windows](../../manage/windows-admin-center/overview.md)— единый портал управления, находящиеся в общедоступной предварительной версии. 

## <a name="administrative-tasks-using-powershell-cmdlets"></a>Задачи администрирования с помощью командлетов PowerShell
Используйте следующие сведения для выполнения основных задач администрирования с помощью командлетов Windows PowerShell.

### <a name="set-a-static-ip-address"></a>Настройка статического IP-адреса
При установке сервера Server Core по умолчанию он имеет адрес DHCP. Если вам нужен статический IP-адрес, его можно задать, выполнив следующие действия.

Чтобы просмотреть текущую конфигурацию сети, используйте **Get-нетипконфигуратион**.

Чтобы просмотреть IP-адреса, которые вы уже используете, используйте **Get-нетипаддресс**.

Чтобы задать статический IP-адрес, выполните следующие действия. 

1. Выполните команду **Get-нетипинтерфаце**. 
2. Обратите внимание на число в столбце **ifindex** для IP-интерфейса или строки **интерфацедескриптион** . При наличии нескольких сетевых адаптеров Обратите внимание на число или строку, соответствующие интерфейсу, для которого нужно задать статический IP-адрес.
3. Выполните следующий командлет, чтобы задать статический IP-адрес:

   ```powershell
   New-NetIPaddress -InterfaceIndex 12 -IPAddress 192.0.2.2 -PrefixLength 24 -DefaultGateway 192.0.2.1
   ```

   Где:
   - **InterfaceIndex** — это значение **ifindex** из шага 2. (В нашем примере — 12)
   - **IPAddress** — это статический IP-адрес, который вы хотите задать. (В нашем примере это 191.0.2.2)
   - **PrefixLength** — это длина префикса (другая форма маски подсети) для НАСТРОЕННОГО IP-адреса. (Для нашего примера — 24)
   - **DefaultGateway** — это IP-адрес шлюза по умолчанию. (В нашем примере это 192.0.2.1)
4. Выполните следующий командлет, чтобы задать адрес сервера клиента DNS: 

   ```powershell
   Set-DNSClientServerAddress –InterfaceIndex 12 -ServerAddresses 192.0.2.4
   ```
   
   Где:
   - **InterfaceIndex** — это значение ifindex из шага 2.
   - **Сервераддрессес** — это IP-адрес DNS-сервера.
5. Чтобы добавить несколько DNS-серверов, выполните следующий командлет: 

   ```powershell
   Set-DNSClientServerAddress –InterfaceIndex 12 -ServerAddresses 192.0.2.4,192.0.2.5
   ```

   в этом примере **192.0.2.4** и **192.0.2.5** являются IP-адресами DNS-серверов.

Если необходимо переключиться на использование DHCP, выполните команду **Set-днсклиентсервераддресс – InterfaceIndex 12 – ресетсервераддрессес**.

### <a name="join-a-domain"></a>Присоединение к домену
Используйте следующие командлеты для приподключения компьютера к домену.

1. Запустите **Add-Computer**. Вам будет предложено ввести оба учетных данных для приподключения к домену и доменному имени.
2. Если необходимо добавить учетную запись пользователя домена в группу локальных администраторов, выполните следующую команду в командной строке (не в окне PowerShell):

   ```
   net localgroup administrators /add <DomainName>\<UserName>
   ```
3. Перезагрузите компьютер. Это можно сделать, запустив **Restart-Computer**.

### <a name="rename-the-server"></a>Изменение имени сервера
Чтобы переименовать сервер, выполните следующие действия.

1. Определите текущее имя сервера с помощью команды " **HostName** " или " **ipconfig** ".
2. Выполните команду **Rename-Computer-ComputerName \<new_name @ no__t-2**.
3. Перезагрузите компьютер.

### <a name="activate-the-server"></a>Активация сервера

Выполните **сценарий slmgr. vbs – ИПК @ no__t-1productkey @ no__t-2**. Затем запустите **slmgr. vbs – ATO**. Если активация прошла удачно, сообщение не будет получено.

> [!NOTE]
> Вы также можете активировать сервер по телефону, используя [сервер службы управления ключами (KMS)](../../get-started/server-2016-activation.md)или удаленно. Для удаленной активации выполните следующий командлет с удаленного компьютера: 
> 
> ```
> cscript windows\system32\slmgr.vbs <ServerName> <UserName> <password>:-ato
> ```
 
### <a name="configure-windows-firewall"></a>Настройка брандмауэра Windows

Брандмауэр Windows на компьютере с основными серверными компонентами можно настроить локально, используя командлеты и сценарии Windows PowerShell. Командлеты, которые можно использовать для настройки брандмауэра Windows, см. в разделе [NetSecurity](/powershell/module/netsecurity/?view=win10-ps) .

### <a name="enable-windows-powershell-remoting"></a>Разрешение удаленного взаимодействия с Windows PowerShell

Можно разрешить удаленное взаимодействие с Windows PowerShell, при котором команды Windows PowerShell, введенные на одном компьютере, выполняются на другом компьютере. Включите удаленное взаимодействие Windows PowerShell с помощью **Enable-PSRemoting**.

Дополнительные сведения см. в статье [об удаленном решении вопросов и ответов](/powershell/module/microsoft.powershell.core/about/about_remote_faq?view=powershell-5.1).

## <a name="administrative-tasks-from-the-command-line"></a>Задачи администрирования из командной строки
Используйте следующие справочные сведения для выполнения административных задач из командной строки.

### <a name="configuration-and-installation"></a>Настройка и установка

|                             Задача                              |                                                                                                                                                                                                                 Command                                                                                                                                                                                                                 |
|---------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|             Установка локального пароля администратора             |                                                                                                                                                                                                      **администратор пользователей net** \*                                                                                                                                                                                                      |
|                  Присоединение компьютера к домену                  |                                                                                                                                                       **netdom join% ComputerName** % **/Domain: \<domain @ no__t-3/усерд: \<domain @ no__t-5Username @ no__t-6/пассвордд:** \* <br> Перезагрузите компьютер.                                                                                                                                                        |
|              Подтверждение изменения домена              |                                                                                                                                                                                                                 **set**                                                                                                                                                                                                                 |
|                Удаление компьютера из домена                |                                                                                                                                                                                                   **Netdom Remove \<computername @ no__t-2**                                                                                                                                                                                                    |
|         Добавление пользователя в локальную группу администраторов          |                                                                                                                                                                                       **net localgroup Administrators/Add \<domain @ no__t-2username @ no__t-3**                                                                                                                                                                                       |
|       Удаление пользователя из локальной группы администраторов       |                                                                                                                                                                                     **net localgroup Administrators/Delete \<domain @ no__t-2username @ no__t-3**                                                                                                                                                                                      |
|               Добавление пользователя на локальный компьютер                |                                                                                                                                                                                                **NET User \<domain \ имя_пользователя @ no__t – 2 \*/Add**                                                                                                                                                                                                 |
|               Добавление группы на локальный компьютер               |                                                                                                                                                                                                 **net localgroup \<group имя @ no__t-2/Add**                                                                                                                                                                                                  |
|          Изменение имени компьютера в домене          |                                                                                                                                                           **netdom ренамекомпутер% ComputerName%/newname.: \<new имя компьютера @ no__t-2/усерд: \<domain @ no__t-4username @ no__t-5/пассвордд:** \*                                                                                                                                                            |
|                 Подтверждение нового имени компьютера                 |                                                                                                                                                                                                                 **set**                                                                                                                                                                                                                 |
|         Изменение имени компьютера в рабочей группе         |                                                                                                                                                                **Netdom ренамекомпутер \<currentcomputername @ no__t-2/newname.: \<newcomputername @ no__t-4** <br>Перезагрузите компьютер.                                                                                                                                                                 |
|                Запрет управления файлом подкачки                 |                                                                                                                                                                        **WMIC ComputerSystem, где name = "\<computername @ no__t-2" Set Аутоматикманажедпажефиле = false**                                                                                                                                                                         |
|                   Конфигурация файла подкачки                   |                                                            **WMIC пажефилесет WHERE Name = "\<path/имя_файла @ no__t-2" Set Инитиалсизе = \<initialsize @ no__t-4, MaximumSize = \<maxsize @ no__t-6** <br>Где *путь/имя* файла — это путь к файлу подкачки и его имя, *инитиалсизе* — это начальный размер файла подкачки в байтах, а параметр *MAXSIZE* — максимальный размер страничного файла в байтах.                                                             |
|                 Изменение статического IP-адреса                 | **ipconfig/all** <br>Запишите соответствующие сведения или перенаправьте их в текстовый файл (**ipconfig/all > ipconfig. txt**).<br>**Интерфейс Netsh интерфейса IPv4 показывать интерфейсы**<br>Убедитесь в наличии списка интерфейсов.<br>**netsh interface IPv4 Set адрес Name \<ID из списка интерфейсов @ no__t-2 Source = статический адрес = \<preferred IP-адрес @ no__t-4 Gateway = \<gateway адрес @ no__t-6**<br>Выполните **команду ipconfig/all** , чтобы убедиться, что параметр DHCP включен в значение **нет**. |
|                   Задайте статический DNS-адрес.                   |   <strong>netsh интерфейс IPv4 Add dnsserver Name = \<name или идентификатор сетевой платы @ no__t-2 Address = \<IP адрес основного DNS-сервера @ no__t-4 index = 1 <br></strong>netsh интерфейс IPv4 Add dnsserver Name = \<name дополнительного DNS-сервера @ no__t-2 Address = \<IP адрес дополнительного DNS-сервера @ no__t-4 index = 2 @ no__t-5 @ no__t-6 <br> Повторите эти действия, чтобы добавить дополнительные серверы.<br>Выполните **команду ipconfig/all** , чтобы убедиться в правильности адресов.   |
| Изменение статического IP-адреса на IP-адрес, получаемый по протоколу DHCP |                                                                                                                                      **netsh interface IPv4 Set адрес Name = \<IP адрес локальной системы @ no__t-2 Source = DHCP** <br>Выполните **команду ipconfig/all** , чтобы убедиться, что для параметра DCHP Enabled задано значение **Да**.                                                                                                                                      |
|                      Ввод ключа продукта                      |                                                                                                                                                                                                   **slmgr. vbs – ИПК \<product Key @ no__t-2**                                                                                                                                                                                                    |
|                  Локальная активация сервера                  |                                                                                                                                                                                                           **slmgr. vbs-ATO**                                                                                                                                                                                                            |
|                 Удаленная активация сервера                  |                                            **cscript slmgr. vbs – ИПК \<product Key @ no__t-2 @ no__t-3server Name @ no__t-4 @ no__t-5Username @ no__t-6 @ no__t-7password @ no__t-8** <br>**cscript slmgr. vbs-ATO \<servername @ no__t-2 \<username @ no__t-4 \<password @ no__t-6** <br>Получите идентификатор GUID компьютера, выполнив **cscript slmgr. vbs.** <br> Запустите **cscript slmgr. vbs-dli \<GUID @ no__t-2** <br>Убедитесь, что для состояния лицензии задано значение **лицензировано (активировано)** .                                             |

### <a name="networking-and-firewall"></a>Сеть и брандмауэр

|Задача|Command| 
|----|-------|
|Настройка сервера для использования прокси-сервера|**Netsh WinHTTP Set proxy \<servername @ no__t-2: \<port Number @ no__t-4** <br>**Примечание.** Установка основных серверных компонентов не может получить доступ к Интернету через прокси-сервер, для которого требуется пароль, чтобы разрешить подключения.|
|Настройка сервера для обхода прокси-сервера для адресов Интернета|**Netsh WinHTTP Set proxy \<servername @ no__t-2: \<port Number @ no__t-4 обход-List = "\<local @ no__t-6"**| 
|Отображение или изменение конфигурации IPSEC|**Netsh IPSec**| 
|Отображение или изменение конфигурации защиты доступа к сети|**Netsh NAP**| 
|Отображение или изменение преобразования IP-адресов в физический адрес|**arp**| 
|Отображение или Настройка локальной таблицы маршрутизации|**направлены**| 
|Просмотр или Настройка параметров DNS-сервера|**nslookup**| 
|Отображение статистики протокола и текущих TCP/IP-подключений|**netstat**| 
|Отображение статистики протокола и текущих подключений TCP/IP с помощью NetBIOS через TCP/IP (NBT)|**nbtstat**| 
|Отображение прыжков для сетевых подключений|**pathping**| 
|Трассировка прыжков для сетевых подключений|**tracert**| 
|Отображение конфигурации маршрутизатора с поддержкой многоадресной рассылки|**mrinfo**| 
|Включение удаленного администрирования брандмауэра|**netsh advfirewall firewall set Rule Group = "удаленное управление брандмауэром защитника Windows" новое включить = да**| 
 

### <a name="updates-error-reporting-and-feedback"></a>Обновления, отчеты об ошибках и отзывы

|                               Задача                                |                                                                                                                               Command                                                                                                                                |
|-------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|                         Установка обновления                         |                                                                                                                    **WUSA @no__t -1update\>.msu/quiet**                                                                                                                    |
|                      Вывод списка установленных обновлений                       |                                                                                                                            **systeminfo**                                                                                                                            |
|                         Удаление обновления                          |                                 **Разверните/f: \* @no__t -2update\>.msu c:\test** <br>Перейдите к к:\тест\ и откройте @no__t -0update\>.xml в текстовом редакторе.<br>Замените **Install** на **Remove** и сохраните файл.<br>**pkgmgr/n: @no__t -1update\>.xml**                                 |
|                    Настройка автоматических обновлений                    |          Чтобы проверить текущее значение, выполните следующие действия: **cscript%systemroot%\SYSTEM32\SCREGEDIT.WSF/ау/v \* @ no__t-2 @ no__t-3To включить автоматические обновления: \* @ no__t-5cscript скрежедит. WSF/ау 4** <br>Отключение автоматического обновления: **cscript%systemroot%\SYSTEM32\SCREGEDIT.WSF/ау 1**          |
|                      Включение отчетов об ошибках                       | Проверка текущего параметра: **сервервероптин/Query** <br>Автоматическая отправка подробных отчетов: **сервервероптин/детаилед** <br>Автоматическая отправка сводных отчетов: **сервервероптин/Summary** <br>Отключение отчетов об ошибках: **сервервероптин/Disable** |
| Участие в Программе улучшения качества программного обеспечения (CEIP) |                                                     Проверка текущего параметра: **серверцеипоптин/Query** <br>Включение программы улучшения качества программного обеспечения: **серверцеипоптин/Enable** <br>Отключение программы улучшения качества программного обеспечения: **серверцеипоптин/Disable**                                                      |

### <a name="services-processes-and-performance"></a>Службы, процессы и производительность

|                               Задача                               |                                                                                                                                                                                                             Command                                                                                                                                                                                                              |
|------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|                    Список выполняющихся служб                     |                                                                                                                                                                                                  **SC Query** или **net start**                                                                                                                                                                                                   |
|                         Запуск службы                          |                                                                                                                                                                                 **SC start \<service имя @ no__t-2** или **net start \<Service имя @ no__t-5**                                                                                                                                                                                  |
|                          Остановка службы                          |                                                                                                                                                                                  **sc \<service имя @ no__t-2** или **net останавливаюте \<Service имя @ no__t-5**                                                                                                                                                                                   |
| Получение списка запущенных приложений и связанных процессов |                                                                                                                                                                                                           **tasklist**                                                                                                                                                                                                           |
|                        Запустить диспетчер задач                        |                                                                                                                                                                                                           **панели Диспетчер задач**                                                                                                                                                                                                            |
|    Создание и управление сеансами трассировки событий и журналами производительности    | Создание счетчика, трассировки, сбора данных конфигурации или API-интерфейса: **Logman цеате** <br>Запрос свойств сборщика данных: **Logman Query** <br>Запуск или завершение сбора данных: **Logman Start @ no__t-1STOP** <br>Удаление сборщика: **Logman Delete** <br> Обновление свойств сборщика: **Logman Update** <br>Чтобы импортировать группу сборщиков данных из XML-файла или экспортировать ее в XML-файл, выполните команду **Logman Import @ no__t-1export** |

### <a name="event-logs"></a>Журналы событий

|Задача|Command| 
|----|-------|
|Вывод списка журналов событий|**wevtutil El**| 
|Запрос событий в указанном журнале|**wevtutil QE/f: Text \<log имя @ no__t-2**| 
|Экспорт журнала событий|**wevtutil EPL \<log имя @ no__t-2**| 
|Очистка журнала событий|**wevtutil CL \<log имя @ no__t-2**| 


### <a name="disk-and-file-system"></a>Диск и файловая система

|                   Задача                   |                        Command                        |
|------------------------------------------|-------------------------------------------------------|
|          Управление разделами диска          | Чтобы получить полный список команд, выполните команду **DiskPart/?**  |
|           Управление программным RAID           | Полный список команд запускается с помощью команды **DiskRAID/?**  |
|        Управление точками подключения томов        | Чтобы получить полный список команд, выполните команду **mountvol/?**  |
|           Дефрагментация тома            |  Полный список команд: Run **Defrag/?**   |
| Преобразование тома в файловую систему NTFS |        **Convert \<volume буква @ no__t-2/FS: NTFS**         |
|              Сжатие файла              |  Полный список команд приведен в разделе Выполнение команды **Compact/?**  |
|          Управление открытыми файлами           | Чтобы получить полный список команд, выполните команду **openfiles/?** |
|          Управление папками VSS          | Чтобы получить полный список команд, выполните команду **vssadmin/?**  |
|        Управление файловой системой        |  Чтобы получить полный список команд, выполните команду **fsutil/?**   |
|    Смена владельца файла или папки    |  Чтобы получить полный список команд, выполните команду **icacls/?**   |
 
### <a name="hardware"></a>Оборудование

|Задача|Command| 
|----|-------|
|Добавление драйвера нового устройства|Скопируйте драйвер в папку в каталоге% хомедриве% \\ @ no__t-1driver Folder @ no__t-2. Выполните команду **PnPUtil-i-a% хомедриве% \\ @ no__t-2driver папка @ no__t-3 @ no__t-4 @ no__t-5driver\>.inf**|
|Удаление драйвера устройства|Чтобы получить список загруженных драйверов, выполните команду **SC Query Type = драйвер**. Затем выполните команду **SC delete \<service_name @ no__t-2** .|
