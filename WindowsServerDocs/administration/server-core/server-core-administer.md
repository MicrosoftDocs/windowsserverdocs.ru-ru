---
title: Администрирование Server Core
description: Узнайте, как выполнение установки Server Core Windows Server
ms.prod: windows-server-threshold
ms.mktglfcycl: manage
ms.sitesec: library
author: lizap
ms.author: elizapo
ms.localizationpriority: medium
ms.date: 12/18/2018
ms.openlocfilehash: 39fbb92645d39a46613f2142d0258c78a6ba425b
ms.sourcegitcommit: 4df1bc940338219316627ad03f0525462a05a606
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/19/2018
ms.locfileid: "8978001"
---
# Администрирование сервера Server Core

>Область применения: Windows Server (Semi-Annual Channel) и Windows Server 2016

Так как Server Core не имеет пользовательского интерфейса, необходимо использовать командлеты Windows PowerShell, средства командной строки или средства удаленной работы для выполнения основных административных задач. В следующих разделах описываются командлеты PowerShell и командам, используемым для основных задач. Можно также использовать [Windows Admin Center](../../manage/windows-admin-center/overview.md), портал централизованного управления в настоящее время в общедоступной предварительной версии для администрирования установки. 

## Административных задач с помощью командлетов PowerShell
Используйте следующие сведения для выполнения основных административных задач с помощью командлетов Windows PowerShell.

### Настроить статический IP-адрес
При установке Server Core сервера по умолчанию имеет адреса DHCP. Если вам требуется статический IP-адрес, можно задать с помощью следующих действий.

Чтобы просмотреть конфигурацию сети, используйте **Get-NetIPConfiguration**.

Чтобы просмотреть IP-адреса, которые вы уже используете, используйте **Get-NetIPAddress**.

Чтобы задать статический IP-адрес, сделайте следующее: 

1. Запустите **Get-NetIPInterface**. 
2. Запомните номер в столбце **"ifindex"** для интерфейса IP-адрес или строка **InterfaceDescription** . Если у вас есть несколько сетевых адаптеров, обратите внимание, число или строка, соответствующая к интерфейсу, следует задать статический IP-адрес.
3. Выполните следующий командлет задать статический IP-адрес:

   ```powershell
   New-NetIPaddress -InterfaceIndex 12 -IPAddress 192.0.2.2 -PrefixLength 24 -DefaultGateway 192.0.2.1
   ```

   где:
   - **InterfaceIndex** имеет значение **"ifindex"** на шаге 2. (В нашем примере 12)
   - **IP-адрес** — это статический IP-адрес, который вы хотите установить. (В нашем примере 191.0.2.2)
   - Для IP-адрес, который задается **значение PrefixLength** равно длину префикса (другой вид маска подсети). (В нашем примере 24)
   - **Шлюз по умолчанию** — это IP-адрес шлюза по умолчанию. (В нашем примере 192.0.2.1)
4. Чтобы задать DNS-клиент адрес сервера выполните следующий командлет: 

   ```powershell
   Set-DNSClientServerAddress –InterfaceIndex 12 -ServerAddresses 192.0.2.4
   ```
   
   где:
   - **InterfaceIndex** имеет значение "ifindex" на шаге 2.
   - **ServerAddresses** — это IP-адрес сервера DNS.
5. Чтобы добавить несколько DNS-серверов, запустите следующий командлет: 

   ```powershell
   Set-DNSClientServerAddress –InterfaceIndex 12 -ServerAddresses 192.0.2.4,192.0.2.5
   ```

   Когда в таком случае **192.0.2.4** и **192.0.2.5** являются оба IP-адреса DNS-серверов.

Если вам нужно переключиться на использование DHCP, запустите **Set-DnsClientServerAddress — InterfaceIndex 12 — ResetServerAddresses**.

### Присоединение к домену
Используйте следующие командлеты для присоединения компьютера к домену.

1. Запустите **Добавить компьютер**. Вам будет предложено для обеих учетных данных для присоединения к домену и имени домена.
2. Если необходимо добавить учетную запись пользователя домена в локальную группу "Администраторы", выполните следующую команду в командной строке (не в окне PowerShell):

   ```
   net localgroup administrators /add <DomainName>\<UserName>
   ```
3. Перезагрузите компьютер. Это можно сделать, выполнив **Restart-Computer**.

### Переименование сервера
Переименование сервера, выполните следующие действия.

1. Определите имя текущего сервера с помощью команды **ipconfig** или **имя узла** .
2. Запустите **Переименовать компьютер - ComputerName \<new_name\ >**.
3. Перезагрузите компьютер.

### Активация сервера

Запустите **slmgr.vbs – ipk\<productkey\ >**. Затем запустите **slmgr.vbs-ato**. Если активация прошла успешно, не получит сообщение.

> [!NOTE]
> Сервер можно также активировать по телефону, с помощью [службы управления ключами (KMS) сервера](../../get-started/server-2016-activation.md), или удаленно. Чтобы активировать удаленно, выполните следующий командлет с удаленного компьютера: 

>```powershell
>**cscript windows\system32\slmgr.vbs <ServerName> <UserName> <password>:-ato**
>```
 
### Настройка брандмауэра Windows

Брандмауэр Windows можно настроить локально на компьютере Server Core с помощью командлетов Windows PowerShell и сценариев. См. в разделе [NetSecurity](/powershell/module/netsecurity/?view=win10-ps) командлетов, которые можно использовать для настройки брандмауэра Windows.

### Включение удаленного взаимодействия Windows PowerShell

Вы можете включить удаленное взаимодействие Windows PowerShell, в котором команды вводимый в Windows PowerShell на одном компьютере, запустите на другом компьютере. Включение удаленного взаимодействия Windows PowerShell с помощью **Enable-PSRemoting**.

Дополнительные сведения см. в разделе [О удаленного: вопросы и ответы](/powershell/module/microsoft.powershell.core/about/about_remote_faq?view=powershell-5.1)
</br>

## Административные задачи из командной строки
Используйте эти справочные сведения для выполнения административных задач из командной строки.

### Конфигурации и установке
|Задача | Команда |
|-----|-------|
|Задайте пароль локального администратора| **Администратор пользователей NET** \* |
|Присоединение компьютера к домену| **netdom присоединение % computername %** **/domain:\<domain\ > /userd:\<domain\\username\ >/passwordd:**\* <br> Перезагрузите компьютер.|
|Убедитесь, что изменилось домена| **set** |
|Удалить компьютер из домена|**Удалить команды netdom \ < computername\ >**| 
|Добавление пользователя в локальную группу "Администраторы"|**NET локальной группы администраторов / добавить \ < domain\\username\ >** |
|Удаление пользователя из локальной группы "Администраторы"|**NET локальной группы администраторов/DELETE \ < domain\\username\ >** |
|Добавление пользователя на локальном компьютере|**NET пользователя \ < domain\username\ > * / Добавить** |
|Добавление группы на локальном компьютере|**NET локальной группы \ < группы name\ > / Добавить**|
|Измените имя компьютера к домену|**Netdom renamecomputer % computername % /NewName:\<new компьютера name\ > /userd:\<domain\\username\ >/passwordd:** * |
|Подтвердите новое имя компьютера|**set**| 
|Измените имя компьютера в рабочей группе|**Netdom renamecomputer \ < currentcomputername\ > /NewName: \ < newcomputername\ >** <br>Перезагрузите компьютер.|
|Отключить управление файла подкачки|**система WMIC где имя = «\ < computername\ >» задать AutomaticManagedPagefile = "false"**| 
|Настройка файла подкачки|**WMIC pagefileset где имя = «\ < путь/filename\ >» задать InitialSize = \ < initialsize\ > MaximumSize = \ < maxsize\ >** <br>Где *путь и имя файла* — путь и имя файла подкачки, *initialsize* — это начальное размер файла подкачки, в байтах, он *maxsize* максимальный размер файла подкачки, в байтах.|
|Измените статический IP-адрес|**ipconfig/все** <br>Запишите необходимые сведения или перенаправить в текстовый файл (**ipconfig/все > ipconfig.txt**).<br>**интерфейсы Показать ipv4 интерфейса Netsh**<br>Убедитесь, что список интерфейса.<br>**имя адрес ipv4 интерфейса Netsh набора \ < идентификатор из интерфейса list\ > источника = статический адрес = \ < основной IP-адрес mailto:\[адрес электронной почты\ > шлюза = \ < шлюза mailto:\[адрес электронной почты\ >**<br>Запустите **ipconfig/все** для vierfy установленный поддержкой DHCP **Нет**.|
|Настроить статический адрес DNS.|**ipv4 интерфейса netsh добавьте имя DNS-сервер = \<name или идентификатор card\ интерфейс сети > адрес = \<IP адрес основной DNS server\ > индекс = 1 <br> **ipv4 интерфейса netsh добавьте имя DNS-сервер = \<name вспомогательных server\ DNS > адрес = \<IP адрес получателя server\ DNS > индекс = 2 ** <br> Повторите при необходимости добавить дополнительные серверы.<br>Запустите **ipconfig/все** для проверки правильности адреса.|
|Изменить на службы DHCP IP-адрес из статический IP-адрес|**имя адрес ipv4 интерфейса Netsh набора = \ < IP-адрес локального виртуализацию > источника = DHCP** <br>Запустите **Ipconfig/все** чтобы убедиться, что включен DCHP задано значение " **Да"**.|
|Введите ключ продукта|**slmgr.vbs – ipk \ < key\ продукта >**| 
|Активация сервера локально|**slmgr.vbs - ato**| 
|Активация сервера удаленного|**Cscript slmgr.vbs – ipk \ < key\ продукта > \ < server name\ > \ < username\ > \ < password\ >** <br>**Cscript slmgr.vbs - ato \ < имя_сервера кземпляр > \ < username\ > \ < password\ >** <br>Получить GUID компьютера, выполнив **cscript slmgr.vbs-и** <br> Запустите **cscript slmgr.vbs - dli \<GUID\ >** <br>Убедитесь, что состояние лицензии на **лицензированное (активируется)**.


### Сеть и брандмауэра

|Задача|Команда| 
|----|-------|
|Настройка сервера для использования прокси-сервера|**Netsh Winhttp установить прокси-сервера \ < имя_сервера кземпляр >: \ < порт номер\; >** <br>**Примечание:** Установки Server Core нет доступа к Интернету через прокси-сервер, который требуется указать пароль, чтобы разрешить подключения.|
|Настройка сервера для обхода прокси-сервер для адресов Интернета|**Netsh winttp установить прокси-сервера \ < имя_сервера кземпляр >: \ < порт номер\; > список пропускаемых = «\ < local\ >»**| 
|Отображение или изменение конфигурации IPSEC|**Netsh ipsec**| 
|Отображение или изменение конфигурации NAP|**netsh nap**| 
|Просмотреть или изменить IP-адрес для физических адресов|**arp**| 
|Отображение или настроить локальную таблицу маршрутизации|**маршрут**| 
|Просмотр или настраивать параметры сервера DNS|**nslookup**| 
|Отображение статистику протокола и текущие сетевые соединения TCP/IP|**netstat**| 
|Отображение статистику протокола и текущие соединения TCP/IP, используя NetBIOS через TCP/IP (NBT)|**nbtstat**| 
|Отображение прыжков для сетевых подключений|**pathping**| 
|Прыжков трассировки для сетевых подключений|**tracert**| 
|Отображение конфигурации маршрутизатора многоадресной рассылки|**mrinfo**| 
|Включите удаленное управление брандмауэром|**netsh advfirewall брандмауэра настройки группы правило = «Удаленное управление брандмауэром Windows» новый enable = yes**| 
 

### Обновления, отчеты об ошибках и отзывов

|Задача|Команда| 
|----|-------|
|Установка обновления|**помощью этой программы \ < update\ >/quiet .msu**| 
|Вывести список установленных обновлений|**systeminfo**| 
|Удаление обновления|**Разверните /f:\* \ < update\ > .msu c:\test** <br>Перейдите к c:\test\ и открыть \ < update\ > .xml в текстовом редакторе.<br>Замените **установить** **Удалить** и сохраните файл.<br>**Pkgmgr /n:\ < update\ > .xml**|
|Настройка автоматического обновления|Чтобы проверить текущие настройки: ** cscript %systemroot%\system32\scregedit.wsf /AU /v **<br>Для включения автоматических обновлений: **cscript scregedit.wsf /AU 4** <br>Чтобы отключить автоматические обновления: **cscript %systemroot%\system32\scregedit.wsf /AU 1**| 
|Включение отчетов об ошибках|Чтобы проверить текущие настройки: **serverWerOptin/Query** <br>Автоматически отправлять подробные отчеты: **serverWerOptin / подробное** <br>Чтобы автоматически отправлять сводные отчеты: **serverWerOptin /summary** <br>Чтобы отключить отчеты об ошибках: **serverWerOptin/Disable**|
|Участие в программе улучшения качества (программного обеспечения CEIP)|Чтобы проверить текущие настройки: **serverCEIPOptin/Query** <br>Чтобы включить CEIP: **/ Enable serverCEIPOptin** <br>Чтобы отключить CEIP: **serverCEIPOptin/Disable**|

### Службы, процессы и производительности

|Задача|Команда| 
|----|-------|
|Список запущенных служб|**sc query** или **net меню "Пуск"**| 
|Запустить службу|**sc начать \<service name\ >** или **Команда net start \<service name\ >**| 
|Остановите службу|**sc stop \<service name\ >** или **net stop \<service name\ >**| 
|Получить список запущенных приложений и связанные процессы|**tasklist**||Остановите процесс принудительно|Запустите извлечение **tasklist** кодом процесса (PID), а затем введите **\<process ID\ taskkill параметры >**|
|Запустите диспетчер задач|**просмотреть**| 
|Создание и управление сеанса и производительности журналы трассировки событий|Для создания счетчика, трассировки, сбор данных конфигурации или API: **logman ceate** <br>Для запроса свойств сборщика: **logman запроса** <br>Запуск и остановка сбора данных: **logman start\ | остановить** <br>Чтобы удалить сборщика: **Удаление logman** <br> Чтобы обновить свойства сборщика: **обновление logman** <br>Чтобы импортировать сборщиков данных из XML-файла или экспортировать его в XML-файл: **logman import\ | экспортировать**|

### Журналы событий

|Задача|Команда| 
|----|-------|
|Список журналов событий|**wevtutil el**| 
|События запросов в указанном журнале|**wevtutil qe /f:text \ < журнал name\ >**| 
|Экспорт журнала событий|**wevtutil epl \ < журнал name\ >**| 
|Очистить журнал событий|**wevtutil cl \ < журнал name\ >**| 


### Диска и файловой системы

|Задача|Команда|
|----|-------|
|Управление разделов диска|Полный список команд, запустите **diskpart /?**|  
|Управление программным обеспечением RAID|Полный список команд, запустите **diskraid /?**|  
|Управление точки подключения|Полный список команд, запустите **mountvol /?**| 
|Дефрагментация тома|Полный список команд, запустите **дефрагментации /?**|  
|Преобразование тома в файловую систему NTFS|**Преобразование \ < тома letter\ >/FS: NTFS**| 
|Сжать файл|Полный список команд, запустите **compact /?**|  
|Администрирование открытые файлы|Полный список команд, запустите **openfiles /?**|  
|Администрирование VSS папок|Полный список команд, запустите **vssadmin /?**| 
|Администрирование в файловой системе|Полный список команд, запустите **fsutil /?**||Проверка подписи файла|**Sigverif /?**| 
|Смена владельцев файлов или папок|Полный список команд, запустите **icacls /?**| 
 
### Оборудование

|Задача|Команда| 
|----|-------|
|Добавление драйверов для нового устройства|Скопируйте драйвер в папке на %homedrive%\\\ < драйвер folder\ >. Запустите **pnputil -i folder\ %homedrive%\\\<driver > \\\<driver\ > .inf**|
|Удалите драйвер устройства|Список загруженных драйверов, запустите **Тип запроса sc = драйвер**. Затем запустите **sc удалить \<service_name\ >**|
