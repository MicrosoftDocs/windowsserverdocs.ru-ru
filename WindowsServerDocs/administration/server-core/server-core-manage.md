---
title: Управление основными серверными компонентами
description: Узнайте, как управлять установкой основных серверных компонентов Windows Server
ms.prod: windows-server-threshold
ms.mktglfcycl: manage
ms.sitesec: library
author: lizap
ms.localizationpriority: medium
ms.date: 07/23/2019
ms.openlocfilehash: bbb04e761dbb1dd48d95e15d11c91608f4d6c240
ms.sourcegitcommit: 216d97ad843d59f12bf0b563b4192b75f66c7742
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/24/2019
ms.locfileid: "68476546"
---
# <a name="manage-a-server-core-server"></a>Управление сервером Server Core
 
> Относится к: Windows Server 2019, Windows Server 2016 и Windows Server (половина ежегодного канала)

Управлять сервером Server Core можно следующими способами.
- Использование [центра администрирования Windows](../../manage/windows-admin-center/overview.md)
- Использование [средства удаленного администрирования сервера](../../remote/remote-server-administration-tools.md) , работающего в Windows 10
- Локально и удаленно при помощи Windows PowerShell
- Удаленное использование [Диспетчер сервера](../server-manager/server-manager.md)
- Удаленное использование [оснастки MMC](#managing-with-microsoft-management-console)
- Удаленно с [службы удаленных рабочих столов](#managing-with-remote-desktop-services)

Можно также добавить аппаратное обеспечение и управлять драйверами локально, при условии, что это выполняется из командной строки.

Существуют некоторые важные ограничения и советы, которые следует учитывать при работе с Server Core.

- Если вы закроете все окна командной строки и хотите открыть новое окно командной строки, это можно сделать в диспетчере задач. Нажмите **клавиши\+Ctrl\+Alt Delete**, выберите **запустить диспетчер задач**, щелкните **Дополнительные сведения > Файл > выполнить**, а затем введите **cmd. exe**. (Чтобы открыть окно командной строки PowerShell, введите **PowerShell. exe** .) Кроме того, можно выйти и снова войти в систему.
- Команды или служебные программы, которые пытаются запустить проводник, работать не будут. Например, запуск **.** из командной строки работать не будет.
- В Server Core отсутствует поддержка HTML-отрисовки или HTML-справки.
- Server Core поддерживает установщик Windows в тихом режиме, чтобы можно было устанавливать средства и служебные программы из установщик Windows файлов. При установке пакетов установщик Windows в Server Core используйте параметр **/QB** для вывода основного пользовательского интерфейса.
- Чтобы изменить часовой пояс, выполните команду **Set-Date**.
- Чтобы изменить международные параметры, запустите **Control Intl. cpl**.
- **Файл Control. exe** не запустится самостоятельно. Его необходимо запустить с помощью **timedate. cpl** или **Intl. cpl**.
- **Winver. exe** недоступен в Server Core. Чтобы получить сведения о версии, используйте **systemInfo. exe**.

## <a name="managing-server-core-with-windows-admin-center"></a>Управление ядром сервера с помощью центра администрирования Windows
[Windows Admin Center](../../manage/windows-admin-center/overview.md) — это браузерное приложение для управления системами с Windows Server независимо от Azure или облака в локальной среде. Windows Admin Center предоставляет полный контроль над всеми аспектами серверной инфраструктуры и особенно полезен для управления серверами в частных сетях, которые не подключены к Интернету. Можно установить центр администрирования Windows в Windows 10, на сервере шлюза или в установке Windows Server с возможностями рабочего стола, а затем подключиться к системе Server Core, которой требуется управлять.

## <a name="managing-server-core-remotely-with-server-manager"></a>Удаленное управление ядром сервера с помощью диспетчер сервера

Диспетчер сервера — это консоль управления в Windows Server, которая помогает подготавливать локальные и удаленные серверы под управлением Windows и управлять ими, не требуя физического доступа к серверам, а также включать протокол удаленный рабочий стол (RDP). подключения к каждому серверу. Диспетчер сервера поддерживает удаленное управление несколькими серверами.

Чтобы разрешить управление локальным сервером с помощью диспетчер сервера, запущенного на удаленном сервере, выполните командлет Windows PowerShell **Configure-SMRemoting. exe-Enable**.

## <a name="managing-with-microsoft-management-console"></a>Управление с помощью консоли управления (MMC)

Для управления сервером Server Core можно использовать множество оснасток для удаленной консоли управления (MMC).

Чтобы использовать оснастку MMC для управления сервером Server Core, который является членом домена, выполните следующие действия. 

1. Запустите оснастку MMC, например "Управление компьютером".
2. Щелкните правой кнопкой мыши оснастку и выберите пункт **подключиться к другому компьютеру**.
2. Введите имя компьютера сервера Server Core и нажмите кнопку **ОК**. Теперь оснастку MMC можно использовать для управления сервером Server Core так же, как любой другой компьютер или сервер.

Чтобы использовать оснастку MMC для управления сервером Server Core, который *не* является членом домена, выполните следующие действия. 

1. Установите альтернативные учетные данные, используемые для подключения к компьютеру Server Core, введя следующую команду в командной строке на удаленном компьютере:

   ```
   cmdkey /add:<ServerName> /user:<UserName> /pass:<password>
   ```

   Если требуется ввести пароль, опустите параметр **/Пасс** .

2. При появлении запроса введите пароль для указанного имени пользователя.
   Если брандмауэр на сервере Server Core еще не настроен для подключения оснасток MMC, выполните следующие действия, чтобы настроить брандмауэр Windows для разрешения оснастки MMC. Затем перейдите к шагу 3.
3. На другом компьютере запустите оснастку MMC, например " **Управление компьютером**".
4. В левой области щелкните правой кнопкой мыши оснастку и выберите пункт **подключиться к другому компьютеру**. (Например, в примере "Управление компьютером" щелкните правой кнопкой мыши элемент **Управление компьютером (локальный)** ).
5. На **другом компьютере**введите имя компьютера сервера ядра сервера и нажмите кнопку **ОК**. Теперь при помощи оснастки MMC вы можете управлять сервером, работающим в режиме основных серверных компонентов, так же, как вы это делаете с любым другим компьютером под управлением Windows Server.

### <a name="to-configure-windows-firewall-to-allow-mmc-snap-ins-to-connect"></a>Разрешение подключений оснасток MMC в брандмауэре Windows
Чтобы разрешить подключение всех оснасток MMC, выполните следующую команду:

```PowerShell
Enable-NetFirewallRule -DisplayGroup "Remote Administration"
```

Чтобы разрешить подключение только для конкретных оснасток MMC, выполните следующую команду:

```PowerShell
Enable-NetFirewallRule -DisplayGroup "<rulegroup>"
```

Где *группу правил* является одним из следующих, в зависимости от того, какую оснастку вы хотите подключить:

| Оснастка MMC                            | Группа правил                                            |
| ---------------------------------------- | ------------------------------------------------------- |
| Просмотр событий                           | Удаленное управление журналом событий                           |
| Службы                               | Удаленное управление службами                             |
| Общие папки                         | Общий доступ к файлам и принтерам                              |
| Планировщик заданий                         | Журналы и оповещения производительности, общий доступ к файлам и принтерам |
| Управление дисками                        | Удаленное управление томами                              |
| Брандмауэр Windows и расширенная безопасность | Удаленное управление брандмауэром Windows                    |


> [!NOTE] 
> Некоторые оснастки MMC не имеют соответствующей группы правил, которая позволяет им подключаться через брандмауэр. Однако включение групп правил для оснасток "Просмотр событий", "Службы" или "Общие папки" позволит подключаться и большинству других оснасток. 
>
> Кроме того, некоторые оснастки требуют дополнительной настройки для подключения через брандмауэр Windows:
>
> - Управление дисками. Сначала необходимо запустить виртуальную дисковую службу (службу VDS) на компьютере в режиме основных серверных компонентов. Также необходимо должным образом настроить правила для оснастки "Управление дисками" на том компьютере, где она запущена.
> - Монитор IP-безопасности. Сначала необходимо разрешить удаленное управление этой оснасткой. Для этого в командной строке введите **cscript \windows\system32\scregedit.WSF/IM 1**
> - Надежность и производительность. Эта оснастка не требует дополнительной настройки, но с ее помощью можно наблюдать только за производительностью компьютера в режиме основных серверных компонентов. Данные о надежности недоступны.

## <a name="managing-with-remote-desktop-services"></a>Управление с помощью службы удаленных рабочих столов

[Удаленный рабочий стол](../../remote/remote-desktop-services/welcome-to-rds.md) можно использовать для управления сервером Server Core с удаленных компьютеров.

Прежде чем можно будет получить доступ к Server Core, необходимо выполнить следующую команду: 

```
cscript C:\Windows\System32\Scregedit.wsf /ar 0
```

Это разрешит подключения к удаленному рабочему столу для администрирования.

## <a name="add-hardware-and-manage-drivers-locally"></a>Локальное Добавление оборудования и Управление драйверами

Чтобы добавить оборудование на сервер Server Core, следуйте инструкциям, предоставленным поставщиком оборудования для установки нового оборудования. 

Если оборудование не Plug and Play, необходимо вручную установить драйвер. Для этого скопируйте файлы драйверов во временное расположение на сервере, а затем выполните следующую команду:

```
pnputil –i –a <driverinf>
```

Где *дриверинф* — имя файла INF для драйвера.

Перезагрузите компьютер при появлении соответствующего запроса.

Чтобы узнать, какие драйверы установлены, выполните следующую команду: 

```
sc query type= driver
```

> [!NOTE] 
> Для успешного выполнения команды после знака равенства должен быть пробел.

Чтобы отключить драйвер устройства, выполните следующую команду:

```
sc delete <service_name>
```

Где *service_name* — имя службы, полученной при запуске **SC Query Type = Driver**.