---
title: Предотвращение создания Kerberos изменить пароль, которые используются секретные ключи RC4
ms.custom: na
ms.prod: windows-server-threshold
ms.topic: article
ms.assetid: de207d55-aa3d-4c16-bd3b-496db43663a4
manager: alanth
author: justinha
ms.technology: security-crdential-protection-and-management
ms.date: 11/09/2016
ms.openlocfilehash: 3cfa4ae2442f0cd1e3e4110a355da675fa2d61db
ms.sourcegitcommit: 0d0b32c8986ba7db9536e0b8648d4ddf9b03e452
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/17/2019
ms.locfileid: "59816275"
---
# <a name="preventing-kerberos-change-password-that-uses-rc4-secret-keys"></a>Предотвращение изменения пароля, в котором используются секретные ключи RC4, протоколом Kerberos

>Область применения. Windows Server (полугодовой канал), Windows Server 2016, Windows Server 2008 R2 и Windows Server 2008

В этом разделе для ИТ-специалистов описываются некоторые ограничения в протоколе Kerberos, которая может привести к злоумышленнику захватить учетной записи пользователя. Имеется ограничение в стандарте Kerberos Network Authentication Service (V5) (RFC 4120), хорошо известна в отрасли, при котором злоумышленник проверки подлинности имени пользователя или изменить пароль пользователя, если злоумышленник знает секретный ключ пользователя.

Владение пользователя производным пароль Kerberos секретные ключи (версия-кандидат 4 и Advanced Encryption Standard [AES] по умолчанию) проверяется во время обмена изменение пароля Kerberos в RFC 4757. Пароль пользователя открытым текстом никогда не предоставляется для центра распространения ключей (KDC) и по умолчанию контроллеры домена Active Directory не должна иметься копия паролей с неформатированным текстом для учетных записей. Если контроллер домена не поддерживает тип шифрования Kerberos, секретный ключ не может использоваться для изменения пароля. 

В операционных системах Windows, указанных в списке применяется к в начале этого раздела Чтобы заблокировать возможность менять пароли с помощью протокола Kerberos с секретные ключи RC4 тремя способами:

- Настройка пользователя необходима учетная запись, для включения параметра учетной записи смарт-карты для интерактивного входа в систему. Это ограничивает пользователю только вход с использованием допустимой смарт-карты, чтобы отклонения запросов службы проверки подлинности RC4 (AS-запросов). Чтобы задать параметры учетной записи для учетной записи, щелкните правой кнопкой мыши в учетной записи, выберите свойства и перейдите на вкладку учетной записи. 

- Отключите поддержку RC4 для Kerberos на всех контроллерах домена. Это требуется как минимум, режим работы домена Windows Server 2008 и среде, где все Kerberos клиентов, серверов приложений и отношения доверия к и из домена должен поддерживать AES. Поддержка AES появилась в Windows Server 2008 и Windows Vista.

    [!NOTE]
    Имеется известная проблема с отключение версии-кандидата 4, что может привести к перезапуску системы. См. следующие исправления:
    - [Windows Server 2012 R2](https://support.microsoft.com/en-us/kb/3038261)
    - [Windows Server 2012](https://support.microsoft.com/en-us/kb/3086213)
    - Исправления не доступна для более ранних версиях Windows Server

- Разверните набор доменов, для режима работы домена Windows Server 2012 R2 или более поздней версии и настроить пользователей как члены группы безопасности "защищенные пользователи". Так как эта функция нарушает работу не только об использовании RC4 в протоколе Kerberos см. в разделе ресурсов в следующем [см. также](#see-also) раздел.

## <a name="see-also"></a>См. также

- Сведения о том, как избежать использования типа шифрования RC4 в доменах Windows Server 2012 R2, см. в разделе [Protected Users Security Group](/../credentials-protection-and-management/protected-users-security-group.md), и [How to Configure Protected Accounts](/../credentials-protection-and-management/how-to-configure-protected-accounts.md).

- Пояснения о RFC 4120 и RFC 4757, см. в разделе [документах IETF](http://tools.ietf.org/html/).
