---
title: Предотвращение изменения пароля Kerberos, в котором используются секретные ключи RC4
ms.custom: na
ms.prod: windows-server
ms.topic: article
ms.assetid: de207d55-aa3d-4c16-bd3b-496db43663a4
manager: alanth
author: justinha
ms.technology: security-crdential-protection-and-management
ms.date: 11/09/2016
ms.openlocfilehash: 64018f7f118086f3d290cb1ffa9b8d2b3e81c27c
ms.sourcegitcommit: 6aff3d88ff22ea141a6ea6572a5ad8dd6321f199
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/27/2019
ms.locfileid: "71386268"
---
# <a name="preventing-kerberos-change-password-that-uses-rc4-secret-keys"></a>Предотвращение изменения пароля, в котором используются секретные ключи RC4, протоколом Kerberos

>Область применения. Windows Server (половина ежегодного канала), Windows Server 2016, Windows Server 2008 R2 и Windows Server 2008

В этом разделе для ИТ-специалистов объясняются некоторые ограничения протокола Kerberos, которые могут привести к управлению учетной записью пользователя злонамеренным пользователем. В стандарте службы проверки подлинности Kerberos (V5) (RFC 4120) имеется ограничение, которое хорошо известно в отрасли, что позволяет злоумышленнику пройти проверку подлинности как пользователя или изменить пароль пользователя, если злоумышленнику известен секретный ключ пользователя.

Проверка подлинности секретных ключей Kerberos пользователя (RC4 и AES [AES] по умолчанию) проверяется во время обмена паролями Kerberos в соответствии с RFC 4757. Пароль пользователя в формате обычного текста никогда не предоставляется центр распространения ключей (KDC), и по умолчанию Active Directory контроллеры домена не имеют копии паролей с открытым текстом для учетных записей. Если контроллер домена не поддерживает тип шифрования Kerberos, этот секретный ключ нельзя использовать для смены пароля. 

В операционных системах Windows, указанных в списке применимо к в начале этого раздела, существует три способа заблокировать возможность смены паролей с помощью протокола Kerberos с секретными ключами RC4.

- Настройка учетной записи пользователя для включения параметра учетной записи смарт-карта необходима для интерактивного входа в систему. Это позволяет пользователю только войти в систему с помощью допустимой смарт-карты, чтобы запросы службы проверки подлинности RC4 (AS-запросов секунду) были отклонены. Чтобы задать параметры учетной записи для учетной записи, щелкните учетную запись правой кнопкой мыши, выберите пункт Свойства и перейдите на вкладку Учетная запись. 

- Отключите поддержку RC4 для Kerberos на всех контроллерах домена. Для этого требуется не менее функционального уровня домена Windows Server 2008 и среды, в которой все клиенты Kerberos, серверы приложений и отношения доверия с доменом должны поддерживать алгоритм AES. Поддержка AES появилась в Windows Server 2008 и Windows Vista.

    [!NOTE]
    Существует известная неполадка при отключении RC4, которая может привести к перезагрузке системы. См. следующие исправления:
    - [Windows Server 2012 R2](https://support.microsoft.com/en-us/kb/3038261)
    - [Windows Server 2012](https://support.microsoft.com/en-us/kb/3086213)
    - Нет доступных исправлений для более ранних версий Windows Server

- Разверните домены, для которых задан режим работы домена Windows Server 2012 R2 или более поздней версии, и настройте пользователей в качестве членов группы безопасности "защищенные пользователи". Так как эта функция нарушает использование в протоколе Kerberos более чем RC4, см. раздел ресурсы в следующих разделах. [также](#see-also)

## <a name="see-also"></a>См. также

- Сведения о том, как предотвратить использование типа шифрования RC4 в доменах Windows Server 2012 R2, см. в статье [Группа безопасности защищенных пользователей](/../credentials-protection-and-management/protected-users-security-group.md)и [Настройка защищенных учетных записей](/../credentials-protection-and-management/how-to-configure-protected-accounts.md).

- Пояснения к RFC 4120 и RFC 4757 см. в документе [IETF](http://tools.ietf.org/html/).
