---
title: Добавьте сведения об узле для аттестации доверенного платформенного МОДУЛЯ
ms.custom: na
ms.prod: windows-server-threshold
ms.topic: article
ms.assetid: f0aa575b-b34e-4f6c-8416-ed3e398e0ad2
manager: dongill
author: rpsqrd
ms.technology: security-guarded-fabric
ms.date: 08/29/2018
ms.openlocfilehash: 3647c9708ad68dec0ac13c85fced2b12150ccf60
ms.sourcegitcommit: eaf071249b6eb6b1a758b38579a2d87710abfb54
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/31/2019
ms.locfileid: "66447191"
---
>Относится к: Windows Server 2019 г., Windows Server (полугодовой канал), Windows Server 2016

### <a name="add-host-information-for-tpm-trusted-attestation"></a>Добавьте сведения об узле для аттестации доверенного платформенного МОДУЛЯ

Для режима доверенного платформенного МОДУЛЯ администратор структуры захватывает три вида сведения об узле, каждый из которых необходимо добавить в конфигурацию HGS:

- Идентификатор доверенного платформенного МОДУЛЯ (EKpub) для каждого узла Hyper-V
- Политики целостности кода, белый список разрешенных двоичные файлы для узлов Hyper-V
- Базовый план доверенного платформенного МОДУЛЯ (измерения загрузки), представляющий набор Hyper-V размещает выполнения в одном классе оборудования

После структуре администратора сбор сведений, добавьте его в конфигурацию HGS, как описано в следующей процедуре.

1.  Получите XML-файлы, содержащие сведения EKpub и скопировать их на сервер HGS. Будет существовать один XML-файл для каждого узла. В консоли Windows PowerShell с повышенными привилегиями на сервере HGS, выполните следующую команду. Выполните команду для каждого из файлов XML.

    ```powershell
    Add-HgsAttestationTpmHost -Path <Path><Filename>.xml -Name <HostName>
    ```

    > [!NOTE]
    > Если возникает ошибка при добавлении идентификатора доверенного платформенного МОДУЛЯ в отношении недоверенного сертификата ключа подтверждения (EKCert), убедитесь, что [доверенные корневые сертификаты доверенного платформенного МОДУЛЯ были добавлены](guarded-fabric-install-trusted-tpm-root-certificates.md) к узлу HGS.
    > Кроме того некоторые поставщики доверенного платформенного МОДУЛЯ не используйте EKCerts.
    > Вы можете проверить, если EKCert отсутствует, откройте XML-файл в редакторе, например Блокноте, и проверка наличия сообщение об ошибке, указывающее, не EKCert был найден.
    > Если это так, и подлинность доверенного платформенного МОДУЛЯ на компьютере, можно использовать `-Force` флаг, чтобы переопределить такой проверки и добавьте идентификатор узла для HGS.

2. Получите политику целостности кода, который создан администратором структуры для узлов, в двоичном формате (*.p7b). Скопируйте его на сервер HGS. Затем выполните следующую команду.

    Для `<PolicyName>`, укажите имя для политики CI, описывающее тип узла, он применяется к. Рекомендуется присвоить ей имя изготовитель и модель компьютера и конфигурации любое специальное программное обеспечение, запустить его.<br>Для `<Path>`, укажите путь и имя политики целостности кода.

    ```powershell
    Add-HgsAttestationCIPolicy -Path <Path> -Name '<PolicyName>'
    ```

3. Получите файл TCGlog, захвативший администратору структуры из заданного узла. Скопируйте файл на сервер HGS. Затем выполните следующую команду. Как правило будет имя политики после класса оборудования, которое она представляет (например, «Изготовитель модели редакция»).

    ```powershell
    Add-HgsAttestationTpmPolicy -Path <Filename>.tcglog -Name '<PolicyName>'
    ```

На этом завершается процесс настройки кластер HGS для режима доверенного платформенного МОДУЛЯ. Администратор структуры может потребоваться необходимо указать два URL-адреса из HGS, чтобы завершить конфигурацию для узлов. Чтобы получить эти URL-адреса, на сервер HGS, запустите [Get-HgsServer](https://docs.microsoft.com/powershell/module/hgsserver/get-hgsserver?view=win10-ps).

## <a name="next-step"></a>Дальнейшие действия

> [!div class="nextstepaction"]
> [Подтверждение аттестации](guarded-fabric-confirm-hosts-can-attest-successfully.md)