---
title: Управление безопасностью транспортного уровня (TLS)
description: Безопасность Windows Server
ms.custom: na
ms.prod: windows-server-threshold
ms.reviewer: na
ms.suite: na
ms.technology: security-tls-ssl
ms.tgt_pltfrm: na
ms.topic: article
author: justinha
ms.author: justinha
manager: brianlic-msft
ms.date: 05/16/2018
ms.openlocfilehash: f691775d5ab24de8b23df048c13ec3d7c572833f
ms.sourcegitcommit: f6490192d686f0a1e0c2ebe471f98e30105c0844
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/10/2019
ms.locfileid: "70870294"
---
# <a name="manage-transport-layer-security-tls"></a>Управление безопасностью транспортного уровня (TLS)

>Относится к: Windows Server (половина ежегодного канала), Windows Server 2016, Windows 10

## <a name="configuring-tls-cipher-suite-order"></a>Настройка порядка комплектов шифров TLS

Разные версии Windows поддерживают разные наборы шифров TLS и порядок приоритетов. Порядок по умолчанию, поддерживаемый поставщиком Schannel (Майкрософт) в различных версиях Windows, см. в разделе комплекты [шифров в TLS/SSL (Schannel SSP)](https://msdn.microsoft.com/library/windows/desktop/aa374757.aspx) .

> [!NOTE] 
> Список комплектов шифров также можно изменить с помощью функций CNG. Дополнительные сведения см. в разделе [Определение приоритетов для наборов шифров SChannel](https://msdn.microsoft.com/library/windows/desktop/bb870930.aspx) .

Изменения в порядке набора шифров TLS вступят в силу при следующей загрузке. До перезапуска или завершения работы существующий заказ будет действовать.

> [!WARNING] 
> Обновление параметров реестра для порядка приоритетов по умолчанию не поддерживается и может быть сброшено с помощью обновлений обслуживания. 

### <a name="configuring-tls-cipher-suite-order-by-using-group-policy"></a>Настройка порядка комплектов шифров TLS с помощью групповая политика

Вы можете использовать порядок набора шифров SSL групповая политика параметры, чтобы настроить порядок комплекта шифров TLS по умолчанию.

1. В консоль управления групповыми политиками выберите **Конфигурация** > компьютера**Административные шаблоны** > **сети** > **Параметры конфигурации SSL**.
2. Дважды щелкните SSL-порядок комплекта **шифров**и выберите параметр **включено** .
3. Щелкните правой кнопкой мыши поле **комплекты шифров SSL** и выберите в раскрывающемся меню пункт **выбрать все** .

   ![Параметр групповой политики](../media/Transport-Layer-Security-protocol/ssl-cipher-suite-order-gp-setting.png)

4. Щелкните выделенный текст правой кнопкой мыши и выберите пункт **Копировать** во всплывающем меню.
5. Вставьте текст в текстовый редактор, например Notepad. exe, и обновите новый список заказов комплектов шифров.

   > [!NOTE]
   > Список порядка комплектов шифров TLS должен быть в формате, разделенном запятыми. Каждая строка комплекта шифров заканчивается запятой (,) с правой стороны. 
   > 
   > Кроме того, список комплектов шифров ограничен 1 023 символами.

6. Замените список в наборах **шифров SSL** на обновленный упорядоченный список.
7. Нажмите кнопку **OK** или **Применить**.

### <a name="configuring-tls-cipher-suite-order-by-using-mdm"></a>Настройка порядка комплектов шифров TLS с помощью MDM

CSP политики Windows 10 поддерживает настройку комплектов шифров TLS. Дополнительные сведения см. в разделе [Криптография и тлсЦиферсуитес](https://msdn.microsoft.com/windows/hardware/commercialize/customize/mdm/policy-configuration-service-provider#cryptography-tlsciphersuites) .

### <a name="configuring-tls-cipher-suite-order-by-using-tls-powershell-cmdlets"></a>Настройка порядка комплектов шифров TLS с помощью командлетов TLS PowerShell

Модуль TLS PowerShell поддерживает получение упорядоченного списка комплектов шифров TLS, отключение набора шифров и включение комплекта шифров. Дополнительные сведения см. в разделе [модуль TLS](https://technet.microsoft.com/itpro/powershell/windows/tls/tls) .

## <a name="configuring-tls-ecc-curve-order"></a>Настройка порядка кривых ECC TLS 

Начиная с Windows 10 & Windows Server 2016, порядок кривых ECC можно настроить независимо от порядка набора шифров. Если список порядка комплектов шифров TLS содержит суффиксы эллиптической кривой, они будут переопределены новым порядковым приоритетом эллиптической кривой, если они включены. Это позволяет организациям использовать объект групповая политика для настройки различных версий Windows с одинаковым порядком комплектов шифров.

> [!NOTE]
> До Windows 10 строки комплекта шифров были добавлены с эллиптической кривой для определения приоритета кривой.

### <a name="managing-windows-ecc-curves-using-certutil"></a>Управление кривыми ECC Windows с помощью CertUtil

Начиная с Windows 10 и Windows Server 2016, Windows предоставляет управление параметрами эллиптической кривой с помощью программы командной строки Certutil. exe. Параметры эллиптической кривой хранятся в бкриптпримитивес. dll. С помощью программы Certutil. exe администраторы могут добавлять и удалять параметры кривой в Windows, соответственно. Программа Certutil. exe сохраняет параметры кривой безопасно в реестре. Windows может начать использовать параметры кривой по имени, связанному с кривой.    

#### <a name="displaying-registered-curves"></a>Отображение зарегистрированных кривых

Используйте следующую команду программы Certutil. exe, чтобы отобразить список кривых, зарегистрированных для текущего компьютера.

```powershell
certutil.exe –displayEccCurve
```

![Кривые экрана certutil](../media/Transport-Layer-Security-protocol/certutil-display-curves.png)

*Рис. 1. выходные данные программы Certutil. exe для вывода списка зарегистрированных кривых.*

#### <a name="adding-a-new-curve"></a>Добавление новой кривой

Организации могут создавать и использовать параметры кривых, повторно прополнив Поиск другими доверенными сущностями.  
Администраторы, желающие использовать эти новые кривые в Windows, должны добавить кривую.  
Используйте следующую команду программы Certutil. exe для добавления кривой на текущий компьютер:

```powershell
Certutil —addEccCurue curveName curveParameters [curveOID] [curveType]
```

- Аргумент **курвенаме** представляет имя кривой, под которой были добавлены параметры кривой.
- Аргумент **курвепараметерс** представляет имя файла сертификата, содержащего параметры кривых, которые требуется добавить.
- Аргумент **курвеоид** представляет имя файла сертификата, содержащего идентификатор объекта (OID) параметров кривой, которые необходимо добавить (необязательно).
- Аргумент **курветипе** представляет десятичное значение именованной кривой из [реестра с именованием кривых EC](http://www.iana.org/assignments/tls-parameters/tls-parameters.xhtml#tls-parameters-8) (необязательно).

![Добавление кривых в certutil](../media/Transport-Layer-Security-protocol/certutil-add-curves.png)

*Рис. 2. Добавление кривой с помощью программы Certutil. exe.*

#### <a name="removing-a-previously-added-curve"></a>Удаление ранее добавленной кривой

Администраторы могут удалить ранее добавленную кривую с помощью следующей команды certutil. exe:

```powershell
Certutil.exe –deleteEccCurve curveName
```

Windows не может использовать именованную кривую после того, как администратор удалит кривую с компьютера.

## <a name="managing-windows-ecc-curves-using-group-policy"></a>Управление кривыми ECC Windows с помощью групповая политика

Организации могут распространять параметры кривой на корпоративную, присоединенную к домену компьютер, используя групповая политика и расширение реестра групповая политиканых предпочтений.  
Процесс распределения кривой:

1.  В Windows 10 и Windows Server 2016 используйте программу **certutil. exe** , чтобы добавить в Windows новую зарегистрированную именованную кривую.
2.  На этом же компьютере откройте консоль управления групповыми политиками (GPMC), создайте новый объект групповая политика и измените его.
3.  Выберите **Конфигурация компьютера | Предпочтения | Параметры Windows | Реестр**.  Щелкните правой кнопкой мыши **Реестр**. Наведите указатель мыши на пункт **создать** и выберите **элемент сбора**. Переименуйте элемент сбора в соответствии с именем кривой. Вы создадите один элемент сбора реестра для каждого раздела реестра в разделе *HKEY_LOCAL_MACHINE\CurrentControlSet\Control\Cryptography\ECCParameters*.
4.  Настройте вновь созданную коллекцию реестра предпочтений групповая политика, добавив новый **элемент реестра** для каждого значения реестра, указанного в разделе *HKEY_LOCAL_MACHINE\CurrentControlSet\Control\Cryptography\ECCParameters\[курвенаме ]* .
5.  Разверните объект групповая политика, содержащий элемент сбора групповая политика реестра, на компьютерах с Windows 10 и Windows Server 2016, которые должны получить новые именованные кривые.

    ![GPP распределить кривые](../media/Transport-Layer-Security-protocol/gpp-distribute-curves.png)

    *Рис. 3. Использование параметров групповая политика для распределения кривых*

## <a name="managing-tls-ecc-order"></a>Управление порядком TLS ECC

Начиная с Windows 10 и Windows Server 2016, можно использовать параметры групповой политики порядка кривых ECC, чтобы настроить порядок кривой ECC по умолчанию для TLS. Используя универсальный код коррекции ошибок и этот параметр, организации могут добавить собственные доверенные именованные кривые (которые утверждены для использования с TLS) в операционную систему, а затем добавить эти именованные кривые к приоритету кривой групповая политика параметр, чтобы обеспечить их использование в будущем TLS. подтверждения. Новые списки приоритетов кривых становятся активными при следующей перезагрузке после получения параметров политики.     

![GPP распределить кривые](../media/Transport-Layer-Security-protocol/gp-managing-tls-curve-priority-order.png)

*Рис. 4. Управление приоритетом кривой TLS с помощью групповая политика*


