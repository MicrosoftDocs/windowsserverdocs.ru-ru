---
title: "Транспортировкой параметры реестра Layer Security (TLS)"
description: "Безопасность Windows Server"
ms.custom: na
ms.prod: windows-server-threshold
ms.reviewer: na
ms.suite: na
ms.technology: security-tls-ssl
ms.tgt_pltfrm: na
ms.topic: article
author: justinha
ms.author: justinha
manager: brianlic-msft
ms.date: 08/07/2017
ms.openlocfilehash: 8ccfacc367a5d32438bebf22798479a07f6cbdfc
ms.sourcegitcommit: 583355400f6b0d880dc0ac6bc06f0efb50d674f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/17/2017
---
# <a name="transport-layer-security-tls-registry-settings"></a>Транспортировкой параметры реестра Layer Security (TLS)

>Область применения: Windows Server (канал точками годовой), Windows Server 2016, Windows Server 2008 R2, Windows Server 2008, Windows 10, Windows 8.1, Windows 8, Windows 7, Windows Vista

В этом справочном разделе для ИТ-специалистов содержит поддерживаемых реестра сведения о параметрах для реализации Windows протоколов Secure Sockets Layer (SSL) через поставщик поддержки безопасности Schannel (SSP) и протокол безопасности транспортного уровня (TLS). Разделы и подразделы реестра рассматриваются в этом разделе помогут вам администрировать и устранять неполадки Schannel SSP, а именно протоколов TLS и SSL. 

>[!Caution]
>Эти сведения предоставляются в виде справочника для использования при устранении неполадок или проверки правильности применения нужных параметров. Мы рекомендуем, что вы не изменяете непосредственно реестра Если отсутствует другая возможность.
>Изменения в реестре не проверяются редактором реестра или операционной системой Windows перед их применением. В результате могут сохраниться неверные значения, и это приводит к неустранимым ошибкам в системе. По возможности вместо редактирования реестра напрямую используйте групповую политику или другие средства Windows, таких как Microsoft Management Console (MMC) для выполнения задач. Если необходимо изменить реестр, соблюдайте крайнюю осторожность. 

## <a name="certificatemappingmethods"></a>CertificateMappingMethods 

Эта запись не существует в реестре по умолчанию. Значение по умолчанию — что поддерживаются все четыре метода сопоставления сертификатов, перечисленные ниже.

Если серверное приложение требует проверки подлинности клиента, Schannel автоматически пытается сопоставить сертификат, предоставленный клиентский компьютер с учетной записью пользователя. Вы можете проверять подлинность пользователей, войдите в систему сертификат клиента, создавая сопоставления, связывающие данные сведения с учетной записью пользователя Windows. После создания и включения сопоставления сертификатов каждый раз, когда клиент предоставляет сертификат клиента, серверное приложение автоматически связывает этого пользователя с соответствующей учетной записью Windows.

В большинстве случаев сертификат сопоставляется с учетной записью пользователя одним из двух способов: 

- Один сертификат сопоставляется с одной учетной записью пользователя (сопоставление "один к одному").
- Несколько сертификатов сопоставляются с одной учетной записью пользователя (сопоставление "многие к одному").

По умолчанию поставщик Schannel будет использовать следующие четыре метода сопоставления сертификатов, перечисленные в порядке приоритета:

1. Сопоставление сертификатов Kerberos service for user (S4U)
2. Сопоставление основного имени пользователя
3. Однозначное сопоставление (также известный как субъект/поставщик)
4. Многие к одному сопоставления

Применимые версии: указаны в **применяется к** список, который находится в начале этой статьи.

Путь в реестре: HKLM SYSTEM\CurrentControlSet\Control\SecurityProviders\SCHANNEL

## <a name="ciphers"></a>Шифров.

Настроив порядок комплектов шифров должны контролироваться шифров TLS/SSL. Дополнительные сведения см. в разделе [Настройка порядок комплектов шифров TLS](manage-tls.md#configuring-tls-cipher-suite-order).

Сведения о порядок комплектов шифров по умолчанию, которые используются Schannel SSP см. в разделе [комплекты шифров в TLS/SSL (Schannel SSP)](https://msdn.microsoft.com/library/windows/desktop/aa374757.aspx). 

##<a name="ciphersuites"></a>Шифров

Настройка шифров TLS/SSL можно выполнять с помощью групповой политики, MDM или PowerShell, в разделе [Настройка порядок комплектов шифров TLS](manage-tls.md#configuring-tls-cipher-suite-order) подробные сведения.

Сведения о порядок комплектов шифров по умолчанию, которые используются Schannel SSP см. в разделе [комплекты шифров в TLS/SSL (Schannel SSP)](https://msdn.microsoft.com/library/windows/desktop/aa374757.aspx). 


## <a name="clientcachetime"></a>ClientCacheTime

Эта запись определяет время, которое операционной системы в миллисекундах истекает срок действия записей кэша на стороне клиента. Значение 0 отключает кэширование безопасного подключения. Эта запись не существует в реестре по умолчанию. 

В первый раз, клиент подключается к серверу через Schannel SSP выполняется полное подтверждение TLS/SSL. После завершения главная копия секрета, комплект шифров и сертификаты хранятся в кэше сеанса на соответствующем клиенте и сервере.

Начиная с Windows Server 2008 и Windows Vista, время кэша клиента по умолчанию — 10 часов.

Путь в реестре: HKLM SYSTEM\CurrentControlSet\Control\SecurityProviders\SCHANNEL

Время кэша клиента по умолчанию

## <a name="fipsalgorithmpolicy"></a>FIPSAlgorithmPolicy

Эта запись определяет соответствие требованиям федерального стандарта обработки информации (FIPS). Значение по умолчанию — 0.

Применимые версии: указаны в **применяется к** список, который находится в начале этой статьи. 

Путь в реестре: HKLM SYSTEM\CurrentControlSet\Control\LSA

Комплекты шифров Windows Server FIPS: в разделе [поддерживаемые комплекты шифров и протоколы в поставщике Schannel SSP](https://technet.microsoft.com/library/dn786419.aspx).

## <a name="hashes"></a>Хэши

Настроив порядок комплектов шифров должны контролироваться алгоритмы хеширования TLS/SSL. В разделе [Настройка порядок комплектов шифров TLS](manage-tls.md#configuring-tls-cipher-suite-order) подробные сведения.

## <a name="issuercachesize"></a>IssuerCacheSize

Эта запись определяет размер кэша издателя и используется при сопоставлении издателя. Schannel SSP пытается сопоставить всех издателей в цепочке сертификатов клиента — не только прямого издателя сертификата клиента. Когда издатели не сопоставляются с учетной записью, что является типичным случаем, сервер может пытаться повторно сопоставлять то же имя издателя, сотни раз в секунду. 

Чтобы избежать этого, сервер имеет негативный кэш, и если имя издателя не соответствует учетной записи, оно добавляется в кэш, и Schannel SSP не будет пытаться сопоставить имя издателя, пока истечет срок действия записи кэша. Эта запись реестра указывает размер кэша. Эта запись не существует в реестре по умолчанию. Значение по умолчанию — 100. 

Применимые версии: указаны в **применяется к** список, который находится в начале этой статьи.

Путь в реестре: HKLM SYSTEM\CurrentControlSet\Control\SecurityProviders\SCHANNEL

## <a name="issuercachetime"></a>IssuerCacheTime

Эта запись определяет продолжительность интервала времени ожидания кэша в миллисекундах. Schannel SSP пытается сопоставить всех издателей в цепочке сертификатов клиента — не только прямого издателя сертификата клиента. В случае, когда издатели не соответствуют учетной записи, что является типичным случаем, сервер может пытаться повторно сопоставлять то же имя издателя, сотни раз в секунду.

Чтобы избежать этого, сервер имеет негативный кэш, и если имя издателя не соответствует учетной записи, оно добавляется в кэш, и Schannel SSP не будет пытаться сопоставить имя издателя, пока истечет срок действия записи кэша. Этот кэш сохраняется для повышения производительности, чтобы система не продолжала попытки сопоставить тех же издателей. Эта запись не существует в реестре по умолчанию. Значение по умолчанию — 10 минут.

Применимые версии: указаны в **применяется к** список, который находится в начале этой статьи.

Путь в реестре: HKLM SYSTEM\CurrentControlSet\Control\SecurityProviders\SCHANNEL

## <a name="keyexchangealgorithm---client-rsa-key-sizes"></a>KeyExchangeAlgorithm - клиента RSA ключа размеров

Эта запись определяет размеры ключей RSA клиента. 

Настроив порядок комплектов шифров должны контролироваться использованием алгоритмов обмена ключами.

Добавлен в Windows 10 версии 1507 и Windows Server 2016.

Путь в реестре: HKLM\SYSTEM\CurrentControlSet\Control\SecurityProviders\SCHANNEL\KeyExchangeAlgorithms\PKCS

Чтобы указать длина ключа минимальный поддерживаемый диапазон RSA для клиентского TLS, создайте **ClientMinKeyBitLength** запись. Эта запись не существует в реестре по умолчанию. После создания записи измените значение DWORD на нужный длина. Если не настроена, 1024 бит будет минимальным. 

Чтобы указать длина ключа максимальный поддерживаемый диапазон RSA для клиентского TLS, создайте **ClientMaxKeyBitLength** запись. Эта запись не существует в реестре по умолчанию. После создания записи измените значение DWORD на нужный длина. Если не настроена, более не применяется.

## <a name="keyexchangealgorithm---diffie-hellman-key-sizes"></a>KeyExchangeAlgorithm - размеры ключа Диффи-Хелмана

Эта запись определяет размеры ключа Диффи-Хелмана. 

Настроив порядок комплектов шифров должны контролироваться использованием алгоритмов обмена ключами.

Добавлен в Windows 10 версии 1507 и Windows Server 2016.

Путь в реестре: HKLM\SYSTEM\CurrentControlSet\Control\SecurityProviders\SCHANNEL\KeyExchangeAlgorithms\Diffie-Хелмана

Чтобы задать длина ключа минимальный поддерживаемый диапазон из Диффи-Helman для клиента TLS, создать **ClientMinKeyBitLength** запись. Эта запись не существует в реестре по умолчанию. После создания записи измените значение DWORD на нужный длина. Если не настроена, 1024 бит будет минимальным. 
 
Чтобы задать длина ключа максимальный поддерживаемый диапазон из Диффи-Helman для клиента TLS, создать **ClientMaxKeyBitLength** запись. Эта запись не существует в реестре по умолчанию. После создания записи измените значение DWORD на нужный длина. Если не настроена, более не применяется. 
 
Чтобы задать длину ключа бит Диффи-Helman для сервера по умолчанию TLS, создать **ServerMinKeyBitLength** запись. Эта запись не существует в реестре по умолчанию. После создания записи измените значение DWORD на нужный длина. Если не настроена, 2048 бит будет по умолчанию. 

## <a name="maximumcachesize"></a>Maximumcachesize значения

Эта запись определяет максимальное число элементов кэша. Установка для maximumcachesize значения 0 отключает кэш сеанса на стороне сервера и запрещает переподключение. В результате Lsass.exe будет потреблять дополнительный объем памяти для maximumcachesize значения по умолчанию. Каждый элемент кэша сеанса обычно требует от 2 до 4 КБ памяти. Эта запись не существует в реестре по умолчанию. Значение по умолчанию — 20000. 

Применимые версии: указаны в **применяется к** список, который находится в начале этой статьи.

Путь в реестре: HKLM SYSTEM\CurrentControlSet\Control\SecurityProviders\SCHANNEL

## <a name="messaging--fragment-parsing"></a>Обмена сообщениями — фрагмента синтаксический анализ

________________________________________
Эта запись определяет максимально допустимый размер фрагментированные сообщений подтверждения TLS, которые будут приняты. Сообщения, размер которых превышает разрешенный размер, не будут приняты и подтверждения TLS не удастся. Эти записи не существуют в реестре по умолчанию. 

При установке значения для 0x0 фрагментированные сообщения не обрабатываются и приведет к сбою подтверждения TLS. Это делает TLS клиенты или серверы на текущем компьютере несовместимых с RFC TLS. 

Максимальный допустимый размер может быть увеличено до 2 ^ 24-1 байт. Разрешение клиента или сервера, для чтения и хранить большие объемы данных непроверенных из сети не рекомендуется и будет потреблять дополнительный объем памяти для каждого контекста безопасности. 

Добавлена в Windows 7 и Windows Server 2008 R2.
Доступно обновление, которое позволяет Internet Explorer в Windows XP, Windows Vista или Windows Server 2008 для синтаксического анализа фрагментированные сообщения подтверждения TLS/SSL.

Путь в реестре: HKLM\SYSTEM\CurrentControlSet\Control\SecurityProviders\SCHANNEL\Messaging

Чтобы задать максимальный размер фрагментированные сообщений подтверждения TLS, которые будет принимать клиент TLS, создать **MessageLimitClient** запись. После создания записи измените значение DWORD на нужный длина. Если не задан, значение по умолчанию будет 0x8000 байт. 

Чтобы задать максимальный размер фрагментированные сообщений подтверждения TLS, которые будет принимать сервер TLS, когда нет проверки подлинности клиента, создание **MessageLimitServer** запись. После создания записи измените значение DWORD на нужный длина. Если не задан, значение по умолчанию будет 0x4000 байт. 

Чтобы задать максимальный размер фрагментированные сообщений подтверждения TLS, которые будет принимать сервер TLS, когда проверка подлинности клиента, создание **MessageLimitServerClientAuth** запись. После создания записи измените значение DWORD на нужный длина. Если не задан, значение по умолчанию будет 0x8000 байт. 

## <a name="sendtrustedissuerlist"></a>SendTrustedIssuerList

Эта запись управляет флагом, который используется при отправке списка доверенных издателей. В случае серверов, которые доверяют сотням центров сертификации для проверки подлинности клиента, существует слишком много издателей, чтобы сервер мог отправлять их все на клиентский компьютер при запросе проверки подлинности клиента. В этом случае можно задать этот раздел реестра, и вместо отправки неполного списка, Schannel SSP не будет отправлять любые список клиенту.

Не отправлять список доверенных издателей может повлиять на то, что клиент отправляет ответ на запрос сертификата клиента. Например получив запрос на проверку подлинности клиента, Internet Explorer отображает только сертификаты клиентов, которые связаны с одним из центров сертификации, отправленных сервером. Если сервер не передает список, Internet Explorer отображает все сертификаты клиента, установленные на клиенте. 

Это поведение может быть нежелательно. Например когда среда PKI включает Перекрестные сертификаты, сертификаты клиента и сервера не будет один и тот же корневой ЦС; Таким образом Internet Explorer не может выбрать сертификат, который связан с одним из ЦС сервера. Настроив сервер настроен не отправлять список доверенных издателей, Internet Explorer будет отправлять все сертификаты.

Эта запись не существует в реестре по умолчанию.

Поведение по умолчанию отправки списка доверенных издателей

| Версия Windows | Время |
|-----------------|------|
| Windows Server 2012 и Windows 8 и более поздних версий | FALSE |
| Windows Server 2008 R2 и Windows 7 и более ранних версий | ЗНАЧЕНИЕ TRUE |

Применимые версии: указаны в **применяется к** список, который находится в начале этой статьи.

Путь в реестре: HKLM SYSTEM\CurrentControlSet\Control\SecurityProviders\SCHANNEL

## <a name="servercachetime"></a>ServerCacheTime

Эта запись определяет время в миллисекундах, которое принимает операционной системе истекает срок действия записей кэша на стороне сервера. Значение 0 отключает кэш сеанса на стороне сервера и запрещает переподключение. В результате Lsass.exe будет потреблять дополнительный объем памяти для ServerCacheTime значения по умолчанию. Каждый элемент кэша сеанса обычно требует от 2 до 4 КБ памяти. Эта запись не существует в реестре по умолчанию. 

Применимые версии: указаны в **применяется к** список, который находится в начале этой статьи.

Путь в реестре: HKLM SYSTEM\CurrentControlSet\Control\SecurityProviders\SCHANNEL

Время кэша сервера по умолчанию: 10 часов

## <a name="ssl-20"></a>SSL 2.0

Этот подраздел управляет использованием SSL 2.0.

SSL 2.0, начиная с Windows 10 версии 1607 и Windows Server 2016 были удалены и больше не поддерживается.
Параметры по умолчанию протокол SSL 2.0, в разделе [протоколов TLS/SSL (Schannel SSP)](https://msdn.microsoft.com/library/windows/desktop/mt808159.aspx). 

Путь в реестре: HKLM SYSTEM\CurrentControlSet\Control\SecurityProviders\SCHANNEL\Protocols

Чтобы включить протокол SSL 2.0, создайте **включено** ввода в соответствующем подразделе. Эта запись не существует в реестре по умолчанию. После создания записи измените значение DWORD на 1. Чтобы отключить протокол, измените значение DWORD на 0.

Таблица подразделов SSL 2.0

| Подраздел | Описание |
|--------|-------------|
| Клиент | Управляет использованием SSL 2.0 на клиенте SSL. |
| Сервер | Управляет использованием SSL 2.0 на сервере SSL. |
| DisabledByDefault | Флаг, чтобы отключить SSL 2.0 по умолчанию. |

## <a name="ssl-30"></a>SSL 3.0

Этот подраздел управляет использованием SSL 3.0.

Начиная с Windows 10 версии 1607 и Windows Server 2016, SSL 3.0 отключен по умолчанию. Параметры по умолчанию SSL 3.0, в разделе [протоколов TLS/SSL (Schannel SSP)](https://msdn.microsoft.com/library/windows/desktop/mt808159.aspx). 

Путь в реестре: HKLM SYSTEM\CurrentControlSet\Control\SecurityProviders\SCHANNEL\Protocols

Чтобы включить протокол SSL 3.0, создайте запись включена в соответствующем подразделе. Эта запись не существует в реестре по умолчанию. После создания записи измените значение DWORD на 1. Чтобы отключить протокол, измените значение DWORD на 0.

Таблица подразделов SSL 3.0

| Подраздел | Описание |
|--------|-------------|
| Клиент | Управляет использованием SSL 3.0 на стороне клиента SSL. |
| Сервер | Управляет использованием SSL 3.0 на SSL-серверу. |
| DisabledByDefault | Флаг, чтобы отключить SSL 3.0 по умолчанию. |

## <a name="tls-10"></a>ПРОТОКОЛ TLS 1.0

Этот подраздел управляет использованием TLS 1.0.

Параметры по умолчанию для TLS 1.0, см. в разделе [протоколов TLS/SSL (Schannel SSP)](https://msdn.microsoft.com/library/windows/desktop/mt808159.aspx).

Путь в реестре: HKLM SYSTEM\CurrentControlSet\Control\SecurityProviders\SCHANNEL\Protocols

Чтобы отключить протокол TLS 1.0, создайте **включено** ввода в соответствующем подразделе. Эта запись не существует в реестре по умолчанию. После создания записи измените значение DWORD на 0. Чтобы включить протокол, измените значение DWORD на 1.

Таблица подразделов TLS 1.0

| Подраздел | Описание |
|--------|-------------|
| Клиент | Управляет использованием TLS 1.0 на клиенте TLS. |
| Сервер | Управляет использованием TLS 1.0 на сервер TLS. |
| DisabledByDefault | Флаг, чтобы отключить TLS 1.0 по умолчанию. |

## <a name="tls-11"></a>TLS 1.1

Этот подраздел управляет использованием TLS 1.1.

Параметры по умолчанию TLS 1.1, в разделе [протоколов TLS/SSL (Schannel SSP)](https://msdn.microsoft.com/library/windows/desktop/mt808159.aspx).

>[!Note] 
>TLS 1.1 включить и задействовать на серверах под управлением Windows Server 2008 R2, необходимо создать **DisabledByDefault** ввода в соответствующем подразделе (клиента, сервера) и выберите значение «0». Операция не будет отображаться в реестре, и он имеет значение «1» по умолчанию.

Путь в реестре: HKLM SYSTEM\CurrentControlSet\Control\SecurityProviders\SCHANNEL\Protocols

Чтобы отключить протокол TLS 1.1, создайте **включено** ввода в соответствующем подразделе. Эта запись не существует в реестре по умолчанию. После создания записи измените значение DWORD на 0. Чтобы включить протокол, измените значение DWORD на 1.

Таблица подразделов TLS 1.1

| Подраздел | Описание |
|--------|-------------|
| Клиент | Управляет использованием TLS 1.1 на клиенте TLS. |
| Сервер | Управляет использованием TLS 1.1 на сервер TLS. |
| DisabledByDefault | Флаг, чтобы отключить TLS 1.1 по умолчанию. |

## <a name="tls-12"></a>TLS 1.2

Этот подраздел управляет использованием TLS 1.2.

Параметры TLS 1.2 по умолчанию, в разделе [протоколов TLS/SSL (Schannel SSP)](https://msdn.microsoft.com/library/windows/desktop/mt808159.aspx).

>[!Note] 
>Чтобы включить и задействовать на серверах под управлением Windows Server 2008 R2 TLS 1.2, необходимо создать **DisabledByDefault** ввода в соответствующем подразделе (клиента, сервера) и выберите значение «0». Операция не будет отображаться в реестре, и он имеет значение «1» по умолчанию.

Путь в реестре: HKLM SYSTEM\CurrentControlSet\Control\SecurityProviders\SCHANNEL\Protocols

Чтобы отключить протокол TLS 1.2, создайте **включено** ввода в соответствующем подразделе. Эта запись не существует в реестре по умолчанию. После создания записи измените значение DWORD на 0. Чтобы включить протокол, измените значение DWORD на 1.

Таблица подразделов TLS 1.2

| Подраздел | Описание |
|--------|-------------|
| Клиент | Управляет использованием TLS 1.2 на клиенте TLS. |
| Сервер | Управляет использованием TLS 1.2 на сервер TLS. |
| DisabledByDefault | Флаг, чтобы отключить TLS 1.2 по умолчанию. |

## <a name="dtls-10"></a>ПРОТОКОЛ DTLS 1.0

Этот подраздел управляет использованием DTLS 1.0.

Параметры по умолчанию протокол DTLS 1.0, в разделе [протоколов TLS/SSL (Schannel SSP)](https://msdn.microsoft.com/library/windows/desktop/mt808159.aspx).

Путь в реестре: HKLM SYSTEM\CurrentControlSet\Control\SecurityProviders\SCHANNEL\Protocols

Чтобы отключить протокол DTLS 1.0, создайте **включено** ввода в соответствующем подразделе. Эта запись не существует в реестре по умолчанию. После создания записи измените значение DWORD на 0. Чтобы включить протокол, измените значение DWORD на 1.

Таблица подразделов DTLS 1.0

| Подраздел | Описание |
|--------|-------------|
| Клиент | Управляет использованием DTLS 1.0 на клиенте DTLS. |
| Сервер | Управляет использованием DTLS 1.0 на сервере DTLS. |
| DisabledByDefault | Флаг, чтобы отключить протокол DTLS 1.0 по умолчанию. |

## <a name="dtls-12"></a>ПРОТОКОЛ DTLS ВЕРСИИ 1.2

Этот подраздел управляет использованием DTLS 1.2.

Параметры по умолчанию DTLS 1.2, см. [протоколов TLS/SSL (Schannel SSP)](https://msdn.microsoft.com/library/windows/desktop/mt808159.aspx).

Путь в реестре: HKLM SYSTEM\CurrentControlSet\Control\SecurityProviders\SCHANNEL\Protocols

Чтобы отключить протокол DTLS версии 1.2, создайте **включено** ввода в соответствующем подразделе. Эта запись не существует в реестре по умолчанию. После создания записи измените значение DWORD на 0. Чтобы включить протокол, измените значение DWORD на 1.

Таблица подразделов 1.2, протокол DTLS

| Подраздел | Описание |
|--------|-------------|
| Клиент | Управляет использованием DTLS 1.2 на клиенте DTLS. |
| Сервер | Управляет использованием DTLS 1.2 на сервере DTLS. |
| DisabledByDefault | Флаг, чтобы отключить протокол DTLS 1.2 по умолчанию. |

